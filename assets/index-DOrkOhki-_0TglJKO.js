import{i as s,a as u}from"./index-D6fLMv29-COUJrQhB.js";import{$ as d,e as f,P as p,f as h,D as P,g as m,b as g}from"./index-BMqmDD-m.js";function C(n){var e;return n.childCount<=1&&!((e=n.firstChild)!=null&&e.content.size)}function b(n,e){const{selection:t}=n;if(!t.empty)return null;const o=t.$anchor,r=o.parent;if(r.content.size>0||m(a=>a.type.name==="table")(o))return null;const i=o.before();return g.node(i,i+r.nodeSize,{class:"crepe-placeholder","data-placeholder":e})}const c=d({text:"Please enter...",mode:"block"},"placeholderConfigCtx"),y=f(n=>new p({key:new h("CREPE_PLACEHOLDER"),props:{decorations:e=>{var t;const o=n.get(c.key);if(o.mode==="doc"&&!C(e.doc)||s(e.selection)||u(e.selection))return null;const r=(t=o.text)!=null?t:"Please enter...",l=b(e,r);return l?P.create(e.doc,[l]):null}}})),k=(n,e)=>{n.config(t=>{e&&t.update(c.key,o=>({...o,...e}))}).use(y).use(c)};export{k as defineFeature,c as placeholderConfig,y as placeholderPlugin};
