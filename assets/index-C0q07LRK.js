const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B3KiKTSt-_rDVJLsv.js","assets/index.es-Ux5liqah.js","assets/functions-Bsik6ikd-Dr945oKc.js","assets/hooks-DzxriSVi.js","assets/floating-ui.dom-DJfcjnnZ.js","assets/index-Cuk7cL-r-CBBtfUth.js","assets/index-DcRgwPLd-FgfmBf_t.js","assets/index.es-Csx6p027.js","assets/index.es-CNRhpG56.js","assets/index-CRsctFKI.js","assets/index-BFsG6770-CC7uhXqY.js","assets/index.es-CAT4Gnff.js","assets/index-CEOsxgzJ-Bhu-EhpW.js","assets/index-D6fLMv29-COUJrQhB.js","assets/index-DOrkOhki-DI4wdo-p.js","assets/index-H9uklzH0-BHrmks9D.js","assets/inline-latex-C9IGAXXQ-BqxI35r3.js","assets/index-CBrOT1fW-C8H1Hnnv.js","assets/index-x2oo_GmY-BmJ442X9.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ly={exports:{}},bd={},ay={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw;function vC(){if(uw)return ut;uw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function w(M){return M===null||typeof M!="object"?null:(M=g&&M[g]||M["@@iterator"],typeof M=="function"?M:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,A={};function P(M,R,N){this.props=M,this.context=R,this.refs=A,this.updater=N||k}P.prototype.isReactComponent={},P.prototype.setState=function(M,R){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,R,"setState")},P.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function F(){}F.prototype=P.prototype;function V(M,R,N){this.props=M,this.context=R,this.refs=A,this.updater=N||k}var I=V.prototype=new F;I.constructor=V,b(I,P.prototype),I.isPureReactComponent=!0;var W=Array.isArray,B=Object.prototype.hasOwnProperty,z={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function Q(M,R,N){var re,ee={},ne=null,he=null;if(R!=null)for(re in R.ref!==void 0&&(he=R.ref),R.key!==void 0&&(ne=""+R.key),R)B.call(R,re)&&!H.hasOwnProperty(re)&&(ee[re]=R[re]);var ke=arguments.length-2;if(ke===1)ee.children=N;else if(1<ke){for(var Me=Array(ke),je=0;je<ke;je++)Me[je]=arguments[je+2];ee.children=Me}if(M&&M.defaultProps)for(re in ke=M.defaultProps,ke)ee[re]===void 0&&(ee[re]=ke[re]);return{$$typeof:n,type:M,key:ne,ref:he,props:ee,_owner:z.current}}function q(M,R){return{$$typeof:n,type:M.type,key:R,ref:M.ref,props:M.props,_owner:M._owner}}function _(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function U(M){var R={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(N){return R[N]})}var D=/\/+/g;function G(M,R){return typeof M=="object"&&M!==null&&M.key!=null?U(""+M.key):R.toString(36)}function le(M,R,N,re,ee){var ne=typeof M;(ne==="undefined"||ne==="boolean")&&(M=null);var he=!1;if(M===null)he=!0;else switch(ne){case"string":case"number":he=!0;break;case"object":switch(M.$$typeof){case n:case e:he=!0}}if(he)return he=M,ee=ee(he),M=re===""?"."+G(he,0):re,W(ee)?(N="",M!=null&&(N=M.replace(D,"$&/")+"/"),le(ee,R,N,"",function(je){return je})):ee!=null&&(_(ee)&&(ee=q(ee,N+(!ee.key||he&&he.key===ee.key?"":(""+ee.key).replace(D,"$&/")+"/")+M)),R.push(ee)),1;if(he=0,re=re===""?".":re+":",W(M))for(var ke=0;ke<M.length;ke++){ne=M[ke];var Me=re+G(ne,ke);he+=le(ne,R,N,Me,ee)}else if(Me=w(M),typeof Me=="function")for(M=Me.call(M),ke=0;!(ne=M.next()).done;)ne=ne.value,Me=re+G(ne,ke++),he+=le(ne,R,N,Me,ee);else if(ne==="object")throw R=String(M),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return he}function oe(M,R,N){if(M==null)return M;var re=[],ee=0;return le(M,re,"","",function(ne){return R.call(N,ne,ee++)}),re}function ye(M){if(M._status===-1){var R=M._result;R=R(),R.then(function(N){(M._status===0||M._status===-1)&&(M._status=1,M._result=N)},function(N){(M._status===0||M._status===-1)&&(M._status=2,M._result=N)}),M._status===-1&&(M._status=0,M._result=R)}if(M._status===1)return M._result.default;throw M._result}var de={current:null},Y={transition:null},C={ReactCurrentDispatcher:de,ReactCurrentBatchConfig:Y,ReactCurrentOwner:z};function x(){throw Error("act(...) is not supported in production builds of React.")}return ut.Children={map:oe,forEach:function(M,R,N){oe(M,function(){R.apply(this,arguments)},N)},count:function(M){var R=0;return oe(M,function(){R++}),R},toArray:function(M){return oe(M,function(R){return R})||[]},only:function(M){if(!_(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},ut.Component=P,ut.Fragment=t,ut.Profiler=i,ut.PureComponent=V,ut.StrictMode=r,ut.Suspense=f,ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C,ut.act=x,ut.cloneElement=function(M,R,N){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var re=b({},M.props),ee=M.key,ne=M.ref,he=M._owner;if(R!=null){if(R.ref!==void 0&&(ne=R.ref,he=z.current),R.key!==void 0&&(ee=""+R.key),M.type&&M.type.defaultProps)var ke=M.type.defaultProps;for(Me in R)B.call(R,Me)&&!H.hasOwnProperty(Me)&&(re[Me]=R[Me]===void 0&&ke!==void 0?ke[Me]:R[Me])}var Me=arguments.length-2;if(Me===1)re.children=N;else if(1<Me){ke=Array(Me);for(var je=0;je<Me;je++)ke[je]=arguments[je+2];re.children=ke}return{$$typeof:n,type:M.type,key:ee,ref:ne,props:re,_owner:he}},ut.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:o,_context:M},M.Consumer=M},ut.createElement=Q,ut.createFactory=function(M){var R=Q.bind(null,M);return R.type=M,R},ut.createRef=function(){return{current:null}},ut.forwardRef=function(M){return{$$typeof:u,render:M}},ut.isValidElement=_,ut.lazy=function(M){return{$$typeof:m,_payload:{_status:-1,_result:M},_init:ye}},ut.memo=function(M,R){return{$$typeof:p,type:M,compare:R===void 0?null:R}},ut.startTransition=function(M){var R=Y.transition;Y.transition={};try{M()}finally{Y.transition=R}},ut.unstable_act=x,ut.useCallback=function(M,R){return de.current.useCallback(M,R)},ut.useContext=function(M){return de.current.useContext(M)},ut.useDebugValue=function(){},ut.useDeferredValue=function(M){return de.current.useDeferredValue(M)},ut.useEffect=function(M,R){return de.current.useEffect(M,R)},ut.useId=function(){return de.current.useId()},ut.useImperativeHandle=function(M,R,N){return de.current.useImperativeHandle(M,R,N)},ut.useInsertionEffect=function(M,R){return de.current.useInsertionEffect(M,R)},ut.useLayoutEffect=function(M,R){return de.current.useLayoutEffect(M,R)},ut.useMemo=function(M,R){return de.current.useMemo(M,R)},ut.useReducer=function(M,R,N){return de.current.useReducer(M,R,N)},ut.useRef=function(M){return de.current.useRef(M)},ut.useState=function(M){return de.current.useState(M)},ut.useSyncExternalStore=function(M,R,N){return de.current.useSyncExternalStore(M,R,N)},ut.useTransition=function(){return de.current.useTransition()},ut.version="18.3.1",ut}var cw;function tv(){return cw||(cw=1,ay.exports=vC()),ay.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fw;function wC(){if(fw)return bd;fw=1;var n=tv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,f,p){var m,g={},w=null,k=null;p!==void 0&&(w=""+p),f.key!==void 0&&(w=""+f.key),f.ref!==void 0&&(k=f.ref);for(m in f)r.call(f,m)&&!o.hasOwnProperty(m)&&(g[m]=f[m]);if(u&&u.defaultProps)for(m in f=u.defaultProps,f)g[m]===void 0&&(g[m]=f[m]);return{$$typeof:e,type:u,key:w,ref:k,props:g,_owner:i.current}}return bd.Fragment=t,bd.jsx=l,bd.jsxs=l,bd}var hw;function kC(){return hw||(hw=1,ly.exports=wC()),ly.exports}var vo=kC(),Xe=tv();const Mx=Sp(Xe);var xm={},uy={exports:{}},Hr={},cy={exports:{}},fy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dw;function xC(){return dw||(dw=1,function(n){function e(Y,C){var x=Y.length;Y.push(C);e:for(;0<x;){var M=x-1>>>1,R=Y[M];if(0<i(R,C))Y[M]=C,Y[x]=R,x=M;else break e}}function t(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var C=Y[0],x=Y.pop();if(x!==C){Y[0]=x;e:for(var M=0,R=Y.length,N=R>>>1;M<N;){var re=2*(M+1)-1,ee=Y[re],ne=re+1,he=Y[ne];if(0>i(ee,x))ne<R&&0>i(he,ee)?(Y[M]=he,Y[ne]=x,M=ne):(Y[M]=ee,Y[re]=x,M=re);else if(ne<R&&0>i(he,x))Y[M]=he,Y[ne]=x,M=ne;else break e}}return C}function i(Y,C){var x=Y.sortIndex-C.sortIndex;return x!==0?x:Y.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var f=[],p=[],m=1,g=null,w=3,k=!1,b=!1,A=!1,P=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(Y){for(var C=t(p);C!==null;){if(C.callback===null)r(p);else if(C.startTime<=Y)r(p),C.sortIndex=C.expirationTime,e(f,C);else break;C=t(p)}}function W(Y){if(A=!1,I(Y),!b)if(t(f)!==null)b=!0,ye(B);else{var C=t(p);C!==null&&de(W,C.startTime-Y)}}function B(Y,C){b=!1,A&&(A=!1,F(Q),Q=-1),k=!0;var x=w;try{for(I(C),g=t(f);g!==null&&(!(g.expirationTime>C)||Y&&!U());){var M=g.callback;if(typeof M=="function"){g.callback=null,w=g.priorityLevel;var R=M(g.expirationTime<=C);C=n.unstable_now(),typeof R=="function"?g.callback=R:g===t(f)&&r(f),I(C)}else r(f);g=t(f)}if(g!==null)var N=!0;else{var re=t(p);re!==null&&de(W,re.startTime-C),N=!1}return N}finally{g=null,w=x,k=!1}}var z=!1,H=null,Q=-1,q=5,_=-1;function U(){return!(n.unstable_now()-_<q)}function D(){if(H!==null){var Y=n.unstable_now();_=Y;var C=!0;try{C=H(!0,Y)}finally{C?G():(z=!1,H=null)}}else z=!1}var G;if(typeof V=="function")G=function(){V(D)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,oe=le.port2;le.port1.onmessage=D,G=function(){oe.postMessage(null)}}else G=function(){P(D,0)};function ye(Y){H=Y,z||(z=!0,G())}function de(Y,C){Q=P(function(){Y(n.unstable_now())},C)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_continueExecution=function(){b||k||(b=!0,ye(B))},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(Y){switch(w){case 1:case 2:case 3:var C=3;break;default:C=w}var x=w;w=C;try{return Y()}finally{w=x}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Y,C){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var x=w;w=Y;try{return C()}finally{w=x}},n.unstable_scheduleCallback=function(Y,C,x){var M=n.unstable_now();switch(typeof x=="object"&&x!==null?(x=x.delay,x=typeof x=="number"&&0<x?M+x:M):x=M,Y){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=x+R,Y={id:m++,callback:C,priorityLevel:Y,startTime:x,expirationTime:R,sortIndex:-1},x>M?(Y.sortIndex=x,e(p,Y),t(f)===null&&Y===t(p)&&(A?(F(Q),Q=-1):A=!0,de(W,x-M))):(Y.sortIndex=R,e(f,Y),b||k||(b=!0,ye(B))),Y},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(Y){var C=w;return function(){var x=w;w=C;try{return Y.apply(this,arguments)}finally{w=x}}}}(fy)),fy}var pw;function Nx(){return pw||(pw=1,cy.exports=xC()),cy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mw;function SC(){if(mw)return Hr;mw=1;var n=tv(),e=Nx();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function w(s){return f.call(g,s)?!0:f.call(m,s)?!1:p.test(s)?g[s]=!0:(m[s]=!0,!1)}function k(s,a,d,y){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return y?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function b(s,a,d,y){if(a===null||typeof a>"u"||k(s,a,d,y))return!0;if(y)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function A(s,a,d,y,S,E,L){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=y,this.attributeNamespace=S,this.mustUseProperty=d,this.propertyName=s,this.type=a,this.sanitizeURL=E,this.removeEmptyString=L}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){P[s]=new A(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];P[a]=new A(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){P[s]=new A(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){P[s]=new A(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){P[s]=new A(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){P[s]=new A(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){P[s]=new A(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){P[s]=new A(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){P[s]=new A(s,5,!1,s.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function V(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(F,V);P[a]=new A(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(F,V);P[a]=new A(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(F,V);P[a]=new A(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){P[s]=new A(s,1,!1,s.toLowerCase(),null,!1,!1)}),P.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){P[s]=new A(s,1,!1,s.toLowerCase(),null,!0,!0)});function I(s,a,d,y){var S=P.hasOwnProperty(a)?P[a]:null;(S!==null?S.type!==0:y||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(b(a,d,S,y)&&(d=null),y||S===null?w(a)&&(d===null?s.removeAttribute(a):s.setAttribute(a,""+d)):S.mustUseProperty?s[S.propertyName]=d===null?S.type===3?!1:"":d:(a=S.attributeName,y=S.attributeNamespace,d===null?s.removeAttribute(a):(S=S.type,d=S===3||S===4&&d===!0?"":""+d,y?s.setAttributeNS(y,a,d):s.setAttribute(a,d))))}var W=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),z=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),U=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),de=Symbol.for("react.offscreen"),Y=Symbol.iterator;function C(s){return s===null||typeof s!="object"?null:(s=Y&&s[Y]||s["@@iterator"],typeof s=="function"?s:null)}var x=Object.assign,M;function R(s){if(M===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);M=a&&a[1]||""}return`
`+M+s}var N=!1;function re(s,a){if(!s||N)return"";N=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(fe){var y=fe}Reflect.construct(s,[],a)}else{try{a.call()}catch(fe){y=fe}s.call(a.prototype)}else{try{throw Error()}catch(fe){y=fe}s()}}catch(fe){if(fe&&y&&typeof fe.stack=="string"){for(var S=fe.stack.split(`
`),E=y.stack.split(`
`),L=S.length-1,K=E.length-1;1<=L&&0<=K&&S[L]!==E[K];)K--;for(;1<=L&&0<=K;L--,K--)if(S[L]!==E[K]){if(L!==1||K!==1)do if(L--,K--,0>K||S[L]!==E[K]){var X=`
`+S[L].replace(" at new "," at ");return s.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",s.displayName)),X}while(1<=L&&0<=K);break}}}finally{N=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?R(s):""}function ee(s){switch(s.tag){case 5:return R(s.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return s=re(s.type,!1),s;case 11:return s=re(s.type.render,!1),s;case 1:return s=re(s.type,!0),s;default:return""}}function ne(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case H:return"Fragment";case z:return"Portal";case q:return"Profiler";case Q:return"StrictMode";case G:return"Suspense";case le:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case U:return(s.displayName||"Context")+".Consumer";case _:return(s._context.displayName||"Context")+".Provider";case D:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case oe:return a=s.displayName||null,a!==null?a:ne(s.type)||"Memo";case ye:a=s._payload,s=s._init;try{return ne(s(a))}catch{}}return null}function he(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(a);case 8:return a===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function ke(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Me(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function je(s){var a=Me(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),y=""+s[a];if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var S=d.get,E=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return S.call(this)},set:function(L){y=""+L,E.call(this,L)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return y},setValue:function(L){y=""+L},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function $e(s){s._valueTracker||(s._valueTracker=je(s))}function pt(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var d=a.getValue(),y="";return s&&(y=Me(s)?s.checked?"true":"false":s.value),s=y,s!==d?(a.setValue(s),!0):!1}function ln(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Pt(s,a){var d=a.checked;return x({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function an(s,a){var d=a.defaultValue==null?"":a.defaultValue,y=a.checked!=null?a.checked:a.defaultChecked;d=ke(a.value!=null?a.value:d),s._wrapperState={initialChecked:y,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Eo(s,a){a=a.checked,a!=null&&I(s,"checked",a,!1)}function En(s,a){Eo(s,a);var d=ke(a.value),y=a.type;if(d!=null)y==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(y==="submit"||y==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?Ji(s,a.type,d):a.hasOwnProperty("defaultValue")&&Ji(s,a.type,ke(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function en(s,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var y=a.type;if(!(y!=="submit"&&y!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,d||a===s.value||(s.value=a),s.defaultValue=a}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function Ji(s,a,d){(a!=="number"||ln(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var kn=Array.isArray;function bt(s,a,d,y){if(s=s.options,a){a={};for(var S=0;S<d.length;S++)a["$"+d[S]]=!0;for(d=0;d<s.length;d++)S=a.hasOwnProperty("$"+s[d].value),s[d].selected!==S&&(s[d].selected=S),S&&y&&(s[d].defaultSelected=!0)}else{for(d=""+ke(d),a=null,S=0;S<s.length;S++){if(s[S].value===d){s[S].selected=!0,y&&(s[S].defaultSelected=!0);return}a!==null||s[S].disabled||(a=s[S])}a!==null&&(a.selected=!0)}}function Nt(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return x({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function dr(s,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(t(92));if(kn(d)){if(1<d.length)throw Error(t(93));d=d[0]}a=d}a==null&&(a=""),d=a}s._wrapperState={initialValue:ke(d)}}function fs(s,a){var d=ke(a.value),y=ke(a.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),a.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),y!=null&&(s.defaultValue=""+y)}function pr(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function me(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Te(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?me(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Ue,rt=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,y,S){MSApp.execUnsafeLocalFunction(function(){return s(a,d,y,S)})}:s}(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(Ue=Ue||document.createElement("div"),Ue.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Ue.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function ft(s,a){if(a){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=a;return}}s.textContent=a}var un={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ei=["Webkit","ms","Moz","O"];Object.keys(un).forEach(function(s){ei.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),un[a]=un[s]})});function er(s,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||un.hasOwnProperty(s)&&un[s]?(""+a).trim():a+"px"}function xi(s,a){s=s.style;for(var d in a)if(a.hasOwnProperty(d)){var y=d.indexOf("--")===0,S=er(d,a[d],y);d==="float"&&(d="cssFloat"),y?s.setProperty(d,S):s[d]=S}}var Gi=x({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cn(s,a){if(a){if(Gi[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Mr(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mr=null;function Qf(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Yf=null,hs=null,ds=null;function jp(s){if(s=Nn(s)){if(typeof Yf!="function")throw Error(t(280));var a=s.stateNode;a&&(a=gc(a),Yf(s.stateNode,s.type,a))}}function $p(s){hs?ds?ds.push(s):ds=[s]:hs=s}function Hp(){if(hs){var s=hs,a=ds;if(ds=hs=null,jp(s),a)for(s=0;s<a.length;s++)jp(a[s])}}function Vp(s,a){return s(a)}function Xf(){}var Zf=!1;function qp(s,a,d){if(Zf)return s(a,d);Zf=!0;try{return Vp(s,a,d)}finally{Zf=!1,(hs!==null||ds!==null)&&(Xf(),Hp())}}function fa(s,a){var d=s.stateNode;if(d===null)return null;var y=gc(d);if(y===null)return null;d=y[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(s=s.type,y=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!y;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(t(231,a,typeof d));return d}var ha=!1;if(u)try{var da={};Object.defineProperty(da,"passive",{get:function(){ha=!0}}),window.addEventListener("test",da,da),window.removeEventListener("test",da,da)}catch{ha=!1}function eh(s,a,d,y,S,E,L,K,X){var fe=Array.prototype.slice.call(arguments,3);try{a.apply(d,fe)}catch(Se){this.onError(Se)}}var pa=!1,Uu=null,Wu=!1,th=null,rg={onError:function(s){pa=!0,Uu=s}};function ig(s,a,d,y,S,E,L,K,X){pa=!1,Uu=null,eh.apply(rg,arguments)}function og(s,a,d,y,S,E,L,K,X){if(ig.apply(this,arguments),pa){if(pa){var fe=Uu;pa=!1,Uu=null}else throw Error(t(198));Wu||(Wu=!0,th=fe)}}function ps(s){var a=s,d=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(d=a.return),s=a.return;while(s)}return a.tag===3?d:null}function nh(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Kp(s){if(ps(s)!==s)throw Error(t(188))}function sg(s){var a=s.alternate;if(!a){if(a=ps(s),a===null)throw Error(t(188));return a!==s?null:s}for(var d=s,y=a;;){var S=d.return;if(S===null)break;var E=S.alternate;if(E===null){if(y=S.return,y!==null){d=y;continue}break}if(S.child===E.child){for(E=S.child;E;){if(E===d)return Kp(S),s;if(E===y)return Kp(S),a;E=E.sibling}throw Error(t(188))}if(d.return!==y.return)d=S,y=E;else{for(var L=!1,K=S.child;K;){if(K===d){L=!0,d=S,y=E;break}if(K===y){L=!0,y=S,d=E;break}K=K.sibling}if(!L){for(K=E.child;K;){if(K===d){L=!0,d=E,y=S;break}if(K===y){L=!0,y=E,d=S;break}K=K.sibling}if(!L)throw Error(t(189))}}if(d.alternate!==y)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?s:a}function Jp(s){return s=sg(s),s!==null?Gp(s):null}function Gp(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Gp(s);if(a!==null)return a;s=s.sibling}return null}var Qp=e.unstable_scheduleCallback,Yp=e.unstable_cancelCallback,ju=e.unstable_shouldYield,lg=e.unstable_requestPaint,Ut=e.unstable_now,ag=e.unstable_getCurrentPriorityLevel,rh=e.unstable_ImmediatePriority,Xp=e.unstable_UserBlockingPriority,ma=e.unstable_NormalPriority,Zp=e.unstable_LowPriority,ih=e.unstable_IdlePriority,$u=null,Si=null;function ug(s){if(Si&&typeof Si.onCommitFiberRoot=="function")try{Si.onCommitFiberRoot($u,s,void 0,(s.current.flags&128)===128)}catch{}}var ti=Math.clz32?Math.clz32:n0,e0=Math.log,t0=Math.LN2;function n0(s){return s>>>=0,s===0?32:31-(e0(s)/t0|0)|0}var Xs=64,Hu=4194304;function Zs(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function ms(s,a){var d=s.pendingLanes;if(d===0)return 0;var y=0,S=s.suspendedLanes,E=s.pingedLanes,L=d&268435455;if(L!==0){var K=L&~S;K!==0?y=Zs(K):(E&=L,E!==0&&(y=Zs(E)))}else L=d&~S,L!==0?y=Zs(L):E!==0&&(y=Zs(E));if(y===0)return 0;if(a!==0&&a!==y&&(a&S)===0&&(S=y&-y,E=a&-a,S>=E||S===16&&(E&4194240)!==0))return a;if((y&4)!==0&&(y|=d&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=y;0<a;)d=31-ti(a),S=1<<d,y|=s[d],a&=~S;return y}function r0(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cg(s,a){for(var d=s.suspendedLanes,y=s.pingedLanes,S=s.expirationTimes,E=s.pendingLanes;0<E;){var L=31-ti(E),K=1<<L,X=S[L];X===-1?((K&d)===0||(K&y)!==0)&&(S[L]=r0(K,a)):X<=a&&(s.expiredLanes|=K),E&=~K}}function Vu(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function oh(){var s=Xs;return Xs<<=1,(Xs&4194240)===0&&(Xs=64),s}function ga(s){for(var a=[],d=0;31>d;d++)a.push(s);return a}function ya(s,a,d){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-ti(a),s[a]=d}function i0(s,a){var d=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var y=s.eventTimes;for(s=s.expirationTimes;0<d;){var S=31-ti(d),E=1<<S;a[S]=0,y[S]=-1,s[S]=-1,d&=~E}}function va(s,a){var d=s.entangledLanes|=a;for(s=s.entanglements;d;){var y=31-ti(d),S=1<<y;S&a|s[y]&a&&(s[y]|=a),d&=~S}}var _t=0;function gs(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var sh,qu,o0,lh,ah,Ku=!1,wa=[],To=null,Mo=null,No=null,el=new Map,ka=new Map,Ao=[],fg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function s0(s,a){switch(s){case"focusin":case"focusout":To=null;break;case"dragenter":case"dragleave":Mo=null;break;case"mouseover":case"mouseout":No=null;break;case"pointerover":case"pointerout":el.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ka.delete(a.pointerId)}}function ys(s,a,d,y,S,E){return s===null||s.nativeEvent!==E?(s={blockedOn:a,domEventName:d,eventSystemFlags:y,nativeEvent:E,targetContainers:[S]},a!==null&&(a=Nn(a),a!==null&&qu(a)),s):(s.eventSystemFlags|=y,a=s.targetContainers,S!==null&&a.indexOf(S)===-1&&a.push(S),s)}function hg(s,a,d,y,S){switch(a){case"focusin":return To=ys(To,s,a,d,y,S),!0;case"dragenter":return Mo=ys(Mo,s,a,d,y,S),!0;case"mouseover":return No=ys(No,s,a,d,y,S),!0;case"pointerover":var E=S.pointerId;return el.set(E,ys(el.get(E)||null,s,a,d,y,S)),!0;case"gotpointercapture":return E=S.pointerId,ka.set(E,ys(ka.get(E)||null,s,a,d,y,S)),!0}return!1}function l0(s){var a=Ei(s.target);if(a!==null){var d=ps(a);if(d!==null){if(a=d.tag,a===13){if(a=nh(d),a!==null){s.blockedOn=a,ah(s.priority,function(){o0(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ju(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var d=Yu(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var y=new d.constructor(d.type,d);mr=y,d.target.dispatchEvent(y),mr=null}else return a=Nn(d),a!==null&&qu(a),s.blockedOn=d,!1;a.shift()}return!0}function a0(s,a,d){Ju(s)&&d.delete(a)}function dg(){Ku=!1,To!==null&&Ju(To)&&(To=null),Mo!==null&&Ju(Mo)&&(Mo=null),No!==null&&Ju(No)&&(No=null),el.forEach(a0),ka.forEach(a0)}function Tt(s,a){s.blockedOn===a&&(s.blockedOn=null,Ku||(Ku=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dg)))}function Ct(s){function a(S){return Tt(S,s)}if(0<wa.length){Tt(wa[0],s);for(var d=1;d<wa.length;d++){var y=wa[d];y.blockedOn===s&&(y.blockedOn=null)}}for(To!==null&&Tt(To,s),Mo!==null&&Tt(Mo,s),No!==null&&Tt(No,s),el.forEach(a),ka.forEach(a),d=0;d<Ao.length;d++)y=Ao[d],y.blockedOn===s&&(y.blockedOn=null);for(;0<Ao.length&&(d=Ao[0],d.blockedOn===null);)l0(d),d.blockedOn===null&&Ao.shift()}var tl=W.ReactCurrentBatchConfig,Gu=!0;function pg(s,a,d,y){var S=_t,E=tl.transition;tl.transition=null;try{_t=1,uh(s,a,d,y)}finally{_t=S,tl.transition=E}}function mg(s,a,d,y){var S=_t,E=tl.transition;tl.transition=null;try{_t=4,uh(s,a,d,y)}finally{_t=S,tl.transition=E}}function uh(s,a,d,y){if(Gu){var S=Yu(s,a,d,y);if(S===null)Eh(s,a,y,Qu,d),s0(s,y);else if(hg(S,s,a,d,y))y.stopPropagation();else if(s0(s,y),a&4&&-1<fg.indexOf(s)){for(;S!==null;){var E=Nn(S);if(E!==null&&sh(E),E=Yu(s,a,d,y),E===null&&Eh(s,a,y,Qu,d),E===S)break;S=E}S!==null&&y.stopPropagation()}else Eh(s,a,y,null,d)}}var Qu=null;function Yu(s,a,d,y){if(Qu=null,s=Qf(y),s=Ei(s),s!==null)if(a=ps(s),a===null)s=null;else if(d=a.tag,d===13){if(s=nh(a),s!==null)return s;s=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Qu=s,null}function u0(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ag()){case rh:return 1;case Xp:return 4;case ma:case Zp:return 16;case ih:return 536870912;default:return 16}default:return 16}}var Wt=null,xa=null,bi=null;function ch(){if(bi)return bi;var s,a=xa,d=a.length,y,S="value"in Wt?Wt.value:Wt.textContent,E=S.length;for(s=0;s<d&&a[s]===S[s];s++);var L=d-s;for(y=1;y<=L&&a[d-y]===S[E-y];y++);return bi=S.slice(s,1<y?1-y:void 0)}function nl(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Bn(){return!0}function fh(){return!1}function tr(s){function a(d,y,S,E,L){this._reactName=d,this._targetInst=S,this.type=y,this.nativeEvent=E,this.target=L,this.currentTarget=null;for(var K in s)s.hasOwnProperty(K)&&(d=s[K],this[K]=d?d(E):E[K]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Bn:fh,this.isPropagationStopped=fh,this}return x(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Bn)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Bn)},persist:function(){},isPersistent:Bn}),a}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xu=tr(vs),rl=x({},vs,{view:0,detail:0}),c0=tr(rl),Un,hh,Tn,Zu=x({},rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yh,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Tn&&(Tn&&s.type==="mousemove"?(Un=s.screenX-Tn.screenX,hh=s.screenY-Tn.screenY):hh=Un=0,Tn=s),Un)},movementY:function(s){return"movementY"in s?s.movementY:hh}}),dh=tr(Zu),Io=x({},Zu,{dataTransfer:0}),ec=tr(Io),ph=x({},rl,{relatedTarget:0}),Rt=tr(ph),Oo=x({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),mh=tr(Oo),gg=x({},vs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),gh=tr(gg),yg=x({},vs,{data:0}),f0=tr(yg),vg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function il(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=tc[s])?!!a[s]:!1}function yh(){return il}var d0=x({},rl,{key:function(s){if(s.key){var a=vg[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=nl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?h0[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yh,charCode:function(s){return s.type==="keypress"?nl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?nl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),p0=tr(d0),vh=x({},Zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nc=tr(vh),m0=x({},rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yh}),wg=tr(m0),wh=x({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),kh=tr(wh),kg=x({},Zu,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),g0=tr(kg),gr=[9,13,27,32],Sa=u&&"CompositionEvent"in window,Qi=null;u&&"documentMode"in document&&(Qi=document.documentMode);var y0=u&&"TextEvent"in window&&!Qi,xh=u&&(!Sa||Qi&&8<Qi&&11>=Qi),v0=" ",w0=!1;function k0(s,a){switch(s){case"keyup":return gr.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x0(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ol=!1;function sl(s,a){switch(s){case"compositionend":return x0(a);case"keypress":return a.which!==32?null:(w0=!0,v0);case"textInput":return s=a.data,s===v0&&w0?null:s;default:return null}}function xg(s,a){if(ol)return s==="compositionend"||!Sa&&k0(s,a)?(s=ch(),bi=xa=Wt=null,ol=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return xh&&a.locale!=="ko"?null:a.data;default:return null}}var Sg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rc(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Sg[s.type]:a==="textarea"}function Sh(s,a,d,y){$p(y),a=hc(a,"onChange"),0<a.length&&(d=new Xu("onChange","change",null,d,y),s.push({event:d,listeners:a}))}var Nr=null,Po=null;function bg(s){M0(s,0)}function ic(s){var a=tt(s);if(pt(a))return s}function _g(s,a){if(s==="change")return a}var ws=!1;if(u){var yr;if(u){var oc="oninput"in document;if(!oc){var S0=document.createElement("div");S0.setAttribute("oninput","return;"),oc=typeof S0.oninput=="function"}yr=oc}else yr=!1;ws=yr&&(!document.documentMode||9<document.documentMode)}function b0(){Nr&&(Nr.detachEvent("onpropertychange",_0),Po=Nr=null)}function _0(s){if(s.propertyName==="value"&&ic(Po)){var a=[];Sh(a,Po,s,Qf(s)),qp(bg,a)}}function Cg(s,a,d){s==="focusin"?(b0(),Nr=a,Po=d,Nr.attachEvent("onpropertychange",_0)):s==="focusout"&&b0()}function Eg(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ic(Po)}function ll(s,a){if(s==="click")return ic(a)}function ie(s,a){if(s==="input"||s==="change")return ic(a)}function pe(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var ce=typeof Object.is=="function"?Object.is:pe;function Ie(s,a){if(ce(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var d=Object.keys(s),y=Object.keys(a);if(d.length!==y.length)return!1;for(y=0;y<d.length;y++){var S=d[y];if(!f.call(a,S)||!ce(s[S],a[S]))return!1}return!0}function Qe(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function yt(s,a){var d=Qe(s);s=0;for(var y;d;){if(d.nodeType===3){if(y=s+d.textContent.length,s<=a&&y>=a)return{node:d,offset:a-s};s=y}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Qe(d)}}function tn(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?tn(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function At(){for(var s=window,a=ln();a instanceof s.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)s=a.contentWindow;else break;a=ln(s.document)}return a}function ba(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function Tg(s){var a=At(),d=s.focusedElem,y=s.selectionRange;if(a!==d&&d&&d.ownerDocument&&tn(d.ownerDocument.documentElement,d)){if(y!==null&&ba(d)){if(a=y.start,s=y.end,s===void 0&&(s=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(s,d.value.length);else if(s=(a=d.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var S=d.textContent.length,E=Math.min(y.start,S);y=y.end===void 0?E:Math.min(y.end,S),!s.extend&&E>y&&(S=y,y=E,E=S),S=yt(d,E);var L=yt(d,y);S&&L&&(s.rangeCount!==1||s.anchorNode!==S.node||s.anchorOffset!==S.offset||s.focusNode!==L.node||s.focusOffset!==L.offset)&&(a=a.createRange(),a.setStart(S.node,S.offset),s.removeAllRanges(),E>y?(s.addRange(a),s.extend(L.node,L.offset)):(a.setEnd(L.node,L.offset),s.addRange(a)))}}for(a=[],s=d;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)s=a[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Ar=u&&"documentMode"in document&&11>=document.documentMode,Yi=null,bh=null,_i=null,al=!1;function _a(s,a,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;al||Yi==null||Yi!==ln(y)||(y=Yi,"selectionStart"in y&&ba(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),_i&&Ie(_i,y)||(_i=y,y=hc(bh,"onSelect"),0<y.length&&(a=new Xu("onSelect","select",null,a,d),s.push({event:a,listeners:y}),a.target=Yi)))}function vt(s,a){var d={};return d[s.toLowerCase()]=a.toLowerCase(),d["Webkit"+s]="webkit"+a,d["Moz"+s]="moz"+a,d}var ul={animationend:vt("Animation","AnimationEnd"),animationiteration:vt("Animation","AnimationIteration"),animationstart:vt("Animation","AnimationStart"),transitionend:vt("Transition","TransitionEnd")},sc={},Ca={};u&&(Ca=document.createElement("div").style,"AnimationEvent"in window||(delete ul.animationend.animation,delete ul.animationiteration.animation,delete ul.animationstart.animation),"TransitionEvent"in window||delete ul.transitionend.transition);function lc(s){if(sc[s])return sc[s];if(!ul[s])return s;var a=ul[s],d;for(d in a)if(a.hasOwnProperty(d)&&d in Ca)return sc[s]=a[d];return s}var C0=lc("animationend"),E0=lc("animationiteration"),Ea=lc("animationstart"),Xi=lc("transitionend"),Ta=new Map,_h="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(s,a){Ta.set(s,a),o(a,[s])}for(var ac=0;ac<_h.length;ac++){var uc=_h[ac],cc=uc.toLowerCase(),T0=uc[0].toUpperCase()+uc.slice(1);ni(cc,"on"+T0)}ni(C0,"onAnimationEnd"),ni(E0,"onAnimationIteration"),ni(Ea,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(Xi,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ks=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zi));function Ma(s,a,d){var y=s.type||"unknown-event";s.currentTarget=d,og(y,a,void 0,s),s.currentTarget=null}function M0(s,a){a=(a&4)!==0;for(var d=0;d<s.length;d++){var y=s[d],S=y.event;y=y.listeners;e:{var E=void 0;if(a)for(var L=y.length-1;0<=L;L--){var K=y[L],X=K.instance,fe=K.currentTarget;if(K=K.listener,X!==E&&S.isPropagationStopped())break e;Ma(S,K,fe),E=X}else for(L=0;L<y.length;L++){if(K=y[L],X=K.instance,fe=K.currentTarget,K=K.listener,X!==E&&S.isPropagationStopped())break e;Ma(S,K,fe),E=X}}}if(Wu)throw s=th,Wu=!1,th=null,s}function zt(s,a){var d=a[mc];d===void 0&&(d=a[mc]=new Set);var y=s+"__bubble";d.has(y)||(fc(a,s,2,!1),d.add(y))}function Ch(s,a,d){var y=0;a&&(y|=4),fc(d,s,y,a)}var xs="_reactListening"+Math.random().toString(36).slice(2);function Ro(s){if(!s[xs]){s[xs]=!0,r.forEach(function(d){d!=="selectionchange"&&(ks.has(d)||Ch(d,!1,s),Ch(d,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[xs]||(a[xs]=!0,Ch("selectionchange",!1,a))}}function fc(s,a,d,y){switch(u0(a)){case 1:var S=pg;break;case 4:S=mg;break;default:S=uh}d=S.bind(null,a,d,s),S=void 0,!ha||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(S=!0),y?S!==void 0?s.addEventListener(a,d,{capture:!0,passive:S}):s.addEventListener(a,d,!0):S!==void 0?s.addEventListener(a,d,{passive:S}):s.addEventListener(a,d,!1)}function Eh(s,a,d,y,S){var E=y;if((a&1)===0&&(a&2)===0&&y!==null)e:for(;;){if(y===null)return;var L=y.tag;if(L===3||L===4){var K=y.stateNode.containerInfo;if(K===S||K.nodeType===8&&K.parentNode===S)break;if(L===4)for(L=y.return;L!==null;){var X=L.tag;if((X===3||X===4)&&(X=L.stateNode.containerInfo,X===S||X.nodeType===8&&X.parentNode===S))return;L=L.return}for(;K!==null;){if(L=Ei(K),L===null)return;if(X=L.tag,X===5||X===6){y=E=L;continue e}K=K.parentNode}}y=y.return}qp(function(){var fe=E,Se=Qf(d),Ce=[];e:{var xe=Ta.get(s);if(xe!==void 0){var Oe=Xu,Re=s;switch(s){case"keypress":if(nl(d)===0)break e;case"keydown":case"keyup":Oe=p0;break;case"focusin":Re="focus",Oe=Rt;break;case"focusout":Re="blur",Oe=Rt;break;case"beforeblur":case"afterblur":Oe=Rt;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=dh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=ec;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=wg;break;case C0:case E0:case Ea:Oe=mh;break;case Xi:Oe=kh;break;case"scroll":Oe=c0;break;case"wheel":Oe=g0;break;case"copy":case"cut":case"paste":Oe=gh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=nc}var De=(a&4)!==0,Yt=!De&&s==="scroll",ae=De?xe!==null?xe+"Capture":null:xe;De=[];for(var te=fe,ue;te!==null;){ue=te;var Ee=ue.stateNode;if(ue.tag===5&&Ee!==null&&(ue=Ee,ae!==null&&(Ee=fa(te,ae),Ee!=null&&De.push(cl(te,Ee,ue)))),Yt)break;te=te.return}0<De.length&&(xe=new Oe(xe,Re,null,d,Se),Ce.push({event:xe,listeners:De}))}}if((a&7)===0){e:{if(xe=s==="mouseover"||s==="pointerover",Oe=s==="mouseout"||s==="pointerout",xe&&d!==mr&&(Re=d.relatedTarget||d.fromElement)&&(Ei(Re)||Re[vr]))break e;if((Oe||xe)&&(xe=Se.window===Se?Se:(xe=Se.ownerDocument)?xe.defaultView||xe.parentWindow:window,Oe?(Re=d.relatedTarget||d.toElement,Oe=fe,Re=Re?Ei(Re):null,Re!==null&&(Yt=ps(Re),Re!==Yt||Re.tag!==5&&Re.tag!==6)&&(Re=null)):(Oe=null,Re=fe),Oe!==Re)){if(De=dh,Ee="onMouseLeave",ae="onMouseEnter",te="mouse",(s==="pointerout"||s==="pointerover")&&(De=nc,Ee="onPointerLeave",ae="onPointerEnter",te="pointer"),Yt=Oe==null?xe:tt(Oe),ue=Re==null?xe:tt(Re),xe=new De(Ee,te+"leave",Oe,d,Se),xe.target=Yt,xe.relatedTarget=ue,Ee=null,Ei(Se)===fe&&(De=new De(ae,te+"enter",Re,d,Se),De.target=ue,De.relatedTarget=Yt,Ee=De),Yt=Ee,Oe&&Re)t:{for(De=Oe,ae=Re,te=0,ue=De;ue;ue=fl(ue))te++;for(ue=0,Ee=ae;Ee;Ee=fl(Ee))ue++;for(;0<te-ue;)De=fl(De),te--;for(;0<ue-te;)ae=fl(ae),ue--;for(;te--;){if(De===ae||ae!==null&&De===ae.alternate)break t;De=fl(De),ae=fl(ae)}De=null}else De=null;Oe!==null&&nn(Ce,xe,Oe,De,!1),Re!==null&&Yt!==null&&nn(Ce,Yt,Re,De,!0)}}e:{if(xe=fe?tt(fe):window,Oe=xe.nodeName&&xe.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&xe.type==="file")var ze=_g;else if(rc(xe))if(ws)ze=ie;else{ze=Eg;var We=Cg}else(Oe=xe.nodeName)&&Oe.toLowerCase()==="input"&&(xe.type==="checkbox"||xe.type==="radio")&&(ze=ll);if(ze&&(ze=ze(s,fe))){Sh(Ce,ze,d,Se);break e}We&&We(s,xe,fe),s==="focusout"&&(We=xe._wrapperState)&&We.controlled&&xe.type==="number"&&Ji(xe,"number",xe.value)}switch(We=fe?tt(fe):window,s){case"focusin":(rc(We)||We.contentEditable==="true")&&(Yi=We,bh=fe,_i=null);break;case"focusout":_i=bh=Yi=null;break;case"mousedown":al=!0;break;case"contextmenu":case"mouseup":case"dragend":al=!1,_a(Ce,d,Se);break;case"selectionchange":if(Ar)break;case"keydown":case"keyup":_a(Ce,d,Se)}var Be;if(Sa)e:{switch(s){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else ol?k0(s,d)&&(Ke="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(Ke="onCompositionStart");Ke&&(xh&&d.locale!=="ko"&&(ol||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&ol&&(Be=ch()):(Wt=Se,xa="value"in Wt?Wt.value:Wt.textContent,ol=!0)),We=hc(fe,Ke),0<We.length&&(Ke=new f0(Ke,s,null,d,Se),Ce.push({event:Ke,listeners:We}),Be?Ke.data=Be:(Be=x0(d),Be!==null&&(Ke.data=Be)))),(Be=y0?sl(s,d):xg(s,d))&&(fe=hc(fe,"onBeforeInput"),0<fe.length&&(Se=new f0("onBeforeInput","beforeinput",null,d,Se),Ce.push({event:Se,listeners:fe}),Se.data=Be))}M0(Ce,a)})}function cl(s,a,d){return{instance:s,listener:a,currentTarget:d}}function hc(s,a){for(var d=a+"Capture",y=[];s!==null;){var S=s,E=S.stateNode;S.tag===5&&E!==null&&(S=E,E=fa(s,d),E!=null&&y.unshift(cl(s,E,S)),E=fa(s,a),E!=null&&y.push(cl(s,E,S))),s=s.return}return y}function fl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function nn(s,a,d,y,S){for(var E=a._reactName,L=[];d!==null&&d!==y;){var K=d,X=K.alternate,fe=K.stateNode;if(X!==null&&X===y)break;K.tag===5&&fe!==null&&(K=fe,S?(X=fa(d,E),X!=null&&L.unshift(cl(d,X,K))):S||(X=fa(d,E),X!=null&&L.push(cl(d,X,K)))),d=d.return}L.length!==0&&s.push({event:a,listeners:L})}var Mn=/\r\n?/g,Mg=/\u0000|\uFFFD/g;function N0(s){return(typeof s=="string"?s:""+s).replace(Mn,`
`).replace(Mg,"")}function Na(s,a,d){if(a=N0(a),N0(s)!==a&&d)throw Error(t(425))}function dc(){}var Aa=null,Ss=null;function Ia(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Do=typeof setTimeout=="function"?setTimeout:void 0,Oa=typeof clearTimeout=="function"?clearTimeout:void 0,hl=typeof Promise=="function"?Promise:void 0,pc=typeof queueMicrotask=="function"?queueMicrotask:typeof hl<"u"?function(s){return hl.resolve(null).then(s).catch(dl)}:Do;function dl(s){setTimeout(function(){throw s})}function Th(s,a){var d=a,y=0;do{var S=d.nextSibling;if(s.removeChild(d),S&&S.nodeType===8)if(d=S.data,d==="/$"){if(y===0){s.removeChild(S),Ct(a);return}y--}else d!=="$"&&d!=="$?"&&d!=="$!"||y++;d=S}while(d);Ct(a)}function zo(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function A0(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return s;a--}else d==="/$"&&a++}s=s.previousSibling}return null}var pl=Math.random().toString(36).slice(2),Ci="__reactFiber$"+pl,Lo="__reactProps$"+pl,vr="__reactContainer$"+pl,mc="__reactEvents$"+pl,j="__reactListeners$"+pl,ml="__reactHandles$"+pl;function Ei(s){var a=s[Ci];if(a)return a;for(var d=s.parentNode;d;){if(a=d[vr]||d[Ci]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(s=A0(s);s!==null;){if(d=s[Ci])return d;s=A0(s)}return a}s=d,d=s.parentNode}return null}function Nn(s){return s=s[Ci]||s[vr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function tt(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function gc(s){return s[Lo]||null}var Mh=[],gl=-1;function nr(s){return{current:s}}function Lt(s){0>gl||(s.current=Mh[gl],Mh[gl]=null,gl--)}function Dt(s,a){gl++,Mh[gl]=s.current,s.current=a}var Fo={},An=nr(Fo),rr=nr(!1),Wn=Fo;function yl(s,a){var d=s.type.contextTypes;if(!d)return Fo;var y=s.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===a)return y.__reactInternalMemoizedMaskedChildContext;var S={},E;for(E in d)S[E]=a[E];return y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=S),S}function ir(s){return s=s.childContextTypes,s!=null}function yc(){Lt(rr),Lt(An)}function I0(s,a,d){if(An.current!==Fo)throw Error(t(168));Dt(An,a),Dt(rr,d)}function O0(s,a,d){var y=s.stateNode;if(a=a.childContextTypes,typeof y.getChildContext!="function")return d;y=y.getChildContext();for(var S in y)if(!(S in a))throw Error(t(108,he(s)||"Unknown",S));return x({},d,y)}function Ir(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Fo,Wn=An.current,Dt(An,s),Dt(rr,rr.current),!0}function P0(s,a,d){var y=s.stateNode;if(!y)throw Error(t(169));d?(s=O0(s,a,Wn),y.__reactInternalMemoizedMergedChildContext=s,Lt(rr),Lt(An),Dt(An,s)):Lt(rr),Dt(rr,d)}var eo=null,vc=!1,Nh=!1;function R0(s){eo===null?eo=[s]:eo.push(s)}function bs(s){vc=!0,R0(s)}function Bo(){if(!Nh&&eo!==null){Nh=!0;var s=0,a=_t;try{var d=eo;for(_t=1;s<d.length;s++){var y=d[s];do y=y(!0);while(y!==null)}eo=null,vc=!1}catch(S){throw eo!==null&&(eo=eo.slice(s+1)),Qp(rh,Bo),S}finally{_t=a,Nh=!1}}return null}var vl=[],In=0,wc=null,kc=0,Or=[],Pr=0,_s=null,Ti=1,Mi="";function Cs(s,a){vl[In++]=kc,vl[In++]=wc,wc=s,kc=a}function D0(s,a,d){Or[Pr++]=Ti,Or[Pr++]=Mi,Or[Pr++]=_s,_s=s;var y=Ti;s=Mi;var S=32-ti(y)-1;y&=~(1<<S),d+=1;var E=32-ti(a)+S;if(30<E){var L=S-S%5;E=(y&(1<<L)-1).toString(32),y>>=L,S-=L,Ti=1<<32-ti(a)+S|d<<S|y,Mi=E+s}else Ti=1<<E|d<<S|y,Mi=s}function Pa(s){s.return!==null&&(Cs(s,1),D0(s,1,0))}function Es(s){for(;s===wc;)wc=vl[--In],vl[In]=null,kc=vl[--In],vl[In]=null;for(;s===_s;)_s=Or[--Pr],Or[Pr]=null,Mi=Or[--Pr],Or[Pr]=null,Ti=Or[--Pr],Or[Pr]=null}var On=null,wr=null,Ft=!1,ri=null;function Ni(s,a){var d=Ur(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=s,a=s.deletions,a===null?(s.deletions=[d],s.flags|=16):a.push(d)}function xc(s,a){switch(s.tag){case 5:var d=s.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,On=s,wr=zo(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,On=s,wr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=_s!==null?{id:Ti,overflow:Mi}:null,s.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=Ur(18,null,null,0),d.stateNode=a,d.return=s,s.child=d,On=s,wr=null,!0):!1;default:return!1}}function to(s){return(s.mode&1)!==0&&(s.flags&128)===0}function or(s){if(Ft){var a=wr;if(a){var d=a;if(!xc(s,a)){if(to(s))throw Error(t(418));a=zo(d.nextSibling);var y=On;a&&xc(s,a)?Ni(y,d):(s.flags=s.flags&-4097|2,Ft=!1,On=s)}}else{if(to(s))throw Error(t(418));s.flags=s.flags&-4097|2,Ft=!1,On=s}}}function z0(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;On=s}function Ra(s){if(s!==On)return!1;if(!Ft)return z0(s),Ft=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!Ia(s.type,s.memoizedProps)),a&&(a=wr)){if(to(s))throw Ah(),Error(t(418));for(;a;)Ni(s,a),a=zo(a.nextSibling)}if(z0(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(a===0){wr=zo(s.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}s=s.nextSibling}wr=null}}else wr=On?zo(s.stateNode.nextSibling):null;return!0}function Ah(){for(var s=wr;s;)s=zo(s.nextSibling)}function Ai(){wr=On=null,Ft=!1}function Ii(s){ri===null?ri=[s]:ri.push(s)}var L0=W.ReactCurrentBatchConfig;function Da(s,a,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var y=d.stateNode}if(!y)throw Error(t(147,s));var S=y,E=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===E?a.ref:(a=function(L){var K=S.refs;L===null?delete K[E]:K[E]=L},a._stringRef=E,a)}if(typeof s!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,s))}return s}function Ts(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function F0(s){var a=s._init;return a(s._payload)}function Ih(s){function a(ae,te){if(s){var ue=ae.deletions;ue===null?(ae.deletions=[te],ae.flags|=16):ue.push(te)}}function d(ae,te){if(!s)return null;for(;te!==null;)a(ae,te),te=te.sibling;return null}function y(ae,te){for(ae=new Map;te!==null;)te.key!==null?ae.set(te.key,te):ae.set(te.index,te),te=te.sibling;return ae}function S(ae,te){return ae=ci(ae,te),ae.index=0,ae.sibling=null,ae}function E(ae,te,ue){return ae.index=ue,s?(ue=ae.alternate,ue!==null?(ue=ue.index,ue<te?(ae.flags|=2,te):ue):(ae.flags|=2,te)):(ae.flags|=1048576,te)}function L(ae){return s&&ae.alternate===null&&(ae.flags|=2),ae}function K(ae,te,ue,Ee){return te===null||te.tag!==6?(te=yd(ue,ae.mode,Ee),te.return=ae,te):(te=S(te,ue),te.return=ae,te)}function X(ae,te,ue,Ee){var ze=ue.type;return ze===H?Se(ae,te,ue.props.children,Ee,ue.key):te!==null&&(te.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===ye&&F0(ze)===te.type)?(Ee=S(te,ue.props),Ee.ref=Da(ae,te,ue),Ee.return=ae,Ee):(Ee=nf(ue.type,ue.key,ue.props,null,ae.mode,Ee),Ee.ref=Da(ae,te,ue),Ee.return=ae,Ee)}function fe(ae,te,ue,Ee){return te===null||te.tag!==4||te.stateNode.containerInfo!==ue.containerInfo||te.stateNode.implementation!==ue.implementation?(te=vd(ue,ae.mode,Ee),te.return=ae,te):(te=S(te,ue.children||[]),te.return=ae,te)}function Se(ae,te,ue,Ee,ze){return te===null||te.tag!==7?(te=Fs(ue,ae.mode,Ee,ze),te.return=ae,te):(te=S(te,ue),te.return=ae,te)}function Ce(ae,te,ue){if(typeof te=="string"&&te!==""||typeof te=="number")return te=yd(""+te,ae.mode,ue),te.return=ae,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case B:return ue=nf(te.type,te.key,te.props,null,ae.mode,ue),ue.ref=Da(ae,null,te),ue.return=ae,ue;case z:return te=vd(te,ae.mode,ue),te.return=ae,te;case ye:var Ee=te._init;return Ce(ae,Ee(te._payload),ue)}if(kn(te)||C(te))return te=Fs(te,ae.mode,ue,null),te.return=ae,te;Ts(ae,te)}return null}function xe(ae,te,ue,Ee){var ze=te!==null?te.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return ze!==null?null:K(ae,te,""+ue,Ee);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case B:return ue.key===ze?X(ae,te,ue,Ee):null;case z:return ue.key===ze?fe(ae,te,ue,Ee):null;case ye:return ze=ue._init,xe(ae,te,ze(ue._payload),Ee)}if(kn(ue)||C(ue))return ze!==null?null:Se(ae,te,ue,Ee,null);Ts(ae,ue)}return null}function Oe(ae,te,ue,Ee,ze){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return ae=ae.get(ue)||null,K(te,ae,""+Ee,ze);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case B:return ae=ae.get(Ee.key===null?ue:Ee.key)||null,X(te,ae,Ee,ze);case z:return ae=ae.get(Ee.key===null?ue:Ee.key)||null,fe(te,ae,Ee,ze);case ye:var We=Ee._init;return Oe(ae,te,ue,We(Ee._payload),ze)}if(kn(Ee)||C(Ee))return ae=ae.get(ue)||null,Se(te,ae,Ee,ze,null);Ts(te,Ee)}return null}function Re(ae,te,ue,Ee){for(var ze=null,We=null,Be=te,Ke=te=0,yn=null;Be!==null&&Ke<ue.length;Ke++){Be.index>Ke?(yn=Be,Be=null):yn=Be.sibling;var wt=xe(ae,Be,ue[Ke],Ee);if(wt===null){Be===null&&(Be=yn);break}s&&Be&&wt.alternate===null&&a(ae,Be),te=E(wt,te,Ke),We===null?ze=wt:We.sibling=wt,We=wt,Be=yn}if(Ke===ue.length)return d(ae,Be),Ft&&Cs(ae,Ke),ze;if(Be===null){for(;Ke<ue.length;Ke++)Be=Ce(ae,ue[Ke],Ee),Be!==null&&(te=E(Be,te,Ke),We===null?ze=Be:We.sibling=Be,We=Be);return Ft&&Cs(ae,Ke),ze}for(Be=y(ae,Be);Ke<ue.length;Ke++)yn=Oe(Be,ae,Ke,ue[Ke],Ee),yn!==null&&(s&&yn.alternate!==null&&Be.delete(yn.key===null?Ke:yn.key),te=E(yn,te,Ke),We===null?ze=yn:We.sibling=yn,We=yn);return s&&Be.forEach(function(Yo){return a(ae,Yo)}),Ft&&Cs(ae,Ke),ze}function De(ae,te,ue,Ee){var ze=C(ue);if(typeof ze!="function")throw Error(t(150));if(ue=ze.call(ue),ue==null)throw Error(t(151));for(var We=ze=null,Be=te,Ke=te=0,yn=null,wt=ue.next();Be!==null&&!wt.done;Ke++,wt=ue.next()){Be.index>Ke?(yn=Be,Be=null):yn=Be.sibling;var Yo=xe(ae,Be,wt.value,Ee);if(Yo===null){Be===null&&(Be=yn);break}s&&Be&&Yo.alternate===null&&a(ae,Be),te=E(Yo,te,Ke),We===null?ze=Yo:We.sibling=Yo,We=Yo,Be=yn}if(wt.done)return d(ae,Be),Ft&&Cs(ae,Ke),ze;if(Be===null){for(;!wt.done;Ke++,wt=ue.next())wt=Ce(ae,wt.value,Ee),wt!==null&&(te=E(wt,te,Ke),We===null?ze=wt:We.sibling=wt,We=wt);return Ft&&Cs(ae,Ke),ze}for(Be=y(ae,Be);!wt.done;Ke++,wt=ue.next())wt=Oe(Be,ae,Ke,wt.value,Ee),wt!==null&&(s&&wt.alternate!==null&&Be.delete(wt.key===null?Ke:wt.key),te=E(wt,te,Ke),We===null?ze=wt:We.sibling=wt,We=wt);return s&&Be.forEach(function(Gg){return a(ae,Gg)}),Ft&&Cs(ae,Ke),ze}function Yt(ae,te,ue,Ee){if(typeof ue=="object"&&ue!==null&&ue.type===H&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case B:e:{for(var ze=ue.key,We=te;We!==null;){if(We.key===ze){if(ze=ue.type,ze===H){if(We.tag===7){d(ae,We.sibling),te=S(We,ue.props.children),te.return=ae,ae=te;break e}}else if(We.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===ye&&F0(ze)===We.type){d(ae,We.sibling),te=S(We,ue.props),te.ref=Da(ae,We,ue),te.return=ae,ae=te;break e}d(ae,We);break}else a(ae,We);We=We.sibling}ue.type===H?(te=Fs(ue.props.children,ae.mode,Ee,ue.key),te.return=ae,ae=te):(Ee=nf(ue.type,ue.key,ue.props,null,ae.mode,Ee),Ee.ref=Da(ae,te,ue),Ee.return=ae,ae=Ee)}return L(ae);case z:e:{for(We=ue.key;te!==null;){if(te.key===We)if(te.tag===4&&te.stateNode.containerInfo===ue.containerInfo&&te.stateNode.implementation===ue.implementation){d(ae,te.sibling),te=S(te,ue.children||[]),te.return=ae,ae=te;break e}else{d(ae,te);break}else a(ae,te);te=te.sibling}te=vd(ue,ae.mode,Ee),te.return=ae,ae=te}return L(ae);case ye:return We=ue._init,Yt(ae,te,We(ue._payload),Ee)}if(kn(ue))return Re(ae,te,ue,Ee);if(C(ue))return De(ae,te,ue,Ee);Ts(ae,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"?(ue=""+ue,te!==null&&te.tag===6?(d(ae,te.sibling),te=S(te,ue),te.return=ae,ae=te):(d(ae,te),te=yd(ue,ae.mode,Ee),te.return=ae,ae=te),L(ae)):d(ae,te)}return Yt}var Jt=Ih(!0),Sc=Ih(!1),za=nr(null),kr=null,Uo=null,wl=null;function no(){wl=Uo=kr=null}function bc(s){var a=za.current;Lt(za),s._currentValue=a}function xn(s,a,d){for(;s!==null;){var y=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,y!==null&&(y.childLanes|=a)):y!==null&&(y.childLanes&a)!==a&&(y.childLanes|=a),s===d)break;s=s.return}}function Wo(s,a){kr=s,wl=Uo=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&($n=!0),s.firstContext=null)}function Rr(s){var a=s._currentValue;if(wl!==s)if(s={context:s,memoizedValue:a,next:null},Uo===null){if(kr===null)throw Error(t(308));Uo=s,kr.dependencies={lanes:0,firstContext:s}}else Uo=Uo.next=s;return a}var Ms=null;function Oh(s){Ms===null?Ms=[s]:Ms.push(s)}function _c(s,a,d,y){var S=a.interleaved;return S===null?(d.next=d,Oh(a)):(d.next=S.next,S.next=d),a.interleaved=d,ro(s,y)}function ro(s,a){s.lanes|=a;var d=s.alternate;for(d!==null&&(d.lanes|=a),d=s,s=s.return;s!==null;)s.childLanes|=a,d=s.alternate,d!==null&&(d.childLanes|=a),d=s,s=s.return;return d.tag===3?d.stateNode:null}var Dr=!1;function Cc(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function B0(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function io(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function zr(s,a,d){var y=s.updateQueue;if(y===null)return null;if(y=y.shared,(mt&2)!==0){var S=y.pending;return S===null?a.next=a:(a.next=S.next,S.next=a),y.pending=a,ro(s,d)}return S=y.interleaved,S===null?(a.next=a,Oh(y)):(a.next=S.next,S.next=a),y.interleaved=a,ro(s,d)}function Ec(s,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var y=a.lanes;y&=s.pendingLanes,d|=y,a.lanes=d,va(s,d)}}function U0(s,a){var d=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,d===y)){var S=null,E=null;if(d=d.firstBaseUpdate,d!==null){do{var L={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};E===null?S=E=L:E=E.next=L,d=d.next}while(d!==null);E===null?S=E=a:E=E.next=a}else S=E=a;d={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:E,shared:y.shared,effects:y.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=a:s.next=a,d.lastBaseUpdate=a}function kl(s,a,d,y){var S=s.updateQueue;Dr=!1;var E=S.firstBaseUpdate,L=S.lastBaseUpdate,K=S.shared.pending;if(K!==null){S.shared.pending=null;var X=K,fe=X.next;X.next=null,L===null?E=fe:L.next=fe,L=X;var Se=s.alternate;Se!==null&&(Se=Se.updateQueue,K=Se.lastBaseUpdate,K!==L&&(K===null?Se.firstBaseUpdate=fe:K.next=fe,Se.lastBaseUpdate=X))}if(E!==null){var Ce=S.baseState;L=0,Se=fe=X=null,K=E;do{var xe=K.lane,Oe=K.eventTime;if((y&xe)===xe){Se!==null&&(Se=Se.next={eventTime:Oe,lane:0,tag:K.tag,payload:K.payload,callback:K.callback,next:null});e:{var Re=s,De=K;switch(xe=a,Oe=d,De.tag){case 1:if(Re=De.payload,typeof Re=="function"){Ce=Re.call(Oe,Ce,xe);break e}Ce=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=De.payload,xe=typeof Re=="function"?Re.call(Oe,Ce,xe):Re,xe==null)break e;Ce=x({},Ce,xe);break e;case 2:Dr=!0}}K.callback!==null&&K.lane!==0&&(s.flags|=64,xe=S.effects,xe===null?S.effects=[K]:xe.push(K))}else Oe={eventTime:Oe,lane:xe,tag:K.tag,payload:K.payload,callback:K.callback,next:null},Se===null?(fe=Se=Oe,X=Ce):Se=Se.next=Oe,L|=xe;if(K=K.next,K===null){if(K=S.shared.pending,K===null)break;xe=K,K=xe.next,xe.next=null,S.lastBaseUpdate=xe,S.shared.pending=null}}while(!0);if(Se===null&&(X=Ce),S.baseState=X,S.firstBaseUpdate=fe,S.lastBaseUpdate=Se,a=S.shared.interleaved,a!==null){S=a;do L|=S.lane,S=S.next;while(S!==a)}else E===null&&(S.shared.lanes=0);qo|=L,s.lanes=L,s.memoizedState=Ce}}function Ph(s,a,d){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var y=s[a],S=y.callback;if(S!==null){if(y.callback=null,y=d,typeof S!="function")throw Error(t(191,S));S.call(y)}}}var La={},Oi=nr(La),Fa=nr(La),xl=nr(La);function oo(s){if(s===La)throw Error(t(174));return s}function Rh(s,a){switch(Dt(xl,a),Dt(Fa,s),Dt(Oi,La),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Te(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=Te(a,s)}Lt(Oi),Dt(Oi,a)}function jo(){Lt(Oi),Lt(Fa),Lt(xl)}function Dh(s){oo(xl.current);var a=oo(Oi.current),d=Te(a,s.type);a!==d&&(Dt(Fa,s),Dt(Oi,d))}function Tc(s){Fa.current===s&&(Lt(Oi),Lt(Fa))}var jt=nr(0);function Ns(s){for(var a=s;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var zh=[];function Mc(){for(var s=0;s<zh.length;s++)zh[s]._workInProgressVersionPrimary=null;zh.length=0}var Ba=W.ReactCurrentDispatcher,Lh=W.ReactCurrentBatchConfig,$o=0,Ht=null,Qt=null,fn=null,Sl=!1,Ua=!1,As=0,it=0;function Pn(){throw Error(t(321))}function Fh(s,a){if(a===null)return!1;for(var d=0;d<a.length&&d<s.length;d++)if(!ce(s[d],a[d]))return!1;return!0}function Is(s,a,d,y,S,E){if($o=E,Ht=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Ba.current=s===null||s.memoizedState===null?Ag:Dc,s=d(y,S),Ua){E=0;do{if(Ua=!1,As=0,25<=E)throw Error(t(301));E+=1,fn=Qt=null,a.updateQueue=null,Ba.current=El,s=d(y,S)}while(Ua)}if(Ba.current=Rc,a=Qt!==null&&Qt.next!==null,$o=0,fn=Qt=Ht=null,Sl=!1,a)throw Error(t(300));return s}function Nc(){var s=As!==0;return As=0,s}function Pi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Ht.memoizedState=fn=s:fn=fn.next=s,fn}function Lr(){if(Qt===null){var s=Ht.alternate;s=s!==null?s.memoizedState:null}else s=Qt.next;var a=fn===null?Ht.memoizedState:fn.next;if(a!==null)fn=a,Qt=s;else{if(s===null)throw Error(t(310));Qt=s,s={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},fn===null?Ht.memoizedState=fn=s:fn=fn.next=s}return fn}function Rn(s,a){return typeof a=="function"?a(s):a}function Bh(s){var a=Lr(),d=a.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=s;var y=Qt,S=y.baseQueue,E=d.pending;if(E!==null){if(S!==null){var L=S.next;S.next=E.next,E.next=L}y.baseQueue=S=E,d.pending=null}if(S!==null){E=S.next,y=y.baseState;var K=L=null,X=null,fe=E;do{var Se=fe.lane;if(($o&Se)===Se)X!==null&&(X=X.next={lane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),y=fe.hasEagerState?fe.eagerState:s(y,fe.action);else{var Ce={lane:Se,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null};X===null?(K=X=Ce,L=y):X=X.next=Ce,Ht.lanes|=Se,qo|=Se}fe=fe.next}while(fe!==null&&fe!==E);X===null?L=y:X.next=K,ce(y,a.memoizedState)||($n=!0),a.memoizedState=y,a.baseState=L,a.baseQueue=X,d.lastRenderedState=y}if(s=d.interleaved,s!==null){S=s;do E=S.lane,Ht.lanes|=E,qo|=E,S=S.next;while(S!==s)}else S===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function bl(s){var a=Lr(),d=a.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=s;var y=d.dispatch,S=d.pending,E=a.memoizedState;if(S!==null){d.pending=null;var L=S=S.next;do E=s(E,L.action),L=L.next;while(L!==S);ce(E,a.memoizedState)||($n=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),d.lastRenderedState=E}return[E,y]}function Ac(){}function Uh(s,a){var d=Ht,y=Lr(),S=a(),E=!ce(y.memoizedState,S);if(E&&(y.memoizedState=S,$n=!0),y=y.queue,Ri(so.bind(null,d,y,s),[s]),y.getSnapshot!==a||E||fn!==null&&fn.memoizedState.tag&1){if(d.flags|=2048,_l(9,sr.bind(null,d,y,S,a),void 0,null),gn===null)throw Error(t(349));($o&30)!==0||Wh(d,a,S)}return S}function Wh(s,a,d){s.flags|=16384,s={getSnapshot:a,value:d},a=Ht.updateQueue,a===null?(a={lastEffect:null,stores:null},Ht.updateQueue=a,a.stores=[s]):(d=a.stores,d===null?a.stores=[s]:d.push(s))}function sr(s,a,d,y){a.value=d,a.getSnapshot=y,Ic(a)&&jh(s)}function so(s,a,d){return d(function(){Ic(a)&&jh(s)})}function Ic(s){var a=s.getSnapshot;s=s.value;try{var d=a();return!ce(s,d)}catch{return!0}}function jh(s){var a=ro(s,1);a!==null&&ui(a,s,1,-1)}function Wa(s){var a=Pi();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:s},a.queue=s,s=s.dispatch=q0.bind(null,Ht,s),[a.memoizedState,s]}function _l(s,a,d,y){return s={tag:s,create:a,destroy:d,deps:y,next:null},a=Ht.updateQueue,a===null?(a={lastEffect:null,stores:null},Ht.updateQueue=a,a.lastEffect=s.next=s):(d=a.lastEffect,d===null?a.lastEffect=s.next=s:(y=d.next,d.next=s,s.next=y,a.lastEffect=s)),s}function Oc(){return Lr().memoizedState}function ja(s,a,d,y){var S=Pi();Ht.flags|=s,S.memoizedState=_l(1|a,d,void 0,y===void 0?null:y)}function Cl(s,a,d,y){var S=Lr();y=y===void 0?null:y;var E=void 0;if(Qt!==null){var L=Qt.memoizedState;if(E=L.destroy,y!==null&&Fh(y,L.deps)){S.memoizedState=_l(a,d,E,y);return}}Ht.flags|=s,S.memoizedState=_l(1|a,d,E,y)}function Pc(s,a){return ja(8390656,8,s,a)}function Ri(s,a){return Cl(2048,8,s,a)}function W0(s,a){return Cl(4,2,s,a)}function lo(s,a){return Cl(4,4,s,a)}function $h(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Hh(s,a,d){return d=d!=null?d.concat([s]):null,Cl(4,4,$h.bind(null,a,s),d)}function $a(){}function j0(s,a){var d=Lr();a=a===void 0?null:a;var y=d.memoizedState;return y!==null&&a!==null&&Fh(a,y[1])?y[0]:(d.memoizedState=[s,a],s)}function $0(s,a){var d=Lr();a=a===void 0?null:a;var y=d.memoizedState;return y!==null&&a!==null&&Fh(a,y[1])?y[0]:(s=s(),d.memoizedState=[s,a],s)}function H0(s,a,d){return($o&21)===0?(s.baseState&&(s.baseState=!1,$n=!0),s.memoizedState=d):(ce(d,a)||(d=oh(),Ht.lanes|=d,qo|=d,s.baseState=!0),a)}function V0(s,a){var d=_t;_t=d!==0&&4>d?d:4,s(!0);var y=Lh.transition;Lh.transition={};try{s(!1),a()}finally{_t=d,Lh.transition=y}}function Vh(){return Lr().memoizedState}function Ng(s,a,d){var y=Go(s);if(d={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null},qh(s))jn(a,d);else if(d=_c(s,a,d,y),d!==null){var S=qn();ui(d,s,y,S),ii(d,a,y)}}function q0(s,a,d){var y=Go(s),S={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null};if(qh(s))jn(a,S);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var L=a.lastRenderedState,K=E(L,d);if(S.hasEagerState=!0,S.eagerState=K,ce(K,L)){var X=a.interleaved;X===null?(S.next=S,Oh(a)):(S.next=X.next,X.next=S),a.interleaved=S;return}}catch{}finally{}d=_c(s,a,S,y),d!==null&&(S=qn(),ui(d,s,y,S),ii(d,a,y))}}function qh(s){var a=s.alternate;return s===Ht||a!==null&&a===Ht}function jn(s,a){Ua=Sl=!0;var d=s.pending;d===null?a.next=a:(a.next=d.next,d.next=a),s.pending=a}function ii(s,a,d){if((d&4194240)!==0){var y=a.lanes;y&=s.pendingLanes,d|=y,a.lanes=d,va(s,d)}}var Rc={readContext:Rr,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},Ag={readContext:Rr,useCallback:function(s,a){return Pi().memoizedState=[s,a===void 0?null:a],s},useContext:Rr,useEffect:Pc,useImperativeHandle:function(s,a,d){return d=d!=null?d.concat([s]):null,ja(4194308,4,$h.bind(null,a,s),d)},useLayoutEffect:function(s,a){return ja(4194308,4,s,a)},useInsertionEffect:function(s,a){return ja(4,2,s,a)},useMemo:function(s,a){var d=Pi();return a=a===void 0?null:a,s=s(),d.memoizedState=[s,a],s},useReducer:function(s,a,d){var y=Pi();return a=d!==void 0?d(a):a,y.memoizedState=y.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},y.queue=s,s=s.dispatch=Ng.bind(null,Ht,s),[y.memoizedState,s]},useRef:function(s){var a=Pi();return s={current:s},a.memoizedState=s},useState:Wa,useDebugValue:$a,useDeferredValue:function(s){return Pi().memoizedState=s},useTransition:function(){var s=Wa(!1),a=s[0];return s=V0.bind(null,s[1]),Pi().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,d){var y=Ht,S=Pi();if(Ft){if(d===void 0)throw Error(t(407));d=d()}else{if(d=a(),gn===null)throw Error(t(349));($o&30)!==0||Wh(y,a,d)}S.memoizedState=d;var E={value:d,getSnapshot:a};return S.queue=E,Pc(so.bind(null,y,E,s),[s]),y.flags|=2048,_l(9,sr.bind(null,y,E,d,a),void 0,null),d},useId:function(){var s=Pi(),a=gn.identifierPrefix;if(Ft){var d=Mi,y=Ti;d=(y&~(1<<32-ti(y)-1)).toString(32)+d,a=":"+a+"R"+d,d=As++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=it++,a=":"+a+"r"+d.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},Dc={readContext:Rr,useCallback:j0,useContext:Rr,useEffect:Ri,useImperativeHandle:Hh,useInsertionEffect:W0,useLayoutEffect:lo,useMemo:$0,useReducer:Bh,useRef:Oc,useState:function(){return Bh(Rn)},useDebugValue:$a,useDeferredValue:function(s){var a=Lr();return H0(a,Qt.memoizedState,s)},useTransition:function(){var s=Bh(Rn)[0],a=Lr().memoizedState;return[s,a]},useMutableSource:Ac,useSyncExternalStore:Uh,useId:Vh,unstable_isNewReconciler:!1},El={readContext:Rr,useCallback:j0,useContext:Rr,useEffect:Ri,useImperativeHandle:Hh,useInsertionEffect:W0,useLayoutEffect:lo,useMemo:$0,useReducer:bl,useRef:Oc,useState:function(){return bl(Rn)},useDebugValue:$a,useDeferredValue:function(s){var a=Lr();return Qt===null?a.memoizedState=s:H0(a,Qt.memoizedState,s)},useTransition:function(){var s=bl(Rn)[0],a=Lr().memoizedState;return[s,a]},useMutableSource:Ac,useSyncExternalStore:Uh,useId:Vh,unstable_isNewReconciler:!1};function Fr(s,a){if(s&&s.defaultProps){a=x({},a),s=s.defaultProps;for(var d in s)a[d]===void 0&&(a[d]=s[d]);return a}return a}function zc(s,a,d,y){a=s.memoizedState,d=d(y,a),d=d==null?a:x({},a,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Lc={isMounted:function(s){return(s=s._reactInternals)?ps(s)===s:!1},enqueueSetState:function(s,a,d){s=s._reactInternals;var y=qn(),S=Go(s),E=io(y,S);E.payload=a,d!=null&&(E.callback=d),a=zr(s,E,S),a!==null&&(ui(a,s,S,y),Ec(a,s,S))},enqueueReplaceState:function(s,a,d){s=s._reactInternals;var y=qn(),S=Go(s),E=io(y,S);E.tag=1,E.payload=a,d!=null&&(E.callback=d),a=zr(s,E,S),a!==null&&(ui(a,s,S,y),Ec(a,s,S))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var d=qn(),y=Go(s),S=io(d,y);S.tag=2,a!=null&&(S.callback=a),a=zr(s,S,y),a!==null&&(ui(a,s,y,d),Ec(a,s,y))}};function Kh(s,a,d,y,S,E,L){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,E,L):a.prototype&&a.prototype.isPureReactComponent?!Ie(d,y)||!Ie(S,E):!0}function Os(s,a,d){var y=!1,S=Fo,E=a.contextType;return typeof E=="object"&&E!==null?E=Rr(E):(S=ir(a)?Wn:An.current,y=a.contextTypes,E=(y=y!=null)?yl(s,S):Fo),a=new a(d,E),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Lc,s.stateNode=a,a._reactInternals=s,y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=S,s.__reactInternalMemoizedMaskedChildContext=E),a}function Tl(s,a,d,y){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,y),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,y),a.state!==s&&Lc.enqueueReplaceState(a,a.state,null)}function Jh(s,a,d,y){var S=s.stateNode;S.props=d,S.state=s.memoizedState,S.refs={},Cc(s);var E=a.contextType;typeof E=="object"&&E!==null?S.context=Rr(E):(E=ir(a)?Wn:An.current,S.context=yl(s,E)),S.state=s.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(zc(s,a,E,d),S.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(a=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),a!==S.state&&Lc.enqueueReplaceState(S,S.state,null),kl(s,d,S,y),S.state=s.memoizedState),typeof S.componentDidMount=="function"&&(s.flags|=4194308)}function Ps(s,a){try{var d="",y=a;do d+=ee(y),y=y.return;while(y);var S=d}catch(E){S=`
Error generating stack: `+E.message+`
`+E.stack}return{value:s,source:a,stack:S,digest:null}}function Fc(s,a,d){return{value:s,source:null,stack:d??null,digest:a??null}}function Ml(s,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var K0=typeof WeakMap=="function"?WeakMap:Map;function Ha(s,a,d){d=io(-1,d),d.tag=3,d.payload={element:null};var y=a.value;return d.callback=function(){Gc||(Gc=!0,cd=y),Ml(s,a)},d}function Bc(s,a,d){d=io(-1,d),d.tag=3;var y=s.type.getDerivedStateFromError;if(typeof y=="function"){var S=a.value;d.payload=function(){return y(S)},d.callback=function(){Ml(s,a)}}var E=s.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(d.callback=function(){Ml(s,a),typeof y!="function"&&(Ko===null?Ko=new Set([this]):Ko.add(this));var L=a.stack;this.componentDidCatch(a.value,{componentStack:L!==null?L:""})}),d}function Va(s,a,d){var y=s.pingCache;if(y===null){y=s.pingCache=new K0;var S=new Set;y.set(a,S)}else S=y.get(a),S===void 0&&(S=new Set,y.set(a,S));S.has(d)||(S.add(d),s=Fg.bind(null,s,a,d),a.then(s,s))}function J0(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function Gh(s,a,d,y,S){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=io(-1,1),a.tag=2,zr(d,a,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=S,s)}var Uc=W.ReactCurrentOwner,$n=!1;function Sn(s,a,d,y){a.child=s===null?Sc(a,null,d,y):Jt(a,s.child,d,y)}function G0(s,a,d,y,S){d=d.render;var E=a.ref;return Wo(a,S),y=Is(s,a,d,y,E,S),d=Nc(),s!==null&&!$n?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~S,oi(s,a,S)):(Ft&&d&&Pa(a),a.flags|=1,Sn(s,a,y,S),a.child)}function Qh(s,a,d,y,S){if(s===null){var E=d.type;return typeof E=="function"&&!tf(E)&&E.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=E,Di(s,a,E,y,S)):(s=nf(d.type,null,y,a,a.mode,S),s.ref=a.ref,s.return=a,a.child=s)}if(E=s.child,(s.lanes&S)===0){var L=E.memoizedProps;if(d=d.compare,d=d!==null?d:Ie,d(L,y)&&s.ref===a.ref)return oi(s,a,S)}return a.flags|=1,s=ci(E,y),s.ref=a.ref,s.return=a,a.child=s}function Di(s,a,d,y,S){if(s!==null){var E=s.memoizedProps;if(Ie(E,y)&&s.ref===a.ref)if($n=!1,a.pendingProps=y=E,(s.lanes&S)!==0)(s.flags&131072)!==0&&($n=!0);else return a.lanes=s.lanes,oi(s,a,S)}return Zh(s,a,d,y,S)}function Yh(s,a,d){var y=a.pendingProps,S=y.children,E=s!==null?s.memoizedState:null;if(y.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(Ol,Sr),Sr|=d;else{if((d&1073741824)===0)return s=E!==null?E.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,Dt(Ol,Sr),Sr|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=E!==null?E.baseLanes:d,Dt(Ol,Sr),Sr|=y}else E!==null?(y=E.baseLanes|d,a.memoizedState=null):y=d,Dt(Ol,Sr),Sr|=y;return Sn(s,a,S,d),a.child}function Xh(s,a){var d=a.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function Zh(s,a,d,y,S){var E=ir(d)?Wn:An.current;return E=yl(a,E),Wo(a,S),d=Is(s,a,d,y,E,S),y=Nc(),s!==null&&!$n?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~S,oi(s,a,S)):(Ft&&y&&Pa(a),a.flags|=1,Sn(s,a,d,S),a.child)}function ed(s,a,d,y,S){if(ir(d)){var E=!0;Ir(a)}else E=!1;if(Wo(a,S),a.stateNode===null)jc(s,a),Os(a,d,y),Jh(a,d,y,S),y=!0;else if(s===null){var L=a.stateNode,K=a.memoizedProps;L.props=K;var X=L.context,fe=d.contextType;typeof fe=="object"&&fe!==null?fe=Rr(fe):(fe=ir(d)?Wn:An.current,fe=yl(a,fe));var Se=d.getDerivedStateFromProps,Ce=typeof Se=="function"||typeof L.getSnapshotBeforeUpdate=="function";Ce||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(K!==y||X!==fe)&&Tl(a,L,y,fe),Dr=!1;var xe=a.memoizedState;L.state=xe,kl(a,y,L,S),X=a.memoizedState,K!==y||xe!==X||rr.current||Dr?(typeof Se=="function"&&(zc(a,d,Se,y),X=a.memoizedState),(K=Dr||Kh(a,d,K,y,xe,X,fe))?(Ce||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(a.flags|=4194308)):(typeof L.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=y,a.memoizedState=X),L.props=y,L.state=X,L.context=fe,y=K):(typeof L.componentDidMount=="function"&&(a.flags|=4194308),y=!1)}else{L=a.stateNode,B0(s,a),K=a.memoizedProps,fe=a.type===a.elementType?K:Fr(a.type,K),L.props=fe,Ce=a.pendingProps,xe=L.context,X=d.contextType,typeof X=="object"&&X!==null?X=Rr(X):(X=ir(d)?Wn:An.current,X=yl(a,X));var Oe=d.getDerivedStateFromProps;(Se=typeof Oe=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(K!==Ce||xe!==X)&&Tl(a,L,y,X),Dr=!1,xe=a.memoizedState,L.state=xe,kl(a,y,L,S);var Re=a.memoizedState;K!==Ce||xe!==Re||rr.current||Dr?(typeof Oe=="function"&&(zc(a,d,Oe,y),Re=a.memoizedState),(fe=Dr||Kh(a,d,fe,y,xe,Re,X)||!1)?(Se||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(y,Re,X),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(y,Re,X)),typeof L.componentDidUpdate=="function"&&(a.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof L.componentDidUpdate!="function"||K===s.memoizedProps&&xe===s.memoizedState||(a.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||K===s.memoizedProps&&xe===s.memoizedState||(a.flags|=1024),a.memoizedProps=y,a.memoizedState=Re),L.props=y,L.state=Re,L.context=X,y=fe):(typeof L.componentDidUpdate!="function"||K===s.memoizedProps&&xe===s.memoizedState||(a.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||K===s.memoizedProps&&xe===s.memoizedState||(a.flags|=1024),y=!1)}return td(s,a,d,y,E,S)}function td(s,a,d,y,S,E){Xh(s,a);var L=(a.flags&128)!==0;if(!y&&!L)return S&&P0(a,d,!1),oi(s,a,E);y=a.stateNode,Uc.current=a;var K=L&&typeof d.getDerivedStateFromError!="function"?null:y.render();return a.flags|=1,s!==null&&L?(a.child=Jt(a,s.child,null,E),a.child=Jt(a,null,K,E)):Sn(s,a,K,E),a.memoizedState=y.state,S&&P0(a,d,!0),a.child}function Q0(s){var a=s.stateNode;a.pendingContext?I0(s,a.pendingContext,a.pendingContext!==a.context):a.context&&I0(s,a.context,!1),Rh(s,a.containerInfo)}function zi(s,a,d,y,S){return Ai(),Ii(S),a.flags|=256,Sn(s,a,d,y),a.child}var qa={dehydrated:null,treeContext:null,retryLane:0};function Ka(s){return{baseLanes:s,cachePool:null,transitions:null}}function Wc(s,a,d){var y=a.pendingProps,S=jt.current,E=!1,L=(a.flags&128)!==0,K;if((K=L)||(K=s!==null&&s.memoizedState===null?!1:(S&2)!==0),K?(E=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(S|=1),Dt(jt,S&1),s===null)return or(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(L=y.children,s=y.fallback,E?(y=a.mode,E=a.child,L={mode:"hidden",children:L},(y&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=L):E=rf(L,y,0,null),s=Fs(s,y,d,null),E.return=a,s.return=a,E.sibling=s,a.child=E,a.child.memoizedState=Ka(d),a.memoizedState=qa,s):Nl(a,L));if(S=s.memoizedState,S!==null&&(K=S.dehydrated,K!==null))return He(s,a,L,y,K,S,d);if(E){E=y.fallback,L=a.mode,S=s.child,K=S.sibling;var X={mode:"hidden",children:y.children};return(L&1)===0&&a.child!==S?(y=a.child,y.childLanes=0,y.pendingProps=X,a.deletions=null):(y=ci(S,X),y.subtreeFlags=S.subtreeFlags&14680064),K!==null?E=ci(K,E):(E=Fs(E,L,d,null),E.flags|=2),E.return=a,y.return=a,y.sibling=E,a.child=y,y=E,E=a.child,L=s.child.memoizedState,L=L===null?Ka(d):{baseLanes:L.baseLanes|d,cachePool:null,transitions:L.transitions},E.memoizedState=L,E.childLanes=s.childLanes&~d,a.memoizedState=qa,y}return E=s.child,s=E.sibling,y=ci(E,{mode:"visible",children:y.children}),(a.mode&1)===0&&(y.lanes=d),y.return=a,y.sibling=null,s!==null&&(d=a.deletions,d===null?(a.deletions=[s],a.flags|=16):d.push(s)),a.child=y,a.memoizedState=null,y}function Nl(s,a){return a=rf({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function ao(s,a,d,y){return y!==null&&Ii(y),Jt(a,s.child,null,d),s=Nl(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function He(s,a,d,y,S,E,L){if(d)return a.flags&256?(a.flags&=-257,y=Fc(Error(t(422))),ao(s,a,L,y)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(E=y.fallback,S=a.mode,y=rf({mode:"visible",children:y.children},S,0,null),E=Fs(E,S,L,null),E.flags|=2,y.return=a,E.return=a,y.sibling=E,a.child=y,(a.mode&1)!==0&&Jt(a,s.child,null,L),a.child.memoizedState=Ka(L),a.memoizedState=qa,E);if((a.mode&1)===0)return ao(s,a,L,null);if(S.data==="$!"){if(y=S.nextSibling&&S.nextSibling.dataset,y)var K=y.dgst;return y=K,E=Error(t(419)),y=Fc(E,y,void 0),ao(s,a,L,y)}if(K=(L&s.childLanes)!==0,$n||K){if(y=gn,y!==null){switch(L&-L){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(y.suspendedLanes|L))!==0?0:S,S!==0&&S!==E.retryLane&&(E.retryLane=S,ro(s,S),ui(y,s,S,-1))}return gd(),y=Fc(Error(t(421))),ao(s,a,L,y)}return S.data==="$?"?(a.flags|=128,a.child=s.child,a=Bg.bind(null,s),S._reactRetry=a,null):(s=E.treeContext,wr=zo(S.nextSibling),On=a,Ft=!0,ri=null,s!==null&&(Or[Pr++]=Ti,Or[Pr++]=Mi,Or[Pr++]=_s,Ti=s.id,Mi=s.overflow,_s=a),a=Nl(a,y.children),a.flags|=4096,a)}function Ja(s,a,d){s.lanes|=a;var y=s.alternate;y!==null&&(y.lanes|=a),xn(s.return,a,d)}function Ga(s,a,d,y,S){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:S}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=y,E.tail=d,E.tailMode=S)}function Ho(s,a,d){var y=a.pendingProps,S=y.revealOrder,E=y.tail;if(Sn(s,a,y.children,d),y=jt.current,(y&2)!==0)y=y&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ja(s,d,a);else if(s.tag===19)Ja(s,d,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}if(Dt(jt,y),(a.mode&1)===0)a.memoizedState=null;else switch(S){case"forwards":for(d=a.child,S=null;d!==null;)s=d.alternate,s!==null&&Ns(s)===null&&(S=d),d=d.sibling;d=S,d===null?(S=a.child,a.child=null):(S=d.sibling,d.sibling=null),Ga(a,!1,S,d,E);break;case"backwards":for(d=null,S=a.child,a.child=null;S!==null;){if(s=S.alternate,s!==null&&Ns(s)===null){a.child=S;break}s=S.sibling,S.sibling=d,d=S,S=s}Ga(a,!0,d,null,E);break;case"together":Ga(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function jc(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function oi(s,a,d){if(s!==null&&(a.dependencies=s.dependencies),qo|=a.lanes,(d&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,d=ci(s,s.pendingProps),a.child=d,d.return=a;s.sibling!==null;)s=s.sibling,d=d.sibling=ci(s,s.pendingProps),d.return=a;d.sibling=null}return a.child}function Y0(s,a,d){switch(a.tag){case 3:Q0(a),Ai();break;case 5:Dh(a);break;case 1:ir(a.type)&&Ir(a);break;case 4:Rh(a,a.stateNode.containerInfo);break;case 10:var y=a.type._context,S=a.memoizedProps.value;Dt(za,y._currentValue),y._currentValue=S;break;case 13:if(y=a.memoizedState,y!==null)return y.dehydrated!==null?(Dt(jt,jt.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?Wc(s,a,d):(Dt(jt,jt.current&1),s=oi(s,a,d),s!==null?s.sibling:null);Dt(jt,jt.current&1);break;case 19:if(y=(d&a.childLanes)!==0,(s.flags&128)!==0){if(y)return Ho(s,a,d);a.flags|=128}if(S=a.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Dt(jt,jt.current),y)break;return null;case 22:case 23:return a.lanes=0,Yh(s,a,d)}return oi(s,a,d)}var bn,nd,X0,rd;bn=function(s,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},nd=function(){},X0=function(s,a,d,y){var S=s.memoizedProps;if(S!==y){s=a.stateNode,oo(Oi.current);var E=null;switch(d){case"input":S=Pt(s,S),y=Pt(s,y),E=[];break;case"select":S=x({},S,{value:void 0}),y=x({},y,{value:void 0}),E=[];break;case"textarea":S=Nt(s,S),y=Nt(s,y),E=[];break;default:typeof S.onClick!="function"&&typeof y.onClick=="function"&&(s.onclick=dc)}cn(d,y);var L;d=null;for(fe in S)if(!y.hasOwnProperty(fe)&&S.hasOwnProperty(fe)&&S[fe]!=null)if(fe==="style"){var K=S[fe];for(L in K)K.hasOwnProperty(L)&&(d||(d={}),d[L]="")}else fe!=="dangerouslySetInnerHTML"&&fe!=="children"&&fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&fe!=="autoFocus"&&(i.hasOwnProperty(fe)?E||(E=[]):(E=E||[]).push(fe,null));for(fe in y){var X=y[fe];if(K=S!=null?S[fe]:void 0,y.hasOwnProperty(fe)&&X!==K&&(X!=null||K!=null))if(fe==="style")if(K){for(L in K)!K.hasOwnProperty(L)||X&&X.hasOwnProperty(L)||(d||(d={}),d[L]="");for(L in X)X.hasOwnProperty(L)&&K[L]!==X[L]&&(d||(d={}),d[L]=X[L])}else d||(E||(E=[]),E.push(fe,d)),d=X;else fe==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,K=K?K.__html:void 0,X!=null&&K!==X&&(E=E||[]).push(fe,X)):fe==="children"?typeof X!="string"&&typeof X!="number"||(E=E||[]).push(fe,""+X):fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&(i.hasOwnProperty(fe)?(X!=null&&fe==="onScroll"&&zt("scroll",s),E||K===X||(E=[])):(E=E||[]).push(fe,X))}d&&(E=E||[]).push("style",d);var fe=E;(a.updateQueue=fe)&&(a.flags|=4)}},rd=function(s,a,d,y){d!==y&&(a.flags|=4)};function Qa(s,a){if(!Ft)switch(s.tailMode){case"hidden":a=s.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function _n(s){var a=s.alternate!==null&&s.alternate.child===s.child,d=0,y=0;if(a)for(var S=s.child;S!==null;)d|=S.lanes|S.childLanes,y|=S.subtreeFlags&14680064,y|=S.flags&14680064,S.return=s,S=S.sibling;else for(S=s.child;S!==null;)d|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=s,S=S.sibling;return s.subtreeFlags|=y,s.childLanes=d,a}function Ig(s,a,d){var y=a.pendingProps;switch(Es(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _n(a),null;case 1:return ir(a.type)&&yc(),_n(a),null;case 3:return y=a.stateNode,jo(),Lt(rr),Lt(An),Mc(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(s===null||s.child===null)&&(Ra(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ri!==null&&(dd(ri),ri=null))),nd(s,a),_n(a),null;case 5:Tc(a);var S=oo(xl.current);if(d=a.type,s!==null&&a.stateNode!=null)X0(s,a,d,y,S),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!y){if(a.stateNode===null)throw Error(t(166));return _n(a),null}if(s=oo(Oi.current),Ra(a)){y=a.stateNode,d=a.type;var E=a.memoizedProps;switch(y[Ci]=a,y[Lo]=E,s=(a.mode&1)!==0,d){case"dialog":zt("cancel",y),zt("close",y);break;case"iframe":case"object":case"embed":zt("load",y);break;case"video":case"audio":for(S=0;S<Zi.length;S++)zt(Zi[S],y);break;case"source":zt("error",y);break;case"img":case"image":case"link":zt("error",y),zt("load",y);break;case"details":zt("toggle",y);break;case"input":an(y,E),zt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!E.multiple},zt("invalid",y);break;case"textarea":dr(y,E),zt("invalid",y)}cn(d,E),S=null;for(var L in E)if(E.hasOwnProperty(L)){var K=E[L];L==="children"?typeof K=="string"?y.textContent!==K&&(E.suppressHydrationWarning!==!0&&Na(y.textContent,K,s),S=["children",K]):typeof K=="number"&&y.textContent!==""+K&&(E.suppressHydrationWarning!==!0&&Na(y.textContent,K,s),S=["children",""+K]):i.hasOwnProperty(L)&&K!=null&&L==="onScroll"&&zt("scroll",y)}switch(d){case"input":$e(y),en(y,E,!0);break;case"textarea":$e(y),pr(y);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(y.onclick=dc)}y=S,a.updateQueue=y,y!==null&&(a.flags|=4)}else{L=S.nodeType===9?S:S.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=me(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=L.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof y.is=="string"?s=L.createElement(d,{is:y.is}):(s=L.createElement(d),d==="select"&&(L=s,y.multiple?L.multiple=!0:y.size&&(L.size=y.size))):s=L.createElementNS(s,d),s[Ci]=a,s[Lo]=y,bn(s,a,!1,!1),a.stateNode=s;e:{switch(L=Mr(d,y),d){case"dialog":zt("cancel",s),zt("close",s),S=y;break;case"iframe":case"object":case"embed":zt("load",s),S=y;break;case"video":case"audio":for(S=0;S<Zi.length;S++)zt(Zi[S],s);S=y;break;case"source":zt("error",s),S=y;break;case"img":case"image":case"link":zt("error",s),zt("load",s),S=y;break;case"details":zt("toggle",s),S=y;break;case"input":an(s,y),S=Pt(s,y),zt("invalid",s);break;case"option":S=y;break;case"select":s._wrapperState={wasMultiple:!!y.multiple},S=x({},y,{value:void 0}),zt("invalid",s);break;case"textarea":dr(s,y),S=Nt(s,y),zt("invalid",s);break;default:S=y}cn(d,S),K=S;for(E in K)if(K.hasOwnProperty(E)){var X=K[E];E==="style"?xi(s,X):E==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&rt(s,X)):E==="children"?typeof X=="string"?(d!=="textarea"||X!=="")&&ft(s,X):typeof X=="number"&&ft(s,""+X):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(i.hasOwnProperty(E)?X!=null&&E==="onScroll"&&zt("scroll",s):X!=null&&I(s,E,X,L))}switch(d){case"input":$e(s),en(s,y,!1);break;case"textarea":$e(s),pr(s);break;case"option":y.value!=null&&s.setAttribute("value",""+ke(y.value));break;case"select":s.multiple=!!y.multiple,E=y.value,E!=null?bt(s,!!y.multiple,E,!1):y.defaultValue!=null&&bt(s,!!y.multiple,y.defaultValue,!0);break;default:typeof S.onClick=="function"&&(s.onclick=dc)}switch(d){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return _n(a),null;case 6:if(s&&a.stateNode!=null)rd(s,a,s.memoizedProps,y);else{if(typeof y!="string"&&a.stateNode===null)throw Error(t(166));if(d=oo(xl.current),oo(Oi.current),Ra(a)){if(y=a.stateNode,d=a.memoizedProps,y[Ci]=a,(E=y.nodeValue!==d)&&(s=On,s!==null))switch(s.tag){case 3:Na(y.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Na(y.nodeValue,d,(s.mode&1)!==0)}E&&(a.flags|=4)}else y=(d.nodeType===9?d:d.ownerDocument).createTextNode(y),y[Ci]=a,a.stateNode=y}return _n(a),null;case 13:if(Lt(jt),y=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Ft&&wr!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Ah(),Ai(),a.flags|=98560,E=!1;else if(E=Ra(a),y!==null&&y.dehydrated!==null){if(s===null){if(!E)throw Error(t(318));if(E=a.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(t(317));E[Ci]=a}else Ai(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;_n(a),E=!1}else ri!==null&&(dd(ri),ri=null),E=!0;if(!E)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(y=y!==null,y!==(s!==null&&s.memoizedState!==null)&&y&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(jt.current&1)!==0?hn===0&&(hn=3):gd())),a.updateQueue!==null&&(a.flags|=4),_n(a),null);case 4:return jo(),nd(s,a),s===null&&Ro(a.stateNode.containerInfo),_n(a),null;case 10:return bc(a.type._context),_n(a),null;case 17:return ir(a.type)&&yc(),_n(a),null;case 19:if(Lt(jt),E=a.memoizedState,E===null)return _n(a),null;if(y=(a.flags&128)!==0,L=E.rendering,L===null)if(y)Qa(E,!1);else{if(hn!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(L=Ns(s),L!==null){for(a.flags|=128,Qa(E,!1),y=L.updateQueue,y!==null&&(a.updateQueue=y,a.flags|=4),a.subtreeFlags=0,y=d,d=a.child;d!==null;)E=d,s=y,E.flags&=14680066,L=E.alternate,L===null?(E.childLanes=0,E.lanes=s,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=L.childLanes,E.lanes=L.lanes,E.child=L.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=L.memoizedProps,E.memoizedState=L.memoizedState,E.updateQueue=L.updateQueue,E.type=L.type,s=L.dependencies,E.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return Dt(jt,jt.current&1|2),a.child}s=s.sibling}E.tail!==null&&Ut()>Rs&&(a.flags|=128,y=!0,Qa(E,!1),a.lanes=4194304)}else{if(!y)if(s=Ns(L),s!==null){if(a.flags|=128,y=!0,d=s.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),Qa(E,!0),E.tail===null&&E.tailMode==="hidden"&&!L.alternate&&!Ft)return _n(a),null}else 2*Ut()-E.renderingStartTime>Rs&&d!==1073741824&&(a.flags|=128,y=!0,Qa(E,!1),a.lanes=4194304);E.isBackwards?(L.sibling=a.child,a.child=L):(d=E.last,d!==null?d.sibling=L:a.child=L,E.last=L)}return E.tail!==null?(a=E.tail,E.rendering=a,E.tail=a.sibling,E.renderingStartTime=Ut(),a.sibling=null,d=jt.current,Dt(jt,y?d&1|2:d&1),a):(_n(a),null);case 22:case 23:return md(),y=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==y&&(a.flags|=8192),y&&(a.mode&1)!==0?(Sr&1073741824)!==0&&(_n(a),a.subtreeFlags&6&&(a.flags|=8192)):_n(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function Og(s,a){switch(Es(a),a.tag){case 1:return ir(a.type)&&yc(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return jo(),Lt(rr),Lt(An),Mc(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return Tc(a),null;case 13:if(Lt(jt),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Ai()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Lt(jt),null;case 4:return jo(),null;case 10:return bc(a.type._context),null;case 22:case 23:return md(),null;case 24:return null;default:return null}}var $c=!1,$t=!1,Hn=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function Al(s,a){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(y){Vt(s,a,y)}else d.current=null}function Ya(s,a,d){try{d()}catch(y){Vt(s,a,y)}}var Z0=!1;function Pg(s,a){if(Aa=Gu,s=At(),ba(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var y=d.getSelection&&d.getSelection();if(y&&y.rangeCount!==0){d=y.anchorNode;var S=y.anchorOffset,E=y.focusNode;y=y.focusOffset;try{d.nodeType,E.nodeType}catch{d=null;break e}var L=0,K=-1,X=-1,fe=0,Se=0,Ce=s,xe=null;t:for(;;){for(var Oe;Ce!==d||S!==0&&Ce.nodeType!==3||(K=L+S),Ce!==E||y!==0&&Ce.nodeType!==3||(X=L+y),Ce.nodeType===3&&(L+=Ce.nodeValue.length),(Oe=Ce.firstChild)!==null;)xe=Ce,Ce=Oe;for(;;){if(Ce===s)break t;if(xe===d&&++fe===S&&(K=L),xe===E&&++Se===y&&(X=L),(Oe=Ce.nextSibling)!==null)break;Ce=xe,xe=Ce.parentNode}Ce=Oe}d=K===-1||X===-1?null:{start:K,end:X}}else d=null}d=d||{start:0,end:0}}else d=null;for(Ss={focusedElem:s,selectionRange:d},Gu=!1,Pe=a;Pe!==null;)if(a=Pe,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Pe=s;else for(;Pe!==null;){a=Pe;try{var Re=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Re!==null){var De=Re.memoizedProps,Yt=Re.memoizedState,ae=a.stateNode,te=ae.getSnapshotBeforeUpdate(a.elementType===a.type?De:Fr(a.type,De),Yt);ae.__reactInternalSnapshotBeforeUpdate=te}break;case 3:var ue=a.stateNode.containerInfo;ue.nodeType===1?ue.textContent="":ue.nodeType===9&&ue.documentElement&&ue.removeChild(ue.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ee){Vt(a,a.return,Ee)}if(s=a.sibling,s!==null){s.return=a.return,Pe=s;break}Pe=a.return}return Re=Z0,Z0=!1,Re}function uo(s,a,d){var y=a.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var S=y=y.next;do{if((S.tag&s)===s){var E=S.destroy;S.destroy=void 0,E!==void 0&&Ya(a,d,E)}S=S.next}while(S!==y)}}function Xa(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&s)===s){var y=d.create;d.destroy=y()}d=d.next}while(d!==a)}}function Hc(s){var a=s.ref;if(a!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof a=="function"?a(s):a.current=s}}function em(s){var a=s.alternate;a!==null&&(s.alternate=null,em(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Ci],delete a[Lo],delete a[mc],delete a[j],delete a[ml])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function tm(s){return s.tag===5||s.tag===3||s.tag===4}function nm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||tm(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function id(s,a,d){var y=s.tag;if(y===5||y===6)s=s.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(s,a):d.insertBefore(s,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(s,d)):(a=d,a.appendChild(s)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=dc));else if(y!==4&&(s=s.child,s!==null))for(id(s,a,d),s=s.sibling;s!==null;)id(s,a,d),s=s.sibling}function Vc(s,a,d){var y=s.tag;if(y===5||y===6)s=s.stateNode,a?d.insertBefore(s,a):d.appendChild(s);else if(y!==4&&(s=s.child,s!==null))for(Vc(s,a,d),s=s.sibling;s!==null;)Vc(s,a,d),s=s.sibling}var mn=null,si=!1;function Li(s,a,d){for(d=d.child;d!==null;)od(s,a,d),d=d.sibling}function od(s,a,d){if(Si&&typeof Si.onCommitFiberUnmount=="function")try{Si.onCommitFiberUnmount($u,d)}catch{}switch(d.tag){case 5:$t||Al(d,a);case 6:var y=mn,S=si;mn=null,Li(s,a,d),mn=y,si=S,mn!==null&&(si?(s=mn,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):mn.removeChild(d.stateNode));break;case 18:mn!==null&&(si?(s=mn,d=d.stateNode,s.nodeType===8?Th(s.parentNode,d):s.nodeType===1&&Th(s,d),Ct(s)):Th(mn,d.stateNode));break;case 4:y=mn,S=si,mn=d.stateNode.containerInfo,si=!0,Li(s,a,d),mn=y,si=S;break;case 0:case 11:case 14:case 15:if(!$t&&(y=d.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){S=y=y.next;do{var E=S,L=E.destroy;E=E.tag,L!==void 0&&((E&2)!==0||(E&4)!==0)&&Ya(d,a,L),S=S.next}while(S!==y)}Li(s,a,d);break;case 1:if(!$t&&(Al(d,a),y=d.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=d.memoizedProps,y.state=d.memoizedState,y.componentWillUnmount()}catch(K){Vt(d,a,K)}Li(s,a,d);break;case 21:Li(s,a,d);break;case 22:d.mode&1?($t=(y=$t)||d.memoizedState!==null,Li(s,a,d),$t=y):Li(s,a,d);break;default:Li(s,a,d)}}function Il(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new Hn),a.forEach(function(y){var S=Ug.bind(null,s,y);d.has(y)||(d.add(y),y.then(S,S))})}}function xr(s,a){var d=a.deletions;if(d!==null)for(var y=0;y<d.length;y++){var S=d[y];try{var E=s,L=a,K=L;e:for(;K!==null;){switch(K.tag){case 5:mn=K.stateNode,si=!1;break e;case 3:mn=K.stateNode.containerInfo,si=!0;break e;case 4:mn=K.stateNode.containerInfo,si=!0;break e}K=K.return}if(mn===null)throw Error(t(160));od(E,L,S),mn=null,si=!1;var X=S.alternate;X!==null&&(X.return=null),S.return=null}catch(fe){Vt(S,a,fe)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)sd(a,s),a=a.sibling}function sd(s,a){var d=s.alternate,y=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(xr(a,s),li(s),y&4){try{uo(3,s,s.return),Xa(3,s)}catch(De){Vt(s,s.return,De)}try{uo(5,s,s.return)}catch(De){Vt(s,s.return,De)}}break;case 1:xr(a,s),li(s),y&512&&d!==null&&Al(d,d.return);break;case 5:if(xr(a,s),li(s),y&512&&d!==null&&Al(d,d.return),s.flags&32){var S=s.stateNode;try{ft(S,"")}catch(De){Vt(s,s.return,De)}}if(y&4&&(S=s.stateNode,S!=null)){var E=s.memoizedProps,L=d!==null?d.memoizedProps:E,K=s.type,X=s.updateQueue;if(s.updateQueue=null,X!==null)try{K==="input"&&E.type==="radio"&&E.name!=null&&Eo(S,E),Mr(K,L);var fe=Mr(K,E);for(L=0;L<X.length;L+=2){var Se=X[L],Ce=X[L+1];Se==="style"?xi(S,Ce):Se==="dangerouslySetInnerHTML"?rt(S,Ce):Se==="children"?ft(S,Ce):I(S,Se,Ce,fe)}switch(K){case"input":En(S,E);break;case"textarea":fs(S,E);break;case"select":var xe=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!E.multiple;var Oe=E.value;Oe!=null?bt(S,!!E.multiple,Oe,!1):xe!==!!E.multiple&&(E.defaultValue!=null?bt(S,!!E.multiple,E.defaultValue,!0):bt(S,!!E.multiple,E.multiple?[]:"",!1))}S[Lo]=E}catch(De){Vt(s,s.return,De)}}break;case 6:if(xr(a,s),li(s),y&4){if(s.stateNode===null)throw Error(t(162));S=s.stateNode,E=s.memoizedProps;try{S.nodeValue=E}catch(De){Vt(s,s.return,De)}}break;case 3:if(xr(a,s),li(s),y&4&&d!==null&&d.memoizedState.isDehydrated)try{Ct(a.containerInfo)}catch(De){Vt(s,s.return,De)}break;case 4:xr(a,s),li(s);break;case 13:xr(a,s),li(s),S=s.child,S.flags&8192&&(E=S.memoizedState!==null,S.stateNode.isHidden=E,!E||S.alternate!==null&&S.alternate.memoizedState!==null||(ud=Ut())),y&4&&Il(s);break;case 22:if(Se=d!==null&&d.memoizedState!==null,s.mode&1?($t=(fe=$t)||Se,xr(a,s),$t=fe):xr(a,s),li(s),y&8192){if(fe=s.memoizedState!==null,(s.stateNode.isHidden=fe)&&!Se&&(s.mode&1)!==0)for(Pe=s,Se=s.child;Se!==null;){for(Ce=Pe=Se;Pe!==null;){switch(xe=Pe,Oe=xe.child,xe.tag){case 0:case 11:case 14:case 15:uo(4,xe,xe.return);break;case 1:Al(xe,xe.return);var Re=xe.stateNode;if(typeof Re.componentWillUnmount=="function"){y=xe,d=xe.return;try{a=y,Re.props=a.memoizedProps,Re.state=a.memoizedState,Re.componentWillUnmount()}catch(De){Vt(y,d,De)}}break;case 5:Al(xe,xe.return);break;case 22:if(xe.memoizedState!==null){Vo(Ce);continue}}Oe!==null?(Oe.return=xe,Pe=Oe):Vo(Ce)}Se=Se.sibling}e:for(Se=null,Ce=s;;){if(Ce.tag===5){if(Se===null){Se=Ce;try{S=Ce.stateNode,fe?(E=S.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(K=Ce.stateNode,X=Ce.memoizedProps.style,L=X!=null&&X.hasOwnProperty("display")?X.display:null,K.style.display=er("display",L))}catch(De){Vt(s,s.return,De)}}}else if(Ce.tag===6){if(Se===null)try{Ce.stateNode.nodeValue=fe?"":Ce.memoizedProps}catch(De){Vt(s,s.return,De)}}else if((Ce.tag!==22&&Ce.tag!==23||Ce.memoizedState===null||Ce===s)&&Ce.child!==null){Ce.child.return=Ce,Ce=Ce.child;continue}if(Ce===s)break e;for(;Ce.sibling===null;){if(Ce.return===null||Ce.return===s)break e;Se===Ce&&(Se=null),Ce=Ce.return}Se===Ce&&(Se=null),Ce.sibling.return=Ce.return,Ce=Ce.sibling}}break;case 19:xr(a,s),li(s),y&4&&Il(s);break;case 21:break;default:xr(a,s),li(s)}}function li(s){var a=s.flags;if(a&2){try{e:{for(var d=s.return;d!==null;){if(tm(d)){var y=d;break e}d=d.return}throw Error(t(160))}switch(y.tag){case 5:var S=y.stateNode;y.flags&32&&(ft(S,""),y.flags&=-33);var E=nm(s);Vc(s,E,S);break;case 3:case 4:var L=y.stateNode.containerInfo,K=nm(s);id(s,K,L);break;default:throw Error(t(161))}}catch(X){Vt(s,s.return,X)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function qc(s,a,d){Pe=s,ld(s)}function ld(s,a,d){for(var y=(s.mode&1)!==0;Pe!==null;){var S=Pe,E=S.child;if(S.tag===22&&y){var L=S.memoizedState!==null||$c;if(!L){var K=S.alternate,X=K!==null&&K.memoizedState!==null||$t;K=$c;var fe=$t;if($c=L,($t=X)&&!fe)for(Pe=S;Pe!==null;)L=Pe,X=L.child,L.tag===22&&L.memoizedState!==null?rm(S):X!==null?(X.return=L,Pe=X):rm(S);for(;E!==null;)Pe=E,ld(E),E=E.sibling;Pe=S,$c=K,$t=fe}ai(s)}else(S.subtreeFlags&8772)!==0&&E!==null?(E.return=S,Pe=E):ai(s)}}function ai(s){for(;Pe!==null;){var a=Pe;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:$t||Xa(5,a);break;case 1:var y=a.stateNode;if(a.flags&4&&!$t)if(d===null)y.componentDidMount();else{var S=a.elementType===a.type?d.memoizedProps:Fr(a.type,d.memoizedProps);y.componentDidUpdate(S,d.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var E=a.updateQueue;E!==null&&Ph(a,E,y);break;case 3:var L=a.updateQueue;if(L!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}Ph(a,L,d)}break;case 5:var K=a.stateNode;if(d===null&&a.flags&4){d=K;var X=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&d.focus();break;case"img":X.src&&(d.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var fe=a.alternate;if(fe!==null){var Se=fe.memoizedState;if(Se!==null){var Ce=Se.dehydrated;Ce!==null&&Ct(Ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}$t||a.flags&512&&Hc(a)}catch(xe){Vt(a,a.return,xe)}}if(a===s){Pe=null;break}if(d=a.sibling,d!==null){d.return=a.return,Pe=d;break}Pe=a.return}}function Vo(s){for(;Pe!==null;){var a=Pe;if(a===s){Pe=null;break}var d=a.sibling;if(d!==null){d.return=a.return,Pe=d;break}Pe=a.return}}function rm(s){for(;Pe!==null;){var a=Pe;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{Xa(4,a)}catch(X){Vt(a,d,X)}break;case 1:var y=a.stateNode;if(typeof y.componentDidMount=="function"){var S=a.return;try{y.componentDidMount()}catch(X){Vt(a,S,X)}}var E=a.return;try{Hc(a)}catch(X){Vt(a,E,X)}break;case 5:var L=a.return;try{Hc(a)}catch(X){Vt(a,L,X)}}}catch(X){Vt(a,a.return,X)}if(a===s){Pe=null;break}var K=a.sibling;if(K!==null){K.return=a.return,Pe=K;break}Pe=a.return}}var im=Math.ceil,Kc=W.ReactCurrentDispatcher,ad=W.ReactCurrentOwner,Br=W.ReactCurrentBatchConfig,mt=0,gn=null,rn=null,Cn=0,Sr=0,Ol=nr(0),hn=0,Za=null,qo=0,eu=0,Jc=0,tu=null,lr=null,ud=0,Rs=1/0,co=null,Gc=!1,cd=null,Ko=null,Qc=!1,Jo=null,Vn=0,nu=0,fd=null,Yc=-1,ru=0;function qn(){return(mt&6)!==0?Ut():Yc!==-1?Yc:Yc=Ut()}function Go(s){return(s.mode&1)===0?1:(mt&2)!==0&&Cn!==0?Cn&-Cn:L0.transition!==null?(ru===0&&(ru=oh()),ru):(s=_t,s!==0||(s=window.event,s=s===void 0?16:u0(s.type)),s)}function ui(s,a,d,y){if(50<nu)throw nu=0,fd=null,Error(t(185));ya(s,d,y),((mt&2)===0||s!==gn)&&(s===gn&&((mt&2)===0&&(eu|=d),hn===4&&Qo(s,Cn)),ar(s,y),d===1&&mt===0&&(a.mode&1)===0&&(Rs=Ut()+500,vc&&Bo()))}function ar(s,a){var d=s.callbackNode;cg(s,a);var y=ms(s,s===gn?Cn:0);if(y===0)d!==null&&Yp(d),s.callbackNode=null,s.callbackPriority=0;else if(a=y&-y,s.callbackPriority!==a){if(d!=null&&Yp(d),a===1)s.tag===0?bs(om.bind(null,s)):R0(om.bind(null,s)),pc(function(){(mt&6)===0&&Bo()}),d=null;else{switch(gs(y)){case 1:d=rh;break;case 4:d=Xp;break;case 16:d=ma;break;case 536870912:d=ih;break;default:d=ma}d=hm(d,Xc.bind(null,s))}s.callbackPriority=a,s.callbackNode=d}}function Xc(s,a){if(Yc=-1,ru=0,(mt&6)!==0)throw Error(t(327));var d=s.callbackNode;if(Pl()&&s.callbackNode!==d)return null;var y=ms(s,s===gn?Cn:0);if(y===0)return null;if((y&30)!==0||(y&s.expiredLanes)!==0||a)a=Zc(s,y);else{a=y;var S=mt;mt|=2;var E=lm();(gn!==s||Cn!==a)&&(co=null,Rs=Ut()+500,zs(s,a));do try{zg();break}catch(K){sm(s,K)}while(!0);no(),Kc.current=E,mt=S,rn!==null?a=0:(gn=null,Cn=0,a=hn)}if(a!==0){if(a===2&&(S=Vu(s),S!==0&&(y=S,a=hd(s,S))),a===1)throw d=Za,zs(s,0),Qo(s,y),ar(s,Ut()),d;if(a===6)Qo(s,y);else{if(S=s.current.alternate,(y&30)===0&&!Rg(S)&&(a=Zc(s,y),a===2&&(E=Vu(s),E!==0&&(y=E,a=hd(s,E))),a===1))throw d=Za,zs(s,0),Qo(s,y),ar(s,Ut()),d;switch(s.finishedWork=S,s.finishedLanes=y,a){case 0:case 1:throw Error(t(345));case 2:Ls(s,lr,co);break;case 3:if(Qo(s,y),(y&130023424)===y&&(a=ud+500-Ut(),10<a)){if(ms(s,0)!==0)break;if(S=s.suspendedLanes,(S&y)!==y){qn(),s.pingedLanes|=s.suspendedLanes&S;break}s.timeoutHandle=Do(Ls.bind(null,s,lr,co),a);break}Ls(s,lr,co);break;case 4:if(Qo(s,y),(y&4194240)===y)break;for(a=s.eventTimes,S=-1;0<y;){var L=31-ti(y);E=1<<L,L=a[L],L>S&&(S=L),y&=~E}if(y=S,y=Ut()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*im(y/1960))-y,10<y){s.timeoutHandle=Do(Ls.bind(null,s,lr,co),y);break}Ls(s,lr,co);break;case 5:Ls(s,lr,co);break;default:throw Error(t(329))}}}return ar(s,Ut()),s.callbackNode===d?Xc.bind(null,s):null}function hd(s,a){var d=tu;return s.current.memoizedState.isDehydrated&&(zs(s,a).flags|=256),s=Zc(s,a),s!==2&&(a=lr,lr=d,a!==null&&dd(a)),s}function dd(s){lr===null?lr=s:lr.push.apply(lr,s)}function Rg(s){for(var a=s;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var y=0;y<d.length;y++){var S=d[y],E=S.getSnapshot;S=S.value;try{if(!ce(E(),S))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Qo(s,a){for(a&=~Jc,a&=~eu,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var d=31-ti(a),y=1<<d;s[d]=-1,a&=~y}}function om(s){if((mt&6)!==0)throw Error(t(327));Pl();var a=ms(s,0);if((a&1)===0)return ar(s,Ut()),null;var d=Zc(s,a);if(s.tag!==0&&d===2){var y=Vu(s);y!==0&&(a=y,d=hd(s,y))}if(d===1)throw d=Za,zs(s,0),Qo(s,a),ar(s,Ut()),d;if(d===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,Ls(s,lr,co),ar(s,Ut()),null}function pd(s,a){var d=mt;mt|=1;try{return s(a)}finally{mt=d,mt===0&&(Rs=Ut()+500,vc&&Bo())}}function Ds(s){Jo!==null&&Jo.tag===0&&(mt&6)===0&&Pl();var a=mt;mt|=1;var d=Br.transition,y=_t;try{if(Br.transition=null,_t=1,s)return s()}finally{_t=y,Br.transition=d,mt=a,(mt&6)===0&&Bo()}}function md(){Sr=Ol.current,Lt(Ol)}function zs(s,a){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,Oa(d)),rn!==null)for(d=rn.return;d!==null;){var y=d;switch(Es(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&yc();break;case 3:jo(),Lt(rr),Lt(An),Mc();break;case 5:Tc(y);break;case 4:jo();break;case 13:Lt(jt);break;case 19:Lt(jt);break;case 10:bc(y.type._context);break;case 22:case 23:md()}d=d.return}if(gn=s,rn=s=ci(s.current,null),Cn=Sr=a,hn=0,Za=null,Jc=eu=qo=0,lr=tu=null,Ms!==null){for(a=0;a<Ms.length;a++)if(d=Ms[a],y=d.interleaved,y!==null){d.interleaved=null;var S=y.next,E=d.pending;if(E!==null){var L=E.next;E.next=S,y.next=L}d.pending=y}Ms=null}return s}function sm(s,a){do{var d=rn;try{if(no(),Ba.current=Rc,Sl){for(var y=Ht.memoizedState;y!==null;){var S=y.queue;S!==null&&(S.pending=null),y=y.next}Sl=!1}if($o=0,fn=Qt=Ht=null,Ua=!1,As=0,ad.current=null,d===null||d.return===null){hn=1,Za=a,rn=null;break}e:{var E=s,L=d.return,K=d,X=a;if(a=Cn,K.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var fe=X,Se=K,Ce=Se.tag;if((Se.mode&1)===0&&(Ce===0||Ce===11||Ce===15)){var xe=Se.alternate;xe?(Se.updateQueue=xe.updateQueue,Se.memoizedState=xe.memoizedState,Se.lanes=xe.lanes):(Se.updateQueue=null,Se.memoizedState=null)}var Oe=J0(L);if(Oe!==null){Oe.flags&=-257,Gh(Oe,L,K,E,a),Oe.mode&1&&Va(E,fe,a),a=Oe,X=fe;var Re=a.updateQueue;if(Re===null){var De=new Set;De.add(X),a.updateQueue=De}else Re.add(X);break e}else{if((a&1)===0){Va(E,fe,a),gd();break e}X=Error(t(426))}}else if(Ft&&K.mode&1){var Yt=J0(L);if(Yt!==null){(Yt.flags&65536)===0&&(Yt.flags|=256),Gh(Yt,L,K,E,a),Ii(Ps(X,K));break e}}E=X=Ps(X,K),hn!==4&&(hn=2),tu===null?tu=[E]:tu.push(E),E=L;do{switch(E.tag){case 3:E.flags|=65536,a&=-a,E.lanes|=a;var ae=Ha(E,X,a);U0(E,ae);break e;case 1:K=X;var te=E.type,ue=E.stateNode;if((E.flags&128)===0&&(typeof te.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(Ko===null||!Ko.has(ue)))){E.flags|=65536,a&=-a,E.lanes|=a;var Ee=Bc(E,K,a);U0(E,Ee);break e}}E=E.return}while(E!==null)}um(d)}catch(ze){a=ze,rn===d&&d!==null&&(rn=d=d.return);continue}break}while(!0)}function lm(){var s=Kc.current;return Kc.current=Rc,s===null?Rc:s}function gd(){(hn===0||hn===3||hn===2)&&(hn=4),gn===null||(qo&268435455)===0&&(eu&268435455)===0||Qo(gn,Cn)}function Zc(s,a){var d=mt;mt|=2;var y=lm();(gn!==s||Cn!==a)&&(co=null,zs(s,a));do try{Dg();break}catch(S){sm(s,S)}while(!0);if(no(),mt=d,Kc.current=y,rn!==null)throw Error(t(261));return gn=null,Cn=0,hn}function Dg(){for(;rn!==null;)am(rn)}function zg(){for(;rn!==null&&!ju();)am(rn)}function am(s){var a=fm(s.alternate,s,Sr);s.memoizedProps=s.pendingProps,a===null?um(s):rn=a,ad.current=null}function um(s){var a=s;do{var d=a.alternate;if(s=a.return,(a.flags&32768)===0){if(d=Ig(d,a,Sr),d!==null){rn=d;return}}else{if(d=Og(d,a),d!==null){d.flags&=32767,rn=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{hn=6,rn=null;return}}if(a=a.sibling,a!==null){rn=a;return}rn=a=s}while(a!==null);hn===0&&(hn=5)}function Ls(s,a,d){var y=_t,S=Br.transition;try{Br.transition=null,_t=1,Lg(s,a,d,y)}finally{Br.transition=S,_t=y}return null}function Lg(s,a,d,y){do Pl();while(Jo!==null);if((mt&6)!==0)throw Error(t(327));d=s.finishedWork;var S=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var E=d.lanes|d.childLanes;if(i0(s,E),s===gn&&(rn=gn=null,Cn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Qc||(Qc=!0,hm(ma,function(){return Pl(),null})),E=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||E){E=Br.transition,Br.transition=null;var L=_t;_t=1;var K=mt;mt|=4,ad.current=null,Pg(s,d),sd(d,s),Tg(Ss),Gu=!!Aa,Ss=Aa=null,s.current=d,qc(d),lg(),mt=K,_t=L,Br.transition=E}else s.current=d;if(Qc&&(Qc=!1,Jo=s,Vn=S),E=s.pendingLanes,E===0&&(Ko=null),ug(d.stateNode),ar(s,Ut()),a!==null)for(y=s.onRecoverableError,d=0;d<a.length;d++)S=a[d],y(S.value,{componentStack:S.stack,digest:S.digest});if(Gc)throw Gc=!1,s=cd,cd=null,s;return(Vn&1)!==0&&s.tag!==0&&Pl(),E=s.pendingLanes,(E&1)!==0?s===fd?nu++:(nu=0,fd=s):nu=0,Bo(),null}function Pl(){if(Jo!==null){var s=gs(Vn),a=Br.transition,d=_t;try{if(Br.transition=null,_t=16>s?16:s,Jo===null)var y=!1;else{if(s=Jo,Jo=null,Vn=0,(mt&6)!==0)throw Error(t(331));var S=mt;for(mt|=4,Pe=s.current;Pe!==null;){var E=Pe,L=E.child;if((Pe.flags&16)!==0){var K=E.deletions;if(K!==null){for(var X=0;X<K.length;X++){var fe=K[X];for(Pe=fe;Pe!==null;){var Se=Pe;switch(Se.tag){case 0:case 11:case 15:uo(8,Se,E)}var Ce=Se.child;if(Ce!==null)Ce.return=Se,Pe=Ce;else for(;Pe!==null;){Se=Pe;var xe=Se.sibling,Oe=Se.return;if(em(Se),Se===fe){Pe=null;break}if(xe!==null){xe.return=Oe,Pe=xe;break}Pe=Oe}}}var Re=E.alternate;if(Re!==null){var De=Re.child;if(De!==null){Re.child=null;do{var Yt=De.sibling;De.sibling=null,De=Yt}while(De!==null)}}Pe=E}}if((E.subtreeFlags&2064)!==0&&L!==null)L.return=E,Pe=L;else e:for(;Pe!==null;){if(E=Pe,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:uo(9,E,E.return)}var ae=E.sibling;if(ae!==null){ae.return=E.return,Pe=ae;break e}Pe=E.return}}var te=s.current;for(Pe=te;Pe!==null;){L=Pe;var ue=L.child;if((L.subtreeFlags&2064)!==0&&ue!==null)ue.return=L,Pe=ue;else e:for(L=te;Pe!==null;){if(K=Pe,(K.flags&2048)!==0)try{switch(K.tag){case 0:case 11:case 15:Xa(9,K)}}catch(ze){Vt(K,K.return,ze)}if(K===L){Pe=null;break e}var Ee=K.sibling;if(Ee!==null){Ee.return=K.return,Pe=Ee;break e}Pe=K.return}}if(mt=S,Bo(),Si&&typeof Si.onPostCommitFiberRoot=="function")try{Si.onPostCommitFiberRoot($u,s)}catch{}y=!0}return y}finally{_t=d,Br.transition=a}}return!1}function ef(s,a,d){a=Ps(d,a),a=Ha(s,a,1),s=zr(s,a,1),a=qn(),s!==null&&(ya(s,1,a),ar(s,a))}function Vt(s,a,d){if(s.tag===3)ef(s,s,d);else for(;a!==null;){if(a.tag===3){ef(a,s,d);break}else if(a.tag===1){var y=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Ko===null||!Ko.has(y))){s=Ps(d,s),s=Bc(a,s,1),a=zr(a,s,1),s=qn(),a!==null&&(ya(a,1,s),ar(a,s));break}}a=a.return}}function Fg(s,a,d){var y=s.pingCache;y!==null&&y.delete(a),a=qn(),s.pingedLanes|=s.suspendedLanes&d,gn===s&&(Cn&d)===d&&(hn===4||hn===3&&(Cn&130023424)===Cn&&500>Ut()-ud?zs(s,0):Jc|=d),ar(s,a)}function cm(s,a){a===0&&((s.mode&1)===0?a=1:(a=Hu,Hu<<=1,(Hu&130023424)===0&&(Hu=4194304)));var d=qn();s=ro(s,a),s!==null&&(ya(s,a,d),ar(s,d))}function Bg(s){var a=s.memoizedState,d=0;a!==null&&(d=a.retryLane),cm(s,d)}function Ug(s,a){var d=0;switch(s.tag){case 13:var y=s.stateNode,S=s.memoizedState;S!==null&&(d=S.retryLane);break;case 19:y=s.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(a),cm(s,d)}var fm;fm=function(s,a,d){if(s!==null)if(s.memoizedProps!==a.pendingProps||rr.current)$n=!0;else{if((s.lanes&d)===0&&(a.flags&128)===0)return $n=!1,Y0(s,a,d);$n=(s.flags&131072)!==0}else $n=!1,Ft&&(a.flags&1048576)!==0&&D0(a,kc,a.index);switch(a.lanes=0,a.tag){case 2:var y=a.type;jc(s,a),s=a.pendingProps;var S=yl(a,An.current);Wo(a,d),S=Is(null,a,y,s,S,d);var E=Nc();return a.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,ir(y)?(E=!0,Ir(a)):E=!1,a.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Cc(a),S.updater=Lc,a.stateNode=S,S._reactInternals=a,Jh(a,y,s,d),a=td(null,a,y,!0,E,d)):(a.tag=0,Ft&&E&&Pa(a),Sn(null,a,S,d),a=a.child),a;case 16:y=a.elementType;e:{switch(jc(s,a),s=a.pendingProps,S=y._init,y=S(y._payload),a.type=y,S=a.tag=jg(y),s=Fr(y,s),S){case 0:a=Zh(null,a,y,s,d);break e;case 1:a=ed(null,a,y,s,d);break e;case 11:a=G0(null,a,y,s,d);break e;case 14:a=Qh(null,a,y,Fr(y.type,s),d);break e}throw Error(t(306,y,""))}return a;case 0:return y=a.type,S=a.pendingProps,S=a.elementType===y?S:Fr(y,S),Zh(s,a,y,S,d);case 1:return y=a.type,S=a.pendingProps,S=a.elementType===y?S:Fr(y,S),ed(s,a,y,S,d);case 3:e:{if(Q0(a),s===null)throw Error(t(387));y=a.pendingProps,E=a.memoizedState,S=E.element,B0(s,a),kl(a,y,null,d);var L=a.memoizedState;if(y=L.element,E.isDehydrated)if(E={element:y,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){S=Ps(Error(t(423)),a),a=zi(s,a,y,d,S);break e}else if(y!==S){S=Ps(Error(t(424)),a),a=zi(s,a,y,d,S);break e}else for(wr=zo(a.stateNode.containerInfo.firstChild),On=a,Ft=!0,ri=null,d=Sc(a,null,y,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ai(),y===S){a=oi(s,a,d);break e}Sn(s,a,y,d)}a=a.child}return a;case 5:return Dh(a),s===null&&or(a),y=a.type,S=a.pendingProps,E=s!==null?s.memoizedProps:null,L=S.children,Ia(y,S)?L=null:E!==null&&Ia(y,E)&&(a.flags|=32),Xh(s,a),Sn(s,a,L,d),a.child;case 6:return s===null&&or(a),null;case 13:return Wc(s,a,d);case 4:return Rh(a,a.stateNode.containerInfo),y=a.pendingProps,s===null?a.child=Jt(a,null,y,d):Sn(s,a,y,d),a.child;case 11:return y=a.type,S=a.pendingProps,S=a.elementType===y?S:Fr(y,S),G0(s,a,y,S,d);case 7:return Sn(s,a,a.pendingProps,d),a.child;case 8:return Sn(s,a,a.pendingProps.children,d),a.child;case 12:return Sn(s,a,a.pendingProps.children,d),a.child;case 10:e:{if(y=a.type._context,S=a.pendingProps,E=a.memoizedProps,L=S.value,Dt(za,y._currentValue),y._currentValue=L,E!==null)if(ce(E.value,L)){if(E.children===S.children&&!rr.current){a=oi(s,a,d);break e}}else for(E=a.child,E!==null&&(E.return=a);E!==null;){var K=E.dependencies;if(K!==null){L=E.child;for(var X=K.firstContext;X!==null;){if(X.context===y){if(E.tag===1){X=io(-1,d&-d),X.tag=2;var fe=E.updateQueue;if(fe!==null){fe=fe.shared;var Se=fe.pending;Se===null?X.next=X:(X.next=Se.next,Se.next=X),fe.pending=X}}E.lanes|=d,X=E.alternate,X!==null&&(X.lanes|=d),xn(E.return,d,a),K.lanes|=d;break}X=X.next}}else if(E.tag===10)L=E.type===a.type?null:E.child;else if(E.tag===18){if(L=E.return,L===null)throw Error(t(341));L.lanes|=d,K=L.alternate,K!==null&&(K.lanes|=d),xn(L,d,a),L=E.sibling}else L=E.child;if(L!==null)L.return=E;else for(L=E;L!==null;){if(L===a){L=null;break}if(E=L.sibling,E!==null){E.return=L.return,L=E;break}L=L.return}E=L}Sn(s,a,S.children,d),a=a.child}return a;case 9:return S=a.type,y=a.pendingProps.children,Wo(a,d),S=Rr(S),y=y(S),a.flags|=1,Sn(s,a,y,d),a.child;case 14:return y=a.type,S=Fr(y,a.pendingProps),S=Fr(y.type,S),Qh(s,a,y,S,d);case 15:return Di(s,a,a.type,a.pendingProps,d);case 17:return y=a.type,S=a.pendingProps,S=a.elementType===y?S:Fr(y,S),jc(s,a),a.tag=1,ir(y)?(s=!0,Ir(a)):s=!1,Wo(a,d),Os(a,y,S),Jh(a,y,S,d),td(null,a,y,!0,s,d);case 19:return Ho(s,a,d);case 22:return Yh(s,a,d)}throw Error(t(156,a.tag))};function hm(s,a){return Qp(s,a)}function Wg(s,a,d,y){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(s,a,d,y){return new Wg(s,a,d,y)}function tf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function jg(s){if(typeof s=="function")return tf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===D)return 11;if(s===oe)return 14}return 2}function ci(s,a){var d=s.alternate;return d===null?(d=Ur(s.tag,a,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=a,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,a=s.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function nf(s,a,d,y,S,E){var L=2;if(y=s,typeof s=="function")tf(s)&&(L=1);else if(typeof s=="string")L=5;else e:switch(s){case H:return Fs(d.children,S,E,a);case Q:L=8,S|=8;break;case q:return s=Ur(12,d,a,S|2),s.elementType=q,s.lanes=E,s;case G:return s=Ur(13,d,a,S),s.elementType=G,s.lanes=E,s;case le:return s=Ur(19,d,a,S),s.elementType=le,s.lanes=E,s;case de:return rf(d,S,E,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case _:L=10;break e;case U:L=9;break e;case D:L=11;break e;case oe:L=14;break e;case ye:L=16,y=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=Ur(L,d,a,S),a.elementType=s,a.type=y,a.lanes=E,a}function Fs(s,a,d,y){return s=Ur(7,s,y,a),s.lanes=d,s}function rf(s,a,d,y){return s=Ur(22,s,y,a),s.elementType=de,s.lanes=d,s.stateNode={isHidden:!1},s}function yd(s,a,d){return s=Ur(6,s,null,a),s.lanes=d,s}function vd(s,a,d){return a=Ur(4,s.children!==null?s.children:[],s.key,a),a.lanes=d,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function $g(s,a,d,y,S){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ga(0),this.expirationTimes=ga(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ga(0),this.identifierPrefix=y,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function wd(s,a,d,y,S,E,L,K,X){return s=new $g(s,a,d,K,X),a===1?(a=1,E===!0&&(a|=8)):a=0,E=Ur(3,null,null,a),s.current=E,E.stateNode=s,E.memoizedState={element:y,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cc(E),s}function Hg(s,a,d){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:y==null?null:""+y,children:s,containerInfo:a,implementation:d}}function dm(s){if(!s)return Fo;s=s._reactInternals;e:{if(ps(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(ir(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var d=s.type;if(ir(d))return O0(s,d,a)}return a}function pm(s,a,d,y,S,E,L,K,X){return s=wd(d,y,!0,s,S,E,L,K,X),s.context=dm(null),d=s.current,y=qn(),S=Go(d),E=io(y,S),E.callback=a??null,zr(d,E,S),s.current.lanes=S,ya(s,S,y),ar(s,y),s}function of(s,a,d,y){var S=a.current,E=qn(),L=Go(S);return d=dm(d),a.context===null?a.context=d:a.pendingContext=d,a=io(E,L),a.payload={element:s},y=y===void 0?null:y,y!==null&&(a.callback=y),s=zr(S,a,L),s!==null&&(ui(s,S,L,E),Ec(s,S,L)),L}function sf(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function mm(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<a?d:a}}function kd(s,a){mm(s,a),(s=s.alternate)&&mm(s,a)}function Vg(){return null}var gm=typeof reportError=="function"?reportError:function(s){console.error(s)};function lf(s){this._internalRoot=s}iu.prototype.render=lf.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));of(s,a,null,null)},iu.prototype.unmount=lf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Ds(function(){of(null,s,null,null)}),a[vr]=null}};function iu(s){this._internalRoot=s}iu.prototype.unstable_scheduleHydration=function(s){if(s){var a=lh();s={blockedOn:null,target:s,priority:a};for(var d=0;d<Ao.length&&a!==0&&a<Ao[d].priority;d++);Ao.splice(d,0,s),d===0&&l0(s)}};function xd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function af(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function ym(){}function qg(s,a,d,y,S){if(S){if(typeof y=="function"){var E=y;y=function(){var fe=sf(L);E.call(fe)}}var L=pm(a,y,s,0,null,!1,!1,"",ym);return s._reactRootContainer=L,s[vr]=L.current,Ro(s.nodeType===8?s.parentNode:s),Ds(),L}for(;S=s.lastChild;)s.removeChild(S);if(typeof y=="function"){var K=y;y=function(){var fe=sf(X);K.call(fe)}}var X=wd(s,0,!1,null,null,!1,!1,"",ym);return s._reactRootContainer=X,s[vr]=X.current,Ro(s.nodeType===8?s.parentNode:s),Ds(function(){of(a,X,d,y)}),X}function Bs(s,a,d,y,S){var E=d._reactRootContainer;if(E){var L=E;if(typeof S=="function"){var K=S;S=function(){var X=sf(L);K.call(X)}}of(a,L,s,S)}else L=qg(d,a,s,S,y);return sf(L)}sh=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var d=Zs(a.pendingLanes);d!==0&&(va(a,d|1),ar(a,Ut()),(mt&6)===0&&(Rs=Ut()+500,Bo()))}break;case 13:Ds(function(){var y=ro(s,1);if(y!==null){var S=qn();ui(y,s,1,S)}}),kd(s,1)}},qu=function(s){if(s.tag===13){var a=ro(s,134217728);if(a!==null){var d=qn();ui(a,s,134217728,d)}kd(s,134217728)}},o0=function(s){if(s.tag===13){var a=Go(s),d=ro(s,a);if(d!==null){var y=qn();ui(d,s,a,y)}kd(s,a)}},lh=function(){return _t},ah=function(s,a){var d=_t;try{return _t=s,a()}finally{_t=d}},Yf=function(s,a,d){switch(a){case"input":if(En(s,d),a=d.name,d.type==="radio"&&a!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var y=d[a];if(y!==s&&y.form===s.form){var S=gc(y);if(!S)throw Error(t(90));pt(y),En(y,S)}}}break;case"textarea":fs(s,d);break;case"select":a=d.value,a!=null&&bt(s,!!d.multiple,a,!1)}},Vp=pd,Xf=Ds;var Kg={usingClientEntryPoint:!1,Events:[Nn,tt,gc,$p,Hp,pd]},ou={findFiberByHostInstance:Ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jg={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Jp(s),s===null?null:s.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||Vg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uf.isDisabled&&uf.supportsFiber)try{$u=uf.inject(Jg),Si=uf}catch{}}return Hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kg,Hr.createPortal=function(s,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xd(a))throw Error(t(200));return Hg(s,a,null,d)},Hr.createRoot=function(s,a){if(!xd(s))throw Error(t(299));var d=!1,y="",S=gm;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),a=wd(s,1,!1,null,null,d,!1,y,S),s[vr]=a.current,Ro(s.nodeType===8?s.parentNode:s),new lf(a)},Hr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Jp(a),s=s===null?null:s.stateNode,s},Hr.flushSync=function(s){return Ds(s)},Hr.hydrate=function(s,a,d){if(!af(a))throw Error(t(200));return Bs(null,s,a,!0,d)},Hr.hydrateRoot=function(s,a,d){if(!xd(s))throw Error(t(405));var y=d!=null&&d.hydratedSources||null,S=!1,E="",L=gm;if(d!=null&&(d.unstable_strictMode===!0&&(S=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onRecoverableError!==void 0&&(L=d.onRecoverableError)),a=pm(a,null,s,1,d??null,S,!1,E,L),s[vr]=a.current,Ro(s),y)for(s=0;s<y.length;s++)d=y[s],S=d._getVersion,S=S(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,S]:a.mutableSourceEagerHydrationData.push(d,S);return new iu(a)},Hr.render=function(s,a,d){if(!af(a))throw Error(t(200));return Bs(null,s,a,!1,d)},Hr.unmountComponentAtNode=function(s){if(!af(s))throw Error(t(40));return s._reactRootContainer?(Ds(function(){Bs(null,null,s,!1,function(){s._reactRootContainer=null,s[vr]=null})}),!0):!1},Hr.unstable_batchedUpdates=pd,Hr.unstable_renderSubtreeIntoContainer=function(s,a,d,y){if(!af(d))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Bs(s,a,d,!1,y)},Hr.version="18.3.1-next-f1338f8080-20240426",Hr}var gw;function bC(){if(gw)return uy.exports;gw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),uy.exports=SC(),uy.exports}var yw;function _C(){if(yw)return xm;yw=1;var n=bC();return xm.createRoot=n.createRoot,xm.hydrateRoot=n.hydrateRoot,xm}var CC=_C();const nv=Xe.createContext({});function EC(){const{dom:n,editor:e,setLoading:t,editorFactory:r}=Xe.useContext(nv),i=Xe.useRef(null);return Xe.useEffect(()=>{const o=i.current;if(!r||!o)return;n.current=o;const l=r(o);if(l)return t(!0),l.create().then(u=>{e.current=u}).finally(()=>{t(!1)}).catch(console.error),()=>{l.destroy()}},[n,e,r,t]),i}const TC=()=>{const n=EC();return Mx.createElement("div",{"data-milkdown-root":!0,ref:n})},MC=({children:n})=>{const e=Xe.useRef(void 0),[t,r]=Xe.useState(void 0),i=Xe.useRef(void 0),[o,l]=Xe.useState(!0),u=Xe.useMemo(()=>({loading:o,dom:e,editor:i,setLoading:l,editorFactory:t,setEditorFactory:r}),[o,t]);return Mx.createElement(nv.Provider,{value:u},n)};function NC(n,e=[]){const t=Xe.useContext(nv),r=Xe.useCallback(n,e);return Xe.useLayoutEffect(()=>{t.setEditorFactory(()=>r)},[t,r]),{loading:t.loading,get:()=>t.editor.current}}var hy=Nx();const op=Symbol(),AC=Symbol(),IC=typeof window>"u"||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent),Ax=IC?Xe.useEffect:Xe.useLayoutEffect,OC=hy.unstable_runWithPriority?n=>{try{hy.unstable_runWithPriority(hy.unstable_NormalPriority,n)}catch(e){if(e.message==="Not implemented.")n();else throw e}}:n=>n(),PC=n=>({value:t,children:r})=>{const i=Xe.useRef(t),o=Xe.useRef(0),[l,u]=Xe.useState(null);l&&(l(t),u(null));const f=Xe.useRef();if(!f.current){const p=new Set,m=(g,w)=>{o.current+=1;const k={n:o.current};w!=null&&w.suspense&&(k.n*=-1,k.p=new Promise(b=>{u(()=>A=>{k.v=A,delete k.p,b(A)})})),p.forEach(b=>b(k)),g()};f.current={[op]:{v:i,n:o,l:p,u:m}}}return Ax(()=>{i.current=t,o.current+=1,OC(()=>{f.current[op].l.forEach(p=>{p({n:o.current,v:t})})})},[t]),Xe.createElement(n,{value:f.current},r)};function RC(n){const e=Xe.createContext({[op]:{v:{current:n},n:{current:-1},l:new Set,u:t=>t()}});return e[AC]=e.Provider,e.Provider=PC(e.Provider),delete e.Consumer,e}function DC(n,e){const t=Xe.useContext(n)[op],{v:{current:r},n:{current:i},l:o}=t,l=e(r),[u,f]=Xe.useReducer((p,m)=>{if(!m)return[r,l];if("p"in m)throw m.p;if(m.n===i)return Object.is(p[1],l)?p:[r,l];try{if("v"in m){if(Object.is(p[0],m.v))return p;const g=e(m.v);return Object.is(p[1],g)?p:[m.v,g]}}catch{}return[...p]},[r,l]);return Object.is(u[1],l)||f(),Ax(()=>(o.add(f),()=>{o.delete(f)}),[o]),u[1]}function zC(n){const e=Xe.useContext(n)[op],{u:t}=e;return t}const LC=Symbol(),Ix=Symbol(),Ed="a",Ox="f",vw="p",Px="c",Rx="t",Dx="h",Im="w",zx="o",Lx="k";let FC=(n,e)=>new Proxy(n,e);const s2=Object.getPrototypeOf,ww=new WeakMap,BC=n=>n&&(ww.has(n)?ww.get(n):s2(n)===Object.prototype||s2(n)===Array.prototype),kw=n=>typeof n=="object"&&n!==null,UC=n=>Object.values(Object.getOwnPropertyDescriptors(n)).some(e=>!e.configurable&&!e.writable),WC=n=>{if(Array.isArray(n))return Array.from(n);const e=Object.getOwnPropertyDescriptors(n);return Object.values(e).forEach(t=>{t.configurable=!0}),Object.create(s2(n),e)},jC=(n,e)=>{const t={[Ox]:e};let r=!1;const i=(u,f)=>{if(!r){let p=t[Ed].get(n);if(p||(p={},t[Ed].set(n,p)),u===Im)p[Im]=!0;else{let m=p[u];m||(m=new Set,p[u]=m),m.add(f)}}},o=()=>{r=!0,t[Ed].delete(n)},l={get(u,f){return f===Ix?n:(i(Lx,f),Bx(Reflect.get(u,f),t[Ed],t[Px],t[Rx]))},has(u,f){return f===LC?(o(),!0):(i(Dx,f),Reflect.has(u,f))},getOwnPropertyDescriptor(u,f){return i(zx,f),Reflect.getOwnPropertyDescriptor(u,f)},ownKeys(u){return i(Im),Reflect.ownKeys(u)}};return e&&(l.set=l.deleteProperty=()=>!1),[l,t]},Fx=n=>n[Ix]||n,Bx=(n,e,t,r)=>{if(!BC(n))return n;let i=r&&r.get(n);if(!i){const f=Fx(n);UC(f)?i=[f,WC(f)]:i=[f],r==null||r.set(n,i)}const[o,l]=i;let u=t&&t.get(o);return(!u||u[1][Ox]!==!!l)&&(u=jC(o,!!l),u[1][vw]=FC(l||o,u[0]),t&&t.set(o,u)),u[1][Ed]=e,u[1][Px]=t,u[1][Rx]=r,u[1][vw]},$C=(n,e)=>{const t=Reflect.ownKeys(n),r=Reflect.ownKeys(e);return t.length!==r.length||t.some((i,o)=>i!==r[o])},l2=(n,e,t,r,i=Object.is)=>{if(i(n,e))return!1;if(!kw(n)||!kw(e))return!0;const o=t.get(Fx(n));if(!o)return!0;if(r){if(r.get(n)===e)return!1;r.set(n,e)}let l=null;for(const u of o[Dx]||[])if(l=Reflect.has(n,u)!==Reflect.has(e,u),l)return l;if(o[Im]===!0){if(l=$C(n,e),l)return l}else for(const u of o[zx]||[]){const f=!!Reflect.getOwnPropertyDescriptor(n,u),p=!!Reflect.getOwnPropertyDescriptor(e,u);if(l=f!==p,l)return l}for(const u of o[Lx]||[])if(l=l2(n[u],e[u],t,r,i),l)return l;if(l===null)throw new Error("invalid used");return l},HC=n=>()=>{const[,t]=Xe.useReducer(p=>p+1,0),r=Xe.useMemo(()=>new WeakMap,[]),i=Xe.useRef(),o=Xe.useRef();Xe.useEffect(()=>{i.current!==o.current&&l2(i.current,o.current,r,new WeakMap)&&(i.current=o.current,t())});const l=Xe.useCallback(p=>(o.current=p,i.current&&i.current!==p&&!l2(i.current,p,r,new WeakMap)?i.current:(i.current=p,p)),[r]),u=n(l),f=Xe.useMemo(()=>new WeakMap,[]);return Bx(u,r,f)},VC=(n,e)=>{const{stateContextName:t="StateContainer",updateContextName:r="UpdateContainer",concurrentMode:i}={},o=RC(void 0),l=Xe.createContext(void 0);o.displayName=t,l.displayName=r;const u=w=>{const[k,b]=n(w);return Xe.createElement(l.Provider,{value:b},Xe.createElement(o.Provider,{value:k},w.children))},f=w=>{const k=DC(o,w);return Xe.useDebugValue(k),k},p=HC(f),m=i?()=>{const w=zC(o),k=Xe.useContext(l);return Xe.useCallback((...b)=>{let A;return w(()=>{A=k(...b)}),A},[w,k])}:()=>Xe.useContext(l);return{Provider:u,useTrackedState:p,useTracked:()=>[p(),m()],useUpdate:m,useSelector:f}};var Ux=Symbol.for("immer-nothing"),xw=Symbol.for("immer-draftable"),vi=Symbol.for("immer-state");function go(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Df=Object.getPrototypeOf;function zf(n){return!!n&&!!n[vi]}function Mu(n){var e;return n?Wx(n)||Array.isArray(n)||!!n[xw]||!!((e=n.constructor)!=null&&e[xw])||P1(n)||R1(n):!1}var qC=Object.prototype.constructor.toString();function Wx(n){if(!n||typeof n!="object")return!1;const e=Df(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===qC}function d1(n,e){O1(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,r)=>e(r,t,n))}function O1(n){const e=n[vi];return e?e.type_:Array.isArray(n)?1:P1(n)?2:R1(n)?3:0}function a2(n,e){return O1(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function jx(n,e,t){const r=O1(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function KC(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function P1(n){return n instanceof Map}function R1(n){return n instanceof Set}function uu(n){return n.copy_||n.base_}function u2(n,e){if(P1(n))return new Map(n);if(R1(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=Wx(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[vi];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const l=i[o],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:n[l]})}return Object.create(Df(n),r)}else{const r=Df(n);if(r!==null&&t)return{...n};const i=Object.create(r);return Object.assign(i,n)}}function rv(n,e=!1){return D1(n)||zf(n)||!Mu(n)||(O1(n)>1&&(n.set=n.add=n.clear=n.delete=JC),Object.freeze(n),e&&Object.entries(n).forEach(([t,r])=>rv(r,!0))),n}function JC(){go(2)}function D1(n){return Object.isFrozen(n)}var GC={};function Nu(n){const e=GC[n];return e||go(0,n),e}var sp;function $x(){return sp}function QC(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Sw(n,e){e&&(Nu("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function c2(n){f2(n),n.drafts_.forEach(YC),n.drafts_=null}function f2(n){n===sp&&(sp=n.parent_)}function bw(n){return sp=QC(sp,n)}function YC(n){const e=n[vi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function _w(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[vi].modified_&&(c2(e),go(4)),Mu(n)&&(n=p1(e,n),e.parent_||m1(e,n)),e.patches_&&Nu("Patches").generateReplacementPatches_(t[vi].base_,n,e.patches_,e.inversePatches_)):n=p1(e,t,[]),c2(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==Ux?n:void 0}function p1(n,e,t){if(D1(e))return e;const r=e[vi];if(!r)return d1(e,(i,o)=>Cw(n,r,e,i,o,t)),e;if(r.scope_!==n)return e;if(!r.modified_)return m1(n,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,l=!1;r.type_===3&&(o=new Set(i),i.clear(),l=!0),d1(o,(u,f)=>Cw(n,r,i,u,f,t,l)),m1(n,i,!1),t&&n.patches_&&Nu("Patches").generatePatches_(r,t,n.patches_,n.inversePatches_)}return r.copy_}function Cw(n,e,t,r,i,o,l){if(zf(i)){const u=o&&e&&e.type_!==3&&!a2(e.assigned_,r)?o.concat(r):void 0,f=p1(n,i,u);if(jx(t,r,f),zf(f))n.canAutoFreeze_=!1;else return}else l&&t.add(i);if(Mu(i)&&!D1(i)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;p1(n,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,r)&&m1(n,i)}}function m1(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&rv(e,t)}function XC(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:$x(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=iv;t&&(i=[r],o=lp);const{revoke:l,proxy:u}=Proxy.revocable(i,o);return r.draft_=u,r.revoke_=l,u}var iv={get(n,e){if(e===vi)return n;const t=uu(n);if(!a2(t,e))return ZC(n,t,e);const r=t[e];return n.finalized_||!Mu(r)?r:r===dy(n.base_,e)?(py(n),n.copy_[e]=d2(r,n)):r},has(n,e){return e in uu(n)},ownKeys(n){return Reflect.ownKeys(uu(n))},set(n,e,t){const r=Hx(uu(n),e);if(r!=null&&r.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const i=dy(uu(n),e),o=i==null?void 0:i[vi];if(o&&o.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(KC(t,i)&&(t!==void 0||a2(n.base_,e)))return!0;py(n),h2(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return dy(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,py(n),h2(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=uu(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){go(11)},getPrototypeOf(n){return Df(n.base_)},setPrototypeOf(){go(12)}},lp={};d1(iv,(n,e)=>{lp[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});lp.deleteProperty=function(n,e){return lp.set.call(this,n,e,void 0)};lp.set=function(n,e,t){return iv.set.call(this,n[0],e,t,n[0])};function dy(n,e){const t=n[vi];return(t?uu(t):n)[e]}function ZC(n,e,t){var i;const r=Hx(e,t);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(n.draft_):void 0}function Hx(n,e){if(!(e in n))return;let t=Df(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=Df(t)}}function h2(n){n.modified_||(n.modified_=!0,n.parent_&&h2(n.parent_))}function py(n){n.copy_||(n.copy_=u2(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var e8=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const o=t;t=e;const l=this;return function(f=o,...p){return l.produce(f,m=>t.call(this,m,...p))}}typeof t!="function"&&go(6),r!==void 0&&typeof r!="function"&&go(7);let i;if(Mu(e)){const o=bw(this),l=d2(e,void 0);let u=!0;try{i=t(l),u=!1}finally{u?c2(o):f2(o)}return Sw(o,r),_w(i,o)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===Ux&&(i=void 0),this.autoFreeze_&&rv(i,!0),r){const o=[],l=[];Nu("Patches").generateReplacementPatches_(e,i,o,l),r(o,l)}return i}else go(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(l,...u)=>this.produceWithPatches(l,f=>e(f,...u));let r,i;return[this.produce(e,t,(l,u)=>{r=l,i=u}),r,i]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){Mu(n)||go(8),zf(n)&&(n=t8(n));const e=bw(this),t=d2(n,void 0);return t[vi].isManual_=!0,f2(e),t}finishDraft(n,e){const t=n&&n[vi];(!t||!t.isManual_)&&go(9);const{scope_:r}=t;return Sw(r,e),_w(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}t>-1&&(e=e.slice(t+1));const r=Nu("Patches").applyPatches_;return zf(n)?r(n,e):this.produce(n,i=>r(i,e))}};function d2(n,e){const t=P1(n)?Nu("MapSet").proxyMap_(n,e):R1(n)?Nu("MapSet").proxySet_(n,e):XC(n,e);return(e?e.scope_:$x()).drafts_.push(t),t}function t8(n){return zf(n)||go(10,n),Vx(n)}function Vx(n){if(!Mu(n)||D1(n))return n;const e=n[vi];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=u2(n,e.scope_.immer_.useStrictShallowCopy_)}else t=u2(n,!0);return d1(t,(r,i)=>{jx(t,r,Vx(i))}),e&&(e.finalized_=!1),t}var wi=new e8,n8=wi.produce;wi.produceWithPatches.bind(wi);wi.setAutoFreeze.bind(wi);wi.setUseStrictShallowCopy.bind(wi);wi.applyPatches.bind(wi);wi.createDraft.bind(wi);wi.finishDraft.bind(wi);var Td={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var r8=Td.exports,Ew;function i8(){return Ew||(Ew=1,function(n,e){(function(){var t,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",p=500,m="__lodash_placeholder__",g=1,w=2,k=4,b=1,A=2,P=1,F=2,V=4,I=8,W=16,B=32,z=64,H=128,Q=256,q=512,_=30,U="...",D=800,G=16,le=1,oe=2,ye=3,de=1/0,Y=9007199254740991,C=17976931348623157e292,x=NaN,M=4294967295,R=M-1,N=M>>>1,re=[["ary",H],["bind",P],["bindKey",F],["curry",I],["curryRight",W],["flip",q],["partial",B],["partialRight",z],["rearg",Q]],ee="[object Arguments]",ne="[object Array]",he="[object AsyncFunction]",ke="[object Boolean]",Me="[object Date]",je="[object DOMException]",$e="[object Error]",pt="[object Function]",ln="[object GeneratorFunction]",Pt="[object Map]",an="[object Number]",Eo="[object Null]",En="[object Object]",en="[object Promise]",Ji="[object Proxy]",kn="[object RegExp]",bt="[object Set]",Nt="[object String]",dr="[object Symbol]",fs="[object Undefined]",pr="[object WeakMap]",me="[object WeakSet]",Te="[object ArrayBuffer]",Ue="[object DataView]",rt="[object Float32Array]",ft="[object Float64Array]",un="[object Int8Array]",ei="[object Int16Array]",er="[object Int32Array]",xi="[object Uint8Array]",Gi="[object Uint8ClampedArray]",cn="[object Uint16Array]",Mr="[object Uint32Array]",mr=/\b__p \+= '';/g,Qf=/\b(__p \+=) '' \+/g,Yf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,hs=/&(?:amp|lt|gt|quot|#39);/g,ds=/[&<>"']/g,jp=RegExp(hs.source),$p=RegExp(ds.source),Hp=/<%-([\s\S]+?)%>/g,Vp=/<%([\s\S]+?)%>/g,Xf=/<%=([\s\S]+?)%>/g,Zf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qp=/^\w*$/,fa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ha=/[\\^$.*+?()[\]{}|]/g,da=RegExp(ha.source),eh=/^\s+/,pa=/\s/,Uu=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Wu=/\{\n\/\* \[wrapped with (.+)\] \*/,th=/,? & /,rg=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ig=/[()=,{}\[\]\/\s]/,og=/\\(\\)?/g,ps=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nh=/\w*$/,Kp=/^[-+]0x[0-9a-f]+$/i,sg=/^0b[01]+$/i,Jp=/^\[object .+?Constructor\]$/,Gp=/^0o[0-7]+$/i,Qp=/^(?:0|[1-9]\d*)$/,Yp=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ju=/($^)/,lg=/['\n\r\u2028\u2029\\]/g,Ut="\\ud800-\\udfff",ag="\\u0300-\\u036f",rh="\\ufe20-\\ufe2f",Xp="\\u20d0-\\u20ff",ma=ag+rh+Xp,Zp="\\u2700-\\u27bf",ih="a-z\\xdf-\\xf6\\xf8-\\xff",$u="\\xac\\xb1\\xd7\\xf7",Si="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ug="\\u2000-\\u206f",ti=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",e0="A-Z\\xc0-\\xd6\\xd8-\\xde",t0="\\ufe0e\\ufe0f",n0=$u+Si+ug+ti,Xs="['’]",Hu="["+Ut+"]",Zs="["+n0+"]",ms="["+ma+"]",r0="\\d+",cg="["+Zp+"]",Vu="["+ih+"]",oh="[^"+Ut+n0+r0+Zp+ih+e0+"]",ga="\\ud83c[\\udffb-\\udfff]",ya="(?:"+ms+"|"+ga+")",i0="[^"+Ut+"]",va="(?:\\ud83c[\\udde6-\\uddff]){2}",_t="[\\ud800-\\udbff][\\udc00-\\udfff]",gs="["+e0+"]",sh="\\u200d",qu="(?:"+Vu+"|"+oh+")",o0="(?:"+gs+"|"+oh+")",lh="(?:"+Xs+"(?:d|ll|m|re|s|t|ve))?",ah="(?:"+Xs+"(?:D|LL|M|RE|S|T|VE))?",Ku=ya+"?",wa="["+t0+"]?",To="(?:"+sh+"(?:"+[i0,va,_t].join("|")+")"+wa+Ku+")*",Mo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",No="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",el=wa+Ku+To,ka="(?:"+[cg,va,_t].join("|")+")"+el,Ao="(?:"+[i0+ms+"?",ms,va,_t,Hu].join("|")+")",fg=RegExp(Xs,"g"),s0=RegExp(ms,"g"),ys=RegExp(ga+"(?="+ga+")|"+Ao+el,"g"),hg=RegExp([gs+"?"+Vu+"+"+lh+"(?="+[Zs,gs,"$"].join("|")+")",o0+"+"+ah+"(?="+[Zs,gs+qu,"$"].join("|")+")",gs+"?"+qu+"+"+lh,gs+"+"+ah,No,Mo,r0,ka].join("|"),"g"),l0=RegExp("["+sh+Ut+ma+t0+"]"),Ju=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,a0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],dg=-1,Tt={};Tt[rt]=Tt[ft]=Tt[un]=Tt[ei]=Tt[er]=Tt[xi]=Tt[Gi]=Tt[cn]=Tt[Mr]=!0,Tt[ee]=Tt[ne]=Tt[Te]=Tt[ke]=Tt[Ue]=Tt[Me]=Tt[$e]=Tt[pt]=Tt[Pt]=Tt[an]=Tt[En]=Tt[kn]=Tt[bt]=Tt[Nt]=Tt[pr]=!1;var Ct={};Ct[ee]=Ct[ne]=Ct[Te]=Ct[Ue]=Ct[ke]=Ct[Me]=Ct[rt]=Ct[ft]=Ct[un]=Ct[ei]=Ct[er]=Ct[Pt]=Ct[an]=Ct[En]=Ct[kn]=Ct[bt]=Ct[Nt]=Ct[dr]=Ct[xi]=Ct[Gi]=Ct[cn]=Ct[Mr]=!0,Ct[$e]=Ct[pt]=Ct[pr]=!1;var tl={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Gu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},pg={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},mg={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},uh=parseFloat,Qu=parseInt,Yu=typeof Jl=="object"&&Jl&&Jl.Object===Object&&Jl,u0=typeof self=="object"&&self&&self.Object===Object&&self,Wt=Yu||u0||Function("return this")(),xa=e&&!e.nodeType&&e,bi=xa&&!0&&n&&!n.nodeType&&n,ch=bi&&bi.exports===xa,nl=ch&&Yu.process,Bn=function(){try{var ie=bi&&bi.require&&bi.require("util").types;return ie||nl&&nl.binding&&nl.binding("util")}catch{}}(),fh=Bn&&Bn.isArrayBuffer,tr=Bn&&Bn.isDate,vs=Bn&&Bn.isMap,Xu=Bn&&Bn.isRegExp,rl=Bn&&Bn.isSet,c0=Bn&&Bn.isTypedArray;function Un(ie,pe,ce){switch(ce.length){case 0:return ie.call(pe);case 1:return ie.call(pe,ce[0]);case 2:return ie.call(pe,ce[0],ce[1]);case 3:return ie.call(pe,ce[0],ce[1],ce[2])}return ie.apply(pe,ce)}function hh(ie,pe,ce,Ie){for(var Qe=-1,yt=ie==null?0:ie.length;++Qe<yt;){var tn=ie[Qe];pe(Ie,tn,ce(tn),ie)}return Ie}function Tn(ie,pe){for(var ce=-1,Ie=ie==null?0:ie.length;++ce<Ie&&pe(ie[ce],ce,ie)!==!1;);return ie}function Zu(ie,pe){for(var ce=ie==null?0:ie.length;ce--&&pe(ie[ce],ce,ie)!==!1;);return ie}function dh(ie,pe){for(var ce=-1,Ie=ie==null?0:ie.length;++ce<Ie;)if(!pe(ie[ce],ce,ie))return!1;return!0}function Io(ie,pe){for(var ce=-1,Ie=ie==null?0:ie.length,Qe=0,yt=[];++ce<Ie;){var tn=ie[ce];pe(tn,ce,ie)&&(yt[Qe++]=tn)}return yt}function ec(ie,pe){var ce=ie==null?0:ie.length;return!!ce&&il(ie,pe,0)>-1}function ph(ie,pe,ce){for(var Ie=-1,Qe=ie==null?0:ie.length;++Ie<Qe;)if(ce(pe,ie[Ie]))return!0;return!1}function Rt(ie,pe){for(var ce=-1,Ie=ie==null?0:ie.length,Qe=Array(Ie);++ce<Ie;)Qe[ce]=pe(ie[ce],ce,ie);return Qe}function Oo(ie,pe){for(var ce=-1,Ie=pe.length,Qe=ie.length;++ce<Ie;)ie[Qe+ce]=pe[ce];return ie}function mh(ie,pe,ce,Ie){var Qe=-1,yt=ie==null?0:ie.length;for(Ie&&yt&&(ce=ie[++Qe]);++Qe<yt;)ce=pe(ce,ie[Qe],Qe,ie);return ce}function gg(ie,pe,ce,Ie){var Qe=ie==null?0:ie.length;for(Ie&&Qe&&(ce=ie[--Qe]);Qe--;)ce=pe(ce,ie[Qe],Qe,ie);return ce}function gh(ie,pe){for(var ce=-1,Ie=ie==null?0:ie.length;++ce<Ie;)if(pe(ie[ce],ce,ie))return!0;return!1}var yg=vh("length");function f0(ie){return ie.split("")}function vg(ie){return ie.match(rg)||[]}function h0(ie,pe,ce){var Ie;return ce(ie,function(Qe,yt,tn){if(pe(Qe,yt,tn))return Ie=yt,!1}),Ie}function tc(ie,pe,ce,Ie){for(var Qe=ie.length,yt=ce+(Ie?1:-1);Ie?yt--:++yt<Qe;)if(pe(ie[yt],yt,ie))return yt;return-1}function il(ie,pe,ce){return pe===pe?ic(ie,pe,ce):tc(ie,d0,ce)}function yh(ie,pe,ce,Ie){for(var Qe=ce-1,yt=ie.length;++Qe<yt;)if(Ie(ie[Qe],pe))return Qe;return-1}function d0(ie){return ie!==ie}function p0(ie,pe){var ce=ie==null?0:ie.length;return ce?wh(ie,pe)/ce:x}function vh(ie){return function(pe){return pe==null?t:pe[ie]}}function nc(ie){return function(pe){return ie==null?t:ie[pe]}}function m0(ie,pe,ce,Ie,Qe){return Qe(ie,function(yt,tn,At){ce=Ie?(Ie=!1,yt):pe(ce,yt,tn,At)}),ce}function wg(ie,pe){var ce=ie.length;for(ie.sort(pe);ce--;)ie[ce]=ie[ce].value;return ie}function wh(ie,pe){for(var ce,Ie=-1,Qe=ie.length;++Ie<Qe;){var yt=pe(ie[Ie]);yt!==t&&(ce=ce===t?yt:ce+yt)}return ce}function kh(ie,pe){for(var ce=-1,Ie=Array(ie);++ce<ie;)Ie[ce]=pe(ce);return Ie}function kg(ie,pe){return Rt(pe,function(ce){return[ce,ie[ce]]})}function g0(ie){return ie&&ie.slice(0,oc(ie)+1).replace(eh,"")}function gr(ie){return function(pe){return ie(pe)}}function Sa(ie,pe){return Rt(pe,function(ce){return ie[ce]})}function Qi(ie,pe){return ie.has(pe)}function y0(ie,pe){for(var ce=-1,Ie=ie.length;++ce<Ie&&il(pe,ie[ce],0)>-1;);return ce}function xh(ie,pe){for(var ce=ie.length;ce--&&il(pe,ie[ce],0)>-1;);return ce}function v0(ie,pe){for(var ce=ie.length,Ie=0;ce--;)ie[ce]===pe&&++Ie;return Ie}var w0=nc(tl),k0=nc(Gu);function x0(ie){return"\\"+mg[ie]}function ol(ie,pe){return ie==null?t:ie[pe]}function sl(ie){return l0.test(ie)}function xg(ie){return Ju.test(ie)}function Sg(ie){for(var pe,ce=[];!(pe=ie.next()).done;)ce.push(pe.value);return ce}function rc(ie){var pe=-1,ce=Array(ie.size);return ie.forEach(function(Ie,Qe){ce[++pe]=[Qe,Ie]}),ce}function Sh(ie,pe){return function(ce){return ie(pe(ce))}}function Nr(ie,pe){for(var ce=-1,Ie=ie.length,Qe=0,yt=[];++ce<Ie;){var tn=ie[ce];(tn===pe||tn===m)&&(ie[ce]=m,yt[Qe++]=ce)}return yt}function Po(ie){var pe=-1,ce=Array(ie.size);return ie.forEach(function(Ie){ce[++pe]=Ie}),ce}function bg(ie){var pe=-1,ce=Array(ie.size);return ie.forEach(function(Ie){ce[++pe]=[Ie,Ie]}),ce}function ic(ie,pe,ce){for(var Ie=ce-1,Qe=ie.length;++Ie<Qe;)if(ie[Ie]===pe)return Ie;return-1}function _g(ie,pe,ce){for(var Ie=ce+1;Ie--;)if(ie[Ie]===pe)return Ie;return Ie}function ws(ie){return sl(ie)?b0(ie):yg(ie)}function yr(ie){return sl(ie)?_0(ie):f0(ie)}function oc(ie){for(var pe=ie.length;pe--&&pa.test(ie.charAt(pe)););return pe}var S0=nc(pg);function b0(ie){for(var pe=ys.lastIndex=0;ys.test(ie);)++pe;return pe}function _0(ie){return ie.match(ys)||[]}function Cg(ie){return ie.match(hg)||[]}var Eg=function ie(pe){pe=pe==null?Wt:ll.defaults(Wt.Object(),pe,ll.pick(Wt,a0));var ce=pe.Array,Ie=pe.Date,Qe=pe.Error,yt=pe.Function,tn=pe.Math,At=pe.Object,ba=pe.RegExp,Tg=pe.String,Ar=pe.TypeError,Yi=ce.prototype,bh=yt.prototype,_i=At.prototype,al=pe["__core-js_shared__"],_a=bh.toString,vt=_i.hasOwnProperty,ul=0,sc=function(){var c=/[^.]+$/.exec(al&&al.keys&&al.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Ca=_i.toString,lc=_a.call(At),C0=Wt._,E0=ba("^"+_a.call(vt).replace(ha,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ea=ch?pe.Buffer:t,Xi=pe.Symbol,Ta=pe.Uint8Array,_h=Ea?Ea.allocUnsafe:t,ni=Sh(At.getPrototypeOf,At),ac=At.create,uc=_i.propertyIsEnumerable,cc=Yi.splice,T0=Xi?Xi.isConcatSpreadable:t,Zi=Xi?Xi.iterator:t,ks=Xi?Xi.toStringTag:t,Ma=function(){try{var c=Ho(At,"defineProperty");return c({},"",{}),c}catch{}}(),M0=pe.clearTimeout!==Wt.clearTimeout&&pe.clearTimeout,zt=Ie&&Ie.now!==Wt.Date.now&&Ie.now,Ch=pe.setTimeout!==Wt.setTimeout&&pe.setTimeout,xs=tn.ceil,Ro=tn.floor,fc=At.getOwnPropertySymbols,Eh=Ea?Ea.isBuffer:t,cl=pe.isFinite,hc=Yi.join,fl=Sh(At.keys,At),nn=tn.max,Mn=tn.min,Mg=Ie.now,N0=pe.parseInt,Na=tn.random,dc=Yi.reverse,Aa=Ho(pe,"DataView"),Ss=Ho(pe,"Map"),Ia=Ho(pe,"Promise"),Do=Ho(pe,"Set"),Oa=Ho(pe,"WeakMap"),hl=Ho(At,"create"),pc=Oa&&new Oa,dl={},Th=Vo(Aa),zo=Vo(Ss),A0=Vo(Ia),pl=Vo(Do),Ci=Vo(Oa),Lo=Xi?Xi.prototype:t,vr=Lo?Lo.valueOf:t,mc=Lo?Lo.toString:t;function j(c){if(on(c)&&!nt(c)&&!(c instanceof tt)){if(c instanceof Nn)return c;if(vt.call(c,"__wrapped__"))return im(c)}return new Nn(c)}var ml=function(){function c(){}return function(h){if(!Xt(h))return{};if(ac)return ac(h);c.prototype=h;var v=new c;return c.prototype=t,v}}();function Ei(){}function Nn(c,h){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=t}j.templateSettings={escape:Hp,evaluate:Vp,interpolate:Xf,variable:"",imports:{_:j}},j.prototype=Ei.prototype,j.prototype.constructor=j,Nn.prototype=ml(Ei.prototype),Nn.prototype.constructor=Nn;function tt(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=M,this.__views__=[]}function gc(){var c=new tt(this.__wrapped__);return c.__actions__=jn(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=jn(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=jn(this.__views__),c}function Mh(){if(this.__filtered__){var c=new tt(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function gl(){var c=this.__wrapped__.value(),h=this.__dir__,v=nt(c),T=h<0,O=v?c.length:0,$=nd(0,O,this.__views__),J=$.start,Z=$.end,se=Z-J,ve=T?Z:J-1,we=this.__iteratees__,be=we.length,Ae=0,Le=Mn(se,this.__takeCount__);if(!v||!T&&O==se&&Le==se)return _l(c,this.__actions__);var Je=[];e:for(;se--&&Ae<Le;){ve+=h;for(var lt=-1,Ge=c[ve];++lt<be;){var ht=we[lt],gt=ht.iteratee,hi=ht.type,br=gt(Ge);if(hi==oe)Ge=br;else if(!br){if(hi==le)continue e;break e}}Je[Ae++]=Ge}return Je}tt.prototype=ml(Ei.prototype),tt.prototype.constructor=tt;function nr(c){var h=-1,v=c==null?0:c.length;for(this.clear();++h<v;){var T=c[h];this.set(T[0],T[1])}}function Lt(){this.__data__=hl?hl(null):{},this.size=0}function Dt(c){var h=this.has(c)&&delete this.__data__[c];return this.size-=h?1:0,h}function Fo(c){var h=this.__data__;if(hl){var v=h[c];return v===f?t:v}return vt.call(h,c)?h[c]:t}function An(c){var h=this.__data__;return hl?h[c]!==t:vt.call(h,c)}function rr(c,h){var v=this.__data__;return this.size+=this.has(c)?0:1,v[c]=hl&&h===t?f:h,this}nr.prototype.clear=Lt,nr.prototype.delete=Dt,nr.prototype.get=Fo,nr.prototype.has=An,nr.prototype.set=rr;function Wn(c){var h=-1,v=c==null?0:c.length;for(this.clear();++h<v;){var T=c[h];this.set(T[0],T[1])}}function yl(){this.__data__=[],this.size=0}function ir(c){var h=this.__data__,v=On(h,c);if(v<0)return!1;var T=h.length-1;return v==T?h.pop():cc.call(h,v,1),--this.size,!0}function yc(c){var h=this.__data__,v=On(h,c);return v<0?t:h[v][1]}function I0(c){return On(this.__data__,c)>-1}function O0(c,h){var v=this.__data__,T=On(v,c);return T<0?(++this.size,v.push([c,h])):v[T][1]=h,this}Wn.prototype.clear=yl,Wn.prototype.delete=ir,Wn.prototype.get=yc,Wn.prototype.has=I0,Wn.prototype.set=O0;function Ir(c){var h=-1,v=c==null?0:c.length;for(this.clear();++h<v;){var T=c[h];this.set(T[0],T[1])}}function P0(){this.size=0,this.__data__={hash:new nr,map:new(Ss||Wn),string:new nr}}function eo(c){var h=Ja(this,c).delete(c);return this.size-=h?1:0,h}function vc(c){return Ja(this,c).get(c)}function Nh(c){return Ja(this,c).has(c)}function R0(c,h){var v=Ja(this,c),T=v.size;return v.set(c,h),this.size+=v.size==T?0:1,this}Ir.prototype.clear=P0,Ir.prototype.delete=eo,Ir.prototype.get=vc,Ir.prototype.has=Nh,Ir.prototype.set=R0;function bs(c){var h=-1,v=c==null?0:c.length;for(this.__data__=new Ir;++h<v;)this.add(c[h])}function Bo(c){return this.__data__.set(c,f),this}function vl(c){return this.__data__.has(c)}bs.prototype.add=bs.prototype.push=Bo,bs.prototype.has=vl;function In(c){var h=this.__data__=new Wn(c);this.size=h.size}function wc(){this.__data__=new Wn,this.size=0}function kc(c){var h=this.__data__,v=h.delete(c);return this.size=h.size,v}function Or(c){return this.__data__.get(c)}function Pr(c){return this.__data__.has(c)}function _s(c,h){var v=this.__data__;if(v instanceof Wn){var T=v.__data__;if(!Ss||T.length<i-1)return T.push([c,h]),this.size=++v.size,this;v=this.__data__=new Ir(T)}return v.set(c,h),this.size=v.size,this}In.prototype.clear=wc,In.prototype.delete=kc,In.prototype.get=Or,In.prototype.has=Pr,In.prototype.set=_s;function Ti(c,h){var v=nt(c),T=!v&&su(c),O=!v&&!T&&Rl(c),$=!v&&!T&&!O&&cf(c),J=v||T||O||$,Z=J?kh(c.length,Tg):[],se=Z.length;for(var ve in c)(h||vt.call(c,ve))&&!(J&&(ve=="length"||O&&(ve=="offset"||ve=="parent")||$&&(ve=="buffer"||ve=="byteLength"||ve=="byteOffset")||$t(ve,se)))&&Z.push(ve);return Z}function Mi(c){var h=c.length;return h?c[Sl(0,h-1)]:t}function Cs(c,h){return qc(jn(c),to(h,0,c.length))}function D0(c){return qc(jn(c))}function Pa(c,h,v){(v!==t&&!fo(c[h],v)||v===t&&!(h in c))&&Ni(c,h,v)}function Es(c,h,v){var T=c[h];(!(vt.call(c,h)&&fo(T,v))||v===t&&!(h in c))&&Ni(c,h,v)}function On(c,h){for(var v=c.length;v--;)if(fo(c[v][0],h))return v;return-1}function wr(c,h,v,T){return Ii(c,function(O,$,J){h(T,O,v(O),J)}),T}function Ft(c,h){return c&&ii(h,Dn(h),c)}function ri(c,h){return c&&ii(h,jr(h),c)}function Ni(c,h,v){h=="__proto__"&&Ma?Ma(c,h,{configurable:!0,enumerable:!0,value:v,writable:!0}):c[h]=v}function xc(c,h){for(var v=-1,T=h.length,O=ce(T),$=c==null;++v<T;)O[v]=$?t:Xg(c,h[v]);return O}function to(c,h,v){return c===c&&(v!==t&&(c=c<=v?c:v),h!==t&&(c=c>=h?c:h)),c}function or(c,h,v,T,O,$){var J,Z=h&g,se=h&w,ve=h&k;if(v&&(J=O?v(c,T,O,$):v(c)),J!==t)return J;if(!Xt(c))return c;var we=nt(c);if(we){if(J=Qa(c),!Z)return jn(c,J)}else{var be=bn(c),Ae=be==pt||be==ln;if(Rl(c))return Hh(c,Z);if(be==En||be==ee||Ae&&!O){if(J=se||Ae?{}:_n(c),!Z)return se?Ag(c,ri(J,c)):Rc(c,Ft(J,c))}else{if(!Ct[be])return O?c:{};J=Ig(c,be,Z)}}$||($=new In);var Le=$.get(c);if(Le)return Le;$.set(c,J),J3(c)?c.forEach(function(Ge){J.add(or(Ge,h,v,Ge,c,$))}):q3(c)&&c.forEach(function(Ge,ht){J.set(ht,or(Ge,h,v,ht,c,$))});var Je=ve?se?Ka:qa:se?jr:Dn,lt=we?t:Je(c);return Tn(lt||c,function(Ge,ht){lt&&(ht=Ge,Ge=c[ht]),Es(J,ht,or(Ge,h,v,ht,c,$))}),J}function z0(c){var h=Dn(c);return function(v){return Ra(v,c,h)}}function Ra(c,h,v){var T=v.length;if(c==null)return!T;for(c=At(c);T--;){var O=v[T],$=h[O],J=c[O];if(J===t&&!(O in c)||!$(J))return!1}return!0}function Ah(c,h,v){if(typeof c!="function")throw new Ar(l);return Il(function(){c.apply(t,v)},h)}function Ai(c,h,v,T){var O=-1,$=ec,J=!0,Z=c.length,se=[],ve=h.length;if(!Z)return se;v&&(h=Rt(h,gr(v))),T?($=ph,J=!1):h.length>=i&&($=Qi,J=!1,h=new bs(h));e:for(;++O<Z;){var we=c[O],be=v==null?we:v(we);if(we=T||we!==0?we:0,J&&be===be){for(var Ae=ve;Ae--;)if(h[Ae]===be)continue e;se.push(we)}else $(h,be,T)||se.push(we)}return se}var Ii=Fr(kr),L0=Fr(Uo,!0);function Da(c,h){var v=!0;return Ii(c,function(T,O,$){return v=!!h(T,O,$),v}),v}function Ts(c,h,v){for(var T=-1,O=c.length;++T<O;){var $=c[T],J=h($);if(J!=null&&(Z===t?J===J&&!fi(J):v(J,Z)))var Z=J,se=$}return se}function F0(c,h,v,T){var O=c.length;for(v=ot(v),v<0&&(v=-v>O?0:O+v),T=T===t||T>O?O:ot(T),T<0&&(T+=O),T=v>T?0:Q3(T);v<T;)c[v++]=h;return c}function Ih(c,h){var v=[];return Ii(c,function(T,O,$){h(T,O,$)&&v.push(T)}),v}function Jt(c,h,v,T,O){var $=-1,J=c.length;for(v||(v=$c),O||(O=[]);++$<J;){var Z=c[$];h>0&&v(Z)?h>1?Jt(Z,h-1,v,T,O):Oo(O,Z):T||(O[O.length]=Z)}return O}var Sc=zc(),za=zc(!0);function kr(c,h){return c&&Sc(c,h,Dn)}function Uo(c,h){return c&&za(c,h,Dn)}function wl(c,h){return Io(h,function(v){return Us(c[v])})}function no(c,h){h=Ri(h,c);for(var v=0,T=h.length;c!=null&&v<T;)c=c[ai(h[v++])];return v&&v==T?c:t}function bc(c,h,v){var T=h(c);return nt(c)?T:Oo(T,v(c))}function xn(c){return c==null?c===t?fs:Eo:ks&&ks in At(c)?jc(c):id(c)}function Wo(c,h){return c>h}function Rr(c,h){return c!=null&&vt.call(c,h)}function Ms(c,h){return c!=null&&h in At(c)}function Oh(c,h,v){return c>=Mn(h,v)&&c<nn(h,v)}function _c(c,h,v){for(var T=v?ph:ec,O=c[0].length,$=c.length,J=$,Z=ce($),se=1/0,ve=[];J--;){var we=c[J];J&&h&&(we=Rt(we,gr(h))),se=Mn(we.length,se),Z[J]=!v&&(h||O>=120&&we.length>=120)?new bs(J&&we):t}we=c[0];var be=-1,Ae=Z[0];e:for(;++be<O&&ve.length<se;){var Le=we[be],Je=h?h(Le):Le;if(Le=v||Le!==0?Le:0,!(Ae?Qi(Ae,Je):T(ve,Je,v))){for(J=$;--J;){var lt=Z[J];if(!(lt?Qi(lt,Je):T(c[J],Je,v)))continue e}Ae&&Ae.push(Je),ve.push(Le)}}return ve}function ro(c,h,v,T){return kr(c,function(O,$,J){h(T,v(O),$,J)}),T}function Dr(c,h,v){h=Ri(h,c),c=mn(c,h);var T=c==null?c:c[ai(Vn(h))];return T==null?t:Un(T,c,v)}function Cc(c){return on(c)&&xn(c)==ee}function B0(c){return on(c)&&xn(c)==Te}function io(c){return on(c)&&xn(c)==Me}function zr(c,h,v,T,O){return c===h?!0:c==null||h==null||!on(c)&&!on(h)?c!==c&&h!==h:Ec(c,h,v,T,zr,O)}function Ec(c,h,v,T,O,$){var J=nt(c),Z=nt(h),se=J?ne:bn(c),ve=Z?ne:bn(h);se=se==ee?En:se,ve=ve==ee?En:ve;var we=se==En,be=ve==En,Ae=se==ve;if(Ae&&Rl(c)){if(!Rl(h))return!1;J=!0,we=!1}if(Ae&&!we)return $||($=new In),J||cf(c)?ed(c,h,v,T,O,$):td(c,h,se,v,T,O,$);if(!(v&b)){var Le=we&&vt.call(c,"__wrapped__"),Je=be&&vt.call(h,"__wrapped__");if(Le||Je){var lt=Le?c.value():c,Ge=Je?h.value():h;return $||($=new In),O(lt,Ge,v,T,$)}}return Ae?($||($=new In),Q0(c,h,v,T,O,$)):!1}function U0(c){return on(c)&&bn(c)==Pt}function kl(c,h,v,T){var O=v.length,$=O,J=!T;if(c==null)return!$;for(c=At(c);O--;){var Z=v[O];if(J&&Z[2]?Z[1]!==c[Z[0]]:!(Z[0]in c))return!1}for(;++O<$;){Z=v[O];var se=Z[0],ve=c[se],we=Z[1];if(J&&Z[2]){if(ve===t&&!(se in c))return!1}else{var be=new In;if(T)var Ae=T(ve,we,se,c,h,be);if(!(Ae===t?zr(we,ve,b|A,T,be):Ae))return!1}}return!0}function Ph(c){if(!Xt(c)||Z0(c))return!1;var h=Us(c)?E0:Jp;return h.test(Vo(c))}function La(c){return on(c)&&xn(c)==kn}function Oi(c){return on(c)&&bn(c)==bt}function Fa(c){return on(c)&&vm(c.length)&&!!Tt[xn(c)]}function xl(c){return typeof c=="function"?c:c==null?$r:typeof c=="object"?nt(c)?jt(c[0],c[1]):Tc(c):lw(c)}function oo(c){if(!uo(c))return fl(c);var h=[];for(var v in At(c))vt.call(c,v)&&v!="constructor"&&h.push(v);return h}function Rh(c){if(!Xt(c))return nm(c);var h=uo(c),v=[];for(var T in c)T=="constructor"&&(h||!vt.call(c,T))||v.push(T);return v}function jo(c,h){return c<h}function Dh(c,h){var v=-1,T=Wr(c)?ce(c.length):[];return Ii(c,function(O,$,J){T[++v]=h(O,$,J)}),T}function Tc(c){var h=Ga(c);return h.length==1&&h[0][2]?Hc(h[0][0],h[0][1]):function(v){return v===c||kl(v,c,h)}}function jt(c,h){return Pe(c)&&Xa(h)?Hc(ai(c),h):function(v){var T=Xg(v,c);return T===t&&T===h?Zg(v,c):zr(h,T,b|A)}}function Ns(c,h,v,T,O){c!==h&&Sc(h,function($,J){if(O||(O=new In),Xt($))zh(c,h,J,v,Ns,T,O);else{var Z=T?T(Li(c,J),$,J+"",c,h,O):t;Z===t&&(Z=$),Pa(c,J,Z)}},jr)}function zh(c,h,v,T,O,$,J){var Z=Li(c,v),se=Li(h,v),ve=J.get(se);if(ve){Pa(c,v,ve);return}var we=$?$(Z,se,v+"",c,h,J):t,be=we===t;if(be){var Ae=nt(se),Le=!Ae&&Rl(se),Je=!Ae&&!Le&&cf(se);we=se,Ae||Le||Je?nt(Z)?we=Z:dn(Z)?we=jn(Z):Le?(be=!1,we=Hh(se,!0)):Je?(be=!1,we=V0(se,!0)):we=[]:Sd(se)||su(se)?(we=Z,su(Z)?we=Y3(Z):(!Xt(Z)||Us(Z))&&(we=_n(se))):be=!1}be&&(J.set(se,we),O(we,se,T,$,J),J.delete(se)),Pa(c,v,we)}function Mc(c,h){var v=c.length;if(v)return h+=h<0?v:0,$t(h,v)?c[h]:t}function Ba(c,h,v){h.length?h=Rt(h,function($){return nt($)?function(J){return no(J,$.length===1?$[0]:$)}:$}):h=[$r];var T=-1;h=Rt(h,gr(He()));var O=Dh(c,function($,J,Z){var se=Rt(h,function(ve){return ve($)});return{criteria:se,index:++T,value:$}});return wg(O,function($,J){return Ng($,J,v)})}function Lh(c,h){return $o(c,h,function(v,T){return Zg(c,T)})}function $o(c,h,v){for(var T=-1,O=h.length,$={};++T<O;){var J=h[T],Z=no(c,J);v(Z,J)&&Is($,Ri(J,c),Z)}return $}function Ht(c){return function(h){return no(h,c)}}function Qt(c,h,v,T){var O=T?yh:il,$=-1,J=h.length,Z=c;for(c===h&&(h=jn(h)),v&&(Z=Rt(c,gr(v)));++$<J;)for(var se=0,ve=h[$],we=v?v(ve):ve;(se=O(Z,we,se,T))>-1;)Z!==c&&cc.call(Z,se,1),cc.call(c,se,1);return c}function fn(c,h){for(var v=c?h.length:0,T=v-1;v--;){var O=h[v];if(v==T||O!==$){var $=O;$t(O)?cc.call(c,O,1):Ic(c,O)}}return c}function Sl(c,h){return c+Ro(Na()*(h-c+1))}function Ua(c,h,v,T){for(var O=-1,$=nn(xs((h-c)/(v||1)),0),J=ce($);$--;)J[T?$:++O]=c,c+=v;return J}function As(c,h){var v="";if(!c||h<1||h>Y)return v;do h%2&&(v+=c),h=Ro(h/2),h&&(c+=c);while(h);return v}function it(c,h){return xr(Vc(c,h,$r),c+"")}function Pn(c){return Mi(ff(c))}function Fh(c,h){var v=ff(c);return qc(v,to(h,0,v.length))}function Is(c,h,v,T){if(!Xt(c))return c;h=Ri(h,c);for(var O=-1,$=h.length,J=$-1,Z=c;Z!=null&&++O<$;){var se=ai(h[O]),ve=v;if(se==="__proto__"||se==="constructor"||se==="prototype")return c;if(O!=J){var we=Z[se];ve=T?T(we,se,Z):t,ve===t&&(ve=Xt(we)?we:$t(h[O+1])?[]:{})}Es(Z,se,ve),Z=Z[se]}return c}var Nc=pc?function(c,h){return pc.set(c,h),c}:$r,Pi=Ma?function(c,h){return Ma(c,"toString",{configurable:!0,enumerable:!1,value:ty(h),writable:!0})}:$r;function Lr(c){return qc(ff(c))}function Rn(c,h,v){var T=-1,O=c.length;h<0&&(h=-h>O?0:O+h),v=v>O?O:v,v<0&&(v+=O),O=h>v?0:v-h>>>0,h>>>=0;for(var $=ce(O);++T<O;)$[T]=c[T+h];return $}function Bh(c,h){var v;return Ii(c,function(T,O,$){return v=h(T,O,$),!v}),!!v}function bl(c,h,v){var T=0,O=c==null?T:c.length;if(typeof h=="number"&&h===h&&O<=N){for(;T<O;){var $=T+O>>>1,J=c[$];J!==null&&!fi(J)&&(v?J<=h:J<h)?T=$+1:O=$}return O}return Ac(c,h,$r,v)}function Ac(c,h,v,T){var O=0,$=c==null?0:c.length;if($===0)return 0;h=v(h);for(var J=h!==h,Z=h===null,se=fi(h),ve=h===t;O<$;){var we=Ro((O+$)/2),be=v(c[we]),Ae=be!==t,Le=be===null,Je=be===be,lt=fi(be);if(J)var Ge=T||Je;else ve?Ge=Je&&(T||Ae):Z?Ge=Je&&Ae&&(T||!Le):se?Ge=Je&&Ae&&!Le&&(T||!lt):Le||lt?Ge=!1:Ge=T?be<=h:be<h;Ge?O=we+1:$=we}return Mn($,R)}function Uh(c,h){for(var v=-1,T=c.length,O=0,$=[];++v<T;){var J=c[v],Z=h?h(J):J;if(!v||!fo(Z,se)){var se=Z;$[O++]=J===0?0:J}}return $}function Wh(c){return typeof c=="number"?c:fi(c)?x:+c}function sr(c){if(typeof c=="string")return c;if(nt(c))return Rt(c,sr)+"";if(fi(c))return mc?mc.call(c):"";var h=c+"";return h=="0"&&1/c==-1/0?"-0":h}function so(c,h,v){var T=-1,O=ec,$=c.length,J=!0,Z=[],se=Z;if(v)J=!1,O=ph;else if($>=i){var ve=h?null:G0(c);if(ve)return Po(ve);J=!1,O=Qi,se=new bs}else se=h?[]:Z;e:for(;++T<$;){var we=c[T],be=h?h(we):we;if(we=v||we!==0?we:0,J&&be===be){for(var Ae=se.length;Ae--;)if(se[Ae]===be)continue e;h&&se.push(be),Z.push(we)}else O(se,be,v)||(se!==Z&&se.push(be),Z.push(we))}return Z}function Ic(c,h){return h=Ri(h,c),c=mn(c,h),c==null||delete c[ai(Vn(h))]}function jh(c,h,v,T){return Is(c,h,v(no(c,h)),T)}function Wa(c,h,v,T){for(var O=c.length,$=T?O:-1;(T?$--:++$<O)&&h(c[$],$,c););return v?Rn(c,T?0:$,T?$+1:O):Rn(c,T?$+1:0,T?O:$)}function _l(c,h){var v=c;return v instanceof tt&&(v=v.value()),mh(h,function(T,O){return O.func.apply(O.thisArg,Oo([T],O.args))},v)}function Oc(c,h,v){var T=c.length;if(T<2)return T?so(c[0]):[];for(var O=-1,$=ce(T);++O<T;)for(var J=c[O],Z=-1;++Z<T;)Z!=O&&($[O]=Ai($[O]||J,c[Z],h,v));return so(Jt($,1),h,v)}function ja(c,h,v){for(var T=-1,O=c.length,$=h.length,J={};++T<O;){var Z=T<$?h[T]:t;v(J,c[T],Z)}return J}function Cl(c){return dn(c)?c:[]}function Pc(c){return typeof c=="function"?c:$r}function Ri(c,h){return nt(c)?c:Pe(c,h)?[c]:ld(It(c))}var W0=it;function lo(c,h,v){var T=c.length;return v=v===t?T:v,!h&&v>=T?c:Rn(c,h,v)}var $h=M0||function(c){return Wt.clearTimeout(c)};function Hh(c,h){if(h)return c.slice();var v=c.length,T=_h?_h(v):new c.constructor(v);return c.copy(T),T}function $a(c){var h=new c.constructor(c.byteLength);return new Ta(h).set(new Ta(c)),h}function j0(c,h){var v=h?$a(c.buffer):c.buffer;return new c.constructor(v,c.byteOffset,c.byteLength)}function $0(c){var h=new c.constructor(c.source,nh.exec(c));return h.lastIndex=c.lastIndex,h}function H0(c){return vr?At(vr.call(c)):{}}function V0(c,h){var v=h?$a(c.buffer):c.buffer;return new c.constructor(v,c.byteOffset,c.length)}function Vh(c,h){if(c!==h){var v=c!==t,T=c===null,O=c===c,$=fi(c),J=h!==t,Z=h===null,se=h===h,ve=fi(h);if(!Z&&!ve&&!$&&c>h||$&&J&&se&&!Z&&!ve||T&&J&&se||!v&&se||!O)return 1;if(!T&&!$&&!ve&&c<h||ve&&v&&O&&!T&&!$||Z&&v&&O||!J&&O||!se)return-1}return 0}function Ng(c,h,v){for(var T=-1,O=c.criteria,$=h.criteria,J=O.length,Z=v.length;++T<J;){var se=Vh(O[T],$[T]);if(se){if(T>=Z)return se;var ve=v[T];return se*(ve=="desc"?-1:1)}}return c.index-h.index}function q0(c,h,v,T){for(var O=-1,$=c.length,J=v.length,Z=-1,se=h.length,ve=nn($-J,0),we=ce(se+ve),be=!T;++Z<se;)we[Z]=h[Z];for(;++O<J;)(be||O<$)&&(we[v[O]]=c[O]);for(;ve--;)we[Z++]=c[O++];return we}function qh(c,h,v,T){for(var O=-1,$=c.length,J=-1,Z=v.length,se=-1,ve=h.length,we=nn($-Z,0),be=ce(we+ve),Ae=!T;++O<we;)be[O]=c[O];for(var Le=O;++se<ve;)be[Le+se]=h[se];for(;++J<Z;)(Ae||O<$)&&(be[Le+v[J]]=c[O++]);return be}function jn(c,h){var v=-1,T=c.length;for(h||(h=ce(T));++v<T;)h[v]=c[v];return h}function ii(c,h,v,T){var O=!v;v||(v={});for(var $=-1,J=h.length;++$<J;){var Z=h[$],se=T?T(v[Z],c[Z],Z,v,c):t;se===t&&(se=c[Z]),O?Ni(v,Z,se):Es(v,Z,se)}return v}function Rc(c,h){return ii(c,oi(c),h)}function Ag(c,h){return ii(c,Y0(c),h)}function Dc(c,h){return function(v,T){var O=nt(v)?hh:wr,$=h?h():{};return O(v,c,He(T,2),$)}}function El(c){return it(function(h,v){var T=-1,O=v.length,$=O>1?v[O-1]:t,J=O>2?v[2]:t;for($=c.length>3&&typeof $=="function"?(O--,$):t,J&&Hn(v[0],v[1],J)&&($=O<3?t:$,O=1),h=At(h);++T<O;){var Z=v[T];Z&&c(h,Z,T,$)}return h})}function Fr(c,h){return function(v,T){if(v==null)return v;if(!Wr(v))return c(v,T);for(var O=v.length,$=h?O:-1,J=At(v);(h?$--:++$<O)&&T(J[$],$,J)!==!1;);return v}}function zc(c){return function(h,v,T){for(var O=-1,$=At(h),J=T(h),Z=J.length;Z--;){var se=J[c?Z:++O];if(v($[se],se,$)===!1)break}return h}}function Lc(c,h,v){var T=h&P,O=Tl(c);function $(){var J=this&&this!==Wt&&this instanceof $?O:c;return J.apply(T?v:this,arguments)}return $}function Kh(c){return function(h){h=It(h);var v=sl(h)?yr(h):t,T=v?v[0]:h.charAt(0),O=v?lo(v,1).join(""):h.slice(1);return T[c]()+O}}function Os(c){return function(h){return mh(ow(iw(h).replace(fg,"")),c,"")}}function Tl(c){return function(){var h=arguments;switch(h.length){case 0:return new c;case 1:return new c(h[0]);case 2:return new c(h[0],h[1]);case 3:return new c(h[0],h[1],h[2]);case 4:return new c(h[0],h[1],h[2],h[3]);case 5:return new c(h[0],h[1],h[2],h[3],h[4]);case 6:return new c(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new c(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var v=ml(c.prototype),T=c.apply(v,h);return Xt(T)?T:v}}function Jh(c,h,v){var T=Tl(c);function O(){for(var $=arguments.length,J=ce($),Z=$,se=ao(O);Z--;)J[Z]=arguments[Z];var ve=$<3&&J[0]!==se&&J[$-1]!==se?[]:Nr(J,se);if($-=ve.length,$<v)return $n(c,h,Ml,O.placeholder,t,J,ve,t,t,v-$);var we=this&&this!==Wt&&this instanceof O?T:c;return Un(we,this,J)}return O}function Ps(c){return function(h,v,T){var O=At(h);if(!Wr(h)){var $=He(v,3);h=Dn(h),v=function(Z){return $(O[Z],Z,O)}}var J=c(h,v,T);return J>-1?O[$?h[J]:J]:t}}function Fc(c){return zi(function(h){var v=h.length,T=v,O=Nn.prototype.thru;for(c&&h.reverse();T--;){var $=h[T];if(typeof $!="function")throw new Ar(l);if(O&&!J&&Nl($)=="wrapper")var J=new Nn([],!0)}for(T=J?T:v;++T<v;){$=h[T];var Z=Nl($),se=Z=="wrapper"?Wc($):t;se&&Ya(se[0])&&se[1]==(H|I|B|Q)&&!se[4].length&&se[9]==1?J=J[Nl(se[0])].apply(J,se[3]):J=$.length==1&&Ya($)?J[Z]():J.thru($)}return function(){var ve=arguments,we=ve[0];if(J&&ve.length==1&&nt(we))return J.plant(we).value();for(var be=0,Ae=v?h[be].apply(this,ve):we;++be<v;)Ae=h[be].call(this,Ae);return Ae}})}function Ml(c,h,v,T,O,$,J,Z,se,ve){var we=h&H,be=h&P,Ae=h&F,Le=h&(I|W),Je=h&q,lt=Ae?t:Tl(c);function Ge(){for(var ht=arguments.length,gt=ce(ht),hi=ht;hi--;)gt[hi]=arguments[hi];if(Le)var br=ao(Ge),di=v0(gt,br);if(T&&(gt=q0(gt,T,O,Le)),$&&(gt=qh(gt,$,J,Le)),ht-=di,Le&&ht<ve){var pn=Nr(gt,br);return $n(c,h,Ml,Ge.placeholder,v,gt,pn,Z,se,ve-ht)}var ho=be?v:this,js=Ae?ho[c]:c;return ht=gt.length,Z?gt=si(gt,Z):Je&&ht>1&&gt.reverse(),we&&se<ht&&(gt.length=se),this&&this!==Wt&&this instanceof Ge&&(js=lt||Tl(js)),js.apply(ho,gt)}return Ge}function K0(c,h){return function(v,T){return ro(v,c,h(T),{})}}function Ha(c,h){return function(v,T){var O;if(v===t&&T===t)return h;if(v!==t&&(O=v),T!==t){if(O===t)return T;typeof v=="string"||typeof T=="string"?(v=sr(v),T=sr(T)):(v=Wh(v),T=Wh(T)),O=c(v,T)}return O}}function Bc(c){return zi(function(h){return h=Rt(h,gr(He())),it(function(v){var T=this;return c(h,function(O){return Un(O,T,v)})})})}function Va(c,h){h=h===t?" ":sr(h);var v=h.length;if(v<2)return v?As(h,c):h;var T=As(h,xs(c/ws(h)));return sl(h)?lo(yr(T),0,c).join(""):T.slice(0,c)}function J0(c,h,v,T){var O=h&P,$=Tl(c);function J(){for(var Z=-1,se=arguments.length,ve=-1,we=T.length,be=ce(we+se),Ae=this&&this!==Wt&&this instanceof J?$:c;++ve<we;)be[ve]=T[ve];for(;se--;)be[ve++]=arguments[++Z];return Un(Ae,O?v:this,be)}return J}function Gh(c){return function(h,v,T){return T&&typeof T!="number"&&Hn(h,v,T)&&(v=T=t),h=Ws(h),v===t?(v=h,h=0):v=Ws(v),T=T===t?h<v?1:-1:Ws(T),Ua(h,v,T,c)}}function Uc(c){return function(h,v){return typeof h=="string"&&typeof v=="string"||(h=Fi(h),v=Fi(v)),c(h,v)}}function $n(c,h,v,T,O,$,J,Z,se,ve){var we=h&I,be=we?J:t,Ae=we?t:J,Le=we?$:t,Je=we?t:$;h|=we?B:z,h&=~(we?z:B),h&V||(h&=-4);var lt=[c,h,O,Le,be,Je,Ae,Z,se,ve],Ge=v.apply(t,lt);return Ya(c)&&od(Ge,lt),Ge.placeholder=T,sd(Ge,c,h)}function Sn(c){var h=tn[c];return function(v,T){if(v=Fi(v),T=T==null?0:Mn(ot(T),292),T&&cl(v)){var O=(It(v)+"e").split("e"),$=h(O[0]+"e"+(+O[1]+T));return O=(It($)+"e").split("e"),+(O[0]+"e"+(+O[1]-T))}return h(v)}}var G0=Do&&1/Po(new Do([,-0]))[1]==de?function(c){return new Do(c)}:iy;function Qh(c){return function(h){var v=bn(h);return v==Pt?rc(h):v==bt?bg(h):kg(h,c(h))}}function Di(c,h,v,T,O,$,J,Z){var se=h&F;if(!se&&typeof c!="function")throw new Ar(l);var ve=T?T.length:0;if(ve||(h&=-97,T=O=t),J=J===t?J:nn(ot(J),0),Z=Z===t?Z:ot(Z),ve-=O?O.length:0,h&z){var we=T,be=O;T=O=t}var Ae=se?t:Wc(c),Le=[c,h,v,T,O,we,be,$,J,Z];if(Ae&&tm(Le,Ae),c=Le[0],h=Le[1],v=Le[2],T=Le[3],O=Le[4],Z=Le[9]=Le[9]===t?se?0:c.length:nn(Le[9]-ve,0),!Z&&h&(I|W)&&(h&=-25),!h||h==P)var Je=Lc(c,h,v);else h==I||h==W?Je=Jh(c,h,Z):(h==B||h==(P|B))&&!O.length?Je=J0(c,h,v,T):Je=Ml.apply(t,Le);var lt=Ae?Nc:od;return sd(lt(Je,Le),c,h)}function Yh(c,h,v,T){return c===t||fo(c,_i[v])&&!vt.call(T,v)?h:c}function Xh(c,h,v,T,O,$){return Xt(c)&&Xt(h)&&($.set(h,c),Ns(c,h,t,Xh,$),$.delete(h)),c}function Zh(c){return Sd(c)?t:c}function ed(c,h,v,T,O,$){var J=v&b,Z=c.length,se=h.length;if(Z!=se&&!(J&&se>Z))return!1;var ve=$.get(c),we=$.get(h);if(ve&&we)return ve==h&&we==c;var be=-1,Ae=!0,Le=v&A?new bs:t;for($.set(c,h),$.set(h,c);++be<Z;){var Je=c[be],lt=h[be];if(T)var Ge=J?T(lt,Je,be,h,c,$):T(Je,lt,be,c,h,$);if(Ge!==t){if(Ge)continue;Ae=!1;break}if(Le){if(!gh(h,function(ht,gt){if(!Qi(Le,gt)&&(Je===ht||O(Je,ht,v,T,$)))return Le.push(gt)})){Ae=!1;break}}else if(!(Je===lt||O(Je,lt,v,T,$))){Ae=!1;break}}return $.delete(c),$.delete(h),Ae}function td(c,h,v,T,O,$,J){switch(v){case Ue:if(c.byteLength!=h.byteLength||c.byteOffset!=h.byteOffset)return!1;c=c.buffer,h=h.buffer;case Te:return!(c.byteLength!=h.byteLength||!$(new Ta(c),new Ta(h)));case ke:case Me:case an:return fo(+c,+h);case $e:return c.name==h.name&&c.message==h.message;case kn:case Nt:return c==h+"";case Pt:var Z=rc;case bt:var se=T&b;if(Z||(Z=Po),c.size!=h.size&&!se)return!1;var ve=J.get(c);if(ve)return ve==h;T|=A,J.set(c,h);var we=ed(Z(c),Z(h),T,O,$,J);return J.delete(c),we;case dr:if(vr)return vr.call(c)==vr.call(h)}return!1}function Q0(c,h,v,T,O,$){var J=v&b,Z=qa(c),se=Z.length,ve=qa(h),we=ve.length;if(se!=we&&!J)return!1;for(var be=se;be--;){var Ae=Z[be];if(!(J?Ae in h:vt.call(h,Ae)))return!1}var Le=$.get(c),Je=$.get(h);if(Le&&Je)return Le==h&&Je==c;var lt=!0;$.set(c,h),$.set(h,c);for(var Ge=J;++be<se;){Ae=Z[be];var ht=c[Ae],gt=h[Ae];if(T)var hi=J?T(gt,ht,Ae,h,c,$):T(ht,gt,Ae,c,h,$);if(!(hi===t?ht===gt||O(ht,gt,v,T,$):hi)){lt=!1;break}Ge||(Ge=Ae=="constructor")}if(lt&&!Ge){var br=c.constructor,di=h.constructor;br!=di&&"constructor"in c&&"constructor"in h&&!(typeof br=="function"&&br instanceof br&&typeof di=="function"&&di instanceof di)&&(lt=!1)}return $.delete(c),$.delete(h),lt}function zi(c){return xr(Vc(c,t,Jc),c+"")}function qa(c){return bc(c,Dn,oi)}function Ka(c){return bc(c,jr,Y0)}var Wc=pc?function(c){return pc.get(c)}:iy;function Nl(c){for(var h=c.name+"",v=dl[h],T=vt.call(dl,h)?v.length:0;T--;){var O=v[T],$=O.func;if($==null||$==c)return O.name}return h}function ao(c){var h=vt.call(j,"placeholder")?j:c;return h.placeholder}function He(){var c=j.iteratee||ny;return c=c===ny?xl:c,arguments.length?c(arguments[0],arguments[1]):c}function Ja(c,h){var v=c.__data__;return Al(h)?v[typeof h=="string"?"string":"hash"]:v.map}function Ga(c){for(var h=Dn(c),v=h.length;v--;){var T=h[v],O=c[T];h[v]=[T,O,Xa(O)]}return h}function Ho(c,h){var v=ol(c,h);return Ph(v)?v:t}function jc(c){var h=vt.call(c,ks),v=c[ks];try{c[ks]=t;var T=!0}catch{}var O=Ca.call(c);return T&&(h?c[ks]=v:delete c[ks]),O}var oi=fc?function(c){return c==null?[]:(c=At(c),Io(fc(c),function(h){return uc.call(c,h)}))}:oy,Y0=fc?function(c){for(var h=[];c;)Oo(h,oi(c)),c=ni(c);return h}:oy,bn=xn;(Aa&&bn(new Aa(new ArrayBuffer(1)))!=Ue||Ss&&bn(new Ss)!=Pt||Ia&&bn(Ia.resolve())!=en||Do&&bn(new Do)!=bt||Oa&&bn(new Oa)!=pr)&&(bn=function(c){var h=xn(c),v=h==En?c.constructor:t,T=v?Vo(v):"";if(T)switch(T){case Th:return Ue;case zo:return Pt;case A0:return en;case pl:return bt;case Ci:return pr}return h});function nd(c,h,v){for(var T=-1,O=v.length;++T<O;){var $=v[T],J=$.size;switch($.type){case"drop":c+=J;break;case"dropRight":h-=J;break;case"take":h=Mn(h,c+J);break;case"takeRight":c=nn(c,h-J);break}}return{start:c,end:h}}function X0(c){var h=c.match(Wu);return h?h[1].split(th):[]}function rd(c,h,v){h=Ri(h,c);for(var T=-1,O=h.length,$=!1;++T<O;){var J=ai(h[T]);if(!($=c!=null&&v(c,J)))break;c=c[J]}return $||++T!=O?$:(O=c==null?0:c.length,!!O&&vm(O)&&$t(J,O)&&(nt(c)||su(c)))}function Qa(c){var h=c.length,v=new c.constructor(h);return h&&typeof c[0]=="string"&&vt.call(c,"index")&&(v.index=c.index,v.input=c.input),v}function _n(c){return typeof c.constructor=="function"&&!uo(c)?ml(ni(c)):{}}function Ig(c,h,v){var T=c.constructor;switch(h){case Te:return $a(c);case ke:case Me:return new T(+c);case Ue:return j0(c,v);case rt:case ft:case un:case ei:case er:case xi:case Gi:case cn:case Mr:return V0(c,v);case Pt:return new T;case an:case Nt:return new T(c);case kn:return $0(c);case bt:return new T;case dr:return H0(c)}}function Og(c,h){var v=h.length;if(!v)return c;var T=v-1;return h[T]=(v>1?"& ":"")+h[T],h=h.join(v>2?", ":" "),c.replace(Uu,`{
/* [wrapped with `+h+`] */
`)}function $c(c){return nt(c)||su(c)||!!(T0&&c&&c[T0])}function $t(c,h){var v=typeof c;return h=h??Y,!!h&&(v=="number"||v!="symbol"&&Qp.test(c))&&c>-1&&c%1==0&&c<h}function Hn(c,h,v){if(!Xt(v))return!1;var T=typeof h;return(T=="number"?Wr(v)&&$t(h,v.length):T=="string"&&h in v)?fo(v[h],c):!1}function Pe(c,h){if(nt(c))return!1;var v=typeof c;return v=="number"||v=="symbol"||v=="boolean"||c==null||fi(c)?!0:qp.test(c)||!Zf.test(c)||h!=null&&c in At(h)}function Al(c){var h=typeof c;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?c!=="__proto__":c===null}function Ya(c){var h=Nl(c),v=j[h];if(typeof v!="function"||!(h in tt.prototype))return!1;if(c===v)return!0;var T=Wc(v);return!!T&&c===T[0]}function Z0(c){return!!sc&&sc in c}var Pg=al?Us:sy;function uo(c){var h=c&&c.constructor,v=typeof h=="function"&&h.prototype||_i;return c===v}function Xa(c){return c===c&&!Xt(c)}function Hc(c,h){return function(v){return v==null?!1:v[c]===h&&(h!==t||c in At(v))}}function em(c){var h=ue(c,function(T){return v.size===p&&v.clear(),T}),v=h.cache;return h}function tm(c,h){var v=c[1],T=h[1],O=v|T,$=O<(P|F|H),J=T==H&&v==I||T==H&&v==Q&&c[7].length<=h[8]||T==(H|Q)&&h[7].length<=h[8]&&v==I;if(!($||J))return c;T&P&&(c[2]=h[2],O|=v&P?0:V);var Z=h[3];if(Z){var se=c[3];c[3]=se?q0(se,Z,h[4]):Z,c[4]=se?Nr(c[3],m):h[4]}return Z=h[5],Z&&(se=c[5],c[5]=se?qh(se,Z,h[6]):Z,c[6]=se?Nr(c[5],m):h[6]),Z=h[7],Z&&(c[7]=Z),T&H&&(c[8]=c[8]==null?h[8]:Mn(c[8],h[8])),c[9]==null&&(c[9]=h[9]),c[0]=h[0],c[1]=O,c}function nm(c){var h=[];if(c!=null)for(var v in At(c))h.push(v);return h}function id(c){return Ca.call(c)}function Vc(c,h,v){return h=nn(h===t?c.length-1:h,0),function(){for(var T=arguments,O=-1,$=nn(T.length-h,0),J=ce($);++O<$;)J[O]=T[h+O];O=-1;for(var Z=ce(h+1);++O<h;)Z[O]=T[O];return Z[h]=v(J),Un(c,this,Z)}}function mn(c,h){return h.length<2?c:no(c,Rn(h,0,-1))}function si(c,h){for(var v=c.length,T=Mn(h.length,v),O=jn(c);T--;){var $=h[T];c[T]=$t($,v)?O[$]:t}return c}function Li(c,h){if(!(h==="constructor"&&typeof c[h]=="function")&&h!="__proto__")return c[h]}var od=li(Nc),Il=Ch||function(c,h){return Wt.setTimeout(c,h)},xr=li(Pi);function sd(c,h,v){var T=h+"";return xr(c,Og(T,rm(X0(T),v)))}function li(c){var h=0,v=0;return function(){var T=Mg(),O=G-(T-v);if(v=T,O>0){if(++h>=D)return arguments[0]}else h=0;return c.apply(t,arguments)}}function qc(c,h){var v=-1,T=c.length,O=T-1;for(h=h===t?T:h;++v<h;){var $=Sl(v,O),J=c[$];c[$]=c[v],c[v]=J}return c.length=h,c}var ld=em(function(c){var h=[];return c.charCodeAt(0)===46&&h.push(""),c.replace(fa,function(v,T,O,$){h.push(O?$.replace(og,"$1"):T||v)}),h});function ai(c){if(typeof c=="string"||fi(c))return c;var h=c+"";return h=="0"&&1/c==-1/0?"-0":h}function Vo(c){if(c!=null){try{return _a.call(c)}catch{}try{return c+""}catch{}}return""}function rm(c,h){return Tn(re,function(v){var T="_."+v[0];h&v[1]&&!ec(c,T)&&c.push(T)}),c.sort()}function im(c){if(c instanceof tt)return c.clone();var h=new Nn(c.__wrapped__,c.__chain__);return h.__actions__=jn(c.__actions__),h.__index__=c.__index__,h.__values__=c.__values__,h}function Kc(c,h,v){(v?Hn(c,h,v):h===t)?h=1:h=nn(ot(h),0);var T=c==null?0:c.length;if(!T||h<1)return[];for(var O=0,$=0,J=ce(xs(T/h));O<T;)J[$++]=Rn(c,O,O+=h);return J}function ad(c){for(var h=-1,v=c==null?0:c.length,T=0,O=[];++h<v;){var $=c[h];$&&(O[T++]=$)}return O}function Br(){var c=arguments.length;if(!c)return[];for(var h=ce(c-1),v=arguments[0],T=c;T--;)h[T-1]=arguments[T];return Oo(nt(v)?jn(v):[v],Jt(h,1))}var mt=it(function(c,h){return dn(c)?Ai(c,Jt(h,1,dn,!0)):[]}),gn=it(function(c,h){var v=Vn(h);return dn(v)&&(v=t),dn(c)?Ai(c,Jt(h,1,dn,!0),He(v,2)):[]}),rn=it(function(c,h){var v=Vn(h);return dn(v)&&(v=t),dn(c)?Ai(c,Jt(h,1,dn,!0),t,v):[]});function Cn(c,h,v){var T=c==null?0:c.length;return T?(h=v||h===t?1:ot(h),Rn(c,h<0?0:h,T)):[]}function Sr(c,h,v){var T=c==null?0:c.length;return T?(h=v||h===t?1:ot(h),h=T-h,Rn(c,0,h<0?0:h)):[]}function Ol(c,h){return c&&c.length?Wa(c,He(h,3),!0,!0):[]}function hn(c,h){return c&&c.length?Wa(c,He(h,3),!0):[]}function Za(c,h,v,T){var O=c==null?0:c.length;return O?(v&&typeof v!="number"&&Hn(c,h,v)&&(v=0,T=O),F0(c,h,v,T)):[]}function qo(c,h,v){var T=c==null?0:c.length;if(!T)return-1;var O=v==null?0:ot(v);return O<0&&(O=nn(T+O,0)),tc(c,He(h,3),O)}function eu(c,h,v){var T=c==null?0:c.length;if(!T)return-1;var O=T-1;return v!==t&&(O=ot(v),O=v<0?nn(T+O,0):Mn(O,T-1)),tc(c,He(h,3),O,!0)}function Jc(c){var h=c==null?0:c.length;return h?Jt(c,1):[]}function tu(c){var h=c==null?0:c.length;return h?Jt(c,de):[]}function lr(c,h){var v=c==null?0:c.length;return v?(h=h===t?1:ot(h),Jt(c,h)):[]}function ud(c){for(var h=-1,v=c==null?0:c.length,T={};++h<v;){var O=c[h];T[O[0]]=O[1]}return T}function Rs(c){return c&&c.length?c[0]:t}function co(c,h,v){var T=c==null?0:c.length;if(!T)return-1;var O=v==null?0:ot(v);return O<0&&(O=nn(T+O,0)),il(c,h,O)}function Gc(c){var h=c==null?0:c.length;return h?Rn(c,0,-1):[]}var cd=it(function(c){var h=Rt(c,Cl);return h.length&&h[0]===c[0]?_c(h):[]}),Ko=it(function(c){var h=Vn(c),v=Rt(c,Cl);return h===Vn(v)?h=t:v.pop(),v.length&&v[0]===c[0]?_c(v,He(h,2)):[]}),Qc=it(function(c){var h=Vn(c),v=Rt(c,Cl);return h=typeof h=="function"?h:t,h&&v.pop(),v.length&&v[0]===c[0]?_c(v,t,h):[]});function Jo(c,h){return c==null?"":hc.call(c,h)}function Vn(c){var h=c==null?0:c.length;return h?c[h-1]:t}function nu(c,h,v){var T=c==null?0:c.length;if(!T)return-1;var O=T;return v!==t&&(O=ot(v),O=O<0?nn(T+O,0):Mn(O,T-1)),h===h?_g(c,h,O):tc(c,d0,O,!0)}function fd(c,h){return c&&c.length?Mc(c,ot(h)):t}var Yc=it(ru);function ru(c,h){return c&&c.length&&h&&h.length?Qt(c,h):c}function qn(c,h,v){return c&&c.length&&h&&h.length?Qt(c,h,He(v,2)):c}function Go(c,h,v){return c&&c.length&&h&&h.length?Qt(c,h,t,v):c}var ui=zi(function(c,h){var v=c==null?0:c.length,T=xc(c,h);return fn(c,Rt(h,function(O){return $t(O,v)?+O:O}).sort(Vh)),T});function ar(c,h){var v=[];if(!(c&&c.length))return v;var T=-1,O=[],$=c.length;for(h=He(h,3);++T<$;){var J=c[T];h(J,T,c)&&(v.push(J),O.push(T))}return fn(c,O),v}function Xc(c){return c==null?c:dc.call(c)}function hd(c,h,v){var T=c==null?0:c.length;return T?(v&&typeof v!="number"&&Hn(c,h,v)?(h=0,v=T):(h=h==null?0:ot(h),v=v===t?T:ot(v)),Rn(c,h,v)):[]}function dd(c,h){return bl(c,h)}function Rg(c,h,v){return Ac(c,h,He(v,2))}function Qo(c,h){var v=c==null?0:c.length;if(v){var T=bl(c,h);if(T<v&&fo(c[T],h))return T}return-1}function om(c,h){return bl(c,h,!0)}function pd(c,h,v){return Ac(c,h,He(v,2),!0)}function Ds(c,h){var v=c==null?0:c.length;if(v){var T=bl(c,h,!0)-1;if(fo(c[T],h))return T}return-1}function md(c){return c&&c.length?Uh(c):[]}function zs(c,h){return c&&c.length?Uh(c,He(h,2)):[]}function sm(c){var h=c==null?0:c.length;return h?Rn(c,1,h):[]}function lm(c,h,v){return c&&c.length?(h=v||h===t?1:ot(h),Rn(c,0,h<0?0:h)):[]}function gd(c,h,v){var T=c==null?0:c.length;return T?(h=v||h===t?1:ot(h),h=T-h,Rn(c,h<0?0:h,T)):[]}function Zc(c,h){return c&&c.length?Wa(c,He(h,3),!1,!0):[]}function Dg(c,h){return c&&c.length?Wa(c,He(h,3)):[]}var zg=it(function(c){return so(Jt(c,1,dn,!0))}),am=it(function(c){var h=Vn(c);return dn(h)&&(h=t),so(Jt(c,1,dn,!0),He(h,2))}),um=it(function(c){var h=Vn(c);return h=typeof h=="function"?h:t,so(Jt(c,1,dn,!0),t,h)});function Ls(c){return c&&c.length?so(c):[]}function Lg(c,h){return c&&c.length?so(c,He(h,2)):[]}function Pl(c,h){return h=typeof h=="function"?h:t,c&&c.length?so(c,t,h):[]}function ef(c){if(!(c&&c.length))return[];var h=0;return c=Io(c,function(v){if(dn(v))return h=nn(v.length,h),!0}),kh(h,function(v){return Rt(c,vh(v))})}function Vt(c,h){if(!(c&&c.length))return[];var v=ef(c);return h==null?v:Rt(v,function(T){return Un(h,t,T)})}var Fg=it(function(c,h){return dn(c)?Ai(c,h):[]}),cm=it(function(c){return Oc(Io(c,dn))}),Bg=it(function(c){var h=Vn(c);return dn(h)&&(h=t),Oc(Io(c,dn),He(h,2))}),Ug=it(function(c){var h=Vn(c);return h=typeof h=="function"?h:t,Oc(Io(c,dn),t,h)}),fm=it(ef);function hm(c,h){return ja(c||[],h||[],Es)}function Wg(c,h){return ja(c||[],h||[],Is)}var Ur=it(function(c){var h=c.length,v=h>1?c[h-1]:t;return v=typeof v=="function"?(c.pop(),v):t,Vt(c,v)});function tf(c){var h=j(c);return h.__chain__=!0,h}function jg(c,h){return h(c),c}function ci(c,h){return h(c)}var nf=zi(function(c){var h=c.length,v=h?c[0]:0,T=this.__wrapped__,O=function($){return xc($,c)};return h>1||this.__actions__.length||!(T instanceof tt)||!$t(v)?this.thru(O):(T=T.slice(v,+v+(h?1:0)),T.__actions__.push({func:ci,args:[O],thisArg:t}),new Nn(T,this.__chain__).thru(function($){return h&&!$.length&&$.push(t),$}))});function Fs(){return tf(this)}function rf(){return new Nn(this.value(),this.__chain__)}function yd(){this.__values__===t&&(this.__values__=G3(this.value()));var c=this.__index__>=this.__values__.length,h=c?t:this.__values__[this.__index__++];return{done:c,value:h}}function vd(){return this}function $g(c){for(var h,v=this;v instanceof Ei;){var T=im(v);T.__index__=0,T.__values__=t,h?O.__wrapped__=T:h=T;var O=T;v=v.__wrapped__}return O.__wrapped__=c,h}function wd(){var c=this.__wrapped__;if(c instanceof tt){var h=c;return this.__actions__.length&&(h=new tt(this)),h=h.reverse(),h.__actions__.push({func:ci,args:[Xc],thisArg:t}),new Nn(h,this.__chain__)}return this.thru(Xc)}function Hg(){return _l(this.__wrapped__,this.__actions__)}var dm=Dc(function(c,h,v){vt.call(c,v)?++c[v]:Ni(c,v,1)});function pm(c,h,v){var T=nt(c)?dh:Da;return v&&Hn(c,h,v)&&(h=t),T(c,He(h,3))}function of(c,h){var v=nt(c)?Io:Ih;return v(c,He(h,3))}var sf=Ps(qo),mm=Ps(eu);function kd(c,h){return Jt(Bs(c,h),1)}function Vg(c,h){return Jt(Bs(c,h),de)}function gm(c,h,v){return v=v===t?1:ot(v),Jt(Bs(c,h),v)}function lf(c,h){var v=nt(c)?Tn:Ii;return v(c,He(h,3))}function iu(c,h){var v=nt(c)?Zu:L0;return v(c,He(h,3))}var xd=Dc(function(c,h,v){vt.call(c,v)?c[v].push(h):Ni(c,v,[h])});function af(c,h,v,T){c=Wr(c)?c:ff(c),v=v&&!T?ot(v):0;var O=c.length;return v<0&&(v=nn(O+v,0)),wm(c)?v<=O&&c.indexOf(h,v)>-1:!!O&&il(c,h,v)>-1}var ym=it(function(c,h,v){var T=-1,O=typeof h=="function",$=Wr(c)?ce(c.length):[];return Ii(c,function(J){$[++T]=O?Un(h,J,v):Dr(J,h,v)}),$}),qg=Dc(function(c,h,v){Ni(c,v,h)});function Bs(c,h){var v=nt(c)?Rt:Dh;return v(c,He(h,3))}function Kg(c,h,v,T){return c==null?[]:(nt(h)||(h=h==null?[]:[h]),v=T?t:v,nt(v)||(v=v==null?[]:[v]),Ba(c,h,v))}var ou=Dc(function(c,h,v){c[v?0:1].push(h)},function(){return[[],[]]});function Jg(c,h,v){var T=nt(c)?mh:m0,O=arguments.length<3;return T(c,He(h,4),v,O,Ii)}function uf(c,h,v){var T=nt(c)?gg:m0,O=arguments.length<3;return T(c,He(h,4),v,O,L0)}function s(c,h){var v=nt(c)?Io:Ih;return v(c,Ee(He(h,3)))}function a(c){var h=nt(c)?Mi:Pn;return h(c)}function d(c,h,v){(v?Hn(c,h,v):h===t)?h=1:h=ot(h);var T=nt(c)?Cs:Fh;return T(c,h)}function y(c){var h=nt(c)?D0:Lr;return h(c)}function S(c){if(c==null)return 0;if(Wr(c))return wm(c)?ws(c):c.length;var h=bn(c);return h==Pt||h==bt?c.size:oo(c).length}function E(c,h,v){var T=nt(c)?gh:Bh;return v&&Hn(c,h,v)&&(h=t),T(c,He(h,3))}var L=it(function(c,h){if(c==null)return[];var v=h.length;return v>1&&Hn(c,h[0],h[1])?h=[]:v>2&&Hn(h[0],h[1],h[2])&&(h=[h[0]]),Ba(c,Jt(h,1),[])}),K=zt||function(){return Wt.Date.now()};function X(c,h){if(typeof h!="function")throw new Ar(l);return c=ot(c),function(){if(--c<1)return h.apply(this,arguments)}}function fe(c,h,v){return h=v?t:h,h=c&&h==null?c.length:h,Di(c,H,t,t,t,t,h)}function Se(c,h){var v;if(typeof h!="function")throw new Ar(l);return c=ot(c),function(){return--c>0&&(v=h.apply(this,arguments)),c<=1&&(h=t),v}}var Ce=it(function(c,h,v){var T=P;if(v.length){var O=Nr(v,ao(Ce));T|=B}return Di(c,T,h,v,O)}),xe=it(function(c,h,v){var T=P|F;if(v.length){var O=Nr(v,ao(xe));T|=B}return Di(h,T,c,v,O)});function Oe(c,h,v){h=v?t:h;var T=Di(c,I,t,t,t,t,t,h);return T.placeholder=Oe.placeholder,T}function Re(c,h,v){h=v?t:h;var T=Di(c,W,t,t,t,t,t,h);return T.placeholder=Re.placeholder,T}function De(c,h,v){var T,O,$,J,Z,se,ve=0,we=!1,be=!1,Ae=!0;if(typeof c!="function")throw new Ar(l);h=Fi(h)||0,Xt(v)&&(we=!!v.leading,be="maxWait"in v,$=be?nn(Fi(v.maxWait)||0,h):$,Ae="trailing"in v?!!v.trailing:Ae);function Le(pn){var ho=T,js=O;return T=O=t,ve=pn,J=c.apply(js,ho),J}function Je(pn){return ve=pn,Z=Il(ht,h),we?Le(pn):J}function lt(pn){var ho=pn-se,js=pn-ve,aw=h-ho;return be?Mn(aw,$-js):aw}function Ge(pn){var ho=pn-se,js=pn-ve;return se===t||ho>=h||ho<0||be&&js>=$}function ht(){var pn=K();if(Ge(pn))return gt(pn);Z=Il(ht,lt(pn))}function gt(pn){return Z=t,Ae&&T?Le(pn):(T=O=t,J)}function hi(){Z!==t&&$h(Z),ve=0,T=se=O=Z=t}function br(){return Z===t?J:gt(K())}function di(){var pn=K(),ho=Ge(pn);if(T=arguments,O=this,se=pn,ho){if(Z===t)return Je(se);if(be)return $h(Z),Z=Il(ht,h),Le(se)}return Z===t&&(Z=Il(ht,h)),J}return di.cancel=hi,di.flush=br,di}var Yt=it(function(c,h){return Ah(c,1,h)}),ae=it(function(c,h,v){return Ah(c,Fi(h)||0,v)});function te(c){return Di(c,q)}function ue(c,h){if(typeof c!="function"||h!=null&&typeof h!="function")throw new Ar(l);var v=function(){var T=arguments,O=h?h.apply(this,T):T[0],$=v.cache;if($.has(O))return $.get(O);var J=c.apply(this,T);return v.cache=$.set(O,J)||$,J};return v.cache=new(ue.Cache||Ir),v}ue.Cache=Ir;function Ee(c){if(typeof c!="function")throw new Ar(l);return function(){var h=arguments;switch(h.length){case 0:return!c.call(this);case 1:return!c.call(this,h[0]);case 2:return!c.call(this,h[0],h[1]);case 3:return!c.call(this,h[0],h[1],h[2])}return!c.apply(this,h)}}function ze(c){return Se(2,c)}var We=W0(function(c,h){h=h.length==1&&nt(h[0])?Rt(h[0],gr(He())):Rt(Jt(h,1),gr(He()));var v=h.length;return it(function(T){for(var O=-1,$=Mn(T.length,v);++O<$;)T[O]=h[O].call(this,T[O]);return Un(c,this,T)})}),Be=it(function(c,h){var v=Nr(h,ao(Be));return Di(c,B,t,h,v)}),Ke=it(function(c,h){var v=Nr(h,ao(Ke));return Di(c,z,t,h,v)}),yn=zi(function(c,h){return Di(c,Q,t,t,t,h)});function wt(c,h){if(typeof c!="function")throw new Ar(l);return h=h===t?h:ot(h),it(c,h)}function Yo(c,h){if(typeof c!="function")throw new Ar(l);return h=h==null?0:nn(ot(h),0),it(function(v){var T=v[h],O=lo(v,0,h);return T&&Oo(O,T),Un(c,this,O)})}function Gg(c,h,v){var T=!0,O=!0;if(typeof c!="function")throw new Ar(l);return Xt(v)&&(T="leading"in v?!!v.leading:T,O="trailing"in v?!!v.trailing:O),De(c,h,{leading:T,maxWait:h,trailing:O})}function Gb(c){return fe(c,1)}function Qb(c,h){return Be(Pc(h),c)}function Yb(){if(!arguments.length)return[];var c=arguments[0];return nt(c)?c:[c]}function Xb(c){return or(c,k)}function Zb(c,h){return h=typeof h=="function"?h:t,or(c,k,h)}function e6(c){return or(c,g|k)}function t6(c,h){return h=typeof h=="function"?h:t,or(c,g|k,h)}function n6(c,h){return h==null||Ra(c,h,Dn(h))}function fo(c,h){return c===h||c!==c&&h!==h}var r6=Uc(Wo),i6=Uc(function(c,h){return c>=h}),su=Cc(function(){return arguments}())?Cc:function(c){return on(c)&&vt.call(c,"callee")&&!uc.call(c,"callee")},nt=ce.isArray,o6=fh?gr(fh):B0;function Wr(c){return c!=null&&vm(c.length)&&!Us(c)}function dn(c){return on(c)&&Wr(c)}function s6(c){return c===!0||c===!1||on(c)&&xn(c)==ke}var Rl=Eh||sy,l6=tr?gr(tr):io;function a6(c){return on(c)&&c.nodeType===1&&!Sd(c)}function u6(c){if(c==null)return!0;if(Wr(c)&&(nt(c)||typeof c=="string"||typeof c.splice=="function"||Rl(c)||cf(c)||su(c)))return!c.length;var h=bn(c);if(h==Pt||h==bt)return!c.size;if(uo(c))return!oo(c).length;for(var v in c)if(vt.call(c,v))return!1;return!0}function c6(c,h){return zr(c,h)}function f6(c,h,v){v=typeof v=="function"?v:t;var T=v?v(c,h):t;return T===t?zr(c,h,t,v):!!T}function Qg(c){if(!on(c))return!1;var h=xn(c);return h==$e||h==je||typeof c.message=="string"&&typeof c.name=="string"&&!Sd(c)}function h6(c){return typeof c=="number"&&cl(c)}function Us(c){if(!Xt(c))return!1;var h=xn(c);return h==pt||h==ln||h==he||h==Ji}function V3(c){return typeof c=="number"&&c==ot(c)}function vm(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=Y}function Xt(c){var h=typeof c;return c!=null&&(h=="object"||h=="function")}function on(c){return c!=null&&typeof c=="object"}var q3=vs?gr(vs):U0;function d6(c,h){return c===h||kl(c,h,Ga(h))}function p6(c,h,v){return v=typeof v=="function"?v:t,kl(c,h,Ga(h),v)}function m6(c){return K3(c)&&c!=+c}function g6(c){if(Pg(c))throw new Qe(o);return Ph(c)}function y6(c){return c===null}function v6(c){return c==null}function K3(c){return typeof c=="number"||on(c)&&xn(c)==an}function Sd(c){if(!on(c)||xn(c)!=En)return!1;var h=ni(c);if(h===null)return!0;var v=vt.call(h,"constructor")&&h.constructor;return typeof v=="function"&&v instanceof v&&_a.call(v)==lc}var Yg=Xu?gr(Xu):La;function w6(c){return V3(c)&&c>=-9007199254740991&&c<=Y}var J3=rl?gr(rl):Oi;function wm(c){return typeof c=="string"||!nt(c)&&on(c)&&xn(c)==Nt}function fi(c){return typeof c=="symbol"||on(c)&&xn(c)==dr}var cf=c0?gr(c0):Fa;function k6(c){return c===t}function x6(c){return on(c)&&bn(c)==pr}function S6(c){return on(c)&&xn(c)==me}var b6=Uc(jo),_6=Uc(function(c,h){return c<=h});function G3(c){if(!c)return[];if(Wr(c))return wm(c)?yr(c):jn(c);if(Zi&&c[Zi])return Sg(c[Zi]());var h=bn(c),v=h==Pt?rc:h==bt?Po:ff;return v(c)}function Ws(c){if(!c)return c===0?c:0;if(c=Fi(c),c===de||c===-1/0){var h=c<0?-1:1;return h*C}return c===c?c:0}function ot(c){var h=Ws(c),v=h%1;return h===h?v?h-v:h:0}function Q3(c){return c?to(ot(c),0,M):0}function Fi(c){if(typeof c=="number")return c;if(fi(c))return x;if(Xt(c)){var h=typeof c.valueOf=="function"?c.valueOf():c;c=Xt(h)?h+"":h}if(typeof c!="string")return c===0?c:+c;c=g0(c);var v=sg.test(c);return v||Gp.test(c)?Qu(c.slice(2),v?2:8):Kp.test(c)?x:+c}function Y3(c){return ii(c,jr(c))}function C6(c){return c?to(ot(c),-9007199254740991,Y):c===0?c:0}function It(c){return c==null?"":sr(c)}var E6=El(function(c,h){if(uo(h)||Wr(h)){ii(h,Dn(h),c);return}for(var v in h)vt.call(h,v)&&Es(c,v,h[v])}),X3=El(function(c,h){ii(h,jr(h),c)}),km=El(function(c,h,v,T){ii(h,jr(h),c,T)}),T6=El(function(c,h,v,T){ii(h,Dn(h),c,T)}),M6=zi(xc);function N6(c,h){var v=ml(c);return h==null?v:Ft(v,h)}var A6=it(function(c,h){c=At(c);var v=-1,T=h.length,O=T>2?h[2]:t;for(O&&Hn(h[0],h[1],O)&&(T=1);++v<T;)for(var $=h[v],J=jr($),Z=-1,se=J.length;++Z<se;){var ve=J[Z],we=c[ve];(we===t||fo(we,_i[ve])&&!vt.call(c,ve))&&(c[ve]=$[ve])}return c}),I6=it(function(c){return c.push(t,Xh),Un(Z3,t,c)});function O6(c,h){return h0(c,He(h,3),kr)}function P6(c,h){return h0(c,He(h,3),Uo)}function R6(c,h){return c==null?c:Sc(c,He(h,3),jr)}function D6(c,h){return c==null?c:za(c,He(h,3),jr)}function z6(c,h){return c&&kr(c,He(h,3))}function L6(c,h){return c&&Uo(c,He(h,3))}function F6(c){return c==null?[]:wl(c,Dn(c))}function B6(c){return c==null?[]:wl(c,jr(c))}function Xg(c,h,v){var T=c==null?t:no(c,h);return T===t?v:T}function U6(c,h){return c!=null&&rd(c,h,Rr)}function Zg(c,h){return c!=null&&rd(c,h,Ms)}var W6=K0(function(c,h,v){h!=null&&typeof h.toString!="function"&&(h=Ca.call(h)),c[h]=v},ty($r)),j6=K0(function(c,h,v){h!=null&&typeof h.toString!="function"&&(h=Ca.call(h)),vt.call(c,h)?c[h].push(v):c[h]=[v]},He),$6=it(Dr);function Dn(c){return Wr(c)?Ti(c):oo(c)}function jr(c){return Wr(c)?Ti(c,!0):Rh(c)}function H6(c,h){var v={};return h=He(h,3),kr(c,function(T,O,$){Ni(v,h(T,O,$),T)}),v}function V6(c,h){var v={};return h=He(h,3),kr(c,function(T,O,$){Ni(v,O,h(T,O,$))}),v}var q6=El(function(c,h,v){Ns(c,h,v)}),Z3=El(function(c,h,v,T){Ns(c,h,v,T)}),K6=zi(function(c,h){var v={};if(c==null)return v;var T=!1;h=Rt(h,function($){return $=Ri($,c),T||(T=$.length>1),$}),ii(c,Ka(c),v),T&&(v=or(v,g|w|k,Zh));for(var O=h.length;O--;)Ic(v,h[O]);return v});function J6(c,h){return ew(c,Ee(He(h)))}var G6=zi(function(c,h){return c==null?{}:Lh(c,h)});function ew(c,h){if(c==null)return{};var v=Rt(Ka(c),function(T){return[T]});return h=He(h),$o(c,v,function(T,O){return h(T,O[0])})}function Q6(c,h,v){h=Ri(h,c);var T=-1,O=h.length;for(O||(O=1,c=t);++T<O;){var $=c==null?t:c[ai(h[T])];$===t&&(T=O,$=v),c=Us($)?$.call(c):$}return c}function Y6(c,h,v){return c==null?c:Is(c,h,v)}function X6(c,h,v,T){return T=typeof T=="function"?T:t,c==null?c:Is(c,h,v,T)}var tw=Qh(Dn),nw=Qh(jr);function Z6(c,h,v){var T=nt(c),O=T||Rl(c)||cf(c);if(h=He(h,4),v==null){var $=c&&c.constructor;O?v=T?new $:[]:Xt(c)?v=Us($)?ml(ni(c)):{}:v={}}return(O?Tn:kr)(c,function(J,Z,se){return h(v,J,Z,se)}),v}function e_(c,h){return c==null?!0:Ic(c,h)}function t_(c,h,v){return c==null?c:jh(c,h,Pc(v))}function n_(c,h,v,T){return T=typeof T=="function"?T:t,c==null?c:jh(c,h,Pc(v),T)}function ff(c){return c==null?[]:Sa(c,Dn(c))}function r_(c){return c==null?[]:Sa(c,jr(c))}function i_(c,h,v){return v===t&&(v=h,h=t),v!==t&&(v=Fi(v),v=v===v?v:0),h!==t&&(h=Fi(h),h=h===h?h:0),to(Fi(c),h,v)}function o_(c,h,v){return h=Ws(h),v===t?(v=h,h=0):v=Ws(v),c=Fi(c),Oh(c,h,v)}function s_(c,h,v){if(v&&typeof v!="boolean"&&Hn(c,h,v)&&(h=v=t),v===t&&(typeof h=="boolean"?(v=h,h=t):typeof c=="boolean"&&(v=c,c=t)),c===t&&h===t?(c=0,h=1):(c=Ws(c),h===t?(h=c,c=0):h=Ws(h)),c>h){var T=c;c=h,h=T}if(v||c%1||h%1){var O=Na();return Mn(c+O*(h-c+uh("1e-"+((O+"").length-1))),h)}return Sl(c,h)}var l_=Os(function(c,h,v){return h=h.toLowerCase(),c+(v?rw(h):h)});function rw(c){return ey(It(c).toLowerCase())}function iw(c){return c=It(c),c&&c.replace(Yp,w0).replace(s0,"")}function a_(c,h,v){c=It(c),h=sr(h);var T=c.length;v=v===t?T:to(ot(v),0,T);var O=v;return v-=h.length,v>=0&&c.slice(v,O)==h}function u_(c){return c=It(c),c&&$p.test(c)?c.replace(ds,k0):c}function c_(c){return c=It(c),c&&da.test(c)?c.replace(ha,"\\$&"):c}var f_=Os(function(c,h,v){return c+(v?"-":"")+h.toLowerCase()}),h_=Os(function(c,h,v){return c+(v?" ":"")+h.toLowerCase()}),d_=Kh("toLowerCase");function p_(c,h,v){c=It(c),h=ot(h);var T=h?ws(c):0;if(!h||T>=h)return c;var O=(h-T)/2;return Va(Ro(O),v)+c+Va(xs(O),v)}function m_(c,h,v){c=It(c),h=ot(h);var T=h?ws(c):0;return h&&T<h?c+Va(h-T,v):c}function g_(c,h,v){c=It(c),h=ot(h);var T=h?ws(c):0;return h&&T<h?Va(h-T,v)+c:c}function y_(c,h,v){return v||h==null?h=0:h&&(h=+h),N0(It(c).replace(eh,""),h||0)}function v_(c,h,v){return(v?Hn(c,h,v):h===t)?h=1:h=ot(h),As(It(c),h)}function w_(){var c=arguments,h=It(c[0]);return c.length<3?h:h.replace(c[1],c[2])}var k_=Os(function(c,h,v){return c+(v?"_":"")+h.toLowerCase()});function x_(c,h,v){return v&&typeof v!="number"&&Hn(c,h,v)&&(h=v=t),v=v===t?M:v>>>0,v?(c=It(c),c&&(typeof h=="string"||h!=null&&!Yg(h))&&(h=sr(h),!h&&sl(c))?lo(yr(c),0,v):c.split(h,v)):[]}var S_=Os(function(c,h,v){return c+(v?" ":"")+ey(h)});function b_(c,h,v){return c=It(c),v=v==null?0:to(ot(v),0,c.length),h=sr(h),c.slice(v,v+h.length)==h}function __(c,h,v){var T=j.templateSettings;v&&Hn(c,h,v)&&(h=t),c=It(c),h=km({},h,T,Yh);var O=km({},h.imports,T.imports,Yh),$=Dn(O),J=Sa(O,$),Z,se,ve=0,we=h.interpolate||ju,be="__p += '",Ae=ba((h.escape||ju).source+"|"+we.source+"|"+(we===Xf?ps:ju).source+"|"+(h.evaluate||ju).source+"|$","g"),Le="//# sourceURL="+(vt.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++dg+"]")+`
`;c.replace(Ae,function(Ge,ht,gt,hi,br,di){return gt||(gt=hi),be+=c.slice(ve,di).replace(lg,x0),ht&&(Z=!0,be+=`' +
__e(`+ht+`) +
'`),br&&(se=!0,be+=`';
`+br+`;
__p += '`),gt&&(be+=`' +
((__t = (`+gt+`)) == null ? '' : __t) +
'`),ve=di+Ge.length,Ge}),be+=`';
`;var Je=vt.call(h,"variable")&&h.variable;if(!Je)be=`with (obj) {
`+be+`
}
`;else if(ig.test(Je))throw new Qe(u);be=(se?be.replace(mr,""):be).replace(Qf,"$1").replace(Yf,"$1;"),be="function("+(Je||"obj")+`) {
`+(Je?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Z?", __e = _.escape":"")+(se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+be+`return __p
}`;var lt=sw(function(){return yt($,Le+"return "+be).apply(t,J)});if(lt.source=be,Qg(lt))throw lt;return lt}function C_(c){return It(c).toLowerCase()}function E_(c){return It(c).toUpperCase()}function T_(c,h,v){if(c=It(c),c&&(v||h===t))return g0(c);if(!c||!(h=sr(h)))return c;var T=yr(c),O=yr(h),$=y0(T,O),J=xh(T,O)+1;return lo(T,$,J).join("")}function M_(c,h,v){if(c=It(c),c&&(v||h===t))return c.slice(0,oc(c)+1);if(!c||!(h=sr(h)))return c;var T=yr(c),O=xh(T,yr(h))+1;return lo(T,0,O).join("")}function N_(c,h,v){if(c=It(c),c&&(v||h===t))return c.replace(eh,"");if(!c||!(h=sr(h)))return c;var T=yr(c),O=y0(T,yr(h));return lo(T,O).join("")}function A_(c,h){var v=_,T=U;if(Xt(h)){var O="separator"in h?h.separator:O;v="length"in h?ot(h.length):v,T="omission"in h?sr(h.omission):T}c=It(c);var $=c.length;if(sl(c)){var J=yr(c);$=J.length}if(v>=$)return c;var Z=v-ws(T);if(Z<1)return T;var se=J?lo(J,0,Z).join(""):c.slice(0,Z);if(O===t)return se+T;if(J&&(Z+=se.length-Z),Yg(O)){if(c.slice(Z).search(O)){var ve,we=se;for(O.global||(O=ba(O.source,It(nh.exec(O))+"g")),O.lastIndex=0;ve=O.exec(we);)var be=ve.index;se=se.slice(0,be===t?Z:be)}}else if(c.indexOf(sr(O),Z)!=Z){var Ae=se.lastIndexOf(O);Ae>-1&&(se=se.slice(0,Ae))}return se+T}function I_(c){return c=It(c),c&&jp.test(c)?c.replace(hs,S0):c}var O_=Os(function(c,h,v){return c+(v?" ":"")+h.toUpperCase()}),ey=Kh("toUpperCase");function ow(c,h,v){return c=It(c),h=v?t:h,h===t?xg(c)?Cg(c):vg(c):c.match(h)||[]}var sw=it(function(c,h){try{return Un(c,t,h)}catch(v){return Qg(v)?v:new Qe(v)}}),P_=zi(function(c,h){return Tn(h,function(v){v=ai(v),Ni(c,v,Ce(c[v],c))}),c});function R_(c){var h=c==null?0:c.length,v=He();return c=h?Rt(c,function(T){if(typeof T[1]!="function")throw new Ar(l);return[v(T[0]),T[1]]}):[],it(function(T){for(var O=-1;++O<h;){var $=c[O];if(Un($[0],this,T))return Un($[1],this,T)}})}function D_(c){return z0(or(c,g))}function ty(c){return function(){return c}}function z_(c,h){return c==null||c!==c?h:c}var L_=Fc(),F_=Fc(!0);function $r(c){return c}function ny(c){return xl(typeof c=="function"?c:or(c,g))}function B_(c){return Tc(or(c,g))}function U_(c,h){return jt(c,or(h,g))}var W_=it(function(c,h){return function(v){return Dr(v,c,h)}}),j_=it(function(c,h){return function(v){return Dr(c,v,h)}});function ry(c,h,v){var T=Dn(h),O=wl(h,T);v==null&&!(Xt(h)&&(O.length||!T.length))&&(v=h,h=c,c=this,O=wl(h,Dn(h)));var $=!(Xt(v)&&"chain"in v)||!!v.chain,J=Us(c);return Tn(O,function(Z){var se=h[Z];c[Z]=se,J&&(c.prototype[Z]=function(){var ve=this.__chain__;if($||ve){var we=c(this.__wrapped__),be=we.__actions__=jn(this.__actions__);return be.push({func:se,args:arguments,thisArg:c}),we.__chain__=ve,we}return se.apply(c,Oo([this.value()],arguments))})}),c}function $_(){return Wt._===this&&(Wt._=C0),this}function iy(){}function H_(c){return c=ot(c),it(function(h){return Mc(h,c)})}var V_=Bc(Rt),q_=Bc(dh),K_=Bc(gh);function lw(c){return Pe(c)?vh(ai(c)):Ht(c)}function J_(c){return function(h){return c==null?t:no(c,h)}}var G_=Gh(),Q_=Gh(!0);function oy(){return[]}function sy(){return!1}function Y_(){return{}}function X_(){return""}function Z_(){return!0}function eC(c,h){if(c=ot(c),c<1||c>Y)return[];var v=M,T=Mn(c,M);h=He(h),c-=M;for(var O=kh(T,h);++v<c;)h(v);return O}function tC(c){return nt(c)?Rt(c,ai):fi(c)?[c]:jn(ld(It(c)))}function nC(c){var h=++ul;return It(c)+h}var rC=Ha(function(c,h){return c+h},0),iC=Sn("ceil"),oC=Ha(function(c,h){return c/h},1),sC=Sn("floor");function lC(c){return c&&c.length?Ts(c,$r,Wo):t}function aC(c,h){return c&&c.length?Ts(c,He(h,2),Wo):t}function uC(c){return p0(c,$r)}function cC(c,h){return p0(c,He(h,2))}function fC(c){return c&&c.length?Ts(c,$r,jo):t}function hC(c,h){return c&&c.length?Ts(c,He(h,2),jo):t}var dC=Ha(function(c,h){return c*h},1),pC=Sn("round"),mC=Ha(function(c,h){return c-h},0);function gC(c){return c&&c.length?wh(c,$r):0}function yC(c,h){return c&&c.length?wh(c,He(h,2)):0}return j.after=X,j.ary=fe,j.assign=E6,j.assignIn=X3,j.assignInWith=km,j.assignWith=T6,j.at=M6,j.before=Se,j.bind=Ce,j.bindAll=P_,j.bindKey=xe,j.castArray=Yb,j.chain=tf,j.chunk=Kc,j.compact=ad,j.concat=Br,j.cond=R_,j.conforms=D_,j.constant=ty,j.countBy=dm,j.create=N6,j.curry=Oe,j.curryRight=Re,j.debounce=De,j.defaults=A6,j.defaultsDeep=I6,j.defer=Yt,j.delay=ae,j.difference=mt,j.differenceBy=gn,j.differenceWith=rn,j.drop=Cn,j.dropRight=Sr,j.dropRightWhile=Ol,j.dropWhile=hn,j.fill=Za,j.filter=of,j.flatMap=kd,j.flatMapDeep=Vg,j.flatMapDepth=gm,j.flatten=Jc,j.flattenDeep=tu,j.flattenDepth=lr,j.flip=te,j.flow=L_,j.flowRight=F_,j.fromPairs=ud,j.functions=F6,j.functionsIn=B6,j.groupBy=xd,j.initial=Gc,j.intersection=cd,j.intersectionBy=Ko,j.intersectionWith=Qc,j.invert=W6,j.invertBy=j6,j.invokeMap=ym,j.iteratee=ny,j.keyBy=qg,j.keys=Dn,j.keysIn=jr,j.map=Bs,j.mapKeys=H6,j.mapValues=V6,j.matches=B_,j.matchesProperty=U_,j.memoize=ue,j.merge=q6,j.mergeWith=Z3,j.method=W_,j.methodOf=j_,j.mixin=ry,j.negate=Ee,j.nthArg=H_,j.omit=K6,j.omitBy=J6,j.once=ze,j.orderBy=Kg,j.over=V_,j.overArgs=We,j.overEvery=q_,j.overSome=K_,j.partial=Be,j.partialRight=Ke,j.partition=ou,j.pick=G6,j.pickBy=ew,j.property=lw,j.propertyOf=J_,j.pull=Yc,j.pullAll=ru,j.pullAllBy=qn,j.pullAllWith=Go,j.pullAt=ui,j.range=G_,j.rangeRight=Q_,j.rearg=yn,j.reject=s,j.remove=ar,j.rest=wt,j.reverse=Xc,j.sampleSize=d,j.set=Y6,j.setWith=X6,j.shuffle=y,j.slice=hd,j.sortBy=L,j.sortedUniq=md,j.sortedUniqBy=zs,j.split=x_,j.spread=Yo,j.tail=sm,j.take=lm,j.takeRight=gd,j.takeRightWhile=Zc,j.takeWhile=Dg,j.tap=jg,j.throttle=Gg,j.thru=ci,j.toArray=G3,j.toPairs=tw,j.toPairsIn=nw,j.toPath=tC,j.toPlainObject=Y3,j.transform=Z6,j.unary=Gb,j.union=zg,j.unionBy=am,j.unionWith=um,j.uniq=Ls,j.uniqBy=Lg,j.uniqWith=Pl,j.unset=e_,j.unzip=ef,j.unzipWith=Vt,j.update=t_,j.updateWith=n_,j.values=ff,j.valuesIn=r_,j.without=Fg,j.words=ow,j.wrap=Qb,j.xor=cm,j.xorBy=Bg,j.xorWith=Ug,j.zip=fm,j.zipObject=hm,j.zipObjectDeep=Wg,j.zipWith=Ur,j.entries=tw,j.entriesIn=nw,j.extend=X3,j.extendWith=km,ry(j,j),j.add=rC,j.attempt=sw,j.camelCase=l_,j.capitalize=rw,j.ceil=iC,j.clamp=i_,j.clone=Xb,j.cloneDeep=e6,j.cloneDeepWith=t6,j.cloneWith=Zb,j.conformsTo=n6,j.deburr=iw,j.defaultTo=z_,j.divide=oC,j.endsWith=a_,j.eq=fo,j.escape=u_,j.escapeRegExp=c_,j.every=pm,j.find=sf,j.findIndex=qo,j.findKey=O6,j.findLast=mm,j.findLastIndex=eu,j.findLastKey=P6,j.floor=sC,j.forEach=lf,j.forEachRight=iu,j.forIn=R6,j.forInRight=D6,j.forOwn=z6,j.forOwnRight=L6,j.get=Xg,j.gt=r6,j.gte=i6,j.has=U6,j.hasIn=Zg,j.head=Rs,j.identity=$r,j.includes=af,j.indexOf=co,j.inRange=o_,j.invoke=$6,j.isArguments=su,j.isArray=nt,j.isArrayBuffer=o6,j.isArrayLike=Wr,j.isArrayLikeObject=dn,j.isBoolean=s6,j.isBuffer=Rl,j.isDate=l6,j.isElement=a6,j.isEmpty=u6,j.isEqual=c6,j.isEqualWith=f6,j.isError=Qg,j.isFinite=h6,j.isFunction=Us,j.isInteger=V3,j.isLength=vm,j.isMap=q3,j.isMatch=d6,j.isMatchWith=p6,j.isNaN=m6,j.isNative=g6,j.isNil=v6,j.isNull=y6,j.isNumber=K3,j.isObject=Xt,j.isObjectLike=on,j.isPlainObject=Sd,j.isRegExp=Yg,j.isSafeInteger=w6,j.isSet=J3,j.isString=wm,j.isSymbol=fi,j.isTypedArray=cf,j.isUndefined=k6,j.isWeakMap=x6,j.isWeakSet=S6,j.join=Jo,j.kebabCase=f_,j.last=Vn,j.lastIndexOf=nu,j.lowerCase=h_,j.lowerFirst=d_,j.lt=b6,j.lte=_6,j.max=lC,j.maxBy=aC,j.mean=uC,j.meanBy=cC,j.min=fC,j.minBy=hC,j.stubArray=oy,j.stubFalse=sy,j.stubObject=Y_,j.stubString=X_,j.stubTrue=Z_,j.multiply=dC,j.nth=fd,j.noConflict=$_,j.noop=iy,j.now=K,j.pad=p_,j.padEnd=m_,j.padStart=g_,j.parseInt=y_,j.random=s_,j.reduce=Jg,j.reduceRight=uf,j.repeat=v_,j.replace=w_,j.result=Q6,j.round=pC,j.runInContext=ie,j.sample=a,j.size=S,j.snakeCase=k_,j.some=E,j.sortedIndex=dd,j.sortedIndexBy=Rg,j.sortedIndexOf=Qo,j.sortedLastIndex=om,j.sortedLastIndexBy=pd,j.sortedLastIndexOf=Ds,j.startCase=S_,j.startsWith=b_,j.subtract=mC,j.sum=gC,j.sumBy=yC,j.template=__,j.times=eC,j.toFinite=Ws,j.toInteger=ot,j.toLength=Q3,j.toLower=C_,j.toNumber=Fi,j.toSafeInteger=C6,j.toString=It,j.toUpper=E_,j.trim=T_,j.trimEnd=M_,j.trimStart=N_,j.truncate=A_,j.unescape=I_,j.uniqueId=nC,j.upperCase=O_,j.upperFirst=ey,j.each=lf,j.eachRight=iu,j.first=Rs,ry(j,function(){var c={};return kr(j,function(h,v){vt.call(j.prototype,v)||(c[v]=h)}),c}(),{chain:!1}),j.VERSION=r,Tn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){j[c].placeholder=j}),Tn(["drop","take"],function(c,h){tt.prototype[c]=function(v){v=v===t?1:nn(ot(v),0);var T=this.__filtered__&&!h?new tt(this):this.clone();return T.__filtered__?T.__takeCount__=Mn(v,T.__takeCount__):T.__views__.push({size:Mn(v,M),type:c+(T.__dir__<0?"Right":"")}),T},tt.prototype[c+"Right"]=function(v){return this.reverse()[c](v).reverse()}}),Tn(["filter","map","takeWhile"],function(c,h){var v=h+1,T=v==le||v==ye;tt.prototype[c]=function(O){var $=this.clone();return $.__iteratees__.push({iteratee:He(O,3),type:v}),$.__filtered__=$.__filtered__||T,$}}),Tn(["head","last"],function(c,h){var v="take"+(h?"Right":"");tt.prototype[c]=function(){return this[v](1).value()[0]}}),Tn(["initial","tail"],function(c,h){var v="drop"+(h?"":"Right");tt.prototype[c]=function(){return this.__filtered__?new tt(this):this[v](1)}}),tt.prototype.compact=function(){return this.filter($r)},tt.prototype.find=function(c){return this.filter(c).head()},tt.prototype.findLast=function(c){return this.reverse().find(c)},tt.prototype.invokeMap=it(function(c,h){return typeof c=="function"?new tt(this):this.map(function(v){return Dr(v,c,h)})}),tt.prototype.reject=function(c){return this.filter(Ee(He(c)))},tt.prototype.slice=function(c,h){c=ot(c);var v=this;return v.__filtered__&&(c>0||h<0)?new tt(v):(c<0?v=v.takeRight(-c):c&&(v=v.drop(c)),h!==t&&(h=ot(h),v=h<0?v.dropRight(-h):v.take(h-c)),v)},tt.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},tt.prototype.toArray=function(){return this.take(M)},kr(tt.prototype,function(c,h){var v=/^(?:filter|find|map|reject)|While$/.test(h),T=/^(?:head|last)$/.test(h),O=j[T?"take"+(h=="last"?"Right":""):h],$=T||/^find/.test(h);O&&(j.prototype[h]=function(){var J=this.__wrapped__,Z=T?[1]:arguments,se=J instanceof tt,ve=Z[0],we=se||nt(J),be=function(ht){var gt=O.apply(j,Oo([ht],Z));return T&&Ae?gt[0]:gt};we&&v&&typeof ve=="function"&&ve.length!=1&&(se=we=!1);var Ae=this.__chain__,Le=!!this.__actions__.length,Je=$&&!Ae,lt=se&&!Le;if(!$&&we){J=lt?J:new tt(this);var Ge=c.apply(J,Z);return Ge.__actions__.push({func:ci,args:[be],thisArg:t}),new Nn(Ge,Ae)}return Je&&lt?c.apply(this,Z):(Ge=this.thru(be),Je?T?Ge.value()[0]:Ge.value():Ge)})}),Tn(["pop","push","shift","sort","splice","unshift"],function(c){var h=Yi[c],v=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",T=/^(?:pop|shift)$/.test(c);j.prototype[c]=function(){var O=arguments;if(T&&!this.__chain__){var $=this.value();return h.apply(nt($)?$:[],O)}return this[v](function(J){return h.apply(nt(J)?J:[],O)})}}),kr(tt.prototype,function(c,h){var v=j[h];if(v){var T=v.name+"";vt.call(dl,T)||(dl[T]=[]),dl[T].push({name:h,func:v})}}),dl[Ml(t,F).name]=[{name:"wrapper",func:t}],tt.prototype.clone=gc,tt.prototype.reverse=Mh,tt.prototype.value=gl,j.prototype.at=nf,j.prototype.chain=Fs,j.prototype.commit=rf,j.prototype.next=yd,j.prototype.plant=$g,j.prototype.reverse=wd,j.prototype.toJSON=j.prototype.valueOf=j.prototype.value=Hg,j.prototype.first=j.prototype.head,Zi&&(j.prototype[Zi]=vd),j},ll=Eg();bi?((bi.exports=ll)._=ll,xa._=ll):Wt._=ll}).call(r8)}(Td,Td.exports)),Td.exports}i8();var my={exports:{}},Tw;function o8(){return Tw||(Tw=1,function(n,e){(function(t,r){n.exports=r()})(self,function(){return(()=>{var t={d:(f,p)=>{for(var m in p)t.o(p,m)&&!t.o(f,m)&&Object.defineProperty(f,m,{enumerable:!0,get:p[m]})},o:(f,p)=>Object.prototype.hasOwnProperty.call(f,p)},r={};function i(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function o(f,p){for(var m=0;m<p.length;m++){var g=p[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(f,g.key,g)}}t.d(r,{default:()=>u});var l=function(){function f(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i(this,f),this.rs=g,this.leaveOpen=!!w.leaveOpen&&w.leaveOpen,this.autoCloseAfter=w.autoCloseAfter?w.autoCloseAfter:1500,this.skipInitial=!!w.skipInitial&&w.skipInitial,this.logging=!!w.logging&&w.logging,w.hasOwnProperty("modalBackdrop")){if(typeof w.modalBackdrop!="boolean"&&w.modalBackdrop!=="onlySmallScreens")throw'options.modalBackdrop has to be true/false or "onlySmallScreens"';this.modalBackdrop=w.modalBackdrop}else this.modalBackdrop="onlySmallScreens";this.active=!1,this.online=!1,this.closed=!1,this.lastSynced=null,this.lastSyncedUpdateLoop=null}var p,m;return p=f,m=[{key:"log",value:function(){if(this.logging){for(var g,w=arguments.length,k=new Array(w),b=0;b<w;b++)k[b]=arguments[b];(g=console).debug.apply(g,["[RS-WIDGET] "].concat(k))}}},{key:"eventHandler",value:function(g,w){var k=this;switch(this.log("EVENT: ",g),g){case"ready":this.setState(this.state);break;case"sync-req-done":this.syncInProgress=!0,this.rsSyncButton.classList.add("rs-rotate"),setTimeout(function(){k.syncInProgress&&(k.rsConnectedLabel.textContent="Synchronizing")},1e3);break;case"sync-done":if(this.online&&!w.completed)return;this.syncInProgress=!1,this.rsSyncButton.classList.remove("rs-rotate"),this.updateLastSyncedStatus(),!this.closed&&this.shouldCloseWhenSyncDone&&setTimeout(this.close.bind(this),this.autoCloseAfter);break;case"disconnected":this.active=!1,this.setOnline(),this.setBackendClass(),this.open(),this.setInitialState();break;case"connected":this.active=!0,this.online=!0,this.rs.hasFeature("Sync")?(this.shouldCloseWhenSyncDone=!0,this.rs.on("sync-req-done",function(A){return k.eventHandler("sync-req-done",A)}),this.rs.on("sync-done",function(A){return k.eventHandler("sync-done",A)})):(this.rsSyncButton.classList.add("rs-hidden"),setTimeout(this.close.bind(this),this.autoCloseAfter));var b=this.rs.remote.userAddress;this.rsConnectedUser.innerHTML=b,this.setBackendClass(this.rs.backend),this.rsConnectedLabel.textContent="Connected",this.setState("connected");break;case"network-offline":this.setOffline();break;case"network-online":this.setOnline();break;case"error":this.setBackendClass(this.rs.backend),w.name==="DiscoveryError"?this.handleDiscoveryError(w):w.name==="SyncError"?this.handleSyncError(w):w.name==="Unauthorized"?this.handleUnauthorized(w):console.debug('Encountered unhandled error: "'.concat(w,'"'))}}},{key:"setState",value:function(g){if(g){this.log("Setting state ",g);var w=document.querySelector(".rs-box.rs-selected");w&&(w.classList.remove("rs-selected"),w.setAttribute("aria-hidden","true"));var k=document.querySelector(".rs-box.rs-box-"+g);k&&(k.classList.add("rs-selected"),k.setAttribute("aria-hidden","false"));var b=this.rsWidget.className.match(/rs-state-\S+/g)[0];this.rsWidget.classList.remove(b),this.rsWidget.classList.add("rs-state-".concat(g||this.state)),this.state=g}}},{key:"setInitialState",value:function(){this.skipInitial?this.showChooseOrSignIn():this.setState("initial")}},{key:"createHtmlTemplate",value:function(){var g=document.createElement("div");g.id="remotestorage-widget",g.innerHTML='<div class="remotestorage-widget-modal-backdrop"></div> <div class="rs-widget rs-state-initial"> <div class="rs-widget-icon"> <svg class="rs-main-logo" id="rs-main-logo-remotestorage" xmlns="http://www.w3.org/2000/svg" version="1.1" xml:space="preserve" width="0.739008in" height="0.853339in" style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd" viewBox="0 0 739 853" xmlns:xlink="http://www.w3.org/1999/xlink"> <g> <polygon class="rs-logo-shape" points="370,754 0,542 0,640 185,747 370,853 554,747 739,640 739,525 739,525 739,476 739,427 739,378 653,427 370,589 86,427 86,427 86,361 185,418 370,524 554,418 653,361 739,311 739,213 739,213 554,107 370,0 185,107 58,180 144,230 228,181 370,100 511,181 652,263 370,425 87,263 87,263 0,213 0,213 0,311 0,378 0,427 0,476 86,525 185,582 370,689 554,582 653,525 653,590 653,592 "/> </g> </svg> <svg class="rs-main-logo" id="rs-main-logo-dropbox" width="40" height="36" xml:space="preserve" stroke-miterlimit="1.4142" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 104 97" stroke-linejoin="round" version="1.1" clip-rule="evenodd"> <path d="m30.691 0l-30.691 20.039 21.221 16.994 30.946-19.108-21.476-17.925z" fill="#007ee5"/> <path d="m0 54.028l30.691 20.039 21.476-17.926-30.945-19.108-21.222 16.995z" fill="#007ee5"/> <path d="m52.167 56.142l21.477 17.926 30.696-20.039-21.227-16.995-30.946 19.108z" fill="#007ee5"/> <path d="m104.34 20.039l-30.696-20.039-21.477 17.925 30.946 19.108 21.227-16.994z" fill="#007ee5"/> <path d="m52.23 59.998l-21.538 17.873-9.218-6.018v6.747l30.756 18.443 30.756-18.443v-6.747l-9.216 6.018-21.54-17.873z" fill="#007ee5"/> </svg> <svg class="rs-main-logo" id="rs-main-logo-googledrive" width="40" height="40" version="1.1" stroke-miterlimit="1.4142" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" width="100%" stroke-linejoin="round" clip-rule="evenodd" viewBox="0 0 511 442" height="100%"> <path d="m166.23 0.10955l0.44-0.009998 0.04 0.49-0.56 0.02 0.08-0.5z" fill="#0ba25e"/> <path d="m164.52 3.3896c0.39-0.56 1.15-1.68 1.54-2.24l0.7-0.11c0.52 6.34 2.38 12.45 3.78 18.62 6.02 26.81 12.1 53.6 18.43 80.33 4.15 18.33 8.78 36.57 12.58 54.97 3.3 11.39 5.07 23.14 8.26 34.55 2.06 10.64 5.29 21.02 7.02 31.72-0.7 1.17-1.4 2.35-2.11 3.52-0.17 0.27-0.53 0.83-0.7 1.11l-0.26 0.45c-0.04 0.08-0.13 0.25-0.18 0.33-0.39 0.72-1.17 2.15-1.56 2.86-0.07 0.13-0.22 0.39-0.3 0.52l-0.71 1.26c-0.09 0.15-0.26 0.44-0.34 0.59l-0.83 1.45c-0.04 0.08-0.13 0.24-0.18 0.32l-1.03 1.8c-0.09 0.15-0.27 0.47-0.36 0.63-0.1 0.17-0.3 0.5-0.4 0.67l-1.01 1.74c-0.08 0.13-0.24 0.41-0.32 0.54l-0.62 1.05c-0.1 0.18-0.32 0.55-0.42 0.73-0.4 0.69-1.19 2.07-1.59 2.77-0.07 0.12-0.22 0.37-0.29 0.5l-0.63 1.05c-0.1 0.19-0.32 0.55-0.43 0.74-0.37 0.65-1.13 1.94-1.5 2.59-0.09 0.15-0.26 0.46-0.35 0.61l-0.75 1.35c-0.07 0.12-0.21 0.37-0.28 0.49l-0.77 1.35-0.32 0.56c-0.4 0.66-1.18 1.99-1.57 2.66-0.09 0.15-0.27 0.46-0.36 0.62l-0.71 1.28c-0.07 0.12-0.2 0.35-0.26 0.47l-0.82 1.42c-0.07 0.13-0.22 0.38-0.29 0.5-0.42 0.72-1.25 2.15-1.67 2.87-0.07 0.13-0.23 0.39-0.31 0.52l-0.6 0.99c-0.1 0.18-0.31 0.53-0.41 0.71-0.38 0.66-1.13 1.97-1.51 2.63-0.06 0.11-0.2 0.35-0.26 0.46l-0.82 1.46c-0.06 0.11-0.18 0.32-0.24 0.43l-0.84 1.47c-0.07 0.11-0.21 0.35-0.28 0.46-0.39 0.66-1.18 1.96-1.57 2.62-0.11 0.17-0.31 0.53-0.42 0.71l-0.59 1.1c-0.08 0.14-0.23 0.42-0.3 0.55l-1.03 1.78c-0.08 0.15-0.26 0.45-0.34 0.6-0.09 0.14-0.25 0.43-0.33 0.57-1.69 2.85-3.22 5.79-5.09 8.53-10.65 17.37-20.45 35.28-30.76 52.86-16.74 28.97-33.46 57.94-50.2 86.91-2.51 4.51-5.37 8.83-7.53 13.54-0.11 0.16-0.33 0.48-0.44 0.64-4.01-5.78-7.11-12.16-10.78-18.16-16.74-28.99-33.49-57.97-50.22-86.97-9.3-16.31-18.99-32.42-28.04-48.88 35.84-61.85 71.52-123.81 107.29-185.7 0.03-0.06 0.1-0.17 0.13-0.23l0.98-1.68c0.04-0.07 0.12-0.21 0.17-0.28l0.99-1.69c0.09-0.15 0.27-0.47 0.37-0.62 0.1-0.18 0.3-0.53 0.4-0.71l0.99-1.76 0.28-0.48 0.74-1.18c0.13-0.19 0.39-0.58 0.52-0.78 0.36-0.54 1.09-1.63 1.46-2.17 0.04-0.18 0.11-0.53 0.15-0.7l0.87-1.67 0.16-0.28 1-1.68c0.1-0.16 0.3-0.5 0.4-0.67 0.11-0.19 0.33-0.58 0.45-0.78l0.84-1.47c0.09-0.16 0.27-0.47 0.36-0.62l0.7-1.23c0.08-0.13 0.24-0.41 0.32-0.55 0.39-0.67 1.17-2.01 1.57-2.68l0.32-0.56 0.73-1.33c0.06-0.1 0.18-0.32 0.24-0.42l0.96-1.68c0.12-0.2 0.37-0.61 0.5-0.81l0.65-0.98c0.14-0.2 0.41-0.59 0.55-0.78 0.12-0.2 0.37-0.6 0.5-0.8l0.54-1.04c0.18-0.39 0.55-1.17 0.73-1.56l0.55-0.77c0.1-0.14 0.29-0.41 0.39-0.55 0.37-0.31 1.12-0.95 1.49-1.27l-0.07-1.17c0.06-0.14 0.2-0.42 0.27-0.56l0.85-1.69c0.07-0.12 0.21-0.37 0.28-0.49l0.75-1.22c0.14-0.2 0.41-0.6 0.55-0.8 0.34-0.56 1.03-1.66 1.37-2.21 0.1-0.2 0.28-0.59 0.38-0.79l0.53-1.15c0.16-0.3 0.5-0.91 0.67-1.22l0.66-0.94c0.14-0.19 0.42-0.57 0.56-0.76 0.12-0.2 0.37-0.6 0.49-0.8l0.49-1.03c0.11-0.23 0.34-0.7 0.45-0.93l0.86-1.66c0.13-0.2 0.38-0.62 0.5-0.83l0.66-0.98c0.14-0.2 0.42-0.58 0.56-0.78 0.13-0.2 0.38-0.61 0.5-0.81l0.51-1.04c0.15-0.29 0.44-0.86 0.58-1.15l0.68-1.12c0.12-0.19 0.36-0.57 0.49-0.76 0.36-0.56 1.09-1.68 1.46-2.23 0.04-0.17 0.13-0.51 0.17-0.68l0.87-1.66c0.03-0.07 0.11-0.2 0.15-0.27l1-1.71c0.1-0.17 0.29-0.5 0.39-0.67 0.1-0.16 0.29-0.5 0.39-0.66l1-1.75c0.04-0.07 0.12-0.21 0.16-0.29l0.94-1.63c0.05-0.07 0.14-0.22 0.18-0.3l1.01-1.7c0.09-0.16 0.27-0.46 0.36-0.62 0.1-0.17 0.3-0.52 0.4-0.7l0.96-1.69c0.06-0.11 0.18-0.32 0.24-0.42l0.81-1.31c0.13-0.19 0.39-0.58 0.51-0.77 0.37-0.55 1.09-1.65 1.46-2.2 0.03-0.17 0.11-0.51 0.15-0.68l0.85-1.63c0.07-0.12 0.22-0.37 0.29-0.5l0.76-1.19c0.14-0.19 0.4-0.58 0.54-0.78 0.35-0.56 1.05-1.67 1.4-2.23 0.05-0.16 0.14-0.48 0.19-0.64l0.88-1.65c0.04-0.08 0.12-0.22 0.16-0.3l1.02-1.7204c0.08-0.15 0.26-0.45 0.35-0.6 0.09-0.17 0.27-0.49 0.36-0.65l1-1.78c0.05-0.07 0.13-0.22 0.17-0.29l0.95-1.61c0.03-0.05 0.1-0.16 0.13-0.21z" fill="#0ba25e"/> <path id="#fccd48ff" fill="#fccd48" d="m166.67 0.099552c32.48-0.15 64.97-0.02 97.46-0.07 26.88 0.099998 53.78-0.21 80.65 0.15 0.53 1.02 1.07 2.03 1.64 3.04 0.08 0.13 0.23 0.41 0.31 0.55 2.6 4.53 5.24 9.0404 7.81 13.58 0.05 0.08 0.13 0.23 0.18 0.3 4.98 8.55 9.94 17.11 14.83 25.71 0.04 0.07 0.13 0.21 0.17 0.29 0.89 1.53 1.81 3.06 2.72 4.6 0.08 0.13 0.23 0.4 0.31 0.54 1.25 2.2 2.51 4.39 3.78 6.58 0.05 0.07 0.13 0.21 0.17 0.29 1.27 2.18 2.52 4.38 3.78 6.58 0.08 0.13 0.23 0.39 0.31 0.52 1.27 2.14 2.5 4.3 3.72 6.46 0.08 0.13 0.23 0.4 0.31 0.53 11.94 20.62 23.85 41.25 35.75 61.9-1.36 5.99 1.93 11.95 0.1 17.97-1.11 16.45-7.32 32.46-17.56 45.38-3.33 3.61-0.1 8.62-0.46 12.9-3.59 4.35-8.21 7.6-12.57 11.11 0.01 3.28 0.02 6.56-0.13 9.85-3.89 2.57-8.35 4.06-12.3 6.54-0.42 1.33-0.85 2.67-1.26 4.02-3.17 1.5-6.56 2.47-9.73 3.99-12.55-3.6-24.97-7.61-37.49-11.32-11.65-3.85-23.58-6.87-35.11-11.11l-0.66-1.18c-0.06-0.09-0.16-0.27-0.21-0.36l-0.95-1.61-0.4-0.68c-0.09-0.15-0.25-0.44-0.34-0.59-0.71-1.26-1.36-2.55-1.94-3.87l-0.06-0.13-0.07-0.1c-0.44-0.7-1.33-2.11-1.78-2.81-0.05-0.08-0.15-0.24-0.2-0.33l-0.29-0.46c-0.17-0.29-0.52-0.86-0.69-1.15-0.43-0.73-1.3-2.19-1.73-2.92-0.11-0.18-0.32-0.55-0.43-0.73l-0.61-1.04c-0.08-0.14-0.24-0.41-0.32-0.55l-0.97-1.67c-0.04-0.07-0.13-0.21-0.17-0.29l-1.02-1.75c-0.09-0.16-0.27-0.48-0.36-0.63-0.1-0.18-0.31-0.55-0.41-0.73l-0.83-1.46c-0.1-0.17-0.3-0.53-0.4-0.7l-0.64-1.13c-0.09-0.15-0.26-0.45-0.35-0.6-0.39-0.72-1.18-2.15-1.58-2.87-0.04-0.08-0.14-0.25-0.18-0.33l-0.27-0.47c-0.19-0.28-0.56-0.84-0.75-1.12-0.99-1.66-1.92-3.36-2.81-5.07-0.05-0.08-0.14-0.25-0.18-0.33l-0.26-0.46c-0.19-0.27-0.57-0.81-0.76-1.07-0.44-0.79-1.32-2.37-1.76-3.16-0.05-0.08-0.15-0.25-0.19-0.34l-0.27-0.48c-0.2-0.33-0.59-0.98-0.79-1.31l-0.86-1.45c-0.08-0.14-0.25-0.42-0.34-0.57-0.38-0.66-1.15-1.99-1.54-2.65-0.09-0.15-0.26-0.46-0.35-0.62-0.68-1.13-1.33-2.27-1.97-3.41-0.05-0.09-0.16-0.27-0.21-0.36l-0.95-1.63c-0.1-0.16-0.29-0.48-0.38-0.65-0.09-0.15-0.26-0.45-0.35-0.6l-1.01-1.76c-0.05-0.08-0.14-0.25-0.19-0.33l-0.82-1.47c-0.07-0.12-0.2-0.35-0.27-0.47-0.38-0.67-1.15-2-1.53-2.67-0.08-0.14-0.24-0.41-0.32-0.54-0.62-1.03-1.24-2.07-1.84-3.1-27.73-48.12-55.5-96.21-83.29-144.3-1.74-3.0004-3.32-6.1204-5.45-8.8804l-0.05-0.45005-0.04-0.49z"/> <path d="m166.15 0.60955l0.56-0.02 0.05 0.45005-0.7 0.11 0.09-0.54005z" fill="#089156"/> <path d="m166.76 1.0396c2.13 2.76 3.71 5.88 5.45 8.88 27.79 48.09 55.56 96.18 83.29 144.3-12.84 22.36-25.78 44.67-38.67 67.01-1.73-10.7-4.96-21.08-7.02-31.72-3.19-11.41-4.96-23.16-8.26-34.55-3.8-18.4-8.43-36.64-12.58-54.97-6.33-26.73-12.41-53.52-18.43-80.33-1.4-6.17-3.26-12.28-3.78-18.62z" fill="#089156"/> <path d="m164.39 3.5996c0.03-0.05 0.1-0.16 0.13-0.21-0.03 0.05-0.1 0.16-0.13 0.21z" fill="#089156"/> <path d="m163.27 5.4996c0.05-0.07 0.13-0.22 0.17-0.29-0.04 0.07-0.12 0.22-0.17 0.29z" fill="#089156"/> <path d="m161.91 7.9296c0.09-0.17 0.27-0.49 0.36-0.65-0.09 0.16-0.27 0.48-0.36 0.65z" fill="#089156"/> <path d="m161.56 8.5296c0.08-0.15 0.26-0.45 0.35-0.6-0.09 0.15-0.27 0.45-0.35 0.6z" fill="#089156"/> <path d="m160.38 10.55c0.04-0.08 0.12-0.22 0.16-0.3-0.04 0.08-0.12 0.22-0.16 0.3z" fill="#089156"/> <path d="m159.31 12.84c0.05-0.16 0.14-0.48 0.19-0.64-0.05 0.16-0.14 0.48-0.19 0.64z" fill="#089156"/> <path d="m157.91 15.07c0.35-0.56 1.05-1.67 1.4-2.23-0.35 0.56-1.05 1.67-1.4 2.23z" fill="#089156"/> <path d="m157.37 15.85c0.14-0.19 0.4-0.58 0.54-0.78-0.14 0.2-0.4 0.59-0.54 0.78z" fill="#089156"/> <path d="m156.32 17.54c0.07-0.12 0.22-0.37 0.29-0.5-0.07 0.13-0.22 0.38-0.29 0.5z" fill="#089156"/> <path d="m155.32 19.85c0.03-0.17 0.11-0.51 0.15-0.68-0.04 0.17-0.12 0.51-0.15 0.68z" fill="#089156"/> <path d="m153.86 22.05c0.37-0.55 1.09-1.65 1.46-2.2-0.37 0.55-1.09 1.65-1.46 2.2z" fill="#089156"/> <path d="m153.35 22.82c0.13-0.19 0.39-0.58 0.51-0.77-0.12 0.19-0.38 0.58-0.51 0.77z" fill="#089156"/> <path d="m152.3 24.55c0.06-0.11 0.18-0.32 0.24-0.42-0.06 0.1-0.18 0.31-0.24 0.42z" fill="#089156"/> <path d="m150.94 26.94c0.1-0.17 0.3-0.52 0.4-0.7-0.1 0.18-0.3 0.53-0.4 0.7z" fill="#089156"/> <path d="m150.58 27.56c0.09-0.16 0.27-0.46 0.36-0.62-0.09 0.16-0.27 0.46-0.36 0.62z" fill="#089156"/> <path d="m149.39 29.56c0.05-0.07 0.14-0.22 0.18-0.3-0.04 0.08-0.13 0.23-0.18 0.3z" fill="#089156"/> <path d="m148.29 31.48c0.04-0.07 0.12-0.21 0.16-0.29-0.04 0.08-0.12 0.22-0.16 0.29z" fill="#089156"/> <path d="m146.9 33.89c0.1-0.16 0.29-0.5 0.39-0.66-0.1 0.16-0.29 0.5-0.39 0.66z" fill="#089156"/> <path d="m146.51 34.56c0.1-0.17 0.29-0.5 0.39-0.67-0.1 0.17-0.29 0.5-0.39 0.67z" fill="#089156"/> <path d="m145.36 36.54c0.03-0.07 0.11-0.2 0.15-0.27-0.04 0.07-0.12 0.2-0.15 0.27z" fill="#089156"/> <path d="m144.32 38.88c0.04-0.17 0.13-0.51 0.17-0.68-0.04 0.17-0.13 0.51-0.17 0.68z" fill="#089156"/> <path d="m142.86 41.11c0.36-0.56 1.09-1.68 1.46-2.23-0.37 0.55-1.1 1.67-1.46 2.23z" fill="#089156"/> <path d="m142.37 41.87c0.12-0.19 0.36-0.57 0.49-0.76-0.13 0.19-0.37 0.57-0.49 0.76z" fill="#089156"/> <path d="m141.11 44.14c0.15-0.29 0.44-0.86 0.58-1.15-0.14 0.29-0.43 0.86-0.58 1.15z" fill="#089156"/> <path d="m140.1 45.99c0.13-0.2 0.38-0.61 0.5-0.81-0.12 0.2-0.37 0.61-0.5 0.81z" fill="#089156"/> <path d="m139.54 46.77c0.14-0.2 0.42-0.58 0.56-0.78-0.14 0.2-0.42 0.58-0.56 0.78z" fill="#089156"/> <path d="m138.38 48.58c0.13-0.2 0.38-0.62 0.5-0.83-0.12 0.21-0.37 0.63-0.5 0.83z" fill="#089156"/> <path d="m137.07 51.17c0.11-0.23 0.34-0.7 0.45-0.93-0.11 0.23-0.34 0.7-0.45 0.93z" fill="#089156"/> <path d="m136.09 53c0.12-0.2 0.37-0.6 0.49-0.8-0.12 0.2-0.37 0.6-0.49 0.8z" fill="#089156"/> <path d="m135.53 53.76c0.14-0.19 0.42-0.57 0.56-0.76-0.14 0.19-0.42 0.57-0.56 0.76z" fill="#089156"/> <path d="m134.2 55.92c0.16-0.3 0.5-0.91 0.67-1.22-0.17 0.31-0.51 0.92-0.67 1.22z" fill="#089156"/> <path d="m133.29 57.86c0.1-0.2 0.28-0.59 0.38-0.79-0.1 0.2-0.28 0.59-0.38 0.79z" fill="#089156"/> <path d="m131.92 60.07c0.34-0.56 1.03-1.66 1.37-2.21-0.34 0.55-1.03 1.65-1.37 2.21z" fill="#089156"/> <path d="m131.37 60.87c0.14-0.2 0.41-0.6 0.55-0.8-0.14 0.2-0.41 0.6-0.55 0.8z" fill="#089156"/> <path d="m130.34 62.58c0.07-0.12 0.21-0.37 0.28-0.49-0.07 0.12-0.21 0.37-0.28 0.49z" fill="#089156"/> <path d="m129.22 64.83c0.06-0.14 0.2-0.42 0.27-0.56-0.07 0.14-0.21 0.42-0.27 0.56z" fill="#089156"/> <path d="m127.8 67.27c0.35-0.61 1.06-1.83 1.42-2.44l0.07 1.17c-0.37 0.32-1.12 0.96-1.49 1.27z" fill="#089156"/> <path d="m127.41 67.82c0.1-0.14 0.29-0.41 0.39-0.55-0.1 0.14-0.29 0.41-0.39 0.55z" fill="#089156"/> <path d="m126.13 70.15c0.18-0.39 0.55-1.17 0.73-1.56-0.18 0.39-0.55 1.17-0.73 1.56z" fill="#089156"/> <path d="m125.09 71.99c0.12-0.2 0.37-0.6 0.5-0.8-0.13 0.2-0.38 0.6-0.5 0.8z" fill="#089156"/> <path d="m124.54 72.77c0.14-0.2 0.41-0.59 0.55-0.78-0.14 0.19-0.41 0.58-0.55 0.78z" fill="#089156"/> <path d="m123.39 74.56c0.12-0.2 0.37-0.61 0.5-0.81-0.13 0.2-0.38 0.61-0.5 0.81z" fill="#089156"/> <path d="m122.19 76.66c0.06-0.1 0.18-0.32 0.24-0.42-0.06 0.1-0.18 0.32-0.24 0.42z" fill="#089156"/> <path d="m121.14 78.55l0.32-0.56-0.32 0.56z" fill="#089156"/> <path d="m119.25 81.78c0.08-0.13 0.24-0.41 0.32-0.55-0.08 0.14-0.24 0.42-0.32 0.55z" fill="#089156"/> <path d="m118.19 83.63c0.09-0.16 0.27-0.47 0.36-0.62-0.09 0.15-0.27 0.46-0.36 0.62z" fill="#089156"/> <path d="m116.9 85.88c0.11-0.19 0.33-0.58 0.45-0.78-0.12 0.2-0.34 0.59-0.45 0.78z" fill="#089156"/> <path d="m116.5 86.55c0.1-0.16 0.3-0.5 0.4-0.67-0.1 0.17-0.3 0.51-0.4 0.67z" fill="#089156"/> <path d="m115.34 88.51l0.16-0.28-0.16 0.28z" fill="#089156"/> <path d="m114.32 90.88c0.04-0.18 0.11-0.53 0.15-0.7-0.04 0.17-0.11 0.52-0.15 0.7z" fill="#089156"/> <path d="m112.86 93.05c0.36-0.54 1.09-1.63 1.46-2.17-0.37 0.54-1.1 1.63-1.46 2.17z" fill="#089156"/> <path d="m112.34 93.83c0.13-0.19 0.39-0.58 0.52-0.78-0.13 0.2-0.39 0.59-0.52 0.78z" fill="#089156"/> <path d="m111.32 95.49l0.28-0.48-0.28 0.48z" fill="#089156"/> <path d="m109.93 97.96c0.1-0.18 0.3-0.53 0.4-0.71-0.1 0.18-0.3 0.53-0.4 0.71z" fill="#089156"/> <path d="m109.56 98.58c0.09-0.15 0.27-0.47 0.37-0.62-0.1 0.15-0.28 0.47-0.37 0.62z" fill="#089156"/> <path d="m108.4 100.55c0.04-0.07 0.12-0.21 0.17-0.28-0.05 0.07-0.13 0.21-0.17 0.28z" fill="#089156"/> <path d="m107.29 102.46c0.03-0.06 0.1-0.17 0.13-0.23-0.03 0.06-0.1 0.17-0.13 0.23z" fill="#089156"/> <path d="m214.02 225.86c0.17-0.28 0.53-0.84 0.7-1.11-0.17 0.27-0.53 0.83-0.7 1.11z" fill="#089156"/> <path d="m213.58 226.64c0.05-0.08 0.14-0.25 0.18-0.33-0.04 0.08-0.13 0.25-0.18 0.33z" fill="#089156"/> <path d="m211.72 230.02c0.08-0.13 0.23-0.39 0.3-0.52-0.07 0.13-0.22 0.39-0.3 0.52z" fill="#089156"/> <path d="m210.67 231.87c0.08-0.15 0.25-0.44 0.34-0.59-0.09 0.15-0.26 0.44-0.34 0.59z" fill="#089156"/> <path d="m209.66 233.64c0.05-0.08 0.14-0.24 0.18-0.32-0.04 0.08-0.13 0.24-0.18 0.32z" fill="#089156"/> <path d="m208.27 236.07c0.09-0.16 0.27-0.48 0.36-0.63-0.09 0.15-0.27 0.47-0.36 0.63z" fill="#089156"/> <path d="m207.87 236.74c0.1-0.17 0.3-0.5 0.4-0.67-0.1 0.17-0.3 0.5-0.4 0.67z" fill="#089156"/> <path d="m206.54 239.02c0.08-0.13 0.24-0.41 0.32-0.54-0.08 0.13-0.24 0.41-0.32 0.54z" fill="#089156"/> <path d="m205.5 240.8c0.1-0.18 0.32-0.55 0.42-0.73-0.1 0.18-0.32 0.55-0.42 0.73z" fill="#089156"/> <path d="m203.62 244.07c0.07-0.13 0.22-0.38 0.29-0.5-0.07 0.12-0.22 0.37-0.29 0.5z" fill="#089156"/> <path d="m202.56 245.86c0.11-0.19 0.33-0.55 0.43-0.74-0.1 0.19-0.32 0.55-0.43 0.74z" fill="#089156"/> <path d="m200.71 249.06c0.09-0.15 0.26-0.46 0.35-0.61-0.09 0.15-0.26 0.46-0.35 0.61z" fill="#089156"/> <path d="m199.68 250.9c0.07-0.12 0.21-0.37 0.28-0.49-0.07 0.12-0.21 0.37-0.28 0.49z" fill="#089156"/> <path d="m198.59 252.81l0.32-0.56-0.32 0.56z" fill="#089156"/> <path d="m196.66 256.09c0.09-0.16 0.27-0.47 0.36-0.62-0.09 0.15-0.27 0.46-0.36 0.62z" fill="#089156"/> <path d="m195.69 257.84c0.06-0.12 0.19-0.35 0.26-0.47-0.07 0.12-0.2 0.35-0.26 0.47z" fill="#089156"/> <path d="m194.58 259.76c0.07-0.12 0.22-0.37 0.29-0.5-0.07 0.13-0.22 0.38-0.29 0.5z" fill="#089156"/> <path d="m192.6 263.15c0.08-0.13 0.24-0.39 0.31-0.52-0.07 0.13-0.23 0.39-0.31 0.52z" fill="#089156"/> <path d="m191.59 264.85c0.1-0.18 0.31-0.53 0.41-0.71-0.1 0.18-0.31 0.53-0.41 0.71z" fill="#089156"/> <path d="m189.82 267.94c0.06-0.11 0.2-0.35 0.26-0.46-0.06 0.11-0.2 0.35-0.26 0.46z" fill="#089156"/> <path d="m188.76 269.83c0.06-0.11 0.18-0.32 0.24-0.43-0.06 0.11-0.18 0.32-0.24 0.43z" fill="#089156"/> <path d="m187.64 271.76c0.07-0.11 0.21-0.35 0.28-0.46-0.07 0.11-0.21 0.35-0.28 0.46z" fill="#089156"/> <path d="m185.65 275.09c0.11-0.18 0.31-0.54 0.42-0.71-0.11 0.17-0.31 0.53-0.42 0.71z" fill="#089156"/> <path d="m184.76 276.74c0.07-0.13 0.22-0.41 0.3-0.55-0.08 0.14-0.23 0.42-0.3 0.55z" fill="#089156"/> <path d="m183.39 279.12c0.08-0.15 0.26-0.45 0.34-0.6-0.08 0.15-0.26 0.45-0.34 0.6z" fill="#089156"/> <path d="m183.06 279.69c0.08-0.14 0.24-0.43 0.33-0.57-0.09 0.14-0.25 0.43-0.33 0.57z" fill="#089156"/> <path d="m346.42 3.2196c0.08 0.13 0.23 0.41 0.31 0.55-0.08-0.14-0.23-0.42-0.31-0.55z" fill="#10985b"/> <path d="m354.54 17.35c0.05 0.08 0.13 0.23 0.18 0.3-0.05-0.07-0.13-0.22-0.18-0.3z" fill="#10985b"/> <path d="m369.55 43.36c0.04 0.07 0.13 0.21 0.17 0.29-0.04-0.08-0.13-0.22-0.17-0.29z" fill="#10985b"/> <path d="m372.44 48.25c0.08 0.13 0.23 0.4 0.31 0.54-0.08-0.14-0.23-0.41-0.31-0.54z" fill="#10985b"/> <path d="m376.53 55.37c0.05 0.07 0.13 0.21 0.17 0.29-0.04-0.08-0.12-0.22-0.17-0.29z" fill="#10985b"/> <path d="m380.48 62.24c0.08 0.13 0.23 0.39 0.31 0.52-0.08-0.13-0.23-0.39-0.31-0.52z" fill="#10985b"/> <path d="m384.51 69.22c0.08 0.13 0.23 0.4 0.31 0.53-0.08-0.13-0.23-0.4-0.31-0.53z" fill="#10985b"/> <path d="m420.57 131.65c17.39 30.13 34.89 60.21 52.14 90.43 0.08 0.13 0.24 0.41 0.32 0.54 0.4 0.66 1.2 1.97 1.59 2.62 0.08 0.13 0.24 0.4 0.32 0.53l0.8 1.37c0.05 0.09 0.15 0.28 0.21 0.37l1 1.74c0.1 0.17 0.29 0.52 0.39 0.69 0.09 0.15 0.27 0.46 0.36 0.62l0.98 1.7 0.16 0.28 0.98 1.68c0.04 0.07 0.12 0.2 0.16 0.27l0.98 1.7c0.1 0.17 0.29 0.5 0.39 0.67 0.09 0.17 0.28 0.5 0.37 0.66l1.01 1.78c0.14 0.35 0.42 1.03 0.56 1.37l0.28 0.55 0.13 0.29 0.22 0.29 0.59 0.89c0.21 0.33 0.62 0.99 0.83 1.32 0.12 0.2 0.38 0.6 0.5 0.8l0.66 1.05c0.2 0.45 0.6 1.36 0.8 1.81l0.3 0.54 0.11 0.21 0.09 0.13c0.44 0.65 1.31 1.96 1.75 2.61 0.11 0.18 0.33 0.54 0.45 0.72l0.6 1c0.09 0.16 0.27 0.47 0.36 0.62l1.01 1.77c0.09 0.16 0.27 0.48 0.36 0.64s0.27 0.47 0.36 0.63l1 1.71c0.04 0.08 0.13 0.23 0.18 0.3l0.91 1.6c0.06 0.1 0.18 0.31 0.24 0.41l0.92 1.61c0.11 0.18 0.32 0.55 0.43 0.73 0.09 0.16 0.28 0.48 0.37 0.64 0.74 1.23 1.45 2.48 2.11 3.76 0.1 0.21 0.3 0.63 0.39 0.84l0.46 1.04c0.12 0.2 0.36 0.61 0.47 0.81 0.15 0.2 0.44 0.58 0.59 0.77l0.69 0.98c0.12 0.19 0.36 0.57 0.49 0.77l1.01 1.75c0.09 0.16 0.27 0.48 0.36 0.64s0.27 0.47 0.37 0.63l1 1.72c0.04 0.08 0.12 0.22 0.16 0.29l0.95 1.66c0.04 0.07 0.12 0.2 0.16 0.27l0.97 1.69c0.1 0.17 0.3 0.51 0.4 0.69 0.1 0.17 0.3 0.51 0.39 0.68l1 1.72c0.04 0.07 0.11 0.21 0.15 0.28l1.06 1.98-0.01 0.9c-25.02-7.19-49.64-15.72-74.73-22.65-22.77-7.35-45.75-14.04-68.52-21.35 3.17-1.52 6.56-2.49 9.73-3.99 0.41-1.35 0.84-2.69 1.26-4.02 3.95-2.48 8.41-3.97 12.3-6.54 0.15-3.29 0.14-6.57 0.13-9.85 4.36-3.51 8.98-6.76 12.57-11.11 0.36-4.28-2.87-9.29 0.46-12.9 10.24-12.92 16.45-28.93 17.56-45.38 1.83-6.02-1.46-11.98-0.1-17.97z" fill="#f9c941"/> <path d="m509.91 287.41l0.52 0.02 0.29 0.76-0.59 0.04-0.22-0.82z" fill="#f9c941"/> <path d="m257.34 157.32c0.08 0.13 0.24 0.4 0.32 0.54-0.08-0.14-0.24-0.41-0.32-0.54z" fill="#e3b73a"/> <path d="m259.19 160.53c0.07 0.12 0.2 0.35 0.27 0.47-0.07-0.12-0.2-0.35-0.27-0.47z" fill="#e3b73a"/> <path d="m260.28 162.47c0.05 0.08 0.14 0.25 0.19 0.33-0.05-0.08-0.14-0.25-0.19-0.33z" fill="#e3b73a"/> <path d="m261.48 164.56c0.09 0.15 0.26 0.45 0.35 0.6-0.09-0.15-0.26-0.45-0.35-0.6z" fill="#e3b73a"/> <path d="m261.83 165.16c0.09 0.17 0.28 0.49 0.38 0.65-0.1-0.16-0.29-0.48-0.38-0.65z" fill="#e3b73a"/> <path d="m263.16 167.44c0.05 0.09 0.16 0.27 0.21 0.36-0.05-0.09-0.16-0.27-0.21-0.36z" fill="#e3b73a"/> <path d="m265.34 171.21c0.09 0.16 0.26 0.47 0.35 0.62-0.09-0.15-0.26-0.46-0.35-0.62z" fill="#e3b73a"/> <path d="m267.23 174.48c0.09 0.15 0.26 0.43 0.34 0.57-0.08-0.14-0.25-0.42-0.34-0.57z" fill="#e3b73a"/> <path d="m268.43 176.5c0.2 0.33 0.59 0.98 0.79 1.31-0.2-0.33-0.59-0.98-0.79-1.31z" fill="#e3b73a"/> <path d="m269.49 178.29c0.04 0.09 0.14 0.26 0.19 0.34-0.05-0.08-0.15-0.25-0.19-0.34z" fill="#e3b73a"/> <path d="m271.44 181.79c0.19 0.26 0.57 0.8 0.76 1.07-0.19-0.27-0.57-0.81-0.76-1.07z" fill="#e3b73a"/> <path d="m272.46 183.32c0.04 0.08 0.13 0.25 0.18 0.33-0.05-0.08-0.14-0.25-0.18-0.33z" fill="#e3b73a"/> <path d="m275.45 188.72c0.19 0.28 0.56 0.84 0.75 1.12-0.19-0.28-0.56-0.84-0.75-1.12z" fill="#e3b73a"/> <path d="m276.47 190.31c0.04 0.08 0.14 0.25 0.18 0.33-0.04-0.08-0.14-0.25-0.18-0.33z" fill="#e3b73a"/> <path d="m278.23 193.51c0.09 0.15 0.26 0.45 0.35 0.6-0.09-0.15-0.26-0.45-0.35-0.6z" fill="#e3b73a"/> <path d="m279.22 195.24c0.1 0.17 0.3 0.53 0.4 0.7-0.1-0.17-0.3-0.53-0.4-0.7z" fill="#e3b73a"/> <path d="m280.45 197.4c0.1 0.18 0.31 0.55 0.41 0.73-0.1-0.18-0.31-0.55-0.41-0.73z" fill="#e3b73a"/> <path d="m280.86 198.13c0.09 0.15 0.27 0.47 0.36 0.63-0.09-0.16-0.27-0.48-0.36-0.63z" fill="#e3b73a"/> <path d="m282.24 200.51c0.04 0.08 0.13 0.22 0.17 0.29-0.04-0.07-0.13-0.21-0.17-0.29z" fill="#e3b73a"/> <path d="m283.38 202.47c0.08 0.14 0.24 0.41 0.32 0.55-0.08-0.14-0.24-0.41-0.32-0.55z" fill="#e3b73a"/> <path d="m284.31 204.06c0.11 0.18 0.32 0.55 0.43 0.73-0.11-0.18-0.32-0.55-0.43-0.73z" fill="#e3b73a"/> <path d="m286.47 207.71c0.17 0.29 0.52 0.86 0.69 1.15-0.17-0.29-0.52-0.86-0.69-1.15z" fill="#e3b73a"/> <path d="m287.45 209.32c0.05 0.09 0.15 0.25 0.2 0.33-0.05-0.08-0.15-0.24-0.2-0.33z" fill="#e3b73a"/> <path d="m289.43 212.46l0.07 0.1 0.06 0.13c-0.03-0.06-0.1-0.17-0.13-0.23z" fill="#e3b73a"/> <path d="m291.5 216.56c0.09 0.15 0.25 0.44 0.34 0.59-0.09-0.15-0.25-0.44-0.34-0.59z" fill="#e3b73a"/> <path d="m291.84 217.15l0.4 0.68-0.4-0.68z" fill="#e3b73a"/> <path d="m293.19 219.44c0.05 0.09 0.15 0.27 0.21 0.36-0.06-0.09-0.16-0.27-0.21-0.36z" fill="#e3b73a"/> <path d="m294.06 220.98c11.53 4.24 23.46 7.26 35.11 11.11 12.52 3.71 24.94 7.72 37.49 11.32 22.77 7.31 45.75 14 68.52 21.35-0.34 4.87 0.62 9.86-0.59 14.64-0.93 4.65-6.49 5.38-8.78 9.09-30.77 0.01-61.53 0.1-92.29-0.03l-0.66-0.05c-12.71-22.6-25.93-44.92-38.8-67.43z" fill="#e3b73a"/> <path d="m472.71 222.08c0.08 0.13 0.24 0.41 0.32 0.54-0.08-0.13-0.24-0.41-0.32-0.54z" fill="#e8b835"/> <path d="m474.62 225.24c0.08 0.13 0.24 0.4 0.32 0.53-0.08-0.13-0.24-0.4-0.32-0.53z" fill="#e8b835"/> <path d="m475.74 227.14c0.05 0.09 0.15 0.28 0.21 0.37-0.06-0.09-0.16-0.28-0.21-0.37z" fill="#e8b835"/> <path d="m476.95 229.25c0.1 0.17 0.29 0.52 0.39 0.69-0.1-0.17-0.29-0.52-0.39-0.69z" fill="#e8b835"/> <path d="m477.34 229.94c0.09 0.15 0.27 0.46 0.36 0.62-0.09-0.16-0.27-0.47-0.36-0.62z" fill="#e8b835"/> <path d="m478.68 232.26l0.16 0.28-0.16-0.28z" fill="#e8b835"/> <path d="m479.82 234.22c0.04 0.07 0.12 0.2 0.16 0.27-0.04-0.07-0.12-0.2-0.16-0.27z" fill="#e8b835"/> <path d="m480.96 236.19c0.1 0.17 0.29 0.5 0.39 0.67-0.1-0.17-0.29-0.5-0.39-0.67z" fill="#e8b835"/> <path d="m481.35 236.86c0.09 0.17 0.28 0.5 0.37 0.66-0.09-0.16-0.28-0.49-0.37-0.66z" fill="#e8b835"/> <path d="m482.73 239.3c0.14 0.35 0.42 1.03 0.56 1.37-0.14-0.34-0.42-1.02-0.56-1.37z" fill="#e8b835"/> <path d="m483.57 241.22c0.09 0.15 0.26 0.44 0.35 0.58l-0.22-0.29-0.13-0.29z" fill="#e8b835"/> <path d="m484.51 242.69c0.21 0.33 0.62 0.99 0.83 1.32-0.21-0.33-0.62-0.99-0.83-1.32z" fill="#e8b835"/> <path d="m485.34 244.01c0.12 0.2 0.38 0.6 0.5 0.8-0.12-0.2-0.38-0.6-0.5-0.8z" fill="#e8b835"/> <path d="m486.5 245.86c0.2 0.45 0.6 1.36 0.8 1.81-0.2-0.45-0.6-1.36-0.8-1.81z" fill="#e8b835"/> <path d="m487.6 248.21c0.05 0.09 0.15 0.26 0.2 0.34l-0.09-0.13-0.11-0.21z" fill="#e8b835"/> <path d="m489.55 251.16c0.11 0.18 0.33 0.54 0.45 0.72-0.12-0.18-0.34-0.54-0.45-0.72z" fill="#e8b835"/> <path d="m490.6 252.88c0.09 0.16 0.27 0.47 0.36 0.62-0.09-0.15-0.27-0.46-0.36-0.62z" fill="#e8b835"/> <path d="m491.97 255.27c0.09 0.16 0.27 0.48 0.36 0.64-0.09-0.16-0.27-0.48-0.36-0.64z" fill="#e8b835"/> <path d="m492.33 255.91c0.09 0.16 0.27 0.47 0.36 0.63-0.09-0.16-0.27-0.47-0.36-0.63z" fill="#e8b835"/> <path d="m493.69 258.25c0.04 0.08 0.13 0.23 0.18 0.3-0.05-0.07-0.14-0.22-0.18-0.3z" fill="#e8b835"/> <path d="m494.78 260.15c0.06 0.1 0.18 0.31 0.24 0.41-0.06-0.1-0.18-0.31-0.24-0.41z" fill="#e8b835"/> <path d="m495.94 262.17c0.11 0.18 0.32 0.55 0.43 0.73-0.11-0.18-0.32-0.55-0.43-0.73z" fill="#e8b835"/> <path d="m496.37 262.9c0.09 0.16 0.28 0.48 0.37 0.64-0.09-0.16-0.28-0.48-0.37-0.64z" fill="#e8b835"/> <path d="m435.18 264.76c25.09 6.93 49.71 15.46 74.73 22.65l0.22 0.82c-28.09 0.64-56.22 0.11-84.32 0.26 2.29-3.71 7.85-4.44 8.78-9.09 1.21-4.78 0.25-9.77 0.59-14.64z" fill="#e8b835"/> <path d="m498.85 267.3c0.1 0.21 0.3 0.63 0.39 0.84-0.09-0.21-0.29-0.63-0.39-0.84z" fill="#e8b835"/> <path d="m499.7 269.18c0.12 0.2 0.36 0.61 0.47 0.81-0.11-0.2-0.35-0.61-0.47-0.81z" fill="#e8b835"/> <path d="m500.17 269.99c0.15 0.2 0.44 0.58 0.59 0.77-0.15-0.19-0.44-0.57-0.59-0.77z" fill="#e8b835"/> <path d="m501.45 271.74c0.12 0.19 0.36 0.57 0.49 0.77-0.13-0.2-0.37-0.58-0.49-0.77z" fill="#e8b835"/> <path d="m502.95 274.26c0.09 0.16 0.27 0.48 0.36 0.64-0.09-0.16-0.27-0.48-0.36-0.64z" fill="#e8b835"/> <path d="m503.31 274.9c0.09 0.16 0.27 0.47 0.37 0.63-0.1-0.16-0.28-0.47-0.37-0.63z" fill="#e8b835"/> <path d="m504.68 277.25c0.04 0.08 0.12 0.22 0.16 0.29-0.04-0.07-0.12-0.21-0.16-0.29z" fill="#e8b835"/> <path d="m505.79 279.2c0.04 0.07 0.12 0.2 0.16 0.27-0.04-0.07-0.12-0.2-0.16-0.27z" fill="#e8b835"/> <path d="m506.92 281.16c0.1 0.17 0.3 0.51 0.4 0.69-0.1-0.18-0.3-0.52-0.4-0.69z" fill="#e8b835"/> <path d="m507.32 281.85c0.1 0.17 0.3 0.51 0.39 0.68-0.09-0.17-0.29-0.51-0.39-0.68z" fill="#e8b835"/> <path d="m508.71 284.25c0.04 0.07 0.11 0.21 0.15 0.28-0.04-0.07-0.11-0.21-0.15-0.28z" fill="#e8b835"/> <path d="m509.92 286.51c0.13 0.23 0.38 0.69 0.51 0.92l-0.52-0.02 0.01-0.9z" fill="#e8b835"/> <path d="m147.21 341.08c10.31-17.58 20.11-35.49 30.76-52.86 51.63 0.19 103.27-0.29 154.89 0.19l0.66 0.05c-26.11 0.84-52.29-0.22-78.4 0.44-4.98 3.21-8.3 8.41-13.07 11.91-4.43 3.23-7.69 7.73-11.92 11.18-5.93 4.37-10.34 10.43-16.36 14.71-6.96 7.37-14.99 13.58-22.01 20.91-5.26 4.04-9.66 9.03-14.56 13.48-5.39 3.91-9.52 9.21-14.56 13.53-0.13 0.11-0.38 0.33-0.51 0.45-0.27 0.21-0.8 0.65-1.07 0.86-0.13 0.11-0.37 0.31-0.5 0.42-3.97 3.07-7.01 7.12-10.91 10.27-0.13 0.11-0.38 0.32-0.5 0.42-0.13 0.11-0.38 0.32-0.51 0.42-5.69 4.67-10.25 10.58-16.22 14.93-6.01 5.96-12.79 11.08-18.5 17.36-8.44 6.94-15.74 15.13-24.44 21.78 2.16-4.71 5.02-9.03 7.53-13.54 16.74-28.97 33.46-57.94 50.2-86.91z" fill="#296ad9"/> <path d="m89.04 442.17c0.11-0.16 0.33-0.48 0.44-0.64l-0.03 0.65-0.41-0.01z" fill="#296ad9"/> <path id="#2a71e9ff" fill="#2a71e9" d="m333.52 288.46c30.76 0.13 61.52 0.04 92.29 0.03 28.1-0.15 56.23 0.38 84.32-0.26l0.59-0.04 0.4 0.11v0.08c-29.66 51.27-59.23 102.6-88.89 153.88-110.93-0.03-221.86 0.1-332.78-0.08l0.03-0.65c8.7-6.65 16-14.84 24.44-21.78 5.71-6.28 12.49-11.4 18.5-17.36 5.97-4.35 10.53-10.26 16.22-14.93 0.13-0.1 0.38-0.31 0.51-0.42 0.12-0.1 0.37-0.31 0.5-0.42 3.9-3.15 6.94-7.2 10.91-10.27 0.13-0.11 0.37-0.31 0.5-0.42 0.27-0.21 0.8-0.65 1.07-0.86 0.13-0.12 0.38-0.34 0.51-0.45 5.04-4.32 9.17-9.62 14.56-13.53 4.9-4.45 9.3-9.44 14.56-13.48 7.02-7.33 15.05-13.54 22.01-20.91 6.02-4.28 10.43-10.34 16.36-14.71 4.23-3.45 7.49-7.95 11.92-11.18 4.77-3.5 8.09-8.7 13.07-11.91 26.11-0.66 52.29 0.4 78.4-0.44z"/> <path d="m162.13 375.07c0.13-0.12 0.38-0.34 0.51-0.45-0.13 0.11-0.38 0.33-0.51 0.45z" fill="#286ee6"/> <path d="m161.06 375.93c0.27-0.21 0.8-0.65 1.07-0.86-0.27 0.21-0.8 0.65-1.07 0.86z" fill="#286ee6"/> <path d="m160.56 376.35c0.13-0.11 0.37-0.31 0.5-0.42-0.13 0.11-0.37 0.31-0.5 0.42z" fill="#286ee6"/> <path d="m149.15 387.04c0.12-0.1 0.37-0.31 0.5-0.42-0.13 0.11-0.38 0.32-0.5 0.42z" fill="#286ee6"/> <path d="m148.64 387.46c0.13-0.1 0.38-0.31 0.51-0.42-0.13 0.11-0.38 0.32-0.51 0.42z" fill="#286ee6"/> </svg> </div> <div class="rs-box rs-box-initial" aria-hidden="false"> <h3 class="rs-small-headline">Connect your storage</h3> <span class="rs-sub-headline">To sync data with your account</span> </div> <div class="rs-box rs-box-connected" aria-hidden="true"> <div class="rs-connected-text"> <h1 class="rs-user rs-small-headline">user@provider.com</h1> <span class="rs-sub-headline">Connected</span> </div> <div class="rs-connected-buttons"> <button class="rs-button rs-button-small rs-sync" title="Sync now"> <svg class="rs-icon rs-loop-icon" xml:space="preserve" version="1.1" x="0px" y="0px" height="16" width="16" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xmlns="http://www.w3.org/2000/svg"> <path d="m273.4 300.5l-0.3 58c48.9-8.2 86.3-51 86.3-102.5 0-15.9-3.6-31-10-44.5-2.8-5.8-6-11.3-9.8-16.5l47.1-43.5c1.1 1.3 2.1 2.7 3.1 4 20.9 28 33.2 62.8 33.2 100.5v3.7c-1.5 71.5-47.6 132-111.4 154.6-12.3 4.3-25.2 7.3-38.5 8.7l-0.1 57-76.2-67-26.2-23 44.4-38.7 58.4-50.8z"/> <path d="m89 252.3c1.6-72.1 48.3-133 112.9-155.2 11.7-4 24-6.8 36.8-8.1l0.1-57 76.1 66.9 26.2 23.1-44.3 38.6-58.4 50.9 0.2-57.9c-48.8 8.3-86 51.1-86 102.4 0 16 3.6 31.1 10.1 44.7 2.7 5.8 6 11.2 9.7 16.3l-47 43.6c-1.3-1.6-2.6-3.3-3.8-5-20.5-27.9-32.6-62.3-32.6-99.6v-3.7z"/> </svg> </button> <button class="rs-button rs-button-small rs-disconnect" title="Disconnect"> <svg class="rs-icon rs-power-icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="16" height="16" style="enable-background:new 0 0 512 512" xml:space="preserve" viewBox="0 0 512 512" version="1.1"> <path d="m256 256c-17.7 0-32-14.3-32-32v-160c0-17.7 14.3-32 32-32s32 14.3 32 32v160c0 17.7-14.3 32-32 32z"/> <path d="m379 68.8c-5-3-10.8-4.8-17-4.8-17.7 0-32 14.3-32 32 0 6.2 1.8 12 4.8 16.9 2 3.2 4.6 6.1 7.6 8.4 1.2 0.9 2.4 1.7 3.7 2.5 8.1 5.6 15.8 11.9 23 19.1 30.3 30.2 46.9 70.4 46.9 113.1s-16.6 82.9-46.9 113.1c-30.2 30.3-70.4 46.9-113.1 46.9s-82.9-16.6-113.1-46.9c-30.3-30.2-46.9-70.4-46.9-113.1s16.6-82.9 46.9-113.1c7.1-7.1 14.8-13.5 22.9-19 1.4-0.8 2.6-1.6 3.9-2.6 3-2.3 5.5-5.1 7.5-8.3 3.1-4.9 4.8-10.7 4.8-16.9 0-17.7-14.3-32-32-32-6.2 0-12 1.8-16.9 4.8l-0.1-0.1c-60.8 40-101 108.9-101 187.2 0 123.7 100.3 224 224 224s224-100.3 224-224c0-78.3-40.2-147.2-101-187.2z"/> </svg> </button> </div> </div> <div class="rs-box rs-box-error" aria-hidden="true"> <div class="rs-error-message"></div> <div class="rs-error-buttons"> <a href="#" class="rs-reconnect rs-hidden">Renew</a> <button class="rs-button rs-button-small rs-disconnect" title="Disconnect"> <svg class="rs-icon rs-power-icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="16" height="16" style="enable-background:new 0 0 512 512" xml:space="preserve" viewBox="0 0 512 512" version="1.1"> <path d="m256 256c-17.7 0-32-14.3-32-32v-160c0-17.7 14.3-32 32-32s32 14.3 32 32v160c0 17.7-14.3 32-32 32z"/> <path d="m379 68.8c-5-3-10.8-4.8-17-4.8-17.7 0-32 14.3-32 32 0 6.2 1.8 12 4.8 16.9 2 3.2 4.6 6.1 7.6 8.4 1.2 0.9 2.4 1.7 3.7 2.5 8.1 5.6 15.8 11.9 23 19.1 30.3 30.2 46.9 70.4 46.9 113.1s-16.6 82.9-46.9 113.1c-30.2 30.3-70.4 46.9-113.1 46.9s-82.9-16.6-113.1-46.9c-30.3-30.2-46.9-70.4-46.9-113.1s16.6-82.9 46.9-113.1c7.1-7.1 14.8-13.5 22.9-19 1.4-0.8 2.6-1.6 3.9-2.6 3-2.3 5.5-5.1 7.5-8.3 3.1-4.9 4.8-10.7 4.8-16.9 0-17.7-14.3-32-32-32-6.2 0-12 1.8-16.9 4.8l-0.1-0.1c-60.8 40-101 108.9-101 187.2 0 123.7 100.3 224 224 224s224-100.3 224-224c0-78.3-40.2-147.2-101-187.2z"/> </svg> </button> </div> </div> <div class="rs-box rs-box-choose" aria-hidden="true"> <div class="rs-content"> <h1 class="rs-big-headline">Connect your storage</h1> <p class="rs-short-desc"> This app allows you to sync data with a <a class="rs-help" href="https://remotestorage.io/" target="_blank" rel="noopener">storage provider of your choice</a>. </p> <div class="rs-button-wrap"> <button class="rs-button rs-button-big rs-choose-rs"> <svg class="rs-logo" fill-rule="evenodd" height="40" width="40" xmlns="http://www.w3.org/2000/svg" version="1.1" style="shape-rendering:geometricPrecision;image-rendering:optimizeQuality;text-rendering:geometricPrecision" clip-rule="evenodd" xml:space="preserve" viewBox="0 0 739 853"> <g> <polygon class="rs-logo-shape" points="370 754 0 542 0 640 185 747 370 853 554 747 739 640 739 525 739 525 739 476 739 427 739 378 653 427 370 589 86 427 86 427 86 361 185 418 370 524 554 418 653 361 739 311 739 213 739 213 554 107 370 0 185 107 58 180 144 230 228 181 370 100 511 181 652 263 370 425 87 263 87 263 0 213 0 213 0 311 0 378 0 427 0 476 86 525 185 582 370 689 554 582 653 525 653 590 653 592"/> </g> </svg> <div>RemoteStorage</div> </button> <button class="rs-button rs-button-big rs-choose-dropbox"> <svg class="dropbox-logo" width="40" height="40" xml:space="preserve" stroke-miterlimit="1.4142" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 104 97" stroke-linejoin="round" version="1.1" clip-rule="evenodd"> <path d="m30.691 0l-30.691 20.039 21.221 16.994 30.946-19.108-21.476-17.925z" fill="#007ee5"/> <path d="m0 54.028l30.691 20.039 21.476-17.926-30.945-19.108-21.222 16.995z" fill="#007ee5"/> <path d="m52.167 56.142l21.477 17.926 30.696-20.039-21.227-16.995-30.946 19.108z" fill="#007ee5"/> <path d="m104.34 20.039l-30.696-20.039-21.477 17.925 30.946 19.108 21.227-16.994z" fill="#007ee5"/> <path d="m52.23 59.998l-21.538 17.873-9.218-6.018v6.747l30.756 18.443 30.756-18.443v-6.747l-9.216 6.018-21.54-17.873z" fill="#007ee5"/> </svg> <div>Dropbox</div> </button> <button class="rs-button rs-button-big rs-choose-googledrive"> <svg class="googledrive-logo" width="40" height="40" version="1.1" stroke-miterlimit="1.4142" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" width="100%" stroke-linejoin="round" clip-rule="evenodd" viewBox="0 0 511 442" height="100%"> <path d="m166.23 0.10955l0.44-0.009998 0.04 0.49-0.56 0.02 0.08-0.5z" fill="#0ba25e"/> <path d="m164.52 3.3896c0.39-0.56 1.15-1.68 1.54-2.24l0.7-0.11c0.52 6.34 2.38 12.45 3.78 18.62 6.02 26.81 12.1 53.6 18.43 80.33 4.15 18.33 8.78 36.57 12.58 54.97 3.3 11.39 5.07 23.14 8.26 34.55 2.06 10.64 5.29 21.02 7.02 31.72-0.7 1.17-1.4 2.35-2.11 3.52-0.17 0.27-0.53 0.83-0.7 1.11l-0.26 0.45c-0.04 0.08-0.13 0.25-0.18 0.33-0.39 0.72-1.17 2.15-1.56 2.86-0.07 0.13-0.22 0.39-0.3 0.52l-0.71 1.26c-0.09 0.15-0.26 0.44-0.34 0.59l-0.83 1.45c-0.04 0.08-0.13 0.24-0.18 0.32l-1.03 1.8c-0.09 0.15-0.27 0.47-0.36 0.63-0.1 0.17-0.3 0.5-0.4 0.67l-1.01 1.74c-0.08 0.13-0.24 0.41-0.32 0.54l-0.62 1.05c-0.1 0.18-0.32 0.55-0.42 0.73-0.4 0.69-1.19 2.07-1.59 2.77-0.07 0.12-0.22 0.37-0.29 0.5l-0.63 1.05c-0.1 0.19-0.32 0.55-0.43 0.74-0.37 0.65-1.13 1.94-1.5 2.59-0.09 0.15-0.26 0.46-0.35 0.61l-0.75 1.35c-0.07 0.12-0.21 0.37-0.28 0.49l-0.77 1.35-0.32 0.56c-0.4 0.66-1.18 1.99-1.57 2.66-0.09 0.15-0.27 0.46-0.36 0.62l-0.71 1.28c-0.07 0.12-0.2 0.35-0.26 0.47l-0.82 1.42c-0.07 0.13-0.22 0.38-0.29 0.5-0.42 0.72-1.25 2.15-1.67 2.87-0.07 0.13-0.23 0.39-0.31 0.52l-0.6 0.99c-0.1 0.18-0.31 0.53-0.41 0.71-0.38 0.66-1.13 1.97-1.51 2.63-0.06 0.11-0.2 0.35-0.26 0.46l-0.82 1.46c-0.06 0.11-0.18 0.32-0.24 0.43l-0.84 1.47c-0.07 0.11-0.21 0.35-0.28 0.46-0.39 0.66-1.18 1.96-1.57 2.62-0.11 0.17-0.31 0.53-0.42 0.71l-0.59 1.1c-0.08 0.14-0.23 0.42-0.3 0.55l-1.03 1.78c-0.08 0.15-0.26 0.45-0.34 0.6-0.09 0.14-0.25 0.43-0.33 0.57-1.69 2.85-3.22 5.79-5.09 8.53-10.65 17.37-20.45 35.28-30.76 52.86-16.74 28.97-33.46 57.94-50.2 86.91-2.51 4.51-5.37 8.83-7.53 13.54-0.11 0.16-0.33 0.48-0.44 0.64-4.01-5.78-7.11-12.16-10.78-18.16-16.74-28.99-33.49-57.97-50.22-86.97-9.3-16.31-18.99-32.42-28.04-48.88 35.84-61.85 71.52-123.81 107.29-185.7 0.03-0.06 0.1-0.17 0.13-0.23l0.98-1.68c0.04-0.07 0.12-0.21 0.17-0.28l0.99-1.69c0.09-0.15 0.27-0.47 0.37-0.62 0.1-0.18 0.3-0.53 0.4-0.71l0.99-1.76 0.28-0.48 0.74-1.18c0.13-0.19 0.39-0.58 0.52-0.78 0.36-0.54 1.09-1.63 1.46-2.17 0.04-0.18 0.11-0.53 0.15-0.7l0.87-1.67 0.16-0.28 1-1.68c0.1-0.16 0.3-0.5 0.4-0.67 0.11-0.19 0.33-0.58 0.45-0.78l0.84-1.47c0.09-0.16 0.27-0.47 0.36-0.62l0.7-1.23c0.08-0.13 0.24-0.41 0.32-0.55 0.39-0.67 1.17-2.01 1.57-2.68l0.32-0.56 0.73-1.33c0.06-0.1 0.18-0.32 0.24-0.42l0.96-1.68c0.12-0.2 0.37-0.61 0.5-0.81l0.65-0.98c0.14-0.2 0.41-0.59 0.55-0.78 0.12-0.2 0.37-0.6 0.5-0.8l0.54-1.04c0.18-0.39 0.55-1.17 0.73-1.56l0.55-0.77c0.1-0.14 0.29-0.41 0.39-0.55 0.37-0.31 1.12-0.95 1.49-1.27l-0.07-1.17c0.06-0.14 0.2-0.42 0.27-0.56l0.85-1.69c0.07-0.12 0.21-0.37 0.28-0.49l0.75-1.22c0.14-0.2 0.41-0.6 0.55-0.8 0.34-0.56 1.03-1.66 1.37-2.21 0.1-0.2 0.28-0.59 0.38-0.79l0.53-1.15c0.16-0.3 0.5-0.91 0.67-1.22l0.66-0.94c0.14-0.19 0.42-0.57 0.56-0.76 0.12-0.2 0.37-0.6 0.49-0.8l0.49-1.03c0.11-0.23 0.34-0.7 0.45-0.93l0.86-1.66c0.13-0.2 0.38-0.62 0.5-0.83l0.66-0.98c0.14-0.2 0.42-0.58 0.56-0.78 0.13-0.2 0.38-0.61 0.5-0.81l0.51-1.04c0.15-0.29 0.44-0.86 0.58-1.15l0.68-1.12c0.12-0.19 0.36-0.57 0.49-0.76 0.36-0.56 1.09-1.68 1.46-2.23 0.04-0.17 0.13-0.51 0.17-0.68l0.87-1.66c0.03-0.07 0.11-0.2 0.15-0.27l1-1.71c0.1-0.17 0.29-0.5 0.39-0.67 0.1-0.16 0.29-0.5 0.39-0.66l1-1.75c0.04-0.07 0.12-0.21 0.16-0.29l0.94-1.63c0.05-0.07 0.14-0.22 0.18-0.3l1.01-1.7c0.09-0.16 0.27-0.46 0.36-0.62 0.1-0.17 0.3-0.52 0.4-0.7l0.96-1.69c0.06-0.11 0.18-0.32 0.24-0.42l0.81-1.31c0.13-0.19 0.39-0.58 0.51-0.77 0.37-0.55 1.09-1.65 1.46-2.2 0.03-0.17 0.11-0.51 0.15-0.68l0.85-1.63c0.07-0.12 0.22-0.37 0.29-0.5l0.76-1.19c0.14-0.19 0.4-0.58 0.54-0.78 0.35-0.56 1.05-1.67 1.4-2.23 0.05-0.16 0.14-0.48 0.19-0.64l0.88-1.65c0.04-0.08 0.12-0.22 0.16-0.3l1.02-1.7204c0.08-0.15 0.26-0.45 0.35-0.6 0.09-0.17 0.27-0.49 0.36-0.65l1-1.78c0.05-0.07 0.13-0.22 0.17-0.29l0.95-1.61c0.03-0.05 0.1-0.16 0.13-0.21z" fill="#0ba25e"/> <path id="#fccd48ff" fill="#fccd48" d="m166.67 0.099552c32.48-0.15 64.97-0.02 97.46-0.07 26.88 0.099998 53.78-0.21 80.65 0.15 0.53 1.02 1.07 2.03 1.64 3.04 0.08 0.13 0.23 0.41 0.31 0.55 2.6 4.53 5.24 9.0404 7.81 13.58 0.05 0.08 0.13 0.23 0.18 0.3 4.98 8.55 9.94 17.11 14.83 25.71 0.04 0.07 0.13 0.21 0.17 0.29 0.89 1.53 1.81 3.06 2.72 4.6 0.08 0.13 0.23 0.4 0.31 0.54 1.25 2.2 2.51 4.39 3.78 6.58 0.05 0.07 0.13 0.21 0.17 0.29 1.27 2.18 2.52 4.38 3.78 6.58 0.08 0.13 0.23 0.39 0.31 0.52 1.27 2.14 2.5 4.3 3.72 6.46 0.08 0.13 0.23 0.4 0.31 0.53 11.94 20.62 23.85 41.25 35.75 61.9-1.36 5.99 1.93 11.95 0.1 17.97-1.11 16.45-7.32 32.46-17.56 45.38-3.33 3.61-0.1 8.62-0.46 12.9-3.59 4.35-8.21 7.6-12.57 11.11 0.01 3.28 0.02 6.56-0.13 9.85-3.89 2.57-8.35 4.06-12.3 6.54-0.42 1.33-0.85 2.67-1.26 4.02-3.17 1.5-6.56 2.47-9.73 3.99-12.55-3.6-24.97-7.61-37.49-11.32-11.65-3.85-23.58-6.87-35.11-11.11l-0.66-1.18c-0.06-0.09-0.16-0.27-0.21-0.36l-0.95-1.61-0.4-0.68c-0.09-0.15-0.25-0.44-0.34-0.59-0.71-1.26-1.36-2.55-1.94-3.87l-0.06-0.13-0.07-0.1c-0.44-0.7-1.33-2.11-1.78-2.81-0.05-0.08-0.15-0.24-0.2-0.33l-0.29-0.46c-0.17-0.29-0.52-0.86-0.69-1.15-0.43-0.73-1.3-2.19-1.73-2.92-0.11-0.18-0.32-0.55-0.43-0.73l-0.61-1.04c-0.08-0.14-0.24-0.41-0.32-0.55l-0.97-1.67c-0.04-0.07-0.13-0.21-0.17-0.29l-1.02-1.75c-0.09-0.16-0.27-0.48-0.36-0.63-0.1-0.18-0.31-0.55-0.41-0.73l-0.83-1.46c-0.1-0.17-0.3-0.53-0.4-0.7l-0.64-1.13c-0.09-0.15-0.26-0.45-0.35-0.6-0.39-0.72-1.18-2.15-1.58-2.87-0.04-0.08-0.14-0.25-0.18-0.33l-0.27-0.47c-0.19-0.28-0.56-0.84-0.75-1.12-0.99-1.66-1.92-3.36-2.81-5.07-0.05-0.08-0.14-0.25-0.18-0.33l-0.26-0.46c-0.19-0.27-0.57-0.81-0.76-1.07-0.44-0.79-1.32-2.37-1.76-3.16-0.05-0.08-0.15-0.25-0.19-0.34l-0.27-0.48c-0.2-0.33-0.59-0.98-0.79-1.31l-0.86-1.45c-0.08-0.14-0.25-0.42-0.34-0.57-0.38-0.66-1.15-1.99-1.54-2.65-0.09-0.15-0.26-0.46-0.35-0.62-0.68-1.13-1.33-2.27-1.97-3.41-0.05-0.09-0.16-0.27-0.21-0.36l-0.95-1.63c-0.1-0.16-0.29-0.48-0.38-0.65-0.09-0.15-0.26-0.45-0.35-0.6l-1.01-1.76c-0.05-0.08-0.14-0.25-0.19-0.33l-0.82-1.47c-0.07-0.12-0.2-0.35-0.27-0.47-0.38-0.67-1.15-2-1.53-2.67-0.08-0.14-0.24-0.41-0.32-0.54-0.62-1.03-1.24-2.07-1.84-3.1-27.73-48.12-55.5-96.21-83.29-144.3-1.74-3.0004-3.32-6.1204-5.45-8.8804l-0.05-0.45005-0.04-0.49z"/> <path d="m166.15 0.60955l0.56-0.02 0.05 0.45005-0.7 0.11 0.09-0.54005z" fill="#089156"/> <path d="m166.76 1.0396c2.13 2.76 3.71 5.88 5.45 8.88 27.79 48.09 55.56 96.18 83.29 144.3-12.84 22.36-25.78 44.67-38.67 67.01-1.73-10.7-4.96-21.08-7.02-31.72-3.19-11.41-4.96-23.16-8.26-34.55-3.8-18.4-8.43-36.64-12.58-54.97-6.33-26.73-12.41-53.52-18.43-80.33-1.4-6.17-3.26-12.28-3.78-18.62z" fill="#089156"/> <path d="m164.39 3.5996c0.03-0.05 0.1-0.16 0.13-0.21-0.03 0.05-0.1 0.16-0.13 0.21z" fill="#089156"/> <path d="m163.27 5.4996c0.05-0.07 0.13-0.22 0.17-0.29-0.04 0.07-0.12 0.22-0.17 0.29z" fill="#089156"/> <path d="m161.91 7.9296c0.09-0.17 0.27-0.49 0.36-0.65-0.09 0.16-0.27 0.48-0.36 0.65z" fill="#089156"/> <path d="m161.56 8.5296c0.08-0.15 0.26-0.45 0.35-0.6-0.09 0.15-0.27 0.45-0.35 0.6z" fill="#089156"/> <path d="m160.38 10.55c0.04-0.08 0.12-0.22 0.16-0.3-0.04 0.08-0.12 0.22-0.16 0.3z" fill="#089156"/> <path d="m159.31 12.84c0.05-0.16 0.14-0.48 0.19-0.64-0.05 0.16-0.14 0.48-0.19 0.64z" fill="#089156"/> <path d="m157.91 15.07c0.35-0.56 1.05-1.67 1.4-2.23-0.35 0.56-1.05 1.67-1.4 2.23z" fill="#089156"/> <path d="m157.37 15.85c0.14-0.19 0.4-0.58 0.54-0.78-0.14 0.2-0.4 0.59-0.54 0.78z" fill="#089156"/> <path d="m156.32 17.54c0.07-0.12 0.22-0.37 0.29-0.5-0.07 0.13-0.22 0.38-0.29 0.5z" fill="#089156"/> <path d="m155.32 19.85c0.03-0.17 0.11-0.51 0.15-0.68-0.04 0.17-0.12 0.51-0.15 0.68z" fill="#089156"/> <path d="m153.86 22.05c0.37-0.55 1.09-1.65 1.46-2.2-0.37 0.55-1.09 1.65-1.46 2.2z" fill="#089156"/> <path d="m153.35 22.82c0.13-0.19 0.39-0.58 0.51-0.77-0.12 0.19-0.38 0.58-0.51 0.77z" fill="#089156"/> <path d="m152.3 24.55c0.06-0.11 0.18-0.32 0.24-0.42-0.06 0.1-0.18 0.31-0.24 0.42z" fill="#089156"/> <path d="m150.94 26.94c0.1-0.17 0.3-0.52 0.4-0.7-0.1 0.18-0.3 0.53-0.4 0.7z" fill="#089156"/> <path d="m150.58 27.56c0.09-0.16 0.27-0.46 0.36-0.62-0.09 0.16-0.27 0.46-0.36 0.62z" fill="#089156"/> <path d="m149.39 29.56c0.05-0.07 0.14-0.22 0.18-0.3-0.04 0.08-0.13 0.23-0.18 0.3z" fill="#089156"/> <path d="m148.29 31.48c0.04-0.07 0.12-0.21 0.16-0.29-0.04 0.08-0.12 0.22-0.16 0.29z" fill="#089156"/> <path d="m146.9 33.89c0.1-0.16 0.29-0.5 0.39-0.66-0.1 0.16-0.29 0.5-0.39 0.66z" fill="#089156"/> <path d="m146.51 34.56c0.1-0.17 0.29-0.5 0.39-0.67-0.1 0.17-0.29 0.5-0.39 0.67z" fill="#089156"/> <path d="m145.36 36.54c0.03-0.07 0.11-0.2 0.15-0.27-0.04 0.07-0.12 0.2-0.15 0.27z" fill="#089156"/> <path d="m144.32 38.88c0.04-0.17 0.13-0.51 0.17-0.68-0.04 0.17-0.13 0.51-0.17 0.68z" fill="#089156"/> <path d="m142.86 41.11c0.36-0.56 1.09-1.68 1.46-2.23-0.37 0.55-1.1 1.67-1.46 2.23z" fill="#089156"/> <path d="m142.37 41.87c0.12-0.19 0.36-0.57 0.49-0.76-0.13 0.19-0.37 0.57-0.49 0.76z" fill="#089156"/> <path d="m141.11 44.14c0.15-0.29 0.44-0.86 0.58-1.15-0.14 0.29-0.43 0.86-0.58 1.15z" fill="#089156"/> <path d="m140.1 45.99c0.13-0.2 0.38-0.61 0.5-0.81-0.12 0.2-0.37 0.61-0.5 0.81z" fill="#089156"/> <path d="m139.54 46.77c0.14-0.2 0.42-0.58 0.56-0.78-0.14 0.2-0.42 0.58-0.56 0.78z" fill="#089156"/> <path d="m138.38 48.58c0.13-0.2 0.38-0.62 0.5-0.83-0.12 0.21-0.37 0.63-0.5 0.83z" fill="#089156"/> <path d="m137.07 51.17c0.11-0.23 0.34-0.7 0.45-0.93-0.11 0.23-0.34 0.7-0.45 0.93z" fill="#089156"/> <path d="m136.09 53c0.12-0.2 0.37-0.6 0.49-0.8-0.12 0.2-0.37 0.6-0.49 0.8z" fill="#089156"/> <path d="m135.53 53.76c0.14-0.19 0.42-0.57 0.56-0.76-0.14 0.19-0.42 0.57-0.56 0.76z" fill="#089156"/> <path d="m134.2 55.92c0.16-0.3 0.5-0.91 0.67-1.22-0.17 0.31-0.51 0.92-0.67 1.22z" fill="#089156"/> <path d="m133.29 57.86c0.1-0.2 0.28-0.59 0.38-0.79-0.1 0.2-0.28 0.59-0.38 0.79z" fill="#089156"/> <path d="m131.92 60.07c0.34-0.56 1.03-1.66 1.37-2.21-0.34 0.55-1.03 1.65-1.37 2.21z" fill="#089156"/> <path d="m131.37 60.87c0.14-0.2 0.41-0.6 0.55-0.8-0.14 0.2-0.41 0.6-0.55 0.8z" fill="#089156"/> <path d="m130.34 62.58c0.07-0.12 0.21-0.37 0.28-0.49-0.07 0.12-0.21 0.37-0.28 0.49z" fill="#089156"/> <path d="m129.22 64.83c0.06-0.14 0.2-0.42 0.27-0.56-0.07 0.14-0.21 0.42-0.27 0.56z" fill="#089156"/> <path d="m127.8 67.27c0.35-0.61 1.06-1.83 1.42-2.44l0.07 1.17c-0.37 0.32-1.12 0.96-1.49 1.27z" fill="#089156"/> <path d="m127.41 67.82c0.1-0.14 0.29-0.41 0.39-0.55-0.1 0.14-0.29 0.41-0.39 0.55z" fill="#089156"/> <path d="m126.13 70.15c0.18-0.39 0.55-1.17 0.73-1.56-0.18 0.39-0.55 1.17-0.73 1.56z" fill="#089156"/> <path d="m125.09 71.99c0.12-0.2 0.37-0.6 0.5-0.8-0.13 0.2-0.38 0.6-0.5 0.8z" fill="#089156"/> <path d="m124.54 72.77c0.14-0.2 0.41-0.59 0.55-0.78-0.14 0.19-0.41 0.58-0.55 0.78z" fill="#089156"/> <path d="m123.39 74.56c0.12-0.2 0.37-0.61 0.5-0.81-0.13 0.2-0.38 0.61-0.5 0.81z" fill="#089156"/> <path d="m122.19 76.66c0.06-0.1 0.18-0.32 0.24-0.42-0.06 0.1-0.18 0.32-0.24 0.42z" fill="#089156"/> <path d="m121.14 78.55l0.32-0.56-0.32 0.56z" fill="#089156"/> <path d="m119.25 81.78c0.08-0.13 0.24-0.41 0.32-0.55-0.08 0.14-0.24 0.42-0.32 0.55z" fill="#089156"/> <path d="m118.19 83.63c0.09-0.16 0.27-0.47 0.36-0.62-0.09 0.15-0.27 0.46-0.36 0.62z" fill="#089156"/> <path d="m116.9 85.88c0.11-0.19 0.33-0.58 0.45-0.78-0.12 0.2-0.34 0.59-0.45 0.78z" fill="#089156"/> <path d="m116.5 86.55c0.1-0.16 0.3-0.5 0.4-0.67-0.1 0.17-0.3 0.51-0.4 0.67z" fill="#089156"/> <path d="m115.34 88.51l0.16-0.28-0.16 0.28z" fill="#089156"/> <path d="m114.32 90.88c0.04-0.18 0.11-0.53 0.15-0.7-0.04 0.17-0.11 0.52-0.15 0.7z" fill="#089156"/> <path d="m112.86 93.05c0.36-0.54 1.09-1.63 1.46-2.17-0.37 0.54-1.1 1.63-1.46 2.17z" fill="#089156"/> <path d="m112.34 93.83c0.13-0.19 0.39-0.58 0.52-0.78-0.13 0.2-0.39 0.59-0.52 0.78z" fill="#089156"/> <path d="m111.32 95.49l0.28-0.48-0.28 0.48z" fill="#089156"/> <path d="m109.93 97.96c0.1-0.18 0.3-0.53 0.4-0.71-0.1 0.18-0.3 0.53-0.4 0.71z" fill="#089156"/> <path d="m109.56 98.58c0.09-0.15 0.27-0.47 0.37-0.62-0.1 0.15-0.28 0.47-0.37 0.62z" fill="#089156"/> <path d="m108.4 100.55c0.04-0.07 0.12-0.21 0.17-0.28-0.05 0.07-0.13 0.21-0.17 0.28z" fill="#089156"/> <path d="m107.29 102.46c0.03-0.06 0.1-0.17 0.13-0.23-0.03 0.06-0.1 0.17-0.13 0.23z" fill="#089156"/> <path d="m214.02 225.86c0.17-0.28 0.53-0.84 0.7-1.11-0.17 0.27-0.53 0.83-0.7 1.11z" fill="#089156"/> <path d="m213.58 226.64c0.05-0.08 0.14-0.25 0.18-0.33-0.04 0.08-0.13 0.25-0.18 0.33z" fill="#089156"/> <path d="m211.72 230.02c0.08-0.13 0.23-0.39 0.3-0.52-0.07 0.13-0.22 0.39-0.3 0.52z" fill="#089156"/> <path d="m210.67 231.87c0.08-0.15 0.25-0.44 0.34-0.59-0.09 0.15-0.26 0.44-0.34 0.59z" fill="#089156"/> <path d="m209.66 233.64c0.05-0.08 0.14-0.24 0.18-0.32-0.04 0.08-0.13 0.24-0.18 0.32z" fill="#089156"/> <path d="m208.27 236.07c0.09-0.16 0.27-0.48 0.36-0.63-0.09 0.15-0.27 0.47-0.36 0.63z" fill="#089156"/> <path d="m207.87 236.74c0.1-0.17 0.3-0.5 0.4-0.67-0.1 0.17-0.3 0.5-0.4 0.67z" fill="#089156"/> <path d="m206.54 239.02c0.08-0.13 0.24-0.41 0.32-0.54-0.08 0.13-0.24 0.41-0.32 0.54z" fill="#089156"/> <path d="m205.5 240.8c0.1-0.18 0.32-0.55 0.42-0.73-0.1 0.18-0.32 0.55-0.42 0.73z" fill="#089156"/> <path d="m203.62 244.07c0.07-0.13 0.22-0.38 0.29-0.5-0.07 0.12-0.22 0.37-0.29 0.5z" fill="#089156"/> <path d="m202.56 245.86c0.11-0.19 0.33-0.55 0.43-0.74-0.1 0.19-0.32 0.55-0.43 0.74z" fill="#089156"/> <path d="m200.71 249.06c0.09-0.15 0.26-0.46 0.35-0.61-0.09 0.15-0.26 0.46-0.35 0.61z" fill="#089156"/> <path d="m199.68 250.9c0.07-0.12 0.21-0.37 0.28-0.49-0.07 0.12-0.21 0.37-0.28 0.49z" fill="#089156"/> <path d="m198.59 252.81l0.32-0.56-0.32 0.56z" fill="#089156"/> <path d="m196.66 256.09c0.09-0.16 0.27-0.47 0.36-0.62-0.09 0.15-0.27 0.46-0.36 0.62z" fill="#089156"/> <path d="m195.69 257.84c0.06-0.12 0.19-0.35 0.26-0.47-0.07 0.12-0.2 0.35-0.26 0.47z" fill="#089156"/> <path d="m194.58 259.76c0.07-0.12 0.22-0.37 0.29-0.5-0.07 0.13-0.22 0.38-0.29 0.5z" fill="#089156"/> <path d="m192.6 263.15c0.08-0.13 0.24-0.39 0.31-0.52-0.07 0.13-0.23 0.39-0.31 0.52z" fill="#089156"/> <path d="m191.59 264.85c0.1-0.18 0.31-0.53 0.41-0.71-0.1 0.18-0.31 0.53-0.41 0.71z" fill="#089156"/> <path d="m189.82 267.94c0.06-0.11 0.2-0.35 0.26-0.46-0.06 0.11-0.2 0.35-0.26 0.46z" fill="#089156"/> <path d="m188.76 269.83c0.06-0.11 0.18-0.32 0.24-0.43-0.06 0.11-0.18 0.32-0.24 0.43z" fill="#089156"/> <path d="m187.64 271.76c0.07-0.11 0.21-0.35 0.28-0.46-0.07 0.11-0.21 0.35-0.28 0.46z" fill="#089156"/> <path d="m185.65 275.09c0.11-0.18 0.31-0.54 0.42-0.71-0.11 0.17-0.31 0.53-0.42 0.71z" fill="#089156"/> <path d="m184.76 276.74c0.07-0.13 0.22-0.41 0.3-0.55-0.08 0.14-0.23 0.42-0.3 0.55z" fill="#089156"/> <path d="m183.39 279.12c0.08-0.15 0.26-0.45 0.34-0.6-0.08 0.15-0.26 0.45-0.34 0.6z" fill="#089156"/> <path d="m183.06 279.69c0.08-0.14 0.24-0.43 0.33-0.57-0.09 0.14-0.25 0.43-0.33 0.57z" fill="#089156"/> <path d="m346.42 3.2196c0.08 0.13 0.23 0.41 0.31 0.55-0.08-0.14-0.23-0.42-0.31-0.55z" fill="#10985b"/> <path d="m354.54 17.35c0.05 0.08 0.13 0.23 0.18 0.3-0.05-0.07-0.13-0.22-0.18-0.3z" fill="#10985b"/> <path d="m369.55 43.36c0.04 0.07 0.13 0.21 0.17 0.29-0.04-0.08-0.13-0.22-0.17-0.29z" fill="#10985b"/> <path d="m372.44 48.25c0.08 0.13 0.23 0.4 0.31 0.54-0.08-0.14-0.23-0.41-0.31-0.54z" fill="#10985b"/> <path d="m376.53 55.37c0.05 0.07 0.13 0.21 0.17 0.29-0.04-0.08-0.12-0.22-0.17-0.29z" fill="#10985b"/> <path d="m380.48 62.24c0.08 0.13 0.23 0.39 0.31 0.52-0.08-0.13-0.23-0.39-0.31-0.52z" fill="#10985b"/> <path d="m384.51 69.22c0.08 0.13 0.23 0.4 0.31 0.53-0.08-0.13-0.23-0.4-0.31-0.53z" fill="#10985b"/> <path d="m420.57 131.65c17.39 30.13 34.89 60.21 52.14 90.43 0.08 0.13 0.24 0.41 0.32 0.54 0.4 0.66 1.2 1.97 1.59 2.62 0.08 0.13 0.24 0.4 0.32 0.53l0.8 1.37c0.05 0.09 0.15 0.28 0.21 0.37l1 1.74c0.1 0.17 0.29 0.52 0.39 0.69 0.09 0.15 0.27 0.46 0.36 0.62l0.98 1.7 0.16 0.28 0.98 1.68c0.04 0.07 0.12 0.2 0.16 0.27l0.98 1.7c0.1 0.17 0.29 0.5 0.39 0.67 0.09 0.17 0.28 0.5 0.37 0.66l1.01 1.78c0.14 0.35 0.42 1.03 0.56 1.37l0.28 0.55 0.13 0.29 0.22 0.29 0.59 0.89c0.21 0.33 0.62 0.99 0.83 1.32 0.12 0.2 0.38 0.6 0.5 0.8l0.66 1.05c0.2 0.45 0.6 1.36 0.8 1.81l0.3 0.54 0.11 0.21 0.09 0.13c0.44 0.65 1.31 1.96 1.75 2.61 0.11 0.18 0.33 0.54 0.45 0.72l0.6 1c0.09 0.16 0.27 0.47 0.36 0.62l1.01 1.77c0.09 0.16 0.27 0.48 0.36 0.64s0.27 0.47 0.36 0.63l1 1.71c0.04 0.08 0.13 0.23 0.18 0.3l0.91 1.6c0.06 0.1 0.18 0.31 0.24 0.41l0.92 1.61c0.11 0.18 0.32 0.55 0.43 0.73 0.09 0.16 0.28 0.48 0.37 0.64 0.74 1.23 1.45 2.48 2.11 3.76 0.1 0.21 0.3 0.63 0.39 0.84l0.46 1.04c0.12 0.2 0.36 0.61 0.47 0.81 0.15 0.2 0.44 0.58 0.59 0.77l0.69 0.98c0.12 0.19 0.36 0.57 0.49 0.77l1.01 1.75c0.09 0.16 0.27 0.48 0.36 0.64s0.27 0.47 0.37 0.63l1 1.72c0.04 0.08 0.12 0.22 0.16 0.29l0.95 1.66c0.04 0.07 0.12 0.2 0.16 0.27l0.97 1.69c0.1 0.17 0.3 0.51 0.4 0.69 0.1 0.17 0.3 0.51 0.39 0.68l1 1.72c0.04 0.07 0.11 0.21 0.15 0.28l1.06 1.98-0.01 0.9c-25.02-7.19-49.64-15.72-74.73-22.65-22.77-7.35-45.75-14.04-68.52-21.35 3.17-1.52 6.56-2.49 9.73-3.99 0.41-1.35 0.84-2.69 1.26-4.02 3.95-2.48 8.41-3.97 12.3-6.54 0.15-3.29 0.14-6.57 0.13-9.85 4.36-3.51 8.98-6.76 12.57-11.11 0.36-4.28-2.87-9.29 0.46-12.9 10.24-12.92 16.45-28.93 17.56-45.38 1.83-6.02-1.46-11.98-0.1-17.97z" fill="#f9c941"/> <path d="m509.91 287.41l0.52 0.02 0.29 0.76-0.59 0.04-0.22-0.82z" fill="#f9c941"/> <path d="m257.34 157.32c0.08 0.13 0.24 0.4 0.32 0.54-0.08-0.14-0.24-0.41-0.32-0.54z" fill="#e3b73a"/> <path d="m259.19 160.53c0.07 0.12 0.2 0.35 0.27 0.47-0.07-0.12-0.2-0.35-0.27-0.47z" fill="#e3b73a"/> <path d="m260.28 162.47c0.05 0.08 0.14 0.25 0.19 0.33-0.05-0.08-0.14-0.25-0.19-0.33z" fill="#e3b73a"/> <path d="m261.48 164.56c0.09 0.15 0.26 0.45 0.35 0.6-0.09-0.15-0.26-0.45-0.35-0.6z" fill="#e3b73a"/> <path d="m261.83 165.16c0.09 0.17 0.28 0.49 0.38 0.65-0.1-0.16-0.29-0.48-0.38-0.65z" fill="#e3b73a"/> <path d="m263.16 167.44c0.05 0.09 0.16 0.27 0.21 0.36-0.05-0.09-0.16-0.27-0.21-0.36z" fill="#e3b73a"/> <path d="m265.34 171.21c0.09 0.16 0.26 0.47 0.35 0.62-0.09-0.15-0.26-0.46-0.35-0.62z" fill="#e3b73a"/> <path d="m267.23 174.48c0.09 0.15 0.26 0.43 0.34 0.57-0.08-0.14-0.25-0.42-0.34-0.57z" fill="#e3b73a"/> <path d="m268.43 176.5c0.2 0.33 0.59 0.98 0.79 1.31-0.2-0.33-0.59-0.98-0.79-1.31z" fill="#e3b73a"/> <path d="m269.49 178.29c0.04 0.09 0.14 0.26 0.19 0.34-0.05-0.08-0.15-0.25-0.19-0.34z" fill="#e3b73a"/> <path d="m271.44 181.79c0.19 0.26 0.57 0.8 0.76 1.07-0.19-0.27-0.57-0.81-0.76-1.07z" fill="#e3b73a"/> <path d="m272.46 183.32c0.04 0.08 0.13 0.25 0.18 0.33-0.05-0.08-0.14-0.25-0.18-0.33z" fill="#e3b73a"/> <path d="m275.45 188.72c0.19 0.28 0.56 0.84 0.75 1.12-0.19-0.28-0.56-0.84-0.75-1.12z" fill="#e3b73a"/> <path d="m276.47 190.31c0.04 0.08 0.14 0.25 0.18 0.33-0.04-0.08-0.14-0.25-0.18-0.33z" fill="#e3b73a"/> <path d="m278.23 193.51c0.09 0.15 0.26 0.45 0.35 0.6-0.09-0.15-0.26-0.45-0.35-0.6z" fill="#e3b73a"/> <path d="m279.22 195.24c0.1 0.17 0.3 0.53 0.4 0.7-0.1-0.17-0.3-0.53-0.4-0.7z" fill="#e3b73a"/> <path d="m280.45 197.4c0.1 0.18 0.31 0.55 0.41 0.73-0.1-0.18-0.31-0.55-0.41-0.73z" fill="#e3b73a"/> <path d="m280.86 198.13c0.09 0.15 0.27 0.47 0.36 0.63-0.09-0.16-0.27-0.48-0.36-0.63z" fill="#e3b73a"/> <path d="m282.24 200.51c0.04 0.08 0.13 0.22 0.17 0.29-0.04-0.07-0.13-0.21-0.17-0.29z" fill="#e3b73a"/> <path d="m283.38 202.47c0.08 0.14 0.24 0.41 0.32 0.55-0.08-0.14-0.24-0.41-0.32-0.55z" fill="#e3b73a"/> <path d="m284.31 204.06c0.11 0.18 0.32 0.55 0.43 0.73-0.11-0.18-0.32-0.55-0.43-0.73z" fill="#e3b73a"/> <path d="m286.47 207.71c0.17 0.29 0.52 0.86 0.69 1.15-0.17-0.29-0.52-0.86-0.69-1.15z" fill="#e3b73a"/> <path d="m287.45 209.32c0.05 0.09 0.15 0.25 0.2 0.33-0.05-0.08-0.15-0.24-0.2-0.33z" fill="#e3b73a"/> <path d="m289.43 212.46l0.07 0.1 0.06 0.13c-0.03-0.06-0.1-0.17-0.13-0.23z" fill="#e3b73a"/> <path d="m291.5 216.56c0.09 0.15 0.25 0.44 0.34 0.59-0.09-0.15-0.25-0.44-0.34-0.59z" fill="#e3b73a"/> <path d="m291.84 217.15l0.4 0.68-0.4-0.68z" fill="#e3b73a"/> <path d="m293.19 219.44c0.05 0.09 0.15 0.27 0.21 0.36-0.06-0.09-0.16-0.27-0.21-0.36z" fill="#e3b73a"/> <path d="m294.06 220.98c11.53 4.24 23.46 7.26 35.11 11.11 12.52 3.71 24.94 7.72 37.49 11.32 22.77 7.31 45.75 14 68.52 21.35-0.34 4.87 0.62 9.86-0.59 14.64-0.93 4.65-6.49 5.38-8.78 9.09-30.77 0.01-61.53 0.1-92.29-0.03l-0.66-0.05c-12.71-22.6-25.93-44.92-38.8-67.43z" fill="#e3b73a"/> <path d="m472.71 222.08c0.08 0.13 0.24 0.41 0.32 0.54-0.08-0.13-0.24-0.41-0.32-0.54z" fill="#e8b835"/> <path d="m474.62 225.24c0.08 0.13 0.24 0.4 0.32 0.53-0.08-0.13-0.24-0.4-0.32-0.53z" fill="#e8b835"/> <path d="m475.74 227.14c0.05 0.09 0.15 0.28 0.21 0.37-0.06-0.09-0.16-0.28-0.21-0.37z" fill="#e8b835"/> <path d="m476.95 229.25c0.1 0.17 0.29 0.52 0.39 0.69-0.1-0.17-0.29-0.52-0.39-0.69z" fill="#e8b835"/> <path d="m477.34 229.94c0.09 0.15 0.27 0.46 0.36 0.62-0.09-0.16-0.27-0.47-0.36-0.62z" fill="#e8b835"/> <path d="m478.68 232.26l0.16 0.28-0.16-0.28z" fill="#e8b835"/> <path d="m479.82 234.22c0.04 0.07 0.12 0.2 0.16 0.27-0.04-0.07-0.12-0.2-0.16-0.27z" fill="#e8b835"/> <path d="m480.96 236.19c0.1 0.17 0.29 0.5 0.39 0.67-0.1-0.17-0.29-0.5-0.39-0.67z" fill="#e8b835"/> <path d="m481.35 236.86c0.09 0.17 0.28 0.5 0.37 0.66-0.09-0.16-0.28-0.49-0.37-0.66z" fill="#e8b835"/> <path d="m482.73 239.3c0.14 0.35 0.42 1.03 0.56 1.37-0.14-0.34-0.42-1.02-0.56-1.37z" fill="#e8b835"/> <path d="m483.57 241.22c0.09 0.15 0.26 0.44 0.35 0.58l-0.22-0.29-0.13-0.29z" fill="#e8b835"/> <path d="m484.51 242.69c0.21 0.33 0.62 0.99 0.83 1.32-0.21-0.33-0.62-0.99-0.83-1.32z" fill="#e8b835"/> <path d="m485.34 244.01c0.12 0.2 0.38 0.6 0.5 0.8-0.12-0.2-0.38-0.6-0.5-0.8z" fill="#e8b835"/> <path d="m486.5 245.86c0.2 0.45 0.6 1.36 0.8 1.81-0.2-0.45-0.6-1.36-0.8-1.81z" fill="#e8b835"/> <path d="m487.6 248.21c0.05 0.09 0.15 0.26 0.2 0.34l-0.09-0.13-0.11-0.21z" fill="#e8b835"/> <path d="m489.55 251.16c0.11 0.18 0.33 0.54 0.45 0.72-0.12-0.18-0.34-0.54-0.45-0.72z" fill="#e8b835"/> <path d="m490.6 252.88c0.09 0.16 0.27 0.47 0.36 0.62-0.09-0.15-0.27-0.46-0.36-0.62z" fill="#e8b835"/> <path d="m491.97 255.27c0.09 0.16 0.27 0.48 0.36 0.64-0.09-0.16-0.27-0.48-0.36-0.64z" fill="#e8b835"/> <path d="m492.33 255.91c0.09 0.16 0.27 0.47 0.36 0.63-0.09-0.16-0.27-0.47-0.36-0.63z" fill="#e8b835"/> <path d="m493.69 258.25c0.04 0.08 0.13 0.23 0.18 0.3-0.05-0.07-0.14-0.22-0.18-0.3z" fill="#e8b835"/> <path d="m494.78 260.15c0.06 0.1 0.18 0.31 0.24 0.41-0.06-0.1-0.18-0.31-0.24-0.41z" fill="#e8b835"/> <path d="m495.94 262.17c0.11 0.18 0.32 0.55 0.43 0.73-0.11-0.18-0.32-0.55-0.43-0.73z" fill="#e8b835"/> <path d="m496.37 262.9c0.09 0.16 0.28 0.48 0.37 0.64-0.09-0.16-0.28-0.48-0.37-0.64z" fill="#e8b835"/> <path d="m435.18 264.76c25.09 6.93 49.71 15.46 74.73 22.65l0.22 0.82c-28.09 0.64-56.22 0.11-84.32 0.26 2.29-3.71 7.85-4.44 8.78-9.09 1.21-4.78 0.25-9.77 0.59-14.64z" fill="#e8b835"/> <path d="m498.85 267.3c0.1 0.21 0.3 0.63 0.39 0.84-0.09-0.21-0.29-0.63-0.39-0.84z" fill="#e8b835"/> <path d="m499.7 269.18c0.12 0.2 0.36 0.61 0.47 0.81-0.11-0.2-0.35-0.61-0.47-0.81z" fill="#e8b835"/> <path d="m500.17 269.99c0.15 0.2 0.44 0.58 0.59 0.77-0.15-0.19-0.44-0.57-0.59-0.77z" fill="#e8b835"/> <path d="m501.45 271.74c0.12 0.19 0.36 0.57 0.49 0.77-0.13-0.2-0.37-0.58-0.49-0.77z" fill="#e8b835"/> <path d="m502.95 274.26c0.09 0.16 0.27 0.48 0.36 0.64-0.09-0.16-0.27-0.48-0.36-0.64z" fill="#e8b835"/> <path d="m503.31 274.9c0.09 0.16 0.27 0.47 0.37 0.63-0.1-0.16-0.28-0.47-0.37-0.63z" fill="#e8b835"/> <path d="m504.68 277.25c0.04 0.08 0.12 0.22 0.16 0.29-0.04-0.07-0.12-0.21-0.16-0.29z" fill="#e8b835"/> <path d="m505.79 279.2c0.04 0.07 0.12 0.2 0.16 0.27-0.04-0.07-0.12-0.2-0.16-0.27z" fill="#e8b835"/> <path d="m506.92 281.16c0.1 0.17 0.3 0.51 0.4 0.69-0.1-0.18-0.3-0.52-0.4-0.69z" fill="#e8b835"/> <path d="m507.32 281.85c0.1 0.17 0.3 0.51 0.39 0.68-0.09-0.17-0.29-0.51-0.39-0.68z" fill="#e8b835"/> <path d="m508.71 284.25c0.04 0.07 0.11 0.21 0.15 0.28-0.04-0.07-0.11-0.21-0.15-0.28z" fill="#e8b835"/> <path d="m509.92 286.51c0.13 0.23 0.38 0.69 0.51 0.92l-0.52-0.02 0.01-0.9z" fill="#e8b835"/> <path d="m147.21 341.08c10.31-17.58 20.11-35.49 30.76-52.86 51.63 0.19 103.27-0.29 154.89 0.19l0.66 0.05c-26.11 0.84-52.29-0.22-78.4 0.44-4.98 3.21-8.3 8.41-13.07 11.91-4.43 3.23-7.69 7.73-11.92 11.18-5.93 4.37-10.34 10.43-16.36 14.71-6.96 7.37-14.99 13.58-22.01 20.91-5.26 4.04-9.66 9.03-14.56 13.48-5.39 3.91-9.52 9.21-14.56 13.53-0.13 0.11-0.38 0.33-0.51 0.45-0.27 0.21-0.8 0.65-1.07 0.86-0.13 0.11-0.37 0.31-0.5 0.42-3.97 3.07-7.01 7.12-10.91 10.27-0.13 0.11-0.38 0.32-0.5 0.42-0.13 0.11-0.38 0.32-0.51 0.42-5.69 4.67-10.25 10.58-16.22 14.93-6.01 5.96-12.79 11.08-18.5 17.36-8.44 6.94-15.74 15.13-24.44 21.78 2.16-4.71 5.02-9.03 7.53-13.54 16.74-28.97 33.46-57.94 50.2-86.91z" fill="#296ad9"/> <path d="m89.04 442.17c0.11-0.16 0.33-0.48 0.44-0.64l-0.03 0.65-0.41-0.01z" fill="#296ad9"/> <path id="#2a71e9ff" fill="#2a71e9" d="m333.52 288.46c30.76 0.13 61.52 0.04 92.29 0.03 28.1-0.15 56.23 0.38 84.32-0.26l0.59-0.04 0.4 0.11v0.08c-29.66 51.27-59.23 102.6-88.89 153.88-110.93-0.03-221.86 0.1-332.78-0.08l0.03-0.65c8.7-6.65 16-14.84 24.44-21.78 5.71-6.28 12.49-11.4 18.5-17.36 5.97-4.35 10.53-10.26 16.22-14.93 0.13-0.1 0.38-0.31 0.51-0.42 0.12-0.1 0.37-0.31 0.5-0.42 3.9-3.15 6.94-7.2 10.91-10.27 0.13-0.11 0.37-0.31 0.5-0.42 0.27-0.21 0.8-0.65 1.07-0.86 0.13-0.12 0.38-0.34 0.51-0.45 5.04-4.32 9.17-9.62 14.56-13.53 4.9-4.45 9.3-9.44 14.56-13.48 7.02-7.33 15.05-13.54 22.01-20.91 6.02-4.28 10.43-10.34 16.36-14.71 4.23-3.45 7.49-7.95 11.92-11.18 4.77-3.5 8.09-8.7 13.07-11.91 26.11-0.66 52.29 0.4 78.4-0.44z"/> <path d="m162.13 375.07c0.13-0.12 0.38-0.34 0.51-0.45-0.13 0.11-0.38 0.33-0.51 0.45z" fill="#286ee6"/> <path d="m161.06 375.93c0.27-0.21 0.8-0.65 1.07-0.86-0.27 0.21-0.8 0.65-1.07 0.86z" fill="#286ee6"/> <path d="m160.56 376.35c0.13-0.11 0.37-0.31 0.5-0.42-0.13 0.11-0.37 0.31-0.5 0.42z" fill="#286ee6"/> <path d="m149.15 387.04c0.12-0.1 0.37-0.31 0.5-0.42-0.13 0.11-0.38 0.32-0.5 0.42z" fill="#286ee6"/> <path d="m148.64 387.46c0.13-0.1 0.38-0.31 0.51-0.42-0.13 0.11-0.38 0.32-0.51 0.42z" fill="#286ee6"/> </svg> <div>Google Drive</div> </button> </div> </div> </div> <div class="rs-box rs-box-sign-in" aria-hidden="true"> <div class="rs-content"> <form name="rs-sign-in-form" class="rs-sign-in-form"> <h1 class="rs-big-headline">Connect your storage</h1> <input type="text" name="rs-user-address" placeholder="user@provider.com" autocapitalize="off"> <div class="rs-sign-in-error rs-hidden"></div> <button type="submit" class="rs-connect">Connect</button> <a href="https://remotestorage.io/get/" class="rs-help" target="_blank" rel="noopener">Need help?</a> </form> </div> </div> </div> ';var w=document.createElement("style");return w.innerHTML=`#remotestorage-widget {
  z-index: 21000000;
}

.rs-widget {
  box-sizing: border-box;
  overflow: hidden;
  max-width: 350px;
  padding: 10px;
  margin: 10px;
  border-radius: 3px;
  background-color: #fff;
  box-shadow: 0 1px 2px 0 rgba(0,0,0,0.1), 0 3px 8px 0 rgba(0,0,0,0.2);
  font-family: arial, sans-serif;
  font-size: 16px;
  color: #333;
  will-change: max-height, height, width, opacity, max-width, background, box-shadow;
  transition-property: width, height, opacity, max-width, max-height, background, box-shadow;
  transition-duration: 300ms;
}

.rs-widget * {
  box-sizing: border-box;
}

.rs-widget .rs-hidden {
  display: none;
}

.rs-box {
  overflow: hidden;
  will-change: height;
  transition-property: height, width, max-height;
  transition-duration: 300ms;
  transition-timing-function: ease-in;
  opacity: 0;
  max-height: 0px;
}

.rs-box.rs-selected:not([aria-hidden=true]) {
  opacity: 1;
  max-height: 420px;
}

/* Main logo */
.rs-main-logo {
  float: left;
  height: 36px;
  width: 36px;
  margin-top: 1px;
  margin-right: 0.625em;
  transition: margin-left 300ms ease-out, transform 300ms ease-out;
  cursor: pointer;
}
.rs-widget .rs-backend-remotestorage svg#rs-main-logo-remotestorage {
  display: block;
}
.rs-widget[class*="rs-backend-"]:not(.rs-backend-remotestorage) svg#rs-main-logo-remotestorage {
  display: none;
}
.rs-widget.rs-backend-dropbox svg#rs-main-logo-dropbox {
  display: block;
}
.rs-widget:not(.rs-backend-dropbox) svg#rs-main-logo-dropbox {
  display: none;
}
.rs-widget.rs-backend-googledrive svg#rs-main-logo-googledrive {
  display: block;
}
.rs-widget:not(.rs-backend-googledrive) svg#rs-main-logo-googledrive {
  display: none;
}

polygon.rs-logo-shape {
  fill: #FF4B03;
}

polygon.rs-logo-shape,
#rs-main-logo-dropbox path,
#rs-main-logo-googledrive path {
  transition-property: fill;
  transition-duration: 0.5s;
}

.rs-offline polygon.rs-logo-shape,
.rs-offline #rs-main-logo-dropbox path,
.rs-offline #rs-main-logo-googledrive path {
  fill: #888;
  transition-property: fill;
  transition-duration: 0.5s;
}

/* Hide everything except logo when connected and clicked outside of box */
.rs-closed {
  max-width: 56px;
  background-color: transparent;
  box-shadow: none;
  opacity: 0.5;

  transition: max-height 100ms ease-out 0ms, max-width 300ms ease-out 300ms, background 300ms ease-in 200ms, opacity 300ms ease 200ms;
}

.rs-closed:hover {
  cursor: pointer;
  opacity: 1;
}

.rs-box-initial {
  transition-duration: 0ms;
}

.rs-box-initial:hover {
  cursor: pointer;
}

.rs-widget a {
  color: #0093cc;
}

/* HEADLINE */
.rs-small-headline {
  font-size: 1em;
  font-weight: bold;
  margin: 0;
  margin-bottom: 2px;
  height: 1.2em;
  word-break: break-all;
  overflow: hidden;
  line-height: 1em;
}

.rs-sub-headline {
  word-break: break-all;
  overflow: hidden;
  color: #666;
  font-size: 0.92em;
  height: 1.2em;
}
.rs-big-headline {
  font-size: 1.625em;
  font-weight: normal;
  text-align: center;
  margin-top: 20px;
  margin-bottom: 20px;
}

/* BUTTONS  */
.rs-button {
  font: inherit;
  color: inherit;
  background-color: transparent;
  border: 1px solid #dcdcdc;
  border-radius: 3px;
  cursor: pointer;
}
.rs-button-small {
  padding: 0.6em 0.7em;
  margin-left: 0.2em;
  transition: border-color 300ms ease-out;
}
.rs-button-small svg {
  vertical-align: top;
}
.rs-button-wrap {
  margin-top: 10px;
}

.rs-button-wrap img,
.rs-button-wrap svg {
  float: left;
  margin-right: 0.6em;
  width: 40px;
  height: 40px;
}

.rs-button-big {
  padding: 15px 10px;
  margin-bottom: 10px;
  display: block;
  width: 100%;
  text-align: left;
  transition: box-shadow 200ms;
}
.rs-button-big > div {
  font-size: 1.125em;
  padding: 10px 0;
}
.rs-button-big:hover {
  box-shadow: 0 1px 2px 0 rgba(0,0,0,0.1), 0 3px 8px 0 rgba(0,0,0,0.2);
}
.rs-button-big:active {
  background-color: #eee;
  box-shadow: 0 1px 2px 0 rgba(0,0,0,0.1), 0 3px 8px 0 rgba(0,0,0,0.2);
}
.rs-button-big:last-child {
  margin-bottom: 0;
}

.rs-content {
  padding: 0 10px 10px 10px;
}


.rs-state-choose .rs-main-logo,
.rs-state-sign-in .rs-main-logo {
  margin-left: 45%;
  float: none;
}

.rs-sign-in-form input[type=text] {
  padding: 15px 10px;
  display: block;
  width: 100%;
  font: inherit;
  height: 52px;
  border: 1px solid #aaa;
  border-radius: 0;
  box-shadow: none;
}
.rs-sign-in-form button.rs-connect {
  padding: 15px 10px;
  margin-top: 20px;
  margin-bottom: 15px;
  display: block;
  width: 100%;
  border: none;
  border-radius: 3px;
  background-color: #3fb34f;
  font: inherit;
  color: #fff;
  transition: box-shadow 200ms, background-color 200ms;
}

.rs-sign-in-form button.rs-connect:hover {
  cursor: pointer;
  background-color: #4BCB5D;
  box-shadow: 0 1px 2px 0 rgba(0,0,0,0.1), 0 3px 8px 0 rgba(0,0,0,0.2);
}

.rs-sign-in-form button.rs-connect:active {
  background-color: #3fb34f;
}

.rs-sign-in-form button.rs-connect:disabled,
.rs-sign-in-form button.rs-connect:disabled:hover {
  background-color: #aaa;
}

.rs-sign-in-form button.rs-connecting svg {
  height: 1em;
  width: auto;
  vertical-align: middle;
  margin-left: 0.5em;
  animation: rs-spin 1s linear infinite;
}

.rs-sign-in-error.rs-hidden,
.rs-box-error.rs-hidden {
  height: 0;
}

.rs-sign-in-error.rs-visible,
.rs-box-error.rs-visible {
  height: auto;
  border-radius: 3px;
  padding: 0.5em 0.5em;
  margin-top: 0.5em;
  text-align: center;
  background-color: rgba(255,0,0,0.1);
  color: darkred;
}

.rs-box-error {
  display: flex;
  flex-direction: row;
}

.rs-box-error .rs-error-message {
  flex: auto;
}

 /*Choose provider box */
.rs-box-choose {
  text-align: center;
  overflow: hidden;
}

.rs-box-choose p {
  margin-top: 0;
  margin-bottom: 20px;
  line-height: 1.4em;
}

/*Connected box */
.rs-box-connected {
  display: flex;
  flex-direction: row;
  height: 40px;
  transition: height 0s;
}
.rs-connected-text {
  flex: auto;
  min-width: 0;
}
.rs-box-connected .rs-user {
  font-weight: bold;
  text-overflow: ellipsis;
  overflow: hidden;
  word-break: keep-all;
}
.rs-connected-buttons, .rs-error-buttons {
  flex: none;
}
.rs-disconnect:hover {
  border-color: #FF2D2D;
}
.rs-disconnect:hover .rs-icon{
  fill: #FF2D2D;
}
.rs-sync:hover {
  border-color: #FFBB0C;
}
.rs-sync:hover .rs-icon {
  fill: #FFBB0C;
}
.rs-sync.rs-rotate {
  border-color: #FFBB0C;
}
.rs-sync.rs-rotate .rs-icon {
  fill: #FFBB0C;
  animation: rs-spin 1s linear infinite;
}

/* Floating widget styles (top right corner) */
.rs-floating {
  position: fixed;
  top: 0;
  right: 0;
}

@keyframes rs-spin {
  100% {
    transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

/* Small/mobile screens */
@media screen and (max-width: 420px) {
  .rs-widget {
    font-size: 100%;
    transition: all 300ms ease-out;
    max-width: 400px;
  }
  .rs-floating {
    position: relative;
    top: auto;
    right: auto
  }
  .rs-closed {
    max-width: 56px;
  }
  .rs-state-choose,
  .rs-state-sign-in {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    max-width: 100%;
  }
}

/* remove dotted outline border on Firefox */
.rs-widget a:focus,
.rs-widget a:active,
.rs-widget button:focus,
.rs-widget input:focus {
  outline:none;
}
.rs-widget button::-moz-focus-inner,
.rs-widget input[type="button"]::-moz-focus-inner {
  border:0;
}

/* prevent rounded buttons on mobile Safari */
.rs-widget button,
.rs-widget input[type="button"] {
  -webkit-appearance: none;
}

.remotestorage-widget-modal-backdrop {
  display: none;
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: rgba(0, 0, 0, 0.5);
  opacity: 0;
  transition: opacity 0.3s linear;
}

.remotestorage-widget-modal-backdrop.visible {
  opacity: 1;
  transition: opacity 0.3s linear;
}
`,g.appendChild(w),g}},{key:"setModalClass",value:function(){if(this.modalBackdrop){if(this.modalBackdrop==="onlySmallScreens"&&!this.isSmallScreen())return;this.rsWidget.classList.add("rs-modal")}}},{key:"setupElements",value:function(){this.rsWidget=document.querySelector(".rs-widget"),this.rsBackdrop=document.querySelector(".remotestorage-widget-modal-backdrop"),this.rsInitial=document.querySelector(".rs-box-initial"),this.rsChoose=document.querySelector(".rs-box-choose"),this.rsConnected=document.querySelector(".rs-box-connected"),this.rsSignIn=document.querySelector(".rs-box-sign-in"),this.rsConnectedLabel=document.querySelector(".rs-box-connected .rs-sub-headline"),this.rsChooseRemoteStorageButton=document.querySelector("button.rs-choose-rs"),this.rsChooseDropboxButton=document.querySelector("button.rs-choose-dropbox"),this.rsChooseGoogleDriveButton=document.querySelector("button.rs-choose-googledrive"),this.rsErrorBox=document.querySelector(".rs-box-error .rs-error-message"),this.rs.apiKeys.hasOwnProperty("googledrive")||this.rsChooseGoogleDriveButton.parentNode.removeChild(this.rsChooseGoogleDriveButton),this.rs.apiKeys.hasOwnProperty("dropbox")||this.rsChooseDropboxButton.parentNode.removeChild(this.rsChooseDropboxButton),this.rsSignInForm=document.querySelector(".rs-sign-in-form"),this.rsAddressInput=this.rsSignInForm.querySelector("input[name=rs-user-address]"),this.rsConnectButton=document.querySelector(".rs-connect"),this.rsDisconnectButton=document.querySelector(".rs-disconnect"),this.rsSyncButton=document.querySelector(".rs-sync"),this.rsLogo=document.querySelector(".rs-widget-icon"),this.rsErrorReconnectLink=document.querySelector(".rs-box-error a.rs-reconnect"),this.rsErrorDisconnectButton=document.querySelector(".rs-box-error button.rs-disconnect"),this.rsConnectedUser=document.querySelector(".rs-connected-text h1.rs-user")}},{key:"setupHandlers",value:function(){var g=this;this.rs.on("connected",function(){return g.eventHandler("connected")}),this.rs.on("ready",function(){return g.eventHandler("ready")}),this.rs.on("disconnected",function(){return g.eventHandler("disconnected")}),this.rs.on("network-online",function(){return g.eventHandler("network-online")}),this.rs.on("network-offline",function(){return g.eventHandler("network-offline")}),this.rs.on("error",function(w){return g.eventHandler("error",w)}),this.setEventListeners(),this.setClickHandlers()}},{key:"attach",value:function(g){var w,k=this.createHtmlTemplate();if(g){if(w=document.getElementById(g),!parent)throw'Failed to find target DOM element with id="'+g+'"'}else w=document.body;w.appendChild(k),this.setupElements(),this.setupHandlers(),this.setInitialState(),this.setModalClass()}},{key:"setEventListeners",value:function(){var g=this;this.rsSignInForm.addEventListener("submit",function(w){w.preventDefault();var k=document.querySelector("input[name=rs-user-address]").value;g.disableConnectButton(),g.rs.connect(k)})}},{key:"showChooseOrSignIn",value:function(){this.rsWidget.classList.contains("rs-modal")&&(this.rsBackdrop.style.display="block",this.rsBackdrop.classList.add("visible")),this.rs.apiKeys&&Object.keys(this.rs.apiKeys).length>0?this.setState("choose"):this.setState("sign-in")}},{key:"setClickHandlers",value:function(){var g=this;this.rsInitial.addEventListener("click",function(){return g.showChooseOrSignIn()}),this.rsChooseRemoteStorageButton.addEventListener("click",function(){g.setState("sign-in"),g.rsAddressInput.focus()}),this.rsChooseDropboxButton.addEventListener("click",function(){return g.rs.dropbox.connect()}),this.rsChooseGoogleDriveButton.addEventListener("click",function(){return g.rs.googledrive.connect()}),this.rsDisconnectButton.addEventListener("click",function(){return g.rs.disconnect()}),this.rsErrorReconnectLink.addEventListener("click",function(){return g.rs.reconnect()}),this.rsErrorDisconnectButton.addEventListener("click",function(){return g.rs.disconnect()}),this.rs.hasFeature("Sync")&&this.rsSyncButton.addEventListener("click",function(){g.rsSyncButton.classList.contains("rs-rotate")?(g.rs.stopSync(),g.rsSyncButton.classList.remove("rs-rotate")):(g.rsConnectedLabel.textContent="Synchronizing",g.rs.startSync(),g.rsSyncButton.classList.add("rs-rotate"))}),document.addEventListener("click",function(){return g.close()}),this.rsWidget.addEventListener("click",function(w){return w.stopPropagation()}),this.rsLogo.addEventListener("click",function(){return g.toggle()})}},{key:"toggle",value:function(){this.closed?this.open():this.state==="initial"?this.showChooseOrSignIn():this.close()}},{key:"open",value:function(){this.closed=!1,this.rsWidget.classList.remove("rs-closed"),this.shouldCloseWhenSyncDone=!1;var g=document.querySelector(".rs-box.rs-selected");g&&g.setAttribute("aria-hidden","false")}},{key:"close",value:function(){var g=this;if(this.state!=="error"){if(!this.leaveOpen&&this.active){this.closed=!0,this.rsWidget.classList.add("rs-closed");var w=document.querySelector(".rs-box.rs-selected");w&&w.setAttribute("aria-hidden","true")}else this.active?this.setState("connected"):this.setInitialState();this.rsWidget.classList.contains("rs-modal")&&(this.rsBackdrop.classList.remove("visible"),setTimeout(function(){g.rsBackdrop.style.display="none"},300))}}},{key:"disableConnectButton",value:function(){this.rsConnectButton.disabled=!0,this.rsConnectButton.classList.add("rs-connecting"),this.rsConnectButton.innerHTML="Connecting ".concat(`<svg width="38" height="38" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg" stroke="#fff">
  <g fill="none" fill-rule="evenodd">
    <g transform="translate(1 1)" stroke-width="2">
      <circle stroke-opacity=".5" cx="18" cy="18" r="18"/>
      <path d="M36 18c0-9.94-8.06-18-18-18"></path>
    </g>
  </g>
</svg>
`)}},{key:"enableConnectButton",value:function(){this.rsConnectButton.disabled=!1,this.rsConnectButton.textContent="Connect",this.rsConnectButton.classList.remove("rs-connecting")}},{key:"setOffline",value:function(){this.online&&(this.rsWidget.classList.add("rs-offline"),this.rsConnectedLabel.textContent="Offline",this.online=!1)}},{key:"setOnline",value:function(){this.online||(this.rsWidget.classList.remove("rs-offline"),this.active&&(this.rsConnectedLabel.textContent="Connected")),this.online=!0}},{key:"setBackendClass",value:function(g){this.rsWidget.classList.remove("rs-backend-remotestorage"),this.rsWidget.classList.remove("rs-backend-dropbox"),this.rsWidget.classList.remove("rs-backend-googledrive"),g&&this.rsWidget.classList.add("rs-backend-".concat(g))}},{key:"showErrorBox",value:function(g){this.rsErrorBox.innerHTML=g,this.setState("error")}},{key:"hideErrorBox",value:function(){this.rsErrorBox.innerHTML="",this.close()}},{key:"handleDiscoveryError",value:function(g){var w=document.querySelector(".rs-sign-in-error");w.innerHTML=g.message,w.classList.remove("rs-hidden"),w.classList.add("rs-visible"),this.enableConnectButton()}},{key:"handleSyncError",value:function(g){console.debug('Encountered SyncError: "'.concat(g.message,'"')),this.setOffline()}},{key:"handleUnauthorized",value:function(g){g.code&&g.code==="access_denied"?this.rs.disconnect():(this.open(),this.showErrorBox(g.message+" "),this.rsErrorBox.appendChild(this.rsErrorReconnectLink),this.rsErrorReconnectLink.classList.remove("rs-hidden"))}},{key:"updateLastSyncedStatus",value:function(){var g=new Date;if(this.online)return this.lastSynced=g,void(this.rsConnectedLabel.textContent="Synced just now");if(this.lastSynced){var w=Math.round((g.getTime()-this.lastSynced.getTime())/1e3);this.rsConnectedLabel.textContent="Synced ".concat(w," seconds ago")}else this.rsWidget.classList.contains("rs-state-unauthorized")||(this.rsConnectedLabel.textContent="Offline")}},{key:"isSmallScreen",value:function(){return window.innerWidth<421}}],m&&o(p.prototype,m),Object.defineProperty(p,"prototype",{writable:!1}),f}();const u=l;return r.default})()})}(my)),my.exports}var s8=o8();const l8=Sp(s8);var Om={exports:{}};/*! For license information please see remotestorage.js.LICENSE.txt */var a8=Om.exports,Mw;function u8(){return Mw||(Mw=1,function(n,e){(function(t,r){n.exports=r()})(a8,function(){return function(){var t={548:function(l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.Access=void 0;class f{static _rs_init(){}constructor(){this.reset()}get scopes(){return Object.keys(this.scopeModeMap).map(m=>({name:m,mode:this.scopeModeMap[m]}))}get scopeParameter(){return this.scopes.map(m=>`${this._scopeNameForParameter(m)}:${m.mode}`).join(" ")}claim(m,g){if(typeof m!="string"||m.indexOf("/")!==-1||m.length===0)throw new Error("Scope should be a non-empty string without forward slashes");if(!g.match(/^rw?$/))throw new Error("Mode should be either 'r' or 'rw'");this._adjustRootPaths(m),this.scopeModeMap[m]=g}get(m){return this.scopeModeMap[m]}remove(m){const g={};for(const w in this.scopeModeMap)g[w]=this.scopeModeMap[w];this.reset(),delete g[m];for(const w in g)this.claim(w,g[w])}checkPermission(m,g){const w=this.get(m);return w&&(g==="r"||w==="rw")}checkPathPermission(m,g){if(this.checkPermission("*",g))return!0;const w=this._getModuleName(m);return!!this.checkPermission(w,g)}reset(){this.rootPaths=[],this.scopeModeMap={}}_getModuleName(m){if(m[0]!=="/")throw new Error("Path should start with a slash");const g=m.replace(/^\/public/,"").match(/^\/([^/]*)\//);return g?g[1]:"*"}_adjustRootPaths(m){"*"in this.scopeModeMap||m==="*"?this.rootPaths=["/"]:m in this.scopeModeMap||(this.rootPaths.push("/"+m+"/"),this.rootPaths.push("/public/"+m+"/"))}_scopeNameForParameter(m){if(m.name==="*"&&this.storageType){if(this.storageType==="2012.04")return"";if(this.storageType.match(/remotestorage-0[01]/))return"root"}return m.name}setStorageType(m){this.storageType=m}}u.Access=f,u.default=f},275:function(l,u,f){var p=this&&this.__awaiter||function(V,I,W,B){return new(W||(W=Promise))(function(z,H){function Q(U){try{_(B.next(U))}catch(D){H(D)}}function q(U){try{_(B.throw(U))}catch(D){H(D)}}function _(U){var D;U.done?z(U.value):(D=U.value,D instanceof W?D:new W(function(G){G(D)})).then(Q,q)}_((B=B.apply(V,I||[])).next())})},m=this&&this.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(u,"__esModule",{value:!0}),u.Authorize=void 0;const g=m(f(334)),w=f(746),k=m(f(503)),b=f(368);let A;function P(V){const I=V||F.getLocation().href,W={};for(const[H,Q]of new URL(I).searchParams)W[H]=Q;const B=I.indexOf("#");if(B===-1)return W;const z=I.substring(B+1);return z.includes("=")?z.split("&").reduce(function(H,Q){const q=Q.split("=");if(q[0]==="state"&&q[1].match(/rsDiscovery/)){let _=decodeURIComponent(q[1]);const U=_.substr(_.indexOf("rsDiscovery=")).split("&")[0].split("=")[1];H.rsDiscovery=JSON.parse(atob(U)),_=_.replace(new RegExp("&?rsDiscovery="+U),""),_.length>0&&(H.state=_)}else H[decodeURIComponent(q[0])]=decodeURIComponent(q[1]);return H},W):W}class F{static authorize(I,W){if((0,g.default)("[Authorize] authURL = ",W.authURL,"scope = ",W.scope,"redirectUri = ",W.redirectUri,"clientId = ",W.clientId,"response_type =",W.response_type),!W.scope)throw new Error("Cannot authorize due to undefined or empty scope; did you forget to access.claim()?");if(!(0,w.localStorageAvailable)()&&I.backend==="remotestorage"){W.redirectUri+=W.redirectUri.indexOf("#")>0?"&":"#";const z={userAddress:I.remote.userAddress,href:I.remote.href,storageApi:I.remote.storageApi,properties:I.remote.properties};W.redirectUri+="rsDiscovery="+(0,w.toBase64)(JSON.stringify(z))}const B=function(z){const H=new URL(z.redirectUri);z.state||(z.state=H.hash?H.hash.substring(1):""),z.response_type||(z.response_type="token");const Q=new URL(z.authURL);Q.searchParams.set("redirect_uri",z.redirectUri.replace(/#.*$/,"")),Q.searchParams.set("scope",z.scope),Q.searchParams.set("client_id",z.clientId);for(const q of["state","response_type","code_challenge","code_challenge_method","token_access_type"]){const _=z[q];_&&Q.searchParams.set(q,_)}return Q.href}(W);w.globalContext.cordova?F.openWindow(B,W.redirectUri,"location=yes,clearsessioncache=yes,clearcache=yes").then(z=>{I.remote.configure({token:z.access_token})}):F.setLocation(B)}static refreshAccessToken(I,W,B){return p(this,void 0,void 0,function*(){var z,H,Q;yield W.configure({token:null,tokenType:null});const q=new URLSearchParams({grant_type:"refresh_token",client_id:W.clientId,refresh_token:B}),_=yield(0,b.requestWithTimeout)("POST",W.TOKEN_URL,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:q.toString(),responseType:"json"});if((_==null?void 0:_.status)!==200)throw yield W.configure({refreshToken:null}),new k.default("refresh token rejected:"+JSON.stringify(_.response));{(0,g.default)(`[Authorize] access token good for ${(z=_==null?void 0:_.response)===null||z===void 0?void 0:z.expires_in} seconds`);const U={token:(H=_==null?void 0:_.response)===null||H===void 0?void 0:H.access_token,tokenType:(Q=_==null?void 0:_.response)===null||Q===void 0?void 0:Q.token_type};if(!U.token)throw new Error(`no access_token in "successful" refresh: ${_.response}`);yield W.configure(U)}})}static setLocation(I){if(typeof I=="string")document.location.href=I;else{if(typeof I!="object")throw"Invalid location "+I;document.location=I}}static _rs_supported(){return typeof document<"u"}static _rs_cleanup(I){I.removeEventListener("features-loaded",A)}}u.Authorize=F,F.IMPLIED_FAKE_TOKEN=!1,F.getLocation=function(){return document.location},F.openWindow=function(V,I,W){return new Promise((B,z)=>{const H=open(V,"_blank",W);function Q(){z("Authorization was canceled")}H&&!H.closed?(H.addEventListener("loadstart",function(q){if(q.url.indexOf(I)!==0)return;H.removeEventListener("exit",Q),H.close();const _=P(q.url);_?B(_):z("Authorization error")}),H.addEventListener("exit",Q)):z("Authorization popup was blocked")})},F._rs_init=function(V){const I=P();let W;I&&(W=F.getLocation(),W.hash=""),A=function(){let B=!1;if(I){if(I.error)throw I.error==="access_denied"?new k.default("Authorization failed: access denied",{code:"access_denied"}):new k.default(`Authorization failed: ${I.error}`);I.rsDiscovery&&V.remote.configure(I.rsDiscovery),I.access_token&&(V.remote.configure({token:I.access_token}),B=!0),I.remotestorage&&(V.connect(I.remotestorage),B=!0),I.state&&(W=F.getLocation(),F.setLocation(W.href.split("#")[0]+"#"+I.state)),I.code&&(function(z){p(this,void 0,void 0,function*(){var H,Q,q,_;const U=sessionStorage.getItem("remotestorage:codeVerifier");if(!U)return void(0,g.default)("[Authorize] Ignoring OAuth code parameter, because no PKCE code verifier found in sessionStorage");W=F.getLocation();let D=W.origin;W.pathname!=="/"&&(D+=W.pathname);const G=new URLSearchParams({code:z,grant_type:"authorization_code",client_id:V.remote.clientId,redirect_uri:D,code_verifier:U}),le=yield(0,b.requestWithTimeout)("POST",V.remote.TOKEN_URL,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:G.toString(),responseType:"json"});if(le.status===200){(0,g.default)(`[Authorize] access token good for ${(H=le==null?void 0:le.response)===null||H===void 0?void 0:H.expires_in} seconds`);const oe={token:(Q=le==null?void 0:le.response)===null||Q===void 0?void 0:Q.access_token,refreshToken:(q=le==null?void 0:le.response)===null||q===void 0?void 0:q.refresh_token,tokenType:(_=le==null?void 0:le.response)===null||_===void 0?void 0:_.token_type};oe.token?V.remote.configure(oe):V._emit("error",new Error(`no access_token in "successful" response: ${le.response}`)),sessionStorage.removeItem("remotestorage:codeVerifier")}else V._emit("error",new Error(`${le.statusText}: ${le.response}`))})}(I.code),B=!0),B||V.remote.stopWaitingForToken()}else V.remote.stopWaitingForToken()},V.on("features-loaded",A)},u.default=F},424:function(l,u,f){var p=this&&this.__awaiter||function(V,I,W,B){return new(W||(W=Promise))(function(z,H){function Q(U){try{_(B.next(U))}catch(D){H(D)}}function q(U){try{_(B.throw(U))}catch(D){H(D)}}function _(U){var D;U.done?z(U.value):(D=U.value,D instanceof W?D:new W(function(G){G(D)})).then(Q,q)}_((B=B.apply(V,I||[])).next())})},m=this&&this.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(u,"__esModule",{value:!0}),u.BaseClient=void 0;const g=m(f(439)),w=m(f(613)),k=m(f(491)),b=m(f(93)),A=m(f(28)),P=f(746);class F{constructor(I,W){if(this.schemas={configurable:!0,get(){return F.Types.inScope(this.moduleName)}},W[W.length-1]!=="/")throw"Not a folder: "+W;W==="/"&&(this.makePath=B=>(B[0]==="/"?"":"/")+B),this.storage=I,this.base=W,this.moduleName=function(B){const z=B.split("/");return B.length>2?z[1]:"root"}(this.base),this.addEvents(["change"]),this.on=this.on.bind(this),I.onChange(this.base,this._fireChange.bind(this))}scope(I){return new F(this.storage,this.makePath(I))}getListing(I,W){return p(this,void 0,void 0,function*(){if(typeof I!="string")I="";else if(I.length>0&&!(0,P.isFolder)(I))return Promise.reject("Not a folder: "+I);return this.storage.get(this.makePath(I),W).then(B=>B.statusCode===404?{}:B.body)})}getAll(I,W){return p(this,void 0,void 0,function*(){if(typeof I!="string")I="";else if(I.length>0&&!(0,P.isFolder)(I))return Promise.reject("Not a folder: "+I);return this.storage.get(this.makePath(I),W).then(B=>{if(B.statusCode===404)return{};if(typeof B.body=="object"){const z=Object.keys(B.body);if(z.length===0)return{};const H=z.map(Q=>this.storage.get(this.makePath(I+Q),W).then(q=>{if(typeof q.body=="string")try{q.body=JSON.parse(q.body)}catch{}typeof q.body=="object"&&(B.body[Q]=q.body)}));return Promise.all(H).then(()=>B.body)}})})}getFile(I,W){return p(this,void 0,void 0,function*(){return typeof I!="string"?Promise.reject("Argument 'path' of baseClient.getFile must be a string"):this.storage.get(this.makePath(I),W).then(B=>({data:B.body,contentType:B.contentType,revision:B.revision}))})}storeFile(I,W,B){return p(this,void 0,void 0,function*(){return typeof I!="string"?Promise.reject("Argument 'mimeType' of baseClient.storeFile must be a string"):typeof W!="string"?Promise.reject("Argument 'path' of baseClient.storeFile must be a string"):typeof B!="string"&&typeof B!="object"?Promise.reject("Argument 'body' of baseClient.storeFile must be a string, ArrayBuffer, or ArrayBufferView"):(this.storage.access.checkPathPermission(this.makePath(W),"rw")||console.warn("WARNING: Editing a document to which only read access ('r') was claimed"),this.storage.put(this.makePath(W),B,I).then(z=>z.statusCode===200||z.statusCode===201?z.revision:Promise.reject("Request (PUT "+this.makePath(W)+") failed with status: "+z.statusCode)))})}getObject(I,W){return p(this,void 0,void 0,function*(){return typeof I!="string"?Promise.reject("Argument 'path' of baseClient.getObject must be a string"):this.storage.get(this.makePath(I),W).then(B=>{if(typeof B.body=="object")return B.body;if(typeof B.body=="string")try{return JSON.parse(B.body)}catch{throw new Error("Not valid JSON: "+this.makePath(I))}else if(B.body!==void 0&&B.statusCode===200)return Promise.reject("Not an object: "+this.makePath(I))})})}storeObject(I,W,B){return p(this,void 0,void 0,function*(){if(typeof I!="string")return Promise.reject("Argument 'typeAlias' of baseClient.storeObject must be a string");if(typeof W!="string")return Promise.reject("Argument 'path' of baseClient.storeObject must be a string");if(typeof B!="object")return Promise.reject("Argument 'object' of baseClient.storeObject must be an object");this._attachType(B,I);try{const z=this.validate(B);if(!z.valid)return Promise.reject(z)}catch(z){return Promise.reject(z)}return this.storage.put(this.makePath(W),JSON.stringify(B),"application/json; charset=UTF-8").then(z=>z.statusCode===200||z.statusCode===201?z.revision:Promise.reject("Request (PUT "+this.makePath(W)+") failed with status: "+z.statusCode))})}remove(I){return typeof I!="string"?Promise.reject("Argument 'path' of baseClient.remove must be a string"):(this.storage.access.checkPathPermission(this.makePath(I),"rw")||console.warn("WARNING: Removing a document to which only read access ('r') was claimed"),this.storage.delete(this.makePath(I)))}getItemURL(I){if(typeof I!="string")throw"Argument 'path' of baseClient.getItemURL must be a string";return this.storage.connected?(I=(0,P.cleanPath)(this.makePath(I)),this.storage.remote.href+I):void 0}cache(I,W="ALL"){if(typeof I!="string")throw"Argument 'path' of baseClient.cache must be a string";if(typeof W!="string")throw"Argument 'strategy' of baseClient.cache must be a string or undefined";if(W!=="FLUSH"&&W!=="SEEN"&&W!=="ALL")throw`Argument 'strategy' of baseclient.cache must be one of ["FLUSH", "SEEN", "ALL"]`;return this.storage.caching.set(this.makePath(I),W),this}declareType(I,W,B){let z;if(B&&typeof W=="string")z=W;else if(B||typeof W=="string"){if(!B&&typeof W=="string")throw new Error("declareType() requires a JSON Schema object to be passed, in order to validate object types/formats")}else B=W,z=this._defaultTypeURI(I);F.Types.declare(this.moduleName,I,z,B)}validate(I){const W=F.Types.getSchema(I["@context"]);if(W)return g.default.validateResult(I,W);throw new k.default(I["@context"])}_defaultTypeURI(I){return"http://remotestorage.io/spec/modules/"+encodeURIComponent(this.moduleName)+"/"+encodeURIComponent(I)}_attachType(I,W){I["@context"]=F.Types.resolveAlias(this.moduleName+"/"+W)||this._defaultTypeURI(W)}makePath(I){return this.base+(I||"")}_fireChange(I){A.default.changeEvents[I.origin]&&(["new","old","lastCommon"].forEach(function(W){if((!I[W+"ContentType"]||/^application\/(.*)json(.*)/.exec(I[W+"ContentType"]))&&typeof I[W+"Value"]=="string")try{I[W+"Value"]=JSON.parse(I[W+"Value"])}catch{}}),this._emit("change",I))}static _rs_init(){}}u.BaseClient=F,F.Types=w.default,(0,P.applyMixins)(F,[b.default]),u.default=F},285:function(l,u,f){var p=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(u,"__esModule",{value:!0}),u.Caching=void 0;const m=f(746),g=p(f(334));class w{constructor(){this.pendingActivations=[],this.reset()}set(b,A){if(typeof b!="string")throw new Error("path should be a string");if(!(0,m.isFolder)(b))throw new Error("path should be a folder");if(!A.match(/^(FLUSH|SEEN|ALL)$/))throw new Error("strategy should be 'FLUSH', 'SEEN', or 'ALL'");this._rootPaths[b]=A,A==="ALL"&&(this.activateHandler?this.activateHandler(b):this.pendingActivations.push(b))}enable(b){this.set(b,"ALL")}disable(b){this.set(b,"FLUSH")}onActivate(b){(0,g.default)("[Caching] Setting activate handler",b,this.pendingActivations),this.activateHandler=b;for(let A=0;A<this.pendingActivations.length;A++)b(this.pendingActivations[A]);this.pendingActivations=[]}checkPath(b){return this._rootPaths[b]!==void 0?this._rootPaths[b]:b==="/"?"SEEN":this.checkPath((0,m.containingFolder)(b))}reset(){this._rootPaths={}}static _rs_init(){}}u.Caching=w,u.default=w},496:function(l,u,f){var p=this&&this.__awaiter||function(W,B,z,H){return new(z||(z=Promise))(function(Q,q){function _(G){try{D(H.next(G))}catch(le){q(le)}}function U(G){try{D(H.throw(G))}catch(le){q(le)}}function D(G){var le;G.done?Q(G.value):(le=G.value,le instanceof z?le:new z(function(oe){oe(le)})).then(_,U)}D((H=H.apply(W,B||[])).next())})},m=this&&this.__importDefault||function(W){return W&&W.__esModule?W:{default:W}};const g=m(f(93)),w=m(f(28)),k=m(f(334)),b=f(746);function A(W){if(typeof W=="object"&&typeof W.path=="string")if((0,b.isFolder)(W.path)){if(W.local&&W.local.itemsMap)return W.local;if(W.common&&W.common.itemsMap)return W.common}else{if(W.local){if(W.local.body&&W.local.contentType)return W.local;if(W.local.body===!1)return}if(W.common&&W.common.body&&W.common.contentType)return W.common;if(W.body&&W.contentType)return{body:W.body,contentType:W.contentType}}}function P(W,B){for(const z in W){if(W[z]&&W[z].remote)return!0;const H=A(W[z]);if(H&&H.timestamp&&new Date().getTime()-H.timestamp<=B)return!1;if(!H)return!0}return!0}function F(W){const B={path:W,common:{}};return(0,b.isFolder)(W)&&(B.common.itemsMap={}),B}function V(W,B){return W.common||(W.common={itemsMap:{}}),W.common.itemsMap||(W.common.itemsMap={}),W.local||(W.local=(0,b.deepClone)(W.common)),W.local.itemsMap||(W.local.itemsMap=W.common.itemsMap),W.local.itemsMap[B]=!0,W}class I{constructor(){this._updateNodesRunning=!1,this._updateNodesQueued=[]}get(B,z,H){return p(this,void 0,void 0,function*(){return typeof z=="number"?this.getNodes((0,b.pathsFromRoot)(B)).then(Q=>{const q=A(Q[B]);return P(Q,z)?H(B):q?{statusCode:200,body:q.body||q.itemsMap,contentType:q.contentType}:{statusCode:404}}):this.getNodes([B]).then(Q=>{const q=A(Q[B]);if(q){if((0,b.isFolder)(B))for(const _ in q.itemsMap)q.itemsMap.hasOwnProperty(_)&&q.itemsMap[_]===!1&&delete q.itemsMap[_];return{statusCode:200,body:q.body||q.itemsMap,contentType:q.contentType}}return{statusCode:404}})})}put(B,z,H){return p(this,void 0,void 0,function*(){const Q=(0,b.pathsFromRoot)(B);return this._updateNodes(Q,function(q,_){try{for(let U=0,D=q.length;U<D;U++){const G=q[U];let le,oe=_[G];oe||(_[G]=oe=F(G)),U===0?(le=A(oe),oe.local={body:z,contentType:H,previousBody:le?le.body:void 0,previousContentType:le?le.contentType:void 0}):oe=V(oe,q[U-1].substring(G.length))}return _}catch(U){throw(0,k.default)("[Cachinglayer] Error during PUT",_,U),U}})})}delete(B){const z=(0,b.pathsFromRoot)(B);return this._updateNodes(z,function(H,Q){for(let q=0,_=H.length;q<_;q++){const U=H[q],D=Q[U];let G;if(D)if(q===0)G=A(D),D.local={body:!1,previousBody:G?G.body:void 0,previousContentType:G?G.contentType:void 0};else{D.local||(D.local=(0,b.deepClone)(D.common));const le=H[q-1].substring(U.length);if(delete D.local.itemsMap[le],Object.getOwnPropertyNames(D.local.itemsMap).length>0)break}else console.error("Cannot delete non-existing node "+U)}return Q})}flush(B){return this._getAllDescendentPaths(B).then(z=>this.getNodes(z)).then(z=>{for(const H in z){const Q=z[H];Q&&Q.common&&Q.local&&this._emitChange({path:Q.path,origin:"local",oldValue:Q.local.body===!1?void 0:Q.local.body,newValue:Q.common.body===!1?void 0:Q.common.body}),z[H]=void 0}return this.setNodes(z)})}_emitChange(B){w.default.changeEvents[B.origin]&&this._emit("change",B)}fireInitial(){w.default.changeEvents.local&&this.forAllNodes(B=>{if((0,b.isDocument)(B.path)){const z=A(B);z&&this._emitChange({path:B.path,origin:"local",oldValue:void 0,oldContentType:void 0,newValue:z.body,newContentType:z.contentType})}}).then(()=>{this._emit("local-events-done")})}onDiff(B){this.diffHandler=B}migrate(B){return typeof B!="object"||B.common||(B.common={},typeof B.path=="string"?B.path.substr(-1)==="/"&&typeof B.body=="object"&&(B.common.itemsMap=B.body):(B.local||(B.local={}),B.local.body=B.body,B.local.contentType=B.contentType)),B}_updateNodes(B,z){return new Promise((H,Q)=>{this._doUpdateNodes(B,z,{resolve:H,reject:Q})})}_doUpdateNodes(B,z,H){this._updateNodesRunning?this._updateNodesQueued.push({paths:B,cb:z,promise:H}):(this._updateNodesRunning=!0,this.getNodes(B).then(Q=>{const q=(0,b.deepClone)(Q),_=[];Q=z(B,Q);for(const U in Q){const D=Q[U];(0,b.equal)(D,q[U])?delete Q[U]:(0,b.isDocument)(U)&&((0,b.equal)(D.local.body,D.local.previousBody)&&D.local.contentType===D.local.previousContentType||_.push({path:U,origin:"window",oldValue:D.local.previousBody,newValue:D.local.body===!1?void 0:D.local.body,oldContentType:D.local.previousContentType,newContentType:D.local.contentType}),delete D.local.previousBody,delete D.local.previousContentType)}this.setNodes(Q).then(()=>{this._emitChangeEvents(_),H.resolve({statusCode:200})})}).then(()=>Promise.resolve(),Q=>{H.reject(Q)}).then(()=>{this._updateNodesRunning=!1;const Q=this._updateNodesQueued.shift();Q&&this._doUpdateNodes(Q.paths,Q.cb,Q.promise)}))}_emitChangeEvents(B){for(let z=0,H=B.length;z<H;z++)this._emitChange(B[z]),this.diffHandler&&this.diffHandler(B[z].path)}_getAllDescendentPaths(B){return(0,b.isFolder)(B)?this.getNodes([B]).then(z=>{const H=[B],Q=A(z[B]),q=Object.keys(Q.itemsMap).map(_=>this._getAllDescendentPaths(B+_).then(U=>{for(let D=0,G=U.length;D<G;D++)H.push(U[D])}));return Promise.all(q).then(()=>H)}):Promise.resolve([B])}_getInternals(){return{getLatest:A,makeNode:F,isOutdated:P}}}(0,b.applyMixins)(I,[g.default]),l.exports=I},28:function(l){l.exports={cache:!0,changeEvents:{local:!0,window:!1,remote:!0,conflict:!0},cordovaRedirectUri:void 0,logging:!1,modules:[],backgroundSyncInterval:6e4,disableFeatures:[],discoveryTimeout:5e3,isBackground:!1,requestTimeout:3e4,syncInterval:1e4}},373:function(l,u,f){var p=this&&this.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};const m=p(f(199)),g=p(f(28)),w=p(f(334)),k=f(746);let b;const A="remotestorage:discover";let P={};const F=function(V){return new Promise((I,W)=>{if(V in P)return I(P[V]);const B=new m.default({tls_only:!1,uri_fallback:!0,request_timeout:g.default.discoveryTimeout});return setTimeout(()=>W(new Error("timed out")),g.default.discoveryTimeout),B.lookup(V,function(z,H){if(z)return W(z);if(typeof H.idx.links.remotestorage!="object"||typeof H.idx.links.remotestorage.length!="number"||H.idx.links.remotestorage.length<=0)return(0,w.default)("[Discover] WebFinger record for "+V+" does not have remotestorage defined in the links section ",JSON.stringify(H.json)),W("WebFinger record for "+V+" does not have remotestorage defined in the links section.");const Q=H.idx.links.remotestorage[0],q=Q.properties["http://tools.ietf.org/html/rfc6749#section-4.2"]||Q.properties["auth-endpoint"],_=Q.properties["http://remotestorage.io/spec/version"]||Q.type;return P[V]={href:Q.href,storageApi:_,authURL:q,properties:Q.properties},b&&localStorage.setItem(A,JSON.stringify({cache:P})),I(P[V])})})};(F.DiscoveryError=function(V){this.name="DiscoveryError",this.message=V,this.stack=new Error().stack}).prototype=Object.create(Error.prototype),F.DiscoveryError.prototype.constructor=F.DiscoveryError,F._rs_init=function(){if(b=(0,k.localStorageAvailable)(),b)try{P=JSON.parse(localStorage[A]).cache}catch{}},F._rs_supported=function(){return Object.prototype.hasOwnProperty.call(k.globalContext,"fetch")||Object.prototype.hasOwnProperty.call(k.globalContext,"XMLHttpRequest")},F._rs_cleanup=function(){b&&delete localStorage[A]},l.exports=F},706:function(l,u,f){var p=this&&this.__awaiter||function(Y,C,x,M){return new(x||(x=Promise))(function(R,N){function re(he){try{ne(M.next(he))}catch(ke){N(ke)}}function ee(he){try{ne(M.throw(he))}catch(ke){N(ke)}}function ne(he){var ke;he.done?R(he.value):(ke=he.value,ke instanceof x?ke:new x(function(Me){Me(ke)})).then(re,ee)}ne((M=M.apply(Y,C||[])).next())})},m=this&&this.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}};const g=m(f(93)),w=m(f(424)),k=m(f(941)),b=m(f(982)),A=m(f(503)),P=f(746),F=f(368),V=f(684),I=m(f(275));let W;const B="remotestorage:dropbox",z="https://api.dropboxapi.com/2/files/list_folder",H="https://api.dropboxapi.com/2/files/list_folder/continue",Q="/remotestorage";function q(Y){return(Q+"/"+Y).replace(/\/+$/,"").replace(/\/+/g,"/")}const _=/[\u007f-\uffff]/g;function U(Y){return JSON.stringify(Y).replace(_,function(C){return"\\u"+("000"+C.charCodeAt(0).toString(16)).slice(-4)})}function D(Y,C){return new RegExp("^"+C.join("\\/")+"(\\/|$)").test(Y.error_summary)}function G(Y){return Y instanceof ArrayBuffer||(0,F.isArrayBufferView)(Y)}class le extends V.RemoteBase{constructor(C){if(super(C),this.online=!0,this.storageApi="draft-dejong-remotestorage-19",this._initialFetchDone=!1,this.addEvents(["connected","not-connected"]),this.clientId=C.apiKeys.dropbox.appKey,this.TOKEN_URL="https://api.dropboxapi.com/oauth2/token",this._revCache=new k.default("rev"),this._fetchDeltaCursor=null,this._fetchDeltaPromise=null,this._itemRefs={},W=(0,P.localStorageAvailable)(),W){const x=(0,P.getJSONFromLocalStorage)(B);x&&this.configure(x),this._itemRefs=(0,P.getJSONFromLocalStorage)(`${B}:shares`)||{}}this.connected&&setTimeout(this._emit.bind(this),0,"connected")}connect(){return p(this,void 0,void 0,function*(){try{if(this.rs.setBackend("dropbox"),this.token)de(this.rs);else{const{codeVerifier:C,codeChallenge:x,state:M}=yield(0,P.generateCodeVerifier)();sessionStorage.setItem("remotestorage:codeVerifier",C),sessionStorage.setItem("remotestorage:state",M),this.rs.authorize({authURL:"https://www.dropbox.com/oauth2/authorize",scope:"account_info.read files.content.read files.content.write files.metadata.read files.metadata.write",clientId:this.clientId,response_type:"code",state:M,code_challenge:x,code_challenge_method:"S256",token_access_type:"offline"})}}catch(C){throw this.rs._emit("error",C),this.rs.setBackend(void 0),C}})}configure(C){return p(this,void 0,void 0,function*(){C.userAddress!==void 0&&(this.userAddress=C.userAddress),C.token!==void 0&&(this.token=C.token),C.refreshToken!==void 0&&(this.refreshToken=C.refreshToken),C.tokenType!==void 0&&(this.tokenType=C.tokenType);const x=()=>{W&&localStorage.setItem(B,JSON.stringify({userAddress:this.userAddress,token:this.token,refreshToken:this.refreshToken,tokenType:this.tokenType}))};if(this.refreshToken||this.token)if(this.connected=!0,this.userAddress)this._emit("connected"),x();else try{const M=yield this.info();this.userAddress=M.email,this._emit("connected"),x()}catch{this.connected=!1,this.rs._emit("error",new Error("Could not fetch user info.")),x.apply(this)}else this.connected=!1,W&&localStorage.removeItem(B),this.rs.setBackend(void 0)})}_getFolder(C){const x=this._revCache,M=N=>{let re;if(N.status!==200&&N.status!==409)return Promise.reject("Unexpected response status: "+N.status);try{re=JSON.parse(N.responseText)}catch(ne){return Promise.reject(ne)}if(N.status===409)return D(re,["path","not_found"])?Promise.resolve({}):Promise.reject(new Error("API returned an error: "+re.error_summary));const ee=re.entries.reduce((ne,he)=>{try{const ke=he[".tag"]==="folder",Me=he.path_display.split("/").slice(-1)[0]+(ke?"/":"");if(ke)ne[Me]={ETag:x.get(C+Me)};else{const je=new Date(he.server_modified);ne[Me]={ETag:he.rev,"Content-Length":he.size,"Last-Modified":je.toUTCString()},this._revCache.set(C+Me,he.rev)}}catch(ke){console.error(`[Dropbox] folder “${C}” has entry ${JSON.stringify(he)}:`,ke)}return ne},{});return re.has_more?R(re.cursor).then(function(ne){return Object.assign(ee,ne)}):Promise.resolve(ee)},R=N=>{const re={body:{cursor:N}};return this._request("POST",H,re).then(M)};return this._request("POST",z,{body:{path:q(C)}}).then(M).then(function(N){return Promise.resolve({statusCode:200,body:N,contentType:"application/json; charset=UTF-8",revision:x.get(C)})})}get(C,x={}){if(!this.connected)return Promise.reject("not connected (path: "+C+")");const M=this._revCache.get(C);if(M===null)return Promise.resolve({statusCode:404});if(x&&x.ifNoneMatch){if(!this._initialFetchDone)return this.fetchDelta().then(()=>this.get(C,x));if(M&&M===x.ifNoneMatch)return Promise.resolve({statusCode:304})}if(C.slice(-1)==="/")return this._getFolder(C);const R={headers:{"Dropbox-API-Arg":U({path:q(C)})},responseType:"arraybuffer"};return x&&x.ifNoneMatch&&(R.headers["If-None-Match"]=x.ifNoneMatch),this._request("GET","https://content.dropboxapi.com/2/files/download",R).then(N=>{const re=N.status;let ee,ne,he,ke;return re!==200&&re!==409?Promise.resolve({statusCode:re}):(ee=N.getResponseHeader("Dropbox-API-Result"),(0,P.getTextFromArrayBuffer)(N.response,"UTF-8").then(Me=>{ne=Me,re===409&&(ee=ne);try{ee=JSON.parse(ee)}catch(je){return Promise.reject(je)}if(re===409)return D(ee,["path","not_found"])?{statusCode:404}:Promise.reject(new Error('API error while downloading file ("'+C+'"): '+ee.error_summary));if(he=N.getResponseHeader("Content-Type"),ke=ee.rev,this._revCache.set(C,ke),this._shareIfNeeded(C),(0,P.shouldBeTreatedAsBinary)(Me,he))ne=N.response;else try{ne=JSON.parse(ne),he="application/json; charset=UTF-8"}catch{}return{statusCode:re,body:ne,contentType:he,revision:ke}}))})}put(C,x,M){return p(this,arguments,void 0,function*(R,N,re,ee={}){if(!this.connected)throw new Error("not connected (path: "+R+")");const ne=this._revCache.get(R);if(ee&&ee.ifMatch&&ne&&ne!==ee.ifMatch)return{statusCode:412,revision:ne};if(ee&&ee.ifNoneMatch==="*"&&ne&&ne!=="rev")return{statusCode:412,revision:ne};if(!re.match(/charset=/)&&G(N)&&(re+="; charset=binary"),N.length>157286400)throw new Error("Cannot upload file larger than 150MB");const he={body:N,contentType:re,path:R};if(ee&&(ee.ifMatch||ee.ifNoneMatch==="*")){const Me=yield this._getMetadata(R);if(ee&&ee.ifNoneMatch==="*"&&Me)return{statusCode:412,revision:Me.rev};if(ee&&ee.ifMatch&&Me&&Me.rev!==ee.ifMatch)return{statusCode:412,revision:Me.rev}}const ke=yield this._uploadSimple(he);return this._shareIfNeeded(R),ke})}delete(C){return p(this,arguments,void 0,function*(x,M={}){if(!this.connected)throw new Error("not connected (path: "+x+")");const R=this._revCache.get(x);if(M!=null&&M.ifMatch&&R&&M.ifMatch!==R)return{statusCode:412,revision:R};if(M!=null&&M.ifMatch){const N=yield this._getMetadata(x);if(M!=null&&M.ifMatch&&N&&N.rev!==M.ifMatch)return{statusCode:412,revision:N.rev}}return this._deleteSimple(x)})}_shareIfNeeded(C){if(C.match(/^\/public\/.*[^/]$/)&&this._itemRefs[C]===void 0)return this.share(C)}share(C){const x={body:{path:q(C)}};return this._request("POST","https://api.dropboxapi.com/2/sharing/create_shared_link_with_settings",x).then(M=>{if(M.status!==200&&M.status!==409)return Promise.reject(new Error("Invalid response status:"+M.status));let R;try{R=JSON.parse(M.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+M.responseText))}return M.status===409?D(R,["shared_link_already_exists"])?this._getSharedLink(C):Promise.reject(new Error("API error: "+R.error_summary)):Promise.resolve(R.url)}).then(M=>(this._itemRefs[C]=M,W&&localStorage.setItem(B+":shares",JSON.stringify(this._itemRefs)),Promise.resolve(M)),M=>(M.message='Sharing Dropbox file or folder ("'+C+'") failed: '+M.message,Promise.reject(M)))}info(){return this._request("POST","https://api.dropboxapi.com/2/users/get_current_account",{}).then(function(C){let x;try{const M=JSON.parse(C.responseText);x=M==null?void 0:M.email}catch{return Promise.reject(new Error("Could not query current account info: Invalid API response: "+C.responseText))}return Promise.resolve({email:x})})}_request(C,x,M){return p(this,arguments,void 0,function*(R,N,re,ee=1){if(this.isForbiddenRequestMethod(R,N))throw`Don't use ${R} on directories!`;if(!this.token)throw new A.default("No access token");re.headers||(re.headers={}),re.headers.Authorization="Bearer "+this.token,typeof re.body!="object"||G(re.body)||(re.body=JSON.stringify(re.body),re.headers["Content-Type"]="application/json; charset=UTF-8"),this.rs._emit("wire-busy",{method:R,isFolder:(0,P.isFolder)(N)});try{const ne=yield(0,F.requestWithTimeout)(R,N,re);return this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:R,isFolder:(0,P.isFolder)(N),success:!0}),(ne==null?void 0:ne.status)===401&&this.refreshToken?ee>=3?(console.error(`Abandoned after ${ee} attempts: ${R} ${N}`),ne):(this.rs._emit("wire-busy",{method:R,isFolder:(0,P.isFolder)(N)}),yield I.default.refreshAccessToken(this.rs,this,this.refreshToken),this.rs._emit("wire-done",{method:R,isFolder:(0,P.isFolder)(N),success:!0}),this._request(R,N,re,ee+1)):[503,429].includes(ne==null?void 0:ne.status)?(this.online&&(this.online=!1,this.rs._emit("network-offline")),ee>=3?(console.warn(`Abandoned after ${ee} attempts: ${R} ${N}`),ne):(yield new Promise(he=>setTimeout(he,(0,F.retryAfterMs)(ne))),this._request(R,N,re,ee+1))):ne}catch(ne){throw this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:R,isFolder:(0,P.isFolder)(N),success:!1}),ne}})}fetchDelta(...C){if(this._fetchDeltaPromise)return this._fetchDeltaPromise;const x=M=>p(this,void 0,void 0,function*(){let R,N;typeof M=="string"?(R=H,N={cursor:M}):(R=z,N={path:Q,recursive:!0,include_deleted:!0});try{const re=yield this._request("POST",R,{body:N});if(re.status===401)throw new A.default;if(re.status!==200&&re.status!==409)throw new Error("Invalid response status: "+re.status);let ee;try{ee=JSON.parse(re.responseText)}catch{throw new Error("Invalid response body: "+re.responseText)}if(re.status===409){if(!D(ee,["path","not_found"]))throw new Error("API returned an error: "+ee.error_summary);ee={cursor:null,entries:[],has_more:!1}}if(M||this._revCache.deactivatePropagation(),ee.entries.forEach(ne=>{const he=ne.path_display.slice(14);ne[".tag"]==="deleted"?(this._revCache.delete(he),this._revCache.delete(he+"/")):ne[".tag"]==="file"&&this._revCache.set(he,ne.rev)}),this._fetchDeltaCursor=ee.cursor,ee.has_more)return x(ee.cursor);this._revCache.activatePropagation(),this._initialFetchDone=!0}catch(re){if(re==="timeout")return;throw re}});return this._fetchDeltaPromise=x(this._fetchDeltaCursor).catch(M=>(typeof M=="object"&&"message"in M?M.message="Dropbox: fetchDelta: "+M.message:M=`Dropbox: fetchDelta: ${M}`,this.rs._emit("error",M),this._fetchDeltaPromise=null,Promise.reject(M))).then(()=>(this._fetchDeltaPromise=null,Promise.resolve(C))),this._fetchDeltaPromise}_getMetadata(C){const x={path:q(C)};return this._request("POST","https://api.dropboxapi.com/2/files/get_metadata",{body:x}).then(M=>{if(M.status!==200&&M.status!==409)return Promise.reject(new Error("Invalid response status:"+M.status));let R;try{R=JSON.parse(M.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+M.responseText))}return M.status===409?D(R,["path","not_found"])?Promise.resolve():Promise.reject(new Error("API error: "+R.error_summary)):Promise.resolve(R)}).then(void 0,M=>(M.message='Could not load metadata for file or folder ("'+C+'"): '+M.message,Promise.reject(M)))}_uploadSimple(C){const x={path:q(C.path),mode:{".tag":"overwrite",update:void 0},mute:!0};return C.ifMatch&&(x.mode={".tag":"update",update:C.ifMatch}),this._request("POST","https://content.dropboxapi.com/2/files/upload",{body:C.body,headers:{"Content-Type":"application/octet-stream","Dropbox-API-Arg":U(x)}}).then(M=>{if(M.status!==200&&M.status!==409)return Promise.resolve({statusCode:M.status});let R;try{R=JSON.parse(M.responseText)}catch{return Promise.reject(new Error("Invalid API result: "+M.responseText))}return M.status===409?D(R,["path","conflict"])?this._getMetadata(C.path).then(function(N){return Promise.resolve({statusCode:412,revision:N.rev})}):(this.rs._emit("error",new Error(R.error_summary)),Promise.resolve({statusCode:M.status})):(this._revCache.set(C.path,R.rev),Promise.resolve({statusCode:M.status,revision:R.rev}))})}_deleteSimple(C){const x={path:q(C)};return this._request("POST","https://api.dropboxapi.com/2/files/delete",{body:x}).then(M=>{if(M.status!==200&&M.status!==409)return Promise.resolve({statusCode:M.status});let R;try{R=JSON.parse(M.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+M.responseText))}if(M.status===409){if(D(R,["path_lookup","not_found"]))return Promise.resolve({statusCode:404});this.rs._emit("error",new Error(R.error_summary))}return Promise.resolve({statusCode:M.status})}).then(M=>(M.statusCode!==200&&M.statusCode!==404||(this._revCache.delete(C),delete this._itemRefs[C]),Promise.resolve(M)),M=>(M.message='Could not delete Dropbox file or folder ("'+C+'"): '+M.message,Promise.reject(M)))}_getSharedLink(C){return p(this,void 0,void 0,function*(){const x={body:{path:q(C),direct_only:!0}};return this._request("POST","https://api.dropbox.com/2/sharing/list_shared_links",x).then(M=>{if(M.status!==200&&M.status!==409)return Promise.reject(new Error("Invalid response status: "+M.status));let R;try{R=JSON.parse(M.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+M.responseText))}return M.status===409?Promise.reject(new Error("API error: "+(R==null?void 0:R.error_summary)||0)):R.links.length?Promise.resolve(R.links[0].url):Promise.reject(new Error("No links returned"))},M=>(M.message='Could not get link to a shared file or folder ("'+C+'"): '+M.message,Promise.reject(M)))})}static _rs_init(C){W=(0,P.localStorageAvailable)(),C.apiKeys.dropbox&&(C.dropbox=new le(C)),C.backend==="dropbox"&&de(C)}static _rs_supported(){return!0}static _rs_cleanup(C){(function(x){(function(M){M._origRemote&&(M.remote=M._origRemote,delete M._origRemote)})(x),function(M){M._dropboxOrigSync&&(M.sync.sync=M._dropboxOrigSync,delete M._dropboxOrigSync)}(x),function(M){M._origBaseClientGetItemURL&&(w.default.prototype.getItemURL=M._origBaseClientGetItemURL,delete M._origBaseClientGetItemURL)}(x),ye(x)})(C),W&&localStorage.removeItem(B),C.setBackend(void 0)}}function oe(Y,...C){Y._dropboxOrigSync||(Y._dropboxOrigSync=Y.sync.sync.bind(Y.sync),Y.sync.sync=(function(){return this.dropbox.fetchDelta(Y,...C).then(Y._dropboxOrigSync,function(x){Y._emit("error",new b.default(x)),Y._emit("sync-done")})}).bind(Y))}function ye(Y){Y._dropboxOrigSyncCycle&&(Y.syncCycle=Y._dropboxOrigSyncCycle,delete Y._dropboxOrigSyncCycle)}function de(Y){(function(C){C._origRemote||(C._origRemote=C.remote,C.remote=C.dropbox)})(Y),Y.sync?oe(Y):function(C,...x){C._dropboxOrigSyncCycle||(C._dropboxOrigSyncCycle=C.syncCycle,C.syncCycle=()=>{if(!C.sync)throw new Error("expected sync to be initialized by now");oe(C),C._dropboxOrigSyncCycle(C,...x),ye(C)})}(Y),function(C){C._origBaseClientGetItemURL||(C._origBaseClientGetItemURL=w.default.prototype.getItemURL,w.default.prototype.getItemURL=function(){throw new Error("getItemURL is not implemented for Dropbox yet")})}(Y)}(0,P.applyMixins)(le,[g.default]),l.exports=le},451:function(l,u,f){const p=(this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}})(f(93)),m=f(746);class g{constructor(){this.addEvents(["background","foreground"]),this.mode=typeof window<"u"?"browser":"node",this.mode==="browser"&&(this.setBrowserPrefixedNames(),document.addEventListener(this.visibilityChangeEvent,this.setVisibility.bind(this),!1),this.setVisibility())}setBrowserPrefixedNames(){this.mode==="browser"&&(document.hidden!==void 0?(this.hiddenProperty="hidden",this.visibilityChangeEvent="visibilitychange"):document.mozHidden!==void 0?(this.hiddenProperty="mozHidden",this.visibilityChangeEvent="mozvisibilitychange"):document.msHidden!==void 0?(this.hiddenProperty="msHidden",this.visibilityChangeEvent="msvisibilitychange"):document.webkitHidden!==void 0&&(this.hiddenProperty="webkitHidden",this.visibilityChangeEvent="webkitvisibilitychange"))}setVisibility(){document[this.hiddenProperty]?this.goBackground():this.goForeground()}isBrowser(){return this.mode==="browser"}isNode(){return this.mode==="node"}goBackground(){this._emit("background")}goForeground(){this._emit("foreground")}static _rs_init(){}static _rs_cleanup(){}}(0,m.applyMixins)(g,[p.default]),l.exports=g},93:function(l,u,f){var p=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(u,"__esModule",{value:!0}),u.EventHandling=void 0;const m=p(f(334));class g{addEvents(k){k.forEach(b=>this._addEvent(b))}addEventListener(k,b){if(typeof k!="string")throw new Error("Argument eventName should be a string");if(typeof b!="function")throw new Error("Argument handler should be a function");(0,m.default)("[EventHandling] Adding event listener",k),this._validateEvent(k),this._handlers[k].push(b)}on(k,b){return this.addEventListener(k,b)}removeEventListener(k,b){this._validateEvent(k);const A=this._handlers[k].length;for(let P=0;P<A;P++)if(this._handlers[k][P]===b)return void this._handlers[k].splice(P,1)}_emit(k,...b){this._validateEvent(k),this._handlers[k].slice().forEach(A=>{A.apply(this,b)})}_validateEvent(k){if(!(k in this._handlers))throw new Error("Unknown event: "+k)}_delegateEvent(k,b){b.on(k,A=>{this._emit(k,A)})}_addEvent(k){this._handlers===void 0&&(this._handlers={}),this._handlers[k]=[]}}u.EventHandling=g,u.default=g},545:function(l,u,f){var p=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};const m=p(f(28)),g=p(f(451)),w=p(f(334)),k=f(746),b=p(f(370)),A=p(f(548)),P=p(f(275)),F=p(f(373)),V=p(f(424)),I=p(f(801)),W=p(f(706)),B=p(f(600)),z=p(f(313)),H=p(f(285)),Q=p(f(567)),q=p(f(794)),_=p(f(365)),U={features:[],featuresDone:0,readyFired:!1,loadFeatures(){this.features=[],this.featuresDone=0,this.readyFired=!1,this.featureModules={WireClient:B.default,Dropbox:W.default,GoogleDrive:I.default,Access:A.default,Discover:F.default,Authorize:P.default,BaseClient:V.default,Env:g.default},m.default.cache&&(0,k.extend)(this.featureModules,{Caching:H.default,IndexedDB:Q.default,LocalStorage:q.default,InMemoryStorage:_.default,Sync:z.default}),m.default.disableFeatures.forEach(D=>{this.featureModules[D]&&delete this.featureModules[D]}),this._allLoaded=!1;for(const D in this.featureModules)this.loadFeature(D)},hasFeature(D){for(let G=this.features.length-1;G>=0;G--)if(this.features[G].name===D)return this.features[G].supported;return!1},loadFeature(D){const G=this.featureModules[D],le=!G._rs_supported||G._rs_supported();(0,w.default)(`[RemoteStorage] [FEATURE ${D}] initializing ...`),typeof le=="object"?le.then(()=>{this.featureSupported(D,!0),this.initFeature(D)},()=>{this.featureSupported(D,!1)}):typeof le=="boolean"?(this.featureSupported(D,le),le&&this.initFeature(D)):this.featureSupported(D,!1)},initFeature(D){const G=this.featureModules[D];let le;try{le=G._rs_init(this)}catch(oe){return void this.featureFailed(D,oe)}typeof le=="object"&&typeof le.then=="function"?le.then(()=>{this.featureInitialized(D)},oe=>{this.featureFailed(D,oe)}):this.featureInitialized(D)},featureFailed(D,G){(0,w.default)(`[RemoteStorage] [FEATURE ${D}] initialization failed (${G})`),this.featureDone()},featureSupported(D,G){(0,w.default)(`[RemoteStorage] [FEATURE ${D}]${G?"":"not "} supported`),G||this.featureDone()},featureInitialized(D){(0,w.default)(`[RemoteStorage] [FEATURE ${D}] initialized`),this.features.push({name:D,init:this.featureModules[D]._rs_init,supported:!0,cleanup:this.featureModules[D]._rs_cleanup}),this.featureDone()},featureDone(){this.featuresDone++,this.featuresDone===Object.keys(this.featureModules).length&&setTimeout(this.featuresLoaded.bind(this),0)},_setCachingModule(){["IndexedDB","LocalStorage","InMemoryStorage"].some(D=>{if(this.features.some(G=>G.name===D))return this.features.local=this.featureModules[D],!0})},_fireReady(){try{this.readyFired||(this._emit("ready"),this.readyFired=!0)}catch(D){console.error("'ready' failed: ",D,D.stack),this._emit("error",D)}},featuresLoaded(){(0,w.default)("[RemoteStorage] All features loaded"),this._setCachingModule(),this.local=m.default.cache&&this.features.local&&new this.features.local,this.local&&this.remote?(this._setGPD(b.default,this),this._bindChange(this.local)):this.remote&&this._setGPD(this.remote,this.remote),this.remote&&(this.remote.on("connected",()=>{this._fireReady(),this._emit("connected")}),this.remote.on("not-connected",()=>{this._fireReady(),this._emit("not-connected")}),this.remote.connected&&(this._fireReady(),this._emit("connected")),this.hasFeature("Authorize")||this.remote.stopWaitingForToken()),this._collectCleanupFunctions();try{this._allLoaded=!0,this._emit("features-loaded")}catch(D){(0,k.logError)(D),this._emit("error",D)}this._processPending()},_collectCleanupFunctions(){this._cleanups=[];for(let D=0;D<this.features.length;D++){const G=this.features[D].cleanup;typeof G=="function"&&this._cleanups.push(G)}}};l.exports=U},801:function(l,u,f){var p=this&&this.__importDefault||function(q){return q&&q.__esModule?q:{default:q}};const m=p(f(424)),g=p(f(93)),w=f(746),k=f(368),b=f(684),A="https://www.googleapis.com",P="remotestorage:googledrive",F="application/vnd.google-apps.folder";let V;function I(q){return q.substr(-1)==="/"&&(q=q.substr(0,q.length-1)),decodeURIComponent(q)}function W(q){return q.replace(/[^\/]+\/?$/,"")}function B(q){const _=q.split("/");return q.substr(-1)==="/"?_[_.length-2]+"/":_[_.length-1]}function z(q){return(0,w.cleanPath)(`/remotestorage/${q}`)}class H{constructor(_){this._items={},this.maxAge=_,this._items={}}get(_){const U=this._items[_],D=new Date().getTime();return U&&U.t>=D-this.maxAge?U.v:void 0}set(_,U){this._items[_]={v:U,t:new Date().getTime()}}}class Q extends b.RemoteBase{constructor(_,U){if(super(_),this.online=!0,this.storageApi="draft-dejong-remotestorage-19",this.addEvents(["connected","not-connected"]),this.clientId=U,this._fileIdCache=new H(300),V=(0,w.localStorageAvailable)(),V){const D=(0,w.getJSONFromLocalStorage)(P);D&&this.configure(D)}}configure(_){_.userAddress!==void 0&&(this.userAddress=_.userAddress),_.token!==void 0&&(this.token=_.token);const U=function(){V&&localStorage.setItem(P,JSON.stringify({userAddress:this.userAddress,token:this.token}))},D=function(){this.connected=!1,delete this.token,V&&localStorage.removeItem(P)};this.token?(this.connected=!0,this.userAddress?(this._emit("connected"),U.apply(this)):this.info().then(G=>{this.userAddress=G.user.emailAddress,this._emit("connected"),U.apply(this)}).catch(()=>{D.apply(this),this.rs._emit("error",new Error("Could not fetch user info."))})):D.apply(this)}connect(){this.rs.setBackend("googledrive"),this.rs.authorize({authURL:"https://accounts.google.com/o/oauth2/auth",scope:"https://www.googleapis.com/auth/drive",clientId:this.clientId})}get(_,U={}){return(0,w.isFolder)(_)?this._getFolder(z(_)):this._getFile(z(_),U)}put(_,U,D,G={}){const le=z(_);function oe(ye){if(ye.status>=200&&ye.status<300){const de=JSON.parse(ye.responseText),Y=this.stripQuotes(de.etag);return Promise.resolve({statusCode:200,contentType:de.mimeType,revision:Y})}return ye.status===412?Promise.resolve({statusCode:412,revision:"conflict"}):Promise.reject("PUT failed with status "+ye.status+" ("+ye.responseText+")")}return this._getFileId(le).then(ye=>ye?G&&G.ifNoneMatch==="*"?oe({status:412}):this._updateFile(ye,le,U,D,G).then(oe):this._createFile(le,U,D).then(oe))}delete(_,U={}){const D=z(_);return this._getFileId(D).then(G=>G?this._getMeta(G).then(le=>{let oe;return typeof le=="object"&&typeof le.etag=="string"&&(oe=this.stripQuotes(le.etag)),U&&U.ifMatch&&U.ifMatch!==oe?{statusCode:412,revision:oe}:this._request("DELETE",A+"/drive/v2/files/"+G,{}).then(ye=>ye.status===200||ye.status===204?{statusCode:200}:Promise.reject("Delete failed: "+ye.status+" ("+ye.responseText+")"))}):Promise.resolve({statusCode:200}))}info(){const _=A+"/drive/v2/about?fields=user";return this._request("GET",_,{}).then(function(U){try{const D=JSON.parse(U.responseText);return Promise.resolve(D)}catch(D){return Promise.reject(D)}})}_updateFile(_,U,D,G,le){const oe={mimeType:G},ye={"Content-Type":"application/json; charset=UTF-8"};return le&&le.ifMatch&&(ye["If-Match"]=this.addQuotes(le.ifMatch)),this._request("PUT",A+"/upload/drive/v2/files/"+_+"?uploadType=resumable",{body:JSON.stringify(oe),headers:ye}).then(de=>de.status===412?de:this._request("PUT",de.getResponseHeader("Location"),{body:G.match(/^application\/json/)?JSON.stringify(D):D}))}_createFile(_,U,D){return this._getParentId(_).then(G=>{const le={title:I(B(_)),mimeType:D,parents:[{kind:"drive#fileLink",id:G}]};return this._request("POST",A+"/upload/drive/v2/files?uploadType=resumable",{body:JSON.stringify(le),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(oe=>this._request("POST",oe.getResponseHeader("Location"),{body:D.match(/^application\/json/)?JSON.stringify(U):U}))})}_getFile(_,U){return this._getFileId(_).then(D=>this._getMeta(D).then(G=>{let le;if(typeof G=="object"&&typeof G.etag=="string"&&(le=this.stripQuotes(G.etag)),U&&U.ifNoneMatch&&le===U.ifNoneMatch)return Promise.resolve({statusCode:304});if(!G.downloadUrl){if(!G.exportLinks||!G.exportLinks["text/html"])return Promise.resolve({statusCode:200,body:"",contentType:G.mimeType,revision:le});G.mimeType+=";export=text/html",G.downloadUrl=G.exportLinks["text/html"]}return this._request("GET",G.downloadUrl,{responseType:"arraybuffer"}).then(oe=>(0,w.getTextFromArrayBuffer)(oe.response,"UTF-8").then(function(ye){let de=ye;if(G.mimeType.match(/^application\/json/))try{de=JSON.parse(de)}catch{}else(0,w.shouldBeTreatedAsBinary)(ye,G.mimeType)&&(de=oe.response);return{statusCode:200,body:de,contentType:G.mimeType,revision:le}}))}))}_getFolder(_){return this._getFileId(_).then(U=>{let D,G,le;if(!U)return Promise.resolve({statusCode:404});const oe="'"+U+"' in parents";return this._request("GET",A+"/drive/v2/files?q="+encodeURIComponent(oe)+"&fields="+encodeURIComponent("items(downloadUrl,etag,fileSize,id,mimeType,title,labels)")+"&maxResults=1000&trashed=false",{}).then(ye=>{var de;if(ye.status!==200)return Promise.reject("request failed or something: "+ye.status);try{D=JSON.parse(ye.responseText)}catch{return Promise.reject("non-JSON response from GoogleDrive")}le={};for(const Y of D.items)!((de=Y.labels)===null||de===void 0)&&de.trashed||(G=this.stripQuotes(Y.etag),Y.mimeType===F?(this._fileIdCache.set(_+(0,w.cleanPath)(Y.title)+"/",Y.id),le[Y.title+"/"]={ETag:G}):(this._fileIdCache.set(_+(0,w.cleanPath)(Y.title),Y.id),le[Y.title]={ETag:G,"Content-Type":Y.mimeType,"Content-Length":Y.fileSize}));return Promise.resolve({statusCode:200,body:le,contentType:"application/json; charset=UTF-8",revision:void 0})})})}_getParentId(_){const U=W(_);return this._getFileId(U).then(D=>D?Promise.resolve(D):this._createFolder(U))}_createFolder(_){return this._getParentId(_).then(U=>this._request("POST",A+"/drive/v2/files",{body:JSON.stringify({title:I(B(_)),mimeType:F,parents:[{id:U}]}),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(D=>{const G=JSON.parse(D.responseText);return Promise.resolve(G.id)}))}_getFileId(_){let U;return _==="/"?Promise.resolve("root"):(U=this._fileIdCache.get(_))?Promise.resolve(U):this._getFolder(W(_)).then(()=>(U=this._fileIdCache.get(_),U?Promise.resolve(U):_.substr(-1)==="/"?this._createFolder(_).then(()=>this._getFileId(_)):Promise.resolve()))}_getMeta(_){return this._request("GET",A+"/drive/v2/files/"+_,{}).then(function(U){return U.status===200?Promise.resolve(JSON.parse(U.responseText)):Promise.reject("request (getting metadata for "+_+") failed with status: "+U.status)})}_request(_,U,D){return this.isForbiddenRequestMethod(_,U)?Promise.reject(`Don't use ${_} on directories!`):(D.headers||(D.headers={}),D.headers.Authorization="Bearer "+this.token,this.rs._emit("wire-busy",{method:_,isFolder:(0,w.isFolder)(U)}),(0,k.requestWithTimeout)(_,U,D).then(G=>G&&G.status===401?void this.connect():(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:_,isFolder:(0,w.isFolder)(U),success:!0}),Promise.resolve(G)),G=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:_,isFolder:(0,w.isFolder)(U),success:!1}),Promise.reject(G))))}static _rs_init(_){const U=_.apiKeys.googledrive;var D;U&&(_.googledrive=new Q(_,U.clientId),_.backend==="googledrive"&&(_._origRemote=_.remote,_.remote=_.googledrive,(D=_)._origBaseClientGetItemURL||(D._origBaseClientGetItemURL=m.default.prototype.getItemURL,m.default.prototype.getItemURL=function(){throw new Error("getItemURL is not implemented for Google Drive yet")})))}static _rs_supported(){return!0}static _rs_cleanup(_){var U;_.setBackend(void 0),_._origRemote&&(_.remote=_._origRemote,delete _._origRemote),(U=_)._origBaseClientGetItemURL&&(m.default.prototype.getItemURL=U._origBaseClientGetItemURL,delete U._origBaseClientGetItemURL)}}(0,w.applyMixins)(Q,[g.default]),l.exports=Q},567:function(l,u,f){var p=this&&this.__awaiter||function(V,I,W,B){return new(W||(W=Promise))(function(z,H){function Q(U){try{_(B.next(U))}catch(D){H(D)}}function q(U){try{_(B.throw(U))}catch(D){H(D)}}function _(U){var D;U.done?z(U.value):(D=U.value,D instanceof W?D:new W(function(G){G(D)})).then(Q,q)}_((B=B.apply(V,I||[])).next())})},m=this&&this.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};const g=m(f(93)),w=m(f(496)),k=m(f(334)),b=f(746),A="remotestorage";let P;class F extends w.default{constructor(I){super(),this.addEvents(["change","local-events-done"]),this.db=I||P,this.db?(this.getsRunning=0,this.putsRunning=0,this.changesQueued={},this.changesRunning={},this.commitSlownessWarning=null):(0,k.default)("[IndexedDB] Failed to open DB")}getNodes(I){return p(this,void 0,void 0,function*(){const W=[],B={};for(let z=0,H=I.length;z<H;z++)this.changesQueued[I[z]]!==void 0?B[I[z]]=(0,b.deepClone)(this.changesQueued[I[z]]||void 0):this.changesRunning[I[z]]!==void 0?B[I[z]]=(0,b.deepClone)(this.changesRunning[I[z]]||void 0):W.push(I[z]);return W.length>0?this.getNodesFromDb(W).then(function(z){for(const H in B)z[H]=B[H];return z}):Promise.resolve(B)})}setNodes(I){return p(this,void 0,void 0,function*(){for(const W in I)this.changesQueued[W]=I[W]||!1;return this.maybeFlush(),Promise.resolve()})}maybeFlush(){this.putsRunning===0?this.flushChangesQueued():this.commitSlownessWarning||(this.commitSlownessWarning=f.g.setInterval(function(){console.warn("WARNING: waited more than 10 seconds for previous commit to finish")},1e4))}flushChangesQueued(){this.commitSlownessWarning&&(clearInterval(this.commitSlownessWarning),this.commitSlownessWarning=null),Object.keys(this.changesQueued).length>0&&(this.changesRunning=this.changesQueued,this.changesQueued={},this.setNodesInDb(this.changesRunning).then(this.flushChangesQueued.bind(this)))}getNodesFromDb(I){return new Promise((W,B)=>{const z=this.db.transaction(["nodes"],"readonly"),H=z.objectStore("nodes"),Q={};this.getsRunning++,I.map(q=>{H.get(q).onsuccess=_=>{Q[q]=_.target.result}}),z.oncomplete=()=>{W(Q),this.getsRunning--},z.onerror=z.onabort=()=>{B("get transaction error/abort"),this.getsRunning--}})}setNodesInDb(I){return p(this,void 0,void 0,function*(){return new Promise((W,B)=>{const z=this.db.transaction(["nodes"],"readwrite"),H=z.objectStore("nodes"),Q=new Date().getTime();this.putsRunning++,(0,k.default)("[IndexedDB] Starting put",I,this.putsRunning);for(const q in I){const _=I[q];if(typeof _=="object")try{H.put(_)}catch(U){throw(0,k.default)("[IndexedDB] Error while putting",_,U),U}else try{H.delete(q)}catch(U){throw(0,k.default)("[IndexedDB] Error while removing",H,_,U),U}}z.oncomplete=()=>{this.putsRunning--,(0,k.default)("[IndexedDB] Finished put",I,this.putsRunning,new Date().getTime()-Q+"ms"),W()},z.onerror=()=>{this.putsRunning--,B("transaction error")},z.onabort=()=>{B("transaction abort"),this.putsRunning--}})})}reset(I){const W=this.db.name;this.db.close(),F.clean(this.db.name,()=>{F.open(W,(B,z)=>{B?(0,k.default)("[IndexedDB] Error while resetting local storage",B):this.db=z,typeof I=="function"&&I(self)})})}forAllNodes(I){return p(this,void 0,void 0,function*(){return new Promise(W=>{this.db.transaction(["nodes"],"readonly").objectStore("nodes").openCursor().onsuccess=B=>{const z=B.target.result;z?(I(this.migrate(z.value)),z.continue()):W()}})})}closeDB(){this.putsRunning===0?this.db.close():setTimeout(this.closeDB.bind(this),100)}static open(I,W){const B=setTimeout(function(){W("timeout trying to open db")},1e4);try{const z=indexedDB.open(I,2);z.onerror=function(){(0,k.default)("[IndexedDB] Opening DB failed",z),clearTimeout(B),W(z.error)},z.onupgradeneeded=function(H){const Q=z.result;(0,k.default)("[IndexedDB] Upgrade: from ",H.oldVersion," to ",H.newVersion),H.oldVersion!==1&&((0,k.default)("[IndexedDB] Creating object store: nodes"),Q.createObjectStore("nodes",{keyPath:"path"})),(0,k.default)("[IndexedDB] Creating object store: changes"),Q.createObjectStore("changes",{keyPath:"path"})},z.onsuccess=function(){clearTimeout(B);const H=z.result;if(!H.objectStoreNames.contains("nodes")||!H.objectStoreNames.contains("changes"))return(0,k.default)("[IndexedDB] Missing object store. Resetting the database."),void F.clean(I,function(){F.open(I,W)});W(null,z.result)}}catch(z){(0,k.default)("[IndexedDB] Failed to open database: "+z),(0,k.default)("[IndexedDB] Resetting database and trying again."),clearTimeout(B),F.clean(I,function(){F.open(I,W)})}}static clean(I,W){const B=indexedDB.deleteDatabase(I);B.onsuccess=function(){(0,k.default)("[IndexedDB] Done removing DB"),W()},B.onerror=B.onabort=function(z){console.error('Failed to remove database "'+I+'"',z)}}static _rs_init(I){return new Promise((W,B)=>{F.open(A,function(z,H){z?B(z):(P=H,H.onerror=()=>{I._emit("error",z)},W())})})}static _rs_supported(){return new Promise((I,W)=>{const B=(0,b.getGlobalContext)();let z=!1;if(typeof navigator<"u"&&navigator.userAgent.match(/Android (2|3|4\.[0-3])/)&&(navigator.userAgent.match(/Chrome|Firefox/)||(z=!0)),"indexedDB"in B&&!z)try{const H=indexedDB.open("rs-check");H.onerror=function(){W()},H.onsuccess=function(){H.result.close(),indexedDB.deleteDatabase("rs-check"),I()}}catch{W()}else W()})}static _rs_cleanup(I){return new Promise(W=>{I.local&&I.local.closeDB(),F.clean(A,W)})}diffHandler(){}}(0,b.applyMixins)(F,[g.default]),l.exports=F},365:function(l,u,f){var p=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};const m=p(f(93)),g=p(f(496)),w=f(746);class k extends g.default{constructor(){super(),this._storage={},this.addEvents(["change","local-events-done"])}getNodes(A){const P={};for(let F=0,V=A.length;F<V;F++)P[A[F]]=(0,w.deepClone)(this._storage[A[F]]);return Promise.resolve(P)}setNodes(A){for(const P in A)A[P]===void 0?delete this._storage[P]:this._storage[P]=A[P];return Promise.resolve()}forAllNodes(A){for(const P in this._storage)A(this.migrate(this._storage[P]));return Promise.resolve()}diffHandler(){}static _rs_init(){}static _rs_supported(){return!0}static _rs_cleanup(){}}(0,w.applyMixins)(k,[m.default]),l.exports=k},794:function(l,u,f){var p=this&&this.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};const m=p(f(496)),g=p(f(93)),w=p(f(334)),k=f(746),b="remotestorage:cache:nodes:";function A(F){return F.substr(0,26)===b||F.substr(0,28)==="remotestorage:cache:changes:"}class P extends m.default{constructor(){super(),this.addEvents(["change","local-events-done"])}diffHandler(...V){}getNodes(V){const I={};for(let W=0,B=V.length;W<B;W++)try{I[V[W]]=JSON.parse(localStorage[b+V[W]])}catch{I[V[W]]=void 0}return Promise.resolve(I)}setNodes(V){for(const I in V)localStorage[b+I]=JSON.stringify(V[I]);return Promise.resolve()}forAllNodes(V){let I;for(let W=0,B=localStorage.length;W<B;W++)if(localStorage.key(W).substr(0,26)===b){try{I=this.migrate(JSON.parse(localStorage[localStorage.key(W)]))}catch{I=void 0}I&&V(I)}return Promise.resolve()}static _rs_init(){}static _rs_supported(){return(0,k.localStorageAvailable)()}static _rs_cleanup(){const V=[];for(let I=0,W=localStorage.length;I<W;I++){const B=localStorage.key(I);A(B)&&V.push(B)}V.forEach(I=>{(0,w.default)("[LocalStorage] Removing",I),delete localStorage[I]})}}(0,k.applyMixins)(P,[g.default]),l.exports=P},334:function(l,u,f){const p=(this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}})(f(28));l.exports=function(...m){p.default.logging&&console.log(...m)}},684:function(l,u,f){var p=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(u,"__esModule",{value:!0}),u.RemoteBase=void 0;const m=p(f(93)),g=f(746);class w extends m.default{constructor(b){super(),this.rs=b,this.connected=!1}stopWaitingForToken(){this.connected||this._emit("not-connected")}addQuotes(b){return typeof b!="string"?b:b==="*"?"*":'"'+b+'"'}stripQuotes(b){return typeof b!="string"?b:b.replace(/^["']|["']$/g,"")}isForbiddenRequestMethod(b,A){return(b==="PUT"||b==="DELETE")&&(0,g.isFolder)(A)}}u.RemoteBase=w},423:function(l,u,f){var p=this&&this.__createBinding||(Object.create?function(Y,C,x,M){M===void 0&&(M=x);var R=Object.getOwnPropertyDescriptor(C,x);R&&!("get"in R?!C.__esModule:R.writable||R.configurable)||(R={enumerable:!0,get:function(){return C[x]}}),Object.defineProperty(Y,M,R)}:function(Y,C,x,M){M===void 0&&(M=x),Y[M]=C[x]}),m=this&&this.__setModuleDefault||(Object.create?function(Y,C){Object.defineProperty(Y,"default",{enumerable:!0,value:C})}:function(Y,C){Y.default=C}),g=this&&this.__importStar||function(Y){if(Y&&Y.__esModule)return Y;var C={};if(Y!=null)for(var x in Y)x!=="default"&&Object.prototype.hasOwnProperty.call(Y,x)&&p(C,Y,x);return m(C,Y),C},w=this&&this.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}};Object.defineProperty(u,"__esModule",{value:!0}),u.RemoteStorage=void 0;const k=w(f(28)),b=w(f(334)),A=f(746),P=w(f(548)),F=w(f(275)),V=w(f(424)),I=w(f(285)),W=f(93),B=w(f(801)),z=w(f(706)),H=w(f(373)),Q=w(f(982)),q=w(f(503)),_=w(f(545)),U=g(f(746)),D=(0,A.getGlobalContext)();let G;function le(Y){return Y.statusCode!==403&&Y.statusCode!==401||this._emit("error",new q.default),Promise.resolve(Y)}function oe(Y){return typeof Y=="number"&&Y>=2e3&&Y<=36e5}var ye;(function(Y){Y.GOOGLE="googledrive",Y.DROPBOX="dropbox"})(ye||(ye={}));class de{constructor(C){if(this._pending=[],this._cleanups=[],this._pathHandlers={change:{}},this.apiKeys={},this._init=_.default.loadFeatures,this.features=_.default.features,this.loadFeature=_.default.loadFeature,this.featureSupported=_.default.featureSupported,this.featureDone=_.default.featureDone,this.featuresDone=_.default.featuresDone,this.featuresLoaded=_.default.featuresLoaded,this.featureInitialized=_.default.featureInitialized,this.featureFailed=_.default.featureFailed,this.hasFeature=_.default.hasFeature,this._setCachingModule=_.default._setCachingModule,this._collectCleanupFunctions=_.default._collectCleanupFunctions,this._fireReady=_.default._fireReady,this.initFeature=_.default.initFeature,typeof C=="object"&&(0,A.extend)(k.default,C),this.addEvents(["ready","authing","connecting","connected","disconnected","not-connected","conflict","error","features-loaded","sync-interval-change","sync-req-done","sync-done","wire-busy","wire-done","network-offline","network-online"]),this._setGPD({get:this._pendingGPD("get"),put:this._pendingGPD("put"),delete:this._pendingGPD("delete")}),G=(0,A.localStorageAvailable)(),G){this.apiKeys=(0,A.getJSONFromLocalStorage)("remotestorage:api-keys")||{};const M=localStorage.getItem("remotestorage:backend");M==="dropbox"||M==="googledrive"?this.setBackend(M):this.setBackend("remotestorage")}const x=this.on;this.on=function(M,R){if(this._allLoaded)switch(M){case"features-loaded":setTimeout(R,0);break;case"ready":this.remote&&setTimeout(R,0);break;case"connected":this.remote&&this.remote.connected&&setTimeout(R,0);break;case"not-connected":this.remote&&!this.remote.connected&&setTimeout(R,0)}return x.call(this,M,R)},this._init(),this.fireInitial=(function(){this.local&&setTimeout(this.local.fireInitial.bind(this.local),0)}).bind(this),this.on("ready",this.fireInitial.bind(this)),this.loadModules()}get connected(){return this.remote.connected}loadModules(){k.default.modules.forEach(this.addModule.bind(this))}authorize(C){if(this.access.setStorageType(this.remote.storageApi),C.scope===void 0&&(C.scope=this.access.scopeParameter),D.cordova)C.redirectUri=k.default.cordovaRedirectUri;else{const x=F.default.getLocation();let M=x.origin;x.pathname!=="/"&&(M+=x.pathname),C.redirectUri=M}C.clientId===void 0&&(C.clientId=C.redirectUri.match(/^(https?:\/\/[^/]+)/)[0]),F.default.authorize(this,C)}impliedauth(C,x){C=C||this.remote.storageApi,x=x||String(document.location),(0,b.default)("ImpliedAuth proceeding due to absent authURL; storageApi = "+C+" redirectUri = "+x),this.remote.configure({token:F.default.IMPLIED_FAKE_TOKEN}),document.location.href=x}connect(C,x){if(this.setBackend("remotestorage"),C.indexOf("@")<0&&!C.match(/^(https?:\/\/)?[^\s\/$\.?#]+\.[^\s]*$/))this._emit("error",new de.DiscoveryError("Not a valid user address or URL."));else{if(C.indexOf("@")<0&&!C.match(/^https?:\/\//)&&(C=`https://${C}`),D.cordova){if(typeof k.default.cordovaRedirectUri!="string")return void this._emit("error",new de.DiscoveryError("Please supply a custom HTTPS redirect URI for your Cordova app"));if(!D.cordova.InAppBrowser)return void this._emit("error",new de.DiscoveryError("Please include the InAppBrowser Cordova plugin to enable OAuth"))}this.remote.configure({userAddress:C}),this._emit("connecting"),(0,H.default)(C).then(M=>{if(this._emit("authing"),M.userAddress=C,this.remote.configure(M),!this.remote.connected)if(M.authURL)if(x===void 0)this.authorize({authURL:M.authURL});else{if(typeof x!="string")throw new Error("Supplied bearer token must be a string");(0,b.default)("Skipping authorization sequence and connecting with known token"),this.remote.configure({token:x})}else this.impliedauth()},()=>{this._emit("error",new de.DiscoveryError("No storage information found for this user address."))})}}reconnect(){this.remote.configure({token:null}),this.backend==="remotestorage"?this.connect(this.remote.userAddress):this.remote.connect()}disconnect(){this.remote&&this.remote.configure({userAddress:null,href:null,storageApi:null,token:null,properties:null}),this._setGPD({get:this._pendingGPD("get"),put:this._pendingGPD("put"),delete:this._pendingGPD("delete")});const C=this._cleanups.length;let x=0;const M=()=>{x++,x>=C&&(this._init(),this._emit("disconnected"))};C>0?this._cleanups.forEach(R=>{const N=R(this);typeof N=="object"&&typeof N.then=="function"?N.then(M):M()}):M()}setBackend(C){this.backend=C,G&&(C!==void 0?localStorage.setItem("remotestorage:backend",C):localStorage.removeItem("remotestorage:backend"))}onChange(C,x){this._pathHandlers.change[C]||(this._pathHandlers.change[C]=[]),this._pathHandlers.change[C].push(x)}enableLog(){k.default.logging=!0}disableLog(){k.default.logging=!1}log(...C){b.default.apply(de,C)}setApiKeys(C){const x=[ye.GOOGLE,ye.DROPBOX];if(typeof C!="object"||!Object.keys(C).every(M=>x.includes(M)))return console.error("setApiKeys() was called with invalid arguments"),!1;Object.keys(C).forEach(M=>{const R=C[M];if(R){switch(M){case ye.DROPBOX:this.apiKeys[ye.DROPBOX]={appKey:R},this.dropbox!==void 0&&this.dropbox.clientId===R||z.default._rs_init(this);break;case ye.GOOGLE:this.apiKeys[ye.GOOGLE]={clientId:R},this.googledrive!==void 0&&this.googledrive.clientId===R||B.default._rs_init(this)}return!0}delete this.apiKeys[M]}),G&&localStorage.setItem("remotestorage:api-keys",JSON.stringify(this.apiKeys))}setCordovaRedirectUri(C){if(typeof C!="string"||!C.match(/http(s)?:\/\//))throw new Error("Cordova redirect URI must be a URI string");k.default.cordovaRedirectUri=C}_setGPD(C,x){function M(R){return function(...N){return R.apply(x,N).then(le.bind(this))}}this.get=M(C.get),this.put=M(C.put),this.delete=M(C.delete)}_pendingGPD(C){return(...x)=>{const M=Array.prototype.slice.call(x);return new Promise((R,N)=>{this._pending.push({method:C,args:M,promise:{resolve:R,reject:N}})})}}_processPending(){this._pending.forEach(C=>{try{this[C.method](...C.args).then(C.promise.resolve,C.promise.reject)}catch(x){C.promise.reject(x)}}),this._pending=[]}_bindChange(C){C.on("change",this._dispatchEvent.bind(this,"change"))}_dispatchEvent(C,x){Object.keys(this._pathHandlers[C]).forEach(M=>{const R=M.length;x.path.substr(0,R)===M&&this._pathHandlers[C][M].forEach(N=>{const re={};for(const ee in x)re[ee]=x[ee];re.relativePath=x.path.replace(new RegExp("^"+M),"");try{N(re)}catch(ee){console.error("'change' handler failed: ",ee,ee.stack),this._emit("error",ee)}})})}scope(C){if(typeof C!="string")throw"Argument 'path' of baseClient.scope must be a string";return this.access.checkPathPermission(C,"r")||console.warn("WARNING: Please use remoteStorage.access.claim() to ask for access permissions first: https://remotestoragejs.readthedocs.io/en/latest/js-api/access.html#claim"),new V.default(this,C)}getSyncInterval(){return k.default.syncInterval}setSyncInterval(C){if(!oe(C))throw C+" is not a valid sync interval";const x=k.default.syncInterval;k.default.syncInterval=C,this._emit("sync-interval-change",{oldValue:x,newValue:C})}getBackgroundSyncInterval(){return k.default.backgroundSyncInterval}setBackgroundSyncInterval(C){if(!oe(C))throw C+" is not a valid sync interval";const x=k.default.backgroundSyncInterval;k.default.backgroundSyncInterval=C,this._emit("sync-interval-change",{oldValue:x,newValue:C})}getCurrentSyncInterval(){return k.default.isBackground?k.default.backgroundSyncInterval:k.default.syncInterval}getRequestTimeout(){return k.default.requestTimeout}setRequestTimeout(C){if(typeof C!="number")throw C+" is not a valid request timeout";k.default.requestTimeout=C}syncCycle(){this.sync&&!this.sync.stopped&&(this.on("sync-done",()=>{this.sync&&!this.sync.stopped&&(this._syncTimer&&(clearTimeout(this._syncTimer),this._syncTimer=void 0),this._syncTimer=setTimeout(this.sync.sync.bind(this.sync),this.getCurrentSyncInterval()))}),this.sync.sync())}startSync(){return k.default.cache?(this.sync.stopped=!1,this.syncStopped=!1,this.sync.sync()):(console.warn("Nothing to sync, because caching is disabled."),Promise.resolve())}stopSync(){clearTimeout(this._syncTimer),this._syncTimer=void 0,this.sync?this.sync.stopped=!0:this.syncStopped=!0}addModule(C){const x=C.name,M=C.builder;if(Object.defineProperty(this,x,{configurable:!0,get:function(){const R=this._loadModule(x,M);return Object.defineProperty(this,x,{value:R}),R}}),x.indexOf("-")!==-1){const R=x.replace(/\-[a-z]/g,function(N){return N[1].toUpperCase()});Object.defineProperty(this,R,{get:function(){return this[x]}})}}_loadModule(C,x){if(x)return x(new V.default(this,"/"+C+"/"),new V.default(this,"/public/"+C+"/")).exports;throw"Unknown module: "+C}}u.RemoteStorage=de,de.Authorize=F.default,de.SyncError=Q.default,de.Unauthorized=q.default,de.DiscoveryError=H.default.DiscoveryError,de.util=U,Object.defineProperty(de.prototype,"access",{get:function(){const Y=new P.default;return Object.defineProperty(this,"access",{value:Y}),Y},configurable:!0}),Object.defineProperty(de.prototype,"caching",{configurable:!0,get:function(){const Y=new I.default;return Object.defineProperty(this,"caching",{value:Y}),Y}}),(0,A.applyMixins)(de,[W.EventHandling]),u.default=de},368:function(l,u,f){var p=this&&this.__awaiter||function(k,b,A,P){return new(A||(A=Promise))(function(F,V){function I(z){try{B(P.next(z))}catch(H){V(H)}}function W(z){try{B(P.throw(z))}catch(H){V(H)}}function B(z){var H;z.done?F(z.value):(H=z.value,H instanceof A?H:new A(function(Q){Q(H)})).then(I,W)}B((P=P.apply(k,b||[])).next())})},m=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(u,"__esModule",{value:!0}),u.isArrayBufferView=void 0,u.retryAfterMs=function(k){const b=1e3*parseInt(k.getResponseHeader("Retry-After"));return b>=1e3?b:Math.max(1500,Math.min(6e4,Math.round(w.default.syncInterval/(2.9+.2*Math.random()))))},u.requestWithTimeout=function(k,b,A){return p(this,void 0,void 0,function*(){return typeof fetch=="function"?function(P,F,V){return p(this,void 0,void 0,function*(){const I=typeof AbortController=="function"?new AbortController:null;let W;const B=new Promise((q,_)=>{W=setTimeout(()=>{I&&I.abort(),_("timeout")},w.default.requestTimeout)});let z;const H={},Q=fetch(F,{method:P,headers:V.headers,body:V.body,signal:I?I.signal:void 0}).then(q=>{switch((0,g.default)("[requests fetch]",q),q.headers.forEach((_,U)=>{H[U.toUpperCase()]=_}),z={readyState:4,status:q.status,statusText:q.statusText,response:void 0,getResponseHeader:_=>H[_.toUpperCase()]||null,responseType:V.responseType,responseURL:F},V.responseType){case"arraybuffer":return q.arrayBuffer();case"blob":return q.blob();case"json":return q.json();case void 0:case"":case"text":return q.text();default:throw new Error("responseType 'document' is not currently supported using fetch")}}).then(q=>(z.response=q,V.responseType&&V.responseType!=="text"||(z.responseText=q),z)).finally(()=>{clearTimeout(W)});return Promise.race([Q,B])})}(k,b,A):typeof XMLHttpRequest=="function"?function(P,F,V){return p(this,void 0,void 0,function*(){return new Promise((I,W)=>{(0,g.default)("[requests XHR]",P,F);let B=!1;const z=setTimeout(()=>{B=!0,W("timeout")},w.default.requestTimeout),H=new XMLHttpRequest;if(H.open(P,F,!0),V.responseType&&(H.responseType=V.responseType),V.headers)for(const q in V.headers)H.setRequestHeader(q,V.headers[q]);H.onload=()=>{B||(clearTimeout(z),I(H))},H.onerror=q=>{B||(clearTimeout(z),W(q))};let Q=V.body;typeof Q=="object"&&!(0,u.isArrayBufferView)(Q)&&Q instanceof ArrayBuffer&&(Q=new Uint8Array(Q)),H.send(Q)})})}(k,b,A):Promise.reject("[Requests] You need to add a polyfill for fetch or XMLHttpRequest")})};const g=m(f(334)),w=m(f(28));if(typeof(f.g||window).ArrayBufferView=="function")u.isArrayBufferView=function(k){return k&&k instanceof(f.g||window).ArrayBufferView};else{const k=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];u.isArrayBufferView=function(b){for(let A=0;A<8;A++)if(b instanceof k[A])return!0;return!1}}},941:function(l){l.exports=class{constructor(u){this._itemsRev={},this._storage={},this._canPropagate=!1,this.defaultValue=u,this.activatePropagation()}get(u){u=u.toLowerCase();let f=this._storage[u];return f===void 0&&(f=this.defaultValue,this._storage[u]=f),f}set(u,f){return u=u.toLowerCase(),this._storage[u]===f||(this._storage[u]=f,f||delete this._itemsRev[u],this._updateParentFolderItemRev(u,f),this._canPropagate&&this._propagate(u)),f}delete(u){return this.set(u,null)}deactivatePropagation(){return this._canPropagate=!1,!0}activatePropagation(){return this._canPropagate||(this._generateFolderRev("/"),this._canPropagate=!0),!0}_hashCode(u){let f=0;if(u.length===0)return f;for(let p=0;p<u.length;p++)f=(f<<5)-f+u.charCodeAt(p),f|=0;return f}_generateHash(u){const f=u.sort().join("|");return""+this._hashCode(f)}_updateParentFolderItemRev(u,f){if(u!=="/"){const p=this._getParentFolder(u);this._itemsRev[p]||(this._itemsRev[p]={});const m=this._itemsRev[p];f?m[u]=f:delete m[u],this._updateParentFolderItemRev(p,this.defaultValue)}}_getParentFolder(u){return u.substr(0,u.lastIndexOf("/",u.length-2)+1)}_propagate(u){if(u!=="/"){const f=this._getParentFolder(u),p=this._itemsRev[f],m=[];for(const w in p)m.push(p[w]);const g=this._generateHash(m);this.set(f,g)}}_generateFolderRev(u){const f=this._itemsRev[u];let p=this.defaultValue;if(f){const m=[];for(const g in f){let w;w=g.substr(-1)==="/"?this._generateFolderRev(g):f[g],m.push(w)}m.length>0&&(p=this._generateHash(m))}return this.set(u,p),p}}},491:function(l){class u extends Error{constructor(p){super();const m=new Error("Schema not found: "+p);return m.name="SchemaNotFound",m}}l.exports=u},982:function(l){class u extends Error{constructor(p){super(),this.name="SyncError",this.message="Sync failed: ",typeof p=="string"?this.message+=p:(this.message+=p.message,this.stack=p.stack,this.originalError=p)}}l.exports=u},313:function(l,u,f){var p=this&&this.__awaiter||function(q,_,U,D){return new(U||(U=Promise))(function(G,le){function oe(Y){try{de(D.next(Y))}catch(C){le(C)}}function ye(Y){try{de(D.throw(Y))}catch(C){le(C)}}function de(Y){var C;Y.done?G(Y.value):(C=Y.value,C instanceof U?C:new U(function(x){x(C)})).then(oe,ye)}de((D=D.apply(q,_||[])).next())})},m=this&&this.__importDefault||function(q){return q&&q.__esModule?q:{default:q}};Object.defineProperty(u,"__esModule",{value:!0}),u.Sync=void 0;const g=m(f(28)),w=m(f(451)),k=m(f(93)),b=m(f(334)),A=m(f(275)),P=m(f(982)),F=m(f(503)),V=f(746);let I,W;function B(q,_,U){return{action:q,path:_,promise:U}}function z(q,_){return q.common.revision!==_&&(!q.remote||q.remote.revision!==_)}function H(q){return q.common&&q.common.revision}class Q{constructor(_){this._finishedTasks=[],this.rs=_,this._tasks={},this._running={},this._timeStarted={},this.numThreads=10,this.rs.local.onDiff(U=>{this.addTask(U),this.doTasks()}),this.rs.caching.onActivate(U=>{this.addTask(U),this.doTasks()}),this.addEvents(["done","req-done"])}now(){return new Date().getTime()}queueGetRequest(_){return new Promise((U,D)=>{this.rs.remote.connected?this.rs.remote.online?(this.addTask(_,(function(){this.rs.local.get(_).then(G=>U(G))}).bind(this)),this.doTasks()):D("cannot fulfill maxAge requirement - remote is not online"):D("cannot fulfill maxAge requirement - remote is not connected")})}corruptServerItemsMap(_,U){if(typeof _!="object"||Array.isArray(_))return!0;for(const D in _){const G=_[D];if(typeof G!="object"||typeof G.ETag!="string")return!0;if((0,V.isFolder)(D)){if(D.substring(0,D.length-1).indexOf("/")!==-1)return!0}else if(D.indexOf("/")!==-1||U&&(typeof G["Content-Type"]!="string"||typeof G["Content-Length"]!="number"))return!0}return!1}corruptItemsMap(_){if(typeof _!="object"||Array.isArray(_))return!0;for(const U in _)if(typeof _[U]!="boolean")return!0;return!1}corruptRevision(_){return typeof _!="object"||Array.isArray(_)||_.revision&&typeof _.revision!="string"||_.body&&typeof _.body!="string"&&typeof _.body!="object"||_.contentType&&typeof _.contentType!="string"||_.contentLength&&typeof _.contentLength!="number"||_.timestamp&&typeof _.timestamp!="number"||_.itemsMap&&this.corruptItemsMap(_.itemsMap)}isCorrupt(_){return typeof _!="object"||Array.isArray(_)||typeof _.path!="string"||this.corruptRevision(_.common)||_.local&&this.corruptRevision(_.local)||_.remote&&this.corruptRevision(_.remote)||_.push&&this.corruptRevision(_.push)}hasTasks(){return Object.getOwnPropertyNames(this._tasks).length>0}collectDiffTasks(){return p(this,void 0,void 0,function*(){let _=0;return this.rs.local.forAllNodes(U=>{_>100||(this.isCorrupt(U)?((0,b.default)("[Sync] WARNING: corrupt node in local cache",U),typeof U=="object"&&U.path&&(this.addTask(U.path),_++)):(this.needsFetch(U)&&this.rs.access.checkPathPermission(U.path,"r")||(0,V.isDocument)(U.path)&&this.needsPush(U)&&this.rs.access.checkPathPermission(U.path,"rw"))&&(this.addTask(U.path),_++))}).then(()=>_).catch(U=>{throw U})})}inConflict(_){return _.local&&_.remote&&(_.remote.body!==void 0||_.remote.itemsMap)}needsRefresh(_){return!!_.common&&(!_.common.timestamp||this.now()-_.common.timestamp>g.default.syncInterval)}needsFetch(_){return!!this.inConflict(_)||!(!_.common||_.common.itemsMap!==void 0||_.common.body!==void 0)||!(!_.remote||_.remote.itemsMap!==void 0||_.remote.body!==void 0)}needsPush(_){return!this.inConflict(_)&&(!(!_.local||_.push)||void 0)}needsRemotePut(_){return _.local&&_.local.body}needsRemoteDelete(_){return _.local&&_.local.body===!1}getParentPath(_){const U=_.match(/^(.*\/)([^\/]+\/?)$/);if(U)return U[1];throw new Error('Not a valid path: "'+_+'"')}deleteChildPathsFromTasks(){for(const _ in this._tasks){const U=(0,V.pathsFromRoot)(_);for(let D=1;D<U.length;D++)this._tasks[U[D]]&&(Array.isArray(this._tasks[_])&&this._tasks[_].length&&Array.prototype.push.apply(this._tasks[U[D]],this._tasks[_]),delete this._tasks[_])}}collectRefreshTasks(){return p(this,void 0,void 0,function*(){return this.rs.local.forAllNodes(_=>{let U;if(this.needsRefresh(_)){try{U=this.getParentPath(_.path)}catch{}U&&this.rs.access.checkPathPermission(U,"r")?this.addTask(U):this.rs.access.checkPathPermission(_.path,"r")&&this.addTask(_.path)}}).then(()=>this.deleteChildPathsFromTasks()).catch(_=>{throw _})})}flush(_){for(const U in _)this.rs.caching.checkPath(U)==="FLUSH"&&_[U]&&!_[U].local&&((0,b.default)("[Sync] Flushing",U),_[U]=void 0);return _}doTask(_){return this.rs.local.getNodes([_]).then(U=>{const D=U[_];return D===void 0||function(G){return G.remote&&G.remote.revision&&!G.remote.itemsMap&&!G.remote.body}(D)?B("get",_,this.rs.remote.get(_)):this.needsRemotePut(D)?(D.push=(0,V.deepClone)(D.local),D.push.timestamp=this.now(),this.rs.local.setNodes(this.flush(U)).then(()=>{let G;return G=H(D)?{ifMatch:D.common.revision}:{ifNoneMatch:"*"},B("put",_,this.rs.remote.put(_,D.push.body,D.push.contentType,G))})):this.needsRemoteDelete(D)?(D.push={body:!1,timestamp:this.now()},this.rs.local.setNodes(this.flush(U)).then(()=>H(D)?B("delete",_,this.rs.remote.delete(_,{ifMatch:D.common.revision})):B("get",_,this.rs.remote.get(_)))):H(D)?B("get",_,this.rs.remote.get(_,{ifNoneMatch:D.common.revision})):B("get",_,this.rs.remote.get(_))})}autoMergeFolder(_){if(_.remote.itemsMap&&(_.common=_.remote,delete _.remote,_.common.itemsMap)){for(const U in _.common.itemsMap)_.local.itemsMap[U]||(_.local.itemsMap[U]=!1);(0,V.equal)(_.local.itemsMap,_.common.itemsMap)&&delete _.local}return _}autoMergeDocument(_){return function(U){return(!U.remote||!U.remote.revision||U.remote.revision===U.common.revision)&&(U.common.body===void 0&&U.remote.body===!1||U.remote.body===U.common.body&&U.remote.contentType===U.common.contentType)}(_)?delete(_=function(U){return U.remote&&U.remote.body===!1&&U.local&&U.local.body===!1&&delete U.local,U}(_)).remote:_.remote.body!==void 0&&((0,b.default)("[Sync] Emitting keep/revert"),this.rs.local._emitChange({origin:"conflict",path:_.path,oldValue:_.local.body,newValue:_.remote.body,lastCommonValue:_.common.body,oldContentType:_.local.contentType,newContentType:_.remote.contentType,lastCommonContentType:_.common.contentType}),_.remote.body?_.common=_.remote:_.common={},delete _.remote,delete _.local),_}autoMerge(_){if(_.remote){if(_.local)return(0,V.isFolder)(_.path)?this.autoMergeFolder(_):this.autoMergeDocument(_);if((0,V.isFolder)(_.path))_.remote.itemsMap!==void 0&&(_.common=_.remote,delete _.remote);else if(_.remote.body!==void 0){const U={origin:"remote",path:_.path,oldValue:_.common.body===!1?void 0:_.common.body,newValue:_.remote.body===!1?void 0:_.remote.body,oldContentType:_.common.contentType,newContentType:_.remote.contentType};if((U.oldValue||U.newValue)&&this.rs.local._emitChange(U),!_.remote.body)return;_.common=_.remote,delete _.remote}return _}_.common.body&&this.rs.local._emitChange({origin:"remote",path:_.path,oldValue:_.common.body,newValue:void 0,oldContentType:_.common.contentType,newContentType:void 0})}updateCommonTimestamp(_,U){return p(this,void 0,void 0,function*(){return this.rs.local.getNodes([_]).then(D=>(D[_]&&D[_].common&&D[_].common.revision===U&&(D[_].common.timestamp=this.now()),this.rs.local.setNodes(this.flush(D))))})}markChildren(_,U,D,G){return p(this,void 0,void 0,function*(){const le=[],oe={},ye={};for(const de in U)le.push(_+de),oe[_+de]=U[de];for(const de in G)le.push(_+de);return this.rs.local.getNodes(le).then(de=>{let Y,C;for(const x in de)if(C=de[x],oe[x])C&&C.common?z(C,oe[x].ETag)&&(D[x]=(0,V.deepClone)(C),D[x].remote={revision:oe[x].ETag,timestamp:this.now()},D[x]=this.autoMerge(D[x])):(Y=this.rs.caching.checkPath(x),Y==="ALL"&&(D[x]={path:x,common:{timestamp:this.now()},remote:{revision:oe[x].ETag,timestamp:this.now()}})),D[x]&&oe[x]["Content-Type"]&&(D[x].remote.contentType=oe[x]["Content-Type"]),D[x]&&oe[x]["Content-Length"]&&(D[x].remote.contentLength=oe[x]["Content-Length"]);else if(G[x.substring(_.length)]&&C&&C.common){if(C.common.itemsMap)for(const M in C.common.itemsMap)ye[x+M]=!0;if(C.local&&C.local.itemsMap)for(const M in C.local.itemsMap)ye[x+M]=!0;if(C.remote||(0,V.isFolder)(x))D[x]=void 0;else if(D[x]=this.autoMerge(C),D[x]===void 0){const M=this.getParentPath(x),R=D[M],N=x.substring(_.length);R&&R.local&&(delete R.local.itemsMap[N],(0,V.equal)(R.local.itemsMap,R.common.itemsMap)&&delete R.local)}}return this.deleteRemoteTrees(Object.keys(ye),D).then(x=>this.rs.local.setNodes(this.flush(x)))})})}deleteRemoteTrees(_,U){return p(this,void 0,void 0,function*(){return _.length===0?Promise.resolve(U):this.rs.local.getNodes(_).then(D=>p(this,void 0,void 0,function*(){const G={};function le(oe,ye){if(oe&&oe.itemsMap)for(const de in oe.itemsMap)G[ye+de]=!0}for(const oe in D){const ye=D[oe];ye&&((0,V.isFolder)(oe)?(le(ye.common,oe),le(ye.local,oe)):ye.common&&typeof ye.common.body!==void 0&&(U[oe]=(0,V.deepClone)(ye),U[oe].remote={body:!1,timestamp:this.now()},U[oe]=this.autoMerge(U[oe])))}return this.deleteRemoteTrees(Object.keys(G),U).then(oe=>this.rs.local.setNodes(this.flush(oe)))}))})}completeFetch(_,U,D,G){return p(this,void 0,void 0,function*(){let le,oe;const ye=(0,V.pathsFromRoot)(_);return(0,V.isFolder)(_)?le=[_]:(oe=ye[1],le=[_,oe]),this.rs.local.getNodes(le).then(de=>{let Y,C,x=de[_];const M={};function R(N){if(N&&N.itemsMap)for(Y in N.itemsMap)U[Y]||(M[Y]=!0)}if(typeof x=="object"&&x.path===_&&typeof x.common=="object"||(x={path:_,common:{}},de[_]=x),x.remote={revision:G,timestamp:this.now()},(0,V.isFolder)(_))for(Y in R(x.common),R(x.remote),x.remote.itemsMap={},U)x.remote.itemsMap[Y]=!0;else x.remote.body=U,x.remote.contentType=D,C=de[oe],C&&C.local&&C.local.itemsMap&&(Y=_.substring(oe.length),C.local.itemsMap[Y]=!0,(0,V.equal)(C.local.itemsMap,C.common.itemsMap)&&delete C.local);return de[_]=this.autoMerge(x),{toBeSaved:de,missingChildren:M}})})}completePush(_,U,D,G){return p(this,void 0,void 0,function*(){return this.rs.local.getNodes([_]).then(le=>{const oe=le[_];if(!oe.push)throw this.stopped=!0,new Error("completePush called but no push version!");return D?((0,b.default)("[Sync] We have a conflict"),oe.remote&&oe.remote.revision===G||(oe.remote={revision:G||"conflict",timestamp:this.now()},delete oe.push),le[_]=this.autoMerge(oe)):(oe.common={revision:G,timestamp:this.now()},U==="put"?(oe.common.body=oe.push.body,oe.common.contentType=oe.push.contentType,(0,V.equal)(oe.local.body,oe.push.body)&&oe.local.contentType===oe.push.contentType&&delete oe.local,delete oe.push):U==="delete"&&(oe.local.body===!1?le[_]=void 0:delete oe.push)),this.rs.local.setNodes(this.flush(le))})})}dealWithFailure(_){return p(this,void 0,void 0,function*(){return this.rs.local.getNodes([_]).then(U=>{if(U[_])return delete U[_].push,this.rs.local.setNodes(this.flush(U))})})}interpretStatus(_){const U={statusCode:_,successful:void 0,conflict:void 0,unAuth:void 0,notFound:void 0,changed:void 0,networkProblems:void 0};if(typeof _=="string"&&(_==="offline"||_==="timeout"))return U.successful=!1,U.networkProblems=!0,U;if(typeof _=="number"){const D=Math.floor(_/100);return U.successful=D===2||_===304||_===412||_===404,U.conflict=_===412,U.unAuth=_===401&&this.rs.remote.token!==A.default.IMPLIED_FAKE_TOKEN||_===402||_===403,U.notFound=_===404,U.changed=_!==304,U}}handleGetResponse(_,U,D,G,le){return p(this,void 0,void 0,function*(){return U.notFound&&(D=!!(0,V.isFolder)(_)&&{}),U.changed?this.completeFetch(_,D,G,le).then(oe=>(0,V.isFolder)(_)?this.corruptServerItemsMap(D)?((0,b.default)("[Sync] WARNING: Discarding corrupt folder description from server for "+_),!1):this.markChildren(_,D,oe.toBeSaved,oe.missingChildren).then(()=>!0):this.rs.local.setNodes(this.flush(oe.toBeSaved)).then(()=>!0)):this.updateCommonTimestamp(_,le).then(()=>!0)})}handleResponse(_,U,D){const G=this.interpretStatus(D.statusCode);if(G.successful){if(U==="get")return this.handleGetResponse(_,G,D.body,D.contentType,D.revision);if(U==="put"||U==="delete")return this.completePush(_,U,G.conflict,D.revision).then(function(){return!0});throw new Error(`cannot handle response for unknown action ${U}`)}{let le;return le=G.unAuth?new F.default:G.networkProblems?new P.default("Network request failed."):new Error("HTTP response code "+G.statusCode+" received."),this.dealWithFailure(_).then(()=>{throw this.rs._emit("error",le),le})}}finishTask(_,U=!0){if(_.action!==void 0){if(!(U&&((0,b.default)("[Sync] queue finished task:",_.path),this._finishedTasks.push(_),this._finishedTasks.length>1)))return(0,b.default)("[Sync] run task:",_.path),_.promise.then(D=>this.handleResponse(_.path,_.action,D),D=>((0,b.default)("[Sync] wireclient rejects its promise!",_.path,_.action,D),this.handleResponse(_.path,_.action,{statusCode:"offline"}))).then(D=>p(this,void 0,void 0,function*(){if(this._finishedTasks.shift(),delete this._timeStarted[_.path],delete this._running[_.path],D&&this._tasks[_.path]){for(let G=0;G<this._tasks[_.path].length;G++)this._tasks[_.path][G]();delete this._tasks[_.path]}this.rs._emit("sync-req-done",{tasksRemaining:Object.keys(this._tasks).length}),this._finishedTasks.length>0?this.finishTask(this._finishedTasks[0],!1):yield this.collectTasks(!1).then(()=>{!this.hasTasks()||this.stopped?((0,b.default)("[Sync] Sync is done! Reschedule?",Object.getOwnPropertyNames(this._tasks).length,this.stopped),this.done||(this.done=!0,this.rs._emit("sync-done",{completed:!0}))):setTimeout(()=>{this.doTasks()},10)})}),D=>{(0,b.default)("[Sync] Error",D),this._finishedTasks.shift(),delete this._timeStarted[_.path],delete this._running[_.path],this.rs._emit("sync-req-done",{tasksRemaining:Object.keys(this._tasks).length}),this._finishedTasks.length>0?this.finishTask(this._finishedTasks[0],!1):this.done||(this.done=!0,this.rs._emit("sync-done",{completed:!1}))});(0,b.default)("[Sync] delaying finished task:",_.path)}else delete this._running[_.path]}doTasks(){let _,U,D=0;_=this.rs.remote.connected?this.rs.remote.online?this.numThreads:1:0;const G=_-Object.getOwnPropertyNames(this._running).length;if(G<=0)return!0;for(U in this._tasks)if(!this._running[U]&&(this._timeStarted[U]=this.now(),this._running[U]=this.doTask(U),this._running[U].then(this.finishTask.bind(this)),D++,D>=G))return!0;return D>=G}collectTasks(_){return p(this,void 0,void 0,function*(){return this.hasTasks()||this.stopped?Promise.resolve():this.collectDiffTasks().then(U=>U||_===!1?Promise.resolve():this.collectRefreshTasks(),function(U){throw U})})}addTask(_,U){this._tasks[_]||(this._tasks[_]=[]),typeof U=="function"&&this._tasks[_].push(U)}sync(){return this.done=!1,this.doTasks()?Promise.resolve():this.collectTasks().then(()=>{try{this.doTasks()}catch(_){(0,b.default)("[Sync] doTasks error",_)}},function(_){throw(0,b.default)("[Sync] Sync error",_),new Error("Local cache unavailable")})}static _rs_init(_){I=function(){(0,b.default)("[Sync] syncCycleCb calling syncCycle");const U=new w.default;U.isBrowser()&&function(D,G){function le(oe){const ye=G.getCurrentSyncInterval();g.default.isBackground=!oe;const de=G.getCurrentSyncInterval();G._emit("sync-interval-change",{oldValue:ye,newValue:de})}D.on("background",()=>le(!1)),D.on("foreground",()=>le(!0))}(U,_),_.sync||(_.sync=new Q(_),_.syncStopped&&((0,b.default)("[Sync] Instantiating sync stopped"),_.sync.stopped=!0,delete _.syncStopped)),(0,b.default)("[Sync] syncCycleCb calling syncCycle"),_.syncCycle()},W=function(){_.removeEventListener("connected",W),_.startSync()},_.on("ready",I),_.on("connected",W)}static _rs_cleanup(_){_.stopSync(),_.removeEventListener("ready",I),_.removeEventListener("connected",W),_.sync=void 0,delete _.sync}}u.Sync=Q,(0,V.applyMixins)(Q,[k.default]),u.default=Q},370:function(l,u,f){var p=this&&this.__awaiter||function(k,b,A,P){return new(A||(A=Promise))(function(F,V){function I(z){try{B(P.next(z))}catch(H){V(H)}}function W(z){try{B(P.throw(z))}catch(H){V(H)}}function B(z){var H;z.done?F(z.value):(H=z.value,H instanceof A?H:new A(function(Q){Q(H)})).then(I,W)}B((P=P.apply(k,b||[])).next())})};const m=(this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}})(f(334));function g(k){return this.backend==="dropbox"&&!!k.match(/^\/public\/.*[^\/]$/)}const w={get:function(k,b){if(this.local){if(b===void 0)b=typeof(A=this).remote=="object"&&A.remote.connected&&A.remote.online?2*A.getSyncInterval():((0,m.default)("Not setting default maxAge, because remote is offline or not connected"),!1);else if(typeof b!="number"&&b!==!1)return Promise.reject("Argument 'maxAge' must be 'false' or a number");return this.local.get(k,b,this.sync.queueGetRequest.bind(this.sync))}return this.remote.get(k);var A},put:function(k,b,A){return g.bind(this)(k)?w._wrapBusyDone.call(this,this.remote.put(k,b,A)):this.local?this.local.put(k,b,A):w._wrapBusyDone.call(this,this.remote.put(k,b,A))},delete:function(k){return this.local?this.local.delete(k):w._wrapBusyDone.call(this,this.remote.delete(k))},_wrapBusyDone:function(k){return p(this,void 0,void 0,function*(){return this._emit("wire-busy"),k.then(b=>(this._emit("wire-done",{success:!0}),Promise.resolve(b)),b=>(this._emit("wire-done",{success:!1}),Promise.reject(b)))})}};l.exports=w},613:function(l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.BaseClientTypes=void 0;class f{constructor(){this.uris={},this.schemas={},this.aliases={}}declare(g,w,k,b){const A=g+"/"+w;if(b.extends){const P=b.extends.split("/"),F=P.length===1?g+"/"+P.shift():P.join("/"),V=this.uris[F];if(!V)throw"Type '"+A+"' tries to extend unknown schema '"+F+"'";b.extends=this.schemas[V]}this.uris[A]=k,this.aliases[k]=A,this.schemas[k]=b}resolveAlias(g){return this.uris[g]}getSchema(g){return this.schemas[g]}inScope(g){const w=g.length,k={};for(const b in this.uris)if(b.substr(0,w+1)===g+"/"){const A=this.uris[b];k[A]=this.schemas[A]}return k}}u.BaseClientTypes=f;const p=new f;u.default=p},503:function(l){class u extends Error{constructor(p,m={}){super(),this.name="Unauthorized",this.message=p===void 0?"App authorization expired or revoked.":p,m.code!==void 0&&(this.code=m.code),this.stack=new Error().stack}}l.exports=u},746:function(l,u,f){var p=this&&this.__awaiter||function(g,w,k,b){return new(k||(k=Promise))(function(A,P){function F(W){try{I(b.next(W))}catch(B){P(B)}}function V(W){try{I(b.throw(W))}catch(B){P(B)}}function I(W){var B;W.done?A(W.value):(B=W.value,B instanceof k?B:new k(function(z){z(B)})).then(F,V)}I((b=b.apply(g,w||[])).next())})};function m(g,w){if(typeof g=="object"&&!Array.isArray(g)&&g!==null){for(const k in g)if(typeof g[k]=="object"&&g[k]!==null)if(g[k].toString()==="[object ArrayBuffer]"){w[k]=new ArrayBuffer(g[k].byteLength);const b=new Int8Array(g[k]);new Int8Array(w[k]).set(b)}else m(g[k],w[k])}}Object.defineProperty(u,"__esModule",{value:!0}),u.toBase64=u.getTextFromArrayBuffer=u.shouldBeTreatedAsBinary=u.getJSONFromLocalStorage=u.localStorageAvailable=u.pathsFromRoot=u.deepClone=u.equal=u.bindAll=u.cleanPath=u.baseName=u.isDocument=u.isFolder=u.containingFolder=u.extend=u.getGlobalContext=u.globalContext=u.logError=void 0,u.generateCodeVerifier=function(){return p(this,arguments,void 0,function*(g=128){const w=new Uint8Array(g);crypto.getRandomValues(w);const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",b=Array.from(w).map(I=>k[I%66]),A=b.join(""),P=Uint8Array.from(b.map(I=>I.charCodeAt(0))),F=(V=yield crypto.subtle.digest("SHA-256",P),btoa(String.fromCharCode.apply(null,new Uint8Array(V))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""));var V;return crypto.getRandomValues(w),{codeVerifier:A,codeChallenge:F,state:Array.from(w).map(I=>k[I%66]).join("")}})},u.applyMixins=function(g,w){w.forEach(k=>{Object.getOwnPropertyNames(k.prototype).forEach(b=>{Object.defineProperty(g.prototype,b,Object.getOwnPropertyDescriptor(k.prototype,b))})})},u.logError=g=>{typeof g=="string"?console.error(g):console.error(g.message,g.stack)},u.globalContext=typeof window<"u"?window:typeof self=="object"?self:f.g,u.getGlobalContext=()=>typeof window<"u"?window:typeof self=="object"?self:f.g,u.extend=(...g)=>{const w=g[0];return Array.prototype.slice.call(g,1).forEach(function(k){for(const b in k)w[b]=k[b]}),w},u.containingFolder=g=>{if(g==="")return"/";if(!g)throw"Path not given!";return g.replace(/\/+/g,"/").replace(/[^\/]+\/?$/,"")},u.isFolder=g=>g.slice(-1)==="/",u.isDocument=g=>!(0,u.isFolder)(g),u.baseName=g=>{const w=g.split("/");return(0,u.isFolder)(g)?w[w.length-2]+"/":w[w.length-1]},u.cleanPath=g=>g.replace(/\/+/g,"/").split("/").map(encodeURIComponent).join("/").replace(/'/g,"%27"),u.bindAll=g=>{for(const w in this)typeof g[w]=="function"&&(g[w]=g[w].bind(g))},u.equal=(g,w,k=[])=>{let b;if(typeof g!=typeof w)return!1;if(typeof g=="number"||typeof g=="boolean"||typeof g=="string")return g===w;if(typeof g=="function")return g.toString()===w.toString();if(g instanceof ArrayBuffer&&w instanceof ArrayBuffer&&(g=new Uint8Array(g),w=new Uint8Array(w)),g instanceof Array){if(g.length!==w.length)return!1;for(let A=0,P=g.length;A<P;A++)if(!(0,u.equal)(g[A],w[A],k))return!1}else{for(b in g)if(g.hasOwnProperty(b)&&!(b in w))return!1;for(b in w){if(!w.hasOwnProperty(b))continue;if(!(b in g))return!1;let A;if(typeof w[b]=="object"){if(k.indexOf(w[b])>=0)continue;A=k.slice(),A.push(w[b])}if(!(0,u.equal)(g[b],w[b],A))return!1}}return!0},u.deepClone=g=>{if(g!==void 0){const w=JSON.parse(JSON.stringify(g));return m(g,w),w}},u.pathsFromRoot=g=>{const w=[g],k=g.replace(/\/$/,"").split("/");for(;k.length>1;)k.pop(),w.push(k.join("/")+"/");return w},u.localStorageAvailable=()=>{const g=(0,u.getGlobalContext)();if(!("localStorage"in g))return!1;try{return g.localStorage.setItem("rs-check","1"),g.localStorage.removeItem("rs-check"),!0}catch{return!1}},u.getJSONFromLocalStorage=g=>{const w=(0,u.getGlobalContext)();try{return JSON.parse(w.localStorage.getItem(g))}catch{}},u.shouldBeTreatedAsBinary=(g,w)=>!!(w&&w.match(/charset=binary/)||/[\x00-\x08\x0E-\x1F\uFFFD]/.test(g)),u.getTextFromArrayBuffer=(g,w)=>new Promise(k=>{if(typeof Blob>"u"||typeof FileReader>"u"){const b=Buffer.from(g);k(b.toString(w))}else{let b;const A=u.globalContext;if(A.BlobBuilder=A.BlobBuilder||A.WebKitBlobBuilder,A.BlobBuilder!==void 0){const F=new A.BlobBuilder;F.append(g),b=F.getBlob()}else b=new Blob([g]);const P=new FileReader;typeof P.addEventListener=="function"?P.addEventListener("loadend",function(F){k(F.target.result)}):P.onloadend=function(F){k(F.target.result)},P.readAsText(b,w)}}),u.toBase64=g=>{const w=(0,u.getGlobalContext)();return"btoa"in w?w.btoa(g):Buffer.from(g).toString("base64")}},600:function(l,u,f){var p=this&&this.__awaiter||function(z,H,Q,q){return new(Q||(Q=Promise))(function(_,U){function D(oe){try{le(q.next(oe))}catch(ye){U(ye)}}function G(oe){try{le(q.throw(oe))}catch(ye){U(ye)}}function le(oe){var ye;oe.done?_(oe.value):(ye=oe.value,ye instanceof Q?ye:new Q(function(de){de(ye)})).then(D,G)}le((q=q.apply(z,H||[])).next())})},m=this&&this.__importDefault||function(z){return z&&z.__esModule?z:{default:z}};const g=m(f(275)),w=m(f(93)),k=m(f(503)),b=m(f(334)),A=f(746),P=f(368),F=f(684);let V;const I="remotestorage:wireclient",W={"draft-dejong-remotestorage-00":2,"draft-dejong-remotestorage-01":3,"draft-dejong-remotestorage-02":4,"https://www.w3.org/community/rww/wiki/read-write-web-00#simple":1};class B extends F.RemoteBase{constructor(H){if(super(H),this._revisionCache={},V=(0,A.localStorageAvailable)(),this.addEvents(["connected","not-connected"]),V){const Q=function(){const q=(0,A.getJSONFromLocalStorage)(I)||{},{userAddress:_,href:U,storageApi:D,token:G,properties:le}=q;return{userAddress:_,href:U,storageApi:D,token:G,properties:le}}();Q&&setTimeout(()=>{this.configure(Q)},0)}this.connected&&setTimeout(this._emit.bind(this),0,"connected")}get storageType(){if(this.storageApi){const H=this.storageApi.match(/draft-dejong-(remotestorage-\d\d)/);return H?H[1]:"2012.04"}}_request(H,Q,q,_,U,D,G){return p(this,void 0,void 0,function*(){if(this.isForbiddenRequestMethod(H,Q))return Promise.reject(`Don't use ${H} on directories!`);let le;return q!==g.default.IMPLIED_FAKE_TOKEN&&(_.Authorization="Bearer "+q),this.rs._emit("wire-busy",{method:H,isFolder:(0,A.isFolder)(Q)}),(0,P.requestWithTimeout)(H,Q,{body:U,headers:_,responseType:"arraybuffer"}).then(oe=>{if(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:H,isFolder:(0,A.isFolder)(Q),success:!0}),ye=oe.status,[401,403,404,412].indexOf(ye)>=0)return(0,b.default)("[WireClient] Error response status",oe.status),le=D?this.stripQuotes(oe.getResponseHeader("ETag")):void 0,oe.status===401&&this.rs._emit("error",new k.default),Promise.resolve({statusCode:oe.status,revision:le});if(function(de){return[201,204,304].indexOf(de)>=0}(oe.status)||oe.status===200&&H!=="GET")return le=this.stripQuotes(oe.getResponseHeader("ETag")),(0,b.default)("[WireClient] Successful request",le),Promise.resolve({statusCode:oe.status,revision:le});{const de=oe.getResponseHeader("Content-Type");le=D?this.stripQuotes(oe.getResponseHeader("ETag")):oe.status===200?G:void 0;const Y=function(C){let x,M="utf-8";return C&&(x=C.match(/charset=(.+)$/),x&&(M=x[1])),M}(de);return(0,A.shouldBeTreatedAsBinary)(oe.response,de)?((0,b.default)("[WireClient] Successful request with unknown or binary mime-type",le),Promise.resolve({statusCode:oe.status,body:oe.response,contentType:de,revision:le})):(0,A.getTextFromArrayBuffer)(oe.response,Y).then(C=>((0,b.default)("[WireClient] Successful request",le),Promise.resolve({statusCode:oe.status,body:C,contentType:de,revision:le})))}var ye},oe=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:H,isFolder:(0,A.isFolder)(Q),success:!1}),Promise.reject(oe)))})}configure(H){if(typeof H!="object")throw new Error("WireClient configure settings parameter should be an object");if(H.userAddress!==void 0&&(this.userAddress=H.userAddress),H.href!==void 0&&(this.href=H.href),H.storageApi!==void 0&&(this.storageApi=H.storageApi),H.token!==void 0&&(this.token=H.token),H.properties!==void 0&&(this.properties=H.properties),typeof this.storageApi=="string"){const Q=W[this.storageApi]||5;this.supportsRevs=Q>=2}this.href&&this.token?(this.connected=!0,this.online=!0,this._emit("connected")):this.connected=!1,V&&(localStorage[I]=JSON.stringify({userAddress:this.userAddress,href:this.href,storageApi:this.storageApi,token:this.token,properties:this.properties}))}get(H,Q={}){if(!this.connected)return Promise.reject("not connected (path: "+H+")");const q={};return this.supportsRevs&&Q.ifNoneMatch&&(q["If-None-Match"]=this.addQuotes(Q.ifNoneMatch)),this._request("GET",this.href+(0,A.cleanPath)(H),this.token,q,void 0,this.supportsRevs,this._revisionCache[H]).then(_=>{if(!(0,A.isFolder)(H))return Promise.resolve(_);let U={};if(_.body!==void 0)try{_.body=JSON.parse(_.body)}catch{return Promise.reject("Folder description at "+this.href+(0,A.cleanPath)(H)+" is not JSON")}if(_.statusCode===200&&typeof _.body=="object"){if(Object.keys(_.body).length===0)_.statusCode=404;else if((D=_.body)["@context"]==="http://remotestorage.io/spec/folder-description"&&typeof D.items=="object"){for(const G in _.body.items)this._revisionCache[H+G]=_.body.items[G].ETag;U=_.body.items}else Object.keys(_.body).forEach(G=>{this._revisionCache[H+G]=_.body[G],U[G]={ETag:_.body[G]}});return _.body=U,Promise.resolve(_)}return Promise.resolve(_);var D})}put(H,Q,q,_={}){if(!this.connected)return Promise.reject("not connected (path: "+H+")");!q.match(/charset=/)&&(Q instanceof ArrayBuffer||(0,P.isArrayBufferView)(Q))&&(q+="; charset=binary");const U={"Content-Type":q};return this.supportsRevs&&(_.ifMatch&&(U["If-Match"]=this.addQuotes(_.ifMatch)),_.ifNoneMatch&&(U["If-None-Match"]=this.addQuotes(_.ifNoneMatch))),this._request("PUT",this.href+(0,A.cleanPath)(H),this.token,U,Q,this.supportsRevs)}delete(H,Q={}){if(!this.connected)throw new Error("not connected (path: "+H+")");Q||(Q={});const q={};return this.supportsRevs&&Q.ifMatch&&(q["If-Match"]=this.addQuotes(Q.ifMatch)),this._request("DELETE",this.href+(0,A.cleanPath)(H),this.token,q,void 0,this.supportsRevs)}static _rs_init(H){H.remote=new B(H),H.remote.online=!0}static _rs_supported(){return typeof fetch=="function"||typeof XMLHttpRequest=="function"}static _rs_cleanup(){V&&delete localStorage[I]}}(0,A.applyMixins)(B,[w.default]),l.exports=B},439:function(l,u){var f,p;f=function(){var m,g,w,k;Object.keys||(Object.keys=(m=Object.prototype.hasOwnProperty,g=!{toString:null}.propertyIsEnumerable("toString"),k=(w=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(C){if(typeof C!="object"&&typeof C!="function"||C===null)throw new TypeError("Object.keys called on non-object");var x=[];for(var M in C)m.call(C,M)&&x.push(M);if(g)for(var R=0;R<k;R++)m.call(C,w[R])&&x.push(w[R]);return x})),Object.create||(Object.create=function(){function C(){}return function(x){if(arguments.length!==1)throw new Error("Object.create implementation only accepts one parameter.");return C.prototype=x,new C}}()),Array.isArray||(Array.isArray=function(C){return Object.prototype.toString.call(C)==="[object Array]"}),Array.prototype.indexOf||(Array.prototype.indexOf=function(C){if(this===null)throw new TypeError;var x=Object(this),M=x.length>>>0;if(M===0)return-1;var R=0;if(arguments.length>1&&((R=Number(arguments[1]))!=R?R=0:R!==0&&R!==1/0&&R!==-1/0&&(R=(R>0||-1)*Math.floor(Math.abs(R)))),R>=M)return-1;for(var N=R>=0?R:Math.max(M-Math.abs(R),0);N<M;N++)if(N in x&&x[N]===C)return N;return-1}),Object.isFrozen||(Object.isFrozen=function(C){for(var x="tv4_test_frozen_key";C.hasOwnProperty(x);)x+=Math.random();try{return C[x]=!0,delete C[x],!1}catch{return!0}});var b={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},A={"*":!0};function P(C){return encodeURI(C).replace(/%25[0-9][0-9]/g,function(x){return"%"+x.substring(3)})}function F(C){var x="";b[C.charAt(0)]&&(x=C.charAt(0),C=C.substring(1));var M="",R="",N=!0,re=!1,ee=!1;x==="+"?N=!1:x==="."?(R=".",M="."):x==="/"?(R="/",M="/"):x==="#"?(R="#",N=!1):x===";"?(R=";",M=";",re=!0,ee=!0):x==="?"?(R="?",M="&",re=!0):x==="&"&&(R="&",M="&",re=!0);for(var ne=[],he=C.split(","),ke=[],Me={},je=0;je<he.length;je++){var $e=he[je],pt=null;if($e.indexOf(":")!==-1){var ln=$e.split(":");$e=ln[0],pt=parseInt(ln[1],10)}for(var Pt={};A[$e.charAt($e.length-1)];)Pt[$e.charAt($e.length-1)]=!0,$e=$e.substring(0,$e.length-1);var an={truncate:pt,name:$e,suffices:Pt};ke.push(an),Me[$e]=an,ne.push($e)}var Eo=function(En){for(var en="",Ji=0,kn=0;kn<ke.length;kn++){var bt=ke[kn],Nt=En(bt.name);if(Nt==null||Array.isArray(Nt)&&Nt.length===0||typeof Nt=="object"&&Object.keys(Nt).length===0)Ji++;else if(en+=kn===Ji?R:M||",",Array.isArray(Nt)){re&&(en+=bt.name+"=");for(var dr=0;dr<Nt.length;dr++)dr>0&&(en+=bt.suffices["*"]&&M||",",bt.suffices["*"]&&re&&(en+=bt.name+"=")),en+=N?encodeURIComponent(Nt[dr]).replace(/!/g,"%21"):P(Nt[dr])}else if(typeof Nt=="object"){re&&!bt.suffices["*"]&&(en+=bt.name+"=");var fs=!0;for(var pr in Nt)fs||(en+=bt.suffices["*"]&&M||","),fs=!1,en+=N?encodeURIComponent(pr).replace(/!/g,"%21"):P(pr),en+=bt.suffices["*"]?"=":",",en+=N?encodeURIComponent(Nt[pr]).replace(/!/g,"%21"):P(Nt[pr])}else re&&(en+=bt.name,ee&&Nt===""||(en+="=")),bt.truncate!=null&&(Nt=Nt.substring(0,bt.truncate)),en+=N?encodeURIComponent(Nt).replace(/!/g,"%21"):P(Nt)}return en};return Eo.varNames=ne,{prefix:R,substitution:Eo}}function V(C){if(!(this instanceof V))return new V(C);for(var x=C.split("{"),M=[x.shift()],R=[],N=[],re=[];x.length>0;){var ee=x.shift(),ne=ee.split("}")[0],he=ee.substring(ne.length+1),ke=F(ne);N.push(ke.substitution),R.push(ke.prefix),M.push(he),re=re.concat(ke.substitution.varNames)}this.fill=function(Me){for(var je=M[0],$e=0;$e<N.length;$e++)je+=(0,N[$e])(Me),je+=M[$e+1];return je},this.varNames=re,this.template=C}V.prototype={toString:function(){return this.template},fillFromObject:function(C){return this.fill(function(x){return C[x]})}};var I=function(C,x,M,R,N){if(this.missing=[],this.missingMap={},this.formatValidators=C?Object.create(C.formatValidators):{},this.schemas=C?Object.create(C.schemas):{},this.collectMultiple=x,this.errors=[],this.handleError=x?this.collectError:this.returnError,R&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),N&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=M||U("en"),typeof this.errorReporter=="string")throw new Error("debug");if(this.definedKeywords={},C)for(var re in C.definedKeywords)this.definedKeywords[re]=C.definedKeywords[re].slice(0)};function W(C,x){if(C===x)return!0;if(C&&x&&typeof C=="object"&&typeof x=="object"){if(Array.isArray(C)!==Array.isArray(x))return!1;if(Array.isArray(C)){if(C.length!==x.length)return!1;for(var M=0;M<C.length;M++)if(!W(C[M],x[M]))return!1}else{var R;for(R in C)if(x[R]===void 0&&C[R]!==void 0)return!1;for(R in x)if(C[R]===void 0&&x[R]!==void 0)return!1;for(R in C)if(!W(C[R],x[R]))return!1}return!0}return!1}I.prototype.defineKeyword=function(C,x){this.definedKeywords[C]=this.definedKeywords[C]||[],this.definedKeywords[C].push(x)},I.prototype.createError=function(C,x,M,R,N,re,ee){var ne=new ye(C,x,M,R,N);return ne.message=this.errorReporter(ne,re,ee),ne},I.prototype.returnError=function(C){return C},I.prototype.collectError=function(C){return C&&this.errors.push(C),null},I.prototype.prefixErrors=function(C,x,M){for(var R=C;R<this.errors.length;R++)this.errors[R]=this.errors[R].prefixWith(x,M);return this},I.prototype.banUnknownProperties=function(C,x){for(var M in this.unknownPropertyPaths){var R=this.createError(D.UNKNOWN_PROPERTY,{path:M},M,"",null,C,x),N=this.handleError(R);if(N)return N}return null},I.prototype.addFormat=function(C,x){if(typeof C=="object"){for(var M in C)this.addFormat(M,C[M]);return this}this.formatValidators[C]=x},I.prototype.resolveRefs=function(C,x){if(C.$ref!==void 0){if((x=x||{})[C.$ref])return this.createError(D.CIRCULAR_REFERENCE,{urls:Object.keys(x).join(", ")},"","",null,void 0,C);x[C.$ref]=!0,C=this.getSchema(C.$ref,x)}return C},I.prototype.getSchema=function(C,x){var M;if(this.schemas[C]!==void 0)return M=this.schemas[C],this.resolveRefs(M,x);var R=C,N="";if(C.indexOf("#")!==-1&&(N=C.substring(C.indexOf("#")+1),R=C.substring(0,C.indexOf("#"))),typeof this.schemas[R]=="object"){M=this.schemas[R];var re=decodeURIComponent(N);if(re==="")return this.resolveRefs(M,x);if(re.charAt(0)!=="/")return;for(var ee=re.split("/").slice(1),ne=0;ne<ee.length;ne++){var he=ee[ne].replace(/~1/g,"/").replace(/~0/g,"~");if(M[he]===void 0){M=void 0;break}M=M[he]}if(M!==void 0)return this.resolveRefs(M,x)}this.missing[R]===void 0&&(this.missing.push(R),this.missing[R]=R,this.missingMap[R]=R)},I.prototype.searchSchemas=function(C,x){if(Array.isArray(C))for(var M=0;M<C.length;M++)this.searchSchemas(C[M],x);else if(C&&typeof C=="object"){for(var R in typeof C.id=="string"&&function(re,ee){if(ee.substring(0,re.length)===re){var ne=ee.substring(re.length);if(ee.length>0&&ee.charAt(re.length-1)==="/"||ne.charAt(0)==="#"||ne.charAt(0)==="?")return!0}return!1}(x,C.id)&&this.schemas[C.id]===void 0&&(this.schemas[C.id]=C),C)if(R!=="enum"){if(typeof C[R]=="object")this.searchSchemas(C[R],x);else if(R==="$ref"){var N=q(C[R]);N&&this.schemas[N]===void 0&&this.missingMap[N]===void 0&&(this.missingMap[N]=N)}}}},I.prototype.addSchema=function(C,x){if(typeof C!="string"||x===void 0){if(typeof C!="object"||typeof C.id!="string")return;C=(x=C).id}C===q(C)+"#"&&(C=q(C)),this.schemas[C]=x,delete this.missingMap[C],_(x,C),this.searchSchemas(x,C)},I.prototype.getSchemaMap=function(){var C={};for(var x in this.schemas)C[x]=this.schemas[x];return C},I.prototype.getSchemaUris=function(C){var x=[];for(var M in this.schemas)C&&!C.test(M)||x.push(M);return x},I.prototype.getMissingUris=function(C){var x=[];for(var M in this.missingMap)C&&!C.test(M)||x.push(M);return x},I.prototype.dropSchemas=function(){this.schemas={},this.reset()},I.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},I.prototype.validateAll=function(C,x,M,R,N){var re;if(!(x=this.resolveRefs(x)))return null;if(x instanceof ye)return this.errors.push(x),x;var ee,ne=this.errors.length,he=null,ke=null;if(this.checkRecursive&&C&&typeof C=="object"){if(re=!this.scanned.length,C[this.validatedSchemasKey]){var Me=C[this.validatedSchemasKey].indexOf(x);if(Me!==-1)return this.errors=this.errors.concat(C[this.validationErrorsKey][Me]),null}if(Object.isFrozen(C)&&(ee=this.scannedFrozen.indexOf(C))!==-1){var je=this.scannedFrozenSchemas[ee].indexOf(x);if(je!==-1)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[ee][je]),null}if(this.scanned.push(C),Object.isFrozen(C))ee===-1&&(ee=this.scannedFrozen.length,this.scannedFrozen.push(C),this.scannedFrozenSchemas.push([])),he=this.scannedFrozenSchemas[ee].length,this.scannedFrozenSchemas[ee][he]=x,this.scannedFrozenValidationErrors[ee][he]=[];else{if(!C[this.validatedSchemasKey])try{Object.defineProperty(C,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(C,this.validationErrorsKey,{value:[],configurable:!0})}catch{C[this.validatedSchemasKey]=[],C[this.validationErrorsKey]=[]}ke=C[this.validatedSchemasKey].length,C[this.validatedSchemasKey][ke]=x,C[this.validationErrorsKey][ke]=[]}}var $e=this.errors.length,pt=this.validateBasic(C,x,N)||this.validateNumeric(C,x,N)||this.validateString(C,x,N)||this.validateArray(C,x,N)||this.validateObject(C,x,N)||this.validateCombinations(C,x,N)||this.validateHypermedia(C,x,N)||this.validateFormat(C,x,N)||this.validateDefinedKeywords(C,x,N)||null;if(re){for(;this.scanned.length;)delete this.scanned.pop()[this.validatedSchemasKey];this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(pt||$e!==this.errors.length)for(;M&&M.length||R&&R.length;){var ln=M&&M.length?""+M.pop():null,Pt=R&&R.length?""+R.pop():null;pt&&(pt=pt.prefixWith(ln,Pt)),this.prefixErrors($e,ln,Pt)}return he!==null?this.scannedFrozenValidationErrors[ee][he]=this.errors.slice(ne):ke!==null&&(C[this.validationErrorsKey][ke]=this.errors.slice(ne)),this.handleError(pt)},I.prototype.validateFormat=function(C,x){if(typeof x.format!="string"||!this.formatValidators[x.format])return null;var M=this.formatValidators[x.format].call(null,C,x);return typeof M=="string"||typeof M=="number"?this.createError(D.FORMAT_CUSTOM,{message:M},"","/format",null,C,x):M&&typeof M=="object"?this.createError(D.FORMAT_CUSTOM,{message:M.message||"?"},M.dataPath||"",M.schemaPath||"/format",null,C,x):null},I.prototype.validateDefinedKeywords=function(C,x,M){for(var R in this.definedKeywords)if(x[R]!==void 0)for(var N=this.definedKeywords[R],re=0;re<N.length;re++){var ee=(0,N[re])(C,x[R],x,M);if(typeof ee=="string"||typeof ee=="number")return this.createError(D.KEYWORD_CUSTOM,{key:R,message:ee},"","",null,C,x).prefixWith(null,R);if(ee&&typeof ee=="object"){var ne=ee.code;if(typeof ne=="string"){if(!D[ne])throw new Error("Undefined error code (use defineError): "+ne);ne=D[ne]}else typeof ne!="number"&&(ne=D.KEYWORD_CUSTOM);var he=typeof ee.message=="object"?ee.message:{key:R,message:ee.message||"?"},ke=ee.schemaPath||"/"+R.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(ne,he,ee.dataPath||null,ke,null,C,x)}}return null},I.prototype.validateBasic=function(C,x,M){var R;return(R=this.validateType(C,x,M))||(R=this.validateEnum(C,x,M))?R.prefixWith(null,"type"):null},I.prototype.validateType=function(C,x){if(x.type===void 0)return null;var M=typeof C;C===null?M="null":Array.isArray(C)&&(M="array");var R=x.type;Array.isArray(R)||(R=[R]);for(var N=0;N<R.length;N++){var re=R[N];if(re===M||re==="integer"&&M==="number"&&C%1==0)return null}return this.createError(D.INVALID_TYPE,{type:M,expected:R.join("/")},"","",null,C,x)},I.prototype.validateEnum=function(C,x){if(x.enum===void 0)return null;for(var M=0;M<x.enum.length;M++)if(W(C,x.enum[M]))return null;return this.createError(D.ENUM_MISMATCH,{value:typeof JSON<"u"?JSON.stringify(C):C},"","",null,C,x)},I.prototype.validateNumeric=function(C,x,M){return this.validateMultipleOf(C,x,M)||this.validateMinMax(C,x,M)||this.validateNaN(C,x,M)||null};var B=Math.pow(2,-51),z=1-B;function H(C){var x=String(C).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return x?{href:x[0]||"",protocol:x[1]||"",authority:x[2]||"",host:x[3]||"",hostname:x[4]||"",port:x[5]||"",pathname:x[6]||"",search:x[7]||"",hash:x[8]||""}:null}function Q(C,x){return x=H(x||""),C=H(C||""),x&&C?(x.protocol||C.protocol)+(x.protocol||x.authority?x.authority:C.authority)+(M=x.protocol||x.authority||x.pathname.charAt(0)==="/"?x.pathname:x.pathname?(C.authority&&!C.pathname?"/":"")+C.pathname.slice(0,C.pathname.lastIndexOf("/")+1)+x.pathname:C.pathname,R=[],M.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(N){N==="/.."?R.pop():R.push(N)}),R.join("").replace(/^\//,M.charAt(0)==="/"?"/":""))+(x.protocol||x.authority||x.pathname?x.search:x.search||C.search)+x.hash:null;var M,R}function q(C){return C.split("#")[0]}function _(C,x){if(C&&typeof C=="object")if(x===void 0?x=C.id:typeof C.id=="string"&&(x=Q(x,C.id),C.id=x),Array.isArray(C))for(var M=0;M<C.length;M++)_(C[M],x);else for(var R in typeof C.$ref=="string"&&(C.$ref=Q(x,C.$ref)),C)R!=="enum"&&_(C[R],x)}function U(C){var x=de[C=C||"en"];return function(M){var R=x[M.code]||oe[M.code];if(typeof R!="string")return"Unknown error code "+M.code+": "+JSON.stringify(M.messageParams);var N=M.params;return R.replace(/\{([^{}]*)\}/g,function(re,ee){var ne=N[ee];return typeof ne=="string"||typeof ne=="number"?ne:re})}}I.prototype.validateMultipleOf=function(C,x){var M=x.multipleOf||x.divisibleBy;if(M===void 0)return null;if(typeof C=="number"){var R=C/M%1;if(R>=B&&R<z)return this.createError(D.NUMBER_MULTIPLE_OF,{value:C,multipleOf:M},"","",null,C,x)}return null},I.prototype.validateMinMax=function(C,x){if(typeof C!="number")return null;if(x.minimum!==void 0){if(C<x.minimum)return this.createError(D.NUMBER_MINIMUM,{value:C,minimum:x.minimum},"","/minimum",null,C,x);if(x.exclusiveMinimum&&C===x.minimum)return this.createError(D.NUMBER_MINIMUM_EXCLUSIVE,{value:C,minimum:x.minimum},"","/exclusiveMinimum",null,C,x)}if(x.maximum!==void 0){if(C>x.maximum)return this.createError(D.NUMBER_MAXIMUM,{value:C,maximum:x.maximum},"","/maximum",null,C,x);if(x.exclusiveMaximum&&C===x.maximum)return this.createError(D.NUMBER_MAXIMUM_EXCLUSIVE,{value:C,maximum:x.maximum},"","/exclusiveMaximum",null,C,x)}return null},I.prototype.validateNaN=function(C,x){return typeof C!="number"?null:isNaN(C)===!0||C===1/0||C===-1/0?this.createError(D.NUMBER_NOT_A_NUMBER,{value:C},"","/type",null,C,x):null},I.prototype.validateString=function(C,x,M){return this.validateStringLength(C,x,M)||this.validateStringPattern(C,x,M)||null},I.prototype.validateStringLength=function(C,x){return typeof C!="string"?null:x.minLength!==void 0&&C.length<x.minLength?this.createError(D.STRING_LENGTH_SHORT,{length:C.length,minimum:x.minLength},"","/minLength",null,C,x):x.maxLength!==void 0&&C.length>x.maxLength?this.createError(D.STRING_LENGTH_LONG,{length:C.length,maximum:x.maxLength},"","/maxLength",null,C,x):null},I.prototype.validateStringPattern=function(C,x){if(typeof C!="string"||typeof x.pattern!="string"&&!(x.pattern instanceof RegExp))return null;var M;if(x.pattern instanceof RegExp)M=x.pattern;else{var R,N="",re=x.pattern.match(/^\/(.+)\/([img]*)$/);re?(R=re[1],N=re[2]):R=x.pattern,M=new RegExp(R,N)}return M.test(C)?null:this.createError(D.STRING_PATTERN,{pattern:x.pattern},"","/pattern",null,C,x)},I.prototype.validateArray=function(C,x,M){return Array.isArray(C)&&(this.validateArrayLength(C,x,M)||this.validateArrayUniqueItems(C,x,M)||this.validateArrayItems(C,x,M))||null},I.prototype.validateArrayLength=function(C,x){var M;return x.minItems!==void 0&&C.length<x.minItems&&(M=this.createError(D.ARRAY_LENGTH_SHORT,{length:C.length,minimum:x.minItems},"","/minItems",null,C,x),this.handleError(M))||x.maxItems!==void 0&&C.length>x.maxItems&&(M=this.createError(D.ARRAY_LENGTH_LONG,{length:C.length,maximum:x.maxItems},"","/maxItems",null,C,x),this.handleError(M))?M:null},I.prototype.validateArrayUniqueItems=function(C,x){if(x.uniqueItems){for(var M=0;M<C.length;M++)for(var R=M+1;R<C.length;R++)if(W(C[M],C[R])){var N=this.createError(D.ARRAY_UNIQUE,{match1:M,match2:R},"","/uniqueItems",null,C,x);if(this.handleError(N))return N}}return null},I.prototype.validateArrayItems=function(C,x,M){if(x.items===void 0)return null;var R,N;if(Array.isArray(x.items)){for(N=0;N<C.length;N++)if(N<x.items.length){if(R=this.validateAll(C[N],x.items[N],[N],["items",N],M+"/"+N))return R}else if(x.additionalItems!==void 0){if(typeof x.additionalItems=="boolean"){if(!x.additionalItems&&(R=this.createError(D.ARRAY_ADDITIONAL_ITEMS,{},"/"+N,"/additionalItems",null,C,x),this.handleError(R)))return R}else if(R=this.validateAll(C[N],x.additionalItems,[N],["additionalItems"],M+"/"+N))return R}}else for(N=0;N<C.length;N++)if(R=this.validateAll(C[N],x.items,[N],["items"],M+"/"+N))return R;return null},I.prototype.validateObject=function(C,x,M){return typeof C!="object"||C===null||Array.isArray(C)?null:this.validateObjectMinMaxProperties(C,x,M)||this.validateObjectRequiredProperties(C,x,M)||this.validateObjectProperties(C,x,M)||this.validateObjectDependencies(C,x,M)||null},I.prototype.validateObjectMinMaxProperties=function(C,x){var M,R=Object.keys(C);return x.minProperties!==void 0&&R.length<x.minProperties&&(M=this.createError(D.OBJECT_PROPERTIES_MINIMUM,{propertyCount:R.length,minimum:x.minProperties},"","/minProperties",null,C,x),this.handleError(M))||x.maxProperties!==void 0&&R.length>x.maxProperties&&(M=this.createError(D.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:R.length,maximum:x.maxProperties},"","/maxProperties",null,C,x),this.handleError(M))?M:null},I.prototype.validateObjectRequiredProperties=function(C,x){if(x.required!==void 0)for(var M=0;M<x.required.length;M++){var R=x.required[M];if(C[R]===void 0){var N=this.createError(D.OBJECT_REQUIRED,{key:R},"","/required/"+M,null,C,x);if(this.handleError(N))return N}}return null},I.prototype.validateObjectProperties=function(C,x,M){var R;for(var N in C){var re=M+"/"+N.replace(/~/g,"~0").replace(/\//g,"~1"),ee=!1;if(x.properties!==void 0&&x.properties[N]!==void 0&&(ee=!0,R=this.validateAll(C[N],x.properties[N],[N],["properties",N],re)))return R;if(x.patternProperties!==void 0){for(var ne in x.patternProperties)if(new RegExp(ne).test(N)&&(ee=!0,R=this.validateAll(C[N],x.patternProperties[ne],[N],["patternProperties",ne],re)))return R}if(ee)this.trackUnknownProperties&&(this.knownPropertyPaths[re]=!0,delete this.unknownPropertyPaths[re]);else if(x.additionalProperties!==void 0){if(this.trackUnknownProperties&&(this.knownPropertyPaths[re]=!0,delete this.unknownPropertyPaths[re]),typeof x.additionalProperties=="boolean"){if(!x.additionalProperties&&(R=this.createError(D.OBJECT_ADDITIONAL_PROPERTIES,{key:N},"","/additionalProperties",null,C,x).prefixWith(N,null),this.handleError(R)))return R}else if(R=this.validateAll(C[N],x.additionalProperties,[N],["additionalProperties"],re))return R}else this.trackUnknownProperties&&!this.knownPropertyPaths[re]&&(this.unknownPropertyPaths[re]=!0)}return null},I.prototype.validateObjectDependencies=function(C,x,M){var R;if(x.dependencies!==void 0){for(var N in x.dependencies)if(C[N]!==void 0){var re=x.dependencies[N];if(typeof re=="string"){if(C[re]===void 0&&(R=this.createError(D.OBJECT_DEPENDENCY_KEY,{key:N,missing:re},"","",null,C,x).prefixWith(null,N).prefixWith(null,"dependencies"),this.handleError(R)))return R}else if(Array.isArray(re))for(var ee=0;ee<re.length;ee++){var ne=re[ee];if(C[ne]===void 0&&(R=this.createError(D.OBJECT_DEPENDENCY_KEY,{key:N,missing:ne},"","/"+ee,null,C,x).prefixWith(null,N).prefixWith(null,"dependencies"),this.handleError(R)))return R}else if(R=this.validateAll(C,re,[],["dependencies",N],M))return R}}return null},I.prototype.validateCombinations=function(C,x,M){return this.validateAllOf(C,x,M)||this.validateAnyOf(C,x,M)||this.validateOneOf(C,x,M)||this.validateNot(C,x,M)||null},I.prototype.validateAllOf=function(C,x,M){if(x.allOf===void 0)return null;for(var R,N=0;N<x.allOf.length;N++){var re=x.allOf[N];if(R=this.validateAll(C,re,[],["allOf",N],M))return R}return null},I.prototype.validateAnyOf=function(C,x,M){if(x.anyOf===void 0)return null;var R,N,re=[],ee=this.errors.length;this.trackUnknownProperties&&(R=this.unknownPropertyPaths,N=this.knownPropertyPaths);for(var ne=!0,he=0;he<x.anyOf.length;he++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var ke=x.anyOf[he],Me=this.errors.length,je=this.validateAll(C,ke,[],["anyOf",he],M);if(je===null&&Me===this.errors.length){if(this.errors=this.errors.slice(0,ee),this.trackUnknownProperties){for(var $e in this.knownPropertyPaths)N[$e]=!0,delete R[$e];for(var pt in this.unknownPropertyPaths)N[pt]||(R[pt]=!0);ne=!1;continue}return null}je&&re.push(je.prefixWith(null,""+he).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=R,this.knownPropertyPaths=N),ne?(re=re.concat(this.errors.slice(ee)),this.errors=this.errors.slice(0,ee),this.createError(D.ANY_OF_MISSING,{},"","/anyOf",re,C,x)):void 0},I.prototype.validateOneOf=function(C,x,M){if(x.oneOf===void 0)return null;var R,N,re=null,ee=[],ne=this.errors.length;this.trackUnknownProperties&&(R=this.unknownPropertyPaths,N=this.knownPropertyPaths);for(var he=0;he<x.oneOf.length;he++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var ke=x.oneOf[he],Me=this.errors.length,je=this.validateAll(C,ke,[],["oneOf",he],M);if(je===null&&Me===this.errors.length){if(re!==null)return this.errors=this.errors.slice(0,ne),this.createError(D.ONE_OF_MULTIPLE,{index1:re,index2:he},"","/oneOf",null,C,x);if(re=he,this.trackUnknownProperties){for(var $e in this.knownPropertyPaths)N[$e]=!0,delete R[$e];for(var pt in this.unknownPropertyPaths)N[pt]||(R[pt]=!0)}}else je&&ee.push(je)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=R,this.knownPropertyPaths=N),re===null?(ee=ee.concat(this.errors.slice(ne)),this.errors=this.errors.slice(0,ne),this.createError(D.ONE_OF_MISSING,{},"","/oneOf",ee,C,x)):(this.errors=this.errors.slice(0,ne),null)},I.prototype.validateNot=function(C,x,M){if(x.not===void 0)return null;var R,N,re=this.errors.length;this.trackUnknownProperties&&(R=this.unknownPropertyPaths,N=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var ee=this.validateAll(C,x.not,null,null,M),ne=this.errors.slice(re);return this.errors=this.errors.slice(0,re),this.trackUnknownProperties&&(this.unknownPropertyPaths=R,this.knownPropertyPaths=N),ee===null&&ne.length===0?this.createError(D.NOT_PASSED,{},"","/not",null,C,x):null},I.prototype.validateHypermedia=function(C,x,M){if(!x.links)return null;for(var R,N=0;N<x.links.length;N++){var re=x.links[N];if(re.rel==="describedby"){for(var ee=new V(re.href),ne=!0,he=0;he<ee.varNames.length;he++)if(!(ee.varNames[he]in C)){ne=!1;break}if(ne){var ke={$ref:ee.fillFromObject(C)};if(R=this.validateAll(C,ke,[],["links",N],M))return R}}}};var D={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},G={};for(var le in D)G[D[le]]=le;var oe={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};function ye(C,x,M,R,N){if(Error.call(this),C===void 0)throw new Error("No error code supplied: "+R);this.message="",this.params=x,this.code=C,this.dataPath=M||"",this.schemaPath=R||"",this.subErrors=N||null;var re=new Error(this.message);if(this.stack=re.stack||re.stacktrace,!this.stack)try{throw re}catch(ee){this.stack=ee.stack||ee.stacktrace}}ye.prototype=Object.create(Error.prototype),ye.prototype.constructor=ye,ye.prototype.name="ValidationError",ye.prototype.prefixWith=function(C,x){if(C!==null&&(C=C.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+C+this.dataPath),x!==null&&(x=x.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+x+this.schemaPath),this.subErrors!==null)for(var M=0;M<this.subErrors.length;M++)this.subErrors[M].prefixWith(C,x);return this};var de={},Y=function C(x){var M,R,N=new I,re={setErrorReporter:function(ee){return typeof ee=="string"?this.language(ee):(R=ee,!0)},addFormat:function(){N.addFormat.apply(N,arguments)},language:function(ee){return ee?(de[ee]||(ee=ee.split("-")[0]),!!de[ee]&&(M=ee,ee)):M},addLanguage:function(ee,ne){var he;for(he in D)ne[he]&&!ne[D[he]]&&(ne[D[he]]=ne[he]);var ke=ee.split("-")[0];if(de[ke])for(he in de[ee]=Object.create(de[ke]),ne)de[ke][he]===void 0&&(de[ke][he]=ne[he]),de[ee][he]=ne[he];else de[ee]=ne,de[ke]=ne;return this},freshApi:function(ee){var ne=C();return ee&&ne.language(ee),ne},validate:function(ee,ne,he,ke){var Me=U(M),je=R?function(ln,Pt,an){return R(ln,Pt,an)||Me(ln,Pt,an)}:Me,$e=new I(N,!1,je,he,ke);typeof ne=="string"&&(ne={$ref:ne}),$e.addSchema("",ne);var pt=$e.validateAll(ee,ne,null,null,"");return!pt&&ke&&(pt=$e.banUnknownProperties(ee,ne)),this.error=pt,this.missing=$e.missing,this.valid=pt===null,this.valid},validateResult:function(){var ee={toString:function(){return this.valid?"valid":this.error.message}};return this.validate.apply(ee,arguments),ee},validateMultiple:function(ee,ne,he,ke){var Me=U(M),je=R?function(ln,Pt,an){return R(ln,Pt,an)||Me(ln,Pt,an)}:Me,$e=new I(N,!0,je,he,ke);typeof ne=="string"&&(ne={$ref:ne}),$e.addSchema("",ne),$e.validateAll(ee,ne,null,null,""),ke&&$e.banUnknownProperties(ee,ne);var pt={toString:function(){return this.valid?"valid":this.error.message}};return pt.errors=$e.errors,pt.missing=$e.missing,pt.valid=pt.errors.length===0,pt},addSchema:function(){return N.addSchema.apply(N,arguments)},getSchema:function(){return N.getSchema.apply(N,arguments)},getSchemaMap:function(){return N.getSchemaMap.apply(N,arguments)},getSchemaUris:function(){return N.getSchemaUris.apply(N,arguments)},getMissingUris:function(){return N.getMissingUris.apply(N,arguments)},dropSchemas:function(){N.dropSchemas.apply(N,arguments)},defineKeyword:function(){N.defineKeyword.apply(N,arguments)},defineError:function(ee,ne,he){if(typeof ee!="string"||!/^[A-Z]+(_[A-Z]+)*$/.test(ee))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if(typeof ne!="number"||ne%1!=0||ne<1e4)throw new Error("Code number must be an integer > 10000");if(D[ee]!==void 0)throw new Error("Error already defined: "+ee+" as "+D[ee]);if(G[ne]!==void 0)throw new Error("Error code already used: "+G[ne]+" as "+ne);for(var ke in D[ee]=ne,G[ne]=ee,oe[ee]=oe[ne]=he,de){var Me=de[ke];Me[ee]&&(Me[ne]=Me[ne]||Me[ee])}},reset:function(){N.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:_,resolveUrl:Q,getDocumentUri:q,errorCodes:D};return re.language("en"),re}();return Y.addLanguage("en-gb",oe),Y.tv4=Y,Y},(p=f.apply(u,[]))===void 0||(l.exports=p)},199:function(l,u,f){var p;typeof fetch!="function"&&typeof XMLHttpRequest!="function"&&(XMLHttpRequest=f(317)),function(m){var g={"http://webfist.org/spec/rel":"webfist","http://webfinger.net/rel/avatar":"avatar",remotestorage:"remotestorage","http://tools.ietf.org/id/draft-dejong-remotestorage":"remotestorage",remoteStorage:"remotestorage","http://www.packetizer.com/rel/share":"share","http://webfinger.net/rel/profile-page":"profile",me:"profile",vcard:"vcard",blog:"blog","http://packetizer.com/rel/blog":"blog","http://schemas.google.com/g/2010#updates-from":"updates","https://camlistore.org/rel/server":"camilstore"},w={avatar:[],remotestorage:[],blog:[],vcard:[],updates:[],share:[],profile:[],webfist:[],camlistore:[]},k=["webfinger","host-meta","host-meta.json"];function b(P){return P.toString=function(){return this.message},P}function A(P){typeof P!="object"&&(P={}),this.config={tls_only:P.tls_only===void 0||P.tls_only,webfist_fallback:P.webfist_fallback!==void 0&&P.webfist_fallback,uri_fallback:P.uri_fallback!==void 0&&P.uri_fallback,request_timeout:P.request_timeout!==void 0?P.request_timeout:1e4}}A.prototype.__fetchJRD=function(P,F,V){if(typeof fetch=="function")return this.__fetchJRD_fetch(P,F,V);if(typeof XMLHttpRequest=="function")return this.__fetchJRD_XHR(P,F,V);throw new Error("add a polyfill for fetch or XMLHttpRequest")},A.prototype.__fetchJRD_fetch=function(P,F,V){var I,W=this;typeof AbortController=="function"&&(I=new AbortController);var B=fetch(P,{headers:{Accept:"application/jrd+json, application/json"},signal:I?I.signal:void 0}).then(function(H){if(H.ok)return H.text();throw H.status===404?b({message:"resource not found",url:P,status:H.status}):b({message:"error during request",url:P,status:H.status})},function(H){throw b({message:"error during request",url:P,status:void 0,err:H})}).then(function(H){if(W.__isValidJSON(H))return H;throw b({message:"invalid json",url:P,status:void 0})}),z=new Promise(function(H,Q){setTimeout(function(){Q(b({message:"request timed out",url:P,status:void 0})),I&&I.abort()},W.config.request_timeout)});Promise.race([B,z]).then(function(H){V(H)}).catch(function(H){F(H)})},A.prototype.__fetchJRD_XHR=function(P,F,V){var I=this,W=!1,B=new XMLHttpRequest;function z(){if(!W)return W=!0,B.status===200?I.__isValidJSON(B.responseText)?V(B.responseText):F(b({message:"invalid json",url:P,status:B.status})):B.status===404?F(b({message:"resource not found",url:P,status:B.status})):B.status>=301&&B.status<=302?function(Q){return typeof Q=="string"&&Q.split("://")[0]==="https"}(B.getResponseHeader("Location"))?H():F(b({message:"no redirect URL found",url:P,status:B.status})):F(b({message:"error during request",url:P,status:B.status}))}function H(){B.onreadystatechange=function(){B.readyState===4&&z()},B.onload=function(){z()},B.ontimeout=function(){return F(b({message:"request timed out",url:P,status:B.status}))},B.open("GET",P,!0),B.timeout=I.config.request_timeout,B.setRequestHeader("Accept","application/jrd+json, application/json"),B.send()}return H()},A.prototype.__isValidJSON=function(P){try{JSON.parse(P)}catch{return!1}return!0},A.prototype.__isLocalhost=function(P){return/^localhost(\.localdomain)?(\:[0-9]+)?$/.test(P)},A.prototype.__processJRD=function(P,F,V,I){var W=JSON.parse(F);if(typeof W!="object"||typeof W.links!="object")return W.error!==void 0?V(b({message:W.error,request:P})):V(b({message:"unknown response from server",request:P}));var B=W.links;Array.isArray(B)||(B=[]);var z={object:W,json:F,idx:{}};z.idx.properties={name:void 0},z.idx.links=JSON.parse(JSON.stringify(w)),B.map(function(q,_){if(g.hasOwnProperty(q.rel)&&z.idx.links[g[q.rel]]){var U={};Object.keys(q).map(function(D,G){U[D]=q[D]}),z.idx.links[g[q.rel]].push(U)}});var H=JSON.parse(F).properties;for(var Q in H)H.hasOwnProperty(Q)&&Q==="http://packetizer.com/ns/name"&&(z.idx.properties.name=H[Q]);return I(z)},A.prototype.lookup=function(P,F){if(typeof P!="string")throw new Error("first parameter must be a user address");if(typeof F!="function")throw new Error("second parameter must be a callback");var V=this,I="";I=P.indexOf("://")>-1?P.replace(/ /g,"").split("/")[2]:P.replace(/ /g,"").split("@")[1];var W=0,B="https";function z(){var q="";return P.split("://")[1]||(q="acct:"),B+"://"+I+"/.well-known/"+k[W]+"?resource="+q+P}function H(q){if(V.config.uri_fallback&&I!=="webfist.org"&&W!==k.length-1)return W+=1,Q();if(!V.config.tls_only&&B==="https")return W=0,B="http",Q();if(!V.config.webfist_fallback||I==="webfist.org")return F(q);W=0,B="http",I="webfist.org";var _=z();V.__fetchJRD(_,F,function(U){V.__processJRD(_,U,F,function(D){typeof D.idx.links.webfist=="object"&&typeof D.idx.links.webfist[0].href=="string"&&V.__fetchJRD(D.idx.links.webfist[0].href,F,function(G){V.__processJRD(_,G,F,function(le){return F(null,F)})})})})}function Q(){var q=z();V.__fetchJRD(q,H,function(_){V.__processJRD(q,_,F,function(U){F(null,U)})})}return V.__isLocalhost(I)&&(B="http"),setTimeout(Q,0)},A.prototype.lookupLink=function(P,F,V){if(!w.hasOwnProperty(F))return V("unsupported rel "+F);this.lookup(P,function(I,W){var B=W.idx.links[F];return I?V(I):B.length===0?V('no links found with rel="'+F+'"'):V(null,B[0])})},(p=(function(){return A}).apply(u,[]))===void 0||(l.exports=p)}()},317:function(l){l.exports=XMLHttpRequest}},r={};function i(l){var u=r[l];if(u!==void 0)return u.exports;var f=r[l]={exports:{}};return t[l].call(f.exports,f,f.exports,i),f.exports}i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var o=i(423);return o.default}()})}(Om)),Om.exports}var c8=u8();const f8=Sp(c8),bp=new f8,h8=new l8(bp);h8.attach();bp.access.claim("milkynotes","rw");bp.caching.enable("/milkynotes/");const qx=bp.scope("/milkynotes/"),d8={notes:{},isRSLoggedIn:!1},ap={UPDATE_NOTE:"UPDATE_NOTE",UPDATE_RS_STATUS:"UPDATE_RS_STATUS"};function p8(n,e){(Array.isArray(e.payload)?e.payload:[e.payload]).forEach(r=>{n.notes[r.id]={...r,content:r.content.replaceAll(/<br\s*\/?>\s*/g,`
`)}}),e.isInit||qx.storeFile("application/json","notes.json",JSON.stringify(n.notes))}const m8=n8((n,e)=>{switch(e.type){case ap.UPDATE_NOTE:p8(n,e);break;case ap.UPDATE_RS_STATUS:n.isRSLoggedIn=e.payload;break;default:throw new Error(`unrecognized action type: ${e.type}`)}}),{Provider:g8,useTrackedState:y8,useUpdate:Kx}=VC(({reducer:n,initialState:e})=>Xe.useReducer(n,e));function v8({children:n}){return vo.jsx(g8,{reducer:m8,initialState:d8,children:n})}var Gr=(n=>(n.docTypeError="docTypeError",n.contextNotFound="contextNotFound",n.timerNotFound="timerNotFound",n.ctxCallOutOfScope="ctxCallOutOfScope",n.createNodeInParserFail="createNodeInParserFail",n.stackOverFlow="stackOverFlow",n.parserMatchError="parserMatchError",n.serializerMatchError="serializerMatchError",n.getAtomFromSchemaFail="getAtomFromSchemaFail",n.expectDomTypeError="expectDomTypeError",n.callCommandBeforeEditorView="callCommandBeforeEditorView",n.missingRootElement="missingRootElement",n.missingNodeInSchema="missingNodeInSchema",n.missingMarkInSchema="missingMarkInSchema",n.ctxNotBind="ctxNotBind",n.missingYjsDoc="missingYjsDoc",n))(Gr||{});class ki extends Error{constructor(e,t){super(t),this.name="MilkdownError",this.code=e}}const w8=(n,e)=>typeof e=="function"?"[Function]":e,Lf=n=>JSON.stringify(n,w8);function k8(n){return new ki(Gr.docTypeError,`Doc type error, unsupported type: ${Lf(n)}`)}function x8(n){return new ki(Gr.contextNotFound,`Context "${n}" not found, do you forget to inject it?`)}function S8(n){return new ki(Gr.timerNotFound,`Timer "${n}" not found, do you forget to record it?`)}function ov(){return new ki(Gr.ctxCallOutOfScope,"Should not call a context out of the plugin.")}function b8(...n){const e=n.reduce((t,r)=>{if(!r)return t;const i=o=>Array.isArray(o)?o.map(l=>i(l)).join(", "):o.toJSON?Lf(o.toJSON()):o.spec?Lf(o.spec):o.toString();return`${t}, ${i(r)}`},"Create prosemirror node from remark failed in parser");return new ki(Gr.createNodeInParserFail,e)}function Jx(){return new ki(Gr.stackOverFlow,"Stack over flow, cannot pop on an empty stack.")}function _8(n){return new ki(Gr.parserMatchError,`Cannot match target parser for node: ${Lf(n)}.`)}function C8(n){return new ki(Gr.serializerMatchError,`Cannot match target serializer for node: ${Lf(n)}.`)}function E8(n,e){return new ki(Gr.getAtomFromSchemaFail,`Cannot get ${n}: ${e} from schema.`)}function us(n){return new ki(Gr.expectDomTypeError,`Expect to be a dom, but get: ${Lf(n)}.`)}function T8(){return new ki(Gr.callCommandBeforeEditorView,"You're trying to call a command before editor view initialized, make sure to get commandManager from ctx after editor view has been initialized")}function M8(n){return new ki(Gr.missingNodeInSchema,`Missing node in schema, milkdown cannot find "${n}" in schema.`)}function N8(n){return new ki(Gr.missingMarkInSchema,`Missing mark in schema, milkdown cannot find "${n}" in schema.`)}var Gx=n=>{throw TypeError(n)},Qx=(n,e,t)=>e.has(n)||Gx("Cannot "+t),Fe=(n,e,t)=>(Qx(n,e,"read from private field"),t?t.call(n):e.get(n)),sn=(n,e,t)=>e.has(n)?Gx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Et=(n,e,t,r)=>(Qx(n,e,"write to private field"),e.set(n,t),t),Zo,zl,Md,Pm,Rm,Dm,pf,Nd,cu,Ad,Id,Od,Ll,Fl,zm,po,mf,fu,Pd,Bl,Rd,Lm;class Yx{constructor(){this.sliceMap=new Map,this.get=e=>{const t=typeof e=="string"?[...this.sliceMap.values()].find(r=>r.type.name===e):this.sliceMap.get(e.id);if(!t){const r=typeof e=="string"?e:e.name;throw x8(r)}return t},this.remove=e=>{const t=typeof e=="string"?[...this.sliceMap.values()].find(r=>r.type.name===e):this.sliceMap.get(e.id);t&&this.sliceMap.delete(t.type.id)},this.has=e=>typeof e=="string"?[...this.sliceMap.values()].some(t=>t.type.name===e):this.sliceMap.has(e.id)}}let A8=class{constructor(e,t,r){sn(this,Zo),sn(this,zl),sn(this,Md),Et(this,Zo,[]),Et(this,Md,()=>{Fe(this,Zo).forEach(i=>i(Fe(this,zl)))}),this.set=i=>{Et(this,zl,i),Fe(this,Md).call(this)},this.get=()=>Fe(this,zl),this.update=i=>{Et(this,zl,i(Fe(this,zl))),Fe(this,Md).call(this)},this.type=r,Et(this,zl,t),e.set(r.id,this)}on(e){return Fe(this,Zo).push(e),()=>{Et(this,Zo,Fe(this,Zo).filter(t=>t!==e))}}once(e){const t=this.on(r=>{e(r),t()});return t}off(e){Et(this,Zo,Fe(this,Zo).filter(t=>t!==e))}offAll(){Et(this,Zo,[])}};Zo=new WeakMap;zl=new WeakMap;Md=new WeakMap;class I8{constructor(e,t){this.id=Symbol(`Context-${t}`),this.name=t,this._defaultValue=e,this._typeInfo=()=>{throw ov()}}create(e,t=this._defaultValue){return new A8(e,t,this)}}const St=(n,e)=>new I8(n,e);class O8{constructor(e,t,r){sn(this,Pm),sn(this,Rm),sn(this,Dm),sn(this,pf),sn(this,Nd),sn(this,cu),sn(this,Ad),sn(this,Id),sn(this,Od),Et(this,pf,new Set),Et(this,Nd,new Set),Et(this,cu,new Map),Et(this,Ad,new Map),this.read=()=>({metadata:Fe(this,Pm),injectedSlices:[...Fe(this,pf)].map(i=>({name:typeof i=="string"?i:i.name,value:Fe(this,Id).call(this,i)})),consumedSlices:[...Fe(this,Nd)].map(i=>({name:typeof i=="string"?i:i.name,value:Fe(this,Id).call(this,i)})),recordedTimers:[...Fe(this,cu)].map(([i,{duration:o}])=>({name:i.name,duration:o,status:Fe(this,Od).call(this,i)})),waitTimers:[...Fe(this,Ad)].map(([i,{duration:o}])=>({name:i.name,duration:o,status:Fe(this,Od).call(this,i)}))}),this.onRecord=i=>{Fe(this,cu).set(i,{start:Date.now(),duration:0})},this.onClear=i=>{Fe(this,cu).delete(i)},this.onDone=i=>{const o=Fe(this,cu).get(i);o&&(o.duration=Date.now()-o.start)},this.onWait=(i,o)=>{const l=Date.now();o.finally(()=>{Fe(this,Ad).set(i,{duration:Date.now()-l})})},this.onInject=i=>{Fe(this,pf).add(i)},this.onRemove=i=>{Fe(this,pf).delete(i)},this.onUse=i=>{Fe(this,Nd).add(i)},Et(this,Id,i=>Fe(this,Rm).get(i).get()),Et(this,Od,i=>Fe(this,Dm).get(i).status),Et(this,Rm,e),Et(this,Dm,t),Et(this,Pm,r)}}Pm=new WeakMap;Rm=new WeakMap;Dm=new WeakMap;pf=new WeakMap;Nd=new WeakMap;cu=new WeakMap;Ad=new WeakMap;Id=new WeakMap;Od=new WeakMap;const P8=class Xx{constructor(e,t,r){sn(this,Ll),sn(this,Fl),sn(this,zm),sn(this,po),this.produce=i=>i&&Object.keys(i).length?new Xx(Fe(this,Ll),Fe(this,Fl),{...i}):this,this.inject=(i,o)=>{var l;const u=i.create(Fe(this,Ll).sliceMap);return o!=null&&u.set(o),(l=Fe(this,po))==null||l.onInject(i),this},this.remove=i=>{var o;return Fe(this,Ll).remove(i),(o=Fe(this,po))==null||o.onRemove(i),this},this.record=i=>{var o;return i.create(Fe(this,Fl).store),(o=Fe(this,po))==null||o.onRecord(i),this},this.clearTimer=i=>{var o;return Fe(this,Fl).remove(i),(o=Fe(this,po))==null||o.onClear(i),this},this.isInjected=i=>Fe(this,Ll).has(i),this.isRecorded=i=>Fe(this,Fl).has(i),this.use=i=>{var o;return(o=Fe(this,po))==null||o.onUse(i),Fe(this,Ll).get(i)},this.get=i=>this.use(i).get(),this.set=(i,o)=>this.use(i).set(o),this.update=(i,o)=>this.use(i).update(o),this.timer=i=>Fe(this,Fl).get(i),this.done=i=>{var o;this.timer(i).done(),(o=Fe(this,po))==null||o.onDone(i)},this.wait=i=>{var o;const l=this.timer(i).start();return(o=Fe(this,po))==null||o.onWait(i,l),l},this.waitTimers=async i=>{await Promise.all(this.get(i).map(o=>this.wait(o)))},Et(this,Ll,e),Et(this,Fl,t),Et(this,zm,r),r&&Et(this,po,new O8(e,t,r))}get meta(){return Fe(this,zm)}get inspector(){return Fe(this,po)}};Ll=new WeakMap;Fl=new WeakMap;zm=new WeakMap;po=new WeakMap;let R8=P8;class D8{constructor(){this.store=new Map,this.get=e=>{const t=this.store.get(e.id);if(!t)throw S8(e.name);return t},this.remove=e=>{this.store.delete(e.id)},this.has=e=>this.store.has(e.id)}}class z8{constructor(e,t){sn(this,mf),sn(this,fu),sn(this,Pd),sn(this,Bl),sn(this,Rd),sn(this,Lm),Et(this,mf,null),Et(this,fu,null),Et(this,Bl,"pending"),this.start=()=>(Fe(this,mf)??Et(this,mf,new Promise((r,i)=>{Et(this,fu,o=>{o instanceof CustomEvent&&o.detail.id===Fe(this,Pd)&&(Et(this,Bl,"resolved"),Fe(this,Rd).call(this),o.stopImmediatePropagation(),r())}),Fe(this,Lm).call(this,()=>{Fe(this,Bl)==="pending"&&Et(this,Bl,"rejected"),Fe(this,Rd).call(this),i(new Error(`Timing ${this.type.name} timeout.`))}),Et(this,Bl,"pending"),addEventListener(this.type.name,Fe(this,fu))})),Fe(this,mf)),this.done=()=>{const r=new CustomEvent(this.type.name,{detail:{id:Fe(this,Pd)}});dispatchEvent(r)},Et(this,Rd,()=>{Fe(this,fu)&&removeEventListener(this.type.name,Fe(this,fu))}),Et(this,Lm,r=>{setTimeout(()=>{r()},this.type.timeout)}),Et(this,Pd,Symbol(t.name)),this.type=t,e.set(t.id,this)}get status(){return Fe(this,Bl)}}mf=new WeakMap;fu=new WeakMap;Pd=new WeakMap;Bl=new WeakMap;Rd=new WeakMap;Lm=new WeakMap;class L8{constructor(e,t=3e3){this.create=r=>new z8(r,this),this.id=Symbol(`Timer-${e}`),this.name=e,this.timeout=t}}const ia=(n,e=3e3)=>new L8(n,e);function Jn(n){this.content=n}Jn.prototype={constructor:Jn,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),o=r.content.slice();return i==-1?o.push(t||n,e):(o[i+1]=e,t&&(o[i]=t)),new Jn(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Jn(t)},addToStart:function(n,e){return new Jn([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Jn(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),o=r.find(n);return i.splice(o==-1?i.length:o,0,e,t),new Jn(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Jn.from(n),n.size?new Jn(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Jn.from(n),n.size?new Jn(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Jn.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Jn.from=function(n){if(n instanceof Jn)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Jn(e)};function Zx(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),o=e.child(r);if(i==o){t+=i.nodeSize;continue}if(!i.sameMarkup(o))return t;if(i.isText&&i.text!=o.text){for(let l=0;i.text[l]==o.text[l];l++)t++;return t}if(i.content.size||o.content.size){let l=Zx(i.content,o.content,t+1);if(l!=null)return l}t+=i.nodeSize}}function e4(n,e,t,r){for(let i=n.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:t,b:r};let l=n.child(--i),u=e.child(--o),f=l.nodeSize;if(l==u){t-=f,r-=f;continue}if(!l.sameMarkup(u))return{a:t,b:r};if(l.isText&&l.text!=u.text){let p=0,m=Math.min(l.text.length,u.text.length);for(;p<m&&l.text[l.text.length-p-1]==u.text[u.text.length-p-1];)p++,t--,r--;return{a:t,b:r}}if(l.content.size||u.content.size){let p=e4(l.content,u.content,t-1,r-1);if(p)return p}t-=f,r-=f}}class _e{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,o){for(let l=0,u=0;u<t;l++){let f=this.content[l],p=u+f.nodeSize;if(p>e&&r(f,i+u,o||null,l)!==!1&&f.content.size){let m=u+1;f.nodesBetween(Math.max(0,e-m),Math.min(f.content.size,t-m),r,i+m)}u=p}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let o="",l=!0;return this.nodesBetween(e,t,(u,f)=>{let p=u.isText?u.text.slice(Math.max(e,f)-f,t-f):u.isLeaf?i?typeof i=="function"?i(u):i:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&p||u.isTextblock)&&r&&(l?l=!1:o+=r),o+=p},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new _e(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let o=0,l=0;l<t;o++){let u=this.content[o],f=l+u.nodeSize;f>e&&((l<e||f>t)&&(u.isText?u=u.cut(Math.max(0,e-l),Math.min(u.text.length,t-l)):u=u.cut(Math.max(0,e-l-1),Math.min(u.content.size,t-l-1))),r.push(u),i+=u.nodeSize),l=f}return new _e(r,i)}cutByIndex(e,t){return e==t?_e.empty:e==0&&t==this.content.length?this:new _e(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new _e(i,o)}addToStart(e){return new _e([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new _e(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Zx(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return e4(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Sm(0,e);if(e==this.size)return Sm(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),l=i+o.nodeSize;if(l>=e)return l==e||t>0?Sm(r+1,l):Sm(r,i);i=l}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return _e.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new _e(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return _e.empty;let t,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(t||(t=e.slice(0,i)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new _e(t||e,r)}static from(e){if(!e)return _e.empty;if(e instanceof _e)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new _e([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}_e.empty=new _e([],0);const gy={index:0,offset:0};function Sm(n,e){return gy.index=n,gy.offset=e,gy}function g1(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!g1(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!g1(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}class kt{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&g1(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return kt.none;if(e instanceof kt)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}}kt.none=[];class y1 extends Error{}class Ne{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=n4(this.content,e+this.openStart,t);return r&&new Ne(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Ne(t4(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Ne.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ne(_e.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)i++;return new Ne(e,r,i)}}Ne.empty=new Ne(_e.empty,0,0);function t4(n,e,t){let{index:r,offset:i}=n.findIndex(e),o=n.maybeChild(r),{index:l,offset:u}=n.findIndex(t);if(i==e||o.isText){if(u!=t&&!n.child(l).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=l)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(t4(o.content,e-i-1,t-i-1)))}function n4(n,e,t,r){let{index:i,offset:o}=n.findIndex(e),l=n.maybeChild(i);if(o==e||l.isText)return n.cut(0,e).append(t).append(n.cut(e));let u=n4(l.content,e-o-1,t);return u&&n.replaceChild(i,l.copy(u))}function F8(n,e,t){if(t.openStart>n.depth)throw new y1("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new y1("Inconsistent open depths");return r4(n,e,t,0)}function r4(n,e,t,r){let i=n.index(r),o=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let l=r4(n,e,t,r+1);return o.copy(o.content.replaceChild(i,l))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let l=n.parent,u=l.content;return ku(l,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:l,end:u}=B8(t,n);return ku(o,o4(n,l,u,e,r))}else return ku(o,v1(n,e,r))}function i4(n,e){if(!e.type.compatibleContent(n.type))throw new y1("Cannot join "+e.type.name+" onto "+n.type.name)}function p2(n,e,t){let r=n.node(t);return i4(r,e.node(t)),r}function wu(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Qd(n,e,t,r){let i=(e||n).node(t),o=0,l=e?e.index(t):i.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(wu(n.nodeAfter,r),o++));for(let u=o;u<l;u++)wu(i.child(u),r);e&&e.depth==t&&e.textOffset&&wu(e.nodeBefore,r)}function ku(n,e){return n.type.checkContent(e),n.copy(e)}function o4(n,e,t,r,i){let o=n.depth>i&&p2(n,e,i+1),l=r.depth>i&&p2(t,r,i+1),u=[];return Qd(null,n,i,u),o&&l&&e.index(i)==t.index(i)?(i4(o,l),wu(ku(o,o4(n,e,t,r,i+1)),u)):(o&&wu(ku(o,v1(n,e,i+1)),u),Qd(e,t,i,u),l&&wu(ku(l,v1(t,r,i+1)),u)),Qd(r,null,i,u),new _e(u)}function v1(n,e,t){let r=[];if(Qd(null,n,t,r),n.depth>t){let i=p2(n,e,t+1);wu(ku(i,v1(n,e,t+1)),r)}return Qd(e,null,t,r),new _e(r)}function B8(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)i=e.node(o).copy(_e.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class up{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return kt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let u=r;r=i,i=u}let o=r.marks;for(var l=0;l<o.length;l++)o[l].type.spec.inclusive===!1&&(!i||!o[l].isInSet(i.marks))&&(o=o[l--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new s4(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,o=t;for(let l=e;;){let{index:u,offset:f}=l.content.findIndex(o),p=o-f;if(r.push(l,u,i+f),!p||(l=l.child(u),l.isText))break;o=p-1,i+=f+1}return new up(t,r,o)}static resolveCached(e,t){let r=Nw.get(e);if(r)for(let o=0;o<r.elts.length;o++){let l=r.elts[o];if(l.pos==t)return l}else Nw.set(e,r=new U8);let i=r.elts[r.i]=up.resolve(e,t);return r.i=(r.i+1)%W8,i}}class U8{constructor(){this.elts=[],this.i=0}}const W8=12,Nw=new WeakMap;class s4{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const j8=Object.create(null);class wo{constructor(e,t,r,i=kt.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||_e.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&g1(this.attrs,t||e.defaultAttrs||j8)&&kt.sameSet(this.marks,r||kt.none)}copy(e=null){return e==this.content?this:new wo(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new wo(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return Ne.empty;let i=this.resolve(e),o=this.resolve(t),l=r?0:i.sharedDepth(t),u=i.start(l),p=i.node(l).content.cut(i.pos-u,o.pos-u);return new Ne(p,i.depth-l,o.depth-l)}replace(e,t,r){return F8(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return up.resolveCached(this,e)}resolveNoCache(e){return up.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),l4(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=_e.empty,i=0,o=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,i,o),u=l&&l.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let f=i;f<o;f++)if(!this.type.allowsMarks(r.child(f).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),l=o&&o.matchFragment(this.content,t);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=kt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!kt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=_e.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,i,r);return o.type.checkAttrs(o.attrs),o}}wo.prototype.text=void 0;class w1 extends wo{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):l4(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new w1(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new w1(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function l4(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Au{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new $8(e,t);if(r.next==null)return Au.empty;let i=a4(r);r.next&&r.err("Unexpected trailing text");let o=Q8(G8(i));return Y8(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let o=t;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function o(l,u){let f=l.matchFragment(e,r);if(f&&(!t||f.validEnd))return _e.from(u.map(p=>p.createAndFill()));for(let p=0;p<l.next.length;p++){let{type:m,next:g}=l.next[p];if(!(m.isText||m.hasRequiredAttrs())&&i.indexOf(g)==-1){i.push(g);let w=o(g,u.concat(m));if(w)return w}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let l=[];for(let u=i;u.type;u=u.via)l.push(u.type);return l.reverse()}for(let l=0;l<o.next.length;l++){let{type:u,next:f}=o.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!i.type||f.validEnd)&&(r.push({match:u.contentMatch,type:u,via:i}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)o+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return o}).join(`
`)}}Au.empty=new Au(!0);class $8{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function a4(n){let e=[];do e.push(H8(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function H8(n){let e=[];do e.push(V8(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function V8(n){let e=J8(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=q8(n,e);else break;return e}function Aw(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function q8(n,e){let t=Aw(n),r=t;return n.eat(",")&&(n.next!="}"?r=Aw(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function K8(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let o in t){let l=t[o];l.isInGroup(e)&&i.push(l)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function J8(n){if(n.eat("(")){let e=a4(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=K8(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function G8(n){let e=[[]];return i(o(n,0),t()),e;function t(){return e.push([])-1}function r(l,u,f){let p={term:f,to:u};return e[l].push(p),p}function i(l,u){l.forEach(f=>f.to=u)}function o(l,u){if(l.type=="choice")return l.exprs.reduce((f,p)=>f.concat(o(p,u)),[]);if(l.type=="seq")for(let f=0;;f++){let p=o(l.exprs[f],u);if(f==l.exprs.length-1)return p;i(p,u=t())}else if(l.type=="star"){let f=t();return r(u,f),i(o(l.expr,f),f),[r(f)]}else if(l.type=="plus"){let f=t();return i(o(l.expr,u),f),i(o(l.expr,f),f),[r(f)]}else{if(l.type=="opt")return[r(u)].concat(o(l.expr,u));if(l.type=="range"){let f=u;for(let p=0;p<l.min;p++){let m=t();i(o(l.expr,f),m),f=m}if(l.max==-1)i(o(l.expr,f),f);else for(let p=l.min;p<l.max;p++){let m=t();r(f,m),i(o(l.expr,f),m),f=m}return[r(f)]}else{if(l.type=="name")return[r(u,void 0,l.value)];throw new Error("Unknown expr type")}}}}function u4(n,e){return e-n}function Iw(n,e){let t=[];return r(e),t.sort(u4);function r(i){let o=n[i];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(i);for(let l=0;l<o.length;l++){let{term:u,to:f}=o[l];!u&&t.indexOf(f)==-1&&r(f)}}}function Q8(n){let e=Object.create(null);return t(Iw(n,0));function t(r){let i=[];r.forEach(l=>{n[l].forEach(({term:u,to:f})=>{if(!u)return;let p;for(let m=0;m<i.length;m++)i[m][0]==u&&(p=i[m][1]);Iw(n,f).forEach(m=>{p||i.push([u,p=[]]),p.indexOf(m)==-1&&p.push(m)})})});let o=e[r.join(",")]=new Au(r.indexOf(n.length-1)>-1);for(let l=0;l<i.length;l++){let u=i[l][1].sort(u4);o.next.push({type:i[l][0],next:e[u.join(",")]||t(u)})}return o}}function Y8(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],o=!i.validEnd,l=[];for(let u=0;u<i.next.length;u++){let{type:f,next:p}=i.next[u];l.push(f.name),o&&!(f.isText||f.hasRequiredAttrs())&&(o=!1),r.indexOf(p)==-1&&r.push(p)}o&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function c4(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function f4(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let o=n[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function h4(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let o=n[i];o.validate&&o.validate(e[i])}}function d4(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new Z8(n,r,e[r]);return t}let k1=class p4{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=d4(e,r.attrs),this.defaultAttrs=c4(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Au.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:f4(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new wo(this,this.computeAttrs(e),_e.from(t),kt.setFrom(r))}createChecked(e=null,t,r){return t=_e.from(t),this.checkContent(t),new wo(this,this.computeAttrs(e),t,kt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=_e.from(t),t.size){let l=this.contentMatch.fillBefore(t);if(!l)return null;t=l.append(t)}let i=this.contentMatch.matchFragment(t),o=i&&i.fillBefore(_e.empty,!0);return o?new wo(this,e,t.append(o),kt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){h4(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:kt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,l)=>r[o]=new p4(o,t,l));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function X8(n,e,t){let r=t.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${o}`)}}class Z8{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?X8(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class z1{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=d4(e,i.attrs),this.excluded=null;let o=c4(this.attrs);this.instance=o?new kt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new kt(this,f4(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((o,l)=>r[o]=new z1(o,i++,t,l)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){h4(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class e7{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=Jn.from(e.nodes),t.marks=Jn.from(e.marks||{}),this.nodes=k1.compile(this.spec.nodes,this),this.marks=z1.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],l=o.spec.content||"",u=o.spec.marks;if(o.contentMatch=r[l]||(r[l]=Au.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=u=="_"?null:u?Ow(this,u.split(" ")):u==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],l=o.spec.excludes;o.excluded=l==null?[o]:l==""?[]:Ow(this,l.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof k1){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new w1(r,r.defaultAttrs,e,kt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return wo.fromJSON(this,e)}markFromJSON(e){return kt.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Ow(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],o=n.marks[i],l=o;if(o)t.push(o);else for(let u in n.marks){let f=n.marks[u];(i=="_"||f.spec.group&&f.spec.group.split(" ").indexOf(i)>-1)&&t.push(l=f)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function t7(n){return n.tag!=null}function n7(n){return n.style!=null}class Iu{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(t7(i))this.tags.push(i);else if(n7(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let r=new Rw(this,t,!1);return r.addAll(e,kt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Rw(this,t,!0);return r.addAll(e,kt.none,t.from,t.to),Ne.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(o7(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}matchStyle(e,t,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let l=this.styles[o],u=l.style;if(!(u.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(l.getAttrs){let f=l.getAttrs(t);if(f===!1)continue;l.attrs=f||void 0}return l}}}static schemaRules(e){let t=[];function r(i){let o=i.priority==null?50:i.priority,l=0;for(;l<t.length;l++){let u=t[l];if((u.priority==null?50:u.priority)<o)break}t.splice(l,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(l=>{r(l=Dw(l)),l.mark||l.ignore||l.clearMark||(l.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(l=>{r(l=Dw(l)),l.node||l.ignore||l.mark||(l.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Iu(e,Iu.schemaRules(e)))}}const m4={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},r7={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},g4={ol:!0,ul:!0},cp=1,m2=2,Fm=4;function Pw(n,e,t){return e!=null?(e?cp:0)|(e==="full"?m2:0):n&&n.whitespace=="pre"?cp|m2:t&-5}class bm{constructor(e,t,r,i,o,l){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=l,this.content=[],this.activeMarks=kt.none,this.match=o||(l&Fm?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(_e.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&cp)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let t=_e.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(_e.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!m4.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Rw{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,o,l=Pw(null,t.preserveWhitespace,0)|(r?Fm:0);i?o=new bm(i.type,i.attrs,kt.none,!0,t.topMatch||i.type.contentMatch,l):r?o=new bm(null,null,kt.none,!0,null,l):o=new bm(e.schema.topNodeType,null,kt.none,!0,null,l),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,o=i.options&m2?"full":this.localPreserveWS||(i.options&cp)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let l=i.content[i.content.length-1],u=e.previousSibling;(!l||u&&u.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),u;g4.hasOwnProperty(l)&&this.parser.normalizeLists&&i7(e);let f=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(f?f.ignore:r7.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,t);else if(!f||f.skip||f.closeParent){f&&f.closeParent?this.open=Math.max(0,this.open-1):f&&f.skip.nodeType&&(e=f.skip);let p,m=this.needsBlock;if(m4.hasOwnProperty(l))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),p=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let g=f&&f.skip?t:this.readStyles(e,t);g&&this.addAll(e,g),p&&this.sync(o),this.needsBlock=m}else{let p=this.readStyles(e,t);p&&this.addElementByRule(e,f,p,f.consuming===!1?u:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],l=r.getPropertyValue(o);if(l)for(let u=void 0;;){let f=this.parser.matchStyle(o,l,this,u);if(!f)break;if(f.ignore)return null;if(f.clearMark?t=t.filter(p=>!f.clearMark(p)):t=t.concat(this.parser.schema.marks[f.mark].create(f.attrs)),f.consuming===!1)u=f;else break}}return t}addElementByRule(e,t,r,i){let o,l;if(t.node)if(l=this.parser.schema.nodes[t.node],l.isLeaf)this.insertNode(l.create(t.attrs),r)||this.leafFallback(e,r);else{let f=this.enter(l,t.attrs||null,r,t.preserveWhitespace);f&&(o=!0,r=f)}else{let f=this.parser.schema.marks[t.mark];r=r.concat(f.create(t.attrs))}let u=this.top;if(l&&l.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(f=>this.insertNode(f,r));else{let f=e;typeof t.contentElement=="string"?f=e.querySelector(t.contentElement):typeof t.contentElement=="function"?f=t.contentElement(e):t.contentElement&&(f=t.contentElement),this.findAround(e,f,!0),this.addAll(f,r),this.findAround(e,f,!1)}o&&this.sync(u)&&this.open--}addAll(e,t,r,i){let o=r||0;for(let l=r?e.childNodes[r]:e.firstChild,u=i==null?null:e.childNodes[i];l!=u;l=l.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(l,t);this.findAtPoint(e,o)}findPlace(e,t){let r,i;for(let o=this.open;o>=0;o--){let l=this.nodes[o],u=l.findWrapping(e);if(u&&(!r||r.length>u.length)&&(r=u,i=l,!u.length)||l.solid)break}if(!r)return null;this.sync(i);for(let o=0;o<r.length;o++)t=this.enterInner(r[o],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(t=this.enterInner(i,null,t))}let r=this.findPlace(e,t);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=kt.none;for(let l of r.concat(e.marks))(i.type?i.type.allowsMarkType(l.type):zw(l.type,e.type))&&(o=l.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,t,r,i){let o=this.findPlace(e.create(t),r);return o&&(o=this.enterInner(e,t,r,!0,i)),o}enterInner(e,t,r,i=!1,o){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let u=Pw(e,o,l.options);l.options&Fm&&l.content.length==0&&(u|=Fm);let f=kt.none;return r=r.filter(p=>(l.type?l.type.allowsMarkType(p.type):zw(p.type,e))?(f=p.addToSet(f),!1):!0),this.nodes.push(new bm(e,t,f,i,null,u)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=cp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),l=(u,f)=>{for(;u>=0;u--){let p=t[u];if(p==""){if(u==t.length-1||u==0)continue;for(;f>=o;f--)if(l(u-1,f))return!0;return!1}else{let m=f>0||f==0&&i?this.nodes[f].type:r&&f>=o?r.node(f-o).type:null;if(!m||m.name!=p&&!m.isInGroup(p))return!1;f--}}return!0};return l(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function i7(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&g4.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function o7(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Dw(n){let e={};for(let t in n)e[t]=n[t];return e}function zw(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let o=[],l=u=>{o.push(u);for(let f=0;f<u.edgeCount;f++){let{type:p,next:m}=u.edge(f);if(p==e||o.indexOf(m)<0&&l(m))return!0}};if(l(i.contentMatch))return!0}}class zu{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=yy(t).createDocumentFragment());let i=r,o=[];return e.forEach(l=>{if(o.length||l.marks.length){let u=0,f=0;for(;u<o.length&&f<l.marks.length;){let p=l.marks[f];if(!this.marks[p.type.name]){f++;continue}if(!p.eq(o[u][0])||p.type.spec.spanning===!1)break;u++,f++}for(;u<o.length;)i=o.pop()[1];for(;f<l.marks.length;){let p=l.marks[f++],m=this.serializeMark(p,l.isInline,t);m&&(o.push([p,i]),i.appendChild(m.dom),i=m.contentDOM||m.dom)}}i.appendChild(this.serializeNodeInner(l,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Bm(yy(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Bm(yy(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return Bm(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new zu(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Lw(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Lw(e.marks)}}function Lw(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function yy(n){return n.document||window.document}const Fw=new WeakMap;function s7(n){let e=Fw.get(n);return e===void 0&&Fw.set(n,e=l7(n)),e}function l7(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function Bm(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=s7(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=i.indexOf(" ");l>0&&(t=i.slice(0,l),i=i.slice(l+1));let u,f=t?n.createElementNS(t,i):n.createElement(i),p=e[1],m=1;if(p&&typeof p=="object"&&p.nodeType==null&&!Array.isArray(p)){m=2;for(let g in p)if(p[g]!=null){let w=g.indexOf(" ");w>0?f.setAttributeNS(g.slice(0,w),g.slice(w+1),p[g]):f.setAttribute(g,p[g])}}for(let g=m;g<e.length;g++){let w=e[g];if(w===0){if(g<e.length-1||g>m)throw new RangeError("Content hole must be the only child of its parent node");return{dom:f,contentDOM:f}}else{let{dom:k,contentDOM:b}=Bm(n,w,t,r);if(f.appendChild(k),b){if(u)throw new RangeError("Multiple content holes");u=b}}}return{dom:f,contentDOM:u}}const a7={};function sv(n,e){const t=a7,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return y4(n,r,i)}function y4(n,e,t){if(u7(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return Bw(n.children,e,t)}return Array.isArray(n)?Bw(n,e,t):""}function Bw(n,e,t){const r=[];let i=-1;for(;++i<n.length;)r[i]=y4(n[i],e,t);return r.join("")}function u7(n){return!!(n&&typeof n=="object")}const Uw=document.createElement("i");function lv(n){const e="&"+n+";";Uw.innerHTML=e;const t=Uw.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function yi(n,e,t,r){const i=n.length;let o=0,l;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,t=t>0?t:0,r.length<1e4)l=Array.from(r),l.unshift(e,t),n.splice(...l);else for(t&&n.splice(e,t);o<r.length;)l=r.slice(o,o+1e4),l.unshift(e,0),n.splice(...l),o+=1e4,e+=1e4}function ji(n,e){return n.length>0?(yi(n,n.length,0,e),n):e}const Ww={}.hasOwnProperty;function v4(n){const e={};let t=-1;for(;++t<n.length;)c7(e,n[t]);return e}function c7(n,e){let t;for(t in e){const i=(Ww.call(n,t)?n[t]:void 0)||(n[t]={}),o=e[t];let l;if(o)for(l in o){Ww.call(i,l)||(i[l]=[]);const u=o[l];f7(i[l],Array.isArray(u)?u:u?[u]:[])}}}function f7(n,e){let t=-1;const r=[];for(;++t<e.length;)(e[t].add==="after"?n:r).push(e[t]);yi(n,0,0,r)}function w4(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"�":String.fromCodePoint(t)}function ko(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const _r=oa(/[A-Za-z]/),qr=oa(/[\dA-Za-z]/),h7=oa(/[#-'*+\--9=?A-Z^-~]/);function x1(n){return n!==null&&(n<32||n===127)}const g2=oa(/\d/),d7=oa(/[\dA-Fa-f]/),p7=oa(/[!-/:-@[-`{-~]/);function qe(n){return n!==null&&n<-2}function Bt(n){return n!==null&&(n<0||n===32)}function dt(n){return n===-2||n===-1||n===32}const L1=oa(new RegExp("\\p{P}|\\p{S}","u")),Ou=oa(/\s/);function oa(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function xt(n,e,t,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return l;function l(f){return dt(f)?(n.enter(t),u(f)):e(f)}function u(f){return dt(f)&&o++<i?(n.consume(f),u):(n.exit(t),e(f))}}const m7={tokenize:g7};function g7(n){const e=n.attempt(this.parser.constructs.contentInitial,r,i);let t;return e;function r(u){if(u===null){n.consume(u);return}return n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),xt(n,e,"linePrefix")}function i(u){return n.enter("paragraph"),o(u)}function o(u){const f=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=f),t=f,l(u)}function l(u){if(u===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(u);return}return qe(u)?(n.consume(u),n.exit("chunkText"),o):(n.consume(u),l)}}const y7={tokenize:v7},jw={tokenize:w7};function v7(n){const e=this,t=[];let r=0,i,o,l;return u;function u(I){if(r<t.length){const W=t[r];return e.containerState=W[1],n.attempt(W[0].continuation,f,p)(I)}return p(I)}function f(I){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&V();const W=e.events.length;let B=W,z;for(;B--;)if(e.events[B][0]==="exit"&&e.events[B][1].type==="chunkFlow"){z=e.events[B][1].end;break}F(r);let H=W;for(;H<e.events.length;)e.events[H][1].end={...z},H++;return yi(e.events,B+1,0,e.events.slice(W)),e.events.length=H,p(I)}return u(I)}function p(I){if(r===t.length){if(!i)return w(I);if(i.currentConstruct&&i.currentConstruct.concrete)return b(I);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(jw,m,g)(I)}function m(I){return i&&V(),F(r),w(I)}function g(I){return e.parser.lazy[e.now().line]=r!==t.length,l=e.now().offset,b(I)}function w(I){return e.containerState={},n.attempt(jw,k,b)(I)}function k(I){return r++,t.push([e.currentConstruct,e.containerState]),w(I)}function b(I){if(I===null){i&&V(),F(0),n.consume(I);return}return i=i||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),A(I)}function A(I){if(I===null){P(n.exit("chunkFlow"),!0),F(0),n.consume(I);return}return qe(I)?(n.consume(I),P(n.exit("chunkFlow")),r=0,e.interrupt=void 0,u):(n.consume(I),A)}function P(I,W){const B=e.sliceStream(I);if(W&&B.push(null),I.previous=o,o&&(o.next=I),o=I,i.defineSkip(I.start),i.write(B),e.parser.lazy[I.start.line]){let z=i.events.length;for(;z--;)if(i.events[z][1].start.offset<l&&(!i.events[z][1].end||i.events[z][1].end.offset>l))return;const H=e.events.length;let Q=H,q,_;for(;Q--;)if(e.events[Q][0]==="exit"&&e.events[Q][1].type==="chunkFlow"){if(q){_=e.events[Q][1].end;break}q=!0}for(F(r),z=H;z<e.events.length;)e.events[z][1].end={..._},z++;yi(e.events,Q+1,0,e.events.slice(H)),e.events.length=z}}function F(I){let W=t.length;for(;W-- >I;){const B=t[W];e.containerState=B[1],B[0].exit.call(e,n)}t.length=I}function V(){i.write([null]),o=void 0,i=void 0,e.containerState._closeFlow=void 0}}function w7(n,e,t){return xt(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ff(n){if(n===null||Bt(n)||Ou(n))return 1;if(L1(n))return 2}function F1(n,e,t){const r=[];let i=-1;for(;++i<n.length;){const o=n[i].resolveAll;o&&!r.includes(o)&&(e=o(e,t),r.push(o))}return e}const y2={name:"attention",resolveAll:k7,tokenize:x7};function k7(n,e){let t=-1,r,i,o,l,u,f,p,m;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(r=t;r--;)if(n[r][0]==="exit"&&n[r][1].type==="attentionSequence"&&n[r][1]._open&&e.sliceSerialize(n[r][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[r][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[r][1].end.offset-n[r][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;f=n[r][1].end.offset-n[r][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const g={...n[r][1].end},w={...n[t][1].start};$w(g,-f),$w(w,f),l={type:f>1?"strongSequence":"emphasisSequence",start:g,end:{...n[r][1].end}},u={type:f>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:w},o={type:f>1?"strongText":"emphasisText",start:{...n[r][1].end},end:{...n[t][1].start}},i={type:f>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},n[r][1].end={...l.start},n[t][1].start={...u.end},p=[],n[r][1].end.offset-n[r][1].start.offset&&(p=ji(p,[["enter",n[r][1],e],["exit",n[r][1],e]])),p=ji(p,[["enter",i,e],["enter",l,e],["exit",l,e],["enter",o,e]]),p=ji(p,F1(e.parser.constructs.insideSpan.null,n.slice(r+1,t),e)),p=ji(p,[["exit",o,e],["enter",u,e],["exit",u,e],["exit",i,e]]),n[t][1].end.offset-n[t][1].start.offset?(m=2,p=ji(p,[["enter",n[t][1],e],["exit",n[t][1],e]])):m=0,yi(n,r-1,t-r+3,p),t=r+p.length-m-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function x7(n,e){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Ff(r);let o;return l;function l(f){return o=f,n.enter("attentionSequence"),u(f)}function u(f){if(f===o)return n.consume(f),u;const p=n.exit("attentionSequence"),m=Ff(f),g=!m||m===2&&i||t.includes(f),w=!i||i===2&&m||t.includes(r);return p._open=!!(o===42?g:g&&(i||!w)),p._close=!!(o===42?w:w&&(m||!g)),e(f)}}function $w(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const S7={name:"autolink",tokenize:b7};function b7(n,e,t){let r=0;return i;function i(k){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(k),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),o}function o(k){return _r(k)?(n.consume(k),l):k===64?t(k):p(k)}function l(k){return k===43||k===45||k===46||qr(k)?(r=1,u(k)):p(k)}function u(k){return k===58?(n.consume(k),r=0,f):(k===43||k===45||k===46||qr(k))&&r++<32?(n.consume(k),u):(r=0,p(k))}function f(k){return k===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(k),n.exit("autolinkMarker"),n.exit("autolink"),e):k===null||k===32||k===60||x1(k)?t(k):(n.consume(k),f)}function p(k){return k===64?(n.consume(k),m):h7(k)?(n.consume(k),p):t(k)}function m(k){return qr(k)?g(k):t(k)}function g(k){return k===46?(n.consume(k),r=0,m):k===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(k),n.exit("autolinkMarker"),n.exit("autolink"),e):w(k)}function w(k){if((k===45||qr(k))&&r++<63){const b=k===45?w:g;return n.consume(k),b}return t(k)}}const _p={partial:!0,tokenize:_7};function _7(n,e,t){return r;function r(o){return dt(o)?xt(n,i,"linePrefix")(o):i(o)}function i(o){return o===null||qe(o)?e(o):t(o)}}const k4={continuation:{tokenize:E7},exit:T7,name:"blockQuote",tokenize:C7};function C7(n,e,t){const r=this;return i;function i(l){if(l===62){const u=r.containerState;return u.open||(n.enter("blockQuote",{_container:!0}),u.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(l),n.exit("blockQuoteMarker"),o}return t(l)}function o(l){return dt(l)?(n.enter("blockQuotePrefixWhitespace"),n.consume(l),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(l))}}function E7(n,e,t){const r=this;return i;function i(l){return dt(l)?xt(n,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):o(l)}function o(l){return n.attempt(k4,e,t)(l)}}function T7(n){n.exit("blockQuote")}const x4={name:"characterEscape",tokenize:M7};function M7(n,e,t){return r;function r(o){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(o),n.exit("escapeMarker"),i}function i(o){return p7(o)?(n.enter("characterEscapeValue"),n.consume(o),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(o)}}const S4={name:"characterReference",tokenize:N7};function N7(n,e,t){const r=this;let i=0,o,l;return u;function u(g){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(g),n.exit("characterReferenceMarker"),f}function f(g){return g===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(g),n.exit("characterReferenceMarkerNumeric"),p):(n.enter("characterReferenceValue"),o=31,l=qr,m(g))}function p(g){return g===88||g===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(g),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),o=6,l=d7,m):(n.enter("characterReferenceValue"),o=7,l=g2,m(g))}function m(g){if(g===59&&i){const w=n.exit("characterReferenceValue");return l===qr&&!lv(r.sliceSerialize(w))?t(g):(n.enter("characterReferenceMarker"),n.consume(g),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return l(g)&&i++<o?(n.consume(g),m):t(g)}}const Hw={partial:!0,tokenize:I7},Vw={concrete:!0,name:"codeFenced",tokenize:A7};function A7(n,e,t){const r=this,i={partial:!0,tokenize:B};let o=0,l=0,u;return f;function f(z){return p(z)}function p(z){const H=r.events[r.events.length-1];return o=H&&H[1].type==="linePrefix"?H[2].sliceSerialize(H[1],!0).length:0,u=z,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),m(z)}function m(z){return z===u?(l++,n.consume(z),m):l<3?t(z):(n.exit("codeFencedFenceSequence"),dt(z)?xt(n,g,"whitespace")(z):g(z))}function g(z){return z===null||qe(z)?(n.exit("codeFencedFence"),r.interrupt?e(z):n.check(Hw,A,W)(z)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),w(z))}function w(z){return z===null||qe(z)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),g(z)):dt(z)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),xt(n,k,"whitespace")(z)):z===96&&z===u?t(z):(n.consume(z),w)}function k(z){return z===null||qe(z)?g(z):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),b(z))}function b(z){return z===null||qe(z)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),g(z)):z===96&&z===u?t(z):(n.consume(z),b)}function A(z){return n.attempt(i,W,P)(z)}function P(z){return n.enter("lineEnding"),n.consume(z),n.exit("lineEnding"),F}function F(z){return o>0&&dt(z)?xt(n,V,"linePrefix",o+1)(z):V(z)}function V(z){return z===null||qe(z)?n.check(Hw,A,W)(z):(n.enter("codeFlowValue"),I(z))}function I(z){return z===null||qe(z)?(n.exit("codeFlowValue"),V(z)):(n.consume(z),I)}function W(z){return n.exit("codeFenced"),e(z)}function B(z,H,Q){let q=0;return _;function _(oe){return z.enter("lineEnding"),z.consume(oe),z.exit("lineEnding"),U}function U(oe){return z.enter("codeFencedFence"),dt(oe)?xt(z,D,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(oe):D(oe)}function D(oe){return oe===u?(z.enter("codeFencedFenceSequence"),G(oe)):Q(oe)}function G(oe){return oe===u?(q++,z.consume(oe),G):q>=l?(z.exit("codeFencedFenceSequence"),dt(oe)?xt(z,le,"whitespace")(oe):le(oe)):Q(oe)}function le(oe){return oe===null||qe(oe)?(z.exit("codeFencedFence"),H(oe)):Q(oe)}}}function I7(n,e,t){const r=this;return i;function i(l){return l===null?t(l):(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),o)}function o(l){return r.parser.lazy[r.now().line]?t(l):e(l)}}const vy={name:"codeIndented",tokenize:P7},O7={partial:!0,tokenize:R7};function P7(n,e,t){const r=this;return i;function i(p){return n.enter("codeIndented"),xt(n,o,"linePrefix",5)(p)}function o(p){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?l(p):t(p)}function l(p){return p===null?f(p):qe(p)?n.attempt(O7,l,f)(p):(n.enter("codeFlowValue"),u(p))}function u(p){return p===null||qe(p)?(n.exit("codeFlowValue"),l(p)):(n.consume(p),u)}function f(p){return n.exit("codeIndented"),e(p)}}function R7(n,e,t){const r=this;return i;function i(l){return r.parser.lazy[r.now().line]?t(l):qe(l)?(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),i):xt(n,o,"linePrefix",5)(l)}function o(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):qe(l)?i(l):t(l)}}const D7={name:"codeText",previous:L7,resolve:z7,tokenize:F7};function z7(n){let e=n.length-4,t=3,r,i;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(r=t;++r<e;)if(n[r][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(r=t-1,e++;++r<=e;)i===void 0?r!==e&&n[r][1].type!=="lineEnding"&&(i=r):(r===e||n[r][1].type==="lineEnding")&&(n[i][1].type="codeTextData",r!==i+2&&(n[i][1].end=n[r-1][1].end,n.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return n}function L7(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function F7(n,e,t){let r=0,i,o;return l;function l(g){return n.enter("codeText"),n.enter("codeTextSequence"),u(g)}function u(g){return g===96?(n.consume(g),r++,u):(n.exit("codeTextSequence"),f(g))}function f(g){return g===null?t(g):g===32?(n.enter("space"),n.consume(g),n.exit("space"),f):g===96?(o=n.enter("codeTextSequence"),i=0,m(g)):qe(g)?(n.enter("lineEnding"),n.consume(g),n.exit("lineEnding"),f):(n.enter("codeTextData"),p(g))}function p(g){return g===null||g===32||g===96||qe(g)?(n.exit("codeTextData"),f(g)):(n.consume(g),p)}function m(g){return g===96?(n.consume(g),i++,m):i===r?(n.exit("codeTextSequence"),n.exit("codeText"),e(g)):(o.type="codeTextData",p(g))}}class B7{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const r=t??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,t,r){const i=t||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&_d(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),_d(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),_d(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);_d(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);_d(this.left,t.reverse())}}}function _d(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function b4(n){const e={};let t=-1,r,i,o,l,u,f,p;const m=new B7(n);for(;++t<m.length;){for(;t in e;)t=e[t];if(r=m.get(t),t&&r[1].type==="chunkFlow"&&m.get(t-1)[1].type==="listItemPrefix"&&(f=r[1]._tokenizer.events,o=0,o<f.length&&f[o][1].type==="lineEndingBlank"&&(o+=2),o<f.length&&f[o][1].type==="content"))for(;++o<f.length&&f[o][1].type!=="content";)f[o][1].type==="chunkText"&&(f[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,U7(m,t)),t=e[t],p=!0);else if(r[1]._container){for(o=t,i=void 0;o--;)if(l=m.get(o),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(i&&(m.get(i)[1].type="lineEndingBlank"),l[1].type="lineEnding",i=o);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;i&&(r[1].end={...m.get(i)[1].start},u=m.slice(i,t),u.unshift(r),m.splice(i,t-i+1,u))}}return yi(n,0,Number.POSITIVE_INFINITY,m.slice(0)),!p}function U7(n,e){const t=n.get(e)[1],r=n.get(e)[2];let i=e-1;const o=[];let l=t._tokenizer;l||(l=r.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,f=[],p={};let m,g,w=-1,k=t,b=0,A=0;const P=[A];for(;k;){for(;n.get(++i)[1]!==k;);o.push(i),k._tokenizer||(m=r.sliceStream(k),k.next||m.push(null),g&&l.defineSkip(k.start),k._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(m),k._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),g=k,k=k.next}for(k=t;++w<u.length;)u[w][0]==="exit"&&u[w-1][0]==="enter"&&u[w][1].type===u[w-1][1].type&&u[w][1].start.line!==u[w][1].end.line&&(A=w+1,P.push(A),k._tokenizer=void 0,k.previous=void 0,k=k.next);for(l.events=[],k?(k._tokenizer=void 0,k.previous=void 0):P.pop(),w=P.length;w--;){const F=u.slice(P[w],P[w+1]),V=o.pop();f.push([V,V+F.length-1]),n.splice(V,2,F)}for(f.reverse(),w=-1;++w<f.length;)p[b+f[w][0]]=b+f[w][1],b+=f[w][1]-f[w][0]-1;return p}const W7={resolve:$7,tokenize:H7},j7={partial:!0,tokenize:V7};function $7(n){return b4(n),n}function H7(n,e){let t;return r;function r(u){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),i(u)}function i(u){return u===null?o(u):qe(u)?n.check(j7,l,o)(u):(n.consume(u),i)}function o(u){return n.exit("chunkContent"),n.exit("content"),e(u)}function l(u){return n.consume(u),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function V7(n,e,t){const r=this;return i;function i(l){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),xt(n,o,"linePrefix")}function o(l){if(l===null||qe(l))return t(l);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):n.interrupt(r.parser.constructs.flow,t,e)(l)}}function _4(n,e,t,r,i,o,l,u,f){const p=f||Number.POSITIVE_INFINITY;let m=0;return g;function g(F){return F===60?(n.enter(r),n.enter(i),n.enter(o),n.consume(F),n.exit(o),w):F===null||F===32||F===41||x1(F)?t(F):(n.enter(r),n.enter(l),n.enter(u),n.enter("chunkString",{contentType:"string"}),A(F))}function w(F){return F===62?(n.enter(o),n.consume(F),n.exit(o),n.exit(i),n.exit(r),e):(n.enter(u),n.enter("chunkString",{contentType:"string"}),k(F))}function k(F){return F===62?(n.exit("chunkString"),n.exit(u),w(F)):F===null||F===60||qe(F)?t(F):(n.consume(F),F===92?b:k)}function b(F){return F===60||F===62||F===92?(n.consume(F),k):k(F)}function A(F){return!m&&(F===null||F===41||Bt(F))?(n.exit("chunkString"),n.exit(u),n.exit(l),n.exit(r),e(F)):m<p&&F===40?(n.consume(F),m++,A):F===41?(n.consume(F),m--,A):F===null||F===32||F===40||x1(F)?t(F):(n.consume(F),F===92?P:A)}function P(F){return F===40||F===41||F===92?(n.consume(F),A):A(F)}}function C4(n,e,t,r,i,o){const l=this;let u=0,f;return p;function p(k){return n.enter(r),n.enter(i),n.consume(k),n.exit(i),n.enter(o),m}function m(k){return u>999||k===null||k===91||k===93&&!f||k===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?t(k):k===93?(n.exit(o),n.enter(i),n.consume(k),n.exit(i),n.exit(r),e):qe(k)?(n.enter("lineEnding"),n.consume(k),n.exit("lineEnding"),m):(n.enter("chunkString",{contentType:"string"}),g(k))}function g(k){return k===null||k===91||k===93||qe(k)||u++>999?(n.exit("chunkString"),m(k)):(n.consume(k),f||(f=!dt(k)),k===92?w:g)}function w(k){return k===91||k===92||k===93?(n.consume(k),u++,g):g(k)}}function E4(n,e,t,r,i,o){let l;return u;function u(w){return w===34||w===39||w===40?(n.enter(r),n.enter(i),n.consume(w),n.exit(i),l=w===40?41:w,f):t(w)}function f(w){return w===l?(n.enter(i),n.consume(w),n.exit(i),n.exit(r),e):(n.enter(o),p(w))}function p(w){return w===l?(n.exit(o),f(l)):w===null?t(w):qe(w)?(n.enter("lineEnding"),n.consume(w),n.exit("lineEnding"),xt(n,p,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),m(w))}function m(w){return w===l||w===null||qe(w)?(n.exit("chunkString"),p(w)):(n.consume(w),w===92?g:m)}function g(w){return w===l||w===92?(n.consume(w),m):m(w)}}function Yd(n,e){let t;return r;function r(i){return qe(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),t=!0,r):dt(i)?xt(n,r,t?"linePrefix":"lineSuffix")(i):e(i)}}const q7={name:"definition",tokenize:J7},K7={partial:!0,tokenize:G7};function J7(n,e,t){const r=this;let i;return o;function o(k){return n.enter("definition"),l(k)}function l(k){return C4.call(r,n,u,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(k)}function u(k){return i=ko(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),k===58?(n.enter("definitionMarker"),n.consume(k),n.exit("definitionMarker"),f):t(k)}function f(k){return Bt(k)?Yd(n,p)(k):p(k)}function p(k){return _4(n,m,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(k)}function m(k){return n.attempt(K7,g,g)(k)}function g(k){return dt(k)?xt(n,w,"whitespace")(k):w(k)}function w(k){return k===null||qe(k)?(n.exit("definition"),r.parser.defined.push(i),e(k)):t(k)}}function G7(n,e,t){return r;function r(u){return Bt(u)?Yd(n,i)(u):t(u)}function i(u){return E4(n,o,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function o(u){return dt(u)?xt(n,l,"whitespace")(u):l(u)}function l(u){return u===null||qe(u)?e(u):t(u)}}const Q7={name:"hardBreakEscape",tokenize:Y7};function Y7(n,e,t){return r;function r(o){return n.enter("hardBreakEscape"),n.consume(o),i}function i(o){return qe(o)?(n.exit("hardBreakEscape"),e(o)):t(o)}}const X7={name:"headingAtx",resolve:Z7,tokenize:e9};function Z7(n,e){let t=n.length-2,r=3,i,o;return n[r][1].type==="whitespace"&&(r+=2),t-2>r&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(r===t-1||t-4>r&&n[t-2][1].type==="whitespace")&&(t-=r+1===t?2:4),t>r&&(i={type:"atxHeadingText",start:n[r][1].start,end:n[t][1].end},o={type:"chunkText",start:n[r][1].start,end:n[t][1].end,contentType:"text"},yi(n,r,t-r+1,[["enter",i,e],["enter",o,e],["exit",o,e],["exit",i,e]])),n}function e9(n,e,t){let r=0;return i;function i(m){return n.enter("atxHeading"),o(m)}function o(m){return n.enter("atxHeadingSequence"),l(m)}function l(m){return m===35&&r++<6?(n.consume(m),l):m===null||Bt(m)?(n.exit("atxHeadingSequence"),u(m)):t(m)}function u(m){return m===35?(n.enter("atxHeadingSequence"),f(m)):m===null||qe(m)?(n.exit("atxHeading"),e(m)):dt(m)?xt(n,u,"whitespace")(m):(n.enter("atxHeadingText"),p(m))}function f(m){return m===35?(n.consume(m),f):(n.exit("atxHeadingSequence"),u(m))}function p(m){return m===null||m===35||Bt(m)?(n.exit("atxHeadingText"),u(m)):(n.consume(m),p)}}const t9=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],qw=["pre","script","style","textarea"],n9={concrete:!0,name:"htmlFlow",resolveTo:o9,tokenize:s9},r9={partial:!0,tokenize:a9},i9={partial:!0,tokenize:l9};function o9(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function s9(n,e,t){const r=this;let i,o,l,u,f;return p;function p(N){return m(N)}function m(N){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(N),g}function g(N){return N===33?(n.consume(N),w):N===47?(n.consume(N),o=!0,A):N===63?(n.consume(N),i=3,r.interrupt?e:x):_r(N)?(n.consume(N),l=String.fromCharCode(N),P):t(N)}function w(N){return N===45?(n.consume(N),i=2,k):N===91?(n.consume(N),i=5,u=0,b):_r(N)?(n.consume(N),i=4,r.interrupt?e:x):t(N)}function k(N){return N===45?(n.consume(N),r.interrupt?e:x):t(N)}function b(N){const re="CDATA[";return N===re.charCodeAt(u++)?(n.consume(N),u===re.length?r.interrupt?e:D:b):t(N)}function A(N){return _r(N)?(n.consume(N),l=String.fromCharCode(N),P):t(N)}function P(N){if(N===null||N===47||N===62||Bt(N)){const re=N===47,ee=l.toLowerCase();return!re&&!o&&qw.includes(ee)?(i=1,r.interrupt?e(N):D(N)):t9.includes(l.toLowerCase())?(i=6,re?(n.consume(N),F):r.interrupt?e(N):D(N)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?t(N):o?V(N):I(N))}return N===45||qr(N)?(n.consume(N),l+=String.fromCharCode(N),P):t(N)}function F(N){return N===62?(n.consume(N),r.interrupt?e:D):t(N)}function V(N){return dt(N)?(n.consume(N),V):_(N)}function I(N){return N===47?(n.consume(N),_):N===58||N===95||_r(N)?(n.consume(N),W):dt(N)?(n.consume(N),I):_(N)}function W(N){return N===45||N===46||N===58||N===95||qr(N)?(n.consume(N),W):B(N)}function B(N){return N===61?(n.consume(N),z):dt(N)?(n.consume(N),B):I(N)}function z(N){return N===null||N===60||N===61||N===62||N===96?t(N):N===34||N===39?(n.consume(N),f=N,H):dt(N)?(n.consume(N),z):Q(N)}function H(N){return N===f?(n.consume(N),f=null,q):N===null||qe(N)?t(N):(n.consume(N),H)}function Q(N){return N===null||N===34||N===39||N===47||N===60||N===61||N===62||N===96||Bt(N)?B(N):(n.consume(N),Q)}function q(N){return N===47||N===62||dt(N)?I(N):t(N)}function _(N){return N===62?(n.consume(N),U):t(N)}function U(N){return N===null||qe(N)?D(N):dt(N)?(n.consume(N),U):t(N)}function D(N){return N===45&&i===2?(n.consume(N),ye):N===60&&i===1?(n.consume(N),de):N===62&&i===4?(n.consume(N),M):N===63&&i===3?(n.consume(N),x):N===93&&i===5?(n.consume(N),C):qe(N)&&(i===6||i===7)?(n.exit("htmlFlowData"),n.check(r9,R,G)(N)):N===null||qe(N)?(n.exit("htmlFlowData"),G(N)):(n.consume(N),D)}function G(N){return n.check(i9,le,R)(N)}function le(N){return n.enter("lineEnding"),n.consume(N),n.exit("lineEnding"),oe}function oe(N){return N===null||qe(N)?G(N):(n.enter("htmlFlowData"),D(N))}function ye(N){return N===45?(n.consume(N),x):D(N)}function de(N){return N===47?(n.consume(N),l="",Y):D(N)}function Y(N){if(N===62){const re=l.toLowerCase();return qw.includes(re)?(n.consume(N),M):D(N)}return _r(N)&&l.length<8?(n.consume(N),l+=String.fromCharCode(N),Y):D(N)}function C(N){return N===93?(n.consume(N),x):D(N)}function x(N){return N===62?(n.consume(N),M):N===45&&i===2?(n.consume(N),x):D(N)}function M(N){return N===null||qe(N)?(n.exit("htmlFlowData"),R(N)):(n.consume(N),M)}function R(N){return n.exit("htmlFlow"),e(N)}}function l9(n,e,t){const r=this;return i;function i(l){return qe(l)?(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),o):t(l)}function o(l){return r.parser.lazy[r.now().line]?t(l):e(l)}}function a9(n,e,t){return r;function r(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),n.attempt(_p,e,t)}}const u9={name:"htmlText",tokenize:c9};function c9(n,e,t){const r=this;let i,o,l;return u;function u(x){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(x),f}function f(x){return x===33?(n.consume(x),p):x===47?(n.consume(x),B):x===63?(n.consume(x),I):_r(x)?(n.consume(x),Q):t(x)}function p(x){return x===45?(n.consume(x),m):x===91?(n.consume(x),o=0,b):_r(x)?(n.consume(x),V):t(x)}function m(x){return x===45?(n.consume(x),k):t(x)}function g(x){return x===null?t(x):x===45?(n.consume(x),w):qe(x)?(l=g,de(x)):(n.consume(x),g)}function w(x){return x===45?(n.consume(x),k):g(x)}function k(x){return x===62?ye(x):x===45?w(x):g(x)}function b(x){const M="CDATA[";return x===M.charCodeAt(o++)?(n.consume(x),o===M.length?A:b):t(x)}function A(x){return x===null?t(x):x===93?(n.consume(x),P):qe(x)?(l=A,de(x)):(n.consume(x),A)}function P(x){return x===93?(n.consume(x),F):A(x)}function F(x){return x===62?ye(x):x===93?(n.consume(x),F):A(x)}function V(x){return x===null||x===62?ye(x):qe(x)?(l=V,de(x)):(n.consume(x),V)}function I(x){return x===null?t(x):x===63?(n.consume(x),W):qe(x)?(l=I,de(x)):(n.consume(x),I)}function W(x){return x===62?ye(x):I(x)}function B(x){return _r(x)?(n.consume(x),z):t(x)}function z(x){return x===45||qr(x)?(n.consume(x),z):H(x)}function H(x){return qe(x)?(l=H,de(x)):dt(x)?(n.consume(x),H):ye(x)}function Q(x){return x===45||qr(x)?(n.consume(x),Q):x===47||x===62||Bt(x)?q(x):t(x)}function q(x){return x===47?(n.consume(x),ye):x===58||x===95||_r(x)?(n.consume(x),_):qe(x)?(l=q,de(x)):dt(x)?(n.consume(x),q):ye(x)}function _(x){return x===45||x===46||x===58||x===95||qr(x)?(n.consume(x),_):U(x)}function U(x){return x===61?(n.consume(x),D):qe(x)?(l=U,de(x)):dt(x)?(n.consume(x),U):q(x)}function D(x){return x===null||x===60||x===61||x===62||x===96?t(x):x===34||x===39?(n.consume(x),i=x,G):qe(x)?(l=D,de(x)):dt(x)?(n.consume(x),D):(n.consume(x),le)}function G(x){return x===i?(n.consume(x),i=void 0,oe):x===null?t(x):qe(x)?(l=G,de(x)):(n.consume(x),G)}function le(x){return x===null||x===34||x===39||x===60||x===61||x===96?t(x):x===47||x===62||Bt(x)?q(x):(n.consume(x),le)}function oe(x){return x===47||x===62||Bt(x)?q(x):t(x)}function ye(x){return x===62?(n.consume(x),n.exit("htmlTextData"),n.exit("htmlText"),e):t(x)}function de(x){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(x),n.exit("lineEnding"),Y}function Y(x){return dt(x)?xt(n,C,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(x):C(x)}function C(x){return n.enter("htmlTextData"),l(x)}}const av={name:"labelEnd",resolveAll:p9,resolveTo:m9,tokenize:g9},f9={tokenize:y9},h9={tokenize:v9},d9={tokenize:w9};function p9(n){let e=-1;const t=[];for(;++e<n.length;){const r=n[e][1];if(t.push(n[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return n.length!==t.length&&yi(n,0,n.length,t),n}function m9(n,e){let t=n.length,r=0,i,o,l,u;for(;t--;)if(i=n[t][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;n[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(l){if(n[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=t,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(l=t);const f={type:n[o][1].type==="labelLink"?"link":"image",start:{...n[o][1].start},end:{...n[n.length-1][1].end}},p={type:"label",start:{...n[o][1].start},end:{...n[l][1].end}},m={type:"labelText",start:{...n[o+r+2][1].end},end:{...n[l-2][1].start}};return u=[["enter",f,e],["enter",p,e]],u=ji(u,n.slice(o+1,o+r+3)),u=ji(u,[["enter",m,e]]),u=ji(u,F1(e.parser.constructs.insideSpan.null,n.slice(o+r+4,l-3),e)),u=ji(u,[["exit",m,e],n[l-2],n[l-1],["exit",p,e]]),u=ji(u,n.slice(l+1)),u=ji(u,[["exit",f,e]]),yi(n,o,n.length,u),n}function g9(n,e,t){const r=this;let i=r.events.length,o,l;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return u;function u(w){return o?o._inactive?g(w):(l=r.parser.defined.includes(ko(r.sliceSerialize({start:o.end,end:r.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(w),n.exit("labelMarker"),n.exit("labelEnd"),f):t(w)}function f(w){return w===40?n.attempt(f9,m,l?m:g)(w):w===91?n.attempt(h9,m,l?p:g)(w):l?m(w):g(w)}function p(w){return n.attempt(d9,m,g)(w)}function m(w){return e(w)}function g(w){return o._balanced=!0,t(w)}}function y9(n,e,t){return r;function r(g){return n.enter("resource"),n.enter("resourceMarker"),n.consume(g),n.exit("resourceMarker"),i}function i(g){return Bt(g)?Yd(n,o)(g):o(g)}function o(g){return g===41?m(g):_4(n,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function l(g){return Bt(g)?Yd(n,f)(g):m(g)}function u(g){return t(g)}function f(g){return g===34||g===39||g===40?E4(n,p,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):m(g)}function p(g){return Bt(g)?Yd(n,m)(g):m(g)}function m(g){return g===41?(n.enter("resourceMarker"),n.consume(g),n.exit("resourceMarker"),n.exit("resource"),e):t(g)}}function v9(n,e,t){const r=this;return i;function i(u){return C4.call(r,n,o,l,"reference","referenceMarker","referenceString")(u)}function o(u){return r.parser.defined.includes(ko(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(u):t(u)}function l(u){return t(u)}}function w9(n,e,t){return r;function r(o){return n.enter("reference"),n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),i}function i(o){return o===93?(n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),n.exit("reference"),e):t(o)}}const k9={name:"labelStartImage",resolveAll:av.resolveAll,tokenize:x9};function x9(n,e,t){const r=this;return i;function i(u){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(u),n.exit("labelImageMarker"),o}function o(u){return u===91?(n.enter("labelMarker"),n.consume(u),n.exit("labelMarker"),n.exit("labelImage"),l):t(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(u):e(u)}}const S9={name:"labelStartLink",resolveAll:av.resolveAll,tokenize:b9};function b9(n,e,t){const r=this;return i;function i(l){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(l),n.exit("labelMarker"),n.exit("labelLink"),o}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(l):e(l)}}const wy={name:"lineEnding",tokenize:_9};function _9(n,e){return t;function t(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),xt(n,e,"linePrefix")}}const Um={name:"thematicBreak",tokenize:C9};function C9(n,e,t){let r=0,i;return o;function o(p){return n.enter("thematicBreak"),l(p)}function l(p){return i=p,u(p)}function u(p){return p===i?(n.enter("thematicBreakSequence"),f(p)):r>=3&&(p===null||qe(p))?(n.exit("thematicBreak"),e(p)):t(p)}function f(p){return p===i?(n.consume(p),r++,f):(n.exit("thematicBreakSequence"),dt(p)?xt(n,u,"whitespace")(p):u(p))}}const Vr={continuation:{tokenize:N9},exit:I9,name:"list",tokenize:M9},E9={partial:!0,tokenize:O9},T9={partial:!0,tokenize:A9};function M9(n,e,t){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,l=0;return u;function u(k){const b=r.containerState.type||(k===42||k===43||k===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!r.containerState.marker||k===r.containerState.marker:g2(k)){if(r.containerState.type||(r.containerState.type=b,n.enter(b,{_container:!0})),b==="listUnordered")return n.enter("listItemPrefix"),k===42||k===45?n.check(Um,t,p)(k):p(k);if(!r.interrupt||k===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),f(k)}return t(k)}function f(k){return g2(k)&&++l<10?(n.consume(k),f):(!r.interrupt||l<2)&&(r.containerState.marker?k===r.containerState.marker:k===41||k===46)?(n.exit("listItemValue"),p(k)):t(k)}function p(k){return n.enter("listItemMarker"),n.consume(k),n.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||k,n.check(_p,r.interrupt?t:m,n.attempt(E9,w,g))}function m(k){return r.containerState.initialBlankLine=!0,o++,w(k)}function g(k){return dt(k)?(n.enter("listItemPrefixWhitespace"),n.consume(k),n.exit("listItemPrefixWhitespace"),w):t(k)}function w(k){return r.containerState.size=o+r.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(k)}}function N9(n,e,t){const r=this;return r.containerState._closeFlow=void 0,n.check(_p,i,o);function i(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,xt(n,e,"listItemIndent",r.containerState.size+1)(u)}function o(u){return r.containerState.furtherBlankLines||!dt(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,n.attempt(T9,e,l)(u))}function l(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,xt(n,n.attempt(Vr,e,t),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function A9(n,e,t){const r=this;return xt(n,i,"listItemIndent",r.containerState.size+1);function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?e(o):t(o)}}function I9(n){n.exit(this.containerState.type)}function O9(n,e,t){const r=this;return xt(n,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const l=r.events[r.events.length-1];return!dt(o)&&l&&l[1].type==="listItemPrefixWhitespace"?e(o):t(o)}}const Kw={name:"setextUnderline",resolveTo:P9,tokenize:R9};function P9(n,e){let t=n.length,r,i,o;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){r=t;break}n[t][1].type==="paragraph"&&(i=t)}else n[t][1].type==="content"&&n.splice(t,1),!o&&n[t][1].type==="definition"&&(o=t);const l={type:"setextHeading",start:{...n[r][1].start},end:{...n[n.length-1][1].end}};return n[i][1].type="setextHeadingText",o?(n.splice(i,0,["enter",l,e]),n.splice(o+1,0,["exit",n[r][1],e]),n[r][1].end={...n[o][1].end}):n[r][1]=l,n.push(["exit",l,e]),n}function R9(n,e,t){const r=this;let i;return o;function o(p){let m=r.events.length,g;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){g=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||g)?(n.enter("setextHeadingLine"),i=p,l(p)):t(p)}function l(p){return n.enter("setextHeadingLineSequence"),u(p)}function u(p){return p===i?(n.consume(p),u):(n.exit("setextHeadingLineSequence"),dt(p)?xt(n,f,"lineSuffix")(p):f(p))}function f(p){return p===null||qe(p)?(n.exit("setextHeadingLine"),e(p)):t(p)}}const D9={tokenize:z9};function z9(n){const e=this,t=n.attempt(_p,r,n.attempt(this.parser.constructs.flowInitial,i,xt(n,n.attempt(this.parser.constructs.flow,i,n.attempt(W7,i)),"linePrefix")));return t;function r(o){if(o===null){n.consume(o);return}return n.enter("lineEndingBlank"),n.consume(o),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function i(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const L9={resolveAll:M4()},F9=T4("string"),B9=T4("text");function T4(n){return{resolveAll:M4(n==="text"?U9:void 0),tokenize:e};function e(t){const r=this,i=this.parser.constructs[n],o=t.attempt(i,l,u);return l;function l(m){return p(m)?o(m):u(m)}function u(m){if(m===null){t.consume(m);return}return t.enter("data"),t.consume(m),f}function f(m){return p(m)?(t.exit("data"),o(m)):(t.consume(m),f)}function p(m){if(m===null)return!0;const g=i[m];let w=-1;if(g)for(;++w<g.length;){const k=g[w];if(!k.previous||k.previous.call(r,r.previous))return!0}return!1}}}function M4(n){return e;function e(t,r){let i=-1,o;for(;++i<=t.length;)o===void 0?t[i]&&t[i][1].type==="data"&&(o=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==o+2&&(t[o][1].end=t[i-1][1].end,t.splice(o+2,i-o-2),i=o+2),o=void 0);return n?n(t,r):t}}function U9(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const r=n[t-1][1],i=e.sliceStream(r);let o=i.length,l=-1,u=0,f;for(;o--;){const p=i[o];if(typeof p=="string"){for(l=p.length;p.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(p===-2)f=!0,u++;else if(p!==-1){o++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(u=0),u){const p={type:t===n.length||f||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?l:r.start._bufferIndex+l,_index:r.start._index+o,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...p.start},r.start.offset===r.end.offset?Object.assign(r,p):(n.splice(t,0,["enter",p,e],["exit",p,e]),t+=2)}t++}return n}const W9={42:Vr,43:Vr,45:Vr,48:Vr,49:Vr,50:Vr,51:Vr,52:Vr,53:Vr,54:Vr,55:Vr,56:Vr,57:Vr,62:k4},j9={91:q7},$9={[-2]:vy,[-1]:vy,32:vy},H9={35:X7,42:Um,45:[Kw,Um],60:n9,61:Kw,95:Um,96:Vw,126:Vw},V9={38:S4,92:x4},q9={[-5]:wy,[-4]:wy,[-3]:wy,33:k9,38:S4,42:y2,60:[S7,u9],91:S9,92:[Q7,x4],93:av,95:y2,96:D7},K9={null:[y2,L9]},J9={null:[42,95]},G9={null:[]},Q9=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:J9,contentInitial:j9,disable:G9,document:W9,flow:H9,flowInitial:$9,insideSpan:K9,string:V9,text:q9},Symbol.toStringTag,{value:"Module"}));function Y9(n,e,t){let r={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const i={},o=[];let l=[],u=[];const f={attempt:H(B),check:H(z),consume:V,enter:I,exit:W,interrupt:H(z,{interrupt:!0})},p={code:null,containerState:{},defineSkip:A,events:[],now:b,parser:n,previous:null,sliceSerialize:w,sliceStream:k,write:g};let m=e.tokenize.call(p,f);return e.resolveAll&&o.push(e),p;function g(U){return l=ji(l,U),P(),l[l.length-1]!==null?[]:(Q(e,0),p.events=F1(o,p.events,p),p.events)}function w(U,D){return Z9(k(U),D)}function k(U){return X9(l,U)}function b(){const{_bufferIndex:U,_index:D,line:G,column:le,offset:oe}=r;return{_bufferIndex:U,_index:D,line:G,column:le,offset:oe}}function A(U){i[U.line]=U.column,_()}function P(){let U;for(;r._index<l.length;){const D=l[r._index];if(typeof D=="string")for(U=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===U&&r._bufferIndex<D.length;)F(D.charCodeAt(r._bufferIndex));else F(D)}}function F(U){m=m(U)}function V(U){qe(U)?(r.line++,r.column=1,r.offset+=U===-3?2:1,_()):U!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),p.previous=U}function I(U,D){const G=D||{};return G.type=U,G.start=b(),p.events.push(["enter",G,p]),u.push(G),G}function W(U){const D=u.pop();return D.end=b(),p.events.push(["exit",D,p]),D}function B(U,D){Q(U,D.from)}function z(U,D){D.restore()}function H(U,D){return G;function G(le,oe,ye){let de,Y,C,x;return Array.isArray(le)?R(le):"tokenize"in le?R([le]):M(le);function M(ne){return he;function he(ke){const Me=ke!==null&&ne[ke],je=ke!==null&&ne.null,$e=[...Array.isArray(Me)?Me:Me?[Me]:[],...Array.isArray(je)?je:je?[je]:[]];return R($e)(ke)}}function R(ne){return de=ne,Y=0,ne.length===0?ye:N(ne[Y])}function N(ne){return he;function he(ke){return x=q(),C=ne,ne.partial||(p.currentConstruct=ne),ne.name&&p.parser.constructs.disable.null.includes(ne.name)?ee():ne.tokenize.call(D?Object.assign(Object.create(p),D):p,f,re,ee)(ke)}}function re(ne){return U(C,x),oe}function ee(ne){return x.restore(),++Y<de.length?N(de[Y]):ye}}}function Q(U,D){U.resolveAll&&!o.includes(U)&&o.push(U),U.resolve&&yi(p.events,D,p.events.length-D,U.resolve(p.events.slice(D),p)),U.resolveTo&&(p.events=U.resolveTo(p.events,p))}function q(){const U=b(),D=p.previous,G=p.currentConstruct,le=p.events.length,oe=Array.from(u);return{from:le,restore:ye};function ye(){r=U,p.previous=D,p.currentConstruct=G,p.events.length=le,u=oe,_()}}function _(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function X9(n,e){const t=e.start._index,r=e.start._bufferIndex,i=e.end._index,o=e.end._bufferIndex;let l;if(t===i)l=[n[t].slice(r,o)];else{if(l=n.slice(t,i),r>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(r):l.shift()}o>0&&l.push(n[i].slice(0,o))}return l}function Z9(n,e){let t=-1;const r=[];let i;for(;++t<n.length;){const o=n[t];let l;if(typeof o=="string")l=o;else switch(o){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&i)continue;l=" ";break}default:l=String.fromCharCode(o)}i=o===-2,r.push(l)}return r.join("")}function eE(n){const r={constructs:v4([Q9,...(n||{}).extensions||[]]),content:i(m7),defined:[],document:i(y7),flow:i(D9),lazy:{},string:i(F9),text:i(B9)};return r;function i(o){return l;function l(u){return Y9(r,o,u)}}}function tE(n){for(;!b4(n););return n}const Jw=/[\0\t\n\r]/g;function nE(){let n=1,e="",t=!0,r;return i;function i(o,l,u){const f=[];let p,m,g,w,k;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(l||void 0).decode(o)),g=0,e="",t&&(o.charCodeAt(0)===65279&&g++,t=void 0);g<o.length;){if(Jw.lastIndex=g,p=Jw.exec(o),w=p&&p.index!==void 0?p.index:o.length,k=o.charCodeAt(w),!p){e=o.slice(g);break}if(k===10&&g===w&&r)f.push(-3),r=void 0;else switch(r&&(f.push(-5),r=void 0),g<w&&(f.push(o.slice(g,w)),n+=w-g),k){case 0:{f.push(65533),n++;break}case 9:{for(m=Math.ceil(n/4)*4,f.push(-2);n++<m;)f.push(-1);break}case 10:{f.push(-4),n=1;break}default:r=!0,n=1}g=w+1}return u&&(r&&f.push(-5),e&&f.push(e),f.push(null)),f}}const rE=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function N4(n){return n.replace(rE,iE)}function iE(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),o=i===120||i===88;return w4(t.slice(o?2:1),o?16:10)}return lv(t)||n}function Xd(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?Gw(n.position):"start"in n||"end"in n?Gw(n):"line"in n||"column"in n?v2(n):""}function v2(n){return Qw(n&&n.line)+":"+Qw(n&&n.column)}function Gw(n){return v2(n&&n.start)+"-"+v2(n&&n.end)}function Qw(n){return n&&typeof n=="number"?n:1}const A4={}.hasOwnProperty;function oE(n,e,t){return typeof e!="string"&&(t=e,e=void 0),sE(t)(tE(eE(t).document().write(nE()(n,e,!0))))}function sE(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Ji),autolinkProtocol:q,autolinkEmail:q,atxHeading:o(an),blockQuote:o(je),characterEscape:q,characterReference:q,codeFenced:o($e),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:o($e,l),codeText:o(pt,l),codeTextData:q,data:q,codeFlowValue:q,definition:o(ln),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:o(Pt),hardBreakEscape:o(Eo),hardBreakTrailing:o(Eo),htmlFlow:o(En,l),htmlFlowData:q,htmlText:o(En,l),htmlTextData:q,image:o(en),label:l,link:o(Ji),listItem:o(bt),listItemValue:w,listOrdered:o(kn,g),listUnordered:o(kn),paragraph:o(Nt),reference:N,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:o(an),strong:o(dr),thematicBreak:o(pr)},exit:{atxHeading:f(),atxHeadingSequence:B,autolink:f(),autolinkEmail:Me,autolinkProtocol:ke,blockQuote:f(),characterEscapeValue:_,characterReferenceMarkerHexadecimal:ee,characterReferenceMarkerNumeric:ee,characterReferenceValue:ne,characterReference:he,codeFenced:f(P),codeFencedFence:A,codeFencedFenceInfo:k,codeFencedFenceMeta:b,codeFlowValue:_,codeIndented:f(F),codeText:f(oe),codeTextData:_,data:_,definition:f(),definitionDestinationString:W,definitionLabelString:V,definitionTitleString:I,emphasis:f(),hardBreakEscape:f(D),hardBreakTrailing:f(D),htmlFlow:f(G),htmlFlowData:_,htmlText:f(le),htmlTextData:_,image:f(de),label:C,labelText:Y,lineEnding:U,link:f(ye),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:re,resourceDestinationString:x,resourceTitleString:M,resource:R,setextHeading:f(Q),setextHeadingLineSequence:H,setextHeadingText:z,strong:f(),thematicBreak:f()}};I4(e,(n||{}).mdastExtensions||[]);const t={};return r;function r(me){let Te={type:"root",children:[]};const Ue={stack:[Te],tokenStack:[],config:e,enter:u,exit:p,buffer:l,resume:m,data:t},rt=[];let ft=-1;for(;++ft<me.length;)if(me[ft][1].type==="listOrdered"||me[ft][1].type==="listUnordered")if(me[ft][0]==="enter")rt.push(ft);else{const un=rt.pop();ft=i(me,un,ft)}for(ft=-1;++ft<me.length;){const un=e[me[ft][0]];A4.call(un,me[ft][1].type)&&un[me[ft][1].type].call(Object.assign({sliceSerialize:me[ft][2].sliceSerialize},Ue),me[ft][1])}if(Ue.tokenStack.length>0){const un=Ue.tokenStack[Ue.tokenStack.length-1];(un[1]||Yw).call(Ue,void 0,un[0])}for(Te.position={start:Dl(me.length>0?me[0][1].start:{line:1,column:1,offset:0}),end:Dl(me.length>0?me[me.length-2][1].end:{line:1,column:1,offset:0})},ft=-1;++ft<e.transforms.length;)Te=e.transforms[ft](Te)||Te;return Te}function i(me,Te,Ue){let rt=Te-1,ft=-1,un=!1,ei,er,xi,Gi;for(;++rt<=Ue;){const cn=me[rt];switch(cn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{cn[0]==="enter"?ft++:ft--,Gi=void 0;break}case"lineEndingBlank":{cn[0]==="enter"&&(ei&&!Gi&&!ft&&!xi&&(xi=rt),Gi=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Gi=void 0}if(!ft&&cn[0]==="enter"&&cn[1].type==="listItemPrefix"||ft===-1&&cn[0]==="exit"&&(cn[1].type==="listUnordered"||cn[1].type==="listOrdered")){if(ei){let Mr=rt;for(er=void 0;Mr--;){const mr=me[Mr];if(mr[1].type==="lineEnding"||mr[1].type==="lineEndingBlank"){if(mr[0]==="exit")continue;er&&(me[er][1].type="lineEndingBlank",un=!0),mr[1].type="lineEnding",er=Mr}else if(!(mr[1].type==="linePrefix"||mr[1].type==="blockQuotePrefix"||mr[1].type==="blockQuotePrefixWhitespace"||mr[1].type==="blockQuoteMarker"||mr[1].type==="listItemIndent"))break}xi&&(!er||xi<er)&&(ei._spread=!0),ei.end=Object.assign({},er?me[er][1].start:cn[1].end),me.splice(er||rt,0,["exit",ei,cn[2]]),rt++,Ue++}if(cn[1].type==="listItemPrefix"){const Mr={type:"listItem",_spread:!1,start:Object.assign({},cn[1].start),end:void 0};ei=Mr,me.splice(rt,0,["enter",Mr,cn[2]]),rt++,Ue++,xi=void 0,Gi=!0}}}return me[Te][1]._spread=un,Ue}function o(me,Te){return Ue;function Ue(rt){u.call(this,me(rt),rt),Te&&Te.call(this,rt)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(me,Te,Ue){this.stack[this.stack.length-1].children.push(me),this.stack.push(me),this.tokenStack.push([Te,Ue||void 0]),me.position={start:Dl(Te.start),end:void 0}}function f(me){return Te;function Te(Ue){me&&me.call(this,Ue),p.call(this,Ue)}}function p(me,Te){const Ue=this.stack.pop(),rt=this.tokenStack.pop();if(rt)rt[0].type!==me.type&&(Te?Te.call(this,me,rt[0]):(rt[1]||Yw).call(this,me,rt[0]));else throw new Error("Cannot close `"+me.type+"` ("+Xd({start:me.start,end:me.end})+"): it’s not open");Ue.position.end=Dl(me.end)}function m(){return sv(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function w(me){if(this.data.expectingFirstListItemValue){const Te=this.stack[this.stack.length-2];Te.start=Number.parseInt(this.sliceSerialize(me),10),this.data.expectingFirstListItemValue=void 0}}function k(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.lang=me}function b(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.meta=me}function A(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function P(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.value=me.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function F(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.value=me.replace(/(\r?\n|\r)$/g,"")}function V(me){const Te=this.resume(),Ue=this.stack[this.stack.length-1];Ue.label=Te,Ue.identifier=ko(this.sliceSerialize(me)).toLowerCase()}function I(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.title=me}function W(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.url=me}function B(me){const Te=this.stack[this.stack.length-1];if(!Te.depth){const Ue=this.sliceSerialize(me).length;Te.depth=Ue}}function z(){this.data.setextHeadingSlurpLineEnding=!0}function H(me){const Te=this.stack[this.stack.length-1];Te.depth=this.sliceSerialize(me).codePointAt(0)===61?1:2}function Q(){this.data.setextHeadingSlurpLineEnding=void 0}function q(me){const Ue=this.stack[this.stack.length-1].children;let rt=Ue[Ue.length-1];(!rt||rt.type!=="text")&&(rt=fs(),rt.position={start:Dl(me.start),end:void 0},Ue.push(rt)),this.stack.push(rt)}function _(me){const Te=this.stack.pop();Te.value+=this.sliceSerialize(me),Te.position.end=Dl(me.end)}function U(me){const Te=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ue=Te.children[Te.children.length-1];Ue.position.end=Dl(me.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Te.type)&&(q.call(this,me),_.call(this,me))}function D(){this.data.atHardBreak=!0}function G(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.value=me}function le(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.value=me}function oe(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.value=me}function ye(){const me=this.stack[this.stack.length-1];if(this.data.inReference){const Te=this.data.referenceType||"shortcut";me.type+="Reference",me.referenceType=Te,delete me.url,delete me.title}else delete me.identifier,delete me.label;this.data.referenceType=void 0}function de(){const me=this.stack[this.stack.length-1];if(this.data.inReference){const Te=this.data.referenceType||"shortcut";me.type+="Reference",me.referenceType=Te,delete me.url,delete me.title}else delete me.identifier,delete me.label;this.data.referenceType=void 0}function Y(me){const Te=this.sliceSerialize(me),Ue=this.stack[this.stack.length-2];Ue.label=N4(Te),Ue.identifier=ko(Te).toLowerCase()}function C(){const me=this.stack[this.stack.length-1],Te=this.resume(),Ue=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ue.type==="link"){const rt=me.children;Ue.children=rt}else Ue.alt=Te}function x(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.url=me}function M(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.title=me}function R(){this.data.inReference=void 0}function N(){this.data.referenceType="collapsed"}function re(me){const Te=this.resume(),Ue=this.stack[this.stack.length-1];Ue.label=Te,Ue.identifier=ko(this.sliceSerialize(me)).toLowerCase(),this.data.referenceType="full"}function ee(me){this.data.characterReferenceType=me.type}function ne(me){const Te=this.sliceSerialize(me),Ue=this.data.characterReferenceType;let rt;Ue?(rt=w4(Te,Ue==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):rt=lv(Te);const ft=this.stack[this.stack.length-1];ft.value+=rt}function he(me){const Te=this.stack.pop();Te.position.end=Dl(me.end)}function ke(me){_.call(this,me);const Te=this.stack[this.stack.length-1];Te.url=this.sliceSerialize(me)}function Me(me){_.call(this,me);const Te=this.stack[this.stack.length-1];Te.url="mailto:"+this.sliceSerialize(me)}function je(){return{type:"blockquote",children:[]}}function $e(){return{type:"code",lang:null,meta:null,value:""}}function pt(){return{type:"inlineCode",value:""}}function ln(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Pt(){return{type:"emphasis",children:[]}}function an(){return{type:"heading",depth:0,children:[]}}function Eo(){return{type:"break"}}function En(){return{type:"html",value:""}}function en(){return{type:"image",title:null,url:"",alt:null}}function Ji(){return{type:"link",title:null,url:"",children:[]}}function kn(me){return{type:"list",ordered:me.type==="listOrdered",start:null,spread:me._spread,children:[]}}function bt(me){return{type:"listItem",spread:me._spread,checked:null,children:[]}}function Nt(){return{type:"paragraph",children:[]}}function dr(){return{type:"strong",children:[]}}function fs(){return{type:"text",value:""}}function pr(){return{type:"thematicBreak"}}}function Dl(n){return{line:n.line,column:n.column,offset:n.offset}}function I4(n,e){let t=-1;for(;++t<e.length;){const r=e[t];Array.isArray(r)?I4(n,r):lE(n,r)}}function lE(n,e){let t;for(t in e)if(A4.call(e,t))switch(t){case"canContainEols":{const r=e[t];r&&n[t].push(...r);break}case"transforms":{const r=e[t];r&&n[t].push(...r);break}case"enter":case"exit":{const r=e[t];r&&Object.assign(n[t],r);break}}}function Yw(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+Xd({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+Xd({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Xd({start:e.start,end:e.end})+") is still open")}function w2(n){const e=this;e.parser=t;function t(r){return oE(r,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}const Xw={}.hasOwnProperty;function aE(n,e){const t=e||{};function r(i,...o){let l=r.invalid;const u=r.handlers;if(i&&Xw.call(i,n)){const f=String(i[n]);l=Xw.call(u,f)?u[f]:r.unknown}if(l)return l.call(this,i,...o)}return r.handlers=t.handlers||{},r.invalid=t.invalid,r.unknown=t.unknown,r}const uE={}.hasOwnProperty;function O4(n,e){let t=-1,r;if(e.extensions)for(;++t<e.extensions.length;)O4(n,e.extensions[t]);for(r in e)if(uE.call(e,r))switch(r){case"extensions":break;case"unsafe":{Zw(n[r],e[r]);break}case"join":{Zw(n[r],e[r]);break}case"handlers":{cE(n[r],e[r]);break}default:n.options[r]=e[r]}return n}function Zw(n,e){e&&n.push(...e)}function cE(n,e){e&&Object.assign(n,e)}function fE(n,e,t,r){const i=t.enter("blockquote"),o=t.createTracker(r);o.move("> "),o.shift(2);const l=t.indentLines(t.containerFlow(n,o.current()),hE);return i(),l}function hE(n,e,t){return">"+(t?"":" ")+n}function P4(n,e){return ek(n,e.inConstruct,!0)&&!ek(n,e.notInConstruct,!1)}function ek(n,e,t){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return t;let r=-1;for(;++r<e.length;)if(n.includes(e[r]))return!0;return!1}function tk(n,e,t,r){let i=-1;for(;++i<t.unsafe.length;)if(t.unsafe[i].character===`
`&&P4(t.stack,t.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function dE(n,e){const t=String(n);let r=t.indexOf(e),i=r,o=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>l&&(l=o):o=1,i=r+e.length,r=t.indexOf(e,i);return l}function k2(n,e){return!!(e.options.fences===!1&&n.value&&!n.lang&&/[^ \r\n]/.test(n.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(n.value))}function pE(n){const e=n.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function mE(n,e,t,r){const i=pE(t),o=n.value||"",l=i==="`"?"GraveAccent":"Tilde";if(k2(n,t)){const g=t.enter("codeIndented"),w=t.indentLines(o,gE);return g(),w}const u=t.createTracker(r),f=i.repeat(Math.max(dE(o,i)+1,3)),p=t.enter("codeFenced");let m=u.move(f);if(n.lang){const g=t.enter(`codeFencedLang${l}`);m+=u.move(t.safe(n.lang,{before:m,after:" ",encode:["`"],...u.current()})),g()}if(n.lang&&n.meta){const g=t.enter(`codeFencedMeta${l}`);m+=u.move(" "),m+=u.move(t.safe(n.meta,{before:m,after:`
`,encode:["`"],...u.current()})),g()}return m+=u.move(`
`),o&&(m+=u.move(o+`
`)),m+=u.move(f),p(),m}function gE(n,e,t){return(t?"":"    ")+n}function uv(n){const e=n.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function yE(n,e,t,r){const i=uv(t),o=i==='"'?"Quote":"Apostrophe",l=t.enter("definition");let u=t.enter("label");const f=t.createTracker(r);let p=f.move("[");return p+=f.move(t.safe(t.associationId(n),{before:p,after:"]",...f.current()})),p+=f.move("]: "),u(),!n.url||/[\0- \u007F]/.test(n.url)?(u=t.enter("destinationLiteral"),p+=f.move("<"),p+=f.move(t.safe(n.url,{before:p,after:">",...f.current()})),p+=f.move(">")):(u=t.enter("destinationRaw"),p+=f.move(t.safe(n.url,{before:p,after:n.title?" ":`
`,...f.current()}))),u(),n.title&&(u=t.enter(`title${o}`),p+=f.move(" "+i),p+=f.move(t.safe(n.title,{before:p,after:i,...f.current()})),p+=f.move(i),u()),l(),p}function vE(n){const e=n.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function ta(n){return"&#x"+n.toString(16).toUpperCase()+";"}function S1(n,e,t){const r=Ff(n),i=Ff(e);return r===void 0?i===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}R4.peek=wE;function R4(n,e,t,r){const i=vE(t),o=t.enter("emphasis"),l=t.createTracker(r),u=l.move(i);let f=l.move(t.containerPhrasing(n,{after:i,before:u,...l.current()}));const p=f.charCodeAt(0),m=S1(r.before.charCodeAt(r.before.length-1),p,i);m.inside&&(f=ta(p)+f.slice(1));const g=f.charCodeAt(f.length-1),w=S1(r.after.charCodeAt(0),g,i);w.inside&&(f=f.slice(0,-1)+ta(g));const k=l.move(i);return o(),t.attentionEncodeSurroundingInfo={after:w.outside,before:m.outside},u+f+k}function wE(n,e,t){return t.options.emphasis||"*"}const B1=function(n){if(n==null)return bE;if(typeof n=="function")return U1(n);if(typeof n=="object")return Array.isArray(n)?kE(n):xE(n);if(typeof n=="string")return SE(n);throw new Error("Expected function, string, or object as test")};function kE(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=B1(n[t]);return U1(r);function r(...i){let o=-1;for(;++o<e.length;)if(e[o].apply(this,i))return!0;return!1}}function xE(n){const e=n;return U1(t);function t(r){const i=r;let o;for(o in n)if(i[o]!==e[o])return!1;return!0}}function SE(n){return U1(e);function e(t){return t&&t.type===n}}function U1(n){return e;function e(t,r,i){return!!(_E(t)&&n.call(this,t,typeof r=="number"?r:void 0,i||void 0))}}function bE(){return!0}function _E(n){return n!==null&&typeof n=="object"&&"type"in n}const D4=[],CE=!0,x2=!1,S2="skip";function z4(n,e,t,r){let i;typeof e=="function"&&typeof t!="function"?(r=t,t=e):i=e;const o=B1(i),l=r?-1:1;u(n,void 0,[])();function u(f,p,m){const g=f&&typeof f=="object"?f:{};if(typeof g.type=="string"){const k=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(w,"name",{value:"node ("+(f.type+(k?"<"+k+">":""))+")"})}return w;function w(){let k=D4,b,A,P;if((!e||o(f,p,m[m.length-1]||void 0))&&(k=EE(t(f,m)),k[0]===x2))return k;if("children"in f&&f.children){const F=f;if(F.children&&k[0]!==S2)for(A=(r?F.children.length:-1)+l,P=m.concat(F);A>-1&&A<F.children.length;){const V=F.children[A];if(b=u(V,A,P)(),b[0]===x2)return b;A=typeof b[1]=="number"?b[1]:A+l}}return k}}}function EE(n){return Array.isArray(n)?n:typeof n=="number"?[CE,n]:n==null?D4:[n]}function Lu(n,e,t,r){let i,o,l;typeof e=="function"&&typeof t!="function"?(o=void 0,l=e,i=t):(o=e,l=t,i=r),z4(n,o,u,i);function u(f,p){const m=p[p.length-1],g=m?m.children.indexOf(f):void 0;return l(f,g,m)}}function L4(n,e){let t=!1;return Lu(n,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return t=!0,x2}),!!((!n.depth||n.depth<3)&&sv(n)&&(e.options.setext||t))}function TE(n,e,t,r){const i=Math.max(Math.min(6,n.depth||1),1),o=t.createTracker(r);if(L4(n,t)){const m=t.enter("headingSetext"),g=t.enter("phrasing"),w=t.containerPhrasing(n,{...o.current(),before:`
`,after:`
`});return g(),m(),w+`
`+(i===1?"=":"-").repeat(w.length-(Math.max(w.lastIndexOf("\r"),w.lastIndexOf(`
`))+1))}const l="#".repeat(i),u=t.enter("headingAtx"),f=t.enter("phrasing");o.move(l+" ");let p=t.containerPhrasing(n,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(p)&&(p=ta(p.charCodeAt(0))+p.slice(1)),p=p?l+" "+p:l,t.options.closeAtx&&(p+=" "+l),f(),u(),p}F4.peek=ME;function F4(n){return n.value||""}function ME(){return"<"}B4.peek=NE;function B4(n,e,t,r){const i=uv(t),o=i==='"'?"Quote":"Apostrophe",l=t.enter("image");let u=t.enter("label");const f=t.createTracker(r);let p=f.move("![");return p+=f.move(t.safe(n.alt,{before:p,after:"]",...f.current()})),p+=f.move("]("),u(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(u=t.enter("destinationLiteral"),p+=f.move("<"),p+=f.move(t.safe(n.url,{before:p,after:">",...f.current()})),p+=f.move(">")):(u=t.enter("destinationRaw"),p+=f.move(t.safe(n.url,{before:p,after:n.title?" ":")",...f.current()}))),u(),n.title&&(u=t.enter(`title${o}`),p+=f.move(" "+i),p+=f.move(t.safe(n.title,{before:p,after:i,...f.current()})),p+=f.move(i),u()),p+=f.move(")"),l(),p}function NE(){return"!"}U4.peek=AE;function U4(n,e,t,r){const i=n.referenceType,o=t.enter("imageReference");let l=t.enter("label");const u=t.createTracker(r);let f=u.move("![");const p=t.safe(n.alt,{before:f,after:"]",...u.current()});f+=u.move(p+"]["),l();const m=t.stack;t.stack=[],l=t.enter("reference");const g=t.safe(t.associationId(n),{before:f,after:"]",...u.current()});return l(),t.stack=m,o(),i==="full"||!p||p!==g?f+=u.move(g+"]"):i==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function AE(){return"!"}W4.peek=IE;function W4(n,e,t){let r=n.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<t.unsafe.length;){const l=t.unsafe[o],u=t.compilePattern(l);let f;if(l.atBreak)for(;f=u.exec(r);){let p=f.index;r.charCodeAt(p)===10&&r.charCodeAt(p-1)===13&&p--,r=r.slice(0,p)+" "+r.slice(f.index+1)}}return i+r+i}function IE(){return"`"}function j4(n,e){const t=sv(n);return!!(!e.options.resourceLink&&n.url&&!n.title&&n.children&&n.children.length===1&&n.children[0].type==="text"&&(t===n.url||"mailto:"+t===n.url)&&/^[a-z][a-z+.-]+:/i.test(n.url)&&!/[\0- <>\u007F]/.test(n.url))}$4.peek=OE;function $4(n,e,t,r){const i=uv(t),o=i==='"'?"Quote":"Apostrophe",l=t.createTracker(r);let u,f;if(j4(n,t)){const m=t.stack;t.stack=[],u=t.enter("autolink");let g=l.move("<");return g+=l.move(t.containerPhrasing(n,{before:g,after:">",...l.current()})),g+=l.move(">"),u(),t.stack=m,g}u=t.enter("link"),f=t.enter("label");let p=l.move("[");return p+=l.move(t.containerPhrasing(n,{before:p,after:"](",...l.current()})),p+=l.move("]("),f(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(f=t.enter("destinationLiteral"),p+=l.move("<"),p+=l.move(t.safe(n.url,{before:p,after:">",...l.current()})),p+=l.move(">")):(f=t.enter("destinationRaw"),p+=l.move(t.safe(n.url,{before:p,after:n.title?" ":")",...l.current()}))),f(),n.title&&(f=t.enter(`title${o}`),p+=l.move(" "+i),p+=l.move(t.safe(n.title,{before:p,after:i,...l.current()})),p+=l.move(i),f()),p+=l.move(")"),u(),p}function OE(n,e,t){return j4(n,t)?"<":"["}H4.peek=PE;function H4(n,e,t,r){const i=n.referenceType,o=t.enter("linkReference");let l=t.enter("label");const u=t.createTracker(r);let f=u.move("[");const p=t.containerPhrasing(n,{before:f,after:"]",...u.current()});f+=u.move(p+"]["),l();const m=t.stack;t.stack=[],l=t.enter("reference");const g=t.safe(t.associationId(n),{before:f,after:"]",...u.current()});return l(),t.stack=m,o(),i==="full"||!p||p!==g?f+=u.move(g+"]"):i==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function PE(){return"["}function cv(n){const e=n.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function RE(n){const e=cv(n),t=n.options.bulletOther;if(!t)return e==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+t+"`) to be different");return t}function DE(n){const e=n.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function V4(n){const e=n.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function zE(n,e,t,r){const i=t.enter("list"),o=t.bulletCurrent;let l=n.ordered?DE(t):cv(t);const u=n.ordered?l==="."?")":".":RE(t);let f=e&&t.bulletLastUsed?l===t.bulletLastUsed:!1;if(!n.ordered){const m=n.children?n.children[0]:void 0;if((l==="*"||l==="-")&&m&&(!m.children||!m.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(f=!0),V4(t)===l&&m){let g=-1;for(;++g<n.children.length;){const w=n.children[g];if(w&&w.type==="listItem"&&w.children&&w.children[0]&&w.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=u),t.bulletCurrent=l;const p=t.containerFlow(n,r);return t.bulletLastUsed=l,t.bulletCurrent=o,i(),p}function LE(n){const e=n.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function FE(n,e,t,r){const i=LE(t);let o=t.bulletCurrent||cv(t);e&&e.type==="list"&&e.ordered&&(o=(typeof e.start=="number"&&e.start>-1?e.start:1)+(t.options.incrementListMarker===!1?0:e.children.indexOf(n))+o);let l=o.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||n.spread))&&(l=Math.ceil(l/4)*4);const u=t.createTracker(r);u.move(o+" ".repeat(l-o.length)),u.shift(l);const f=t.enter("listItem"),p=t.indentLines(t.containerFlow(n,u.current()),m);return f(),p;function m(g,w,k){return w?(k?"":" ".repeat(l))+g:(k?o:o+" ".repeat(l-o.length))+g}}function BE(n,e,t,r){const i=t.enter("paragraph"),o=t.enter("phrasing"),l=t.containerPhrasing(n,r);return o(),i(),l}const UE=B1(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function WE(n,e,t,r){return(n.children.some(function(l){return UE(l)})?t.containerPhrasing:t.containerFlow).call(t,n,r)}function jE(n){const e=n.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}q4.peek=$E;function q4(n,e,t,r){const i=jE(t),o=t.enter("strong"),l=t.createTracker(r),u=l.move(i+i);let f=l.move(t.containerPhrasing(n,{after:i,before:u,...l.current()}));const p=f.charCodeAt(0),m=S1(r.before.charCodeAt(r.before.length-1),p,i);m.inside&&(f=ta(p)+f.slice(1));const g=f.charCodeAt(f.length-1),w=S1(r.after.charCodeAt(0),g,i);w.inside&&(f=f.slice(0,-1)+ta(g));const k=l.move(i+i);return o(),t.attentionEncodeSurroundingInfo={after:w.outside,before:m.outside},u+f+k}function $E(n,e,t){return t.options.strong||"*"}function HE(n,e,t,r){return t.safe(n.value,r)}function VE(n){const e=n.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function qE(n,e,t){const r=(V4(t)+(t.options.ruleSpaces?" ":"")).repeat(VE(t));return t.options.ruleSpaces?r.slice(0,-1):r}const fv={blockquote:fE,break:tk,code:mE,definition:yE,emphasis:R4,hardBreak:tk,heading:TE,html:F4,image:B4,imageReference:U4,inlineCode:W4,link:$4,linkReference:H4,list:zE,listItem:FE,paragraph:BE,root:WE,strong:q4,text:HE,thematicBreak:qE},KE=[JE];function JE(n,e,t,r){if(e.type==="code"&&k2(e,r)&&(n.type==="list"||n.type===e.type&&k2(n,r)))return!1;if("spread"in t&&typeof t.spread=="boolean")return n.type==="paragraph"&&(n.type===e.type||e.type==="definition"||e.type==="heading"&&L4(e,r))?void 0:t.spread?1:0}const lu=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],GE=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:lu},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:lu},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:lu},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:lu},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:lu},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:lu},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:lu},{atBreak:!0,character:"~"}];function QE(n){return n.label||!n.identifier?n.label||"":N4(n.identifier)}function YE(n){if(!n._compiled){const e=(n.atBreak?"[\\r\\n][\\t ]*":"")+(n.before?"(?:"+n.before+")":"");n._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(n.character)?"\\":"")+n.character+(n.after?"(?:"+n.after+")":""),"g")}return n._compiled}function XE(n,e,t){const r=e.indexStack,i=n.children||[],o=[];let l=-1,u=t.before,f;r.push(-1);let p=e.createTracker(t);for(;++l<i.length;){const m=i[l];let g;if(r[r.length-1]=l,l+1<i.length){let b=e.handle.handlers[i[l+1].type];b&&b.peek&&(b=b.peek),g=b?b(i[l+1],n,e,{before:"",after:"",...p.current()}).charAt(0):""}else g=t.after;o.length>0&&(u==="\r"||u===`
`)&&m.type==="html"&&(o[o.length-1]=o[o.length-1].replace(/(\r?\n|\r)$/," "),u=" ",p=e.createTracker(t),p.move(o.join("")));let w=e.handle(m,n,e,{...p.current(),after:g,before:u});f&&f===w.slice(0,1)&&(w=ta(f.charCodeAt(0))+w.slice(1));const k=e.attentionEncodeSurroundingInfo;e.attentionEncodeSurroundingInfo=void 0,f=void 0,k&&(o.length>0&&k.before&&u===o[o.length-1].slice(-1)&&(o[o.length-1]=o[o.length-1].slice(0,-1)+ta(u.charCodeAt(0))),k.after&&(f=g)),p.move(w),o.push(w),u=w.slice(-1)}return r.pop(),o.join("")}function ZE(n,e,t){const r=e.indexStack,i=n.children||[],o=e.createTracker(t),l=[];let u=-1;for(r.push(-1);++u<i.length;){const f=i[u];r[r.length-1]=u,l.push(o.move(e.handle(f,n,e,{before:`
`,after:`
`,...o.current()}))),f.type!=="list"&&(e.bulletLastUsed=void 0),u<i.length-1&&l.push(o.move(eT(f,i[u+1],n,e)))}return r.pop(),l.join("")}function eT(n,e,t,r){let i=r.join.length;for(;i--;){const o=r.join[i](n,e,t,r);if(o===!0||o===1)break;if(typeof o=="number")return`
`.repeat(1+o);if(o===!1)return`

<!---->

`}return`

`}const tT=/\r?\n|\r/g;function nT(n,e){const t=[];let r=0,i=0,o;for(;o=tT.exec(n);)l(n.slice(r,o.index)),t.push(o[0]),r=o.index+o[0].length,i++;return l(n.slice(r)),t.join("");function l(u){t.push(e(u,i,!u))}}function rT(n,e,t){const r=(t.before||"")+(e||"")+(t.after||""),i=[],o=[],l={};let u=-1;for(;++u<n.unsafe.length;){const m=n.unsafe[u];if(!P4(n.stack,m))continue;const g=n.compilePattern(m);let w;for(;w=g.exec(r);){const k="before"in m||!!m.atBreak,b="after"in m,A=w.index+(k?w[1].length:0);i.includes(A)?(l[A].before&&!k&&(l[A].before=!1),l[A].after&&!b&&(l[A].after=!1)):(i.push(A),l[A]={before:k,after:b})}}i.sort(iT);let f=t.before?t.before.length:0;const p=r.length-(t.after?t.after.length:0);for(u=-1;++u<i.length;){const m=i[u];m<f||m>=p||m+1<p&&i[u+1]===m+1&&l[m].after&&!l[m+1].before&&!l[m+1].after||i[u-1]===m-1&&l[m].before&&!l[m-1].before&&!l[m-1].after||(f!==m&&o.push(nk(r.slice(f,m),"\\")),f=m,/[!-/:-@[-`{-~]/.test(r.charAt(m))&&(!t.encode||!t.encode.includes(r.charAt(m)))?o.push("\\"):(o.push(ta(r.charCodeAt(m))),f++))}return o.push(nk(r.slice(f,p),t.after)),o.join("")}function iT(n,e){return n-e}function nk(n,e){const t=/\\(?=[!-/:-@[-`{-~])/g,r=[],i=[],o=n+e;let l=-1,u=0,f;for(;f=t.exec(o);)r.push(f.index);for(;++l<r.length;)u!==r[l]&&i.push(n.slice(u,r[l])),i.push("\\"),u=r[l];return i.push(n.slice(u)),i.join("")}function oT(n){const e=n||{},t=e.now||{};let r=e.lineShift||0,i=t.line||1,o=t.column||1;return{move:f,current:l,shift:u};function l(){return{now:{line:i,column:o},lineShift:r}}function u(p){r+=p}function f(p){const m=p||"",g=m.split(/\r?\n|\r/g),w=g[g.length-1];return i+=g.length-1,o=g.length===1?o+w.length:1+w.length+r,m}}function sT(n,e){const t=e||{},r={associationId:QE,containerPhrasing:cT,containerFlow:fT,createTracker:oT,compilePattern:YE,enter:o,handlers:{...fv},handle:void 0,indentLines:nT,indexStack:[],join:[...KE],options:{},safe:hT,stack:[],unsafe:[...GE]};O4(r,t),r.options.tightDefinitions&&r.join.push(uT),r.handle=aE("type",{invalid:lT,unknown:aT,handlers:r.handlers});let i=r.handle(n,void 0,r,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return i&&i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i;function o(l){return r.stack.push(l),u;function u(){r.stack.pop()}}}function lT(n){throw new Error("Cannot handle value `"+n+"`, expected node")}function aT(n){const e=n;throw new Error("Cannot handle unknown node `"+e.type+"`")}function uT(n,e){if(n.type==="definition"&&n.type===e.type)return 0}function cT(n,e){return XE(n,this,e)}function fT(n,e){return ZE(n,this,e)}function hT(n,e){return rT(this,n,e)}function b2(n){const e=this;e.compiler=t;function t(r){return sT(r,{...e.data("settings"),...n,extensions:e.data("toMarkdownExtensions")||[]})}}function rk(n){if(n)throw n}var ky,ik;function dT(){if(ik)return ky;ik=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(p){return typeof Array.isArray=="function"?Array.isArray(p):e.call(p)==="[object Array]"},o=function(p){if(!p||e.call(p)!=="[object Object]")return!1;var m=n.call(p,"constructor"),g=p.constructor&&p.constructor.prototype&&n.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!m&&!g)return!1;var w;for(w in p);return typeof w>"u"||n.call(p,w)},l=function(p,m){t&&m.name==="__proto__"?t(p,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):p[m.name]=m.newValue},u=function(p,m){if(m==="__proto__")if(n.call(p,m)){if(r)return r(p,m).value}else return;return p[m]};return ky=function f(){var p,m,g,w,k,b,A=arguments[0],P=1,F=arguments.length,V=!1;for(typeof A=="boolean"&&(V=A,A=arguments[1]||{},P=2),(A==null||typeof A!="object"&&typeof A!="function")&&(A={});P<F;++P)if(p=arguments[P],p!=null)for(m in p)g=u(A,m),w=u(p,m),A!==w&&(V&&w&&(o(w)||(k=i(w)))?(k?(k=!1,b=g&&i(g)?g:[]):b=g&&o(g)?g:{},l(A,{name:m,newValue:f(V,b,w)})):typeof w<"u"&&l(A,{name:m,newValue:w}));return A},ky}var pT=dT();const xy=Sp(pT);function GR(){}function _2(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function mT(){const n=[],e={run:t,use:r};return e;function t(...i){let o=-1;const l=i.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...i);function u(f,...p){const m=n[++o];let g=-1;if(f){l(f);return}for(;++g<i.length;)(p[g]===null||p[g]===void 0)&&(p[g]=i[g]);i=p,m?gT(m,u)(...p):l(null,...p)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return n.push(i),e}}function gT(n,e){let t;return r;function r(...l){const u=n.length>l.length;let f;u&&l.push(i);try{f=n.apply(this,l)}catch(p){const m=p;if(u&&t)throw m;return i(m)}u||(f&&f.then&&typeof f.then=="function"?f.then(o,i):f instanceof Error?i(f):o(f))}function i(l,...u){t||(t=!0,e(l,...u))}function o(l){i(null,l)}}class Qr extends Error{constructor(e,t,r){super(),typeof t=="string"&&(r=t,t=void 0);let i="",o={},l=!1;if(t&&("line"in t&&"column"in t?o={place:t}:"start"in t&&"end"in t?o={place:t}:"type"in t?o={ancestors:[t],place:t.position}:o={...t}),typeof e=="string"?i=e:!o.cause&&e&&(l=!0,i=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof r=="string"){const f=r.indexOf(":");f===-1?o.ruleId=r:(o.source=r.slice(0,f),o.ruleId=r.slice(f+1))}if(!o.place&&o.ancestors&&o.ancestors){const f=o.ancestors[o.ancestors.length-1];f&&(o.place=f.position)}const u=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=u?u.line:void 0,this.name=Xd(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=l&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}Qr.prototype.file="";Qr.prototype.name="";Qr.prototype.reason="";Qr.prototype.message="";Qr.prototype.stack="";Qr.prototype.column=void 0;Qr.prototype.line=void 0;Qr.prototype.ancestors=void 0;Qr.prototype.cause=void 0;Qr.prototype.fatal=void 0;Qr.prototype.place=void 0;Qr.prototype.ruleId=void 0;Qr.prototype.source=void 0;const ts={basename:yT,dirname:vT,extname:wT,join:kT,sep:"/"};function yT(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Cp(n);let t=0,r=-1,i=n.length,o;if(e===void 0||e.length===0||e.length>n.length){for(;i--;)if(n.codePointAt(i)===47){if(o){t=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":n.slice(t,r)}if(e===n)return"";let l=-1,u=e.length-1;for(;i--;)if(n.codePointAt(i)===47){if(o){t=i+1;break}}else l<0&&(o=!0,l=i+1),u>-1&&(n.codePointAt(i)===e.codePointAt(u--)?u<0&&(r=i):(u=-1,r=l));return t===r?r=l:r<0&&(r=n.length),n.slice(t,r)}function vT(n){if(Cp(n),n.length===0)return".";let e=-1,t=n.length,r;for(;--t;)if(n.codePointAt(t)===47){if(r){e=t;break}}else r||(r=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function wT(n){Cp(n);let e=n.length,t=-1,r=0,i=-1,o=0,l;for(;e--;){const u=n.codePointAt(e);if(u===47){if(l){r=e+1;break}continue}t<0&&(l=!0,t=e+1),u===46?i<0?i=e:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||t<0||o===0||o===1&&i===t-1&&i===r+1?"":n.slice(i,t)}function kT(...n){let e=-1,t;for(;++e<n.length;)Cp(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":xT(t)}function xT(n){Cp(n);const e=n.codePointAt(0)===47;let t=ST(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function ST(n,e){let t="",r=0,i=-1,o=0,l=-1,u,f;for(;++l<=n.length;){if(l<n.length)u=n.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(i===l-1||o===1))if(i!==l-1&&o===2){if(t.length<2||r!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(f=t.lastIndexOf("/"),f!==t.length-1){f<0?(t="",r=0):(t=t.slice(0,f),r=t.length-1-t.lastIndexOf("/")),i=l,o=0;continue}}else if(t.length>0){t="",r=0,i=l,o=0;continue}}e&&(t=t.length>0?t+"/..":"..",r=2)}else t.length>0?t+="/"+n.slice(i+1,l):t=n.slice(i+1,l),r=l-i-1;i=l,o=0}else u===46&&o>-1?o++:o=-1}return t}function Cp(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const bT={cwd:_T};function _T(){return"/"}function C2(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function CT(n){if(typeof n=="string")n=new URL(n);else if(!C2(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return ET(n)}function ET(n){if(n.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const r=e.codePointAt(t+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const Sy=["history","path","basename","stem","extname","dirname"];class TT{constructor(e){let t;e?C2(e)?t={path:e}:typeof e=="string"||MT(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":bT.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Sy.length;){const o=Sy[r];o in t&&t[o]!==void 0&&t[o]!==null&&(this[o]=o==="history"?[...t[o]]:t[o])}let i;for(i in t)Sy.includes(i)||(this[i]=t[i])}get basename(){return typeof this.path=="string"?ts.basename(this.path):void 0}set basename(e){_y(e,"basename"),by(e,"basename"),this.path=ts.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?ts.dirname(this.path):void 0}set dirname(e){ok(this.basename,"dirname"),this.path=ts.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?ts.extname(this.path):void 0}set extname(e){if(by(e,"extname"),ok(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ts.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){C2(e)&&(e=CT(e)),_y(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?ts.basename(this.path,this.extname):void 0}set stem(e){_y(e,"stem"),by(e,"stem"),this.path=ts.join(this.dirname||"",e+(this.extname||""))}fail(e,t,r){const i=this.message(e,t,r);throw i.fatal=!0,i}info(e,t,r){const i=this.message(e,t,r);return i.fatal=void 0,i}message(e,t,r){const i=new Qr(e,t,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function by(n,e){if(n&&n.includes(ts.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+ts.sep+"`")}function _y(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function ok(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function MT(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const NT=function(n){const r=this.constructor.prototype,i=r[n],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o},AT={}.hasOwnProperty;class hv extends NT{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=mT()}copy(){const e=new hv;let t=-1;for(;++t<this.attachers.length;){const r=this.attachers[t];e.use(...r)}return e.data(xy(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(Ty("data",this.frozen),this.namespace[e]=t,this):AT.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Ty("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=t.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=_m(e),r=this.parser||this.Parser;return Cy("parse",r),r(String(t),t)}process(e,t){const r=this;return this.freeze(),Cy("process",this.parser||this.Parser),Ey("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(o,l){const u=_m(e),f=r.parse(u);r.run(f,u,function(m,g,w){if(m||!g||!w)return p(m);const k=g,b=r.stringify(k,w);OT(b)?w.value=b:w.result=b,p(m,w)});function p(m,g){m||!g?l(m):o?o(g):t(void 0,g)}}}processSync(e){let t=!1,r;return this.freeze(),Cy("processSync",this.parser||this.Parser),Ey("processSync",this.compiler||this.Compiler),this.process(e,i),lk("processSync","process",t),r;function i(o,l){t=!0,rk(o),r=l}}run(e,t,r){sk(e),this.freeze();const i=this.transformers;return!r&&typeof t=="function"&&(r=t,t=void 0),r?o(void 0,r):new Promise(o);function o(l,u){const f=_m(t);i.run(e,f,p);function p(m,g,w){const k=g||e;m?u(m):l?l(k):r(void 0,k,w)}}}runSync(e,t){let r=!1,i;return this.run(e,t,o),lk("runSync","run",r),i;function o(l,u){rk(l),i=u,r=!0}}stringify(e,t){this.freeze();const r=_m(t),i=this.compiler||this.Compiler;return Ey("stringify",i),sk(e),i(e,r)}use(e,...t){const r=this.attachers,i=this.namespace;if(Ty("use",this.frozen),e!=null)if(typeof e=="function")f(e,t);else if(typeof e=="object")Array.isArray(e)?u(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(p){if(typeof p=="function")f(p,[]);else if(typeof p=="object")if(Array.isArray(p)){const[m,...g]=p;f(m,g)}else l(p);else throw new TypeError("Expected usable value, not `"+p+"`")}function l(p){if(!("plugins"in p)&&!("settings"in p))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(p.plugins),p.settings&&(i.settings=xy(!0,i.settings,p.settings))}function u(p){let m=-1;if(p!=null)if(Array.isArray(p))for(;++m<p.length;){const g=p[m];o(g)}else throw new TypeError("Expected a list of plugins, not `"+p+"`")}function f(p,m){let g=-1,w=-1;for(;++g<r.length;)if(r[g][0]===p){w=g;break}if(w===-1)r.push([p,...m]);else if(m.length>0){let[k,...b]=m;const A=r[w][1];_2(A)&&_2(k)&&(k=xy(!0,A,k)),r[w]=[p,k,...b]}}}}const E2=new hv().freeze();function Cy(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function Ey(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function Ty(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function sk(n){if(!_2(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function lk(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function _m(n){return IT(n)?n:new TT(n)}function IT(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function OT(n){return typeof n=="string"||PT(n)}function PT(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}var K4=n=>{throw TypeError(n)},J4=(n,e,t)=>e.has(n)||K4("Cannot "+t),ct=(n,e,t)=>(J4(n,e,"read from private field"),t?t.call(n):e.get(n)),vn=(n,e,t)=>e.has(n)?K4("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),qt=(n,e,t,r)=>(J4(n,e,"write to private field"),e.set(n,t),t),es,Dd,Wm,jm,$m,zd,Ld,Hs,Fd,Hm,Vm,Bd,qm,Ud,Km,Jm,gf,hu,Gm,Wd;class G4{}class Q4{constructor(){this.elements=[],this.size=()=>this.elements.length,this.top=()=>this.elements.at(-1),this.push=e=>{var t;(t=this.top())==null||t.push(e)},this.open=e=>{this.elements.push(e)},this.close=()=>{const e=this.elements.pop();if(!e)throw Jx();return e}}}class dv extends G4{constructor(e,t,r){super(),this.type=e,this.content=t,this.attrs=r}push(e,...t){this.content.push(e,...t)}pop(){return this.content.pop()}static create(e,t,r){return new dv(e,t,r)}}const T2=class extends Q4{constructor(e){super(),vn(this,es),vn(this,Dd),vn(this,Wm),vn(this,jm),vn(this,$m),vn(this,zd),vn(this,Ld),qt(this,es,kt.none),qt(this,Dd,t=>t.isText),qt(this,Wm,(t,r)=>{if(ct(this,Dd).call(this,t)&&ct(this,Dd).call(this,r)&&kt.sameSet(t.marks,r.marks))return this.schema.text(t.text+r.text,t.marks)}),qt(this,jm,t=>{const r=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.parseMarkdown.match(t));if(!r)throw _8(t);return r}),qt(this,$m,t=>{const r=ct(this,jm).call(this,t);r.spec.parseMarkdown.runner(this,t,r)}),this.injectRoot=(t,r,i)=>(this.openNode(r,i),this.next(t.children),this),this.openNode=(t,r)=>(this.open(dv.create(t,[],r)),this),qt(this,zd,()=>{qt(this,es,kt.none);const t=this.close();return ct(this,Ld).call(this,t.type,t.attrs,t.content)}),this.closeNode=()=>(ct(this,zd).call(this),this),qt(this,Ld,(t,r,i)=>{const o=t.createAndFill(r,i,ct(this,es));if(!o)throw b8(t,r,i);return this.push(o),o}),this.addNode=(t,r,i)=>(ct(this,Ld).call(this,t,r,i),this),this.openMark=(t,r)=>{const i=t.create(r);return qt(this,es,i.addToSet(ct(this,es))),this},this.closeMark=t=>(qt(this,es,t.removeFromSet(ct(this,es))),this),this.addText=t=>{const r=this.top();if(!r)throw Jx();const i=r.pop(),o=this.schema.text(t,ct(this,es));if(!i)return r.push(o),this;const l=ct(this,Wm).call(this,i,o);return l?(r.push(l),this):(r.push(i,o),this)},this.build=()=>{let t;do t=ct(this,zd).call(this);while(this.size());return t},this.next=(t=[])=>([t].flat().forEach(r=>ct(this,$m).call(this,r)),this),this.toDoc=()=>this.build(),this.run=(t,r)=>{const i=t.runSync(t.parse(r),r);return this.next(i),this},this.schema=e}};es=new WeakMap;Dd=new WeakMap;Wm=new WeakMap;jm=new WeakMap;$m=new WeakMap;zd=new WeakMap;Ld=new WeakMap;T2.create=(n,e)=>{const t=new T2(n);return r=>(t.run(e,r),t.toDoc())};let RT=T2;const M2=class extends G4{constructor(e,t,r,i={}){super(),this.type=e,this.children=t,this.value=r,this.props=i,this.push=(o,...l)=>{this.children||(this.children=[]),this.children.push(o,...l)},this.pop=()=>{var o;return(o=this.children)==null?void 0:o.pop()}}};M2.create=(n,e,t,r={})=>new M2(n,e,t,r);let ak=M2;const DT=n=>Object.prototype.hasOwnProperty.call(n,"size"),N2=class extends Q4{constructor(e){super(),vn(this,Hs),vn(this,Fd),vn(this,Hm),vn(this,Vm),vn(this,Bd),vn(this,qm),vn(this,Ud),vn(this,Km),vn(this,Jm),vn(this,gf),vn(this,hu),vn(this,Gm),vn(this,Wd),qt(this,Hs,kt.none),qt(this,Fd,t=>{const r=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.toMarkdown.match(t));if(!r)throw C8(t.type);return r}),qt(this,Hm,t=>ct(this,Fd).call(this,t).spec.toMarkdown.runner(this,t)),qt(this,Vm,(t,r)=>ct(this,Fd).call(this,t).spec.toMarkdown.runner(this,t,r)),qt(this,Bd,t=>{const{marks:r}=t,i=u=>u.type.spec.priority??50;[...r].sort((u,f)=>i(u)-i(f)).every(u=>!ct(this,Vm).call(this,u,t))&&ct(this,Hm).call(this,t),r.forEach(u=>ct(this,Wd).call(this,u))}),qt(this,qm,(t,r)=>{var i;if(t.type===r||((i=t.children)==null?void 0:i.length)!==1)return t;const o=p=>{var m;if(p.type===r)return p;if(((m=p.children)==null?void 0:m.length)!==1)return null;const[g]=p.children;return g?o(g):null},l=o(t);if(!l)return t;const u=l.children?[...l.children]:void 0,f={...t,children:u};return f.children=u,l.children=[f],l}),qt(this,Ud,t=>{const{children:r}=t;return r&&(t.children=r.reduce((i,o,l)=>{if(l===0)return[o];const u=i.at(-1);if(u&&u.isMark&&o.isMark){o=ct(this,qm).call(this,o,u.type);const{children:f,...p}=o,{children:m,...g}=u;if(o.type===u.type&&f&&m&&JSON.stringify(p)===JSON.stringify(g)){const w={...g,children:[...m,...f]};return i.slice(0,-1).concat(ct(this,Ud).call(this,w))}}return i.concat(o)},[])),t}),qt(this,Km,t=>{const r={...t.props,type:t.type};return t.children&&(r.children=t.children),t.value&&(r.value=t.value),r}),this.openNode=(t,r,i)=>(this.open(ak.create(t,void 0,r,i)),this),qt(this,Jm,(t,r)=>{let i="",o="";const l=t.children;let u=-1,f=-1;const p=g=>{g&&g.forEach((w,k)=>{w.type==="text"&&w.value&&(u<0&&(u=k),f=k)})};if(l){p(l);const g=l==null?void 0:l[f],w=l==null?void 0:l[u];g&&g.value.endsWith(" ")&&(o=g.value.match(/ +$/)[0],g.value=g.value.trimEnd()),w&&w.value.startsWith(" ")&&(i=w.value.match(/^ +/)[0],w.value=w.value.trimStart())}i.length&&ct(this,hu).call(this,"text",void 0,i);const m=r();return o.length&&ct(this,hu).call(this,"text",void 0,o),m}),qt(this,gf,(t=!1)=>{const r=this.close(),i=()=>ct(this,hu).call(this,r.type,r.children,r.value,r.props);return t?ct(this,Jm).call(this,r,i):i()}),this.closeNode=()=>(ct(this,gf).call(this),this),qt(this,hu,(t,r,i,o)=>{const l=ak.create(t,r,i,o),u=ct(this,Ud).call(this,ct(this,Km).call(this,l));return this.push(u),u}),this.addNode=(t,r,i,o)=>(ct(this,hu).call(this,t,r,i,o),this),qt(this,Gm,(t,r,i,o)=>t.isInSet(ct(this,Hs))?this:(qt(this,Hs,t.addToSet(ct(this,Hs))),this.openNode(r,i,{...o,isMark:!0}))),qt(this,Wd,t=>{t.isInSet(ct(this,Hs))&&(qt(this,Hs,t.type.removeFromSet(ct(this,Hs))),ct(this,gf).call(this,!0))}),this.withMark=(t,r,i,o)=>(ct(this,Gm).call(this,t,r,i,o),this),this.closeMark=t=>(ct(this,Wd).call(this,t),this),this.build=()=>{let t=null;do t=ct(this,gf).call(this);while(this.size());return t},this.next=t=>DT(t)?(t.forEach(r=>{ct(this,Bd).call(this,r)}),this):(ct(this,Bd).call(this,t),this),this.toString=t=>t.stringify(this.build()),this.run=t=>(this.next(t),this),this.schema=e}};Hs=new WeakMap;Fd=new WeakMap;Hm=new WeakMap;Vm=new WeakMap;Bd=new WeakMap;qm=new WeakMap;Ud=new WeakMap;Km=new WeakMap;Jm=new WeakMap;gf=new WeakMap;hu=new WeakMap;Gm=new WeakMap;Wd=new WeakMap;N2.create=(n,e)=>{const t=new N2(n);return r=>(t.run(r),t.toString(e))};let zT=N2;const Y4=65535,X4=Math.pow(2,16);function LT(n,e){return n+e*X4}function uk(n){return n&Y4}function FT(n){return(n-(n&Y4))/X4}const Z4=1,e5=2,Qm=4,t5=8;class A2{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&t5)>0}get deletedBefore(){return(this.delInfo&(Z4|Qm))>0}get deletedAfter(){return(this.delInfo&(e5|Qm))>0}get deletedAcross(){return(this.delInfo&Qm)>0}}class mi{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&mi.empty)return mi.empty}recover(e){let t=0,r=uk(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+FT(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let f=this.ranges[u]-(this.inverted?i:0);if(f>e)break;let p=this.ranges[u+o],m=this.ranges[u+l],g=f+p;if(e<=g){let w=p?e==f?-1:e==g?1:t:t,k=f+i+(w<0?0:m);if(r)return k;let b=e==(t<0?f:g)?null:LT(u/3,e-f),A=e==f?e5:e==g?Z4:Qm;return(t<0?e!=f:e!=g)&&(A|=t5),new A2(k,A,b)}i+=m-p}return r?e+i:new A2(e+i,0,null)}touches(e,t){let r=0,i=uk(t),o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let f=this.ranges[u]-(this.inverted?r:0);if(f>e)break;let p=this.ranges[u+o],m=f+p;if(e<=m&&u==i*3)return!0;r+=this.ranges[u+l]-p}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let l=this.ranges[i],u=l-(this.inverted?o:0),f=l+(this.inverted?0:o),p=this.ranges[i+t],m=this.ranges[i+r];e(u,u+p,f,f+m),o+=m-p}}invert(){return new mi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?mi.empty:new mi(e<0?[0,-e,0]:[0,0,e])}}mi.empty=new mi([]);class fp{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new fp(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new fp;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let o=this.from;o<this.to;o++){let l=this._maps[o],u=l.mapResult(e,t);if(u.recover!=null){let f=this.getMirror(o);if(f!=null&&f>o&&f<this.to){o=f,e=this._maps[f].recover(u.recover);continue}}i|=u.delInfo,e=u.pos}return r?e:new A2(e,i,null)}}const My=Object.create(null);class hr{getMap(){return mi.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=My[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in My)throw new RangeError("Duplicate use of step JSON ID "+e);return My[e]=t,t.prototype.jsonID=e,t}}class wn{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new wn(e,null)}static fail(e){return new wn(null,e)}static fromReplace(e,t,r,i){try{return wn.ok(e.replace(t,r,i))}catch(o){if(o instanceof y1)return wn.fail(o.message);throw o}}}function pv(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(pv(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return _e.fromArray(r)}class Js extends hr{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new Ne(pv(t.content,(l,u)=>!l.isAtom||!u.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),i),t.openStart,t.openEnd);return wn.fromReplace(e,this.from,this.to,o)}invert(){return new rs(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Js(t.pos,r.pos,this.mark)}merge(e){return e instanceof Js&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Js(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Js(t.from,t.to,e.markFromJSON(t.mark))}}hr.jsonID("addMark",Js);class rs extends hr{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new Ne(pv(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return wn.fromReplace(e,this.from,this.to,r)}invert(){return new Js(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new rs(t.pos,r.pos,this.mark)}merge(e){return e instanceof rs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new rs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new rs(t.from,t.to,e.markFromJSON(t.mark))}}hr.jsonID("removeMark",rs);class Gl extends hr{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return wn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return wn.fromReplace(e,this.pos,this.pos+1,new Ne(_e.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Gl(this.pos,t.marks[i]);return new Gl(this.pos,this.mark)}}return new Bf(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Gl(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Gl(t.pos,e.markFromJSON(t.mark))}}hr.jsonID("addNodeMark",Gl);class Bf extends hr{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return wn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return wn.fromReplace(e,this.pos,this.pos+1,new Ne(_e.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Gl(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Bf(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Bf(t.pos,e.markFromJSON(t.mark))}}hr.jsonID("removeNodeMark",Bf);class Gn extends hr{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&I2(e,this.from,this.to)?wn.fail("Structure replace would overwrite content"):wn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new mi([this.from,this.to-this.from,this.slice.size])}invert(e){return new Gn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Gn(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Gn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?Ne.empty:new Ne(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Gn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?Ne.empty:new Ne(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Gn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Gn(t.from,t.to,Ne.fromJSON(e,t.slice),!!t.structure)}}hr.jsonID("replace",Gn);class fr extends hr{constructor(e,t,r,i,o,l,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=l,this.structure=u}apply(e){if(this.structure&&(I2(e,this.from,this.gapFrom)||I2(e,this.gapTo,this.to)))return wn.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return wn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?wn.fromReplace(e,this.from,this.to,r):wn.fail("Content does not fit in gap")}getMap(){return new mi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new fr(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new fr(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new fr(t.from,t.to,t.gapFrom,t.gapTo,Ne.fromJSON(e,t.slice),t.insert,!!t.structure)}}hr.jsonID("replaceAround",fr);function I2(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let l=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,i--}}return!1}function BT(n,e,t,r){let i=[],o=[],l,u;n.doc.nodesBetween(e,t,(f,p,m)=>{if(!f.isInline)return;let g=f.marks;if(!r.isInSet(g)&&m.type.allowsMarkType(r.type)){let w=Math.max(p,e),k=Math.min(p+f.nodeSize,t),b=r.addToSet(g);for(let A=0;A<g.length;A++)g[A].isInSet(b)||(l&&l.to==w&&l.mark.eq(g[A])?l.to=k:i.push(l=new rs(w,k,g[A])));u&&u.to==w?u.to=k:o.push(u=new Js(w,k,r))}}),i.forEach(f=>n.step(f)),o.forEach(f=>n.step(f))}function UT(n,e,t,r){let i=[],o=0;n.doc.nodesBetween(e,t,(l,u)=>{if(!l.isInline)return;o++;let f=null;if(r instanceof z1){let p=l.marks,m;for(;m=r.isInSet(p);)(f||(f=[])).push(m),p=m.removeFromSet(p)}else r?r.isInSet(l.marks)&&(f=[r]):f=l.marks;if(f&&f.length){let p=Math.min(u+l.nodeSize,t);for(let m=0;m<f.length;m++){let g=f[m],w;for(let k=0;k<i.length;k++){let b=i[k];b.step==o-1&&g.eq(i[k].style)&&(w=b)}w?(w.to=p,w.step=o):i.push({style:g,from:Math.max(u,e),to:p,step:o})}}}),i.forEach(l=>n.step(new rs(l.from,l.to,l.style)))}function mv(n,e,t,r=t.contentMatch,i=!0){let o=n.doc.nodeAt(e),l=[],u=e+1;for(let f=0;f<o.childCount;f++){let p=o.child(f),m=u+p.nodeSize,g=r.matchType(p.type);if(!g)l.push(new Gn(u,m,Ne.empty));else{r=g;for(let w=0;w<p.marks.length;w++)t.allowsMarkType(p.marks[w].type)||n.step(new rs(u,m,p.marks[w]));if(i&&p.isText&&t.whitespace!="pre"){let w,k=/\r?\n|\r/g,b;for(;w=k.exec(p.text);)b||(b=new Ne(_e.from(t.schema.text(" ",t.allowedMarks(p.marks))),0,0)),l.push(new Gn(u+w.index,u+w.index+w[0].length,b))}}u=m}if(!r.validEnd){let f=r.fillBefore(_e.empty,!0);n.replace(u,u,new Ne(f,0,0))}for(let f=l.length-1;f>=0;f--)n.step(l[f])}function WT(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function W1(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),o=n.$from.index(r),l=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(o,l,t))return r;if(r==0||i.type.spec.isolating||!WT(i,o,l))break}return null}function jT(n,e,t){let{$from:r,$to:i,depth:o}=e,l=r.before(o+1),u=i.after(o+1),f=l,p=u,m=_e.empty,g=0;for(let b=o,A=!1;b>t;b--)A||r.index(b)>0?(A=!0,m=_e.from(r.node(b).copy(m)),g++):f--;let w=_e.empty,k=0;for(let b=o,A=!1;b>t;b--)A||i.after(b+1)<i.end(b)?(A=!0,w=_e.from(i.node(b).copy(w)),k++):p++;n.step(new fr(f,p,l,u,new Ne(m.append(w),g,k),m.size-g,!0))}function n5(n,e,t=null,r=n){let i=$T(n,e),o=i&&HT(r,e);return o?i.map(ck).concat({type:e,attrs:t}).concat(o.map(ck)):null}function ck(n){return{type:n,attrs:null}}function $T(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let l=o.length?o[0]:e;return t.canReplaceWith(r,i,l)?o:null}function HT(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.child(r),l=e.contentMatch.findWrapping(o.type);if(!l)return null;let f=(l.length?l[l.length-1]:e).contentMatch;for(let p=r;f&&p<i;p++)f=f.matchType(t.child(p).type);return!f||!f.validEnd?null:l}function VT(n,e,t){let r=_e.empty;for(let l=t.length-1;l>=0;l--){if(r.size){let u=t[l].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=_e.from(t[l].type.create(t[l].attrs,r))}let i=e.start,o=e.end;n.step(new fr(i,o,i,o,new Ne(r,0,0),t.length,!0))}function qT(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(l,u)=>{let f=typeof i=="function"?i(l):i;if(l.isTextblock&&!l.hasMarkup(r,f)&&KT(n.doc,n.mapping.slice(o).map(u),r)){let p=null;if(r.schema.linebreakReplacement){let k=r.whitespace=="pre",b=!!r.contentMatch.matchType(r.schema.linebreakReplacement);k&&!b?p=!1:!k&&b&&(p=!0)}p===!1&&i5(n,l,u,o),mv(n,n.mapping.slice(o).map(u,1),r,void 0,p===null);let m=n.mapping.slice(o),g=m.map(u,1),w=m.map(u+l.nodeSize,1);return n.step(new fr(g,w,g+1,w-1,new Ne(_e.from(r.create(f,null,l.marks)),0,0),1,!0)),p===!0&&r5(n,l,u,o),!1}})}function r5(n,e,t,r){e.forEach((i,o)=>{if(i.isText){let l,u=/\r?\n|\r/g;for(;l=u.exec(i.text);){let f=n.mapping.slice(r).map(t+1+o+l.index);n.replaceWith(f,f+1,e.type.schema.linebreakReplacement.create())}}})}function i5(n,e,t,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let l=n.mapping.slice(r).map(t+1+o);n.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function KT(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function JT(n,e,t,r,i){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let l=t.create(r,null,i||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,l);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new fr(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new Ne(_e.from(l),0,0),1,!0))}function Zd(n,e,t=1,r){let i=n.resolve(e),o=i.depth-t,l=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!l.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let p=i.depth-1,m=t-2;p>o;p--,m--){let g=i.node(p),w=i.index(p);if(g.type.spec.isolating)return!1;let k=g.content.cutByIndex(w,g.childCount),b=r&&r[m+1];b&&(k=k.replaceChild(0,b.type.create(b.attrs)));let A=r&&r[m]||g;if(!g.canReplace(w+1,g.childCount)||!A.type.validContent(k))return!1}let u=i.indexAfter(o),f=r&&r[0];return i.node(o).canReplaceWith(u,u,f?f.type:i.node(o+1).type)}function GT(n,e,t=1,r){let i=n.doc.resolve(e),o=_e.empty,l=_e.empty;for(let u=i.depth,f=i.depth-t,p=t-1;u>f;u--,p--){o=_e.from(i.node(u).copy(o));let m=r&&r[p];l=_e.from(m?m.type.create(m.attrs,l):i.node(u).copy(l))}n.step(new Gn(e,e,new Ne(o.append(l),t,t),!0))}function j1(n,e){let t=n.resolve(e),r=t.index();return YT(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function QT(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),l=o.type==r?n.type.schema.nodes.text:o.type;if(t=t.matchType(l),!t||!n.type.allowsMarks(o.marks))return!1}return t.validEnd}function YT(n,e){return!!(n&&e&&!n.isLeaf&&QT(n,e))}function XT(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,o=n.doc.resolve(e-t),l=o.node().type;if(i&&l.inlineContent){let m=l.whitespace=="pre",g=!!l.contentMatch.matchType(i);m&&!g?r=!1:!m&&g&&(r=!0)}let u=n.steps.length;if(r===!1){let m=n.doc.resolve(e+t);i5(n,m.node(),m.before(),u)}l.inlineContent&&mv(n,e+t-1,l,o.node().contentMatchAt(o.index()),r==null);let f=n.mapping.slice(u),p=f.map(e-t);if(n.step(new Gn(p,f.map(e+t,-1),Ne.empty,!0)),r===!0){let m=n.doc.resolve(p);r5(n,m.node(),m.before(),n.steps.length)}return n}function ZT(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,t))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,t))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function eM(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let o=0;o<t.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let l=r.depth;l>=0;l--){let u=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,f=r.index(l)+(u>0?1:0),p=r.node(l),m=!1;if(o==1)m=p.canReplace(f,f,i);else{let g=p.contentMatchAt(f).findWrapping(i.firstChild.type);m=g&&p.canReplaceWith(f,f,g[0])}if(m)return u==0?r.pos:u<0?r.before(l+1):r.after(l+1)}return null}function gv(n,e,t=e,r=Ne.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),o=n.resolve(t);return o5(i,o,r)?new Gn(e,t,r):new tM(i,o,r).fit()}function o5(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class tM{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=_e.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=_e.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let p=this.findFittable();p?this.placeNodes(p):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,l=r.depth,u=i.depth;for(;l&&u&&o.childCount==1;)o=o.firstChild.content,l--,u--;let f=new Ne(o,l,u);return e>-1?new fr(r.pos,e,this.$to.pos,this.$to.end(),f,t):f.size||r.pos!=this.$to.pos?new Gn(r.pos,i.pos,f):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Ny(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let l=i.firstChild;for(let u=this.depth;u>=0;u--){let{type:f,match:p}=this.frontier[u],m,g=null;if(t==1&&(l?p.matchType(l.type)||(g=p.fillBefore(_e.from(l),!1)):o&&f.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:u,parent:o,inject:g};if(t==2&&l&&(m=p.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:u,parent:o,wrap:m};if(o&&p.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Ny(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Ne(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Ny(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new Ne(jd(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new Ne(jd(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let A=0;A<o.length;A++)this.openFrontierNode(o[A]);let l=this.unplaced,u=r?r.content:l.content,f=l.openStart-e,p=0,m=[],{match:g,type:w}=this.frontier[t];if(i){for(let A=0;A<i.childCount;A++)m.push(i.child(A));g=g.matchFragment(i)}let k=u.size+e-(l.content.size-l.openEnd);for(;p<u.childCount;){let A=u.child(p),P=g.matchType(A.type);if(!P)break;p++,(p>1||f==0||A.content.size)&&(g=P,m.push(s5(A.mark(w.allowedMarks(A.marks)),p==1?f:0,p==u.childCount?k:-1)))}let b=p==u.childCount;b||(k=-1),this.placed=$d(this.placed,t,_e.from(m)),this.frontier[t].match=g,b&&k<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let A=0,P=u;A<k;A++){let F=P.lastChild;this.frontier.push({type:F.type,match:F.contentMatchAt(F.childCount)}),P=F.content}this.unplaced=b?e==0?Ne.empty:new Ne(jd(l.content,e-1,1),e-1,k<0?l.openEnd:e-1):new Ne(jd(l.content,e,p),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Ay(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),l=Ay(e,t,i,r,o);if(l){for(let u=t-1;u>=0;u--){let{match:f,type:p}=this.frontier[u],m=Ay(e,u,p,f,!0);if(!m||m.childCount)continue e}return{depth:t,fit:l,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=$d(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=$d(this.placed,this.depth,_e.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(_e.empty,!0);t.childCount&&(this.placed=$d(this.placed,this.frontier.length,t))}}function jd(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(jd(n.firstChild.content,e-1,t)))}function $d(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy($d(n.lastChild.content,e-1,t)))}function Ny(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function s5(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,s5(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(_e.empty,!0)))),n.copy(r)}function Ay(n,e,t,r,i){let o=n.node(e),l=i?n.indexAfter(e):n.index(e);if(l==o.childCount&&!t.compatibleContent(o.type))return null;let u=r.fillBefore(o.content,!0,l);return u&&!nM(t,o.content,l)?u:null}function nM(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function rM(n){return n.spec.defining||n.spec.definingForContent}function iM(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),o=n.doc.resolve(t);if(o5(i,o,r))return n.step(new Gn(e,t,r));let l=a5(i,n.doc.resolve(t));l[l.length-1]==0&&l.pop();let u=-(i.depth+1);l.unshift(u);for(let w=i.depth,k=i.pos-1;w>0;w--,k--){let b=i.node(w).type.spec;if(b.defining||b.definingAsContext||b.isolating)break;l.indexOf(w)>-1?u=w:i.before(w)==k&&l.splice(1,0,-w)}let f=l.indexOf(u),p=[],m=r.openStart;for(let w=r.content,k=0;;k++){let b=w.firstChild;if(p.push(b),k==r.openStart)break;w=b.content}for(let w=m-1;w>=0;w--){let k=p[w],b=rM(k.type);if(b&&!k.sameMarkup(i.node(Math.abs(u)-1)))m=w;else if(b||!k.type.isTextblock)break}for(let w=r.openStart;w>=0;w--){let k=(w+m+1)%(r.openStart+1),b=p[k];if(b)for(let A=0;A<l.length;A++){let P=l[(A+f)%l.length],F=!0;P<0&&(F=!1,P=-P);let V=i.node(P-1),I=i.index(P-1);if(V.canReplaceWith(I,I,b.type,b.marks))return n.replace(i.before(P),F?o.after(P):t,new Ne(l5(r.content,0,r.openStart,k),k,r.openEnd))}}let g=n.steps.length;for(let w=l.length-1;w>=0&&(n.replace(e,t,r),!(n.steps.length>g));w--){let k=l[w];k<0||(e=i.before(k),t=o.after(k))}}function l5(n,e,t,r,i){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(l5(o.content,e+1,t,r,o)))}if(e>r){let o=i.contentMatchAt(0),l=o.fillBefore(n).append(n);n=l.append(o.matchFragment(l).fillBefore(_e.empty,!0))}return n}function oM(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=ZT(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new Ne(_e.from(r),0,0))}function sM(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),o=a5(r,i);for(let l=0;l<o.length;l++){let u=o[l],f=l==o.length-1;if(f&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),i.end(u));if(u>0&&(f||r.node(u-1).canReplace(r.index(u-1),i.indexAfter(u-1))))return n.delete(r.before(u),i.after(u))}for(let l=1;l<=r.depth&&l<=i.depth;l++)if(e-r.start(l)==r.depth-l&&t>r.end(l)&&i.end(l)-t!=i.depth-l&&r.start(l-1)==i.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),i.index(l-1)))return n.delete(r.before(l),t);n.delete(e,t)}function a5(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let o=n.start(i);if(o<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&t.push(i)}return t}class Tf extends hr{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return wn.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return wn.fromReplace(e,this.pos,this.pos+1,new Ne(_e.from(i),0,t.isLeaf?0:1))}getMap(){return mi.empty}invert(e){return new Tf(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Tf(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Tf(t.pos,t.attr,t.value)}}hr.jsonID("attr",Tf);class hp extends hr{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return wn.ok(r)}getMap(){return mi.empty}invert(e){return new hp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new hp(t.attr,t.value)}}hr.jsonID("docAttr",hp);let Uf=class extends Error{};Uf=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Uf.prototype=Object.create(Error.prototype);Uf.prototype.constructor=Uf;Uf.prototype.name="TransformError";class u5{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new fp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Uf(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=Ne.empty){let i=gv(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new Ne(_e.from(r),0,0))}delete(e,t){return this.replace(e,t,Ne.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return iM(this,e,t,r),this}replaceRangeWith(e,t,r){return oM(this,e,t,r),this}deleteRange(e,t){return sM(this,e,t),this}lift(e,t){return jT(this,e,t),this}join(e,t=1){return XT(this,e,t),this}wrap(e,t){return VT(this,e,t),this}setBlockType(e,t=e,r,i=null){return qT(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return JT(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new Tf(e,t,r)),this}setDocAttribute(e,t){return this.step(new hp(e,t)),this}addNodeMark(e,t){return this.step(new Gl(e,t)),this}removeNodeMark(e,t){if(!(t instanceof kt)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new Bf(e,t)),this}split(e,t=1,r){return GT(this,e,t,r),this}addMark(e,t,r){return BT(this,e,t,r),this}removeMark(e,t,r){return UT(this,e,t,r),this}clearIncompatible(e,t,r){return mv(this,e,t,r),this}}const Iy=Object.create(null);class et{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new c5(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Ne.empty){let r=t.content.lastChild,i=null;for(let u=0;u<t.openEnd;u++)i=r,r=r.lastChild;let o=e.steps.length,l=this.ranges;for(let u=0;u<l.length;u++){let{$from:f,$to:p}=l[u],m=e.mapping.slice(o);e.replaceRange(m.map(f.pos),m.map(p.pos),u?Ne.empty:t),u==0&&dk(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:l,$to:u}=i[o],f=e.mapping.slice(r),p=f.map(l.pos),m=f.map(u.pos);o?e.deleteRange(p,m):(e.replaceRangeWith(p,m,t),dk(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new st(e):yf(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let l=t<0?yf(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):yf(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(l)return l}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Kr(e.node(0))}static atStart(e){return yf(e,e,0,0,1)||new Kr(e)}static atEnd(e){return yf(e,e,e.content.size,e.childCount,-1)||new Kr(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Iy[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Iy)throw new RangeError("Duplicate use of selection JSON ID "+e);return Iy[e]=t,t.prototype.jsonID=e,t}getBookmark(){return st.between(this.$anchor,this.$head).getBookmark()}}et.prototype.visible=!0;class c5{constructor(e,t){this.$from=e,this.$to=t}}let fk=!1;function hk(n){!fk&&!n.parent.inlineContent&&(fk=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class st extends et{constructor(e,t=e){hk(e),hk(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return et.near(r);let i=e.resolve(t.map(this.anchor));return new st(i.parent.inlineContent?i:r,r)}replace(e,t=Ne.empty){if(super.replace(e,t),t==Ne.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof st&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new $1(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new st(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let o=et.findFrom(t,r,!0)||et.findFrom(t,-r,!0);if(o)t=o.$head;else return et.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(et.findFrom(e,-r,!0)||et.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new st(e,t)}}et.jsonID("text",st);class $1{constructor(e,t){this.anchor=e,this.head=t}map(e){return new $1(e.map(this.anchor),e.map(this.head))}resolve(e){return st.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ze extends et{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),o=e.resolve(i);return r?et.near(o):new Ze(o)}content(){return new Ne(_e.from(this.node),0,0)}eq(e){return e instanceof Ze&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new yv(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ze(e.resolve(t.anchor))}static create(e,t){return new Ze(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ze.prototype.visible=!1;et.jsonID("node",Ze);class yv{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new $1(r,r):new yv(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&Ze.isSelectable(r)?new Ze(t):et.near(t)}}class Kr extends et{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Ne.empty){if(t==Ne.empty){e.delete(0,e.doc.content.size);let r=et.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Kr(e)}map(e){return new Kr(e)}eq(e){return e instanceof Kr}getBookmark(){return lM}}et.jsonID("all",Kr);const lM={map(){return this},resolve(n){return new Kr(n)}};function yf(n,e,t,r,i,o=!1){if(e.inlineContent)return st.create(n,t);for(let l=r-(i>0?0:1);i>0?l<e.childCount:l>=0;l+=i){let u=e.child(l);if(u.isAtom){if(!o&&Ze.isSelectable(u))return Ze.create(n,t-(i<0?u.nodeSize:0))}else{let f=yf(n,u,t+i,i<0?u.childCount:0,i,o);if(f)return f}t+=u.nodeSize*i}return null}function dk(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Gn||i instanceof fr))return;let o=n.mapping.maps[r],l;o.forEach((u,f,p,m)=>{l==null&&(l=m)}),n.setSelection(et.near(n.doc.resolve(l),t))}const pk=1,mk=2,gk=4;class aM extends u5{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|pk)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&pk)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=mk,this}ensureMarks(e){return kt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&mk)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||kt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let l=this.doc.resolve(t);o=r==t?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,o)),this.selection.empty||this.setSelection(et.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=gk,this}get scrolledIntoView(){return(this.updated&gk)>0}}function yk(n,e){return!e||!n?n:n.bind(e)}class Hd{constructor(e,t,r){this.name=e,this.init=yk(t.init,r),this.apply=yk(t.apply,r)}}const uM=[new Hd("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Hd("selection",{init(n,e){return n.selection||et.atStart(e.doc)},apply(n){return n.selection}}),new Hd("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Hd("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Oy{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=uM.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Hd(r.key,r.spec.state,r))})}}class gu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let l=0;l<this.config.plugins.length;l++){let u=this.config.plugins[l];if(u.spec.appendTransaction){let f=i?i[l].n:0,p=i?i[l].state:this,m=f<t.length&&u.spec.appendTransaction.call(u,f?t.slice(f):t,p,r);if(m&&r.filterTransaction(m,l)){if(m.setMeta("appendedTransaction",e),!i){i=[];for(let g=0;g<this.config.plugins.length;g++)i.push(g<l?{state:r,n:t.length}:{state:this,n:0})}t.push(m),r=r.applyInner(m),o=!0}i&&(i[l]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new gu(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new aM(this)}static create(e){let t=new Oy(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new gu(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new Oy(this.schema,e.plugins),r=t.fields,i=new gu(t);for(let o=0;o<r.length;o++){let l=r[o].name;i[l]=this.hasOwnProperty(l)?this[l]:r[o].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Oy(e.schema,e.plugins),o=new gu(i);return i.fields.forEach(l=>{if(l.name=="doc")o.doc=wo.fromJSON(e.schema,t.doc);else if(l.name=="selection")o.selection=et.fromJSON(o.doc,t.selection);else if(l.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let f=r[u],p=f.spec.state;if(f.key==l.name&&p&&p.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){o[l.name]=p.fromJSON.call(f,e,t[u],o);return}}o[l.name]=l.init(e,o)}}),o}}function f5(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=f5(i,e,{})),t[r]=i}return t}class Zn{constructor(e){this.spec=e,this.props={},e.props&&f5(e.props,this,this.props),this.key=e.key?e.key.key:h5("plugin")}getState(e){return e[this.key]}}const Py=Object.create(null);function h5(n){return n in Py?n+"$"+ ++Py[n]:(Py[n]=0,n+"$")}class Ln{constructor(e="key"){this.key=h5(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}class Yr{constructor(e,t,r={}){this.match=e,this.match=e,this.handler=typeof t=="string"?cM(t):t,this.undoable=r.undoable!==!1,this.inCode=r.inCode||!1,this.inCodeMark=r.inCodeMark!==!1}}function cM(n){return function(e,t,r,i){let o=n;if(t[1]){let l=t[0].lastIndexOf(t[1]);o+=t[0].slice(l+t[1].length),r+=l;let u=r-i;u>0&&(o=t[0].slice(l-u,l)+o,r=i)}return e.tr.insertText(o,r,i)}}const fM=(n,e)=>{let t=n.plugins;for(let r=0;r<t.length;r++){let i=t[r],o;if(i.spec.isInputRules&&(o=i.getState(n))){if(e){let l=n.tr,u=o.transform;for(let f=u.steps.length-1;f>=0;f--)l.step(u.steps[f].invert(u.docs[f]));if(o.text){let f=l.doc.resolve(o.from).marks();l.replaceWith(o.from,o.to,n.schema.text(o.text,f))}else l.delete(o.from,o.to);e(l)}return!0}}return!1};new Yr(/--$/,"—",{inCodeMark:!1});new Yr(/\.\.\.$/,"…",{inCodeMark:!1});new Yr(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“",{inCodeMark:!1});new Yr(/"$/,"”",{inCodeMark:!1});new Yr(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘",{inCodeMark:!1});new Yr(/'$/,"’",{inCodeMark:!1});function vv(n,e,t=null,r){return new Yr(n,(i,o,l,u)=>{let f=t instanceof Function?t(o):t,p=i.tr.delete(l,u),m=p.doc.resolve(l),g=m.blockRange(),w=g&&n5(g,e,f);if(!w)return null;p.wrap(g,w);let k=p.doc.resolve(l-1).nodeBefore;return k&&k.type==e&&j1(p.doc,l-1)&&(!r||r(o,k))&&p.join(l-1),p})}function d5(n,e,t=null){return new Yr(n,(r,i,o,l)=>{let u=r.doc.resolve(o),f=t instanceof Function?t(i):t;return u.node(-1).canReplaceWith(u.index(-1),u.indexAfter(-1),e)?r.tr.delete(o,l).setBlockType(o,o,e,f):null})}const na=typeof navigator<"u"?navigator:null,vk=typeof document<"u"?document:null,sa=na&&na.userAgent||"",O2=/Edge\/(\d+)/.exec(sa),p5=/MSIE \d/.exec(sa),P2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(sa),H1=!!(p5||P2||O2),hM=p5?document.documentMode:P2?+P2[1]:O2?+O2[1]:0,m5=!H1&&/gecko\/(\d+)/i.test(sa),dM=m5&&+(/Firefox\/(\d+)/.exec(sa)||[0,0])[1],R2=!H1&&/Chrome\/(\d+)/.exec(sa),pM=!!R2,mM=R2?+R2[1]:0,g5=!H1&&!!na&&/Apple Computer/.test(na.vendor),y5=g5&&(/Mobile\/\w+/.test(sa)||!!na&&na.maxTouchPoints>2),gM=y5||(na?/Mac/.test(na.platform):!1),yM=/Android \d/.test(sa),v5=!!vk&&"webkitFontSmoothing"in vk.documentElement.style,vM=v5?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;var ZR=Object.freeze({__proto__:null,android:yM,chrome:pM,chrome_version:mM,gecko:m5,gecko_version:dM,ie:H1,ie_version:hM,ios:y5,mac:gM,safari:g5,webkit:v5,webkit_version:vM});function Ry(n,e,t,r,i,o){if(n.composing)return!1;const l=n.state,u=l.doc.resolve(e);if(u.parent.type.spec.code)return!1;const f=u.parent.textBetween(Math.max(0,u.parentOffset-500),u.parentOffset,void 0,"￼")+r;for(let p of i){const m=p,g=m.match.exec(f),w=g&&g[0]&&m.handler(l,g,e-(g[0].length-r.length),t);if(w)return m.undoable!==!1&&w.setMeta(o,{transform:w,from:e,to:t,text:r}),n.dispatch(w),!0}return!1}const wM=new Ln("MILKDOWN_CUSTOM_INPUTRULES");function kM({rules:n}){const e=new Zn({key:wM,isInputRules:!0,state:{init(){return null},apply(t,r){const i=t.getMeta(this);return i||(t.selectionSet||t.docChanged?null:r)}},props:{handleTextInput(t,r,i,o){return Ry(t,r,i,o,n,e)},handleDOMEvents:{compositionend:t=>(setTimeout(()=>{const{$cursor:r}=t.state.selection;r&&Ry(t,r.pos,r.pos,"",n,e)}),!1)},handleKeyDown(t,r){if(r.key!=="Enter")return!1;const{$cursor:i}=t.state.selection;return i?Ry(t,i.pos,i.pos,`
`,n,e):!1}}});return e}function Ep(n,e,t={}){return new Yr(n,(r,i,o,l)=>{var u,f,p,m;const{tr:g}=r,w=i.length;let k=i[w-1],b=i[0],A=[],P=l;const F={group:k,fullMatch:b,start:o,end:l},V=(u=t.updateCaptured)==null?void 0:u.call(t,F);if(Object.assign(F,V),{group:k,fullMatch:b,start:o,end:l}=F,b===null||(k==null?void 0:k.trim())==="")return null;if(k){const I=b.search(/\S/),W=o+b.indexOf(k),B=W+k.length;A=(f=g.storedMarks)!=null?f:[],B<l&&g.delete(B,l),W>o&&g.delete(o+I,W),P=o+I+k.length;const z=(p=t.getAttr)==null?void 0:p.call(t,i);g.addMark(o,P,e.create(z)),g.setStoredMarks(A),(m=t.beforeDispatch)==null||m.call(t,{match:i,start:o,end:l,tr:g})}return g})}function eD(n,e,t={}){return new Yr(n,(r,i,o,l)=>{var u,f,p;const{tr:m}=r;let g=i[1],w=i[0];const k={group:g,fullMatch:w,start:o,end:l},b=(u=t.updateCaptured)==null?void 0:u.call(t,k);if(Object.assign(k,b),{group:g,fullMatch:w,start:o,end:l}=k,w===null||!g||g.trim()==="")return null;const A=(f=t.getAttr)==null?void 0:f.call(t,i),P=e.createAndFill(A);return P&&(m.replaceRangeWith(e.isBlock?m.doc.resolve(o).before():o,l,P),(p=t.beforeDispatch)==null||p.call(t,{match:[w,g??""],start:o,end:l,tr:m})),m})}var xM=Object.defineProperty,SM=Object.defineProperties,bM=Object.getOwnPropertyDescriptors,wk=Object.getOwnPropertySymbols,_M=Object.prototype.hasOwnProperty,CM=Object.prototype.propertyIsEnumerable,kk=(n,e,t)=>e in n?xM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,EM=(n,e)=>{for(var t in e||(e={}))_M.call(e,t)&&kk(n,t,e[t]);if(wk)for(var t of wk(e))CM.call(e,t)&&kk(n,t,e[t]);return n},TM=(n,e)=>SM(n,bM(e));function xk(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function tD(n,e,t){const i=n.state.doc.content.size,o=xk(e,0,i),l=xk(t,0,i),u=n.coordsAtPos(o),f=n.coordsAtPos(l,-1),p=Math.min(u.top,f.top),m=Math.max(u.bottom,f.bottom),g=Math.min(u.left,f.left),w=Math.max(u.right,f.right),k=w-g,b=m-p,F={top:p,bottom:m,left:g,right:w,width:k,height:b,x:g,y:p};return TM(EM({},F),{toJSON:()=>F})}function V1(n){return Object.assign(Object.create(n),n).setTime(Date.now())}function MM(n,e){return Array.isArray(n)&&n.includes(e.type)||e.type===n}function NM(n){return e=>{for(let t=e.depth;t>0;t-=1){const r=e.node(t);if(n(r)){const i=e.before(t),o=e.after(t);return{from:i,to:o,node:r}}}}}function AM(n,e){return NM(t=>t.type===e)(n)}function IM(n,e){const t=e.nodes[n];if(!t)throw E8("node",n);return t}function wv(n){return e=>{for(let t=e.depth;t>0;t--){const r=e.node(t);if(n(r))return{pos:t>0?e.before(t):0,start:e.start(t),depth:t,node:r}}}}function nD(n){return e=>wv(n)(e.$from)}function OM(n,e){if(!(n instanceof Ze))return;const{node:t,$from:r}=n;if(MM(e,t))return{node:t,pos:r.pos,start:r.start(r.depth),depth:r.depth}}const kv=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function PM(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const w5=(n,e,t)=>{let r=PM(n,t);if(!r)return!1;let i=x5(r);if(!i){let l=r.blockRange(),u=l&&W1(l);return u==null?!1:(e&&e(n.tr.lift(l,u).scrollIntoView()),!0)}let o=i.nodeBefore;if(b5(n,i,e,-1))return!0;if(r.parent.content.size==0&&(Wf(o,"end")||Ze.isSelectable(o)))for(let l=r.depth;;l--){let u=gv(n.doc,r.before(l),r.after(l),Ne.empty);if(u&&u.slice.size<u.to-u.from){if(e){let f=n.tr.step(u);f.setSelection(Wf(o,"end")?et.findFrom(f.doc.resolve(f.mapping.map(i.pos,-1)),-1):Ze.create(f.doc,i.pos-o.nodeSize)),e(f.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1};function Wf(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const k5=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=x5(r)}let l=o&&o.nodeBefore;return!l||!Ze.isSelectable(l)?!1:(e&&e(n.tr.setSelection(Ze.create(n.doc,o.pos-l.nodeSize)).scrollIntoView()),!0)};function x5(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function RM(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const DM=(n,e,t)=>{let r=RM(n,t);if(!r)return!1;let i=S5(r);if(!i)return!1;let o=i.nodeAfter;if(b5(n,i,e,1))return!0;if(r.parent.content.size==0&&(Wf(o,"start")||Ze.isSelectable(o))){let l=gv(n.doc,r.before(),r.after(),Ne.empty);if(l&&l.slice.size<l.to-l.from){if(e){let u=n.tr.step(l);u.setSelection(Wf(o,"start")?et.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):Ze.create(u.doc,u.mapping.map(i.pos))),e(u.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},zM=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=S5(r)}let l=o&&o.nodeAfter;return!l||!Ze.isSelectable(l)?!1:(e&&e(n.tr.setSelection(Ze.create(n.doc,o.pos)).scrollIntoView()),!0)};function S5(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const LM=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function xv(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const FM=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),o=t.indexAfter(-1),l=xv(i.contentMatchAt(o));if(!l||!i.canReplaceWith(o,o,l))return!1;if(e){let u=t.after(),f=n.tr.replaceWith(u,u,l.createAndFill());f.setSelection(et.near(f.doc.resolve(u),1)),e(f.scrollIntoView())}return!0},BM=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof Kr||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=xv(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let l=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,u=n.tr.insert(l,o.createAndFill());u.setSelection(st.create(u.doc,l+1)),e(u.scrollIntoView())}return!0},UM=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(Zd(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),i=r&&W1(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function WM(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Ze&&e.selection.node.isBlock)return!r.parentOffset||!Zd(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],l,u,f=!1,p=!1;for(let k=r.depth;;k--)if(r.node(k).isBlock){f=r.end(k)==r.pos+(r.depth-k),p=r.start(k)==r.pos-(r.depth-k),u=xv(r.node(k-1).contentMatchAt(r.indexAfter(k-1))),o.unshift(f&&u?{type:u}:null),l=k;break}else{if(k==1)return!1;o.unshift(null)}let m=e.tr;(e.selection instanceof st||e.selection instanceof Kr)&&m.deleteSelection();let g=m.mapping.map(r.pos),w=Zd(m.doc,g,o.length,o);if(w||(o[0]=u?{type:u}:null,w=Zd(m.doc,g,o.length,o)),m.split(g,o.length,o),!f&&p&&r.node(l).type!=u){let k=m.mapping.map(r.before(l)),b=m.doc.resolve(k);u&&r.node(l-1).canReplaceWith(b.index(),b.index()+1,u)&&m.setNodeMarkup(m.mapping.map(r.before(l)),u)}return t&&t(m.scrollIntoView()),!0}}const jM=WM(),$M=(n,e)=>(e&&e(n.tr.setSelection(new Kr(n.doc))),!0);function HM(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||j1(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function b5(n,e,t,r){let i=e.nodeBefore,o=e.nodeAfter,l,u,f=i.type.spec.isolating||o.type.spec.isolating;if(!f&&HM(n,e,t))return!0;let p=!f&&e.parent.canReplace(e.index(),e.index()+1);if(p&&(l=(u=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&u.matchType(l[0]||o.type).validEnd){if(t){let k=e.pos+o.nodeSize,b=_e.empty;for(let F=l.length-1;F>=0;F--)b=_e.from(l[F].create(null,b));b=_e.from(i.copy(b));let A=n.tr.step(new fr(e.pos-1,k,e.pos,k,new Ne(b,1,0),l.length,!0)),P=A.doc.resolve(k+2*l.length);P.nodeAfter&&P.nodeAfter.type==i.type&&j1(A.doc,P.pos)&&A.join(P.pos),t(A.scrollIntoView())}return!0}let m=o.type.spec.isolating||r>0&&f?null:et.findFrom(e,1),g=m&&m.$from.blockRange(m.$to),w=g&&W1(g);if(w!=null&&w>=e.depth)return t&&t(n.tr.lift(g,w).scrollIntoView()),!0;if(p&&Wf(o,"start",!0)&&Wf(i,"end")){let k=i,b=[];for(;b.push(k),!k.isTextblock;)k=k.lastChild;let A=o,P=1;for(;!A.isTextblock;A=A.firstChild)P++;if(k.canReplace(k.childCount,k.childCount,A.content)){if(t){let F=_e.empty;for(let I=b.length-1;I>=0;I--)F=_e.from(b[I].copy(F));let V=n.tr.step(new fr(e.pos-b.length,e.pos+o.nodeSize,e.pos+P,e.pos+o.nodeSize-P,new Ne(F,b.length,0),0,!0));t(V.scrollIntoView())}return!0}}return!1}function _5(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(t&&t(e.tr.setSelection(st.create(e.doc,n<0?i.start(o):i.end(o)))),!0):!1}}const VM=_5(-1),qM=_5(1);function Sv(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,l=i.blockRange(o),u=l&&n5(l,n,e);return u?(r&&r(t.tr.wrap(l,u).scrollIntoView()),!0):!1}}function dp(n,e=null){return function(t,r){let i=!1;for(let o=0;o<t.selection.ranges.length&&!i;o++){let{$from:{pos:l},$to:{pos:u}}=t.selection.ranges[o];t.doc.nodesBetween(l,u,(f,p)=>{if(i)return!1;if(!(!f.isTextblock||f.hasMarkup(n,e)))if(f.type==n)i=!0;else{let m=t.doc.resolve(p),g=m.index();i=m.parent.canReplaceWith(g,g+1,n)}})}if(!i)return!1;if(r){let o=t.tr;for(let l=0;l<t.selection.ranges.length;l++){let{$from:{pos:u},$to:{pos:f}}=t.selection.ranges[l];o.setBlockType(u,f,n,e)}r(o.scrollIntoView())}return!0}}function KM(n,e,t,r){for(let i=0;i<e.length;i++){let{$from:o,$to:l}=e[i],u=o.depth==0?n.inlineContent&&n.type.allowsMarkType(t):!1;if(n.nodesBetween(o.pos,l.pos,(f,p)=>{if(u)return!1;u=f.inlineContent&&f.type.allowsMarkType(t)}),u)return!0}return!1}function q1(n,e=null,t){return function(r,i){let{empty:o,$cursor:l,ranges:u}=r.selection;if(o&&!l||!KM(r.doc,u,n))return!1;if(i)if(l)n.isInSet(r.storedMarks||l.marks())?i(r.tr.removeStoredMark(n)):i(r.tr.addStoredMark(n.create(e)));else{let f,p=r.tr;f=!u.some(m=>r.doc.rangeHasMark(m.$from.pos,m.$to.pos,n));for(let m=0;m<u.length;m++){let{$from:g,$to:w}=u[m];if(!f)p.removeMark(g.pos,w.pos,n);else{let k=g.pos,b=w.pos,A=g.nodeAfter,P=w.nodeBefore,F=A&&A.isText?/^\s*/.exec(A.text)[0].length:0,V=P&&P.isText?/\s*$/.exec(P.text)[0].length:0;k+F<b&&(k+=F,b-=V),p.addMark(k,b,n.create(e))}}i(p.scrollIntoView())}return!0}}function K1(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}let Dy=K1(kv,w5,k5),Sk=K1(kv,DM,zM);const Ks={Enter:K1(LM,BM,UM,jM),"Mod-Enter":FM,Backspace:Dy,"Mod-Backspace":Dy,"Shift-Backspace":Dy,Delete:Sk,"Mod-Delete":Sk,"Mod-a":$M},C5={"Ctrl-h":Ks.Backspace,"Alt-Backspace":Ks["Mod-Backspace"],"Ctrl-d":Ks.Delete,"Ctrl-Alt-Backspace":Ks["Mod-Delete"],"Alt-Delete":Ks["Mod-Delete"],"Alt-d":Ks["Mod-Delete"],"Ctrl-a":VM,"Ctrl-e":qM};for(let n in Ks)C5[n]=Ks[n];const JM=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,GM=JM?C5:Ks;var ra={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},b1={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},QM=typeof navigator<"u"&&/Mac/.test(navigator.platform),YM=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Qn=0;Qn<10;Qn++)ra[48+Qn]=ra[96+Qn]=String(Qn);for(var Qn=1;Qn<=24;Qn++)ra[Qn+111]="F"+Qn;for(var Qn=65;Qn<=90;Qn++)ra[Qn]=String.fromCharCode(Qn+32),b1[Qn]=String.fromCharCode(Qn);for(var zy in ra)b1.hasOwnProperty(zy)||(b1[zy]=ra[zy]);function XM(n){var e=QM&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||YM&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?b1:ra)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const ZM=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function eN(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,o,l;for(let u=0;u<e.length-1;u++){let f=e[u];if(/^(cmd|meta|m)$/i.test(f))l=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))i=!0;else if(/^s(hift)?$/i.test(f))o=!0;else if(/^mod$/i.test(f))ZM?l=!0:i=!0;else throw new Error("Unrecognized modifier name: "+f)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),l&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function tN(n){let e=Object.create(null);for(let t in n)e[eN(t)]=n[t];return e}function Ly(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function E5(n){return new Zn({props:{handleKeyDown:T5(n)}})}function T5(n){let e=tN(n);return function(t,r){let i=XM(r),o,l=e[Ly(i,r)];if(l&&l(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let u=e[Ly(i,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=ra[r.keyCode])&&o!=i){let u=e[Ly(o,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}const Yn=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},jf=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let D2=null;const qs=function(n,e,t){let r=D2||(D2=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},nN=function(){D2=null},Pu=function(n,e,t,r){return t&&(bk(n,e,t,r,-1)||bk(n,e,t,r,1))},rN=/^(img|br|input|textarea|hr)$/i;function bk(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:$i(n))){let o=n.parentNode;if(!o||o.nodeType!=1||Tp(n)||rN.test(n.nodeName)||n.contentEditable=="false")return!1;e=Yn(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?$i(n):0}else return!1}}function $i(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function iN(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=$i(n)}else if(n.parentNode&&!Tp(n))e=Yn(n),n=n.parentNode;else return null}}function oN(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Tp(n))e=Yn(n)+1,n=n.parentNode;else return null}}function sN(n,e,t){for(let r=e==0,i=e==$i(n);r||i;){if(n==t)return!0;let o=Yn(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,i=i&&o==$i(n)}}function Tp(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const J1=function(n){return n.focusNode&&Pu(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function mu(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function lN(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function aN(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min($i(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min($i(r.startContainer),r.startOffset)}}}const ss=typeof navigator<"u"?navigator:null,_k=typeof document<"u"?document:null,la=ss&&ss.userAgent||"",z2=/Edge\/(\d+)/.exec(la),M5=/MSIE \d/.exec(la),L2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(la),Jr=!!(M5||L2||z2),Xl=M5?document.documentMode:L2?+L2[1]:z2?+z2[1]:0,So=!Jr&&/gecko\/(\d+)/i.test(la);So&&+(/Firefox\/(\d+)/.exec(la)||[0,0])[1];const F2=!Jr&&/Chrome\/(\d+)/.exec(la),cr=!!F2,N5=F2?+F2[1]:0,Cr=!Jr&&!!ss&&/Apple Computer/.test(ss.vendor),$f=Cr&&(/Mobile\/\w+/.test(la)||!!ss&&ss.maxTouchPoints>2),Wi=$f||(ss?/Mac/.test(ss.platform):!1),uN=ss?/Win/.test(ss.platform):!1,Gs=/Android \d/.test(la),Mp=!!_k&&"webkitFontSmoothing"in _k.documentElement.style,cN=Mp?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function fN(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function $s(n,e){return typeof n=="number"?n:n[e]}function hN(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function Ck(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let l=t||n.dom;l;){if(l.nodeType!=1){l=jf(l);continue}let u=l,f=u==o.body,p=f?fN(o):hN(u),m=0,g=0;if(e.top<p.top+$s(r,"top")?g=-(p.top-e.top+$s(i,"top")):e.bottom>p.bottom-$s(r,"bottom")&&(g=e.bottom-e.top>p.bottom-p.top?e.top+$s(i,"top")-p.top:e.bottom-p.bottom+$s(i,"bottom")),e.left<p.left+$s(r,"left")?m=-(p.left-e.left+$s(i,"left")):e.right>p.right-$s(r,"right")&&(m=e.right-p.right+$s(i,"right")),m||g)if(f)o.defaultView.scrollBy(m,g);else{let k=u.scrollLeft,b=u.scrollTop;g&&(u.scrollTop+=g),m&&(u.scrollLeft+=m);let A=u.scrollLeft-k,P=u.scrollTop-b;e={left:e.left-A,top:e.top-P,right:e.right-A,bottom:e.bottom-P}}let w=f?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(w))break;l=w=="absolute"?l.offsetParent:jf(l)}}function dN(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,l=t+1;l<Math.min(innerHeight,e.bottom);l+=5){let u=n.root.elementFromPoint(o,l);if(!u||u==n.dom||!n.dom.contains(u))continue;let f=u.getBoundingClientRect();if(f.top>=t-20){r=u,i=f.top;break}}return{refDOM:r,refTop:i,stack:A5(n.dom)}}function A5(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=jf(r));return e}function pN({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;I5(t,r==0?0:r-e)}function I5(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:o}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let hf=null;function mN(n){if(n.setActive)return n.setActive();if(hf)return n.focus(hf);let e=A5(n);n.focus(hf==null?{get preventScroll(){return hf={preventScroll:!0},!0}}:void 0),hf||(hf=!1,I5(e,0))}function O5(n,e){let t,r=2e8,i,o=0,l=e.top,u=e.top,f,p;for(let m=n.firstChild,g=0;m;m=m.nextSibling,g++){let w;if(m.nodeType==1)w=m.getClientRects();else if(m.nodeType==3)w=qs(m).getClientRects();else continue;for(let k=0;k<w.length;k++){let b=w[k];if(b.top<=l&&b.bottom>=u){l=Math.max(b.bottom,l),u=Math.min(b.top,u);let A=b.left>e.left?b.left-e.left:b.right<e.left?e.left-b.right:0;if(A<r){t=m,r=A,i=A&&t.nodeType==3?{left:b.right<e.left?b.right:b.left,top:e.top}:e,m.nodeType==1&&A&&(o=g+(e.left>=(b.left+b.right)/2?1:0));continue}}else b.top>e.top&&!f&&b.left<=e.left&&b.right>=e.left&&(f=m,p={left:Math.max(b.left,Math.min(b.right,e.left)),top:b.top});!t&&(e.left>=b.right&&e.top>=b.top||e.left>=b.left&&e.top>=b.bottom)&&(o=g+1)}}return!t&&f&&(t=f,i=p,r=0),t&&t.nodeType==3?gN(t,i):!t||r&&t.nodeType==1?{node:n,offset:o}:O5(t,i)}function gN(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let o=Ul(r,1);if(o.top!=o.bottom&&bv(e,o))return{node:n,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function bv(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function yN(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function vN(n,e,t){let{node:r,offset:i}=O5(e,t),o=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();o=l.left!=l.right&&t.left>(l.left+l.right)/2?1:-1}return n.docView.posFromDOM(r,i,o)}function wN(n,e,t,r){let i=-1;for(let o=e,l=!1;o!=n.dom;){let u=n.docView.nearestDesc(o,!0),f;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((f=u.dom.getBoundingClientRect()).width||f.height)&&(u.node.isBlock&&u.parent&&(!l&&f.left>r.left||f.top>r.top?i=u.posBefore:(!l&&f.right<r.left||f.bottom<r.top)&&(i=u.posAfter),l=!0),!u.contentDOM&&i<0&&!u.node.isText))return(u.node.isBlock?r.top<(f.top+f.bottom)/2:r.left<(f.left+f.right)/2)?u.posBefore:u.posAfter;o=u.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function P5(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),o=i;;){let l=n.childNodes[o];if(l.nodeType==1){let u=l.getClientRects();for(let f=0;f<u.length;f++){let p=u[f];if(bv(e,p))return P5(l,e,p)}}if((o=(o+1)%r)==i)break}return n}function kN(n,e){let t=n.dom.ownerDocument,r,i=0,o=aN(t,e.left,e.top);o&&({node:r,offset:i}=o);let l=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),u;if(!l||!n.dom.contains(l.nodeType!=1?l.parentNode:l)){let p=n.dom.getBoundingClientRect();if(!bv(e,p)||(l=P5(n.dom,e,p),!l))return null}if(Cr)for(let p=l;r&&p;p=jf(p))p.draggable&&(r=void 0);if(l=yN(l,e),r){if(So&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let m=r.childNodes[i],g;m.nodeName=="IMG"&&(g=m.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&i++}let p;Mp&&i&&r.nodeType==1&&(p=r.childNodes[i-1]).nodeType==1&&p.contentEditable=="false"&&p.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(u=wN(n,r,i,e))}u==null&&(u=vN(n,l,e));let f=n.docView.nearestDesc(l,!0);return{pos:u,inside:f?f.posAtStart-f.border:-1}}function Ek(n){return n.top<n.bottom||n.left<n.right}function Ul(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(Ek(r))return r}return Array.prototype.find.call(t,Ek)||n.getBoundingClientRect()}const xN=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function R5(n,e,t){let{node:r,offset:i,atom:o}=n.docView.domFromPos(e,t<0?-1:1),l=Mp||So;if(r.nodeType==3)if(l&&(xN.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let f=Ul(qs(r,i,i),t);if(So&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let p=Ul(qs(r,i-1,i-1),-1);if(p.top==f.top){let m=Ul(qs(r,i,i+1),-1);if(m.top!=f.top)return Cd(m,m.left<p.left)}}return f}else{let f=i,p=i,m=t<0?1:-1;return t<0&&!i?(p++,m=-1):t>=0&&i==r.nodeValue.length?(f--,m=1):t<0?f--:p++,Cd(Ul(qs(r,f,p),m),m<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(t<0||i==$i(r))){let f=r.childNodes[i-1];if(f.nodeType==1)return Fy(f.getBoundingClientRect(),!1)}if(o==null&&i<$i(r)){let f=r.childNodes[i];if(f.nodeType==1)return Fy(f.getBoundingClientRect(),!0)}return Fy(r.getBoundingClientRect(),t>=0)}if(o==null&&i&&(t<0||i==$i(r))){let f=r.childNodes[i-1],p=f.nodeType==3?qs(f,$i(f)-(l?0:1)):f.nodeType==1&&(f.nodeName!="BR"||!f.nextSibling)?f:null;if(p)return Cd(Ul(p,1),!1)}if(o==null&&i<$i(r)){let f=r.childNodes[i];for(;f.pmViewDesc&&f.pmViewDesc.ignoreForCoords;)f=f.nextSibling;let p=f?f.nodeType==3?qs(f,0,l?0:1):f.nodeType==1?f:null:null;if(p)return Cd(Ul(p,-1),!0)}return Cd(Ul(r.nodeType==3?qs(r):r,-t),t>=0)}function Cd(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Fy(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function D5(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function SN(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return D5(n,e,()=>{let{node:o}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(o,!0);if(!u)break;if(u.node.isBlock){o=u.contentDOM||u.dom;break}o=u.dom.parentNode}let l=R5(n,i.pos,1);for(let u=o.firstChild;u;u=u.nextSibling){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=qs(u,0,u.nodeValue.length).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.bottom>m.top+1&&(t=="up"?l.top-m.top>(m.bottom-l.top)*2:m.bottom-l.bottom>(l.bottom-m.top)*2))return!1}}return!0})}const bN=/[\u0590-\u08ac]/;function _N(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,l=i==r.parent.content.size,u=n.domSelection();return u?!bN.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?o:l:D5(n,e,()=>{let{focusNode:f,focusOffset:p,anchorNode:m,anchorOffset:g}=n.domSelectionRange(),w=u.caretBidiLevel;u.modify("move",t,"character");let k=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:b,focusOffset:A}=n.domSelectionRange(),P=b&&!k.contains(b.nodeType==1?b:b.parentNode)||f==b&&p==A;try{u.collapse(m,g),f&&(f!=m||p!=g)&&u.extend&&u.extend(f,p)}catch{}return w!=null&&(u.caretBidiLevel=w),P}):r.pos==r.start()||r.pos==r.end()}let Tk=null,Mk=null,Nk=!1;function CN(n,e,t){return Tk==e&&Mk==t?Nk:(Tk=e,Mk=t,Nk=t=="up"||t=="down"?SN(n,e,t):_N(n,e,t))}const Hi=0,Ak=1,yu=2,ls=3;class Np{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=Hi,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,l;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(l)+l.size:this.posAtStart}else{let o,l;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(l):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>Yn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),l;if(o&&(!t||o.node))if(r&&(l=o.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let l=0;l<i.children.length;l++){let u=i.children[l];if(u.size){i=u;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let l=this.children[r],u=o+l.size;if(u>e||l instanceof L5){i=e-o;break}o=u}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof z5&&o.side>=0;r--);if(t<=0){let o,l=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,l=!1);return o&&t&&l&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?Yn(o.dom)+1:0}}else{let o,l=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,l=!1);return o&&l&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?Yn(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let l=r,u=0;;u++){let f=this.children[u],p=l+f.size;if(i==-1&&e<=p){let m=l+f.border;if(e>=m&&t<=p-f.border&&f.node&&f.contentDOM&&this.contentDOM.contains(f.contentDOM))return f.parseRange(e,t,m);e=l;for(let g=u;g>0;g--){let w=this.children[g-1];if(w.size&&w.dom.parentNode==this.contentDOM&&!w.emptyChildAt(1)){i=Yn(w.dom)+1;break}e-=w.size}i==-1&&(i=0)}if(i>-1&&(p>t||u==this.children.length-1)){t=p;for(let m=u+1;m<this.children.length;m++){let g=this.children[m];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){o=Yn(g.dom);break}t+=g.size}o==-1&&(o=this.contentDOM.childNodes.length);break}l=p}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let o=Math.min(e,t),l=Math.max(e,t);for(let k=0,b=0;k<this.children.length;k++){let A=this.children[k],P=b+A.size;if(o>b&&l<P)return A.setSelection(e-b-A.border,t-b-A.border,r,i);b=P}let u=this.domFromPos(e,e?-1:1),f=t==e?u:this.domFromPos(t,t?-1:1),p=r.root.getSelection(),m=r.domSelectionRange(),g=!1;if((So||Cr)&&e==t){let{node:k,offset:b}=u;if(k.nodeType==3){if(g=!!(b&&k.nodeValue[b-1]==`
`),g&&b==k.nodeValue.length)for(let A=k,P;A;A=A.parentNode){if(P=A.nextSibling){P.nodeName=="BR"&&(u=f={node:P.parentNode,offset:Yn(P)+1});break}let F=A.pmViewDesc;if(F&&F.node&&F.node.isBlock)break}}else{let A=k.childNodes[b-1];g=A&&(A.nodeName=="BR"||A.contentEditable=="false")}}if(So&&m.focusNode&&m.focusNode!=f.node&&m.focusNode.nodeType==1){let k=m.focusNode.childNodes[m.focusOffset];k&&k.contentEditable=="false"&&(i=!0)}if(!(i||g&&Cr)&&Pu(u.node,u.offset,m.anchorNode,m.anchorOffset)&&Pu(f.node,f.offset,m.focusNode,m.focusOffset))return;let w=!1;if((p.extend||e==t)&&!g){p.collapse(u.node,u.offset);try{e!=t&&p.extend(f.node,f.offset),w=!0}catch{}}if(!w){if(e>t){let b=u;u=f,f=b}let k=document.createRange();k.setEnd(f.node,f.offset),k.setStart(u.node,u.offset),p.removeAllRanges(),p.addRange(k)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],l=r+o.size;if(r==l?e<=l&&t>=r:e<l&&t>r){let u=r+o.border,f=l-o.border;if(e>=u&&t<=f){this.dirty=e==r||t==l?yu:Ak,e==u&&t==f&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=ls:o.markDirty(e-u,t-u);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?yu:ls}r=l}this.dirty=yu}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?yu:Ak;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class z5 extends Np{constructor(e,t,r,i){let o,l=t.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(l.nodeType!=1){let u=document.createElement("span");u.appendChild(l),l=u}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==Hi&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class EN extends Np{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ru extends Np{constructor(e,t,r,i,o){super(e,[],r,i),this.mark=t,this.spec=o}static create(e,t,r,i){let o=i.nodeViews[t.type.name],l=o&&o(t,i,r);return(!l||!l.dom)&&(l=zu.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Ru(e,t,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&ls||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=ls&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Hi){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Hi}}slice(e,t,r){let i=Ru.create(this.parent,this.mark,!0,r),o=this.children,l=this.size;t<l&&(o=U2(o,t,l,r)),e>0&&(o=U2(o,0,e,r));for(let u=0;u<o.length;u++)o[u].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Zl extends Np{constructor(e,t,r,i,o,l,u,f,p){super(e,[],o,l),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=u}static create(e,t,r,i,o,l){let u=o.nodeViews[t.type.name],f,p=u&&u(t,o,()=>{if(!f)return l;if(f.parent)return f.parent.posBeforeChild(f)},r,i),m=p&&p.dom,g=p&&p.contentDOM;if(t.isText){if(!m)m=document.createTextNode(t.text);else if(m.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else m||({dom:m,contentDOM:g}=zu.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!g&&!t.isText&&m.nodeName!="BR"&&(m.hasAttribute("contenteditable")||(m.contentEditable="false"),t.type.spec.draggable&&(m.draggable=!0));let w=m;return m=U5(m,r,t),p?f=new TN(e,t,r,i,m,g||null,w,p,o,l+1):t.isText?new G1(e,t,r,i,m,w,o):new Zl(e,t,r,i,m,g||null,w,o,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>_e.empty)}return e}matchesNode(e,t,r){return this.dirty==Hi&&e.eq(this.node)&&_1(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,o=e.composing?this.localCompositionInfo(e,t):null,l=o&&o.pos>-1?o:null,u=o&&o.pos<0,f=new NN(this,l&&l.node,e);ON(this.node,this.innerDeco,(p,m,g)=>{p.spec.marks?f.syncToMarks(p.spec.marks,r,e):p.type.side>=0&&!g&&f.syncToMarks(m==this.node.childCount?kt.none:this.node.child(m).marks,r,e),f.placeWidget(p,e,i)},(p,m,g,w)=>{f.syncToMarks(p.marks,r,e);let k;f.findNodeMatch(p,m,g,w)||u&&e.state.selection.from>i&&e.state.selection.to<i+p.nodeSize&&(k=f.findIndexWithChild(o.node))>-1&&f.updateNodeAt(p,m,g,k,e)||f.updateNextNode(p,m,g,e,w,i)||f.addNode(p,m,g,e,i),i+=p.nodeSize}),f.syncToMarks([],r,e),this.node.isTextblock&&f.addTextblockHacks(),f.destroyRest(),(f.changed||this.dirty==yu)&&(l&&this.protectLocalComposition(e,l),F5(this.contentDOM,this.children,e),$f&&PN(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof st)||r<t||i>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,u=RN(this.node.content,l,r-t,i-t);return u<0?null:{node:o,pos:u,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let l=new EN(this,o,t,i);e.input.compositionNodes.push(l),this.children=U2(this.children,r,r+i.length,e,l)}update(e,t,r,i){return this.dirty==ls||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Hi}updateOuterDeco(e){if(_1(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=B5(this.dom,this.nodeDOM,B2(this.outerDeco,this.node,t),B2(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Ik(n,e,t,r,i){U5(r,e,n);let o=new Zl(void 0,n,e,t,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class G1 extends Zl{constructor(e,t,r,i,o,l,u){super(e,t,r,i,o,null,l,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==ls||this.dirty!=Hi&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Hi||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Hi,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),o=document.createTextNode(i.text);return new G1(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=ls)}get domAtom(){return!1}isText(e){return this.node.text==e}}class L5 extends Np{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Hi&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class TN extends Zl{constructor(e,t,r,i,o,l,u,f,p,m){super(e,t,r,i,o,l,u,p,m),this.spec=f}update(e,t,r,i){if(this.dirty==ls)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,r);return o&&this.updateInner(e,t,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function F5(n,e,t){let r=n.firstChild,i=!1;for(let o=0;o<e.length;o++){let l=e[o],u=l.dom;if(u.parentNode==n){for(;u!=r;)r=Ok(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(u,r);if(l instanceof Ru){let f=r?r.previousSibling:n.lastChild;F5(l.contentDOM,l.children,t),r=f?f.nextSibling:n.firstChild}}for(;r;)r=Ok(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const ep=function(n){n&&(this.nodeName=n)};ep.prototype=Object.create(null);const vu=[new ep];function B2(n,e,t){if(n.length==0)return vu;let r=t?vu[0]:new ep,i=[r];for(let o=0;o<n.length;o++){let l=n[o].type.attrs;if(l){l.nodeName&&i.push(r=new ep(l.nodeName));for(let u in l){let f=l[u];f!=null&&(t&&i.length==1&&i.push(r=new ep(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+f:u=="style"?r.style=(r.style?r.style+";":"")+f:u!="nodeName"&&(r[u]=f))}}}return i}function B5(n,e,t,r){if(t==vu&&r==vu)return e;let i=e;for(let o=0;o<r.length;o++){let l=r[o],u=t[o];if(o){let f;u&&u.nodeName==l.nodeName&&i!=n&&(f=i.parentNode)&&f.nodeName.toLowerCase()==l.nodeName||(f=document.createElement(l.nodeName),f.pmIsDeco=!0,f.appendChild(i),u=vu[0]),i=f}MN(i,u||vu[0],l)}return i}function MN(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&n.classList.add(i[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function U5(n,e,t){return B5(n,n,vu,B2(e,t,n.nodeType!=1))}function _1(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Ok(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class NN{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=AN(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,o=this.stack.length>>1,l=Math.min(o,e.length);for(;i<l&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=Hi,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let f=this.index;f<Math.min(this.index+3,this.top.children.length);f++){let p=this.top.children[f];if(p.matchesMark(e[o])&&!this.isLocked(p.dom)){u=f;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let f=Ru.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,f),this.top=f,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,i){let o=-1,l;if(i>=this.preMatch.index&&(l=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&l.matchesNode(e,t,r))o=this.top.children.indexOf(l,this.index);else for(let u=this.index,f=Math.min(this.top.children.length,u+5);u<f;u++){let p=this.top.children[u];if(p.matchesNode(e,t,r)&&!this.preMatch.matched.has(p)){o=u;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,r,i,o){let l=this.top.children[i];return l.dirty==ls&&l.dom==l.contentDOM&&(l.dirty=yu),l.update(e,t,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,o,l){for(let u=this.index;u<this.top.children.length;u++){let f=this.top.children[u];if(f instanceof Zl){let p=this.preMatch.matched.get(f);if(p!=null&&p!=o)return!1;let m=f.dom,g,w=this.isLocked(m)&&!(e.isText&&f.node&&f.node.isText&&f.nodeDOM.nodeValue==e.text&&f.dirty!=ls&&_1(t,f.outerDeco));if(!w&&f.update(e,t,r,i))return this.destroyBetween(this.index,u),f.dom!=m&&(this.changed=!0),this.index++,!0;if(!w&&(g=this.recreateWrapper(f,e,t,r,i,l)))return this.destroyBetween(this.index,u),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=yu,g.updateChildren(i,l+1),g.dirty=Hi),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,o,l){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!_1(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let u=Zl.create(this.top,t,r,i,o,l);if(u.contentDOM){u.children=e.children,e.children=[];for(let f of u.children)f.parent=u}return e.destroy(),u}addNode(e,t,r,i,o){let l=Zl.create(this.top,e,t,r,i,o);l.contentDOM&&l.updateChildren(i,o+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new z5(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Ru;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof G1)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Cr||cr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new L5(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function AN(n,e){let t=e,r=t.children.length,i=n.childCount,o=new Map,l=[];e:for(;i>0;){let u;for(;;)if(r){let p=t.children[r-1];if(p instanceof Ru)t=p,r=p.children.length;else{u=p,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let f=u.node;if(f){if(f!=n.child(i-1))break;--i,o.set(u,i),l.push(u)}}return{index:i,matched:o,matches:l.reverse()}}function IN(n,e){return n.type.side-e.type.side}function ON(n,e,t,r){let i=e.locals(n),o=0;if(i.length==0){for(let p=0;p<n.childCount;p++){let m=n.child(p);r(m,i,e.forChild(o,m),p),o+=m.nodeSize}return}let l=0,u=[],f=null;for(let p=0;;){let m,g;for(;l<i.length&&i[l].to==o;){let P=i[l++];P.widget&&(m?(g||(g=[m])).push(P):m=P)}if(m)if(g){g.sort(IN);for(let P=0;P<g.length;P++)t(g[P],p,!!f)}else t(m,p,!!f);let w,k;if(f)k=-1,w=f,f=null;else if(p<n.childCount)k=p,w=n.child(p++);else break;for(let P=0;P<u.length;P++)u[P].to<=o&&u.splice(P--,1);for(;l<i.length&&i[l].from<=o&&i[l].to>o;)u.push(i[l++]);let b=o+w.nodeSize;if(w.isText){let P=b;l<i.length&&i[l].from<P&&(P=i[l].from);for(let F=0;F<u.length;F++)u[F].to<P&&(P=u[F].to);P<b&&(f=w.cut(P-o),w=w.cut(0,P-o),b=P,k=-1)}else for(;l<i.length&&i[l].to<b;)l++;let A=w.isInline&&!w.isLeaf?u.filter(P=>!P.inline):u.slice();r(w,A,e.forChild(o,w),k),o=b}}function PN(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function RN(n,e,t,r){for(let i=0,o=0;i<n.childCount&&o<=r;){let l=n.child(i++),u=o;if(o+=l.nodeSize,!l.isText)continue;let f=l.text;for(;i<n.childCount;){let p=n.child(i++);if(o+=p.nodeSize,!p.isText)break;f+=p.text}if(o>=t){if(o>=r&&f.slice(r-e.length-u,r-u)==e)return r-e.length;let p=u<r?f.lastIndexOf(e,r-u-1):-1;if(p>=0&&p+e.length+u>=t)return u+p;if(t==r&&f.length>=r+e.length-u&&f.slice(r-u,r-u+e.length)==e)return r}}return-1}function U2(n,e,t,r,i){let o=[];for(let l=0,u=0;l<n.length;l++){let f=n[l],p=u,m=u+=f.size;p>=t||m<=e?o.push(f):(p<e&&o.push(f.slice(0,e-p,r)),i&&(o.push(i),i=void 0),m>t&&o.push(f.slice(t-p,f.size,r)))}return o}function _v(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),o=i&&i.size==0,l=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(l<0)return null;let u=r.resolve(l),f,p;if(J1(t)){for(f=l;i&&!i.node;)i=i.parent;let g=i.node;if(i&&g.isAtom&&Ze.isSelectable(g)&&i.parent&&!(g.isInline&&sN(t.focusNode,t.focusOffset,i.dom))){let w=i.posBefore;p=new Ze(l==w?u:r.resolve(w))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let g=l,w=l;for(let k=0;k<t.rangeCount;k++){let b=t.getRangeAt(k);g=Math.min(g,n.docView.posFromDOM(b.startContainer,b.startOffset,1)),w=Math.max(w,n.docView.posFromDOM(b.endContainer,b.endOffset,-1))}if(g<0)return null;[f,l]=w==n.state.selection.anchor?[w,g]:[g,w],u=r.resolve(l)}else f=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(f<0)return null}let m=r.resolve(f);if(!p){let g=e=="pointer"||n.state.selection.head<u.pos&&!o?1:-1;p=Cv(n,m,u,g)}return p}function W5(n){return n.editable?n.hasFocus():$5(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Qs(n,e=!1){let t=n.state.selection;if(j5(n,t),!!W5(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&cr){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Pu(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)zN(n);else{let{anchor:r,head:i}=t,o,l;Pk&&!(t instanceof st)&&(t.$from.parent.inlineContent||(o=Rk(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(l=Rk(n,t.to))),n.docView.setSelection(r,i,n,e),Pk&&(o&&Dk(o),l&&Dk(l)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&DN(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Pk=Cr||cr&&N5<63;function Rk(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if(Cr&&i&&i.contentEditable=="false")return By(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return By(i);if(o)return By(o)}}function By(n){return n.contentEditable="true",Cr&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Dk(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function DN(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!W5(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function zN(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,Yn(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&Jr&&Xl<=11&&(r.disabled=!0,r.disabled=!1)}function j5(n,e){if(e instanceof Ze){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(zk(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else zk(n)}function zk(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Cv(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||st.between(e,t,r)}function Lk(n){return n.editable&&!n.hasFocus()?!1:$5(n)}function $5(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function LN(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Pu(e.node,e.offset,t.anchorNode,t.anchorOffset)}function W2(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),o=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return o&&et.findFrom(o,e)}function $l(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Fk(n,e,t){let r=n.state.selection;if(r instanceof st)if(t.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let l=n.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return $l(n,new st(r.$anchor,l))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=W2(n.state,e);return i&&i instanceof Ze?$l(n,i):!1}else if(!(Wi&&t.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,l;if(!o||o.isText)return!1;let u=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(l=n.docView.descAt(u))&&!l.contentDOM?Ze.isSelectable(o)?$l(n,new Ze(e<0?n.state.doc.resolve(i.pos-o.nodeSize):i)):Mp?$l(n,new st(n.state.doc.resolve(e<0?u:u+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ze&&r.node.isInline)return $l(n,new st(e>0?r.$to:r.$from));{let i=W2(n.state,e);return i?$l(n,i):!1}}}function C1(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function tp(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function df(n,e){return e<0?FN(n):BN(n)}function FN(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,o,l=!1;for(So&&t.nodeType==1&&r<C1(t)&&tp(t.childNodes[r],-1)&&(l=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(tp(u,-1))i=t,o=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(H5(t))break;{let u=t.previousSibling;for(;u&&tp(u,-1);)i=t.parentNode,o=Yn(u),u=u.previousSibling;if(u)t=u,r=C1(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}l?j2(n,t,r):i&&j2(n,i,o)}function BN(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=C1(t),o,l;for(;;)if(r<i){if(t.nodeType!=1)break;let u=t.childNodes[r];if(tp(u,1))o=t,l=++r;else break}else{if(H5(t))break;{let u=t.nextSibling;for(;u&&tp(u,1);)o=u.parentNode,l=Yn(u)+1,u=u.nextSibling;if(u)t=u,r=0,i=C1(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}o&&j2(n,o,l)}function H5(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function UN(n,e){for(;n&&e==n.childNodes.length&&!Tp(n);)e=Yn(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function WN(n,e){for(;n&&!e&&!Tp(n);)e=Yn(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function j2(n,e,t){if(e.nodeType!=3){let o,l;(l=UN(e,t))?(e=l,t=0):(o=WN(e,t))&&(e=o,t=o.nodeValue.length)}let r=n.domSelection();if(!r)return;if(J1(r)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Qs(n)},50)}function Bk(n,e){let t=n.state.doc.resolve(e);if(!(cr||uN)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Uk(n,e,t){let r=n.state.selection;if(r instanceof st&&!r.empty||t.indexOf("s")>-1||Wi&&t.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let l=W2(n.state,e);if(l&&l instanceof Ze)return $l(n,l)}if(!i.parent.inlineContent){let l=e<0?i:o,u=r instanceof Kr?et.near(l,e):et.findFrom(l,e);return u?$l(n,u):!1}return!1}function Wk(n,e){if(!(n.state.selection instanceof st))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let l=n.state.tr;return e<0?l.delete(t.pos-o.nodeSize,t.pos):l.delete(t.pos,t.pos+o.nodeSize),n.dispatch(l),!0}return!1}function jk(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function jN(n){if(!Cr||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;jk(n,r,"true"),setTimeout(()=>jk(n,r,"false"),20)}return!1}function $N(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function HN(n,e){let t=e.keyCode,r=$N(e);if(t==8||Wi&&t==72&&r=="c")return Wk(n,-1)||df(n,-1);if(t==46&&!e.shiftKey||Wi&&t==68&&r=="c")return Wk(n,1)||df(n,1);if(t==13||t==27)return!0;if(t==37||Wi&&t==66&&r=="c"){let i=t==37?Bk(n,n.state.selection.from)=="ltr"?-1:1:-1;return Fk(n,i,r)||df(n,i)}else if(t==39||Wi&&t==70&&r=="c"){let i=t==39?Bk(n,n.state.selection.from)=="ltr"?1:-1:1;return Fk(n,i,r)||df(n,i)}else{if(t==38||Wi&&t==80&&r=="c")return Uk(n,-1,r)||df(n,-1);if(t==40||Wi&&t==78&&r=="c")return jN(n)||Uk(n,1,r)||df(n,1);if(r==(Wi?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Ev(n,e){n.someProp("transformCopied",k=>{e=k(e,n)});let t=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let k=r.firstChild;t.push(k.type.name,k.attrs!=k.type.defaultAttrs?k.attrs:null),r=k.content}let l=n.someProp("clipboardSerializer")||zu.fromSchema(n.state.schema),u=Q5(),f=u.createElement("div");f.appendChild(l.serializeFragment(r,{document:u}));let p=f.firstChild,m,g=0;for(;p&&p.nodeType==1&&(m=G5[p.nodeName.toLowerCase()]);){for(let k=m.length-1;k>=0;k--){let b=u.createElement(m[k]);for(;f.firstChild;)b.appendChild(f.firstChild);f.appendChild(b),g++}p=f.firstChild}p&&p.nodeType==1&&p.setAttribute("data-pm-slice",`${i} ${o}${g?` -${g}`:""} ${JSON.stringify(t)}`);let w=n.someProp("clipboardTextSerializer",k=>k(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:f,text:w,slice:e}}function V5(n,e,t,r,i){let o=i.parent.type.spec.code,l,u;if(!t&&!e)return null;let f=e&&(r||o||!t);if(f){if(n.someProp("transformPastedText",w=>{e=w(e,o||r,n)}),o)return e?new Ne(_e.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Ne.empty;let g=n.someProp("clipboardTextParser",w=>w(e,i,r,n));if(g)u=g;else{let w=i.marks(),{schema:k}=n.state,b=zu.fromSchema(k);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(A=>{let P=l.appendChild(document.createElement("p"));A&&P.appendChild(b.serializeNode(k.text(A,w)))})}}else n.someProp("transformPastedHTML",g=>{t=g(t,n)}),l=JN(t),Mp&&GN(l);let p=l&&l.querySelector("[data-pm-slice]"),m=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(m&&m[3])for(let g=+m[3];g>0;g--){let w=l.firstChild;for(;w&&w.nodeType!=1;)w=w.nextSibling;if(!w)break;l=w}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||Iu.fromSchema(n.state.schema)).parseSlice(l,{preserveWhitespace:!!(f||m),context:i,ruleFromNode(w){return w.nodeName=="BR"&&!w.nextSibling&&w.parentNode&&!VN.test(w.parentNode.nodeName)?{ignore:!0}:null}})),m)u=QN($k(u,+m[1],+m[2]),m[4]);else if(u=Ne.maxOpen(qN(u.content,i),!0),u.openStart||u.openEnd){let g=0,w=0;for(let k=u.content.firstChild;g<u.openStart&&!k.type.spec.isolating;g++,k=k.firstChild);for(let k=u.content.lastChild;w<u.openEnd&&!k.type.spec.isolating;w++,k=k.lastChild);u=$k(u,g,w)}return n.someProp("transformPasted",g=>{u=g(u,n)}),u}const VN=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function qN(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),o,l=[];if(n.forEach(u=>{if(!l)return;let f=i.findWrapping(u.type),p;if(!f)return l=null;if(p=l.length&&o.length&&K5(f,o,u,l[l.length-1],0))l[l.length-1]=p;else{l.length&&(l[l.length-1]=J5(l[l.length-1],o.length));let m=q5(u,f);l.push(m),i=i.matchType(m.type),o=f}}),l)return _e.from(l)}return n}function q5(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,_e.from(n));return n}function K5(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let o=K5(n,e,t,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(_e.from(q5(t,n,i+1))))}}function J5(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,J5(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(_e.empty,!0);return n.copy(t.append(r))}function $2(n,e,t,r,i,o){let l=e<0?n.firstChild:n.lastChild,u=l.content;return n.childCount>1&&(o=0),i<r-1&&(u=$2(u,e,t,r,i+1,o)),i>=t&&(u=e<0?l.contentMatchAt(0).fillBefore(u,o<=i).append(u):u.append(l.contentMatchAt(l.childCount).fillBefore(_e.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,l.copy(u))}function $k(n,e,t){return e<n.openStart&&(n=new Ne($2(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new Ne($2(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const G5={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Hk=null;function Q5(){return Hk||(Hk=document.implementation.createHTMLDocument("title"))}let Uy=null;function KN(n){let e=window.trustedTypes;return e?(Uy||(Uy=e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Uy.createHTML(n)):n}function JN(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=Q5().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&G5[r[1].toLowerCase()])&&(n=i.map(o=>"<"+o+">").join("")+n+i.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=KN(n),i)for(let o=0;o<i.length;o++)t=t.querySelector(i[o])||t;return t}function GN(n){let e=n.querySelectorAll(cr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function QN(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:o,openEnd:l}=n;for(let u=r.length-2;u>=0;u-=2){let f=t.nodes[r[u]];if(!f||f.hasRequiredAttrs())break;i=_e.from(f.create(r[u+1],i)),o++,l++}return new Ne(i,o,l)}const Er={},Tr={},YN={touchstart:!0,touchmove:!0};class XN{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function ZN(n){for(let e in Er){let t=Er[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{tA(n,r)&&!Tv(n,r)&&(n.editable||!(r.type in Tr))&&t(n,r)},YN[e]?{passive:!0}:void 0)}Cr&&n.dom.addEventListener("input",()=>null),H2(n)}function Ql(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function eA(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function H2(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>Tv(n,r))})}function Tv(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function tA(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function nA(n,e){!Tv(n,e)&&Er[e.type]&&(n.editable||!(e.type in Tr))&&Er[e.type](n,e)}Tr.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!X5(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Gs&&cr&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),$f&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,mu(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||HN(n,t)?t.preventDefault():Ql(n,"key")};Tr.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Tr.keypress=(n,e)=>{let t=e;if(X5(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Wi&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof st)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",o=>o(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function Q1(n){return{left:n.clientX,top:n.clientY}}function rA(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Mv(n,e,t,r,i){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let l=o.depth+1;l>0;l--)if(n.someProp(e,u=>l>o.depth?u(n,t,o.nodeAfter,o.before(l),i,!0):u(n,t,o.node(l),o.before(l),i,!1)))return!0;return!1}function Mf(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function iA(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&Ze.isSelectable(r)?(Mf(n,new Ze(t)),!0):!1}function oA(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof Ze&&(r=t.node);let o=n.state.doc.resolve(e);for(let l=o.depth+1;l>0;l--){let u=l>o.depth?o.nodeAfter:o.node(l);if(Ze.isSelectable(u)){r&&t.$from.depth>0&&l>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?i=o.before(t.$from.depth):i=o.before(l);break}}return i!=null?(Mf(n,Ze.create(n.state.doc,i)),!0):!1}function sA(n,e,t,r,i){return Mv(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(i?oA(n,t):iA(n,t))}function lA(n,e,t,r){return Mv(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function aA(n,e,t,r){return Mv(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||uA(n,t,r)}function uA(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Mf(n,st.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let l=o>i.depth?i.nodeAfter:i.node(o),u=i.before(o);if(l.inlineContent)Mf(n,st.create(r,u+1,u+1+l.content.size));else if(Ze.isSelectable(l))Mf(n,Ze.create(r,u));else continue;return!0}}function Nv(n){return E1(n)}const Y5=Wi?"metaKey":"ctrlKey";Er.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Nv(n),i=Date.now(),o="singleClick";i-n.input.lastClick.time<500&&rA(t,n.input.lastClick)&&!t[Y5]&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:o};let l=n.posAtCoords(Q1(t));l&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new cA(n,l,t,!!r)):(o=="doubleClick"?lA:aA)(n,l.pos,l.inside,t)?t.preventDefault():Ql(n,"pointer"))};class cA{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Y5],this.allowDefault=r.shiftKey;let o,l;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),l=t.inside;else{let m=e.state.doc.resolve(t.pos);o=m.parent,l=m.depth?m.before():0}const u=i?null:r.target,f=u?e.docView.nearestDesc(u,!0):null;this.target=f&&f.dom.nodeType==1?f.dom:null;let{selection:p}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||p instanceof Ze&&p.from<=l&&p.to>l)&&(this.mightDrag={node:o,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&So&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ql(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Qs(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Q1(e))),this.updateAllowDefault(e),this.allowDefault||!t?Ql(this.view,"pointer"):sA(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Cr&&this.mightDrag&&!this.mightDrag.node.isAtom||cr&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Mf(this.view,et.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Ql(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ql(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Er.touchstart=n=>{n.input.lastTouch=Date.now(),Nv(n),Ql(n,"pointer")};Er.touchmove=n=>{n.input.lastTouch=Date.now(),Ql(n,"pointer")};Er.contextmenu=n=>Nv(n);function X5(n,e){return n.composing?!0:Cr&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const fA=Gs?5e3:-1;Tr.compositionstart=Tr.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof st&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),E1(n,!0),n.markCursor=null;else if(E1(n,!e.selection.empty),So&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let l=o<0?i.lastChild:i.childNodes[o-1];if(!l)break;if(l.nodeType==3){let u=n.domSelection();u&&u.collapse(l,l.nodeValue.length);break}else i=l,o=-1}}n.input.composing=!0}Z5(n,fA)};Tr.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,Z5(n,20))};function Z5(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>E1(n),e))}function eS(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=dA());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function hA(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=iN(e.focusNode,e.focusOffset),r=oN(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let l=t.pmViewDesc;if(!(!l||!l.isText(t.nodeValue)))return r}}return t||r}function dA(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function E1(n,e=!1){if(!(Gs&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),eS(n),e||n.docView&&n.docView.dirty){let t=_v(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function pA(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const pp=Jr&&Xl<15||$f&&cN<604;Er.copy=Tr.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let o=pp?null:t.clipboardData,l=r.content(),{dom:u,text:f}=Ev(n,l);o?(t.preventDefault(),o.clearData(),o.setData("text/html",u.innerHTML),o.setData("text/plain",f)):pA(n,u),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function mA(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function gA(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?mp(n,r.value,null,i,e):mp(n,r.textContent,r.innerHTML,i,e)},50)}function mp(n,e,t,r,i){let o=V5(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",f=>f(n,i,o||Ne.empty)))return!0;if(!o)return!1;let l=mA(o),u=l?n.state.tr.replaceSelectionWith(l,r):n.state.tr.replaceSelection(o);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function tS(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Tr.paste=(n,e)=>{let t=e;if(n.composing&&!Gs)return;let r=pp?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&mp(n,tS(r),r.getData("text/html"),i,t)?t.preventDefault():gA(n,t)};class nS{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const yA=Wi?"altKey":"ctrlKey";function rS(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[yA]}Er.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,o=i.empty?null:n.posAtCoords(Q1(t)),l;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof Ze?i.to-1:i.to))){if(r&&r.mightDrag)l=Ze.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let g=n.docView.nearestDesc(t.target,!0);g&&g.node.type.spec.draggable&&g!=n.docView&&(l=Ze.create(n.state.doc,g.posBefore))}}let u=(l||n.state.selection).content(),{dom:f,text:p,slice:m}=Ev(n,u);(!t.dataTransfer.files.length||!cr||N5>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(pp?"Text":"text/html",f.innerHTML),t.dataTransfer.effectAllowed="copyMove",pp||t.dataTransfer.setData("text/plain",p),n.dragging=new nS(m,rS(n,t),l)};Er.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Tr.dragover=Tr.dragenter=(n,e)=>e.preventDefault();Tr.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(Q1(t));if(!i)return;let o=n.state.doc.resolve(i.pos),l=r&&r.slice;l?n.someProp("transformPasted",b=>{l=b(l,n)}):l=V5(n,tS(t.dataTransfer),pp?null:t.dataTransfer.getData("text/html"),!1,o);let u=!!(r&&rS(n,t));if(n.someProp("handleDrop",b=>b(n,t,l||Ne.empty,u))){t.preventDefault();return}if(!l)return;t.preventDefault();let f=l?eM(n.state.doc,o.pos,l):o.pos;f==null&&(f=o.pos);let p=n.state.tr;if(u){let{node:b}=r;b?b.replace(p):p.deleteSelection()}let m=p.mapping.map(f),g=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,w=p.doc;if(g?p.replaceRangeWith(m,m,l.content.firstChild):p.replaceRange(m,m,l),p.doc.eq(w))return;let k=p.doc.resolve(m);if(g&&Ze.isSelectable(l.content.firstChild)&&k.nodeAfter&&k.nodeAfter.sameMarkup(l.content.firstChild))p.setSelection(new Ze(k));else{let b=p.mapping.map(f);p.mapping.maps[p.mapping.maps.length-1].forEach((A,P,F,V)=>b=V),p.setSelection(Cv(n,k,p.doc.resolve(b)))}n.focus(),n.dispatch(p.setMeta("uiEvent","drop"))};Er.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Qs(n)},20))};Er.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Er.beforeinput=(n,e)=>{if(cr&&Gs&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,mu(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Tr)Er[n]=Tr[n];function gp(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class T1{constructor(e,t){this.toDOM=e,this.spec=t||xu,this.side=this.spec.side||0}map(e,t,r,i){let{pos:o,deleted:l}=e.mapResult(t.from+i,this.side<0?-1:1);return l?null:new Xn(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof T1&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&gp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ea{constructor(e,t){this.attrs=e,this.spec=t||xu}map(e,t,r,i){let o=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,l=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=l?null:new Xn(o,l,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof ea&&gp(this.attrs,e.attrs)&&gp(this.spec,e.spec)}static is(e){return e.type instanceof ea}destroy(){}}class Av{constructor(e,t){this.attrs=e,this.spec=t||xu}map(e,t,r,i){let o=e.mapResult(t.from+i,1);if(o.deleted)return null;let l=e.mapResult(t.to+i,-1);return l.deleted||l.pos<=o.pos?null:new Xn(o.pos-r,l.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),o;return i==t.from&&!(o=e.child(r)).isText&&i+o.nodeSize==t.to}eq(e){return this==e||e instanceof Av&&gp(this.attrs,e.attrs)&&gp(this.spec,e.spec)}destroy(){}}class Xn{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Xn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Xn(e,e,new T1(t,r))}static inline(e,t,r,i){return new Xn(e,t,new ea(r,i))}static node(e,t,r,i){return new Xn(e,t,new Av(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ea}get widget(){return this.type instanceof T1}}const vf=[],xu={};class Gt{constructor(e,t){this.local=e.length?e:vf,this.children=t.length?t:vf}static create(e,t){return t.length?M1(t,e,0,xu):ur}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,o){for(let l=0;l<this.local.length;l++){let u=this.local[l];u.from<=t&&u.to>=e&&(!o||o(u.spec))&&r.push(u.copy(u.from+i,u.to+i))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<t&&this.children[l+1]>e){let u=this.children[l]+1;this.children[l+2].findInner(e-u,t-u,r,i+u,o)}}map(e,t,r){return this==ur||e.maps.length==0?this:this.mapInner(e,t,0,0,r||xu)}mapInner(e,t,r,i,o){let l;for(let u=0;u<this.local.length;u++){let f=this.local[u].map(e,r,i);f&&f.type.valid(t,f)?(l||(l=[])).push(f):o.onRemove&&o.onRemove(this.local[u].spec)}return this.children.length?vA(this.children,l||[],e,t,r,i,o):l?new Gt(l.sort(Su),vf):ur}add(e,t){return t.length?this==ur?Gt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,o=0;e.forEach((u,f)=>{let p=f+r,m;if(m=oS(t,u,p)){for(i||(i=this.children.slice());o<i.length&&i[o]<f;)o+=3;i[o]==f?i[o+2]=i[o+2].addInner(u,m,p+1):i.splice(o,0,f,f+u.nodeSize,M1(m,u,p+1,xu)),o+=3}});let l=iS(o?sS(t):t,-r);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||l.splice(u--,1);return new Gt(l.length?this.local.concat(l).sort(Su):this.local,i||this.children)}remove(e){return e.length==0||this==ur?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let l,u=r[o]+t,f=r[o+1]+t;for(let m=0,g;m<e.length;m++)(g=e[m])&&g.from>u&&g.to<f&&(e[m]=null,(l||(l=[])).push(g));if(!l)continue;r==this.children&&(r=this.children.slice());let p=r[o+2].removeInner(l,u+1);p!=ur?r[o+2]=p:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,l;o<e.length;o++)if(l=e[o])for(let u=0;u<i.length;u++)i[u].eq(l,t)&&(i==this.local&&(i=this.local.slice()),i.splice(u--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Gt(i,r):ur}forChild(e,t){if(this==ur)return this;if(t.isLeaf)return Gt.empty;let r,i;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let o=e+1,l=o+t.content.size;for(let u=0;u<this.local.length;u++){let f=this.local[u];if(f.from<l&&f.to>o&&f.type instanceof ea){let p=Math.max(o,f.from)-o,m=Math.min(l,f.to)-o;p<m&&(i||(i=[])).push(f.copy(p,m))}}if(i){let u=new Gt(i.sort(Su),vf);return r?new ql([u,r]):u}return r||ur}eq(e){if(this==e)return!0;if(!(e instanceof Gt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Iv(this.localsInner(e))}localsInner(e){if(this==ur)return vf;if(e.inlineContent||!this.local.some(ea.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ea||t.push(this.local[r]);return t}forEachSet(e){e(this)}}Gt.empty=new Gt([],[]);Gt.removeOverlap=Iv;const ur=Gt.empty;class ql{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,xu));return ql.from(r)}forChild(e,t){if(t.isLeaf)return Gt.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,t);o!=ur&&(o instanceof ql?r=r.concat(o.members):r.push(o))}return ql.from(r)}eq(e){if(!(e instanceof ql)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let l=0;l<o.length;l++)t.push(o[l])}}return t?Iv(r?t:t.sort(Su)):vf}static from(e){switch(e.length){case 0:return ur;case 1:return e[0];default:return new ql(e.every(t=>t instanceof Gt)?e:e.reduce((t,r)=>t.concat(r instanceof Gt?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function vA(n,e,t,r,i,o,l){let u=n.slice();for(let p=0,m=o;p<t.maps.length;p++){let g=0;t.maps[p].forEach((w,k,b,A)=>{let P=A-b-(k-w);for(let F=0;F<u.length;F+=3){let V=u[F+1];if(V<0||w>V+m-g)continue;let I=u[F]+m-g;k>=I?u[F+1]=w<=I?-2:-1:w>=m&&P&&(u[F]+=P,u[F+1]+=P)}g+=P}),m=t.maps[p].map(m,-1)}let f=!1;for(let p=0;p<u.length;p+=3)if(u[p+1]<0){if(u[p+1]==-2){f=!0,u[p+1]=-1;continue}let m=t.map(n[p]+o),g=m-i;if(g<0||g>=r.content.size){f=!0;continue}let w=t.map(n[p+1]+o,-1),k=w-i,{index:b,offset:A}=r.content.findIndex(g),P=r.maybeChild(b);if(P&&A==g&&A+P.nodeSize==k){let F=u[p+2].mapInner(t,P,m+1,n[p]+o+1,l);F!=ur?(u[p]=g,u[p+1]=k,u[p+2]=F):(u[p+1]=-2,f=!0)}else f=!0}if(f){let p=wA(u,n,e,t,i,o,l),m=M1(p,r,0,l);e=m.local;for(let g=0;g<u.length;g+=3)u[g+1]<0&&(u.splice(g,3),g-=3);for(let g=0,w=0;g<m.children.length;g+=3){let k=m.children[g];for(;w<u.length&&u[w]<k;)w+=3;u.splice(w,0,m.children[g],m.children[g+1],m.children[g+2])}}return new Gt(e.sort(Su),u)}function iS(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Xn(i.from+e,i.to+e,i.type))}return t}function wA(n,e,t,r,i,o,l){function u(f,p){for(let m=0;m<f.local.length;m++){let g=f.local[m].map(r,i,p);g?t.push(g):l.onRemove&&l.onRemove(f.local[m].spec)}for(let m=0;m<f.children.length;m+=3)u(f.children[m+2],f.children[m]+p+1)}for(let f=0;f<n.length;f+=3)n[f+1]==-1&&u(n[f+2],e[f]+o+1);return t}function oS(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let o=0,l;o<n.length;o++)(l=n[o])&&l.from>t&&l.to<r&&((i||(i=[])).push(l),n[o]=null);return i}function sS(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function M1(n,e,t,r){let i=[],o=!1;e.forEach((u,f)=>{let p=oS(n,u,f+t);if(p){o=!0;let m=M1(p,u,t+f+1,r);m!=ur&&i.push(f,f+u.nodeSize,m)}});let l=iS(o?sS(n):n,-t).sort(Su);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||(r.onRemove&&r.onRemove(l[u].spec),l.splice(u--,1));return l.length||i.length?new Gt(l,i):ur}function Su(n,e){return n.from-e.from||n.to-e.to}function Iv(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[i]=o.copy(o.from,r.to),Vk(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),Vk(e,i,r.copy(o.from,r.to)));break}}}return e}function Vk(n,e,t){for(;e<n.length&&Su(t,n[e])>0;)e++;n.splice(e,0,t)}function Wy(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=ur&&e.push(r)}),n.cursorWrapper&&e.push(Gt.create(n.state.doc,[n.cursorWrapper.deco])),ql.from(e)}const kA={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},xA=Jr&&Xl<=11;class SA{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class bA{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SA,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Jr&&Xl<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),xA&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,kA)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Lk(this.view)){if(this.suppressingSelectionUpdates)return Qs(this.view);if(Jr&&Xl<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Pu(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let o=e.focusNode;o;o=jf(o))t.add(o);for(let o=e.anchorNode;o;o=jf(o))if(t.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Lk(e)&&!this.ignoreSelectionChange(r),o=-1,l=-1,u=!1,f=[];if(e.editable)for(let m=0;m<t.length;m++){let g=this.registerMutation(t[m],f);g&&(o=o<0?g.from:Math.min(g.from,o),l=l<0?g.to:Math.max(g.to,l),g.typeOver&&(u=!0))}if(So&&f.length){let m=f.filter(g=>g.nodeName=="BR");if(m.length==2){let[g,w]=m;g.parentNode&&g.parentNode.parentNode==w.parentNode?w.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let w of m){let k=w.parentNode;k&&k.nodeName=="LI"&&(!g||EA(e,g)!=k)&&w.remove()}}}let p=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&J1(r)&&(p=_v(e))&&p.eq(et.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Qs(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,l),_A(e)),this.handleDOMChange(o,l,u,f),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Qs(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let m=0;m<e.addedNodes.length;m++){let g=e.addedNodes[m];t.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Jr&&Xl<=11&&e.addedNodes.length)for(let m=0;m<e.addedNodes.length;m++){let{previousSibling:g,nextSibling:w}=e.addedNodes[m];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(i=g),(!w||Array.prototype.indexOf.call(e.addedNodes,w)<0)&&(o=w)}let l=i&&i.parentNode==e.target?Yn(i)+1:0,u=r.localPosFromDOM(e.target,l,-1),f=o&&o.parentNode==e.target?Yn(o):e.target.childNodes.length,p=r.localPosFromDOM(e.target,f,1);return{from:u,to:p}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let qk=new WeakMap,Kk=!1;function _A(n){if(!qk.has(n)&&(qk.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=So,Kk)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Kk=!0}}function Jk(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,l=n.domAtPos(n.state.selection.anchor);return Pu(l.node,l.offset,i,o)&&([t,r,i,o]=[i,o,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:o}}function CA(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return Jk(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?Jk(n,t):null}function EA(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function TA(n,e,t){let{node:r,fromOffset:i,toOffset:o,from:l,to:u}=n.docView.parseRange(e,t),f=n.domSelectionRange(),p,m=f.anchorNode;if(m&&n.dom.contains(m.nodeType==1?m:m.parentNode)&&(p=[{node:m,offset:f.anchorOffset}],J1(f)||p.push({node:f.focusNode,offset:f.focusOffset})),cr&&n.input.lastKeyCode===8)for(let P=o;P>i;P--){let F=r.childNodes[P-1],V=F.pmViewDesc;if(F.nodeName=="BR"&&!V){o=P;break}if(!V||V.size)break}let g=n.state.doc,w=n.someProp("domParser")||Iu.fromSchema(n.state.schema),k=g.resolve(l),b=null,A=w.parse(r,{topNode:k.parent,topMatch:k.parent.contentMatchAt(k.index()),topOpen:!0,from:i,to:o,preserveWhitespace:k.parent.type.whitespace=="pre"?"full":!0,findPositions:p,ruleFromNode:MA,context:k});if(p&&p[0].pos!=null){let P=p[0].pos,F=p[1]&&p[1].pos;F==null&&(F=P),b={anchor:P+l,head:F+l}}return{doc:A,sel:b,from:l,to:u}}function MA(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Cr&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Cr&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const NA=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function AA(n,e,t,r,i){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let q=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,_=_v(n,q);if(_&&!n.state.selection.eq(_)){if(cr&&Gs&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",D=>D(n,mu(13,"Enter"))))return;let U=n.state.tr.setSelection(_);q=="pointer"?U.setMeta("pointer",!0):q=="key"&&U.scrollIntoView(),o&&U.setMeta("composition",o),n.dispatch(U)}return}let l=n.state.doc.resolve(e),u=l.sharedDepth(t);e=l.before(u+1),t=n.state.doc.resolve(t).after(u+1);let f=n.state.selection,p=TA(n,e,t),m=n.state.doc,g=m.slice(p.from,p.to),w,k;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(w=n.state.selection.to,k="end"):(w=n.state.selection.from,k="start"),n.input.lastKeyCode=null;let b=PA(g.content,p.doc.content,p.from,w,k);if(b&&n.input.domChangeCount++,($f&&n.input.lastIOSEnter>Date.now()-225||Gs)&&i.some(q=>q.nodeType==1&&!NA.test(q.nodeName))&&(!b||b.endA>=b.endB)&&n.someProp("handleKeyDown",q=>q(n,mu(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!b)if(r&&f instanceof st&&!f.empty&&f.$head.sameParent(f.$anchor)&&!n.composing&&!(p.sel&&p.sel.anchor!=p.sel.head))b={start:f.from,endA:f.to,endB:f.to};else{if(p.sel){let q=Gk(n,n.state.doc,p.sel);if(q&&!q.eq(n.state.selection)){let _=n.state.tr.setSelection(q);o&&_.setMeta("composition",o),n.dispatch(_)}}return}n.state.selection.from<n.state.selection.to&&b.start==b.endB&&n.state.selection instanceof st&&(b.start>n.state.selection.from&&b.start<=n.state.selection.from+2&&n.state.selection.from>=p.from?b.start=n.state.selection.from:b.endA<n.state.selection.to&&b.endA>=n.state.selection.to-2&&n.state.selection.to<=p.to&&(b.endB+=n.state.selection.to-b.endA,b.endA=n.state.selection.to)),Jr&&Xl<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>p.from&&p.doc.textBetween(b.start-p.from-1,b.start-p.from+1)=="  "&&(b.start--,b.endA--,b.endB--);let A=p.doc.resolveNoCache(b.start-p.from),P=p.doc.resolveNoCache(b.endB-p.from),F=m.resolve(b.start),V=A.sameParent(P)&&A.parent.inlineContent&&F.end()>=b.endA,I;if(($f&&n.input.lastIOSEnter>Date.now()-225&&(!V||i.some(q=>q.nodeName=="DIV"||q.nodeName=="P"))||!V&&A.pos<p.doc.content.size&&(!A.sameParent(P)||!A.parent.inlineContent)&&(I=et.findFrom(p.doc.resolve(A.pos+1),1,!0))&&I.head>A.pos)&&n.someProp("handleKeyDown",q=>q(n,mu(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>b.start&&OA(m,b.start,b.endA,A,P)&&n.someProp("handleKeyDown",q=>q(n,mu(8,"Backspace")))){Gs&&cr&&n.domObserver.suppressSelectionUpdates();return}cr&&b.endB==b.start&&(n.input.lastChromeDelete=Date.now()),Gs&&!V&&A.start()!=P.start()&&P.parentOffset==0&&A.depth==P.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==b.endA&&(b.endB-=2,P=p.doc.resolveNoCache(b.endB-p.from),setTimeout(()=>{n.someProp("handleKeyDown",function(q){return q(n,mu(13,"Enter"))})},20));let W=b.start,B=b.endA,z,H,Q;if(V){if(A.pos==P.pos)Jr&&Xl<=11&&A.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Qs(n),20)),z=n.state.tr.delete(W,B),H=m.resolve(b.start).marksAcross(m.resolve(b.endA));else if(b.endA==b.endB&&(Q=IA(A.parent.content.cut(A.parentOffset,P.parentOffset),F.parent.content.cut(F.parentOffset,b.endA-F.start()))))z=n.state.tr,Q.type=="add"?z.addMark(W,B,Q.mark):z.removeMark(W,B,Q.mark);else if(A.parent.child(A.index()).isText&&A.index()==P.index()-(P.textOffset?0:1)){let q=A.parent.textBetween(A.parentOffset,P.parentOffset);if(n.someProp("handleTextInput",_=>_(n,W,B,q)))return;z=n.state.tr.insertText(q,W,B)}}if(z||(z=n.state.tr.replace(W,B,p.doc.slice(b.start-p.from,b.endB-p.from))),p.sel){let q=Gk(n,z.doc,p.sel);q&&!(cr&&n.composing&&q.empty&&(b.start!=b.endB||n.input.lastChromeDelete<Date.now()-100)&&(q.head==W||q.head==z.mapping.map(B)-1)||Jr&&q.empty&&q.head==W)&&z.setSelection(q)}H&&z.ensureMarks(H),o&&z.setMeta("composition",o),n.dispatch(z.scrollIntoView())}function Gk(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Cv(n,e.resolve(t.anchor),e.resolve(t.head))}function IA(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,o=r,l,u,f;for(let m=0;m<r.length;m++)i=r[m].removeFromSet(i);for(let m=0;m<t.length;m++)o=t[m].removeFromSet(o);if(i.length==1&&o.length==0)u=i[0],l="add",f=m=>m.mark(u.addToSet(m.marks));else if(i.length==0&&o.length==1)u=o[0],l="remove",f=m=>m.mark(u.removeFromSet(m.marks));else return null;let p=[];for(let m=0;m<e.childCount;m++)p.push(f(e.child(m)));if(_e.from(p).eq(n))return{mark:u,type:l}}function OA(n,e,t,r,i){if(t-e<=i.pos-r.pos||jy(r,!0,!1)<i.pos)return!1;let o=n.resolve(e);if(!r.parent.isTextblock){let u=o.nodeAfter;return u!=null&&t==e+u.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let l=n.resolve(jy(o,!0,!0));return!l.parent.isTextblock||l.pos>t||jy(l,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function jy(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function PA(n,e,t,r,i){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:l,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let f=Math.max(0,o-Math.min(l,u));r-=l+f-o}if(l<o&&n.size<e.size){let f=r<=o&&r>=l?o-r:0;o-=f,o&&o<e.size&&Qk(e.textBetween(o-1,o+1))&&(o+=f?1:-1),u=o+(u-l),l=o}else if(u<o){let f=r<=o&&r>=u?o-r:0;o-=f,o&&o<n.size&&Qk(n.textBetween(o-1,o+1))&&(o+=f?1:-1),l=o+(l-u),u=o}return{start:o,endA:l,endB:u}}function Qk(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class RA{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new XN,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(tx),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Zk(this),Xk(this),this.nodeViews=ex(this),this.docView=Ik(this.state.doc,Yk(this),Wy(this),this.dom,this),this.domObserver=new bA(this,(r,i,o,l)=>AA(this,r,i,o,l)),this.domObserver.start(),ZN(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&H2(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(tx),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,o=!1,l=!1;e.storedMarks&&this.composing&&(eS(this),l=!0),this.state=e;let u=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let k=ex(this);zA(k,this.nodeViews)&&(this.nodeViews=k,o=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&H2(this),this.editable=Zk(this),Xk(this);let f=Wy(this),p=Yk(this),m=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",g=o||!this.docView.matchesNode(e.doc,p,f);(g||!e.selection.eq(i.selection))&&(l=!0);let w=m=="preserve"&&l&&this.dom.style.overflowAnchor==null&&dN(this);if(l){this.domObserver.stop();let k=g&&(Jr||cr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&DA(i.selection,e.selection);if(g){let b=cr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=hA(this)),(o||!this.docView.update(e.doc,p,f,this))&&(this.docView.updateOuterDeco(p),this.docView.destroy(),this.docView=Ik(e.doc,p,f,this.dom,this)),b&&!this.trackWrites&&(k=!0)}k||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&LN(this))?Qs(this,k):(j5(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),m=="reset"?this.dom.scrollTop=0:m=="to selection"?this.scrollToSelection():w&&pN(w)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Ze){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Ck(this,t.getBoundingClientRect(),e)}else Ck(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new nS(e.slice,e.move,i<0?void 0:Ze.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let l=0;l<this.directPlugins.length;l++){let u=this.directPlugins[l].props[e];if(u!=null&&(i=t?t(u):u))return i}let o=this.state.plugins;if(o)for(let l=0;l<o.length;l++){let u=o[l].props[e];if(u!=null&&(i=t?t(u):u))return i}}hasFocus(){if(Jr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&mN(this.dom),Qs(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return kN(this,e)}coordsAtPos(e,t=1){return R5(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return CN(this,t||this.state,e)}pasteHTML(e,t){return mp(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return mp(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Ev(this,e)}destroy(){this.docView&&(eA(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Wy(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,nN())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return nA(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Cr&&this.root.nodeType===11&&lN(this.dom.ownerDocument)==this.dom&&CA(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Yk(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Xn.node(0,n.state.doc.content.size,e)]}function Xk(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Xn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Zk(n){return!n.someProp("editable",e=>e(n.state)===!1)}function DA(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function ex(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function zA(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function tx(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var lS=n=>{throw TypeError(n)},aS=(n,e,t)=>e.has(n)||lS("Cannot "+t),Ve=(n,e,t)=>(aS(n,e,"read from private field"),t?t.call(n):e.get(n)),Kn=(n,e,t)=>e.has(n)?lS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Zt=(n,e,t,r)=>(aS(n,e,"write to private field"),e.set(n,t),t),wf,du,kf,Ui,Wl,Vd,Ym,Xm,pi,jl,xf,Zm,Sf,qd,e1,pu,Kd;function aa(n,e){return n.meta={package:"@milkdown/core",group:"System",...e},n}const uS={strong:(n,e,t,r)=>{const i=n.marker||t.options.strong||"*",o=t.enter("strong"),l=t.createTracker(r);let u=l.move(i+i);return u+=l.move(t.containerPhrasing(n,{before:u,after:i,...l.current()})),u+=l.move(i+i),o(),u},emphasis:(n,e,t,r)=>{const i=n.marker||t.options.emphasis||"*",o=t.enter("emphasis"),l=t.createTracker(r);let u=l.move(i);return u+=l.move(t.containerPhrasing(n,{before:u,after:i,...l.current()})),u+=l.move(i),o(),u}},bu=St({},"editorView"),Jd=St({},"editorState"),$y=St([],"initTimer"),nx=St({},"editor"),yp=St([],"inputRules"),bo=St([],"prosePlugins"),vp=St([],"remarkPlugins"),wp=St([],"nodeView"),kp=St([],"markView"),_u=St(E2().use(w2).use(b2),"remark"),Nf=St({handlers:uS},"remarkStringifyOptions"),t1=ia("ConfigReady");function LA(n){const e=t=>(t.record(t1),async()=>(await n(t),t.done(t1),()=>{t.clearTimer(t1)}));return aa(e,{displayName:"Config"}),e}const Cu=ia("InitReady");function FA(n){const e=t=>(t.inject(nx,n).inject(bo,[]).inject(vp,[]).inject(yp,[]).inject(wp,[]).inject(kp,[]).inject(Nf,{handlers:uS}).inject(_u,E2().use(w2).use(b2)).inject($y,[t1]).record(Cu),async()=>{await t.waitTimers($y);const r=t.get(Nf);return t.set(_u,E2().use(w2).use(b2,r)),t.done(Cu),()=>{t.remove(nx).remove(bo).remove(vp).remove(yp).remove(wp).remove(kp).remove(Nf).remove(_u).remove($y).clearTimer(Cu)}});return aa(e,{displayName:"Init"}),e}const xo=ia("SchemaReady"),Hy=St([],"schemaTimer"),is=St({},"schema"),Af=St([],"nodes"),If=St([],"marks");function rx(n){var e;return{...n,parseDOM:(e=n.parseDOM)==null?void 0:e.map(t=>({priority:n.priority,...t}))}}const cS=n=>(n.inject(is,{}).inject(Af,[]).inject(If,[]).inject(Hy,[Cu]).record(xo),async()=>{await n.waitTimers(Hy);const e=n.get(_u),r=n.get(vp).reduce((u,f)=>u.use(f.plugin,f.options),e);n.set(_u,r);const i=Object.fromEntries(n.get(Af).map(([u,f])=>[u,rx(f)])),o=Object.fromEntries(n.get(If).map(([u,f])=>[u,rx(f)])),l=new e7({nodes:i,marks:o});return n.set(is,l),n.done(xo),()=>{n.remove(is).remove(Af).remove(If).remove(Hy).clearTimer(xo)}});aa(cS,{displayName:"Schema"});class fS{constructor(){Kn(this,wf),Kn(this,du),Zt(this,wf,new Yx),Zt(this,du,null),this.setCtx=e=>{Zt(this,du,e)}}get ctx(){return Ve(this,du)}create(e,t){const r=e.create(Ve(this,wf).sliceMap);return r.set(t),r}get(e){return Ve(this,wf).get(e).get()}remove(e){return Ve(this,wf).remove(e)}call(e,t){if(Ve(this,du)==null)throw T8();const i=this.get(e)(t),o=Ve(this,du).get(bu);return i(o.state,o.dispatch,o)}}wf=new WeakMap;du=new WeakMap;function BA(n="cmdKey"){return St(()=>()=>!1,n)}const Mt=St(new fS,"commands"),Vy=St([xo],"commandsTimer"),np=ia("CommandsReady"),hS=n=>{const e=new fS;return e.setCtx(n),n.inject(Mt,e).inject(Vy,[xo]).record(np),async()=>(await n.waitTimers(Vy),n.done(np),()=>{n.remove(Mt).remove(Vy).clearTimer(np)})};aa(hS,{displayName:"Commands"});const n1=ia("ParserReady"),dS=()=>{throw ov()},Of=St(dS,"parser"),qy=St([],"parserTimer"),pS=n=>(n.inject(Of,dS).inject(qy,[xo]).record(n1),async()=>{await n.waitTimers(qy);const e=n.get(_u),t=n.get(is);return n.set(Of,RT.create(t,e)),n.done(n1),()=>{n.remove(Of).remove(qy).clearTimer(n1)}});aa(pS,{displayName:"Parser"});const rp=ia("SerializerReady"),Ky=St([],"serializerTimer"),mS=()=>{throw ov()},Pf=St(mS,"serializer"),gS=n=>(n.inject(Pf,mS).inject(Ky,[xo]).record(rp),async()=>{await n.waitTimers(Ky);const e=n.get(_u),t=n.get(is);return n.set(Pf,zT.create(t,e)),n.done(rp),()=>{n.remove(Pf).remove(Ky).clearTimer(rp)}});aa(gS,{displayName:"Serializer"});const r1=St("","defaultValue"),i1=St(n=>n,"stateOptions"),Jy=St([],"editorStateTimer"),o1=ia("EditorStateReady");function UA(n,e,t){if(typeof n=="string")return e(n);if(n.type==="html")return Iu.fromSchema(t).parse(n.dom);if(n.type==="json")return wo.fromJSON(t,n.value);throw k8(n)}const WA=new Ln("MILKDOWN_STATE_TRACKER");function jA(n){const e=K1(fM,kv,w5,k5);return n.Backspace=e,n}const yS=n=>(n.inject(r1,"").inject(Jd,{}).inject(i1,e=>e).inject(Jy,[n1,rp,np]).record(o1),async()=>{await n.waitTimers(Jy);const e=n.get(is),t=n.get(Of),r=n.get(yp),i=n.get(i1),o=n.get(bo),l=n.get(r1),u=UA(l,t,e),f=[...o,new Zn({key:WA,state:{init:()=>{},apply:(g,w,k,b)=>{n.set(Jd,b)}}}),kM({rules:r}),E5(jA(GM))];n.set(bo,f);const p=i({schema:e,doc:u,plugins:f}),m=gu.create(p);return n.set(Jd,m),n.done(o1),()=>{n.remove(r1).remove(Jd).remove(i1).remove(Jy).clearTimer(o1)}});aa(yS,{displayName:"EditorState"});const s1=ia("EditorViewReady"),Gy=St([],"editorViewTimer"),ip=St({},"editorViewOptions"),l1=St(null,"root"),V2=St(null,"rootDOM"),q2=St({},"rootAttrs");function $A(n,e){const t=document.createElement("div");t.className="milkdown",n.appendChild(t),e.set(V2,t);const r=e.get(q2);return Object.entries(r).forEach(([i,o])=>t.setAttribute(i,o)),t}function HA(n){n.classList.add("editor"),n.setAttribute("role","textbox")}const VA=new Ln("MILKDOWN_VIEW_CLEAR"),vS=n=>(n.inject(l1,document.body).inject(bu,{}).inject(ip,{}).inject(V2,null).inject(q2,{}).inject(Gy,[o1]).record(s1),async()=>{await n.wait(Cu);const e=n.get(l1)||document.body,t=typeof e=="string"?document.querySelector(e):e;n.update(bo,f=>[new Zn({key:VA,view:p=>{const m=t?$A(t,n):void 0;return(()=>{if(m&&t){const w=p.dom;t.replaceChild(m,w),m.appendChild(w)}})(),{destroy:()=>{m!=null&&m.parentNode&&(m==null||m.parentNode.replaceChild(p.dom,m)),m==null||m.remove()}}}}),...f]),await n.waitTimers(Gy);const r=n.get(Jd),i=n.get(ip),o=Object.fromEntries(n.get(wp)),l=Object.fromEntries(n.get(kp)),u=new RA(t,{state:r,nodeViews:o,markViews:l,...i});return HA(u.dom),n.set(bu,u),n.done(s1),()=>{u==null||u.destroy(),n.remove(l1).remove(bu).remove(ip).remove(V2).remove(q2).remove(Gy).clearTimer(s1)}});aa(vS,{displayName:"EditorView"});var Ov=(n=>(n.Idle="Idle",n.OnCreate="OnCreate",n.Created="Created",n.OnDestroy="OnDestroy",n.Destroyed="Destroyed",n))(Ov||{});const qA=class wS{constructor(){Kn(this,kf),Kn(this,Ui),Kn(this,Wl),Kn(this,Vd),Kn(this,Ym),Kn(this,Xm),Kn(this,pi),Kn(this,jl),Kn(this,xf),Kn(this,Zm),Kn(this,Sf),Kn(this,qd),Kn(this,e1),Kn(this,pu),Kn(this,Kd),Zt(this,kf,!1),Zt(this,Ui,"Idle"),Zt(this,Wl,[]),Zt(this,Vd,()=>{}),Zt(this,Ym,new Yx),Zt(this,Xm,new D8),Zt(this,pi,new Map),Zt(this,jl,new Map),Zt(this,xf,new R8(Ve(this,Ym),Ve(this,Xm))),Zt(this,Zm,()=>{const e=LA(async r=>{await Promise.all(Ve(this,Wl).map(i=>i(r)))}),t=[cS,pS,gS,hS,yS,vS,FA(this),e];Ve(this,Sf).call(this,t,Ve(this,jl))}),Zt(this,Sf,(e,t)=>{e.forEach(r=>{const i=Ve(this,xf).produce(Ve(this,kf)?r.meta:void 0),o=r(i);t.set(r,{ctx:i,handler:o,cleanup:void 0})})}),Zt(this,qd,(e,t=!1)=>Promise.all([e].flat().map(r=>{const i=Ve(this,pi).get(r),o=i==null?void 0:i.cleanup;return t?Ve(this,pi).delete(r):Ve(this,pi).set(r,{ctx:void 0,handler:void 0,cleanup:void 0}),typeof o=="function"?o():o}))),Zt(this,e1,async()=>{await Promise.all([...Ve(this,jl).entries()].map(([e,{cleanup:t}])=>typeof t=="function"?t():t)),Ve(this,jl).clear()}),Zt(this,pu,e=>{Zt(this,Ui,e),Ve(this,Vd).call(this,e)}),Zt(this,Kd,e=>[...e.entries()].map(async([t,r])=>{const{ctx:i,handler:o}=r;if(!o)return;const l=await o();e.set(t,{ctx:i,handler:o,cleanup:l})})),this.enableInspector=(e=!0)=>(Zt(this,kf,e),this),this.onStatusChange=e=>(Zt(this,Vd,e),this),this.config=e=>(Ve(this,Wl).push(e),this),this.removeConfig=e=>(Zt(this,Wl,Ve(this,Wl).filter(t=>t!==e)),this),this.use=e=>{const t=[e].flat();return t.flat().forEach(r=>{Ve(this,pi).set(r,{ctx:void 0,handler:void 0,cleanup:void 0})}),Ve(this,Ui)==="Created"&&Ve(this,Sf).call(this,t,Ve(this,pi)),this},this.remove=async e=>Ve(this,Ui)==="OnCreate"?(console.warn("[Milkdown]: You are trying to remove plugins when the editor is creating, this is not recommended, please check your code."),new Promise(t=>{setTimeout(()=>{t(this.remove(e))},50)})):(await Ve(this,qd).call(this,[e].flat(),!0),this),this.create=async()=>Ve(this,Ui)==="OnCreate"?this:(Ve(this,Ui)==="Created"&&await this.destroy(),Ve(this,pu).call(this,"OnCreate"),Ve(this,Zm).call(this),Ve(this,Sf).call(this,[...Ve(this,pi).keys()],Ve(this,pi)),await Promise.all([Ve(this,Kd).call(this,Ve(this,jl)),Ve(this,Kd).call(this,Ve(this,pi))].flat()),Ve(this,pu).call(this,"Created"),this),this.destroy=async(e=!1)=>Ve(this,Ui)==="Destroyed"||Ve(this,Ui)==="OnDestroy"?this:Ve(this,Ui)==="OnCreate"?new Promise(t=>{setTimeout(()=>{t(this.destroy(e))},50)}):(e&&Zt(this,Wl,[]),Ve(this,pu).call(this,"OnDestroy"),await Ve(this,qd).call(this,[...Ve(this,pi).keys()],e),await Ve(this,e1).call(this),Ve(this,pu).call(this,"Destroyed"),this),this.action=e=>e(Ve(this,xf)),this.inspect=()=>Ve(this,kf)?[...Ve(this,jl).values(),...Ve(this,pi).values()].map(({ctx:e})=>{var t;return(t=e==null?void 0:e.inspector)==null?void 0:t.read()}).filter(e=>!!e):(console.warn("[Milkdown]: You are trying to collect inspection when inspector is disabled, please enable inspector by `editor.enableInspector()` first."),[])}static make(){return new wS}get ctx(){return Ve(this,xf)}get status(){return Ve(this,Ui)}};kf=new WeakMap;Ui=new WeakMap;Wl=new WeakMap;Vd=new WeakMap;Ym=new WeakMap;Xm=new WeakMap;pi=new WeakMap;jl=new WeakMap;xf=new WeakMap;Zm=new WeakMap;Sf=new WeakMap;qd=new WeakMap;e1=new WeakMap;pu=new WeakMap;Kd=new WeakMap;let KA=qA,JA=n=>crypto.getRandomValues(new Uint8Array(n)),GA=(n,e,t)=>{let r=(2<<Math.log2(n.length-1))-1,i=-~(1.6*r*e/n.length);return(o=e)=>{let l="";for(;;){let u=t(i),f=i|0;for(;f--;)if(l+=n[u[f]&r]||"",l.length>=o)return l}}},QA=(n,e=21)=>GA(n,e|0,JA);QA("abcedfghicklmn",10);function at(n,e){const t=BA(n),r=i=>async()=>{r.key=t,await i.wait(np);const o=e(i);return i.get(Mt).create(t,o),r.run=l=>i.get(Mt).call(n,l),()=>{i.get(Mt).remove(t)}};return r}function Xr(n){const e=t=>async()=>{await t.wait(xo);const r=n(t);return t.update(yp,i=>[...i,r]),e.inputRule=r,()=>{t.update(yp,i=>i.filter(o=>o!==r))}};return e}function YA(n,e){const t=r=>async()=>{const i=e(r);return r.update(If,o=>[...o.filter(l=>l[0]!==n),[n,i]]),t.id=n,t.schema=i,()=>{r.update(If,o=>o.filter(([l])=>l!==n))}};return t.type=r=>{const i=r.get(is).marks[n];if(!i)throw N8(n);return i},t}function Pv(n,e){const t=r=>async()=>{const i=e(r);return r.update(Af,o=>[...o.filter(l=>l[0]!==n),[n,i]]),t.id=n,t.schema=i,()=>{r.update(Af,o=>o.filter(([l])=>l!==n))}};return t.type=r=>{const i=r.get(is).nodes[n];if(!i)throw M8(n);return i},t}function qi(n){let e;const t=r=>async()=>(await r.wait(xo),e=n(r),r.update(bo,i=>[...i,e]),()=>{r.update(bo,i=>i.filter(o=>o!==e))});return t.plugin=()=>e,t.key=()=>e.spec.key,t}function kS(n){const e=t=>async()=>{await t.wait(xo);const r=n(t),i=E5(r);return t.update(bo,o=>[...o,i]),e.keymap=r,()=>{t.update(bo,o=>o.filter(l=>l!==i))}};return e}function rD(n,e){const t=r=>async()=>{await r.wait(xo);const i=e(r);return n.type(r)instanceof k1?r.update(wp,o=>[...o,[n.id,i]]):r.update(kp,o=>[...o,[n.id,i]]),t.view=i,t.type=n,()=>{n.type(r)instanceof k1?r.update(wp,o=>o.filter(l=>l[0]!==n.id)):r.update(kp,o=>o.filter(l=>l[0]!==n.id))}};return t}function _o(n,e){const t=St(n,e),r=i=>(i.inject(t),()=>()=>{i.remove(t)});return r.key=t,r}function Fn(n,e){const t=_o(e,n),r=Pv(n,o=>o.get(t.key)(o)),i=[t,r];return i.id=r.id,i.node=r,i.type=o=>r.type(o),i.schema=r.schema,i.ctx=t,i.key=t.key,i.extendSchema=o=>l=>()=>{const u=l.get(t.key),p=o(u)(l);l.update(Af,m=>[...m.filter(g=>g[0]!==n),[n,p]]),i.schema=p},i}function Ap(n,e){const t=_o(e,n),r=YA(n,o=>o.get(t.key)(o)),i=[t,r];return i.id=r.id,i.mark=r,i.type=r.type,i.schema=r.schema,i.ctx=t,i.key=t.key,i.extendSchema=o=>l=>()=>{const u=l.get(t.key),p=o(u)(l);l.update(If,m=>[...m.filter(g=>g[0]!==n),[n,p]]),i.schema=p},i}function Zr(n,e){const t=Object.fromEntries(Object.entries(e).map(([l,{shortcuts:u}])=>[l,u])),r=_o(t,`${n}Keymap`),i=kS(l=>{const u=l.get(r.key),f=Object.entries(e).flatMap(([p,{command:m}])=>[u[p]].flat().map(w=>[w,m(l)]));return Object.fromEntries(f)}),o=[r,i];return o.ctx=r,o.shortcuts=i,o.key=r.key,o.keymap=i.keymap,o}const Co=(n,e=()=>({}))=>_o(e,`${n}Attr`),Ip=(n,e=()=>({}))=>_o(e,`${n}Attr`);function Fu(n,e,t){const r=_o({},n),i=l=>async()=>{await l.wait(Cu);const f={plugin:e(l),options:l.get(r.key)};return l.update(vp,p=>[...p,f]),()=>{l.update(vp,p=>p.filter(m=>m!==f))}},o=[r,i];return o.id=n,o.plugin=i,o.options=r,o}function XA(){return n=>{const e=n.get(bu);return n.get(Pf)(e.state.doc)}}function ZA(n,e=!1){return t=>{const r=t.get(bu),o=t.get(Of)(n);if(!o)return;if(!e){const{state:m}=r;return r.dispatch(m.tr.replace(0,m.doc.content.size,new Ne(o.content,0,0)))}const l=t.get(is),u=t.get(i1),f=t.get(bo),p=gu.create({schema:l,doc:o,plugins:f,...u});r.updateState(p)}}var Qy,ix;function eI(){if(ix)return Qy;ix=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt,f=typeof Jl=="object"&&Jl&&Jl.Object===Object&&Jl,p=typeof self=="object"&&self&&self.Object===Object&&self,m=f||p||Function("return this")(),g=Object.prototype,w=g.toString,k=Math.max,b=Math.min,A=function(){return m.Date.now()};function P(B,z,H){var Q,q,_,U,D,G,le=0,oe=!1,ye=!1,de=!0;if(typeof B!="function")throw new TypeError(n);z=W(z)||0,F(H)&&(oe=!!H.leading,ye="maxWait"in H,_=ye?k(W(H.maxWait)||0,z):_,de="trailing"in H?!!H.trailing:de);function Y(he){var ke=Q,Me=q;return Q=q=void 0,le=he,U=B.apply(Me,ke),U}function C(he){return le=he,D=setTimeout(R,z),oe?Y(he):U}function x(he){var ke=he-G,Me=he-le,je=z-ke;return ye?b(je,_-Me):je}function M(he){var ke=he-G,Me=he-le;return G===void 0||ke>=z||ke<0||ye&&Me>=_}function R(){var he=A();if(M(he))return N(he);D=setTimeout(R,x(he))}function N(he){return D=void 0,de&&Q?Y(he):(Q=q=void 0,U)}function re(){D!==void 0&&clearTimeout(D),le=0,Q=G=q=D=void 0}function ee(){return D===void 0?U:N(A())}function ne(){var he=A(),ke=M(he);if(Q=arguments,q=this,G=he,ke){if(D===void 0)return C(G);if(ye)return D=setTimeout(R,z),Y(G)}return D===void 0&&(D=setTimeout(R,z)),U}return ne.cancel=re,ne.flush=ee,ne}function F(B){var z=typeof B;return!!B&&(z=="object"||z=="function")}function V(B){return!!B&&typeof B=="object"}function I(B){return typeof B=="symbol"||V(B)&&w.call(B)==t}function W(B){if(typeof B=="number")return B;if(I(B))return e;if(F(B)){var z=typeof B.valueOf=="function"?B.valueOf():B;B=F(z)?z+"":z}if(typeof B!="string")return B===0?B:+B;B=B.replace(r,"");var H=o.test(B);return H||l.test(B)?u(B.slice(2),H?2:8):i.test(B)?e:+B}return Qy=P,Qy}var tI=eI();const nI=Sp(tI);class xS{constructor(){this.beforeMountedListeners=[],this.mountedListeners=[],this.updatedListeners=[],this.markdownUpdatedListeners=[],this.blurListeners=[],this.focusListeners=[],this.destroyListeners=[],this.beforeMount=e=>(this.beforeMountedListeners.push(e),this),this.mounted=e=>(this.mountedListeners.push(e),this),this.updated=e=>(this.updatedListeners.push(e),this)}get listeners(){return{beforeMount:this.beforeMountedListeners,mounted:this.mountedListeners,updated:this.updatedListeners,markdownUpdated:this.markdownUpdatedListeners,blur:this.blurListeners,focus:this.focusListeners,destroy:this.destroyListeners}}markdownUpdated(e){return this.markdownUpdatedListeners.push(e),this}blur(e){return this.blurListeners.push(e),this}focus(e){return this.focusListeners.push(e),this}destroy(e){return this.destroyListeners.push(e),this}}const xp=St(new xS,"listener"),rI=new Ln("MILKDOWN_LISTENER"),SS=n=>(n.inject(xp,new xS),async()=>{await n.wait(Cu);const e=n.get(xp),{listeners:t}=e;t.beforeMount.forEach(u=>u(n)),await n.wait(rp);const r=n.get(Pf);let i=null,o=null;const l=new Zn({key:rI,view:()=>({destroy:()=>{t.destroy.forEach(u=>u(n))}}),props:{handleDOMEvents:{focus:()=>(t.focus.forEach(u=>u(n)),!1),blur:()=>(t.blur.forEach(u=>u(n)),!1)}},state:{init:(u,f)=>{i=f.doc,o=r(f.doc)},apply:u=>!u.docChanged||u.getMeta("addToHistory")===!1?void 0:nI(()=>{const{doc:p}=u;if(t.updated.length>0&&i&&!i.eq(p)&&t.updated.forEach(m=>{m(n,p,i)}),t.markdownUpdated.length>0&&i&&!i.eq(p)){const m=r(p);t.markdownUpdated.forEach(g=>{g(n,m,o)}),o=m}i=p},200)()}});n.update(bo,u=>u.concat(l)),await n.wait(s1),t.mounted.forEach(u=>u(n))});SS.meta={package:"@milkdown/plugin-listener",displayName:"Listener"};const iI="modulepreload",oI=function(n){return"/milkynotes/"+n},ox={},Xo=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(t.map(f=>{if(f=oI(f),f in ox)return;ox[f]=!0;const p=f.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":iI,p||(g.as="script"),g.crossOrigin="",g.href=f,u&&g.setAttribute("nonce",u),document.head.appendChild(g),p)return new Promise((w,k)=>{g.addEventListener("load",w),g.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};function sI(n,e){return function(t,r){let{$from:i,$to:o,node:l}=t.selection;if(l&&l.isBlock||i.depth<2||!i.sameParent(o))return!1;let u=i.node(-1);if(u.type!=n)return!1;if(i.parent.content.size==0&&i.node(-1).childCount==i.indexAfter(-1)){if(i.depth==3||i.node(-3).type!=n||i.index(-2)!=i.node(-2).childCount-1)return!1;if(r){let g=_e.empty,w=i.index(-1)?1:i.index(-2)?2:3;for(let F=i.depth-w;F>=i.depth-3;F--)g=_e.from(i.node(F).copy(g));let k=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;g=g.append(_e.from(n.createAndFill()));let b=i.before(i.depth-(w-1)),A=t.tr.replace(b,i.after(-k),new Ne(g,4-w,0)),P=-1;A.doc.nodesBetween(b,A.doc.content.size,(F,V)=>{if(P>-1)return!1;F.isTextblock&&F.content.size==0&&(P=V+1)}),P>-1&&A.setSelection(et.near(A.doc.resolve(P))),r(A.scrollIntoView())}return!0}let f=o.pos==i.end()?u.contentMatchAt(0).defaultType:null,p=t.tr.delete(i.pos,o.pos),m=f?[null,{type:f}]:void 0;return Zd(p.doc,i.pos,2,m)?(r&&r(p.split(i.pos,2,m).scrollIntoView()),!0):!1}}function bS(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,l=>l.childCount>0&&l.firstChild.type==n);return o?t?r.node(o.depth-1).type==n?lI(e,t,n,o):aI(e,t,o):!0:!1}}function lI(n,e,t,r){let i=n.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(i.step(new fr(o-1,l,o,l,new Ne(_e.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new s4(i.doc.resolve(r.$from.pos),i.doc.resolve(l),r.depth));const u=W1(r);if(u==null)return!1;i.lift(r,u);let f=i.doc.resolve(i.mapping.map(o,-1)-1);return j1(i.doc,f.pos)&&f.nodeBefore.type==f.nodeAfter.type&&i.join(f.pos),e(i.scrollIntoView()),!0}function aI(n,e,t){let r=n.tr,i=t.parent;for(let k=t.end,b=t.endIndex-1,A=t.startIndex;b>A;b--)k-=i.child(b).nodeSize,r.delete(k-1,k+1);let o=r.doc.resolve(t.start),l=o.nodeAfter;if(r.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,f=t.endIndex==i.childCount,p=o.node(-1),m=o.index(-1);if(!p.canReplace(m+(u?0:1),m+1,l.content.append(f?_e.empty:_e.from(i))))return!1;let g=o.pos,w=g+l.nodeSize;return r.step(new fr(g-(u?1:0),w+(f?1:0),g+1,w-1,new Ne((u?_e.empty:_e.from(i.copy(_e.empty))).append(f?_e.empty:_e.from(i.copy(_e.empty))),u?0:1,f?0:1),u?0:1)),e(r.scrollIntoView()),!0}function uI(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,p=>p.childCount>0&&p.firstChild.type==n);if(!o)return!1;let l=o.startIndex;if(l==0)return!1;let u=o.parent,f=u.child(l-1);if(f.type!=n)return!1;if(t){let p=f.lastChild&&f.lastChild.type==u.type,m=_e.from(p?n.create():null),g=new Ne(_e.from(n.create(null,_e.from(u.type.create(null,m)))),p?3:1,0),w=o.start,k=o.end;t(e.tr.step(new fr(w-(p?3:1),k,w,k,g,1,!0)).scrollIntoView())}return!0}}function cI(n){const e=new Map;if(!n||!n.type)throw new Error("mdast-util-definitions expected node");return Lu(n,"definition",function(r){const i=sx(r.identifier);i&&!e.get(i)&&e.set(i,r)}),t;function t(r){const i=sx(r);return e.get(i)}}function sx(n){return String(n||"").toUpperCase()}function fI(){return function(n){const e=cI(n);Lu(n,function(t,r,i){if(t.type==="definition"&&i!==void 0&&typeof r=="number")return i.children.splice(r,1),[S2,r];if(t.type==="imageReference"||t.type==="linkReference"){const o=e(t.identifier);if(o&&i&&typeof r=="number")return i.children[r]=t.type==="imageReference"?{type:"image",url:o.url,title:o.title,alt:t.alt}:{type:"link",url:o.url,title:o.title,children:t.children},[S2,r]}})}}function _S(n,e){var t;if(!(e.childCount>=1&&((t=e.lastChild)==null?void 0:t.type.name)==="hardbreak")){n.next(e.content);return}const i=[];e.content.forEach((o,l,u)=>{u!==e.childCount-1&&i.push(o)}),n.next(_e.fromArray(i))}function ge(n,e){return Object.assign(n,{meta:{package:"@milkdown/preset-commonmark",...e}}),n}const Rv=Ip("emphasis");ge(Rv,{displayName:"Attr<emphasis>",group:"Emphasis"});const Hf=Ap("emphasis",n=>({attrs:{marker:{default:n.get(Nf).emphasis||"*"}},parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>e==="italic"}],toDOM:e=>["em",n.get(Rv.key)(e)],parseMarkdown:{match:e=>e.type==="emphasis",runner:(e,t,r)=>{e.openMark(r,{marker:t.marker}),e.next(t.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="emphasis",runner:(e,t)=>{e.withMark(t,"emphasis",void 0,{marker:t.attrs.marker})}}}));ge(Hf.mark,{displayName:"MarkSchema<emphasis>",group:"Emphasis"});ge(Hf.ctx,{displayName:"MarkSchemaCtx<emphasis>",group:"Emphasis"});const Dv=at("ToggleEmphasis",n=>()=>q1(Hf.type(n)));ge(Dv,{displayName:"Command<toggleEmphasisCommand>",group:"Emphasis"});const CS=Xr(n=>Ep(/(?:^|[^*])\*([^*]+)\*$/,Hf.type(n),{getAttr:()=>({marker:"*"}),updateCaptured:({fullMatch:e,start:t})=>e.startsWith("*")?{}:{fullMatch:e.slice(1),start:t+1}}));ge(CS,{displayName:"InputRule<emphasis>|Star",group:"Emphasis"});const ES=Xr(n=>Ep(/(?:^|[^_])_([^_]+)_$/,Hf.type(n),{getAttr:()=>({marker:"_"}),updateCaptured:({fullMatch:e,start:t})=>e.startsWith("_")?{}:{fullMatch:e.slice(1),start:t+1}}));ge(ES,{displayName:"InputRule<emphasis>|Underscore",group:"Emphasis"});const zv=Zr("emphasisKeymap",{ToggleEmphasis:{shortcuts:"Mod-i",command:n=>{const e=n.get(Mt);return()=>e.call(Dv.key)}}});ge(zv.ctx,{displayName:"KeymapCtx<emphasis>",group:"Emphasis"});ge(zv.shortcuts,{displayName:"Keymap<emphasis>",group:"Emphasis"});const Lv=Ip("strong");ge(Lv,{displayName:"Attr<strong>",group:"Strong"});const Op=Ap("strong",n=>({attrs:{marker:{default:n.get(Nf).strong||"*"}},parseDOM:[{tag:"b",getAttrs:e=>e.style.fontWeight!="normal"&&null},{tag:"strong"},{style:"font-style",getAttrs:e=>e==="bold"},{style:"font-weight=400",clearMark:e=>e.type.name=="strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:e=>["strong",n.get(Lv.key)(e)],parseMarkdown:{match:e=>e.type==="strong",runner:(e,t,r)=>{e.openMark(r,{marker:t.marker}),e.next(t.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="strong",runner:(e,t)=>{e.withMark(t,"strong",void 0,{marker:t.attrs.marker})}}}));ge(Op.mark,{displayName:"MarkSchema<strong>",group:"Strong"});ge(Op.ctx,{displayName:"MarkSchemaCtx<strong>",group:"Strong"});const Fv=at("ToggleStrong",n=>()=>q1(Op.type(n)));ge(Fv,{displayName:"Command<toggleStrongCommand>",group:"Strong"});const TS=Xr(n=>Ep(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,Op.type(n),{getAttr:e=>({marker:e[0].startsWith("*")?"*":"_"})}));ge(TS,{displayName:"InputRule<strong>",group:"Strong"});const Bv=Zr("strongKeymap",{ToggleBold:{shortcuts:["Mod-b"],command:n=>{const e=n.get(Mt);return()=>e.call(Fv.key)}}});ge(Bv.ctx,{displayName:"KeymapCtx<strong>",group:"Strong"});ge(Bv.shortcuts,{displayName:"Keymap<strong>",group:"Strong"});const Uv=Ip("inlineCode");ge(Uv,{displayName:"Attr<inlineCode>",group:"InlineCode"});const Yl=Ap("inlineCode",n=>({priority:100,code:!0,parseDOM:[{tag:"code"}],toDOM:e=>["code",n.get(Uv.key)(e)],parseMarkdown:{match:e=>e.type==="inlineCode",runner:(e,t,r)=>{e.openMark(r),e.addText(t.value),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="inlineCode",runner:(e,t,r)=>{e.withMark(t,"inlineCode",r.text||"")}}}));ge(Yl.mark,{displayName:"MarkSchema<inlineCode>",group:"InlineCode"});ge(Yl.ctx,{displayName:"MarkSchemaCtx<inlineCode>",group:"InlineCode"});const Wv=at("ToggleInlineCode",n=>()=>(e,t)=>{const{selection:r,tr:i}=e;if(r.empty)return!1;const{from:o,to:l}=r;return e.doc.rangeHasMark(o,l,Yl.type(n))?(t==null||t(i.removeMark(o,l,Yl.type(n))),!0):(Object.keys(e.schema.marks).filter(p=>p!==Yl.type.name).map(p=>e.schema.marks[p]).forEach(p=>{i.removeMark(o,l,p)}),t==null||t(i.addMark(o,l,Yl.type(n).create())),!0)});ge(Wv,{displayName:"Command<toggleInlineCodeCommand>",group:"InlineCode"});const MS=Xr(n=>Ep(/(?:`)([^`]+)(?:`)$/,Yl.type(n)));ge(MS,{displayName:"InputRule<inlineCodeInputRule>",group:"InlineCode"});const jv=Zr("inlineCodeKeymap",{ToggleInlineCode:{shortcuts:"Mod-e",command:n=>{const e=n.get(Mt);return()=>e.call(Wv.key)}}});ge(jv.ctx,{displayName:"KeymapCtx<inlineCode>",group:"InlineCode"});ge(jv.shortcuts,{displayName:"Keymap<inlineCode>",group:"InlineCode"});const $v=Ip("link");ge($v,{displayName:"Attr<link>",group:"Link"});const Rf=Ap("link",n=>({attrs:{href:{},title:{default:null}},parseDOM:[{tag:"a[href]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw us(e);return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:e=>["a",{...n.get($v.key)(e),...e.attrs}],parseMarkdown:{match:e=>e.type==="link",runner:(e,t,r)=>{const i=t.url,o=t.title;e.openMark(r,{href:i,title:o}),e.next(t.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="link",runner:(e,t)=>{e.withMark(t,"link",void 0,{title:t.attrs.title,url:t.attrs.href})}}}));ge(Rf.mark,{displayName:"MarkSchema<link>",group:"Link"});const NS=at("ToggleLink",n=>(e={})=>q1(Rf.type(n),e));ge(NS,{displayName:"Command<toggleLinkCommand>",group:"Link"});const AS=at("UpdateLink",n=>(e={})=>(t,r)=>{if(!r)return!1;let i,o=-1;const{selection:l}=t,{from:u,to:f}=l;if(t.doc.nodesBetween(u,u===f?f+1:f,(b,A)=>{if(Rf.type(n).isInSet(b.marks))return i=b,o=A,!1}),!i)return!1;const p=i.marks.find(({type:b})=>b===Rf.type(n));if(!p)return!1;const m=o,g=o+i.nodeSize,{tr:w}=t,k=Rf.type(n).create({...p.attrs,...e});return k?(r(w.removeMark(m,g,p).addMark(m,g,k).setSelection(new st(w.selection.$anchor)).scrollIntoView()),!0):!1});ge(AS,{displayName:"Command<updateLinkCommand>",group:"Link"});const IS=Pv("doc",()=>({content:"block+",parseMarkdown:{match:({type:n})=>n==="root",runner:(n,e,t)=>{n.injectRoot(e,t)}},toMarkdown:{match:n=>n.type.name==="doc",runner:(n,e)=>{n.openNode("root"),n.next(e.content)}}}));ge(IS,{displayName:"NodeSchema<doc>",group:"Doc"});function hI(n){return Lu(n,"paragraph",e=>{var t,r;if(((t=e.children)==null?void 0:t.length)!==1)return;const i=(r=e.children)==null?void 0:r[0];if(!i||i.type!=="html")return;const{value:o}=i;["<br />","<br>","<br/>"].includes(o)&&e.children.splice(0,1)})}const Y1=Fu("remark-preserve-empty-line",()=>()=>hI);ge(Y1.plugin,{displayName:"Remark<remarkPreserveEmptyLine>",group:"Remark"});ge(Y1.options,{displayName:"RemarkConfig<remarkPreserveEmptyLine>",group:"Remark"});const Hv=Co("paragraph");ge(Hv,{displayName:"Attr<paragraph>",group:"Paragraph"});const ua=Fn("paragraph",n=>({content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:e=>["p",n.get(Hv.key)(e),0],parseMarkdown:{match:e=>e.type==="paragraph",runner:(e,t,r)=>{e.openNode(r),t.children?e.next(t.children):e.addText(t.value||""),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="paragraph",runner:(e,t)=>{e.openNode("paragraph"),(!t.content||t.content.size===0)&&dI(n)?e.addNode("html",void 0,"<br />"):_S(e,t),e.closeNode()}}}));function dI(n){let e=!1;try{n.get(Y1.id),e=!0}catch{e=!1}return e}ge(ua.node,{displayName:"NodeSchema<paragraph>",group:"Paragraph"});ge(ua.ctx,{displayName:"NodeSchemaCtx<paragraph>",group:"Paragraph"});const Vv=at("TurnIntoText",n=>()=>dp(ua.type(n)));ge(Vv,{displayName:"Command<turnIntoTextCommand>",group:"Paragraph"});const qv=Zr("paragraphKeymap",{TurnIntoText:{shortcuts:"Mod-Alt-0",command:n=>{const e=n.get(Mt);return()=>e.call(Vv.key)}}});ge(qv.ctx,{displayName:"KeymapCtx<paragraph>",group:"Paragraph"});ge(qv.shortcuts,{displayName:"Keymap<paragraph>",group:"Paragraph"});const pI=Array(6).fill(0).map((n,e)=>e+1);function mI(n){return n.textContent.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-")}const X1=_o(mI,"headingIdGenerator");ge(X1,{displayName:"Ctx<HeadingIdGenerator>",group:"Heading"});const Kv=Co("heading");ge(Kv,{displayName:"Attr<heading>",group:"Heading"});const Bu=Fn("heading",n=>{const e=n.get(X1.key);return{content:"inline*",group:"block",defining:!0,attrs:{id:{default:""},level:{default:1}},parseDOM:pI.map(t=>({tag:`h${t}`,getAttrs:r=>{if(!(r instanceof HTMLElement))throw us(r);return{level:t,id:r.id}}})),toDOM:t=>[`h${t.attrs.level}`,{...n.get(Kv.key)(t),id:t.attrs.id||e(t)},0],parseMarkdown:{match:({type:t})=>t==="heading",runner:(t,r,i)=>{const o=r.depth;t.openNode(i,{level:o}),t.next(r.children),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="heading",runner:(t,r)=>{t.openNode("heading",void 0,{depth:r.attrs.level}),_S(t,r),t.closeNode()}}}});ge(Bu.node,{displayName:"NodeSchema<heading>",group:"Heading"});ge(Bu.ctx,{displayName:"NodeSchemaCtx<heading>",group:"Heading"});const OS=Xr(n=>d5(/^(?<hashes>#+)\s$/,Bu.type(n),e=>{var t,r;const i=((r=(t=e.groups)==null?void 0:t.hashes)==null?void 0:r.length)||0,o=n.get(bu),{$from:l}=o.state.selection,u=l.node();if(u.type.name==="heading"){let f=Number(u.attrs.level)+Number(i);return f>6&&(f=6),{level:f}}return{level:i}}));ge(OS,{displayName:"InputRule<wrapInHeadingInputRule>",group:"Heading"});const Hl=at("WrapInHeading",n=>e=>(e??(e=1),e<1?dp(ua.type(n)):dp(Bu.type(n),{level:e})));ge(Hl,{displayName:"Command<wrapInHeadingCommand>",group:"Heading"});const Jv=at("DowngradeHeading",n=>()=>(e,t,r)=>{const{$from:i}=e.selection,o=i.node();if(o.type!==Bu.type(n)||!e.selection.empty||i.parentOffset!==0)return!1;const l=o.attrs.level-1;return l?(t==null||t(e.tr.setNodeMarkup(e.selection.$from.before(),void 0,{...o.attrs,level:l})),!0):dp(ua.type(n))(e,t,r)});ge(Jv,{displayName:"Command<downgradeHeadingCommand>",group:"Heading"});const Gv=Zr("headingKeymap",{TurnIntoH1:{shortcuts:"Mod-Alt-1",command:n=>{const e=n.get(Mt);return()=>e.call(Hl.key,1)}},TurnIntoH2:{shortcuts:"Mod-Alt-2",command:n=>{const e=n.get(Mt);return()=>e.call(Hl.key,2)}},TurnIntoH3:{shortcuts:"Mod-Alt-3",command:n=>{const e=n.get(Mt);return()=>e.call(Hl.key,3)}},TurnIntoH4:{shortcuts:"Mod-Alt-4",command:n=>{const e=n.get(Mt);return()=>e.call(Hl.key,4)}},TurnIntoH5:{shortcuts:"Mod-Alt-5",command:n=>{const e=n.get(Mt);return()=>e.call(Hl.key,5)}},TurnIntoH6:{shortcuts:"Mod-Alt-6",command:n=>{const e=n.get(Mt);return()=>e.call(Hl.key,6)}},DowngradeHeading:{shortcuts:["Delete","Backspace"],command:n=>{const e=n.get(Mt);return()=>e.call(Jv.key)}}});ge(Gv.ctx,{displayName:"KeymapCtx<heading>",group:"Heading"});ge(Gv.shortcuts,{displayName:"Keymap<heading>",group:"Heading"});const Qv=Co("blockquote");ge(Qv,{displayName:"Attr<blockquote>",group:"Blockquote"});const Pp=Fn("blockquote",n=>({content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:e=>["blockquote",n.get(Qv.key)(e),0],parseMarkdown:{match:({type:e})=>e==="blockquote",runner:(e,t,r)=>{e.openNode(r).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="blockquote",runner:(e,t)=>{e.openNode("blockquote").next(t.content).closeNode()}}}));ge(Pp.node,{displayName:"NodeSchema<blockquote>",group:"Blockquote"});ge(Pp.ctx,{displayName:"NodeSchemaCtx<blockquote>",group:"Blockquote"});const PS=Xr(n=>vv(/^\s*>\s$/,Pp.type(n)));ge(PS,{displayName:"InputRule<wrapInBlockquoteInputRule>",group:"Blockquote"});const Yv=at("WrapInBlockquote",n=>()=>Sv(Pp.type(n)));ge(Yv,{displayName:"Command<wrapInBlockquoteCommand>",group:"Blockquote"});const Xv=Zr("blockquoteKeymap",{WrapInBlockquote:{shortcuts:"Mod-Shift-b",command:n=>{const e=n.get(Mt);return()=>e.call(Yv.key)}}});ge(Xv.ctx,{displayName:"KeymapCtx<blockquote>",group:"Blockquote"});ge(Xv.shortcuts,{displayName:"Keymap<blockquote>",group:"Blockquote"});const Zv=Co("codeBlock",()=>({pre:{},code:{}}));ge(Zv,{displayName:"Attr<codeBlock>",group:"CodeBlock"});const Rp=Fn("code_block",n=>({content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>{if(!(e instanceof HTMLElement))throw us(e);return{language:e.dataset.language}}}],toDOM:e=>{const t=n.get(Zv.key)(e);return["pre",{...t.pre,"data-language":e.attrs.language},["code",t.code,0]]},parseMarkdown:{match:({type:e})=>e==="code",runner:(e,t,r)=>{const i=t.lang,o=t.value;e.openNode(r,{language:i}),o&&e.addText(o),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="code_block",runner:(e,t)=>{var r;e.addNode("code",void 0,((r=t.content.firstChild)==null?void 0:r.text)||"",{lang:t.attrs.language})}}}));ge(Rp.node,{displayName:"NodeSchema<codeBlock>",group:"CodeBlock"});ge(Rp.ctx,{displayName:"NodeSchemaCtx<codeBlock>",group:"CodeBlock"});const RS=Xr(n=>d5(/^```(?<language>[a-z]*)?[\s\n]$/,Rp.type(n),e=>{var t;return{language:((t=e.groups)==null?void 0:t.language)??""}}));ge(RS,{displayName:"InputRule<createCodeBlockInputRule>",group:"CodeBlock"});const e3=at("CreateCodeBlock",n=>(e="")=>dp(Rp.type(n),{language:e}));ge(e3,{displayName:"Command<createCodeBlockCommand>",group:"CodeBlock"});const gI=at("UpdateCodeBlockLanguage",()=>({pos:n,language:e}={pos:-1,language:""})=>(t,r)=>n>=0?(r==null||r(t.tr.setNodeAttribute(n,"language",e)),!0):!1);ge(gI,{displayName:"Command<updateCodeBlockLanguageCommand>",group:"CodeBlock"});const t3=Zr("codeBlockKeymap",{CreateCodeBlock:{shortcuts:"Mod-Alt-c",command:n=>{const e=n.get(Mt);return()=>e.call(e3.key)}}});ge(t3.ctx,{displayName:"KeymapCtx<codeBlock>",group:"CodeBlock"});ge(t3.shortcuts,{displayName:"Keymap<codeBlock>",group:"CodeBlock"});const n3=Co("image");ge(n3,{displayName:"Attr<image>",group:"Image"});const Vf=Fn("image",n=>({inline:!0,group:"inline",selectable:!0,draggable:!0,marks:"",atom:!0,defining:!0,isolating:!0,attrs:{src:{default:""},alt:{default:""},title:{default:""}},parseDOM:[{tag:"img[src]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw us(e);return{src:e.getAttribute("src")||"",alt:e.getAttribute("alt")||"",title:e.getAttribute("title")||e.getAttribute("alt")||""}}}],toDOM:e=>["img",{...n.get(n3.key)(e),...e.attrs}],parseMarkdown:{match:({type:e})=>e==="image",runner:(e,t,r)=>{const i=t.url,o=t.alt,l=t.title;e.addNode(r,{src:i,alt:o,title:l})}},toMarkdown:{match:e=>e.type.name==="image",runner:(e,t)=>{e.addNode("image",void 0,void 0,{title:t.attrs.title,url:t.attrs.src,alt:t.attrs.alt})}}}));ge(Vf.node,{displayName:"NodeSchema<image>",group:"Image"});ge(Vf.ctx,{displayName:"NodeSchemaCtx<image>",group:"Image"});const DS=at("InsertImage",n=>(e={})=>(t,r)=>{if(!r)return!0;const{src:i="",alt:o="",title:l=""}=e,u=Vf.type(n).create({src:i,alt:o,title:l});return u&&r(t.tr.replaceSelectionWith(u).scrollIntoView()),!0});ge(DS,{displayName:"Command<insertImageCommand>",group:"Image"});const zS=at("UpdateImage",n=>(e={})=>(t,r)=>{const i=OM(t.selection,Vf.type(n));if(!i)return!1;const{node:o,pos:l}=i,u={...o.attrs},{src:f,alt:p,title:m}=e;return f!==void 0&&(u.src=f),p!==void 0&&(u.alt=p),m!==void 0&&(u.title=m),r==null||r(t.tr.setNodeMarkup(l,void 0,u).scrollIntoView()),!0});ge(zS,{displayName:"Command<updateImageCommand>",group:"Image"});const yI=Xr(n=>new Yr(/!\[(?<alt>.*?)]\((?<filename>.*?)\s*(?="|\))"?(?<title>[^"]+)?"?\)/,(e,t,r,i)=>{const[o,l,u="",f]=t;return o?e.tr.replaceWith(r,i,Vf.type(n).create({src:u,alt:l,title:f})):null}));ge(yI,{displayName:"InputRule<insertImageInputRule>",group:"Image"});const N1=Co("hardbreak",n=>({"data-type":"hardbreak","data-is-inline":n.attrs.isInline}));ge(N1,{displayName:"Attr<hardbreak>",group:"Hardbreak"});const Eu=Fn("hardbreak",n=>({inline:!0,group:"inline",attrs:{isInline:{default:!1}},selectable:!1,parseDOM:[{tag:"br"},{tag:'span[data-type="hardbreak"]',getAttrs:()=>({isInline:!0})}],toDOM:e=>e.attrs.isInline?["span",n.get(N1.key)(e)," "]:["br",n.get(N1.key)(e)],parseMarkdown:{match:({type:e})=>e==="break",runner:(e,t,r)=>{var i;e.addNode(r,{isInline:!!((i=t.data)!=null&&i.isInline)})}},leafText:()=>`
`,toMarkdown:{match:e=>e.type.name==="hardbreak",runner:(e,t)=>{t.attrs.isInline?e.addNode("text",void 0,`
`):e.addNode("break")}}}));ge(Eu.node,{displayName:"NodeSchema<hardbreak>",group:"Hardbreak"});ge(Eu.ctx,{displayName:"NodeSchemaCtx<hardbreak>",group:"Hardbreak"});const r3=at("InsertHardbreak",n=>()=>(e,t)=>{var r;const{selection:i,tr:o}=e;if(!(i instanceof st))return!1;if(i.empty){const l=i.$from.node();if(l.childCount>0&&((r=l.lastChild)==null?void 0:r.type.name)==="hardbreak")return t==null||t(o.replaceRangeWith(i.to-1,i.to,e.schema.node("paragraph")).setSelection(et.near(o.doc.resolve(i.to))).scrollIntoView()),!0}return t==null||t(o.setMeta("hardbreak",!0).replaceSelectionWith(Eu.type(n).create()).scrollIntoView()),!0});ge(r3,{displayName:"Command<insertHardbreakCommand>",group:"Hardbreak"});const i3=Zr("hardbreakKeymap",{InsertHardbreak:{shortcuts:"Shift-Enter",command:n=>{const e=n.get(Mt);return()=>e.call(r3.key)}}});ge(i3.ctx,{displayName:"KeymapCtx<hardbreak>",group:"Hardbreak"});ge(i3.shortcuts,{displayName:"Keymap<hardbreak>",group:"Hardbreak"});const o3=Co("hr");ge(o3,{displayName:"Attr<hr>",group:"Hr"});const Dp=Fn("hr",n=>({group:"block",parseDOM:[{tag:"hr"}],toDOM:e=>["hr",n.get(o3.key)(e)],parseMarkdown:{match:({type:e})=>e==="thematicBreak",runner:(e,t,r)=>{e.addNode(r)}},toMarkdown:{match:e=>e.type.name==="hr",runner:e=>{e.addNode("thematicBreak")}}}));ge(Dp.node,{displayName:"NodeSchema<hr>",group:"Hr"});ge(Dp.ctx,{displayName:"NodeSchemaCtx<hr>",group:"Hr"});const LS=Xr(n=>new Yr(/^(?:---|___\s|\*\*\*\s)$/,(e,t,r,i)=>{const{tr:o}=e;return t[0]&&o.replaceWith(r-1,i,Dp.type(n).create()),o}));ge(LS,{displayName:"InputRule<insertHrInputRule>",group:"Hr"});const FS=at("InsertHr",n=>()=>(e,t)=>{if(!t)return!0;const r=ua.node.type(n).create(),{tr:i,selection:o}=e,{from:l}=o,u=Dp.type(n).create();if(!u)return!0;const f=i.replaceSelectionWith(u).insert(l,r),p=et.findFrom(f.doc.resolve(l),1,!0);return p&&t(f.setSelection(p).scrollIntoView()),!0});ge(FS,{displayName:"Command<insertHrCommand>",group:"Hr"});const s3=Co("bulletList");ge(s3,{displayName:"Attr<bulletList>",group:"BulletList"});const qf=Fn("bullet_list",n=>({content:"listItem+",group:"block",attrs:{spread:{default:!1}},parseDOM:[{tag:"ul",getAttrs:e=>{if(!(e instanceof HTMLElement))throw us(e);return{spread:e.dataset.spread}}}],toDOM:e=>["ul",{...n.get(s3.key)(e),"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:t})=>e==="list"&&!t,runner:(e,t,r)=>{const i=t.spread!=null?`${t.spread}`:"false";e.openNode(r,{spread:i}).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="bullet_list",runner:(e,t)=>{e.openNode("list",void 0,{ordered:!1,spread:t.attrs.spread==="true"}).next(t.content).closeNode()}}}));ge(qf.node,{displayName:"NodeSchema<bulletList>",group:"BulletList"});ge(qf.ctx,{displayName:"NodeSchemaCtx<bulletList>",group:"BulletList"});const BS=Xr(n=>vv(/^\s*([-+*])\s$/,qf.type(n)));ge(BS,{displayName:"InputRule<wrapInBulletListInputRule>",group:"BulletList"});const l3=at("WrapInBulletList",n=>()=>Sv(qf.type(n)));ge(l3,{displayName:"Command<wrapInBulletListCommand>",group:"BulletList"});const a3=Zr("bulletListKeymap",{WrapInBulletList:{shortcuts:"Mod-Alt-8",command:n=>{const e=n.get(Mt);return()=>e.call(l3.key)}}});ge(a3.ctx,{displayName:"KeymapCtx<bulletListKeymap>",group:"BulletList"});ge(a3.shortcuts,{displayName:"Keymap<bulletListKeymap>",group:"BulletList"});const u3=Co("orderedList");ge(u3,{displayName:"Attr<orderedList>",group:"OrderedList"});const Kf=Fn("ordered_list",n=>({content:"listItem+",group:"block",attrs:{order:{default:1},spread:{default:!1}},parseDOM:[{tag:"ol",getAttrs:e=>{if(!(e instanceof HTMLElement))throw us(e);return{spread:e.dataset.spread,order:e.hasAttribute("start")?Number(e.getAttribute("start")):1}}}],toDOM:e=>["ol",{...n.get(u3.key)(e),...e.attrs.order===1?{}:e.attrs.order,"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:t})=>e==="list"&&!!t,runner:(e,t,r)=>{const i=t.spread!=null?`${t.spread}`:"true";e.openNode(r,{spread:i}).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="ordered_list",runner:(e,t)=>{e.openNode("list",void 0,{ordered:!0,start:1,spread:t.attrs.spread==="true"}),e.next(t.content),e.closeNode()}}}));ge(Kf.node,{displayName:"NodeSchema<orderedList>",group:"OrderedList"});ge(Kf.ctx,{displayName:"NodeSchemaCtx<orderedList>",group:"OrderedList"});const US=Xr(n=>vv(/^\s*(\d+)\.\s$/,Kf.type(n),e=>({order:Number(e[1])}),(e,t)=>t.childCount+t.attrs.order===Number(e[1])));ge(US,{displayName:"InputRule<wrapInOrderedListInputRule>",group:"OrderedList"});const c3=at("WrapInOrderedList",n=>()=>Sv(Kf.type(n)));ge(c3,{displayName:"Command<wrapInOrderedListCommand>",group:"OrderedList"});const f3=Zr("orderedListKeymap",{WrapInOrderedList:{shortcuts:"Mod-Alt-7",command:n=>{const e=n.get(Mt);return()=>e.call(c3.key)}}});ge(f3.ctx,{displayName:"KeymapCtx<orderedList>",group:"OrderedList"});ge(f3.shortcuts,{displayName:"Keymap<orderedList>",group:"OrderedList"});const h3=Co("listItem");ge(h3,{displayName:"Attr<listItem>",group:"ListItem"});const as=Fn("list_item",n=>({group:"listItem",content:"paragraph block*",attrs:{label:{default:"•"},listType:{default:"bullet"},spread:{default:"true"}},defining:!0,parseDOM:[{tag:"li",getAttrs:e=>{if(!(e instanceof HTMLElement))throw us(e);return{label:e.dataset.label,listType:e.dataset.listType,spread:e.dataset.spread}}}],toDOM:e=>["li",{...n.get(h3.key)(e),"data-label":e.attrs.label,"data-list-type":e.attrs.listType,"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e})=>e==="listItem",runner:(e,t,r)=>{const i=t.label!=null?`${t.label}.`:"•",o=t.label!=null?"ordered":"bullet",l=t.spread!=null?`${t.spread}`:"true";e.openNode(r,{label:i,listType:o,spread:l}),e.next(t.children),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="list_item",runner:(e,t)=>{e.openNode("listItem",void 0,{spread:t.attrs.spread==="true"}),e.next(t.content),e.closeNode()}}}));ge(as.node,{displayName:"NodeSchema<listItem>",group:"ListItem"});ge(as.ctx,{displayName:"NodeSchemaCtx<listItem>",group:"ListItem"});const d3=at("SinkListItem",n=>()=>uI(as.type(n)));ge(d3,{displayName:"Command<sinkListItemCommand>",group:"ListItem"});const p3=at("LiftListItem",n=>()=>bS(as.type(n)));ge(p3,{displayName:"Command<liftListItemCommand>",group:"ListItem"});const m3=at("SplitListItem",n=>()=>sI(as.type(n)));ge(m3,{displayName:"Command<splitListItemCommand>",group:"ListItem"});function vI(n){return(e,t,r)=>{const{selection:i}=e;if(!(i instanceof st))return!1;const{empty:o,$from:l}=i;if(!o||l.parentOffset!==0)return!1;const u=l.node(-1);return u.type!==as.type(n)||u.firstChild!==l.node()||l.node(-2).childCount>1?!1:bS(as.type(n))(e,t,r)}}const g3=at("LiftFirstListItem",n=>()=>vI(n));ge(g3,{displayName:"Command<liftFirstListItemCommand>",group:"ListItem"});const y3=Zr("listItemKeymap",{NextListItem:{shortcuts:"Enter",command:n=>{const e=n.get(Mt);return()=>e.call(m3.key)}},SinkListItem:{shortcuts:["Tab","Mod-]"],command:n=>{const e=n.get(Mt);return()=>e.call(d3.key)}},LiftListItem:{shortcuts:["Shift-Tab","Mod-["],command:n=>{const e=n.get(Mt);return()=>e.call(p3.key)}},LiftFirstListItem:{shortcuts:["Backspace","Delete"],command:n=>{const e=n.get(Mt);return()=>e.call(g3.key)}}});ge(y3.ctx,{displayName:"KeymapCtx<listItem>",group:"ListItem"});ge(y3.shortcuts,{displayName:"Keymap<listItem>",group:"ListItem"});const WS=Pv("text",()=>({group:"inline",parseMarkdown:{match:({type:n})=>n==="text",runner:(n,e)=>{n.addText(e.value)}},toMarkdown:{match:n=>n.type.name==="text",runner:(n,e)=>{n.addNode("text",void 0,e.text)}}}));ge(WS,{displayName:"NodeSchema<text>",group:"Text"});const v3=Co("html");ge(v3,{displayName:"Attr<html>",group:"Html"});const w3=Fn("html",n=>({atom:!0,group:"inline",inline:!0,attrs:{value:{default:""}},toDOM:e=>{const t=document.createElement("span"),r={...n.get(v3.key)(e),"data-value":e.attrs.value,"data-type":"html"};return t.textContent=e.attrs.value,["span",r,e.attrs.value]},parseDOM:[{tag:'span[data-type="html"]',getAttrs:e=>({value:e.dataset.value??""})}],parseMarkdown:{match:({type:e})=>e==="html",runner:(e,t,r)=>{e.addNode(r,{value:t.value})}},toMarkdown:{match:e=>e.type.name==="html",runner:(e,t)=>{e.addNode("html",void 0,t.attrs.value)}}}));ge(w3.node,{displayName:"NodeSchema<html>",group:"Html"});ge(w3.ctx,{displayName:"NodeSchemaCtx<html>",group:"Html"});const wI=[IS,Hv,ua,X1,Kv,Bu,N1,Eu,Qv,Pp,Zv,Rp,o3,Dp,n3,Vf,s3,qf,u3,Kf,h3,as,Rv,Hf,Lv,Op,Uv,Yl,$v,Rf,v3,w3,WS].flat(),kI=[PS,BS,US,RS,LS,OS].flat(),xI=[CS,ES,MS,TS],SI=[Vv,Yv,Hl,Jv,e3,r3,FS,DS,zS,c3,l3,d3,m3,p3,g3,Dv,Wv,Fv,NS,AS],bI=[Xv,t3,i3,Gv,y3,f3,a3,qv,zv,jv,Bv].flat(),k3=Fu("remarkAddOrderInList",()=>()=>n=>{Lu(n,"list",e=>{if(e.ordered){const t=e.start??1;e.children.forEach((r,i)=>{r.label=i+t})}})});ge(k3.plugin,{displayName:"Remark<remarkAddOrderInListPlugin>",group:"Remark"});ge(k3.options,{displayName:"RemarkConfig<remarkAddOrderInListPlugin>",group:"Remark"});const x3=Fu("remarkLineBreak",()=>()=>n=>{const e=/[\t ]*(?:\r?\n|\r)/g;Lu(n,"text",(t,r,i)=>{if(!t.value||typeof t.value!="string")return;const o=[];let l=0;e.lastIndex=0;let u=e.exec(t.value);for(;u;){const p=u.index;l!==p&&o.push({type:"text",value:t.value.slice(l,p)}),o.push({type:"break",data:{isInline:!0}}),l=p+u[0].length,u=e.exec(t.value)}if(o.length>0&&i&&typeof r=="number")return l<t.value.length&&o.push({type:"text",value:t.value.slice(l)}),i.children.splice(r,1,...o),r+o.length})});ge(x3.plugin,{displayName:"Remark<remarkLineBreak>",group:"Remark"});ge(x3.options,{displayName:"RemarkConfig<remarkLineBreak>",group:"Remark"});const S3=Fu("remarkInlineLink",()=>fI);ge(S3.plugin,{displayName:"Remark<remarkInlineLinkPlugin>",group:"Remark"});ge(S3.options,{displayName:"RemarkConfig<remarkInlineLinkPlugin>",group:"Remark"});const _I=n=>!!n.children,CI=n=>n.type==="html";function EI(n,e){return t(n,0,null)[0];function t(r,i,o){if(_I(r)){const l=[];for(let u=0,f=r.children.length;u<f;u++){const p=r.children[u];if(p){const m=t(p,u,r);if(m)for(let g=0,w=m.length;g<w;g++){const k=m[g];k&&l.push(k)}}}r.children=l}return e(r,i,o)}}const b3=Fu("remarkHTMLTransformer",()=>()=>n=>{EI(n,(e,t,r)=>CI(e)?((r==null?void 0:r.type)==="root"&&(e.children=[{...e}],delete e.value,e.type="paragraph"),[e]):[e])});ge(b3.plugin,{displayName:"Remark<remarkHtmlTransformer>",group:"Remark"});ge(b3.options,{displayName:"RemarkConfig<remarkHtmlTransformer>",group:"Remark"});const _3=Fu("remarkMarker",()=>()=>(n,e)=>{const t=r=>e.value.charAt(r.position.start.offset);Lu(n,r=>["strong","emphasis"].includes(r.type),r=>{r.marker=t(r)})});ge(_3.plugin,{displayName:"Remark<remarkMarker>",group:"Remark"});ge(_3.options,{displayName:"RemarkConfig<remarkMarker>",group:"Remark"});const jS=qi(()=>{let n=!1;const e=new Ln("MILKDOWN_INLINE_NODES_CURSOR"),t=new Zn({key:e,state:{init(){return!1},apply(r){if(!r.selection.empty)return!1;const i=r.selection.$from,o=i.nodeBefore,l=i.nodeAfter;return!!(o&&l&&o.isInline&&!o.isText&&l.isInline&&!l.isText)}},props:{handleDOMEvents:{compositionend:(r,i)=>n?(n=!1,requestAnimationFrame(()=>{if(t.getState(r.state)){const l=r.state.selection.from;i.preventDefault(),r.dispatch(r.state.tr.insertText(i.data||"",l))}}),!0):!1,compositionstart:r=>(t.getState(r.state)&&(n=!0),!1),beforeinput:(r,i)=>{if(t.getState(r.state)&&i instanceof InputEvent&&i.data&&!n){const l=r.state.selection.from;return i.preventDefault(),r.dispatch(r.state.tr.insertText(i.data||"",l)),!0}return!1}},decorations(r){if(t.getState(r)){const l=r.selection.$from.pos,u=document.createElement("span"),f=Xn.widget(l,u,{side:-1}),p=document.createElement("span"),m=Xn.widget(l,p);return setTimeout(()=>{u.contentEditable="true",p.contentEditable="true"}),Gt.create(r.doc,[f,m])}return Gt.empty}}});return t});ge(jS,{displayName:"Prose<inlineNodesCursorPlugin>",group:"Prose"});const $S=qi(n=>new Zn({key:new Ln("MILKDOWN_HARDBREAK_MARKS"),appendTransaction:(e,t,r)=>{if(!e.length)return;const[i]=e;if(!i)return;const[o]=i.steps;if(i.getMeta("hardbreak")){if(!(o instanceof Gn))return;const{from:f}=o;return r.tr.setNodeMarkup(f,Eu.type(n),void 0,[])}if(o instanceof Js){let f=r.tr;const{from:p,to:m}=o;return r.doc.nodesBetween(p,m,(g,w)=>{g.type===Eu.type(n)&&(f=f.setNodeMarkup(w,Eu.type(n),void 0,[]))}),f}}}));ge($S,{displayName:"Prose<hardbreakClearMarkPlugin>",group:"Prose"});const C3=_o(["table","code_block"],"hardbreakFilterNodes");ge(C3,{displayName:"Ctx<hardbreakFilterNodes>",group:"Prose"});const HS=qi(n=>{const e=n.get(C3.key);return new Zn({key:new Ln("MILKDOWN_HARDBREAK_FILTER"),filterTransaction:(t,r)=>{const i=t.getMeta("hardbreak"),[o]=t.steps;if(i&&o){const{from:l}=o,u=r.doc.resolve(l);let f=u.depth,p=!0;for(;f>0;)e.includes(u.node(f).type.name)&&(p=!1),f--;return p}return!0}})});ge(HS,{displayName:"Prose<hardbreakFilterPlugin>",group:"Prose"});const VS=qi(n=>{const e=new Ln("MILKDOWN_HEADING_ID"),t=r=>{if(r.composing)return;const i=n.get(X1.key),o=r.state.tr.setMeta("addToHistory",!1);let l=!1;const u={};r.state.doc.descendants((f,p)=>{if(f.type===Bu.type(n)){if(f.textContent.trim().length===0)return;const m=f.attrs;let g=i(f);u[g]?(u[g]+=1,g+=`-#${u[g]}`):u[g]=1,m.id!==g&&(l=!0,o.setMeta(e,!0).setNodeMarkup(p,void 0,{...m,id:g}))}}),l&&r.dispatch(o)};return new Zn({key:e,view:r=>(t(r),{update:(i,o)=>{i.state.doc.eq(o.doc)||t(i)}})})});ge(VS,{displayName:"Prose<syncHeadingIdPlugin>",group:"Prose"});const qS=qi(n=>{const e=t=>{if(t.composing||!t.editable)return;const r=Kf.type(n),i=qf.type(n),o=as.type(n),l=t.state,u=(m,g)=>{let w=!1;const k=`${g+1}.`;return m.label!==k&&(m.label=k,w=!0),w};let f=l.tr,p=!1;l.doc.descendants((m,g,w,k)=>{if(m.type===i){const b=m.maybeChild(0);(b==null?void 0:b.type)===o&&b.attrs.listType==="ordered"&&(p=!0,f.setNodeMarkup(g,r,{spread:"true"}),m.descendants((A,P,F,V)=>{if(A.type===o){const I={...A.attrs};u(I,V)&&(f=f.setNodeMarkup(P,void 0,I))}return!1}))}else if(m.type===o&&(w==null?void 0:w.type)===r){const b={...m.attrs};let A=!1;b.listType!=="ordered"&&(b.listType="ordered",A=!0),(w==null?void 0:w.maybeChild(0))&&(A=u(b,k)),A&&(f=f.setNodeMarkup(g,void 0,b),p=!0)}}),p&&t.dispatch(f.setMeta("addToHistory",!1))};return new Zn({key:new Ln("MILKDOWN_KEEP_LIST_ORDER"),view:t=>(e(t),{update:r=>{e(r)}})})});ge(qS,{displayName:"Prose<syncListOrderPlugin>",group:"Prose"});const TI=[$S,C3,HS,jS,k3,S3,x3,b3,_3,Y1,VS,qS].flat(),MI=[wI,kI,xI,SI,bI,TI].flat();var K2,J2;if(typeof WeakMap<"u"){let n=new WeakMap;K2=e=>n.get(e),J2=(e,t)=>(n.set(e,t),t)}else{const n=[];let t=0;K2=r=>{for(let i=0;i<n.length;i+=2)if(n[i]==r)return n[i+1]},J2=(r,i)=>(t==10&&(t=0),n[t++]=r,n[t++]=i)}var Ot=class{constructor(n,e,t,r){this.width=n,this.height=e,this.map=t,this.problems=r}findCell(n){for(let e=0;e<this.map.length;e++){const t=this.map[e];if(t!=n)continue;const r=e%this.width,i=e/this.width|0;let o=r+1,l=i+1;for(let u=1;o<this.width&&this.map[e+u]==t;u++)o++;for(let u=1;l<this.height&&this.map[e+this.width*u]==t;u++)l++;return{left:r,top:i,right:o,bottom:l}}throw new RangeError(`No cell with offset ${n} found`)}colCount(n){for(let e=0;e<this.map.length;e++)if(this.map[e]==n)return e%this.width;throw new RangeError(`No cell with offset ${n} found`)}nextCell(n,e,t){const{left:r,right:i,top:o,bottom:l}=this.findCell(n);return e=="horiz"?(t<0?r==0:i==this.width)?null:this.map[o*this.width+(t<0?r-1:i)]:(t<0?o==0:l==this.height)?null:this.map[r+this.width*(t<0?o-1:l)]}rectBetween(n,e){const{left:t,right:r,top:i,bottom:o}=this.findCell(n),{left:l,right:u,top:f,bottom:p}=this.findCell(e);return{left:Math.min(t,l),top:Math.min(i,f),right:Math.max(r,u),bottom:Math.max(o,p)}}cellsInRect(n){const e=[],t={};for(let r=n.top;r<n.bottom;r++)for(let i=n.left;i<n.right;i++){const o=r*this.width+i,l=this.map[o];t[l]||(t[l]=!0,!(i==n.left&&i&&this.map[o-1]==l||r==n.top&&r&&this.map[o-this.width]==l)&&e.push(l))}return e}positionAt(n,e,t){for(let r=0,i=0;;r++){const o=i+t.child(r).nodeSize;if(r==n){let l=e+n*this.width;const u=(n+1)*this.width;for(;l<u&&this.map[l]<i;)l++;return l==u?o-1:this.map[l]}i=o}}static get(n){return K2(n)||J2(n,NI(n))}};function NI(n){if(n.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+n.type.name);const e=AI(n),t=n.childCount,r=[];let i=0,o=null;const l=[];for(let p=0,m=e*t;p<m;p++)r[p]=0;for(let p=0,m=0;p<t;p++){const g=n.child(p);m++;for(let b=0;;b++){for(;i<r.length&&r[i]!=0;)i++;if(b==g.childCount)break;const A=g.child(b),{colspan:P,rowspan:F,colwidth:V}=A.attrs;for(let I=0;I<F;I++){if(I+p>=t){(o||(o=[])).push({type:"overlong_rowspan",pos:m,n:F-I});break}const W=i+I*e;for(let B=0;B<P;B++){r[W+B]==0?r[W+B]=m:(o||(o=[])).push({type:"collision",row:p,pos:m,n:P-B});const z=V&&V[B];if(z){const H=(W+B)%e*2,Q=l[H];Q==null||Q!=z&&l[H+1]==1?(l[H]=z,l[H+1]=1):Q==z&&l[H+1]++}}}i+=P,m+=A.nodeSize}const w=(p+1)*e;let k=0;for(;i<w;)r[i++]==0&&k++;k&&(o||(o=[])).push({type:"missing",row:p,n:k}),m++}(e===0||t===0)&&(o||(o=[])).push({type:"zero_sized"});const u=new Ot(e,t,r,o);let f=!1;for(let p=0;!f&&p<l.length;p+=2)l[p]!=null&&l[p+1]<t&&(f=!0);return f&&II(u,l,n),u}function AI(n){let e=-1,t=!1;for(let r=0;r<n.childCount;r++){const i=n.child(r);let o=0;if(t)for(let l=0;l<r;l++){const u=n.child(l);for(let f=0;f<u.childCount;f++){const p=u.child(f);l+p.attrs.rowspan>r&&(o+=p.attrs.colspan)}}for(let l=0;l<i.childCount;l++){const u=i.child(l);o+=u.attrs.colspan,u.attrs.rowspan>1&&(t=!0)}e==-1?e=o:e!=o&&(e=Math.max(e,o))}return e}function II(n,e,t){n.problems||(n.problems=[]);const r={};for(let i=0;i<n.map.length;i++){const o=n.map[i];if(r[o])continue;r[o]=!0;const l=t.nodeAt(o);if(!l)throw new RangeError(`No cell with offset ${o} found`);let u=null;const f=l.attrs;for(let p=0;p<f.colspan;p++){const m=(i+p)%n.width,g=e[m*2];g!=null&&(!f.colwidth||f.colwidth[p]!=g)&&((u||(u=OI(f)))[p]=g)}u&&n.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:u})}}function OI(n){if(n.colwidth)return n.colwidth.slice();const e=[];for(let t=0;t<n.colspan;t++)e.push(0);return e}function lx(n,e){if(typeof n=="string")return{};const t=n.getAttribute("data-colwidth"),r=t&&/^\d+(,\d+)*$/.test(t)?t.split(",").map(l=>Number(l)):null,i=Number(n.getAttribute("colspan")||1),o={colspan:i,rowspan:Number(n.getAttribute("rowspan")||1),colwidth:r&&r.length==i?r:null};for(const l in e){const u=e[l].getFromDOM,f=u&&u(n);f!=null&&(o[l]=f)}return o}function ax(n,e){const t={};n.attrs.colspan!=1&&(t.colspan=n.attrs.colspan),n.attrs.rowspan!=1&&(t.rowspan=n.attrs.rowspan),n.attrs.colwidth&&(t["data-colwidth"]=n.attrs.colwidth.join(","));for(const r in e){const i=e[r].setDOMAttr;i&&i(n.attrs[r],t)}return t}function PI(n){const e=n.cellAttributes||{},t={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(const r in e)t[r]={default:e[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:n.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:n.cellContent,attrs:t,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:r=>lx(r,e)}],toDOM(r){return["td",ax(r,e),0]}},table_header:{content:n.cellContent,attrs:t,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:r=>lx(r,e)}],toDOM(r){return["th",ax(r,e),0]}}}}function Vi(n){let e=n.cached.tableNodeTypes;if(!e){e=n.cached.tableNodeTypes={};for(const t in n.nodes){const r=n.nodes[t],i=r.spec.tableRole;i&&(e[i]=r)}}return e}var Kl=new Ln("selectingCells");function zp(n){for(let e=n.depth-1;e>0;e--)if(n.node(e).type.spec.tableRole=="row")return n.node(0).resolve(n.before(e+1));return null}function Ki(n){const e=n.selection.$head;for(let t=e.depth;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return!0;return!1}function Z1(n){const e=n.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const t=zp(e.$head)||RI(e.$head);if(t)return t;throw new RangeError(`No cell found around position ${e.head}`)}function RI(n){for(let e=n.nodeAfter,t=n.pos;e;e=e.firstChild,t++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t)}for(let e=n.nodeBefore,t=n.pos;e;e=e.lastChild,t--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t-e.nodeSize)}}function G2(n){return n.parent.type.spec.tableRole=="row"&&!!n.nodeAfter}function DI(n){return n.node(0).resolve(n.pos+n.nodeAfter.nodeSize)}function E3(n,e){return n.depth==e.depth&&n.pos>=e.start(-1)&&n.pos<=e.end(-1)}function KS(n,e,t){const r=n.node(-1),i=Ot.get(r),o=n.start(-1),l=i.nextCell(n.pos-o,e,t);return l==null?null:n.node(0).resolve(o+l)}function Du(n,e,t=1){const r={...n,colspan:n.colspan-t};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,t),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function zI(n,e,t=1){const r={...n,colspan:n.colspan+t};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<t;i++)r.colwidth.splice(e,0,0)}return r}function LI(n,e,t){const r=Vi(e.type.schema).header_cell;for(let i=0;i<n.height;i++)if(e.nodeAt(n.map[t+i*n.width]).type!=r)return!1;return!0}var Kt=class Vs extends et{constructor(e,t=e){const r=e.node(-1),i=Ot.get(r),o=e.start(-1),l=i.rectBetween(e.pos-o,t.pos-o),u=e.node(0),f=i.cellsInRect(l).filter(m=>m!=t.pos-o);f.unshift(t.pos-o);const p=f.map(m=>{const g=r.nodeAt(m);if(!g)throw RangeError(`No cell with offset ${m} found`);const w=o+m+1;return new c5(u.resolve(w),u.resolve(w+g.content.size))});super(p[0].$from,p[0].$to,p),this.$anchorCell=e,this.$headCell=t}map(e,t){const r=e.resolve(t.map(this.$anchorCell.pos)),i=e.resolve(t.map(this.$headCell.pos));if(G2(r)&&G2(i)&&E3(r,i)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?Vs.rowSelection(r,i):o&&this.isColSelection()?Vs.colSelection(r,i):new Vs(r,i)}return st.between(r,i)}content(){const e=this.$anchorCell.node(-1),t=Ot.get(e),r=this.$anchorCell.start(-1),i=t.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},l=[];for(let f=i.top;f<i.bottom;f++){const p=[];for(let m=f*t.width+i.left,g=i.left;g<i.right;g++,m++){const w=t.map[m];if(o[w])continue;o[w]=!0;const k=t.findCell(w);let b=e.nodeAt(w);if(!b)throw RangeError(`No cell with offset ${w} found`);const A=i.left-k.left,P=k.right-i.right;if(A>0||P>0){let F=b.attrs;if(A>0&&(F=Du(F,0,A)),P>0&&(F=Du(F,F.colspan-P,P)),k.left<i.left){if(b=b.type.createAndFill(F),!b)throw RangeError(`Could not create cell with attrs ${JSON.stringify(F)}`)}else b=b.type.create(F,b.content)}if(k.top<i.top||k.bottom>i.bottom){const F={...b.attrs,rowspan:Math.min(k.bottom,i.bottom)-Math.max(k.top,i.top)};k.top<i.top?b=b.type.createAndFill(F):b=b.type.create(F,b.content)}p.push(b)}l.push(e.child(f).copy(_e.from(p)))}const u=this.isColSelection()&&this.isRowSelection()?e:l;return new Ne(_e.from(u),1,1)}replace(e,t=Ne.empty){const r=e.steps.length,i=this.ranges;for(let l=0;l<i.length;l++){const{$from:u,$to:f}=i[l],p=e.mapping.slice(r);e.replace(p.map(u.pos),p.map(f.pos),l?Ne.empty:t)}const o=et.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,t){this.replace(e,new Ne(_e.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),r=Ot.get(t),i=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let l=0;l<o.length;l++)e(t.nodeAt(o[l]),i+o[l])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){const r=e.node(-1),i=Ot.get(r),o=e.start(-1),l=i.findCell(e.pos-o),u=i.findCell(t.pos-o),f=e.node(0);return l.top<=u.top?(l.top>0&&(e=f.resolve(o+i.map[l.left])),u.bottom<i.height&&(t=f.resolve(o+i.map[i.width*(i.height-1)+u.right-1]))):(u.top>0&&(t=f.resolve(o+i.map[u.left])),l.bottom<i.height&&(e=f.resolve(o+i.map[i.width*(i.height-1)+l.right-1]))),new Vs(e,t)}isRowSelection(){const e=this.$anchorCell.node(-1),t=Ot.get(e),r=this.$anchorCell.start(-1),i=t.colCount(this.$anchorCell.pos-r),o=t.colCount(this.$headCell.pos-r);if(Math.min(i,o)>0)return!1;const l=i+this.$anchorCell.nodeAfter.attrs.colspan,u=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(l,u)==t.width}eq(e){return e instanceof Vs&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){const r=e.node(-1),i=Ot.get(r),o=e.start(-1),l=i.findCell(e.pos-o),u=i.findCell(t.pos-o),f=e.node(0);return l.left<=u.left?(l.left>0&&(e=f.resolve(o+i.map[l.top*i.width])),u.right<i.width&&(t=f.resolve(o+i.map[i.width*(u.top+1)-1]))):(u.left>0&&(t=f.resolve(o+i.map[u.top*i.width])),l.right<i.width&&(e=f.resolve(o+i.map[i.width*(l.top+1)-1]))),new Vs(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new Vs(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){return new Vs(e.resolve(t),e.resolve(r))}getBookmark(){return new FI(this.$anchorCell.pos,this.$headCell.pos)}};Kt.prototype.visible=!1;et.jsonID("cell",Kt);var FI=class JS{constructor(e,t){this.anchor=e,this.head=t}map(e){return new JS(e.map(this.anchor),e.map(this.head))}resolve(e){const t=e.resolve(this.anchor),r=e.resolve(this.head);return t.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&t.index()<t.parent.childCount&&r.index()<r.parent.childCount&&E3(t,r)?new Kt(t,r):et.near(r,1)}};function BI(n){if(!(n.selection instanceof Kt))return null;const e=[];return n.selection.forEachCell((t,r)=>{e.push(Xn.node(r,r+t.nodeSize,{class:"selectedCell"}))}),Gt.create(n.doc,e)}function UI({$from:n,$to:e}){if(n.pos==e.pos||n.pos<e.pos-6)return!1;let t=n.pos,r=e.pos,i=n.depth;for(;i>=0&&!(n.after(i+1)<n.end(i));i--,t++);for(let o=e.depth;o>=0&&!(e.before(o+1)>e.start(o));o--,r--);return t==r&&/row|table/.test(n.node(i).type.spec.tableRole)}function WI({$from:n,$to:e}){let t,r;for(let i=n.depth;i>0;i--){const o=n.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){t=o;break}}for(let i=e.depth;i>0;i--){const o=e.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}return t!==r&&e.parentOffset===0}function jI(n,e,t){const r=(e||n).selection,i=(e||n).doc;let o,l;if(r instanceof Ze&&(l=r.node.type.spec.tableRole)){if(l=="cell"||l=="header_cell")o=Kt.create(i,r.from);else if(l=="row"){const u=i.resolve(r.from+1);o=Kt.rowSelection(u,u)}else if(!t){const u=Ot.get(r.node),f=r.from+1,p=f+u.map[u.width*u.height-1];o=Kt.create(i,f+1,p)}}else r instanceof st&&UI(r)?o=st.create(i,r.from):r instanceof st&&WI(r)&&(o=st.create(i,r.$from.start(),r.$from.end()));return o&&(e||(e=n.tr)).setSelection(o),e}var $I=new Ln("fix-tables");function GS(n,e,t,r){const i=n.childCount,o=e.childCount;e:for(let l=0,u=0;l<o;l++){const f=e.child(l);for(let p=u,m=Math.min(i,l+3);p<m;p++)if(n.child(p)==f){u=p+1,t+=f.nodeSize;continue e}r(f,t),u<i&&n.child(u).sameMarkup(f)?GS(n.child(u),f,t+1,r):f.nodesBetween(0,f.content.size,r,t+1),t+=f.nodeSize}}function HI(n,e){let t;const r=(i,o)=>{i.type.spec.tableRole=="table"&&(t=VI(n,i,o,t))};return e?e.doc!=n.doc&&GS(e.doc,n.doc,0,r):n.doc.descendants(r),t}function VI(n,e,t,r){const i=Ot.get(e);if(!i.problems)return r;r||(r=n.tr);const o=[];for(let f=0;f<i.height;f++)o.push(0);for(let f=0;f<i.problems.length;f++){const p=i.problems[f];if(p.type=="collision"){const m=e.nodeAt(p.pos);if(!m)continue;const g=m.attrs;for(let w=0;w<g.rowspan;w++)o[p.row+w]+=p.n;r.setNodeMarkup(r.mapping.map(t+1+p.pos),null,Du(g,g.colspan-p.n,p.n))}else if(p.type=="missing")o[p.row]+=p.n;else if(p.type=="overlong_rowspan"){const m=e.nodeAt(p.pos);if(!m)continue;r.setNodeMarkup(r.mapping.map(t+1+p.pos),null,{...m.attrs,rowspan:m.attrs.rowspan-p.n})}else if(p.type=="colwidth mismatch"){const m=e.nodeAt(p.pos);if(!m)continue;r.setNodeMarkup(r.mapping.map(t+1+p.pos),null,{...m.attrs,colwidth:p.colwidth})}else if(p.type=="zero_sized"){const m=r.mapping.map(t);r.delete(m,m+e.nodeSize)}}let l,u;for(let f=0;f<o.length;f++)o[f]&&(l==null&&(l=f),u=f);for(let f=0,p=t+1;f<i.height;f++){const m=e.child(f),g=p+m.nodeSize,w=o[f];if(w>0){let k="cell";m.firstChild&&(k=m.firstChild.type.spec.tableRole);const b=[];for(let P=0;P<w;P++){const F=Vi(n.schema)[k].createAndFill();F&&b.push(F)}const A=(f==0||l==f-1)&&u==f?p+1:g-1;r.insert(r.mapping.map(A),b)}p=g}return r.setMeta($I,{fixTables:!0})}function ca(n){const e=n.selection,t=Z1(n),r=t.node(-1),i=t.start(-1),o=Ot.get(r);return{...e instanceof Kt?o.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):o.findCell(t.pos-i),tableStart:i,map:o,table:r}}function QS(n,{map:e,tableStart:t,table:r},i){let o=i>0?-1:0;LI(e,r,i+o)&&(o=i==0||i==e.width?null:0);for(let l=0;l<e.height;l++){const u=l*e.width+i;if(i>0&&i<e.width&&e.map[u-1]==e.map[u]){const f=e.map[u],p=r.nodeAt(f);n.setNodeMarkup(n.mapping.map(t+f),null,zI(p.attrs,i-e.colCount(f))),l+=p.attrs.rowspan-1}else{const f=o==null?Vi(r.type.schema).cell:r.nodeAt(e.map[u+o]).type,p=e.positionAt(l,i,r);n.insert(n.mapping.map(t+p),f.createAndFill())}}return n}function qI(n,e){if(!Ki(n))return!1;if(e){const t=ca(n);e(QS(n.tr,t,t.left))}return!0}function KI(n,e){if(!Ki(n))return!1;if(e){const t=ca(n);e(QS(n.tr,t,t.right))}return!0}function JI(n,{map:e,table:t,tableStart:r},i){const o=n.mapping.maps.length;for(let l=0;l<e.height;){const u=l*e.width+i,f=e.map[u],p=t.nodeAt(f),m=p.attrs;if(i>0&&e.map[u-1]==f||i<e.width-1&&e.map[u+1]==f)n.setNodeMarkup(n.mapping.slice(o).map(r+f),null,Du(m,i-e.colCount(f)));else{const g=n.mapping.slice(o).map(r+f);n.delete(g,g+p.nodeSize)}l+=m.rowspan}}function GI(n,e){if(!Ki(n))return!1;if(e){const t=ca(n),r=n.tr;if(t.left==0&&t.right==t.map.width)return!1;for(let i=t.right-1;JI(r,t,i),i!=t.left;i--){const o=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!o)throw RangeError("No table found");t.table=o,t.map=Ot.get(o)}e(r)}return!0}function QI(n,{map:e,table:t,tableStart:r},i){let o=0;for(let p=0;p<i;p++)o+=t.child(p).nodeSize;const l=o+t.child(i).nodeSize,u=n.mapping.maps.length;n.delete(o+r,l+r);const f=new Set;for(let p=0,m=i*e.width;p<e.width;p++,m++){const g=e.map[m];if(!f.has(g)){if(f.add(g),i>0&&g==e.map[m-e.width]){const w=t.nodeAt(g).attrs;n.setNodeMarkup(n.mapping.slice(u).map(g+r),null,{...w,rowspan:w.rowspan-1}),p+=w.colspan-1}else if(i<e.height&&g==e.map[m+e.width]){const w=t.nodeAt(g),k=w.attrs,b=w.type.create({...k,rowspan:w.attrs.rowspan-1},w.content),A=e.positionAt(i+1,p,t);n.insert(n.mapping.slice(u).map(r+A),b),p+=k.colspan-1}}}}function YI(n,e){if(!Ki(n))return!1;if(e){const t=ca(n),r=n.tr;if(t.top==0&&t.bottom==t.map.height)return!1;for(let i=t.bottom-1;QI(r,t,i),i!=t.top;i--){const o=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!o)throw RangeError("No table found");t.table=o,t.map=Ot.get(t.table)}e(r)}return!0}function XI(n,e){return function(t,r){if(!Ki(t))return!1;const i=Z1(t);if(i.nodeAfter.attrs[n]===e)return!1;if(r){const o=t.tr;t.selection instanceof Kt?t.selection.forEachCell((l,u)=>{l.attrs[n]!==e&&o.setNodeMarkup(u,null,{...l.attrs,[n]:e})}):o.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[n]:e}),r(o)}return!0}}function ZI(n){return function(e,t){if(!Ki(e))return!1;if(t){const r=Vi(e.schema),i=ca(e),o=e.tr,l=i.map.cellsInRect(n=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:n=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),u=l.map(f=>i.table.nodeAt(f));for(let f=0;f<l.length;f++)u[f].type==r.header_cell&&o.setNodeMarkup(i.tableStart+l[f],r.cell,u[f].attrs);if(o.steps.length==0)for(let f=0;f<l.length;f++)o.setNodeMarkup(i.tableStart+l[f],r.header_cell,u[f].attrs);t(o)}return!0}}function ux(n,e,t){const r=e.map.cellsInRect({left:0,top:0,right:n=="row"?e.map.width:1,bottom:n=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const o=e.table.nodeAt(r[i]);if(o&&o.type!==t.header_cell)return!1}return!0}function T3(n,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?ZI(n):function(t,r){if(!Ki(t))return!1;if(r){const i=Vi(t.schema),o=ca(t),l=t.tr,u=ux("row",o,i),f=ux("column",o,i),m=(n==="column"?u:n==="row"?f:!1)?1:0,g=n=="column"?{left:0,top:m,right:1,bottom:o.map.height}:n=="row"?{left:m,top:0,right:o.map.width,bottom:1}:o,w=n=="column"?f?i.cell:i.header_cell:n=="row"?u?i.cell:i.header_cell:i.cell;o.map.cellsInRect(g).forEach(k=>{const b=k+o.tableStart,A=l.doc.nodeAt(b);A&&l.setNodeMarkup(b,w,A.attrs)}),r(l)}return!0}}T3("row",{useDeprecatedLogic:!0});T3("column",{useDeprecatedLogic:!0});T3("cell",{useDeprecatedLogic:!0});function eO(n,e){if(e<0){const t=n.nodeBefore;if(t)return n.pos-t.nodeSize;for(let r=n.index(-1)-1,i=n.before();r>=0;r--){const o=n.node(-1).child(r),l=o.lastChild;if(l)return i-1-l.nodeSize;i-=o.nodeSize}}else{if(n.index()<n.parent.childCount-1)return n.pos+n.nodeAfter.nodeSize;const t=n.node(-1);for(let r=n.indexAfter(-1),i=n.after();r<t.childCount;r++){const o=t.child(r);if(o.childCount)return i+1;i+=o.nodeSize}}return null}function YS(n){return function(e,t){if(!Ki(e))return!1;const r=eO(Z1(e),n);if(r==null)return!1;if(t){const i=e.doc.resolve(r);t(e.tr.setSelection(st.between(i,DI(i))).scrollIntoView())}return!0}}function tO(n,e){const t=n.selection.$anchor;for(let r=t.depth;r>0;r--)if(t.node(r).type.spec.tableRole=="table")return e&&e(n.tr.delete(t.before(r),t.after(r)).scrollIntoView()),!0;return!1}function Cm(n,e){const t=n.selection;if(!(t instanceof Kt))return!1;if(e){const r=n.tr,i=Vi(n.schema).cell.createAndFill().content;t.forEachCell((o,l)=>{o.content.eq(i)||r.replace(r.mapping.map(l+1),r.mapping.map(l+o.nodeSize-1),new Ne(i,0,0))}),r.docChanged&&e(r)}return!0}function nO(n){if(!n.size)return null;let{content:e,openStart:t,openEnd:r}=n;for(;e.childCount==1&&(t>0&&r>0||e.child(0).type.spec.tableRole=="table");)t--,r--,e=e.child(0).content;const i=e.child(0),o=i.type.spec.tableRole,l=i.type.schema,u=[];if(o=="row")for(let f=0;f<e.childCount;f++){let p=e.child(f).content;const m=f?0:Math.max(0,t-1),g=f<e.childCount-1?0:Math.max(0,r-1);(m||g)&&(p=Q2(Vi(l).row,new Ne(p,m,g)).content),u.push(p)}else if(o=="cell"||o=="header_cell")u.push(t||r?Q2(Vi(l).row,new Ne(e,t,r)).content:e);else return null;return rO(l,u)}function rO(n,e){const t=[];for(let i=0;i<e.length;i++){const o=e[i];for(let l=o.childCount-1;l>=0;l--){const{rowspan:u,colspan:f}=o.child(l).attrs;for(let p=i;p<i+u;p++)t[p]=(t[p]||0)+f}}let r=0;for(let i=0;i<t.length;i++)r=Math.max(r,t[i]);for(let i=0;i<t.length;i++)if(i>=e.length&&e.push(_e.empty),t[i]<r){const o=Vi(n).cell.createAndFill(),l=[];for(let u=t[i];u<r;u++)l.push(o);e[i]=e[i].append(_e.from(l))}return{height:e.length,width:r,rows:e}}function Q2(n,e){const t=n.createAndFill();return new u5(t).replace(0,t.content.size,e).doc}function iO({width:n,height:e,rows:t},r,i){if(n!=r){const o=[],l=[];for(let u=0;u<t.length;u++){const f=t[u],p=[];for(let m=o[u]||0,g=0;m<r;g++){let w=f.child(g%f.childCount);m+w.attrs.colspan>r&&(w=w.type.createChecked(Du(w.attrs,w.attrs.colspan,m+w.attrs.colspan-r),w.content)),p.push(w),m+=w.attrs.colspan;for(let k=1;k<w.attrs.rowspan;k++)o[u+k]=(o[u+k]||0)+w.attrs.colspan}l.push(_e.from(p))}t=l,n=r}if(e!=i){const o=[];for(let l=0,u=0;l<i;l++,u++){const f=[],p=t[u%e];for(let m=0;m<p.childCount;m++){let g=p.child(m);l+g.attrs.rowspan>i&&(g=g.type.create({...g.attrs,rowspan:Math.max(1,i-g.attrs.rowspan)},g.content)),f.push(g)}o.push(_e.from(f))}t=o,e=i}return{width:n,height:e,rows:t}}function oO(n,e,t,r,i,o,l){const u=n.doc.type.schema,f=Vi(u);let p,m;if(i>e.width)for(let g=0,w=0;g<e.height;g++){const k=t.child(g);w+=k.nodeSize;const b=[];let A;k.lastChild==null||k.lastChild.type==f.cell?A=p||(p=f.cell.createAndFill()):A=m||(m=f.header_cell.createAndFill());for(let P=e.width;P<i;P++)b.push(A);n.insert(n.mapping.slice(l).map(w-1+r),b)}if(o>e.height){const g=[];for(let b=0,A=(e.height-1)*e.width;b<Math.max(e.width,i);b++){const P=b>=e.width?!1:t.nodeAt(e.map[A+b]).type==f.header_cell;g.push(P?m||(m=f.header_cell.createAndFill()):p||(p=f.cell.createAndFill()))}const w=f.row.create(null,_e.from(g)),k=[];for(let b=e.height;b<o;b++)k.push(w);n.insert(n.mapping.slice(l).map(r+t.nodeSize-2),k)}return!!(p||m)}function cx(n,e,t,r,i,o,l,u){if(l==0||l==e.height)return!1;let f=!1;for(let p=i;p<o;p++){const m=l*e.width+p,g=e.map[m];if(e.map[m-e.width]==g){f=!0;const w=t.nodeAt(g),{top:k,left:b}=e.findCell(g);n.setNodeMarkup(n.mapping.slice(u).map(g+r),null,{...w.attrs,rowspan:l-k}),n.insert(n.mapping.slice(u).map(e.positionAt(l,b,t)),w.type.createAndFill({...w.attrs,rowspan:k+w.attrs.rowspan-l})),p+=w.attrs.colspan-1}}return f}function fx(n,e,t,r,i,o,l,u){if(l==0||l==e.width)return!1;let f=!1;for(let p=i;p<o;p++){const m=p*e.width+l,g=e.map[m];if(e.map[m-1]==g){f=!0;const w=t.nodeAt(g),k=e.colCount(g),b=n.mapping.slice(u).map(g+r);n.setNodeMarkup(b,null,Du(w.attrs,l-k,w.attrs.colspan-(l-k))),n.insert(b+w.nodeSize,w.type.createAndFill(Du(w.attrs,0,l-k))),p+=w.attrs.rowspan-1}}return f}function hx(n,e,t,r,i){let o=t?n.doc.nodeAt(t-1):n.doc;if(!o)throw new Error("No table found");let l=Ot.get(o);const{top:u,left:f}=r,p=f+i.width,m=u+i.height,g=n.tr;let w=0;function k(){if(o=t?g.doc.nodeAt(t-1):g.doc,!o)throw new Error("No table found");l=Ot.get(o),w=g.mapping.maps.length}oO(g,l,o,t,p,m,w)&&k(),cx(g,l,o,t,f,p,u,w)&&k(),cx(g,l,o,t,f,p,m,w)&&k(),fx(g,l,o,t,u,m,f,w)&&k(),fx(g,l,o,t,u,m,p,w)&&k();for(let b=u;b<m;b++){const A=l.positionAt(b,f,o),P=l.positionAt(b,p,o);g.replace(g.mapping.slice(w).map(A+t),g.mapping.slice(w).map(P+t),new Ne(i.rows[b-u],0,0))}k(),g.setSelection(new Kt(g.doc.resolve(t+l.positionAt(u,f,o)),g.doc.resolve(t+l.positionAt(m-1,p-1,o)))),e(g)}var sO=T5({ArrowLeft:Em("horiz",-1),ArrowRight:Em("horiz",1),ArrowUp:Em("vert",-1),ArrowDown:Em("vert",1),"Shift-ArrowLeft":Tm("horiz",-1),"Shift-ArrowRight":Tm("horiz",1),"Shift-ArrowUp":Tm("vert",-1),"Shift-ArrowDown":Tm("vert",1),Backspace:Cm,"Mod-Backspace":Cm,Delete:Cm,"Mod-Delete":Cm});function a1(n,e,t){return t.eq(n.selection)?!1:(e&&e(n.tr.setSelection(t).scrollIntoView()),!0)}function Em(n,e){return(t,r,i)=>{if(!i)return!1;const o=t.selection;if(o instanceof Kt)return a1(t,r,et.near(o.$headCell,e));if(n!="horiz"&&!o.empty)return!1;const l=XS(i,n,e);if(l==null)return!1;if(n=="horiz")return a1(t,r,et.near(t.doc.resolve(o.head+e),e));{const u=t.doc.resolve(l),f=KS(u,n,e);let p;return f?p=et.near(f,1):e<0?p=et.near(t.doc.resolve(u.before(-1)),-1):p=et.near(t.doc.resolve(u.after(-1)),1),a1(t,r,p)}}}function Tm(n,e){return(t,r,i)=>{if(!i)return!1;const o=t.selection;let l;if(o instanceof Kt)l=o;else{const f=XS(i,n,e);if(f==null)return!1;l=new Kt(t.doc.resolve(f))}const u=KS(l.$headCell,n,e);return u?a1(t,r,new Kt(l.$anchorCell,u)):!1}}function lO(n,e){const t=n.state.doc,r=zp(t.resolve(e));return r?(n.dispatch(n.state.tr.setSelection(new Kt(r))),!0):!1}function aO(n,e,t){if(!Ki(n.state))return!1;let r=nO(t);const i=n.state.selection;if(i instanceof Kt){r||(r={width:1,height:1,rows:[_e.from(Q2(Vi(n.state.schema).cell,t))]});const o=i.$anchorCell.node(-1),l=i.$anchorCell.start(-1),u=Ot.get(o).rectBetween(i.$anchorCell.pos-l,i.$headCell.pos-l);return r=iO(r,u.right-u.left,u.bottom-u.top),hx(n.state,n.dispatch,l,u,r),!0}else if(r){const o=Z1(n.state),l=o.start(-1);return hx(n.state,n.dispatch,l,Ot.get(o.node(-1)).findCell(o.pos-l),r),!0}else return!1}function uO(n,e){var t;if(e.ctrlKey||e.metaKey)return;const r=dx(n,e.target);let i;if(e.shiftKey&&n.state.selection instanceof Kt)o(n.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=zp(n.state.selection.$anchor))!=null&&((t=Yy(n,e))==null?void 0:t.pos)!=i.pos)o(i,e),e.preventDefault();else if(!r)return;function o(f,p){let m=Yy(n,p);const g=Kl.getState(n.state)==null;if(!m||!E3(f,m))if(g)m=f;else return;const w=new Kt(f,m);if(g||!n.state.selection.eq(w)){const k=n.state.tr.setSelection(w);g&&k.setMeta(Kl,f.pos),n.dispatch(k)}}function l(){n.root.removeEventListener("mouseup",l),n.root.removeEventListener("dragstart",l),n.root.removeEventListener("mousemove",u),Kl.getState(n.state)!=null&&n.dispatch(n.state.tr.setMeta(Kl,-1))}function u(f){const p=f,m=Kl.getState(n.state);let g;if(m!=null)g=n.state.doc.resolve(m);else if(dx(n,p.target)!=r&&(g=Yy(n,e),!g))return l();g&&o(g,p)}n.root.addEventListener("mouseup",l),n.root.addEventListener("dragstart",l),n.root.addEventListener("mousemove",u)}function XS(n,e,t){if(!(n.state.selection instanceof st))return null;const{$head:r}=n.state.selection;for(let i=r.depth-1;i>=0;i--){const o=r.node(i);if((t<0?r.index(i):r.indexAfter(i))!=(t<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const u=r.before(i),f=e=="vert"?t>0?"down":"up":t>0?"right":"left";return n.endOfTextblock(f)?u:null}}return null}function dx(n,e){for(;e&&e!=n.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function Yy(n,e){const t=n.posAtCoords({left:e.clientX,top:e.clientY});return t&&t?zp(n.state.doc.resolve(t.pos)):null}var cO=class{constructor(n,e){this.node=n,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Y2(n,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(n){return n.type!=this.node.type?!1:(this.node=n,Y2(n,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(n){return n.type=="attributes"&&(n.target==this.table||this.colgroup.contains(n.target))}};function Y2(n,e,t,r,i,o){var l;let u=0,f=!0,p=e.firstChild;const m=n.firstChild;if(m){for(let g=0,w=0;g<m.childCount;g++){const{colspan:k,colwidth:b}=m.child(g).attrs;for(let A=0;A<k;A++,w++){const P=i==w?o:b&&b[A],F=P?P+"px":"";if(u+=P||r,P||(f=!1),p)p.style.width!=F&&(p.style.width=F),p=p.nextSibling;else{const V=document.createElement("col");V.style.width=F,e.appendChild(V)}}}for(;p;){const g=p.nextSibling;(l=p.parentNode)==null||l.removeChild(p),p=g}f?(t.style.width=u+"px",t.style.minWidth=""):(t.style.width="",t.style.minWidth=u+"px")}}var gi=new Ln("tableColumnResizing");function fO({handleWidth:n=5,cellMinWidth:e=25,defaultCellMinWidth:t=100,View:r=cO,lastColumnResizable:i=!0}={}){const o=new Zn({key:gi,state:{init(l,u){var f,p;const m=(p=(f=o.spec)==null?void 0:f.props)==null?void 0:p.nodeViews,g=Vi(u.schema).table.name;return r&&m&&(m[g]=(w,k)=>new r(w,t,k)),new hO(-1,!1)},apply(l,u){return u.apply(l)}},props:{attributes:l=>{const u=gi.getState(l);return u&&u.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(l,u)=>{dO(l,u,n,i)},mouseleave:l=>{pO(l)},mousedown:(l,u)=>{mO(l,u,e,t)}},decorations:l=>{const u=gi.getState(l);if(u&&u.activeHandle>-1)return kO(l,u.activeHandle)},nodeViews:{}}});return o}var hO=class u1{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){const t=this,r=e.getMeta(gi);if(r&&r.setHandle!=null)return new u1(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new u1(t.activeHandle,r.setDragging);if(t.activeHandle>-1&&e.docChanged){let i=e.mapping.map(t.activeHandle,-1);return G2(e.doc.resolve(i))||(i=-1),new u1(i,t.dragging)}return t}};function dO(n,e,t,r){if(!n.editable)return;const i=gi.getState(n.state);if(i&&!i.dragging){const o=yO(e.target);let l=-1;if(o){const{left:u,right:f}=o.getBoundingClientRect();e.clientX-u<=t?l=px(n,e,"left",t):f-e.clientX<=t&&(l=px(n,e,"right",t))}if(l!=i.activeHandle){if(!r&&l!==-1){const u=n.state.doc.resolve(l),f=u.node(-1),p=Ot.get(f),m=u.start(-1);if(p.colCount(u.pos-m)+u.nodeAfter.attrs.colspan-1==p.width-1)return}ZS(n,l)}}}function pO(n){if(!n.editable)return;const e=gi.getState(n.state);e&&e.activeHandle>-1&&!e.dragging&&ZS(n,-1)}function mO(n,e,t,r){var i;if(!n.editable)return!1;const o=(i=n.dom.ownerDocument.defaultView)!=null?i:window,l=gi.getState(n.state);if(!l||l.activeHandle==-1||l.dragging)return!1;const u=n.state.doc.nodeAt(l.activeHandle),f=gO(n,l.activeHandle,u.attrs);n.dispatch(n.state.tr.setMeta(gi,{setDragging:{startX:e.clientX,startWidth:f}}));function p(g){o.removeEventListener("mouseup",p),o.removeEventListener("mousemove",m);const w=gi.getState(n.state);w!=null&&w.dragging&&(vO(n,w.activeHandle,mx(w.dragging,g,t)),n.dispatch(n.state.tr.setMeta(gi,{setDragging:null})))}function m(g){if(!g.which)return p(g);const w=gi.getState(n.state);if(w&&w.dragging){const k=mx(w.dragging,g,t);gx(n,w.activeHandle,k,r)}}return gx(n,l.activeHandle,f,r),o.addEventListener("mouseup",p),o.addEventListener("mousemove",m),e.preventDefault(),!0}function gO(n,e,{colspan:t,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const o=n.domAtPos(e);let u=o.node.childNodes[o.offset].offsetWidth,f=t;if(r)for(let p=0;p<t;p++)r[p]&&(u-=r[p],f--);return u/f}function yO(n){for(;n&&n.nodeName!="TD"&&n.nodeName!="TH";)n=n.classList&&n.classList.contains("ProseMirror")?null:n.parentNode;return n}function px(n,e,t,r){const i=t=="right"?-r:r,o=n.posAtCoords({left:e.clientX+i,top:e.clientY});if(!o)return-1;const{pos:l}=o,u=zp(n.state.doc.resolve(l));if(!u)return-1;if(t=="right")return u.pos;const f=Ot.get(u.node(-1)),p=u.start(-1),m=f.map.indexOf(u.pos-p);return m%f.width==0?-1:p+f.map[m-1]}function mx(n,e,t){const r=e.clientX-n.startX;return Math.max(t,n.startWidth+r)}function ZS(n,e){n.dispatch(n.state.tr.setMeta(gi,{setHandle:e}))}function vO(n,e,t){const r=n.state.doc.resolve(e),i=r.node(-1),o=Ot.get(i),l=r.start(-1),u=o.colCount(r.pos-l)+r.nodeAfter.attrs.colspan-1,f=n.state.tr;for(let p=0;p<o.height;p++){const m=p*o.width+u;if(p&&o.map[m]==o.map[m-o.width])continue;const g=o.map[m],w=i.nodeAt(g).attrs,k=w.colspan==1?0:u-o.colCount(g);if(w.colwidth&&w.colwidth[k]==t)continue;const b=w.colwidth?w.colwidth.slice():wO(w.colspan);b[k]=t,f.setNodeMarkup(l+g,null,{...w,colwidth:b})}f.docChanged&&n.dispatch(f)}function gx(n,e,t,r){const i=n.state.doc.resolve(e),o=i.node(-1),l=i.start(-1),u=Ot.get(o).colCount(i.pos-l)+i.nodeAfter.attrs.colspan-1;let f=n.domAtPos(i.start(-1)).node;for(;f&&f.nodeName!="TABLE";)f=f.parentNode;f&&Y2(o,f.firstChild,f,r,u,t)}function wO(n){return Array(n).fill(0)}function kO(n,e){var t;const r=[],i=n.doc.resolve(e),o=i.node(-1);if(!o)return Gt.empty;const l=Ot.get(o),u=i.start(-1),f=l.colCount(i.pos-u)+i.nodeAfter.attrs.colspan-1;for(let p=0;p<l.height;p++){const m=f+p*l.width;if((f==l.width-1||l.map[m]!=l.map[m+1])&&(p==0||l.map[m]!=l.map[m-l.width])){const g=l.map[m],w=u+g+o.nodeAt(g).nodeSize-1,k=document.createElement("div");k.className="column-resize-handle",(t=gi.getState(n))!=null&&t.dragging&&r.push(Xn.node(u+g,u+g+o.nodeAt(g).nodeSize,{class:"column-resize-dragging"})),r.push(Xn.widget(w,k))}}return Gt.create(n.doc,r)}function xO({allowTableNodeSelection:n=!1}={}){return new Zn({key:Kl,state:{init(){return null},apply(e,t){const r=e.getMeta(Kl);if(r!=null)return r==-1?null:r;if(t==null||!e.docChanged)return t;const{deleted:i,pos:o}=e.mapping.mapResult(t);return i?null:o}},props:{decorations:BI,handleDOMEvents:{mousedown:uO},createSelectionBetween(e){return Kl.getState(e.state)!=null?e.state.selection:null},handleTripleClick:lO,handleKeyDown:sO,handlePaste:aO},appendTransaction(e,t,r){return jI(r,HI(r,t),n)}})}var A1=typeof navigator<"u"?navigator:null,M3=A1&&A1.userAgent||"",SO=/Edge\/(\d+)/.exec(M3),bO=/MSIE \d/.exec(M3),_O=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(M3),CO=!!(bO||_O||SO),EO=!CO&&!!A1&&/Apple Computer/.test(A1.vendor),eb=new Ln("safari-ime-span"),X2=!1,TO={key:eb,props:{decorations:MO,handleDOMEvents:{compositionstart:()=>{X2=!0},compositionend:()=>{X2=!1}}}};function MO(n){const{$from:e,$to:t,to:r}=n.selection;if(X2&&e.sameParent(t)){const i=Xn.widget(r,NO,{ignoreSelection:!0,key:"safari-ime-span"});return Gt.create(n.doc,[i])}}function NO(n){const e=n.dom.ownerDocument.createElement("span");return e.className="ProseMirror-safari-ime-span",e}var AO=new Zn(EO?TO:{key:eb});function yx(n,e){const t=String(n);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=t.indexOf(e);for(;i!==-1;)r++,i=t.indexOf(e,i+e.length);return r}function IO(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function OO(n,e,t){const i=B1((t||{}).ignore||[]),o=PO(e);let l=-1;for(;++l<o.length;)z4(n,"text",u);function u(p,m){let g=-1,w;for(;++g<m.length;){const k=m[g],b=w?w.children:void 0;if(i(k,b?b.indexOf(k):void 0,w))return;w=k}if(w)return f(p,m)}function f(p,m){const g=m[m.length-1],w=o[l][0],k=o[l][1];let b=0;const P=g.children.indexOf(p);let F=!1,V=[];w.lastIndex=0;let I=w.exec(p.value);for(;I;){const W=I.index,B={index:I.index,input:I.input,stack:[...m,p]};let z=k(...I,B);if(typeof z=="string"&&(z=z.length>0?{type:"text",value:z}:void 0),z===!1?w.lastIndex=W+1:(b!==W&&V.push({type:"text",value:p.value.slice(b,W)}),Array.isArray(z)?V.push(...z):z&&V.push(z),b=W+I[0].length,F=!0),!w.global)break;I=w.exec(p.value)}return F?(b<p.value.length&&V.push({type:"text",value:p.value.slice(b)}),g.children.splice(P,1,...V)):V=[p],P+V.length}}function PO(n){const e=[];if(!Array.isArray(n))throw new TypeError("Expected find and replace tuple or list of tuples");const t=!n[0]||Array.isArray(n[0])?n:[n];let r=-1;for(;++r<t.length;){const i=t[r];e.push([RO(i[0]),DO(i[1])])}return e}function RO(n){return typeof n=="string"?new RegExp(IO(n),"g"):n}function DO(n){return typeof n=="function"?n:function(){return n}}const Xy="phrasing",Zy=["autolink","link","image","label"];function zO(){return{transforms:[$O],enter:{literalAutolink:FO,literalAutolinkEmail:e2,literalAutolinkHttp:e2,literalAutolinkWww:e2},exit:{literalAutolink:jO,literalAutolinkEmail:WO,literalAutolinkHttp:BO,literalAutolinkWww:UO}}}function LO(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Xy,notInConstruct:Zy},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Xy,notInConstruct:Zy},{character:":",before:"[ps]",after:"\\/",inConstruct:Xy,notInConstruct:Zy}]}}function FO(n){this.enter({type:"link",title:null,url:"",children:[]},n)}function e2(n){this.config.enter.autolinkProtocol.call(this,n)}function BO(n){this.config.exit.autolinkProtocol.call(this,n)}function UO(n){this.config.exit.data.call(this,n);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(n)}function WO(n){this.config.exit.autolinkEmail.call(this,n)}function jO(n){this.exit(n)}function $O(n){OO(n,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,HO],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),VO]],{ignore:["link","linkReference"]})}function HO(n,e,t,r,i){let o="";if(!tb(i)||(/^w/i.test(e)&&(t=e+t,e="",o="http://"),!qO(t)))return!1;const l=KO(t+r);if(!l[0])return!1;const u={type:"link",title:null,url:o+e+l[0],children:[{type:"text",value:e+l[0]}]};return l[1]?[u,{type:"text",value:l[1]}]:u}function VO(n,e,t,r){return!tb(r,!0)||/[-\d_]$/.test(t)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+t,children:[{type:"text",value:e+"@"+t}]}}function qO(n){const e=n.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function KO(n){const e=/[!"&'),.:;<>?\]}]+$/.exec(n);if(!e)return[n,void 0];n=n.slice(0,e.index);let t=e[0],r=t.indexOf(")");const i=yx(n,"(");let o=yx(n,")");for(;r!==-1&&i>o;)n+=t.slice(0,r+1),t=t.slice(r+1),r=t.indexOf(")"),o++;return[n,t]}function tb(n,e){const t=n.input.charCodeAt(n.index-1);return(n.index===0||Ou(t)||L1(t))&&(!e||t!==47)}nb.peek=nP;function JO(){this.buffer()}function GO(n){this.enter({type:"footnoteReference",identifier:"",label:""},n)}function QO(){this.buffer()}function YO(n){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},n)}function XO(n){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=ko(this.sliceSerialize(n)).toLowerCase(),t.label=e}function ZO(n){this.exit(n)}function eP(n){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=ko(this.sliceSerialize(n)).toLowerCase(),t.label=e}function tP(n){this.exit(n)}function nP(){return"["}function nb(n,e,t,r){const i=t.createTracker(r);let o=i.move("[^");const l=t.enter("footnoteReference"),u=t.enter("reference");return o+=i.move(t.safe(t.associationId(n),{after:"]",before:o})),u(),l(),o+=i.move("]"),o}function rP(){return{enter:{gfmFootnoteCallString:JO,gfmFootnoteCall:GO,gfmFootnoteDefinitionLabelString:QO,gfmFootnoteDefinition:YO},exit:{gfmFootnoteCallString:XO,gfmFootnoteCall:ZO,gfmFootnoteDefinitionLabelString:eP,gfmFootnoteDefinition:tP}}}function iP(n){let e=!1;return n&&n.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:t,footnoteReference:nb},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function t(r,i,o,l){const u=o.createTracker(l);let f=u.move("[^");const p=o.enter("footnoteDefinition"),m=o.enter("label");return f+=u.move(o.safe(o.associationId(r),{before:f,after:"]"})),m(),f+=u.move("]:"),r.children&&r.children.length>0&&(u.shift(4),f+=u.move((e?`
`:" ")+o.indentLines(o.containerFlow(r,u.current()),e?rb:oP))),p(),f}}function oP(n,e,t){return e===0?n:rb(n,e,t)}function rb(n,e,t){return(t?"":"    ")+n}const sP=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];ib.peek=fP;function lP(){return{canContainEols:["delete"],enter:{strikethrough:uP},exit:{strikethrough:cP}}}function aP(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:sP}],handlers:{delete:ib}}}function uP(n){this.enter({type:"delete",children:[]},n)}function cP(n){this.exit(n)}function ib(n,e,t,r){const i=t.createTracker(r),o=t.enter("strikethrough");let l=i.move("~~");return l+=t.containerPhrasing(n,{...i.current(),before:l,after:"~"}),l+=i.move("~~"),o(),l}function fP(){return"~"}function hP(n){return n.length}function dP(n,e){const t=e||{},r=(t.align||[]).concat(),i=t.stringLength||hP,o=[],l=[],u=[],f=[];let p=0,m=-1;for(;++m<n.length;){const A=[],P=[];let F=-1;for(n[m].length>p&&(p=n[m].length);++F<n[m].length;){const V=pP(n[m][F]);if(t.alignDelimiters!==!1){const I=i(V);P[F]=I,(f[F]===void 0||I>f[F])&&(f[F]=I)}A.push(V)}l[m]=A,u[m]=P}let g=-1;if(typeof r=="object"&&"length"in r)for(;++g<p;)o[g]=vx(r[g]);else{const A=vx(r);for(;++g<p;)o[g]=A}g=-1;const w=[],k=[];for(;++g<p;){const A=o[g];let P="",F="";A===99?(P=":",F=":"):A===108?P=":":A===114&&(F=":");let V=t.alignDelimiters===!1?1:Math.max(1,f[g]-P.length-F.length);const I=P+"-".repeat(V)+F;t.alignDelimiters!==!1&&(V=P.length+V+F.length,V>f[g]&&(f[g]=V),k[g]=V),w[g]=I}l.splice(1,0,w),u.splice(1,0,k),m=-1;const b=[];for(;++m<l.length;){const A=l[m],P=u[m];g=-1;const F=[];for(;++g<p;){const V=A[g]||"";let I="",W="";if(t.alignDelimiters!==!1){const B=f[g]-(P[g]||0),z=o[g];z===114?I=" ".repeat(B):z===99?B%2?(I=" ".repeat(B/2+.5),W=" ".repeat(B/2-.5)):(I=" ".repeat(B/2),W=I):W=" ".repeat(B)}t.delimiterStart!==!1&&!g&&F.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&V==="")&&(t.delimiterStart!==!1||g)&&F.push(" "),t.alignDelimiters!==!1&&F.push(I),F.push(V),t.alignDelimiters!==!1&&F.push(W),t.padding!==!1&&F.push(" "),(t.delimiterEnd!==!1||g!==p-1)&&F.push("|")}b.push(t.delimiterEnd===!1?F.join("").replace(/ +$/,""):F.join(""))}return b.join(`
`)}function pP(n){return n==null?"":String(n)}function vx(n){const e=typeof n=="string"?n.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function mP(){return{enter:{table:gP,tableData:wx,tableHeader:wx,tableRow:vP},exit:{codeText:wP,table:yP,tableData:t2,tableHeader:t2,tableRow:t2}}}function gP(n){const e=n._align;this.enter({type:"table",align:e.map(function(t){return t==="none"?null:t}),children:[]},n),this.data.inTable=!0}function yP(n){this.exit(n),this.data.inTable=void 0}function vP(n){this.enter({type:"tableRow",children:[]},n)}function t2(n){this.exit(n)}function wx(n){this.enter({type:"tableCell",children:[]},n)}function wP(n){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,kP));const t=this.stack[this.stack.length-1];t.type,t.value=e,this.exit(n)}function kP(n,e){return e==="|"?e:n}function xP(n){const e=n||{},t=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,o=t?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:w,table:l,tableCell:f,tableRow:u}};function l(k,b,A,P){return p(m(k,A,P),k.align)}function u(k,b,A,P){const F=g(k,A,P),V=p([F]);return V.slice(0,V.indexOf(`
`))}function f(k,b,A,P){const F=A.enter("tableCell"),V=A.enter("phrasing"),I=A.containerPhrasing(k,{...P,before:o,after:o});return V(),F(),I}function p(k,b){return dP(k,{align:b,alignDelimiters:r,padding:t,stringLength:i})}function m(k,b,A){const P=k.children;let F=-1;const V=[],I=b.enter("table");for(;++F<P.length;)V[F]=g(P[F],b,A);return I(),V}function g(k,b,A){const P=k.children;let F=-1;const V=[],I=b.enter("tableRow");for(;++F<P.length;)V[F]=f(P[F],k,b,A);return I(),V}function w(k,b,A){let P=fv.inlineCode(k,b,A);return A.stack.includes("tableCell")&&(P=P.replace(/\|/g,"\\$&")),P}}function SP(){return{exit:{taskListCheckValueChecked:kx,taskListCheckValueUnchecked:kx,paragraph:_P}}}function bP(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:CP}}}function kx(n){const e=this.stack[this.stack.length-2];e.type,e.checked=n.type==="taskListCheckValueChecked"}function _P(n){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const t=this.stack[this.stack.length-1];t.type;const r=t.children[0];if(r&&r.type==="text"){const i=e.children;let o=-1,l;for(;++o<i.length;){const u=i[o];if(u.type==="paragraph"){l=u;break}}l===t&&(r.value=r.value.slice(1),r.value.length===0?t.children.shift():t.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,t.position.start=Object.assign({},r.position.start)))}}this.exit(n)}function CP(n,e,t,r){const i=n.children[0],o=typeof n.checked=="boolean"&&i&&i.type==="paragraph",l="["+(n.checked?"x":" ")+"] ",u=t.createTracker(r);o&&u.move(l);let f=fv.listItem(n,e,t,{...r,...u.current()});return o&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,p)),f;function p(m){return m+l}}function EP(){return[zO(),rP(),lP(),mP(),SP()]}function TP(n){return{extensions:[LO(),iP(n),aP(),xP(n),bP()]}}const MP={tokenize:RP,partial:!0},ob={tokenize:DP,partial:!0},sb={tokenize:zP,partial:!0},lb={tokenize:LP,partial:!0},NP={tokenize:FP,partial:!0},ab={name:"wwwAutolink",tokenize:OP,previous:cb},ub={name:"protocolAutolink",tokenize:PP,previous:fb},Ys={name:"emailAutolink",tokenize:IP,previous:hb},cs={};function AP(){return{text:cs}}let au=48;for(;au<123;)cs[au]=Ys,au++,au===58?au=65:au===91&&(au=97);cs[43]=Ys;cs[45]=Ys;cs[46]=Ys;cs[95]=Ys;cs[72]=[Ys,ub];cs[104]=[Ys,ub];cs[87]=[Ys,ab];cs[119]=[Ys,ab];function IP(n,e,t){const r=this;let i,o;return l;function l(g){return!Z2(g)||!hb.call(r,r.previous)||N3(r.events)?t(g):(n.enter("literalAutolink"),n.enter("literalAutolinkEmail"),u(g))}function u(g){return Z2(g)?(n.consume(g),u):g===64?(n.consume(g),f):t(g)}function f(g){return g===46?n.check(NP,m,p)(g):g===45||g===95||qr(g)?(o=!0,n.consume(g),f):m(g)}function p(g){return n.consume(g),i=!0,f}function m(g){return o&&i&&_r(r.previous)?(n.exit("literalAutolinkEmail"),n.exit("literalAutolink"),e(g)):t(g)}}function OP(n,e,t){const r=this;return i;function i(l){return l!==87&&l!==119||!cb.call(r,r.previous)||N3(r.events)?t(l):(n.enter("literalAutolink"),n.enter("literalAutolinkWww"),n.check(MP,n.attempt(ob,n.attempt(sb,o),t),t)(l))}function o(l){return n.exit("literalAutolinkWww"),n.exit("literalAutolink"),e(l)}}function PP(n,e,t){const r=this;let i="",o=!1;return l;function l(g){return(g===72||g===104)&&fb.call(r,r.previous)&&!N3(r.events)?(n.enter("literalAutolink"),n.enter("literalAutolinkHttp"),i+=String.fromCodePoint(g),n.consume(g),u):t(g)}function u(g){if(_r(g)&&i.length<5)return i+=String.fromCodePoint(g),n.consume(g),u;if(g===58){const w=i.toLowerCase();if(w==="http"||w==="https")return n.consume(g),f}return t(g)}function f(g){return g===47?(n.consume(g),o?p:(o=!0,f)):t(g)}function p(g){return g===null||x1(g)||Bt(g)||Ou(g)||L1(g)?t(g):n.attempt(ob,n.attempt(sb,m),t)(g)}function m(g){return n.exit("literalAutolinkHttp"),n.exit("literalAutolink"),e(g)}}function RP(n,e,t){let r=0;return i;function i(l){return(l===87||l===119)&&r<3?(r++,n.consume(l),i):l===46&&r===3?(n.consume(l),o):t(l)}function o(l){return l===null?t(l):e(l)}}function DP(n,e,t){let r,i,o;return l;function l(p){return p===46||p===95?n.check(lb,f,u)(p):p===null||Bt(p)||Ou(p)||p!==45&&L1(p)?f(p):(o=!0,n.consume(p),l)}function u(p){return p===95?r=!0:(i=r,r=void 0),n.consume(p),l}function f(p){return i||r||!o?t(p):e(p)}}function zP(n,e){let t=0,r=0;return i;function i(l){return l===40?(t++,n.consume(l),i):l===41&&r<t?o(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?n.check(lb,e,o)(l):l===null||Bt(l)||Ou(l)?e(l):(n.consume(l),i)}function o(l){return l===41&&r++,n.consume(l),i}}function LP(n,e,t){return r;function r(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(n.consume(u),r):u===38?(n.consume(u),o):u===93?(n.consume(u),i):u===60||u===null||Bt(u)||Ou(u)?e(u):t(u)}function i(u){return u===null||u===40||u===91||Bt(u)||Ou(u)?e(u):r(u)}function o(u){return _r(u)?l(u):t(u)}function l(u){return u===59?(n.consume(u),r):_r(u)?(n.consume(u),l):t(u)}}function FP(n,e,t){return r;function r(o){return n.consume(o),i}function i(o){return qr(o)?t(o):e(o)}}function cb(n){return n===null||n===40||n===42||n===95||n===91||n===93||n===126||Bt(n)}function fb(n){return!_r(n)}function hb(n){return!(n===47||Z2(n))}function Z2(n){return n===43||n===45||n===46||n===95||qr(n)}function N3(n){let e=n.length,t=!1;for(;e--;){const r=n[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){t=!0;break}if(r._gfmAutolinkLiteralWalkedInto){t=!1;break}}return n.length>0&&!t&&(n[n.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),t}const BP={tokenize:KP,partial:!0};function UP(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:HP,continuation:{tokenize:VP},exit:qP}},text:{91:{name:"gfmFootnoteCall",tokenize:$P},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:WP,resolveTo:jP}}}}function WP(n,e,t){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;i--;){const f=r.events[i][1];if(f.type==="labelImage"){l=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return u;function u(f){if(!l||!l._balanced)return t(f);const p=ko(r.sliceSerialize({start:l.end,end:r.now()}));return p.codePointAt(0)!==94||!o.includes(p.slice(1))?t(f):(n.enter("gfmFootnoteCallLabelMarker"),n.consume(f),n.exit("gfmFootnoteCallLabelMarker"),e(f))}}function jP(n,e){let t=n.length;for(;t--;)if(n[t][1].type==="labelImage"&&n[t][0]==="enter"){n[t][1];break}n[t+1][1].type="data",n[t+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},n[t+3][1].start),end:Object.assign({},n[n.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},n[t+3][1].end),end:Object.assign({},n[t+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},n[n.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},u=[n[t+1],n[t+2],["enter",r,e],n[t+3],n[t+4],["enter",i,e],["exit",i,e],["enter",o,e],["enter",l,e],["exit",l,e],["exit",o,e],n[n.length-2],n[n.length-1],["exit",r,e]];return n.splice(t,n.length-t+1,...u),n}function $P(n,e,t){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,l;return u;function u(g){return n.enter("gfmFootnoteCall"),n.enter("gfmFootnoteCallLabelMarker"),n.consume(g),n.exit("gfmFootnoteCallLabelMarker"),f}function f(g){return g!==94?t(g):(n.enter("gfmFootnoteCallMarker"),n.consume(g),n.exit("gfmFootnoteCallMarker"),n.enter("gfmFootnoteCallString"),n.enter("chunkString").contentType="string",p)}function p(g){if(o>999||g===93&&!l||g===null||g===91||Bt(g))return t(g);if(g===93){n.exit("chunkString");const w=n.exit("gfmFootnoteCallString");return i.includes(ko(r.sliceSerialize(w)))?(n.enter("gfmFootnoteCallLabelMarker"),n.consume(g),n.exit("gfmFootnoteCallLabelMarker"),n.exit("gfmFootnoteCall"),e):t(g)}return Bt(g)||(l=!0),o++,n.consume(g),g===92?m:p}function m(g){return g===91||g===92||g===93?(n.consume(g),o++,p):p(g)}}function HP(n,e,t){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,l=0,u;return f;function f(b){return n.enter("gfmFootnoteDefinition")._container=!0,n.enter("gfmFootnoteDefinitionLabel"),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(b),n.exit("gfmFootnoteDefinitionLabelMarker"),p}function p(b){return b===94?(n.enter("gfmFootnoteDefinitionMarker"),n.consume(b),n.exit("gfmFootnoteDefinitionMarker"),n.enter("gfmFootnoteDefinitionLabelString"),n.enter("chunkString").contentType="string",m):t(b)}function m(b){if(l>999||b===93&&!u||b===null||b===91||Bt(b))return t(b);if(b===93){n.exit("chunkString");const A=n.exit("gfmFootnoteDefinitionLabelString");return o=ko(r.sliceSerialize(A)),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(b),n.exit("gfmFootnoteDefinitionLabelMarker"),n.exit("gfmFootnoteDefinitionLabel"),w}return Bt(b)||(u=!0),l++,n.consume(b),b===92?g:m}function g(b){return b===91||b===92||b===93?(n.consume(b),l++,m):m(b)}function w(b){return b===58?(n.enter("definitionMarker"),n.consume(b),n.exit("definitionMarker"),i.includes(o)||i.push(o),xt(n,k,"gfmFootnoteDefinitionWhitespace")):t(b)}function k(b){return e(b)}}function VP(n,e,t){return n.check(_p,e,n.attempt(BP,e,t))}function qP(n){n.exit("gfmFootnoteDefinition")}function KP(n,e,t){const r=this;return xt(n,i,"gfmFootnoteDefinitionIndent",5);function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?e(o):t(o)}}function JP(n){let t=(n||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return t==null&&(t=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(l,u){let f=-1;for(;++f<l.length;)if(l[f][0]==="enter"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._close){let p=f;for(;p--;)if(l[p][0]==="exit"&&l[p][1].type==="strikethroughSequenceTemporary"&&l[p][1]._open&&l[f][1].end.offset-l[f][1].start.offset===l[p][1].end.offset-l[p][1].start.offset){l[f][1].type="strikethroughSequence",l[p][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},l[p][1].start),end:Object.assign({},l[f][1].end)},g={type:"strikethroughText",start:Object.assign({},l[p][1].end),end:Object.assign({},l[f][1].start)},w=[["enter",m,u],["enter",l[p][1],u],["exit",l[p][1],u],["enter",g,u]],k=u.parser.constructs.insideSpan.null;k&&yi(w,w.length,0,F1(k,l.slice(p+1,f),u)),yi(w,w.length,0,[["exit",g,u],["enter",l[f][1],u],["exit",l[f][1],u],["exit",m,u]]),yi(l,p-1,f-p+3,w),f=p+w.length-2;break}}for(f=-1;++f<l.length;)l[f][1].type==="strikethroughSequenceTemporary"&&(l[f][1].type="data");return l}function o(l,u,f){const p=this.previous,m=this.events;let g=0;return w;function w(b){return p===126&&m[m.length-1][1].type!=="characterEscape"?f(b):(l.enter("strikethroughSequenceTemporary"),k(b))}function k(b){const A=Ff(p);if(b===126)return g>1?f(b):(l.consume(b),g++,k);if(g<2&&!t)return f(b);const P=l.exit("strikethroughSequenceTemporary"),F=Ff(b);return P._open=!F||F===2&&!!A,P._close=!A||A===2&&!!F,u(b)}}}class GP{constructor(){this.map=[]}add(e,t,r){QP(this,e,t,r)}consume(e){if(this.map.sort(function(o,l){return o[0]-l[0]}),this.map.length===0)return;let t=this.map.length;const r=[];for(;t>0;)t-=1,r.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const o of i)e.push(o);i=r.pop()}this.map.length=0}}function QP(n,e,t,r){let i=0;if(!(t===0&&r.length===0)){for(;i<n.map.length;){if(n.map[i][0]===e){n.map[i][1]+=t,n.map[i][2].push(...r);return}i+=1}n.map.push([e,t,r])}}function YP(n,e){let t=!1;const r=[];for(;e<n.length;){const i=n[e];if(t){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(n[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(n[e-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(t=!0);e+=1}return r}function XP(){return{flow:{null:{name:"table",tokenize:ZP,resolveAll:eR}}}}function ZP(n,e,t){const r=this;let i=0,o=0,l;return u;function u(_){let U=r.events.length-1;for(;U>-1;){const le=r.events[U][1].type;if(le==="lineEnding"||le==="linePrefix")U--;else break}const D=U>-1?r.events[U][1].type:null,G=D==="tableHead"||D==="tableRow"?z:f;return G===z&&r.parser.lazy[r.now().line]?t(_):G(_)}function f(_){return n.enter("tableHead"),n.enter("tableRow"),p(_)}function p(_){return _===124||(l=!0,o+=1),m(_)}function m(_){return _===null?t(_):qe(_)?o>1?(o=0,r.interrupt=!0,n.exit("tableRow"),n.enter("lineEnding"),n.consume(_),n.exit("lineEnding"),k):t(_):dt(_)?xt(n,m,"whitespace")(_):(o+=1,l&&(l=!1,i+=1),_===124?(n.enter("tableCellDivider"),n.consume(_),n.exit("tableCellDivider"),l=!0,m):(n.enter("data"),g(_)))}function g(_){return _===null||_===124||Bt(_)?(n.exit("data"),m(_)):(n.consume(_),_===92?w:g)}function w(_){return _===92||_===124?(n.consume(_),g):g(_)}function k(_){return r.interrupt=!1,r.parser.lazy[r.now().line]?t(_):(n.enter("tableDelimiterRow"),l=!1,dt(_)?xt(n,b,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):b(_))}function b(_){return _===45||_===58?P(_):_===124?(l=!0,n.enter("tableCellDivider"),n.consume(_),n.exit("tableCellDivider"),A):B(_)}function A(_){return dt(_)?xt(n,P,"whitespace")(_):P(_)}function P(_){return _===58?(o+=1,l=!0,n.enter("tableDelimiterMarker"),n.consume(_),n.exit("tableDelimiterMarker"),F):_===45?(o+=1,F(_)):_===null||qe(_)?W(_):B(_)}function F(_){return _===45?(n.enter("tableDelimiterFiller"),V(_)):B(_)}function V(_){return _===45?(n.consume(_),V):_===58?(l=!0,n.exit("tableDelimiterFiller"),n.enter("tableDelimiterMarker"),n.consume(_),n.exit("tableDelimiterMarker"),I):(n.exit("tableDelimiterFiller"),I(_))}function I(_){return dt(_)?xt(n,W,"whitespace")(_):W(_)}function W(_){return _===124?b(_):_===null||qe(_)?!l||i!==o?B(_):(n.exit("tableDelimiterRow"),n.exit("tableHead"),e(_)):B(_)}function B(_){return t(_)}function z(_){return n.enter("tableRow"),H(_)}function H(_){return _===124?(n.enter("tableCellDivider"),n.consume(_),n.exit("tableCellDivider"),H):_===null||qe(_)?(n.exit("tableRow"),e(_)):dt(_)?xt(n,H,"whitespace")(_):(n.enter("data"),Q(_))}function Q(_){return _===null||_===124||Bt(_)?(n.exit("data"),H(_)):(n.consume(_),_===92?q:Q)}function q(_){return _===92||_===124?(n.consume(_),Q):Q(_)}}function eR(n,e){let t=-1,r=!0,i=0,o=[0,0,0,0],l=[0,0,0,0],u=!1,f=0,p,m,g;const w=new GP;for(;++t<n.length;){const k=n[t],b=k[1];k[0]==="enter"?b.type==="tableHead"?(u=!1,f!==0&&(xx(w,e,f,p,m),m=void 0,f=0),p={type:"table",start:Object.assign({},b.start),end:Object.assign({},b.end)},w.add(t,0,[["enter",p,e]])):b.type==="tableRow"||b.type==="tableDelimiterRow"?(r=!0,g=void 0,o=[0,0,0,0],l=[0,t+1,0,0],u&&(u=!1,m={type:"tableBody",start:Object.assign({},b.start),end:Object.assign({},b.end)},w.add(t,0,[["enter",m,e]])),i=b.type==="tableDelimiterRow"?2:m?3:1):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(o[1]!==0&&(l[0]=l[1],g=Mm(w,e,o,i,void 0,g),o=[0,0,0,0]),l[2]=t)):b.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(l[0]=l[1],g=Mm(w,e,o,i,void 0,g)),o=l,l=[o[1],t,0,0])):b.type==="tableHead"?(u=!0,f=t):b.type==="tableRow"||b.type==="tableDelimiterRow"?(f=t,o[1]!==0?(l[0]=l[1],g=Mm(w,e,o,i,t,g)):l[1]!==0&&(g=Mm(w,e,l,i,t,g)),i=0):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")&&(l[3]=t)}for(f!==0&&xx(w,e,f,p,m),w.consume(e.events),t=-1;++t<e.events.length;){const k=e.events[t];k[0]==="enter"&&k[1].type==="table"&&(k[1]._align=YP(e.events,t))}return n}function Mm(n,e,t,r,i,o){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",u="tableContent";t[0]!==0&&(o.end=Object.assign({},bf(e.events,t[0])),n.add(t[0],0,[["exit",o,e]]));const f=bf(e.events,t[1]);if(o={type:l,start:Object.assign({},f),end:Object.assign({},f)},n.add(t[1],0,[["enter",o,e]]),t[2]!==0){const p=bf(e.events,t[2]),m=bf(e.events,t[3]),g={type:u,start:Object.assign({},p),end:Object.assign({},m)};if(n.add(t[2],0,[["enter",g,e]]),r!==2){const w=e.events[t[2]],k=e.events[t[3]];if(w[1].end=Object.assign({},k[1].end),w[1].type="chunkText",w[1].contentType="text",t[3]>t[2]+1){const b=t[2]+1,A=t[3]-t[2]-1;n.add(b,A,[])}}n.add(t[3]+1,0,[["exit",g,e]])}return i!==void 0&&(o.end=Object.assign({},bf(e.events,i)),n.add(i,0,[["exit",o,e]]),o=void 0),o}function xx(n,e,t,r,i){const o=[],l=bf(e.events,t);i&&(i.end=Object.assign({},l),o.push(["exit",i,e])),r.end=Object.assign({},l),o.push(["exit",r,e]),n.add(t+1,0,o)}function bf(n,e){const t=n[e],r=t[0]==="enter"?"start":"end";return t[1][r]}const tR={name:"tasklistCheck",tokenize:rR};function nR(){return{text:{91:tR}}}function rR(n,e,t){const r=this;return i;function i(f){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?t(f):(n.enter("taskListCheck"),n.enter("taskListCheckMarker"),n.consume(f),n.exit("taskListCheckMarker"),o)}function o(f){return Bt(f)?(n.enter("taskListCheckValueUnchecked"),n.consume(f),n.exit("taskListCheckValueUnchecked"),l):f===88||f===120?(n.enter("taskListCheckValueChecked"),n.consume(f),n.exit("taskListCheckValueChecked"),l):t(f)}function l(f){return f===93?(n.enter("taskListCheckMarker"),n.consume(f),n.exit("taskListCheckMarker"),n.exit("taskListCheck"),u):t(f)}function u(f){return qe(f)?e(f):dt(f)?n.check({tokenize:iR},e,t)(f):t(f)}}function iR(n,e,t){return xt(n,r,"whitespace");function r(i){return i===null?t(i):e(i)}}function oR(n){return v4([AP(),UP(),JP(n),XP(),nR()])}const sR={};function lR(n){const e=this,t=n||sR,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(oR(t)),o.push(EP()),l.push(TP(t))}function Ye(n,e){return Object.assign(n,{meta:{package:"@milkdown/preset-gfm",...e}}),n}const A3=Ip("strike_through");Ye(A3,{displayName:"Attr<strikethrough>",group:"Strikethrough"});const Lp=Ap("strike_through",n=>({parseDOM:[{tag:"del"},{style:"text-decoration",getAttrs:e=>e==="line-through"}],toDOM:e=>["del",n.get(A3.key)(e)],parseMarkdown:{match:e=>e.type==="delete",runner:(e,t,r)=>{e.openMark(r),e.next(t.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="strike_through",runner:(e,t)=>{e.withMark(t,"delete")}}}));Ye(Lp.mark,{displayName:"MarkSchema<strikethrough>",group:"Strikethrough"});Ye(Lp.ctx,{displayName:"MarkSchemaCtx<strikethrough>",group:"Strikethrough"});const I3=at("ToggleStrikeThrough",n=>()=>q1(Lp.type(n)));Ye(I3,{displayName:"Command<ToggleStrikethrough>",group:"Strikethrough"});const db=Xr(n=>Ep(/~([^~]+)~$/,Lp.type(n)));Ye(db,{displayName:"InputRule<strikethrough>",group:"Strikethrough"});const O3=Zr("strikeThroughKeymap",{ToggleStrikethrough:{shortcuts:"Mod-Alt-x",command:n=>{const e=n.get(Mt);return()=>e.call(I3.key)}}});Ye(O3.ctx,{displayName:"KeymapCtx<strikethrough>",group:"Strikethrough"});Ye(O3.shortcuts,{displayName:"Keymap<strikethrough>",group:"Strikethrough"});const Fp=PI({tableGroup:"block",cellContent:"paragraph",cellAttributes:{alignment:{default:"left",getFromDOM:n=>n.style.textAlign||"left",setDOMAttr:(n,e)=>{e.style=`text-align: ${n||"left"}`}}}}),Jf=Fn("table",()=>({...Fp.table,content:"table_header_row table_row+",disableDropCursor:!0,parseMarkdown:{match:n=>n.type==="table",runner:(n,e,t)=>{const r=e.align,i=e.children.map((o,l)=>({...o,align:r,isHeader:l===0}));n.openNode(t),n.next(i),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table",runner:(n,e)=>{var t;const r=(t=e.content.firstChild)==null?void 0:t.content;if(!r)return;const i=[];r.forEach(o=>{i.push(o.attrs.alignment)}),n.openNode("table",void 0,{align:i}),n.next(e.content),n.closeNode()}}}));Ye(Jf.node,{displayName:"NodeSchema<table>",group:"Table"});Ye(Jf.ctx,{displayName:"NodeSchemaCtx<table>",group:"Table"});const eg=Fn("table_header_row",()=>({...Fp.table_row,disableDropCursor:!0,content:"(table_header)*",parseDOM:[{tag:"tr[data-is-header]"}],toDOM(){return["tr",{"data-is-header":!0},0]},parseMarkdown:{match:n=>!!(n.type==="tableRow"&&n.isHeader),runner:(n,e,t)=>{const r=e.align,i=e.children.map((o,l)=>({...o,align:r[l],isHeader:e.isHeader}));n.openNode(t),n.next(i),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table_header_row",runner:(n,e)=>{n.openNode("tableRow",void 0,{isHeader:!0}),n.next(e.content),n.closeNode()}}}));Ye(eg.node,{displayName:"NodeSchema<tableHeaderRow>",group:"Table"});Ye(eg.ctx,{displayName:"NodeSchemaCtx<tableHeaderRow>",group:"Table"});const Bp=Fn("table_row",()=>({...Fp.table_row,disableDropCursor:!0,content:"(table_cell)*",parseMarkdown:{match:n=>n.type==="tableRow",runner:(n,e,t)=>{const r=e.align,i=e.children.map((o,l)=>({...o,align:r[l]}));n.openNode(t),n.next(i),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table_row",runner:(n,e)=>{n.openNode("tableRow"),n.next(e.content),n.closeNode()}}}));Ye(Bp.node,{displayName:"NodeSchema<tableRow>",group:"Table"});Ye(Bp.ctx,{displayName:"NodeSchemaCtx<tableRow>",group:"Table"});const Up=Fn("table_cell",()=>({...Fp.table_cell,disableDropCursor:!0,parseMarkdown:{match:n=>n.type==="tableCell"&&!n.isHeader,runner:(n,e,t)=>{const r=e.align;n.openNode(t,{alignment:r}).openNode(n.schema.nodes.paragraph).next(e.children).closeNode().closeNode()}},toMarkdown:{match:n=>n.type.name==="table_cell",runner:(n,e)=>{n.openNode("tableCell").next(e.content).closeNode()}}}));Ye(Up.node,{displayName:"NodeSchema<tableCell>",group:"Table"});Ye(Up.ctx,{displayName:"NodeSchemaCtx<tableCell>",group:"Table"});const tg=Fn("table_header",()=>({...Fp.table_header,disableDropCursor:!0,parseMarkdown:{match:n=>n.type==="tableCell"&&!!n.isHeader,runner:(n,e,t)=>{const r=e.align;n.openNode(t,{alignment:r}),n.openNode(n.schema.nodes.paragraph),n.next(e.children),n.closeNode(),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table_header",runner:(n,e)=>{n.openNode("tableCell"),n.next(e.content),n.closeNode()}}}));Ye(tg.node,{displayName:"NodeSchema<tableHeader>",group:"Table"});Ye(tg.ctx,{displayName:"NodeSchemaCtx<tableHeader>",group:"Table"});function pb(n,e=3,t=3){const r=Array(t).fill(0).map(()=>Up.type(n).createAndFill()),i=Array(t).fill(0).map(()=>tg.type(n).createAndFill()),o=Array(e).fill(0).map((l,u)=>u===0?eg.type(n).create(null,i):Bp.type(n).create(null,r));return Jf.type(n).create(null,o)}function Wp(n){return wv(e=>e.type.spec.tableRole==="table")(n)}function _f(n,e){const t=Wp(e.$from);if(!t)return;const r=Ot.get(t.node);if(!(n<0||n>=r.width))return r.cellsInRect({left:n,right:n+1,top:0,bottom:r.height}).map(i=>{const o=t.node.nodeAt(i);if(!o)return;const l=i+t.start;return{pos:l,start:l+1,node:o}}).filter(i=>i!=null)}function Cf(n,e){const t=Wp(e.$from);if(!t)return;const r=Ot.get(t.node);if(!(n<0||n>=r.height))return r.cellsInRect({left:0,right:r.width,top:n,bottom:n+1}).map(i=>{const o=t.node.nodeAt(i);if(!o)return;const l=i+t.start;return{pos:l,start:l+1,node:o}}).filter(i=>i!=null)}function aR(n){const e=Wp(n.$from);if(!e)return;const t=Ot.get(e.node);return t.cellsInRect({left:0,right:t.width,top:0,bottom:t.height}).map(i=>{const o=e.node.nodeAt(i),l=i+e.start;return{pos:l,start:l+1,node:o}})}function uR(n){const e=aR(n.selection);if(e&&e[0]){const t=n.doc.resolve(e[0].pos),r=e[e.length-1];if(r){const i=n.doc.resolve(r.pos);return V1(n.setSelection(new Kt(i,t)))}}return n}function mb(n,e,{map:t,tableStart:r,table:i},o){const l=Array(o).fill(0).reduce((f,p,m)=>f+i.child(m).nodeSize,r),u=Array(t.width).fill(0).map((f,p)=>{const m=i.nodeAt(t.map[p]);return Up.type(n).createAndFill({alignment:m==null?void 0:m.attrs.alignment})});return e.insert(l,Bp.type(n).create(null,u)),e}function gb(n){return(e,t)=>r=>{t=t??r.selection.from;const i=r.doc.resolve(t),o=wv(f=>f.type.name==="table")(i),l=o?{node:o.node,from:o.start}:void 0,u=n==="row";if(l){const f=Ot.get(l.node);if(e>=0&&e<(u?f.height:f.width)){const p=f.positionAt(u?e:f.height-1,u?f.width-1:e,l.node),m=r.doc.resolve(l.from+p),g=u?Kt.rowSelection:Kt.colSelection,w=f.positionAt(u?e:0,u?0:e,l.node),k=r.doc.resolve(l.from+w);return V1(r.setSelection(g(m,k)))}}return r}}const cR=gb("row"),fR=gb("col");function Sx(n){return n[0].map((e,t)=>n.map(r=>r[t]))}function yb(n,e){const t=[],r=Ot.get(n);for(let o=0;o<r.height;o++){const l=n.child(o),u=[];for(let f=0;f<r.width;f++){if(!e[o][f])continue;const p=r.map[o*r.width+f],m=e[o][f],w=n.nodeAt(p).type.createChecked(Object.assign({},m.attrs),m.content,m.marks);u.push(w)}t.push(l.type.createChecked(l.attrs,u,l.marks))}return n.type.createChecked(n.attrs,t,n.marks)}function vb(n){const e=Ot.get(n),t=[];for(let r=0;r<e.height;r++){const i=[],o={};for(let l=0;l<e.width;l++){const u=e.map[r*e.width+l],f=n.nodeAt(u),p=e.findCell(u);if(o[u]||p.top!==r){i.push(null);continue}o[u]=!0,i.push(f)}t.push(i)}return t}function wb(n,e,t,r){const i=e[0]>t[0]?-1:1,o=n.splice(e[0],e.length),l=o.length%2===0?1:0;let u;return u=i===-1?t[0]:t[t.length-1]-l,n.splice(u,0,...o),n}function hR(n,e,t,r){let i=Sx(vb(n.node));return i=wb(i,e,t),i=Sx(i),yb(n.node,i)}function dR(n,e,t,r){let i=vb(n.node);return i=wb(i,e,t),yb(n.node,i)}function bx(n,e){let t=n,r=n;for(let m=n;m>=0;m--){const g=_f(m,e.selection);g&&g.forEach(w=>{const k=w.node.attrs.colspan+m-1;k>=t&&(t=m),k>r&&(r=k)})}for(let m=n;m<=r;m++){const g=_f(m,e.selection);g&&g.forEach(w=>{const k=w.node.attrs.colspan+m-1;w.node.attrs.colspan>1&&k>r&&(r=k)})}const i=[];for(let m=t;m<=r;m++){const g=_f(m,e.selection);g&&g.length&&i.push(m)}t=i[0],r=i[i.length-1];const o=_f(t,e.selection),l=Cf(0,e.selection),u=e.doc.resolve(o[o.length-1].pos);let f;for(let m=r;m>=t;m--){const g=_f(m,e.selection);if(g&&g.length){for(let w=l.length-1;w>=0;w--)if(l[w].pos===g[0].pos){f=g[0];break}if(f)break}}const p=e.doc.resolve(f.pos);return{$anchor:u,$head:p,indexes:i}}function _x(n,e){let t=n,r=n;for(let m=n;m>=0;m--)Cf(m,e.selection).forEach(w=>{const k=w.node.attrs.rowspan+m-1;k>=t&&(t=m),k>r&&(r=k)});for(let m=n;m<=r;m++)Cf(m,e.selection).forEach(w=>{const k=w.node.attrs.rowspan+m-1;w.node.attrs.rowspan>1&&k>r&&(r=k)});const i=[];for(let m=t;m<=r;m++){const g=Cf(m,e.selection);g&&g.length&&i.push(m)}t=i[0],r=i[i.length-1];const o=Cf(t,e.selection),l=_f(0,e.selection),u=e.doc.resolve(o[o.length-1].pos);let f;for(let m=r;m>=t;m--){const g=Cf(m,e.selection);if(g&&g.length){for(let w=l.length-1;w>=0;w--)if(l[w].pos===g[0].pos){f=g[0];break}if(f)break}}const p=e.doc.resolve(f.pos);return{$anchor:u,$head:p,indexes:i}}function pR(n){const{tr:e,origin:t,target:r,select:i=!0,pos:o}=n,l=o!=null?e.doc.resolve(o):e.selection.$from,u=Wp(l);if(!u)return e;const{indexes:f}=bx(t,e),{indexes:p}=bx(r,e);if(f.includes(r))return e;const m=hR(u,f,p),g=V1(e).replaceWith(u.pos,u.pos+u.node.nodeSize,m);if(!i)return g;const w=Ot.get(m),k=u.start,b=r,A=w.positionAt(w.height-1,b,m),P=g.doc.resolve(k+A),F=Kt.colSelection,V=w.positionAt(0,b,m),I=g.doc.resolve(k+V);return g.setSelection(F(P,I))}function mR(n){const{tr:e,origin:t,target:r,select:i=!0,pos:o}=n,l=o!=null?e.doc.resolve(o):e.selection.$from,u=Wp(l);if(!u)return e;const{indexes:f}=_x(t,e),{indexes:p}=_x(r,e);if(f.includes(r))return e;const m=dR(u,f,p),g=V1(e).replaceWith(u.pos,u.pos+u.node.nodeSize,m);if(!i)return g;const w=Ot.get(m),k=u.start,b=r,A=w.positionAt(b,w.width-1,m),P=g.doc.resolve(k+A),F=Kt.rowSelection,V=w.positionAt(b,0,m),I=g.doc.resolve(k+V);return g.setSelection(F(P,I))}const P3=at("GoToPrevTableCell",()=>()=>YS(-1));Ye(P3,{displayName:"Command<goToPrevTableCellCommand>",group:"Table"});const R3=at("GoToNextTableCell",()=>()=>YS(1));Ye(R3,{displayName:"Command<goToNextTableCellCommand>",group:"Table"});const D3=at("ExitTable",n=>()=>(e,t)=>{if(!Ki(e))return!1;const{$head:r}=e.selection,i=AM(r,Jf.type(n));if(!i)return!1;const{to:o}=i,l=e.tr.replaceWith(o,o,ua.type(n).createAndFill());return l.setSelection(et.near(l.doc.resolve(o),1)).scrollIntoView(),t==null||t(l),!0});Ye(D3,{displayName:"Command<breakTableCommand>",group:"Table"});const kb=at("InsertTable",n=>({row:e,col:t}={})=>(r,i)=>{const{selection:o,tr:l}=r,{from:u}=o,f=pb(n,e,t),p=l.replaceSelectionWith(f),m=et.findFrom(p.doc.resolve(u),1,!0);return m&&p.setSelection(m),i==null||i(p),!0});Ye(kb,{displayName:"Command<insertTableCommand>",group:"Table"});const xb=at("MoveRow",()=>({from:n,to:e,pos:t}={})=>(r,i)=>{const{tr:o}=r;return!!(i==null?void 0:i(mR({tr:o,origin:n??0,target:e??0,pos:t,select:!0})))});Ye(xb,{displayName:"Command<moveRowCommand>",group:"Table"});const Sb=at("MoveCol",()=>({from:n,to:e,pos:t}={})=>(r,i)=>{const{tr:o}=r;return!!(i==null?void 0:i(pR({tr:o,origin:n??0,target:e??0,pos:t,select:!0})))});Ye(Sb,{displayName:"Command<moveColCommand>",group:"Table"});const bb=at("SelectRow",()=>(n={index:0})=>(e,t)=>{const{tr:r}=e;return!!(t==null?void 0:t(cR(n.index,n.pos)(r)))});Ye(bb,{displayName:"Command<selectRowCommand>",group:"Table"});const _b=at("SelectCol",()=>(n={index:0})=>(e,t)=>{const{tr:r}=e;return!!(t==null?void 0:t(fR(n.index,n.pos)(r)))});Ye(_b,{displayName:"Command<selectColCommand>",group:"Table"});const Cb=at("SelectTable",()=>()=>(n,e)=>{const{tr:t}=n;return!!(e==null?void 0:e(uR(t)))});Ye(Cb,{displayName:"Command<selectTableCommand>",group:"Table"});const Eb=at("DeleteSelectedCells",()=>()=>(n,e)=>{const{selection:t}=n;if(!(t instanceof Kt))return!1;const r=t.isRowSelection(),i=t.isColSelection();return r&&i?tO(n,e):i?GI(n,e):YI(n,e)});Ye(Eb,{displayName:"Command<deleteSelectedCellsCommand>",group:"Table"});const Tb=at("AddColBefore",()=>()=>qI);Ye(Tb,{displayName:"Command<addColBeforeCommand>",group:"Table"});const Mb=at("AddColAfter",()=>()=>KI);Ye(Mb,{displayName:"Command<addColAfterCommand>",group:"Table"});const Nb=at("AddRowBefore",n=>()=>(e,t)=>{if(!Ki(e))return!1;if(t){const r=ca(e);t(mb(n,e.tr,r,r.top))}return!0});Ye(Nb,{displayName:"Command<addRowBeforeCommand>",group:"Table"});const Ab=at("AddRowAfter",n=>()=>(e,t)=>{if(!Ki(e))return!1;if(t){const r=ca(e);t(mb(n,e.tr,r,r.bottom))}return!0});Ye(Ab,{displayName:"Command<addRowAfterCommand>",group:"Table"});const Ib=at("SetAlign",()=>(n="left")=>XI("alignment",n));Ye(Ib,{displayName:"Command<setAlignCommand>",group:"Table"});const Ob=Xr(n=>new Yr(/^\|(?<col>\d+)[xX](?<row>\d+)\|\s$/,(e,t,r,i)=>{var o,l;const u=e.doc.resolve(r);if(!u.node(-1).canReplaceWith(u.index(-1),u.indexAfter(-1),Jf.type(n)))return null;const f=Math.max(Number(((o=t.groups)==null?void 0:o.row)??0),2),p=pb(n,f,Number((l=t.groups)==null?void 0:l.col)),m=e.tr.replaceRangeWith(r,i,p);return m.setSelection(st.create(m.doc,r+3)).scrollIntoView()}));Ye(Ob,{displayName:"InputRule<insertTableInputRule>",group:"Table"});const z3=Zr("tableKeymap",{NextCell:{shortcuts:["Mod-]","Tab"],command:n=>{const e=n.get(Mt);return()=>e.call(R3.key)}},PrevCell:{shortcuts:["Mod-[","Shift-Tab"],command:n=>{const e=n.get(Mt);return()=>e.call(P3.key)}},ExitTable:{shortcuts:["Mod-Enter","Enter"],command:n=>{const e=n.get(Mt);return()=>e.call(D3.key)}}});Ye(z3.ctx,{displayName:"KeymapCtx<table>",group:"Table"});Ye(z3.shortcuts,{displayName:"Keymap<table>",group:"Table"});const n2="footnote_definition",Cx="footnoteDefinition",L3=Fn("footnote_definition",()=>({group:"block",content:"block+",defining:!0,attrs:{label:{default:""}},parseDOM:[{tag:`dl[data-type="${n2}"]`,getAttrs:n=>{if(!(n instanceof HTMLElement))throw us(n);return{label:n.dataset.label}},contentElement:"dd"}],toDOM:n=>{const e=n.attrs.label;return["dl",{"data-label":e,"data-type":n2},["dt",e],["dd",0]]},parseMarkdown:{match:({type:n})=>n===Cx,runner:(n,e,t)=>{n.openNode(t,{label:e.label}).next(e.children).closeNode()}},toMarkdown:{match:n=>n.type.name===n2,runner:(n,e)=>{n.openNode(Cx,void 0,{label:e.attrs.label,identifier:e.attrs.label}).next(e.content).closeNode()}}}));Ye(L3.ctx,{displayName:"NodeSchemaCtx<footnodeDef>",group:"footnote"});Ye(L3.node,{displayName:"NodeSchema<footnodeDef>",group:"footnote"});const r2="footnote_reference",F3=Fn("footnote_reference",()=>({group:"inline",inline:!0,atom:!0,attrs:{label:{default:""}},parseDOM:[{tag:`sup[data-type="${r2}"]`,getAttrs:n=>{if(!(n instanceof HTMLElement))throw us(n);return{label:n.dataset.label}}}],toDOM:n=>{const e=n.attrs.label;return["sup",{"data-label":e,"data-type":r2},e]},parseMarkdown:{match:({type:n})=>n==="footnoteReference",runner:(n,e,t)=>{n.addNode(t,{label:e.label})}},toMarkdown:{match:n=>n.type.name===r2,runner:(n,e)=>{n.addNode("footnoteReference",void 0,void 0,{label:e.attrs.label,identifier:e.attrs.label})}}}));Ye(F3.ctx,{displayName:"NodeSchemaCtx<footnodeRef>",group:"footnote"});Ye(F3.node,{displayName:"NodeSchema<footnodeRef>",group:"footnote"});const Pb=as.extendSchema(n=>e=>{const t=n(e);return{...t,attrs:{...t.attrs,checked:{default:null}},parseDOM:[{tag:'li[data-item-type="task"]',getAttrs:r=>{if(!(r instanceof HTMLElement))throw us(r);return{label:r.dataset.label,listType:r.dataset.listType,spread:r.dataset.spread,checked:r.dataset.checked?r.dataset.checked==="true":null}}},...(t==null?void 0:t.parseDOM)||[]],toDOM:r=>t.toDOM&&r.attrs.checked==null?t.toDOM(r):["li",{"data-item-type":"task","data-label":r.attrs.label,"data-list-type":r.attrs.listType,"data-spread":r.attrs.spread,"data-checked":r.attrs.checked},0],parseMarkdown:{match:({type:r})=>r==="listItem",runner:(r,i,o)=>{if(i.checked==null){t.parseMarkdown.runner(r,i,o);return}const l=i.label!=null?`${i.label}.`:"•",u=i.checked!=null?!!i.checked:null,f=i.label!=null?"ordered":"bullet",p=i.spread!=null?`${i.spread}`:"true";r.openNode(o,{label:l,listType:f,spread:p,checked:u}),r.next(i.children),r.closeNode()}},toMarkdown:{match:r=>r.type.name==="list_item",runner:(r,i)=>{if(i.attrs.checked==null){t.toMarkdown.runner(r,i);return}const o=i.attrs.label,l=i.attrs.listType,u=i.attrs.spread==="true",f=i.attrs.checked;r.openNode("listItem",void 0,{label:o,listType:l,spread:u,checked:f}),r.next(i.content),r.closeNode()}}}});Ye(Pb,{displayName:"NodeSchema<listItem>",group:"ListItem"});const Rb=Xr(()=>new Yr(/^\[(?<checked>\s|x)\]\s$/,(n,e,t,r)=>{var i;const o=n.doc.resolve(t);let l=0,u=o.node(l);for(;u&&u.type.name!=="list_item";)l--,u=o.node(l);if(!u||u.attrs.checked!=null)return null;const f=((i=e.groups)==null?void 0:i.checked)==="x",p=o.before(l),m=n.tr;return m.deleteRange(t,r).setNodeMarkup(p,void 0,{...u.attrs,checked:f}),m}));Ye(Rb,{displayName:"InputRule<wrapInTaskListInputRule>",group:"ListItem"});const gR=[O3,z3].flat(),yR=[Ob,Rb],vR=[db],Db=qi(()=>AO);Ye(Db,{displayName:"Prose<autoInsertSpanPlugin>",group:"Prose"});const wR=qi(()=>fO({}));Ye(wR,{displayName:"Prose<columnResizingPlugin>",group:"Prose"});const zb=qi(()=>xO({allowTableNodeSelection:!0}));Ye(zb,{displayName:"Prose<tableEditingPlugin>",group:"Prose"});const B3=Fu("remarkGFM",()=>lR);Ye(B3.plugin,{displayName:"Remark<remarkGFMPlugin>",group:"Remark"});Ye(B3.options,{displayName:"RemarkConfig<remarkGFMPlugin>",group:"Remark"});const kR=new Ln("MILKDOWN_KEEP_TABLE_ALIGN_PLUGIN");function xR(n,e){let t=0;return e.forEach((r,i,o)=>{r===n&&(t=o)}),t}const Lb=qi(()=>new Zn({key:kR,appendTransaction:(n,e,t)=>{let r;const i=(o,l)=>{if(r||(r=t.tr),o.type.name!=="table_cell")return;const u=t.doc.resolve(l),f=u.node(u.depth),m=u.node(u.depth-1).firstChild;if(!m)return;const g=xR(o,f),w=m.maybeChild(g);if(!w)return;const k=w.attrs.alignment,b=o.attrs.alignment;k!==b&&r.setNodeMarkup(l,void 0,{...o.attrs,alignment:k})};return e.doc!==t.doc&&t.doc.descendants(i),r}}));Ye(Lb,{displayName:"Prose<keepTableAlignPlugin>",group:"Prose"});const SR=[Lb,Db,B3,zb].flat(),bR=[Pb,Jf,eg,Bp,tg,Up,L3,F3,A3,Lp].flat(),_R=[R3,P3,D3,kb,xb,Sb,bb,_b,Cb,Eb,Nb,Ab,Tb,Mb,Ib,I3],CR=[bR,yR,vR,gR,_R,SR].flat();var I1=200,zn=function(){};zn.prototype.append=function(e){return e.length?(e=zn.from(e),!this.length&&e||e.length<I1&&this.leafAppend(e)||this.length<I1&&e.leafPrepend(this)||this.appendInner(e)):this};zn.prototype.prepend=function(e){return e.length?zn.from(e).append(this):this};zn.prototype.appendInner=function(e){return new ER(this,e)};zn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?zn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};zn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};zn.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};zn.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,l){return i.push(e(o,l))},t,r),i};zn.from=function(e){return e instanceof zn?e:e&&e.length?new Fb(e):zn.empty};var Fb=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,l,u){for(var f=o;f<l;f++)if(i(this.values[f],u+f)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,l,u){for(var f=o-1;f>=l;f--)if(i(this.values[f],u+f)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=I1)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=I1)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(zn);zn.empty=new Fb([]);var ER=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,l){var u=this.left.length;if(i<u&&this.left.forEachInner(r,i,Math.min(o,u),l)===!1||o>u&&this.right.forEachInner(r,Math.max(i-u,0),Math.min(this.length,o)-u,l+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,l){var u=this.left.length;if(i>u&&this.right.forEachInvertedInner(r,i-u,Math.max(o,u)-u,l+u)===!1||o<u&&this.left.forEachInvertedInner(r,Math.min(i,u),o,l)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(zn);const TR=500;class yo{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;t&&(i=this.remapping(r,this.items.length),o=i.maps.length);let l=e.tr,u,f,p=[],m=[];return this.items.forEach((g,w)=>{if(!g.step){i||(i=this.remapping(r,w+1),o=i.maps.length),o--,m.push(g);return}if(i){m.push(new ns(g.map));let k=g.step.map(i.slice(o)),b;k&&l.maybeStep(k).doc&&(b=l.mapping.maps[l.mapping.maps.length-1],p.push(new ns(b,void 0,void 0,p.length+m.length))),o--,b&&i.appendMap(b,o)}else l.maybeStep(g.step);if(g.selection)return u=i?g.selection.map(i.slice(o)):g.selection,f=new yo(this.items.slice(0,r).append(m.reverse().concat(p)),this.eventCount-1),!1},this.items.length,0),{remaining:f,transform:l,selection:u}}addTransform(e,t,r,i){let o=[],l=this.eventCount,u=this.items,f=!i&&u.length?u.get(u.length-1):null;for(let m=0;m<e.steps.length;m++){let g=e.steps[m].invert(e.docs[m]),w=new ns(e.mapping.maps[m],g,t),k;(k=f&&f.merge(w))&&(w=k,m?o.pop():u=u.slice(0,u.length-1)),o.push(w),t&&(l++,t=void 0),i||(f=w)}let p=l-r.depth;return p>NR&&(u=MR(u,p),l-=p),new yo(u.append(o),l)}remapping(e,t){let r=new fp;return this.items.forEach((i,o)=>{let l=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,l)},e,t),r}addMaps(e){return this.eventCount==0?this:new yo(this.items.append(e.map(t=>new ns(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),o=e.mapping,l=e.steps.length,u=this.eventCount;this.items.forEach(w=>{w.selection&&u--},i);let f=t;this.items.forEach(w=>{let k=o.getMirror(--f);if(k==null)return;l=Math.min(l,k);let b=o.maps[k];if(w.step){let A=e.steps[k].invert(e.docs[k]),P=w.selection&&w.selection.map(o.slice(f+1,k));P&&u++,r.push(new ns(b,A,P))}else r.push(new ns(b))},i);let p=[];for(let w=t;w<l;w++)p.push(new ns(o.maps[w]));let m=this.items.slice(0,i).append(p).append(r),g=new yo(m,u);return g.emptyItemCount()>TR&&(g=g.compress(this.items.length-r.length)),g}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],o=0;return this.items.forEach((l,u)=>{if(u>=e)i.push(l),l.selection&&o++;else if(l.step){let f=l.step.map(t.slice(r)),p=f&&f.getMap();if(r--,p&&t.appendMap(p,r),f){let m=l.selection&&l.selection.map(t.slice(r));m&&o++;let g=new ns(p.invert(),f,m),w,k=i.length-1;(w=i.length&&i[k].merge(g))?i[k]=w:i.push(g)}}else l.map&&r--},this.items.length,0),new yo(zn.from(i.reverse()),o)}}yo.empty=new yo(zn.empty,0);function MR(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class ns{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new ns(t.getMap().invert(),t,this.selection)}}}class Vl{constructor(e,t,r,i,o){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const NR=20;function AR(n,e,t,r){let i=t.getMeta(Tu),o;if(i)return i.historyState;t.getMeta(PR)&&(n=new Vl(n.done,n.undone,null,0,-1));let l=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(l&&l.getMeta(Tu))return l.getMeta(Tu).redo?new Vl(n.done.addTransform(t,void 0,r,c1(e)),n.undone,Ex(t.mapping.maps),n.prevTime,n.prevComposition):new Vl(n.done,n.undone.addTransform(t,void 0,r,c1(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),f=n.prevTime==0||!l&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!IR(t,n.prevRanges)),p=l?i2(n.prevRanges,t.mapping):Ex(t.mapping.maps);return new Vl(n.done.addTransform(t,f?e.selection.getBookmark():void 0,r,c1(e)),yo.empty,p,t.time,u??n.prevComposition)}else return(o=t.getMeta("rebased"))?new Vl(n.done.rebased(t,o),n.undone.rebased(t,o),i2(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Vl(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),i2(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function IR(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(t=!0)}),t}function Ex(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,o,l)=>e.push(o,l));return e}function i2(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),o=e.map(n[r+1],-1);i<=o&&t.push(i,o)}return t}function OR(n,e,t){let r=c1(e),i=Tu.get(e).spec.config,o=(t?n.undone:n.done).popEvent(e,r);if(!o)return null;let l=o.selection.resolve(o.transform.doc),u=(t?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),f=new Vl(t?u:o.remaining,t?o.remaining:u,null,0,-1);return o.transform.setSelection(l).setMeta(Tu,{redo:t,historyState:f})}let o2=!1,Tx=null;function c1(n){let e=n.plugins;if(Tx!=e){o2=!1,Tx=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){o2=!0;break}}return o2}const Tu=new Ln("history"),PR=new Ln("closeHistory");function RR(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Zn({key:Tu,state:{init(){return new Vl(yo.empty,yo.empty,null,0,-1)},apply(e,t,r){return AR(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?Ub:r=="historyRedo"?Wb:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function Bb(n,e){return(t,r)=>{let i=Tu.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let o=OR(i,t,n);o&&r(e?o.scrollIntoView():o)}return!0}}const Ub=Bb(!1,!0),Wb=Bb(!0,!0);function Gf(n,e){return Object.assign(n,{meta:{package:"@milkdown/plugin-history",...e}}),n}const U3=at("Undo",()=>()=>Ub);Gf(U3,{displayName:"Command<undo>"});const W3=at("Redo",()=>()=>Wb);Gf(W3,{displayName:"Command<redo>"});const j3=_o({},"historyProviderConfig");Gf(j3,{displayName:"Ctx<historyProviderConfig>"});const jb=qi(n=>RR(n.get(j3.key)));Gf(jb,{displayName:"Ctx<historyProviderPlugin>"});const $3=Zr("historyKeymap",{Undo:{shortcuts:"Mod-z",command:n=>{const e=n.get(Mt);return()=>e.call(U3.key)}},Redo:{shortcuts:["Mod-y","Shift-Mod-z"],command:n=>{const e=n.get(Mt);return()=>e.call(W3.key)}}});Gf($3.ctx,{displayName:"KeymapCtx<history>"});Gf($3.shortcuts,{displayName:"Keymap<history>"});const DR=[j3,jb,$3,U3,W3].flat();function zR(n,e){const{doc:t,selection:r}=n;if(!t||!r||!(r instanceof st||r instanceof Kr))return n;const{to:i}=r,o=e.type==="space"?Array(e.size).fill(" ").join(""):"	";return n.insertText(o,i)}const ng=_o({type:"space",size:2},"indentConfig");ng.meta={package:"@milkdown/plugin-indent",displayName:"Ctx<indentConfig>"};const $b=kS(n=>({Tab:(e,t)=>{const r=n.get(ng.key),{tr:i}=e,o=zR(i,r);return o.docChanged?(t==null||t(o),!0):!1}}));$b.meta={package:"@milkdown/plugin-indent",displayName:"Shortcut<indent>"};const LR=[ng,$b];function ev(n){if(!n)return!1;if(Array.isArray(n))return n.length>1?!1:ev(n[0]);const e=n.content;return e?ev(e):n.type==="text"}function FR(n){if(n.content.childCount===1){const e=n.content.firstChild;if((e==null?void 0:e.type.name)==="text"&&e.marks.length===0)return e;if((e==null?void 0:e.type.name)==="paragraph"&&e.childCount===1){const t=e.firstChild;if((t==null?void 0:t.type.name)==="text"&&t.marks.length===0)return t}}return!1}const Hb=qi(n=>{const e=n.get(is);n.update(ip,i=>({...i,editable:i.editable??(()=>!0)}));const t=new Ln("MILKDOWN_CLIPBOARD");return new Zn({key:t,props:{handlePaste:(i,o)=>{var l,u;const f=n.get(Of),p=(u=(l=i.props).editable)==null?void 0:u.call(l,i.state),{clipboardData:m}=o;if(!p||!m||i.state.selection.$from.node().type.spec.code)return!1;const w=m.getData("text/plain"),k=m.getData("vscode-editor-data");if(k){const I=JSON.parse(k),W=I==null?void 0:I.mode;if(w&&W){const{tr:B}=i.state,z=IM("code_block",e);return B.replaceSelectionWith(z.create({language:W})).setSelection(st.near(B.doc.resolve(Math.max(0,B.selection.from-2)))).insertText(w.replace(/\r\n?/g,`
`)),i.dispatch(B),!0}}const b=m.getData("text/html");if(b.length===0&&w.length===0)return!1;const A=Iu.fromSchema(e);let P;if(b.length===0){const I=f(w);if(!I||typeof I=="string")return!1;P=zu.fromSchema(e).serializeFragment(I.content)}else{const I=document.createElement("template");I.innerHTML=b,P=I.content.cloneNode(!0),I.remove()}const F=A.parseSlice(P),V=FR(F);return V?(i.dispatch(i.state.tr.replaceSelectionWith(V,!0)),!0):(i.dispatch(i.state.tr.replaceSelection(F)),!0)},clipboardTextSerializer:i=>{const o=n.get(Pf);if(ev(i.content.toJSON()))return i.content.textBetween(0,i.content.size,`

`);const u=e.topNodeType.createAndFill(void 0,i.content);return u?o(u):""}}})});Hb.meta={displayName:"Prose<clipboard>",package:"@milkdown/plugin-clipboard"};const H3=_o({shouldAppend:n=>!(!n||["heading","paragraph"].includes(n.type.name)),getNode:n=>n.schema.nodes.paragraph.create()},"trailingConfig");H3.meta={package:"@milkdown/plugin-trailing",displayName:"Ctx<trailingConfig>"};const Vb=qi(n=>{const e=new Ln("MILKDOWN_TRAILING"),{shouldAppend:t,getNode:r}=n.get(H3.key),i=new Zn({key:e,state:{init:(o,l)=>{const u=l.tr.doc.lastChild;return t(u,l)},apply:(o,l,u,f)=>{if(!o.docChanged)return l;const p=o.doc.lastChild;return t(p,f)}},appendTransaction:(o,l,u)=>{const{doc:f,tr:p}=u,m=r==null?void 0:r(u),g=i.getState(u),w=f.content.size;if(!(!g||!m))return p.insert(w,m)}});return i});Vb.meta={package:"@milkdown/plugin-trailing",displayName:"Prose<trailing>"};const BR=[H3,Vb];var qb=(n=>(n.CodeMirror="code-mirror",n.ListItem="list-item",n.LinkTooltip="link-tooltip",n.Cursor="cursor",n.ImageBlock="image-block",n.BlockEdit="block-edit",n.Toolbar="toolbar",n.Placeholder="placeholder",n.Table="table",n.Latex="latex",n))(qb||{});const UR={cursor:!0,"list-item":!0,"link-tooltip":!0,"image-block":!0,"block-edit":!0,placeholder:!0,toolbar:!0,"code-mirror":!0,table:!0,latex:!0};async function WR(n,e,t){switch(n){case"code-mirror":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-B3KiKTSt-_rDVJLsv.js").then(o=>o.E);return{defineFeature:i}},__vite__mapDeps([0,1,2,3,4]));return r(e,t)}case"list-item":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-Cuk7cL-r-CBBtfUth.js");return{defineFeature:i}},__vite__mapDeps([5,2]));return r(e,t)}case"link-tooltip":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-DcRgwPLd-FgfmBf_t.js");return{defineFeature:i}},__vite__mapDeps([6,2,7,3,8,9,4]));return r(e,t)}case"image-block":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-BFsG6770-CC7uhXqY.js");return{defineFeature:i}},__vite__mapDeps([10,2,3,11]));return r(e,t)}case"cursor":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-CsYl2WR5-D8Rsmsoi.js");return{defineFeature:i}},[]);return r(e,t)}case"block-edit":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-CEOsxgzJ-Bhu-EhpW.js");return{defineFeature:i}},__vite__mapDeps([12,13,2,3,9,4,11]));return r(e,t)}case"placeholder":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-DOrkOhki-DI4wdo-p.js");return{defineFeature:i}},__vite__mapDeps([14,13]));return r(e,t)}case"toolbar":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-H9uklzH0-BHrmks9D.js");return{defineFeature:i}},__vite__mapDeps([15,13,2,16,8,9,4,7,3]));return r(e,t)}case"table":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-CBrOT1fW-C8H1Hnnv.js");return{defineFeature:i}},__vite__mapDeps([17,2,3,9,4]));return r(e,t)}case"latex":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-x2oo_GmY-BmJ442X9.js");return{defineFeature:i}},__vite__mapDeps([18,16,13,2,1,3,4,8,9]));return r(e,t)}}}const jR=St([],"FeaturesCtx"),$R=St({},"CrepeCtx");function HR(n){return e=>{e.inject(jR,n)}}var Kb=n=>{throw TypeError(n)},Jb=(n,e,t)=>e.has(n)||Kb("Cannot "+t),Bi=(n,e,t)=>(Jb(n,e,"read from private field"),t?t.call(n):e.get(n)),Nm=(n,e,t)=>e.has(n)?Kb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Am=(n,e,t,r)=>(Jb(n,e,"write to private field"),e.set(n,t),t),mo,Gd,f1,h1;class Ef{constructor({root:e,features:t={},featureConfigs:r={},defaultValue:i=""}){Nm(this,mo),Nm(this,Gd),Nm(this,f1),Nm(this,h1,!0);var o;const l=Object.entries({...UR,...t}).filter(([,f])=>f).map(([f])=>f);Am(this,f1,(o=typeof e=="string"?document.querySelector(e):e)!=null?o:document.body),Am(this,mo,KA.make().config(f=>{f.inject($R,this)}).config(HR(l)).config(f=>{f.set(l1,Bi(this,f1)),f.set(r1,i),f.set(ip,{editable:()=>Bi(this,h1)}),f.update(ng.key,p=>({...p,size:4}))}).use(MI).use(SS).use(DR).use(LR).use(BR).use(Hb).use(CR));const u=[];l.forEach(f=>{const p=r[f];u.push(WR(f,Bi(this,mo),p))}),Am(this,Gd,Promise.all(u))}async create(){return await Bi(this,Gd),Bi(this,mo).create()}async destroy(){return await Bi(this,Gd),Bi(this,mo).destroy()}get editor(){return Bi(this,mo)}setReadonly(e){return Am(this,h1,!e),this}getMarkdown(){return Bi(this,mo).action(XA())}on(e){return Bi(this,mo).status!==Ov.Created?(Bi(this,mo).config(t=>{const r=t.get(xp);e(r)}),this):(Bi(this,mo).action(t=>{const r=t.get(xp);e(r)}),this)}}mo=new WeakMap;Gd=new WeakMap;f1=new WeakMap;h1=new WeakMap;Ef.Feature=qb;function VR({note:n}){const[e,t]=Xe.useState(0),[r,i]=Xe.useState(!1),o=Xe.useRef(),l=Kx(),{get:u}=NC(f=>{const p=new Ef({root:f,features:{[Ef.Feature.ImageBlock]:!1,[Ef.Feature.Toolbar]:!1,[Ef.Feature.BlockEdit]:!1},featureConfigs:{[Ef.Feature.Placeholder]:{text:"type here...",mode:"doc"}}});return p.editor.config(m=>{m.set(Nf,{handlers:{break:()=>`
`}}),m.get(xp).markdownUpdated((g,w,k)=>{w!==k&&(clearTimeout(o.current),o.current=setTimeout(()=>{const b=new Date().getTime();t(b),l({type:ap.UPDATE_NOTE,payload:{id:n.id,content:w,lastEdit:b}})},1e3))})}),p.editor.onStatusChange(m=>{m===Ov.Created&&i(!0)}),p});return Xe.useEffect(()=>{if(e===n.lastEdit||!r)return;u().action(ZA(n.content))},[n,r]),vo.jsx(TC,{})}function qR({noteId:n}){const t=y8().notes[n]??{id:n,content:""};return vo.jsx("div",{className:"EditorArea",children:vo.jsx(MC,{children:vo.jsx(VR,{note:t})})})}function KR(){const n=Kx();return Xe.useEffect(()=>{bp.on("ready",async()=>{n({type:ap.UPDATE_RS_STATUS,payload:!0});const e=await qx.getFile("notes.json");try{const t=JSON.parse(e.data);n({type:ap.UPDATE_NOTE,payload:Object.values(t),isInit:!0})}catch{}})},[n]),vo.jsx(vo.Fragment,{children:vo.jsx(qR,{noteId:0})})}CC.createRoot(document.getElementById("root")).render(vo.jsx(Xe.StrictMode,{children:vo.jsx(v8,{children:vo.jsx(KR,{})})}));export{_o as $,n5 as A,Fu as B,qb as C,Gt as D,Fn as E,_e as F,us as G,Lu as H,Op as I,Hf as J,Lp as K,Yl as L,kt as M,Ze as N,Rf as O,Zn as P,Mt as Q,Fv as R,Ne as S,st as T,Dv as U,I3 as V,Wv as W,Jf as X,Kt as Y,Wp as Z,Xo as _,rD as a,bb as a0,Ab as a1,Nb as a2,_b as a3,Mb as a4,Tb as a5,Eb as a6,Ib as a7,Sb as a8,xb as a9,GR as aa,dE as ab,xt as ac,qe as ad,Xr as ae,eD as af,d5 as ag,RA as ah,gu as ai,E5 as aj,e7 as ak,Wb as al,Ub as am,XM as an,ra as ao,b1 as ap,FM as aq,Jl as ar,Sp as as,Xn as b,QA as c,eM as d,et as e,qi as f,Ln as g,NM as h,Vf as i,bu as j,T5 as k,as as l,zu as m,ZR as n,nI as o,nD as p,tD as q,ua as r,jR as s,Bu as t,Pp as u,Dp as v,qf as w,Kf as x,Rp as y,pb as z};
