const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B3KiKTSt-BSGGECQV.js","assets/index.es-YeaEQ_mi.js","assets/functions-Bsik6ikd-Dr945oKc.js","assets/hooks-DzxriSVi.js","assets/floating-ui.dom-DJfcjnnZ.js","assets/index-Cuk7cL-r-Bs94TgCA.js","assets/index-DcRgwPLd-SfREQibH.js","assets/index.es-BDSzVE4f.js","assets/index.es-_6XeIplr.js","assets/index-BLZFuL2z.js","assets/index-BFsG6770-DCTCm6ou.js","assets/index.es-DX6fHLAV.js","assets/index-uHWmZXqe-Cx-VgnRy.js","assets/index-D6fLMv29-COUJrQhB.js","assets/index-DOrkOhki-_0TglJKO.js","assets/index-CsEtSFhk-CHiHvMuS.js","assets/inline-latex-C9IGAXXQ-zViXB1RP.js","assets/index-CBrOT1fW-CJfiNSVE.js","assets/index-s33c_M2f-C2bBqIn0.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ly={exports:{}},Sh={},ay={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fw;function xC(){if(fw)return ut;fw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.iterator;function w(M){return M===null||typeof M!="object"?null:(M=m&&M[m]||M["@@iterator"],typeof M=="function"?M:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,A={};function O(M,D,N){this.props=M,this.context=D,this.refs=A,this.updater=N||k}O.prototype.isReactComponent={},O.prototype.setState=function(M,D){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,D,"setState")},O.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function F(){}F.prototype=O.prototype;function V(M,D,N){this.props=M,this.context=D,this.refs=A,this.updater=N||k}var I=V.prototype=new F;I.constructor=V,b(I,O.prototype),I.isPureReactComponent=!0;var W=Array.isArray,B=Object.prototype.hasOwnProperty,z={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function Y(M,D,N){var te,X={},re=null,pe=null;if(D!=null)for(te in D.ref!==void 0&&(pe=D.ref),D.key!==void 0&&(re=""+D.key),D)B.call(D,te)&&!H.hasOwnProperty(te)&&(X[te]=D[te]);var ke=arguments.length-2;if(ke===1)X.children=N;else if(1<ke){for(var Me=Array(ke),je=0;je<ke;je++)Me[je]=arguments[je+2];X.children=Me}if(M&&M.defaultProps)for(te in ke=M.defaultProps,ke)X[te]===void 0&&(X[te]=ke[te]);return{$$typeof:n,type:M,key:re,ref:pe,props:X,_owner:z.current}}function q(M,D){return{$$typeof:n,type:M.type,key:D,ref:M.ref,props:M.props,_owner:M._owner}}function C(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function U(M){var D={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(N){return D[N]})}var R=/\/+/g;function Q(M,D){return typeof M=="object"&&M!==null&&M.key!=null?U(""+M.key):D.toString(36)}function ue(M,D,N,te,X){var re=typeof M;(re==="undefined"||re==="boolean")&&(M=null);var pe=!1;if(M===null)pe=!0;else switch(re){case"string":case"number":pe=!0;break;case"object":switch(M.$$typeof){case n:case e:pe=!0}}if(pe)return pe=M,X=X(pe),M=te===""?"."+Q(pe,0):te,W(X)?(N="",M!=null&&(N=M.replace(R,"$&/")+"/"),ue(X,D,N,"",function(je){return je})):X!=null&&(C(X)&&(X=q(X,N+(!X.key||pe&&pe.key===X.key?"":(""+X.key).replace(R,"$&/")+"/")+M)),D.push(X)),1;if(pe=0,te=te===""?".":te+":",W(M))for(var ke=0;ke<M.length;ke++){re=M[ke];var Me=te+Q(re,ke);pe+=ue(re,D,N,Me,X)}else if(Me=w(M),typeof Me=="function")for(M=Me.call(M),ke=0;!(re=M.next()).done;)re=re.value,Me=te+Q(re,ke++),pe+=ue(re,D,N,Me,X);else if(re==="object")throw D=String(M),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return pe}function oe(M,D,N){if(M==null)return M;var te=[],X=0;return ue(M,te,"","",function(re){return D.call(N,re,X++)}),te}function se(M){if(M._status===-1){var D=M._result;D=D(),D.then(function(N){(M._status===0||M._status===-1)&&(M._status=1,M._result=N)},function(N){(M._status===0||M._status===-1)&&(M._status=2,M._result=N)}),M._status===-1&&(M._status=0,M._result=D)}if(M._status===1)return M._result.default;throw M._result}var ae={current:null},K={transition:null},_={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:K,ReactCurrentOwner:z};function x(){throw Error("act(...) is not supported in production builds of React.")}return ut.Children={map:oe,forEach:function(M,D,N){oe(M,function(){D.apply(this,arguments)},N)},count:function(M){var D=0;return oe(M,function(){D++}),D},toArray:function(M){return oe(M,function(D){return D})||[]},only:function(M){if(!C(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},ut.Component=O,ut.Fragment=t,ut.Profiler=i,ut.PureComponent=V,ut.StrictMode=r,ut.Suspense=f,ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_,ut.act=x,ut.cloneElement=function(M,D,N){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var te=b({},M.props),X=M.key,re=M.ref,pe=M._owner;if(D!=null){if(D.ref!==void 0&&(re=D.ref,pe=z.current),D.key!==void 0&&(X=""+D.key),M.type&&M.type.defaultProps)var ke=M.type.defaultProps;for(Me in D)B.call(D,Me)&&!H.hasOwnProperty(Me)&&(te[Me]=D[Me]===void 0&&ke!==void 0?ke[Me]:D[Me])}var Me=arguments.length-2;if(Me===1)te.children=N;else if(1<Me){ke=Array(Me);for(var je=0;je<Me;je++)ke[je]=arguments[je+2];te.children=ke}return{$$typeof:n,type:M.type,key:X,ref:re,props:te,_owner:pe}},ut.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:o,_context:M},M.Consumer=M},ut.createElement=Y,ut.createFactory=function(M){var D=Y.bind(null,M);return D.type=M,D},ut.createRef=function(){return{current:null}},ut.forwardRef=function(M){return{$$typeof:u,render:M}},ut.isValidElement=C,ut.lazy=function(M){return{$$typeof:g,_payload:{_status:-1,_result:M},_init:se}},ut.memo=function(M,D){return{$$typeof:h,type:M,compare:D===void 0?null:D}},ut.startTransition=function(M){var D=K.transition;K.transition={};try{M()}finally{K.transition=D}},ut.unstable_act=x,ut.useCallback=function(M,D){return ae.current.useCallback(M,D)},ut.useContext=function(M){return ae.current.useContext(M)},ut.useDebugValue=function(){},ut.useDeferredValue=function(M){return ae.current.useDeferredValue(M)},ut.useEffect=function(M,D){return ae.current.useEffect(M,D)},ut.useId=function(){return ae.current.useId()},ut.useImperativeHandle=function(M,D,N){return ae.current.useImperativeHandle(M,D,N)},ut.useInsertionEffect=function(M,D){return ae.current.useInsertionEffect(M,D)},ut.useLayoutEffect=function(M,D){return ae.current.useLayoutEffect(M,D)},ut.useMemo=function(M,D){return ae.current.useMemo(M,D)},ut.useReducer=function(M,D,N){return ae.current.useReducer(M,D,N)},ut.useRef=function(M){return ae.current.useRef(M)},ut.useState=function(M){return ae.current.useState(M)},ut.useSyncExternalStore=function(M,D,N){return ae.current.useSyncExternalStore(M,D,N)},ut.useTransition=function(){return ae.current.useTransition()},ut.version="18.3.1",ut}var dw;function rv(){return dw||(dw=1,ay.exports=xC()),ay.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw;function SC(){if(hw)return Sh;hw=1;var n=rv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,f,h){var g,m={},w=null,k=null;h!==void 0&&(w=""+h),f.key!==void 0&&(w=""+f.key),f.ref!==void 0&&(k=f.ref);for(g in f)r.call(f,g)&&!o.hasOwnProperty(g)&&(m[g]=f[g]);if(u&&u.defaultProps)for(g in f=u.defaultProps,f)m[g]===void 0&&(m[g]=f[g]);return{$$typeof:e,type:u,key:w,ref:k,props:m,_owner:i.current}}return Sh.Fragment=t,Sh.jsx=l,Sh.jsxs=l,Sh}var pw;function bC(){return pw||(pw=1,ly.exports=SC()),ly.exports}var vo=bC(),Xe=rv();const P4=Sp(Xe);var xm={},uy={exports:{}},Hr={},cy={exports:{}},fy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mw;function _C(){return mw||(mw=1,function(n){function e(K,_){var x=K.length;K.push(_);e:for(;0<x;){var M=x-1>>>1,D=K[M];if(0<i(D,_))K[M]=_,K[x]=D,x=M;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var _=K[0],x=K.pop();if(x!==_){K[0]=x;e:for(var M=0,D=K.length,N=D>>>1;M<N;){var te=2*(M+1)-1,X=K[te],re=te+1,pe=K[re];if(0>i(X,x))re<D&&0>i(pe,X)?(K[M]=pe,K[re]=x,M=re):(K[M]=X,K[te]=x,M=te);else if(re<D&&0>i(pe,x))K[M]=pe,K[re]=x,M=re;else break e}}return _}function i(K,_){var x=K.sortIndex-_.sortIndex;return x!==0?x:K.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var f=[],h=[],g=1,m=null,w=3,k=!1,b=!1,A=!1,O=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(K){for(var _=t(h);_!==null;){if(_.callback===null)r(h);else if(_.startTime<=K)r(h),_.sortIndex=_.expirationTime,e(f,_);else break;_=t(h)}}function W(K){if(A=!1,I(K),!b)if(t(f)!==null)b=!0,se(B);else{var _=t(h);_!==null&&ae(W,_.startTime-K)}}function B(K,_){b=!1,A&&(A=!1,F(Y),Y=-1),k=!0;var x=w;try{for(I(_),m=t(f);m!==null&&(!(m.expirationTime>_)||K&&!U());){var M=m.callback;if(typeof M=="function"){m.callback=null,w=m.priorityLevel;var D=M(m.expirationTime<=_);_=n.unstable_now(),typeof D=="function"?m.callback=D:m===t(f)&&r(f),I(_)}else r(f);m=t(f)}if(m!==null)var N=!0;else{var te=t(h);te!==null&&ae(W,te.startTime-_),N=!1}return N}finally{m=null,w=x,k=!1}}var z=!1,H=null,Y=-1,q=5,C=-1;function U(){return!(n.unstable_now()-C<q)}function R(){if(H!==null){var K=n.unstable_now();C=K;var _=!0;try{_=H(!0,K)}finally{_?Q():(z=!1,H=null)}}else z=!1}var Q;if(typeof V=="function")Q=function(){V(R)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,oe=ue.port2;ue.port1.onmessage=R,Q=function(){oe.postMessage(null)}}else Q=function(){O(R,0)};function se(K){H=K,z||(z=!0,Q())}function ae(K,_){Y=O(function(){K(n.unstable_now())},_)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_continueExecution=function(){b||k||(b=!0,se(B))},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(K){switch(w){case 1:case 2:case 3:var _=3;break;default:_=w}var x=w;w=_;try{return K()}finally{w=x}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(K,_){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var x=w;w=K;try{return _()}finally{w=x}},n.unstable_scheduleCallback=function(K,_,x){var M=n.unstable_now();switch(typeof x=="object"&&x!==null?(x=x.delay,x=typeof x=="number"&&0<x?M+x:M):x=M,K){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=x+D,K={id:g++,callback:_,priorityLevel:K,startTime:x,expirationTime:D,sortIndex:-1},x>M?(K.sortIndex=x,e(h,K),t(f)===null&&K===t(h)&&(A?(F(Y),Y=-1):A=!0,ae(W,x-M))):(K.sortIndex=D,e(f,K),b||k||(b=!0,se(B))),K},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(K){var _=w;return function(){var x=w;w=_;try{return K.apply(this,arguments)}finally{w=x}}}}(fy)),fy}var gw;function CC(){return gw||(gw=1,cy.exports=_C()),cy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yw;function EC(){if(yw)return Hr;yw=1;var n=rv(),e=CC();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,p=1;p<arguments.length;p++)a+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},m={};function w(s){return f.call(m,s)?!0:f.call(g,s)?!1:h.test(s)?m[s]=!0:(g[s]=!0,!1)}function k(s,a,p,y){if(p!==null&&p.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return y?!1:p!==null?!p.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function b(s,a,p,y){if(a===null||typeof a>"u"||k(s,a,p,y))return!0;if(y)return!1;if(p!==null)switch(p.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function A(s,a,p,y,S,E,L){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=y,this.attributeNamespace=S,this.mustUseProperty=p,this.propertyName=s,this.type=a,this.sanitizeURL=E,this.removeEmptyString=L}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){O[s]=new A(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];O[a]=new A(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){O[s]=new A(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){O[s]=new A(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){O[s]=new A(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){O[s]=new A(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){O[s]=new A(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){O[s]=new A(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){O[s]=new A(s,5,!1,s.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function V(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(F,V);O[a]=new A(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(F,V);O[a]=new A(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(F,V);O[a]=new A(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){O[s]=new A(s,1,!1,s.toLowerCase(),null,!1,!1)}),O.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){O[s]=new A(s,1,!1,s.toLowerCase(),null,!0,!0)});function I(s,a,p,y){var S=O.hasOwnProperty(a)?O[a]:null;(S!==null?S.type!==0:y||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(b(a,p,S,y)&&(p=null),y||S===null?w(a)&&(p===null?s.removeAttribute(a):s.setAttribute(a,""+p)):S.mustUseProperty?s[S.propertyName]=p===null?S.type===3?!1:"":p:(a=S.attributeName,y=S.attributeNamespace,p===null?s.removeAttribute(a):(S=S.type,p=S===3||S===4&&p===!0?"":""+p,y?s.setAttributeNS(y,a,p):s.setAttribute(a,p))))}var W=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),z=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),U=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),K=Symbol.iterator;function _(s){return s===null||typeof s!="object"?null:(s=K&&s[K]||s["@@iterator"],typeof s=="function"?s:null)}var x=Object.assign,M;function D(s){if(M===void 0)try{throw Error()}catch(p){var a=p.stack.trim().match(/\n( *(at )?)/);M=a&&a[1]||""}return`
`+M+s}var N=!1;function te(s,a){if(!s||N)return"";N=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(he){var y=he}Reflect.construct(s,[],a)}else{try{a.call()}catch(he){y=he}s.call(a.prototype)}else{try{throw Error()}catch(he){y=he}s()}}catch(he){if(he&&y&&typeof he.stack=="string"){for(var S=he.stack.split(`
`),E=y.stack.split(`
`),L=S.length-1,J=E.length-1;1<=L&&0<=J&&S[L]!==E[J];)J--;for(;1<=L&&0<=J;L--,J--)if(S[L]!==E[J]){if(L!==1||J!==1)do if(L--,J--,0>J||S[L]!==E[J]){var Z=`
`+S[L].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=L&&0<=J);break}}}finally{N=!1,Error.prepareStackTrace=p}return(s=s?s.displayName||s.name:"")?D(s):""}function X(s){switch(s.tag){case 5:return D(s.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return s=te(s.type,!1),s;case 11:return s=te(s.type.render,!1),s;case 1:return s=te(s.type,!0),s;default:return""}}function re(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case H:return"Fragment";case z:return"Portal";case q:return"Profiler";case Y:return"StrictMode";case Q:return"Suspense";case ue:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case U:return(s.displayName||"Context")+".Consumer";case C:return(s._context.displayName||"Context")+".Provider";case R:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case oe:return a=s.displayName||null,a!==null?a:re(s.type)||"Memo";case se:a=s._payload,s=s._init;try{return re(s(a))}catch{}}return null}function pe(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(a);case 8:return a===Y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function ke(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Me(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function je(s){var a=Me(s)?"checked":"value",p=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),y=""+s[a];if(!s.hasOwnProperty(a)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var S=p.get,E=p.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return S.call(this)},set:function(L){y=""+L,E.call(this,L)}}),Object.defineProperty(s,a,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(L){y=""+L},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function $e(s){s._valueTracker||(s._valueTracker=je(s))}function pt(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var p=a.getValue(),y="";return s&&(y=Me(s)?s.checked?"true":"false":s.value),s=y,s!==p?(a.setValue(s),!0):!1}function ln(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ot(s,a){var p=a.checked;return x({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??s._wrapperState.initialChecked})}function an(s,a){var p=a.defaultValue==null?"":a.defaultValue,y=a.checked!=null?a.checked:a.defaultChecked;p=ke(a.value!=null?a.value:p),s._wrapperState={initialChecked:y,initialValue:p,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Eo(s,a){a=a.checked,a!=null&&I(s,"checked",a,!1)}function En(s,a){Eo(s,a);var p=ke(a.value),y=a.type;if(p!=null)y==="number"?(p===0&&s.value===""||s.value!=p)&&(s.value=""+p):s.value!==""+p&&(s.value=""+p);else if(y==="submit"||y==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?Ji(s,a.type,p):a.hasOwnProperty("defaultValue")&&Ji(s,a.type,ke(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function en(s,a,p){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var y=a.type;if(!(y!=="submit"&&y!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,p||a===s.value||(s.value=a),s.defaultValue=a}p=s.name,p!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,p!==""&&(s.name=p)}function Ji(s,a,p){(a!=="number"||ln(s.ownerDocument)!==s)&&(p==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+p&&(s.defaultValue=""+p))}var kn=Array.isArray;function bt(s,a,p,y){if(s=s.options,a){a={};for(var S=0;S<p.length;S++)a["$"+p[S]]=!0;for(p=0;p<s.length;p++)S=a.hasOwnProperty("$"+s[p].value),s[p].selected!==S&&(s[p].selected=S),S&&y&&(s[p].defaultSelected=!0)}else{for(p=""+ke(p),a=null,S=0;S<s.length;S++){if(s[S].value===p){s[S].selected=!0,y&&(s[S].defaultSelected=!0);return}a!==null||s[S].disabled||(a=s[S])}a!==null&&(a.selected=!0)}}function Nt(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return x({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function hr(s,a){var p=a.value;if(p==null){if(p=a.children,a=a.defaultValue,p!=null){if(a!=null)throw Error(t(92));if(kn(p)){if(1<p.length)throw Error(t(93));p=p[0]}a=p}a==null&&(a=""),p=a}s._wrapperState={initialValue:ke(p)}}function fs(s,a){var p=ke(a.value),y=ke(a.defaultValue);p!=null&&(p=""+p,p!==s.value&&(s.value=p),a.defaultValue==null&&s.defaultValue!==p&&(s.defaultValue=p)),y!=null&&(s.defaultValue=""+y)}function pr(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function ge(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Te(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?ge(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Ue,rt=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,p,y,S){MSApp.execUnsafeLocalFunction(function(){return s(a,p,y,S)})}:s}(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(Ue=Ue||document.createElement("div"),Ue.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Ue.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function ft(s,a){if(a){var p=s.firstChild;if(p&&p===s.lastChild&&p.nodeType===3){p.nodeValue=a;return}}s.textContent=a}var un={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ei=["Webkit","ms","Moz","O"];Object.keys(un).forEach(function(s){ei.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),un[a]=un[s]})});function er(s,a,p){return a==null||typeof a=="boolean"||a===""?"":p||typeof a!="number"||a===0||un.hasOwnProperty(s)&&un[s]?(""+a).trim():a+"px"}function xi(s,a){s=s.style;for(var p in a)if(a.hasOwnProperty(p)){var y=p.indexOf("--")===0,S=er(p,a[p],y);p==="float"&&(p="cssFloat"),y?s.setProperty(p,S):s[p]=S}}var Gi=x({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cn(s,a){if(a){if(Gi[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Mr(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mr=null;function Gf(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Qf=null,ds=null,hs=null;function jp(s){if(s=Nn(s)){if(typeof Qf!="function")throw Error(t(280));var a=s.stateNode;a&&(a=gc(a),Qf(s.stateNode,s.type,a))}}function $p(s){ds?hs?hs.push(s):hs=[s]:ds=s}function Hp(){if(ds){var s=ds,a=hs;if(hs=ds=null,jp(s),a)for(s=0;s<a.length;s++)jp(a[s])}}function Vp(s,a){return s(a)}function Yf(){}var Xf=!1;function qp(s,a,p){if(Xf)return s(a,p);Xf=!0;try{return Vp(s,a,p)}finally{Xf=!1,(ds!==null||hs!==null)&&(Yf(),Hp())}}function fa(s,a){var p=s.stateNode;if(p===null)return null;var y=gc(p);if(y===null)return null;p=y[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(s=s.type,y=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!y;break e;default:s=!1}if(s)return null;if(p&&typeof p!="function")throw Error(t(231,a,typeof p));return p}var da=!1;if(u)try{var ha={};Object.defineProperty(ha,"passive",{get:function(){da=!0}}),window.addEventListener("test",ha,ha),window.removeEventListener("test",ha,ha)}catch{da=!1}function Zf(s,a,p,y,S,E,L,J,Z){var he=Array.prototype.slice.call(arguments,3);try{a.apply(p,he)}catch(Se){this.onError(Se)}}var pa=!1,Uu=null,Wu=!1,ed=null,rg={onError:function(s){pa=!0,Uu=s}};function ig(s,a,p,y,S,E,L,J,Z){pa=!1,Uu=null,Zf.apply(rg,arguments)}function og(s,a,p,y,S,E,L,J,Z){if(ig.apply(this,arguments),pa){if(pa){var he=Uu;pa=!1,Uu=null}else throw Error(t(198));Wu||(Wu=!0,ed=he)}}function ps(s){var a=s,p=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(p=a.return),s=a.return;while(s)}return a.tag===3?p:null}function td(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Kp(s){if(ps(s)!==s)throw Error(t(188))}function sg(s){var a=s.alternate;if(!a){if(a=ps(s),a===null)throw Error(t(188));return a!==s?null:s}for(var p=s,y=a;;){var S=p.return;if(S===null)break;var E=S.alternate;if(E===null){if(y=S.return,y!==null){p=y;continue}break}if(S.child===E.child){for(E=S.child;E;){if(E===p)return Kp(S),s;if(E===y)return Kp(S),a;E=E.sibling}throw Error(t(188))}if(p.return!==y.return)p=S,y=E;else{for(var L=!1,J=S.child;J;){if(J===p){L=!0,p=S,y=E;break}if(J===y){L=!0,y=S,p=E;break}J=J.sibling}if(!L){for(J=E.child;J;){if(J===p){L=!0,p=E,y=S;break}if(J===y){L=!0,y=E,p=S;break}J=J.sibling}if(!L)throw Error(t(189))}}if(p.alternate!==y)throw Error(t(190))}if(p.tag!==3)throw Error(t(188));return p.stateNode.current===p?s:a}function Jp(s){return s=sg(s),s!==null?Gp(s):null}function Gp(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Gp(s);if(a!==null)return a;s=s.sibling}return null}var Qp=e.unstable_scheduleCallback,Yp=e.unstable_cancelCallback,ju=e.unstable_shouldYield,lg=e.unstable_requestPaint,Ut=e.unstable_now,ag=e.unstable_getCurrentPriorityLevel,nd=e.unstable_ImmediatePriority,Xp=e.unstable_UserBlockingPriority,ma=e.unstable_NormalPriority,Zp=e.unstable_LowPriority,rd=e.unstable_IdlePriority,$u=null,Si=null;function ug(s){if(Si&&typeof Si.onCommitFiberRoot=="function")try{Si.onCommitFiberRoot($u,s,void 0,(s.current.flags&128)===128)}catch{}}var ti=Math.clz32?Math.clz32:n0,e0=Math.log,t0=Math.LN2;function n0(s){return s>>>=0,s===0?32:31-(e0(s)/t0|0)|0}var Xs=64,Hu=4194304;function Zs(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function ms(s,a){var p=s.pendingLanes;if(p===0)return 0;var y=0,S=s.suspendedLanes,E=s.pingedLanes,L=p&268435455;if(L!==0){var J=L&~S;J!==0?y=Zs(J):(E&=L,E!==0&&(y=Zs(E)))}else L=p&~S,L!==0?y=Zs(L):E!==0&&(y=Zs(E));if(y===0)return 0;if(a!==0&&a!==y&&(a&S)===0&&(S=y&-y,E=a&-a,S>=E||S===16&&(E&4194240)!==0))return a;if((y&4)!==0&&(y|=p&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=y;0<a;)p=31-ti(a),S=1<<p,y|=s[p],a&=~S;return y}function r0(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cg(s,a){for(var p=s.suspendedLanes,y=s.pingedLanes,S=s.expirationTimes,E=s.pendingLanes;0<E;){var L=31-ti(E),J=1<<L,Z=S[L];Z===-1?((J&p)===0||(J&y)!==0)&&(S[L]=r0(J,a)):Z<=a&&(s.expiredLanes|=J),E&=~J}}function Vu(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function id(){var s=Xs;return Xs<<=1,(Xs&4194240)===0&&(Xs=64),s}function ga(s){for(var a=[],p=0;31>p;p++)a.push(s);return a}function ya(s,a,p){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-ti(a),s[a]=p}function i0(s,a){var p=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var y=s.eventTimes;for(s=s.expirationTimes;0<p;){var S=31-ti(p),E=1<<S;a[S]=0,y[S]=-1,s[S]=-1,p&=~E}}function va(s,a){var p=s.entangledLanes|=a;for(s=s.entanglements;p;){var y=31-ti(p),S=1<<y;S&a|s[y]&a&&(s[y]|=a),p&=~S}}var _t=0;function gs(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var od,qu,o0,sd,ld,Ku=!1,wa=[],To=null,Mo=null,No=null,el=new Map,ka=new Map,Ao=[],fg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function s0(s,a){switch(s){case"focusin":case"focusout":To=null;break;case"dragenter":case"dragleave":Mo=null;break;case"mouseover":case"mouseout":No=null;break;case"pointerover":case"pointerout":el.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ka.delete(a.pointerId)}}function ys(s,a,p,y,S,E){return s===null||s.nativeEvent!==E?(s={blockedOn:a,domEventName:p,eventSystemFlags:y,nativeEvent:E,targetContainers:[S]},a!==null&&(a=Nn(a),a!==null&&qu(a)),s):(s.eventSystemFlags|=y,a=s.targetContainers,S!==null&&a.indexOf(S)===-1&&a.push(S),s)}function dg(s,a,p,y,S){switch(a){case"focusin":return To=ys(To,s,a,p,y,S),!0;case"dragenter":return Mo=ys(Mo,s,a,p,y,S),!0;case"mouseover":return No=ys(No,s,a,p,y,S),!0;case"pointerover":var E=S.pointerId;return el.set(E,ys(el.get(E)||null,s,a,p,y,S)),!0;case"gotpointercapture":return E=S.pointerId,ka.set(E,ys(ka.get(E)||null,s,a,p,y,S)),!0}return!1}function l0(s){var a=Ei(s.target);if(a!==null){var p=ps(a);if(p!==null){if(a=p.tag,a===13){if(a=td(p),a!==null){s.blockedOn=a,ld(s.priority,function(){o0(p)});return}}else if(a===3&&p.stateNode.current.memoizedState.isDehydrated){s.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ju(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var p=Yu(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(p===null){p=s.nativeEvent;var y=new p.constructor(p.type,p);mr=y,p.target.dispatchEvent(y),mr=null}else return a=Nn(p),a!==null&&qu(a),s.blockedOn=p,!1;a.shift()}return!0}function a0(s,a,p){Ju(s)&&p.delete(a)}function hg(){Ku=!1,To!==null&&Ju(To)&&(To=null),Mo!==null&&Ju(Mo)&&(Mo=null),No!==null&&Ju(No)&&(No=null),el.forEach(a0),ka.forEach(a0)}function Tt(s,a){s.blockedOn===a&&(s.blockedOn=null,Ku||(Ku=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hg)))}function Ct(s){function a(S){return Tt(S,s)}if(0<wa.length){Tt(wa[0],s);for(var p=1;p<wa.length;p++){var y=wa[p];y.blockedOn===s&&(y.blockedOn=null)}}for(To!==null&&Tt(To,s),Mo!==null&&Tt(Mo,s),No!==null&&Tt(No,s),el.forEach(a),ka.forEach(a),p=0;p<Ao.length;p++)y=Ao[p],y.blockedOn===s&&(y.blockedOn=null);for(;0<Ao.length&&(p=Ao[0],p.blockedOn===null);)l0(p),p.blockedOn===null&&Ao.shift()}var tl=W.ReactCurrentBatchConfig,Gu=!0;function pg(s,a,p,y){var S=_t,E=tl.transition;tl.transition=null;try{_t=1,ad(s,a,p,y)}finally{_t=S,tl.transition=E}}function mg(s,a,p,y){var S=_t,E=tl.transition;tl.transition=null;try{_t=4,ad(s,a,p,y)}finally{_t=S,tl.transition=E}}function ad(s,a,p,y){if(Gu){var S=Yu(s,a,p,y);if(S===null)Cd(s,a,y,Qu,p),s0(s,y);else if(dg(S,s,a,p,y))y.stopPropagation();else if(s0(s,y),a&4&&-1<fg.indexOf(s)){for(;S!==null;){var E=Nn(S);if(E!==null&&od(E),E=Yu(s,a,p,y),E===null&&Cd(s,a,y,Qu,p),E===S)break;S=E}S!==null&&y.stopPropagation()}else Cd(s,a,y,null,p)}}var Qu=null;function Yu(s,a,p,y){if(Qu=null,s=Gf(y),s=Ei(s),s!==null)if(a=ps(s),a===null)s=null;else if(p=a.tag,p===13){if(s=td(a),s!==null)return s;s=null}else if(p===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Qu=s,null}function u0(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ag()){case nd:return 1;case Xp:return 4;case ma:case Zp:return 16;case rd:return 536870912;default:return 16}default:return 16}}var Wt=null,xa=null,bi=null;function ud(){if(bi)return bi;var s,a=xa,p=a.length,y,S="value"in Wt?Wt.value:Wt.textContent,E=S.length;for(s=0;s<p&&a[s]===S[s];s++);var L=p-s;for(y=1;y<=L&&a[p-y]===S[E-y];y++);return bi=S.slice(s,1<y?1-y:void 0)}function nl(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Bn(){return!0}function cd(){return!1}function tr(s){function a(p,y,S,E,L){this._reactName=p,this._targetInst=S,this.type=y,this.nativeEvent=E,this.target=L,this.currentTarget=null;for(var J in s)s.hasOwnProperty(J)&&(p=s[J],this[J]=p?p(E):E[J]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Bn:cd,this.isPropagationStopped=cd,this}return x(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Bn)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Bn)},persist:function(){},isPersistent:Bn}),a}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xu=tr(vs),rl=x({},vs,{view:0,detail:0}),c0=tr(rl),Un,fd,Tn,Zu=x({},rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Tn&&(Tn&&s.type==="mousemove"?(Un=s.screenX-Tn.screenX,fd=s.screenY-Tn.screenY):fd=Un=0,Tn=s),Un)},movementY:function(s){return"movementY"in s?s.movementY:fd}}),dd=tr(Zu),Io=x({},Zu,{dataTransfer:0}),ec=tr(Io),hd=x({},rl,{relatedTarget:0}),Rt=tr(hd),Po=x({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),pd=tr(Po),gg=x({},vs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),md=tr(gg),yg=x({},vs,{data:0}),f0=tr(yg),vg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function il(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=tc[s])?!!a[s]:!1}function gd(){return il}var h0=x({},rl,{key:function(s){if(s.key){var a=vg[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=nl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?d0[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gd,charCode:function(s){return s.type==="keypress"?nl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?nl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),p0=tr(h0),yd=x({},Zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nc=tr(yd),m0=x({},rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gd}),wg=tr(m0),vd=x({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),wd=tr(vd),kg=x({},Zu,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),g0=tr(kg),gr=[9,13,27,32],Sa=u&&"CompositionEvent"in window,Qi=null;u&&"documentMode"in document&&(Qi=document.documentMode);var y0=u&&"TextEvent"in window&&!Qi,kd=u&&(!Sa||Qi&&8<Qi&&11>=Qi),v0=" ",w0=!1;function k0(s,a){switch(s){case"keyup":return gr.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x0(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ol=!1;function sl(s,a){switch(s){case"compositionend":return x0(a);case"keypress":return a.which!==32?null:(w0=!0,v0);case"textInput":return s=a.data,s===v0&&w0?null:s;default:return null}}function xg(s,a){if(ol)return s==="compositionend"||!Sa&&k0(s,a)?(s=ud(),bi=xa=Wt=null,ol=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return kd&&a.locale!=="ko"?null:a.data;default:return null}}var Sg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rc(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Sg[s.type]:a==="textarea"}function xd(s,a,p,y){$p(y),a=dc(a,"onChange"),0<a.length&&(p=new Xu("onChange","change",null,p,y),s.push({event:p,listeners:a}))}var Nr=null,Oo=null;function bg(s){M0(s,0)}function ic(s){var a=tt(s);if(pt(a))return s}function _g(s,a){if(s==="change")return a}var ws=!1;if(u){var yr;if(u){var oc="oninput"in document;if(!oc){var S0=document.createElement("div");S0.setAttribute("oninput","return;"),oc=typeof S0.oninput=="function"}yr=oc}else yr=!1;ws=yr&&(!document.documentMode||9<document.documentMode)}function b0(){Nr&&(Nr.detachEvent("onpropertychange",_0),Oo=Nr=null)}function _0(s){if(s.propertyName==="value"&&ic(Oo)){var a=[];xd(a,Oo,s,Gf(s)),qp(bg,a)}}function Cg(s,a,p){s==="focusin"?(b0(),Nr=a,Oo=p,Nr.attachEvent("onpropertychange",_0)):s==="focusout"&&b0()}function Eg(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ic(Oo)}function ll(s,a){if(s==="click")return ic(a)}function ie(s,a){if(s==="input"||s==="change")return ic(a)}function me(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var de=typeof Object.is=="function"?Object.is:me;function Ie(s,a){if(de(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var p=Object.keys(s),y=Object.keys(a);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var S=p[y];if(!f.call(a,S)||!de(s[S],a[S]))return!1}return!0}function Qe(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function yt(s,a){var p=Qe(s);s=0;for(var y;p;){if(p.nodeType===3){if(y=s+p.textContent.length,s<=a&&y>=a)return{node:p,offset:a-s};s=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Qe(p)}}function tn(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?tn(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function At(){for(var s=window,a=ln();a instanceof s.HTMLIFrameElement;){try{var p=typeof a.contentWindow.location.href=="string"}catch{p=!1}if(p)s=a.contentWindow;else break;a=ln(s.document)}return a}function ba(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function Tg(s){var a=At(),p=s.focusedElem,y=s.selectionRange;if(a!==p&&p&&p.ownerDocument&&tn(p.ownerDocument.documentElement,p)){if(y!==null&&ba(p)){if(a=y.start,s=y.end,s===void 0&&(s=a),"selectionStart"in p)p.selectionStart=a,p.selectionEnd=Math.min(s,p.value.length);else if(s=(a=p.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var S=p.textContent.length,E=Math.min(y.start,S);y=y.end===void 0?E:Math.min(y.end,S),!s.extend&&E>y&&(S=y,y=E,E=S),S=yt(p,E);var L=yt(p,y);S&&L&&(s.rangeCount!==1||s.anchorNode!==S.node||s.anchorOffset!==S.offset||s.focusNode!==L.node||s.focusOffset!==L.offset)&&(a=a.createRange(),a.setStart(S.node,S.offset),s.removeAllRanges(),E>y?(s.addRange(a),s.extend(L.node,L.offset)):(a.setEnd(L.node,L.offset),s.addRange(a)))}}for(a=[],s=p;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<a.length;p++)s=a[p],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Ar=u&&"documentMode"in document&&11>=document.documentMode,Yi=null,Sd=null,_i=null,al=!1;function _a(s,a,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;al||Yi==null||Yi!==ln(y)||(y=Yi,"selectionStart"in y&&ba(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),_i&&Ie(_i,y)||(_i=y,y=dc(Sd,"onSelect"),0<y.length&&(a=new Xu("onSelect","select",null,a,p),s.push({event:a,listeners:y}),a.target=Yi)))}function vt(s,a){var p={};return p[s.toLowerCase()]=a.toLowerCase(),p["Webkit"+s]="webkit"+a,p["Moz"+s]="moz"+a,p}var ul={animationend:vt("Animation","AnimationEnd"),animationiteration:vt("Animation","AnimationIteration"),animationstart:vt("Animation","AnimationStart"),transitionend:vt("Transition","TransitionEnd")},sc={},Ca={};u&&(Ca=document.createElement("div").style,"AnimationEvent"in window||(delete ul.animationend.animation,delete ul.animationiteration.animation,delete ul.animationstart.animation),"TransitionEvent"in window||delete ul.transitionend.transition);function lc(s){if(sc[s])return sc[s];if(!ul[s])return s;var a=ul[s],p;for(p in a)if(a.hasOwnProperty(p)&&p in Ca)return sc[s]=a[p];return s}var C0=lc("animationend"),E0=lc("animationiteration"),Ea=lc("animationstart"),Xi=lc("transitionend"),Ta=new Map,bd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(s,a){Ta.set(s,a),o(a,[s])}for(var ac=0;ac<bd.length;ac++){var uc=bd[ac],cc=uc.toLowerCase(),T0=uc[0].toUpperCase()+uc.slice(1);ni(cc,"on"+T0)}ni(C0,"onAnimationEnd"),ni(E0,"onAnimationIteration"),ni(Ea,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(Xi,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ks=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zi));function Ma(s,a,p){var y=s.type||"unknown-event";s.currentTarget=p,og(y,a,void 0,s),s.currentTarget=null}function M0(s,a){a=(a&4)!==0;for(var p=0;p<s.length;p++){var y=s[p],S=y.event;y=y.listeners;e:{var E=void 0;if(a)for(var L=y.length-1;0<=L;L--){var J=y[L],Z=J.instance,he=J.currentTarget;if(J=J.listener,Z!==E&&S.isPropagationStopped())break e;Ma(S,J,he),E=Z}else for(L=0;L<y.length;L++){if(J=y[L],Z=J.instance,he=J.currentTarget,J=J.listener,Z!==E&&S.isPropagationStopped())break e;Ma(S,J,he),E=Z}}}if(Wu)throw s=ed,Wu=!1,ed=null,s}function zt(s,a){var p=a[mc];p===void 0&&(p=a[mc]=new Set);var y=s+"__bubble";p.has(y)||(fc(a,s,2,!1),p.add(y))}function _d(s,a,p){var y=0;a&&(y|=4),fc(p,s,y,a)}var xs="_reactListening"+Math.random().toString(36).slice(2);function Ro(s){if(!s[xs]){s[xs]=!0,r.forEach(function(p){p!=="selectionchange"&&(ks.has(p)||_d(p,!1,s),_d(p,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[xs]||(a[xs]=!0,_d("selectionchange",!1,a))}}function fc(s,a,p,y){switch(u0(a)){case 1:var S=pg;break;case 4:S=mg;break;default:S=ad}p=S.bind(null,a,p,s),S=void 0,!da||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(S=!0),y?S!==void 0?s.addEventListener(a,p,{capture:!0,passive:S}):s.addEventListener(a,p,!0):S!==void 0?s.addEventListener(a,p,{passive:S}):s.addEventListener(a,p,!1)}function Cd(s,a,p,y,S){var E=y;if((a&1)===0&&(a&2)===0&&y!==null)e:for(;;){if(y===null)return;var L=y.tag;if(L===3||L===4){var J=y.stateNode.containerInfo;if(J===S||J.nodeType===8&&J.parentNode===S)break;if(L===4)for(L=y.return;L!==null;){var Z=L.tag;if((Z===3||Z===4)&&(Z=L.stateNode.containerInfo,Z===S||Z.nodeType===8&&Z.parentNode===S))return;L=L.return}for(;J!==null;){if(L=Ei(J),L===null)return;if(Z=L.tag,Z===5||Z===6){y=E=L;continue e}J=J.parentNode}}y=y.return}qp(function(){var he=E,Se=Gf(p),Ce=[];e:{var xe=Ta.get(s);if(xe!==void 0){var Pe=Xu,Re=s;switch(s){case"keypress":if(nl(p)===0)break e;case"keydown":case"keyup":Pe=p0;break;case"focusin":Re="focus",Pe=Rt;break;case"focusout":Re="blur",Pe=Rt;break;case"beforeblur":case"afterblur":Pe=Rt;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=dd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=ec;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=wg;break;case C0:case E0:case Ea:Pe=pd;break;case Xi:Pe=wd;break;case"scroll":Pe=c0;break;case"wheel":Pe=g0;break;case"copy":case"cut":case"paste":Pe=md;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=nc}var De=(a&4)!==0,Yt=!De&&s==="scroll",ce=De?xe!==null?xe+"Capture":null:xe;De=[];for(var ne=he,fe;ne!==null;){fe=ne;var Ee=fe.stateNode;if(fe.tag===5&&Ee!==null&&(fe=Ee,ce!==null&&(Ee=fa(ne,ce),Ee!=null&&De.push(cl(ne,Ee,fe)))),Yt)break;ne=ne.return}0<De.length&&(xe=new Pe(xe,Re,null,p,Se),Ce.push({event:xe,listeners:De}))}}if((a&7)===0){e:{if(xe=s==="mouseover"||s==="pointerover",Pe=s==="mouseout"||s==="pointerout",xe&&p!==mr&&(Re=p.relatedTarget||p.fromElement)&&(Ei(Re)||Re[vr]))break e;if((Pe||xe)&&(xe=Se.window===Se?Se:(xe=Se.ownerDocument)?xe.defaultView||xe.parentWindow:window,Pe?(Re=p.relatedTarget||p.toElement,Pe=he,Re=Re?Ei(Re):null,Re!==null&&(Yt=ps(Re),Re!==Yt||Re.tag!==5&&Re.tag!==6)&&(Re=null)):(Pe=null,Re=he),Pe!==Re)){if(De=dd,Ee="onMouseLeave",ce="onMouseEnter",ne="mouse",(s==="pointerout"||s==="pointerover")&&(De=nc,Ee="onPointerLeave",ce="onPointerEnter",ne="pointer"),Yt=Pe==null?xe:tt(Pe),fe=Re==null?xe:tt(Re),xe=new De(Ee,ne+"leave",Pe,p,Se),xe.target=Yt,xe.relatedTarget=fe,Ee=null,Ei(Se)===he&&(De=new De(ce,ne+"enter",Re,p,Se),De.target=fe,De.relatedTarget=Yt,Ee=De),Yt=Ee,Pe&&Re)t:{for(De=Pe,ce=Re,ne=0,fe=De;fe;fe=fl(fe))ne++;for(fe=0,Ee=ce;Ee;Ee=fl(Ee))fe++;for(;0<ne-fe;)De=fl(De),ne--;for(;0<fe-ne;)ce=fl(ce),fe--;for(;ne--;){if(De===ce||ce!==null&&De===ce.alternate)break t;De=fl(De),ce=fl(ce)}De=null}else De=null;Pe!==null&&nn(Ce,xe,Pe,De,!1),Re!==null&&Yt!==null&&nn(Ce,Yt,Re,De,!0)}}e:{if(xe=he?tt(he):window,Pe=xe.nodeName&&xe.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&xe.type==="file")var ze=_g;else if(rc(xe))if(ws)ze=ie;else{ze=Eg;var We=Cg}else(Pe=xe.nodeName)&&Pe.toLowerCase()==="input"&&(xe.type==="checkbox"||xe.type==="radio")&&(ze=ll);if(ze&&(ze=ze(s,he))){xd(Ce,ze,p,Se);break e}We&&We(s,xe,he),s==="focusout"&&(We=xe._wrapperState)&&We.controlled&&xe.type==="number"&&Ji(xe,"number",xe.value)}switch(We=he?tt(he):window,s){case"focusin":(rc(We)||We.contentEditable==="true")&&(Yi=We,Sd=he,_i=null);break;case"focusout":_i=Sd=Yi=null;break;case"mousedown":al=!0;break;case"contextmenu":case"mouseup":case"dragend":al=!1,_a(Ce,p,Se);break;case"selectionchange":if(Ar)break;case"keydown":case"keyup":_a(Ce,p,Se)}var Be;if(Sa)e:{switch(s){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else ol?k0(s,p)&&(Ke="onCompositionEnd"):s==="keydown"&&p.keyCode===229&&(Ke="onCompositionStart");Ke&&(kd&&p.locale!=="ko"&&(ol||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&ol&&(Be=ud()):(Wt=Se,xa="value"in Wt?Wt.value:Wt.textContent,ol=!0)),We=dc(he,Ke),0<We.length&&(Ke=new f0(Ke,s,null,p,Se),Ce.push({event:Ke,listeners:We}),Be?Ke.data=Be:(Be=x0(p),Be!==null&&(Ke.data=Be)))),(Be=y0?sl(s,p):xg(s,p))&&(he=dc(he,"onBeforeInput"),0<he.length&&(Se=new f0("onBeforeInput","beforeinput",null,p,Se),Ce.push({event:Se,listeners:he}),Se.data=Be))}M0(Ce,a)})}function cl(s,a,p){return{instance:s,listener:a,currentTarget:p}}function dc(s,a){for(var p=a+"Capture",y=[];s!==null;){var S=s,E=S.stateNode;S.tag===5&&E!==null&&(S=E,E=fa(s,p),E!=null&&y.unshift(cl(s,E,S)),E=fa(s,a),E!=null&&y.push(cl(s,E,S))),s=s.return}return y}function fl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function nn(s,a,p,y,S){for(var E=a._reactName,L=[];p!==null&&p!==y;){var J=p,Z=J.alternate,he=J.stateNode;if(Z!==null&&Z===y)break;J.tag===5&&he!==null&&(J=he,S?(Z=fa(p,E),Z!=null&&L.unshift(cl(p,Z,J))):S||(Z=fa(p,E),Z!=null&&L.push(cl(p,Z,J)))),p=p.return}L.length!==0&&s.push({event:a,listeners:L})}var Mn=/\r\n?/g,Mg=/\u0000|\uFFFD/g;function N0(s){return(typeof s=="string"?s:""+s).replace(Mn,`
`).replace(Mg,"")}function Na(s,a,p){if(a=N0(a),N0(s)!==a&&p)throw Error(t(425))}function hc(){}var Aa=null,Ss=null;function Ia(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Do=typeof setTimeout=="function"?setTimeout:void 0,Pa=typeof clearTimeout=="function"?clearTimeout:void 0,dl=typeof Promise=="function"?Promise:void 0,pc=typeof queueMicrotask=="function"?queueMicrotask:typeof dl<"u"?function(s){return dl.resolve(null).then(s).catch(hl)}:Do;function hl(s){setTimeout(function(){throw s})}function Ed(s,a){var p=a,y=0;do{var S=p.nextSibling;if(s.removeChild(p),S&&S.nodeType===8)if(p=S.data,p==="/$"){if(y===0){s.removeChild(S),Ct(a);return}y--}else p!=="$"&&p!=="$?"&&p!=="$!"||y++;p=S}while(p);Ct(a)}function zo(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function A0(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var p=s.data;if(p==="$"||p==="$!"||p==="$?"){if(a===0)return s;a--}else p==="/$"&&a++}s=s.previousSibling}return null}var pl=Math.random().toString(36).slice(2),Ci="__reactFiber$"+pl,Lo="__reactProps$"+pl,vr="__reactContainer$"+pl,mc="__reactEvents$"+pl,j="__reactListeners$"+pl,ml="__reactHandles$"+pl;function Ei(s){var a=s[Ci];if(a)return a;for(var p=s.parentNode;p;){if(a=p[vr]||p[Ci]){if(p=a.alternate,a.child!==null||p!==null&&p.child!==null)for(s=A0(s);s!==null;){if(p=s[Ci])return p;s=A0(s)}return a}s=p,p=s.parentNode}return null}function Nn(s){return s=s[Ci]||s[vr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function tt(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function gc(s){return s[Lo]||null}var Td=[],gl=-1;function nr(s){return{current:s}}function Lt(s){0>gl||(s.current=Td[gl],Td[gl]=null,gl--)}function Dt(s,a){gl++,Td[gl]=s.current,s.current=a}var Fo={},An=nr(Fo),rr=nr(!1),Wn=Fo;function yl(s,a){var p=s.type.contextTypes;if(!p)return Fo;var y=s.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===a)return y.__reactInternalMemoizedMaskedChildContext;var S={},E;for(E in p)S[E]=a[E];return y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=S),S}function ir(s){return s=s.childContextTypes,s!=null}function yc(){Lt(rr),Lt(An)}function I0(s,a,p){if(An.current!==Fo)throw Error(t(168));Dt(An,a),Dt(rr,p)}function P0(s,a,p){var y=s.stateNode;if(a=a.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var S in y)if(!(S in a))throw Error(t(108,pe(s)||"Unknown",S));return x({},p,y)}function Ir(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Fo,Wn=An.current,Dt(An,s),Dt(rr,rr.current),!0}function O0(s,a,p){var y=s.stateNode;if(!y)throw Error(t(169));p?(s=P0(s,a,Wn),y.__reactInternalMemoizedMergedChildContext=s,Lt(rr),Lt(An),Dt(An,s)):Lt(rr),Dt(rr,p)}var eo=null,vc=!1,Md=!1;function R0(s){eo===null?eo=[s]:eo.push(s)}function bs(s){vc=!0,R0(s)}function Bo(){if(!Md&&eo!==null){Md=!0;var s=0,a=_t;try{var p=eo;for(_t=1;s<p.length;s++){var y=p[s];do y=y(!0);while(y!==null)}eo=null,vc=!1}catch(S){throw eo!==null&&(eo=eo.slice(s+1)),Qp(nd,Bo),S}finally{_t=a,Md=!1}}return null}var vl=[],In=0,wc=null,kc=0,Pr=[],Or=0,_s=null,Ti=1,Mi="";function Cs(s,a){vl[In++]=kc,vl[In++]=wc,wc=s,kc=a}function D0(s,a,p){Pr[Or++]=Ti,Pr[Or++]=Mi,Pr[Or++]=_s,_s=s;var y=Ti;s=Mi;var S=32-ti(y)-1;y&=~(1<<S),p+=1;var E=32-ti(a)+S;if(30<E){var L=S-S%5;E=(y&(1<<L)-1).toString(32),y>>=L,S-=L,Ti=1<<32-ti(a)+S|p<<S|y,Mi=E+s}else Ti=1<<E|p<<S|y,Mi=s}function Oa(s){s.return!==null&&(Cs(s,1),D0(s,1,0))}function Es(s){for(;s===wc;)wc=vl[--In],vl[In]=null,kc=vl[--In],vl[In]=null;for(;s===_s;)_s=Pr[--Or],Pr[Or]=null,Mi=Pr[--Or],Pr[Or]=null,Ti=Pr[--Or],Pr[Or]=null}var Pn=null,wr=null,Ft=!1,ri=null;function Ni(s,a){var p=Ur(5,null,null,0);p.elementType="DELETED",p.stateNode=a,p.return=s,a=s.deletions,a===null?(s.deletions=[p],s.flags|=16):a.push(p)}function xc(s,a){switch(s.tag){case 5:var p=s.type;return a=a.nodeType!==1||p.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,Pn=s,wr=zo(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,Pn=s,wr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(p=_s!==null?{id:Ti,overflow:Mi}:null,s.memoizedState={dehydrated:a,treeContext:p,retryLane:1073741824},p=Ur(18,null,null,0),p.stateNode=a,p.return=s,s.child=p,Pn=s,wr=null,!0):!1;default:return!1}}function to(s){return(s.mode&1)!==0&&(s.flags&128)===0}function or(s){if(Ft){var a=wr;if(a){var p=a;if(!xc(s,a)){if(to(s))throw Error(t(418));a=zo(p.nextSibling);var y=Pn;a&&xc(s,a)?Ni(y,p):(s.flags=s.flags&-4097|2,Ft=!1,Pn=s)}}else{if(to(s))throw Error(t(418));s.flags=s.flags&-4097|2,Ft=!1,Pn=s}}}function z0(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Pn=s}function Ra(s){if(s!==Pn)return!1;if(!Ft)return z0(s),Ft=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!Ia(s.type,s.memoizedProps)),a&&(a=wr)){if(to(s))throw Nd(),Error(t(418));for(;a;)Ni(s,a),a=zo(a.nextSibling)}if(z0(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var p=s.data;if(p==="/$"){if(a===0){wr=zo(s.nextSibling);break e}a--}else p!=="$"&&p!=="$!"&&p!=="$?"||a++}s=s.nextSibling}wr=null}}else wr=Pn?zo(s.stateNode.nextSibling):null;return!0}function Nd(){for(var s=wr;s;)s=zo(s.nextSibling)}function Ai(){wr=Pn=null,Ft=!1}function Ii(s){ri===null?ri=[s]:ri.push(s)}var L0=W.ReactCurrentBatchConfig;function Da(s,a,p){if(s=p.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(t(309));var y=p.stateNode}if(!y)throw Error(t(147,s));var S=y,E=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===E?a.ref:(a=function(L){var J=S.refs;L===null?delete J[E]:J[E]=L},a._stringRef=E,a)}if(typeof s!="string")throw Error(t(284));if(!p._owner)throw Error(t(290,s))}return s}function Ts(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function F0(s){var a=s._init;return a(s._payload)}function Ad(s){function a(ce,ne){if(s){var fe=ce.deletions;fe===null?(ce.deletions=[ne],ce.flags|=16):fe.push(ne)}}function p(ce,ne){if(!s)return null;for(;ne!==null;)a(ce,ne),ne=ne.sibling;return null}function y(ce,ne){for(ce=new Map;ne!==null;)ne.key!==null?ce.set(ne.key,ne):ce.set(ne.index,ne),ne=ne.sibling;return ce}function S(ce,ne){return ce=ci(ce,ne),ce.index=0,ce.sibling=null,ce}function E(ce,ne,fe){return ce.index=fe,s?(fe=ce.alternate,fe!==null?(fe=fe.index,fe<ne?(ce.flags|=2,ne):fe):(ce.flags|=2,ne)):(ce.flags|=1048576,ne)}function L(ce){return s&&ce.alternate===null&&(ce.flags|=2),ce}function J(ce,ne,fe,Ee){return ne===null||ne.tag!==6?(ne=gh(fe,ce.mode,Ee),ne.return=ce,ne):(ne=S(ne,fe),ne.return=ce,ne)}function Z(ce,ne,fe,Ee){var ze=fe.type;return ze===H?Se(ce,ne,fe.props.children,Ee,fe.key):ne!==null&&(ne.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===se&&F0(ze)===ne.type)?(Ee=S(ne,fe.props),Ee.ref=Da(ce,ne,fe),Ee.return=ce,Ee):(Ee=nf(fe.type,fe.key,fe.props,null,ce.mode,Ee),Ee.ref=Da(ce,ne,fe),Ee.return=ce,Ee)}function he(ce,ne,fe,Ee){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==fe.containerInfo||ne.stateNode.implementation!==fe.implementation?(ne=yh(fe,ce.mode,Ee),ne.return=ce,ne):(ne=S(ne,fe.children||[]),ne.return=ce,ne)}function Se(ce,ne,fe,Ee,ze){return ne===null||ne.tag!==7?(ne=Fs(fe,ce.mode,Ee,ze),ne.return=ce,ne):(ne=S(ne,fe),ne.return=ce,ne)}function Ce(ce,ne,fe){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=gh(""+ne,ce.mode,fe),ne.return=ce,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case B:return fe=nf(ne.type,ne.key,ne.props,null,ce.mode,fe),fe.ref=Da(ce,null,ne),fe.return=ce,fe;case z:return ne=yh(ne,ce.mode,fe),ne.return=ce,ne;case se:var Ee=ne._init;return Ce(ce,Ee(ne._payload),fe)}if(kn(ne)||_(ne))return ne=Fs(ne,ce.mode,fe,null),ne.return=ce,ne;Ts(ce,ne)}return null}function xe(ce,ne,fe,Ee){var ze=ne!==null?ne.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return ze!==null?null:J(ce,ne,""+fe,Ee);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case B:return fe.key===ze?Z(ce,ne,fe,Ee):null;case z:return fe.key===ze?he(ce,ne,fe,Ee):null;case se:return ze=fe._init,xe(ce,ne,ze(fe._payload),Ee)}if(kn(fe)||_(fe))return ze!==null?null:Se(ce,ne,fe,Ee,null);Ts(ce,fe)}return null}function Pe(ce,ne,fe,Ee,ze){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return ce=ce.get(fe)||null,J(ne,ce,""+Ee,ze);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case B:return ce=ce.get(Ee.key===null?fe:Ee.key)||null,Z(ne,ce,Ee,ze);case z:return ce=ce.get(Ee.key===null?fe:Ee.key)||null,he(ne,ce,Ee,ze);case se:var We=Ee._init;return Pe(ce,ne,fe,We(Ee._payload),ze)}if(kn(Ee)||_(Ee))return ce=ce.get(fe)||null,Se(ne,ce,Ee,ze,null);Ts(ne,Ee)}return null}function Re(ce,ne,fe,Ee){for(var ze=null,We=null,Be=ne,Ke=ne=0,yn=null;Be!==null&&Ke<fe.length;Ke++){Be.index>Ke?(yn=Be,Be=null):yn=Be.sibling;var wt=xe(ce,Be,fe[Ke],Ee);if(wt===null){Be===null&&(Be=yn);break}s&&Be&&wt.alternate===null&&a(ce,Be),ne=E(wt,ne,Ke),We===null?ze=wt:We.sibling=wt,We=wt,Be=yn}if(Ke===fe.length)return p(ce,Be),Ft&&Cs(ce,Ke),ze;if(Be===null){for(;Ke<fe.length;Ke++)Be=Ce(ce,fe[Ke],Ee),Be!==null&&(ne=E(Be,ne,Ke),We===null?ze=Be:We.sibling=Be,We=Be);return Ft&&Cs(ce,Ke),ze}for(Be=y(ce,Be);Ke<fe.length;Ke++)yn=Pe(Be,ce,Ke,fe[Ke],Ee),yn!==null&&(s&&yn.alternate!==null&&Be.delete(yn.key===null?Ke:yn.key),ne=E(yn,ne,Ke),We===null?ze=yn:We.sibling=yn,We=yn);return s&&Be.forEach(function(Yo){return a(ce,Yo)}),Ft&&Cs(ce,Ke),ze}function De(ce,ne,fe,Ee){var ze=_(fe);if(typeof ze!="function")throw Error(t(150));if(fe=ze.call(fe),fe==null)throw Error(t(151));for(var We=ze=null,Be=ne,Ke=ne=0,yn=null,wt=fe.next();Be!==null&&!wt.done;Ke++,wt=fe.next()){Be.index>Ke?(yn=Be,Be=null):yn=Be.sibling;var Yo=xe(ce,Be,wt.value,Ee);if(Yo===null){Be===null&&(Be=yn);break}s&&Be&&Yo.alternate===null&&a(ce,Be),ne=E(Yo,ne,Ke),We===null?ze=Yo:We.sibling=Yo,We=Yo,Be=yn}if(wt.done)return p(ce,Be),Ft&&Cs(ce,Ke),ze;if(Be===null){for(;!wt.done;Ke++,wt=fe.next())wt=Ce(ce,wt.value,Ee),wt!==null&&(ne=E(wt,ne,Ke),We===null?ze=wt:We.sibling=wt,We=wt);return Ft&&Cs(ce,Ke),ze}for(Be=y(ce,Be);!wt.done;Ke++,wt=fe.next())wt=Pe(Be,ce,Ke,wt.value,Ee),wt!==null&&(s&&wt.alternate!==null&&Be.delete(wt.key===null?Ke:wt.key),ne=E(wt,ne,Ke),We===null?ze=wt:We.sibling=wt,We=wt);return s&&Be.forEach(function(Gg){return a(ce,Gg)}),Ft&&Cs(ce,Ke),ze}function Yt(ce,ne,fe,Ee){if(typeof fe=="object"&&fe!==null&&fe.type===H&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case B:e:{for(var ze=fe.key,We=ne;We!==null;){if(We.key===ze){if(ze=fe.type,ze===H){if(We.tag===7){p(ce,We.sibling),ne=S(We,fe.props.children),ne.return=ce,ce=ne;break e}}else if(We.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===se&&F0(ze)===We.type){p(ce,We.sibling),ne=S(We,fe.props),ne.ref=Da(ce,We,fe),ne.return=ce,ce=ne;break e}p(ce,We);break}else a(ce,We);We=We.sibling}fe.type===H?(ne=Fs(fe.props.children,ce.mode,Ee,fe.key),ne.return=ce,ce=ne):(Ee=nf(fe.type,fe.key,fe.props,null,ce.mode,Ee),Ee.ref=Da(ce,ne,fe),Ee.return=ce,ce=Ee)}return L(ce);case z:e:{for(We=fe.key;ne!==null;){if(ne.key===We)if(ne.tag===4&&ne.stateNode.containerInfo===fe.containerInfo&&ne.stateNode.implementation===fe.implementation){p(ce,ne.sibling),ne=S(ne,fe.children||[]),ne.return=ce,ce=ne;break e}else{p(ce,ne);break}else a(ce,ne);ne=ne.sibling}ne=yh(fe,ce.mode,Ee),ne.return=ce,ce=ne}return L(ce);case se:return We=fe._init,Yt(ce,ne,We(fe._payload),Ee)}if(kn(fe))return Re(ce,ne,fe,Ee);if(_(fe))return De(ce,ne,fe,Ee);Ts(ce,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,ne!==null&&ne.tag===6?(p(ce,ne.sibling),ne=S(ne,fe),ne.return=ce,ce=ne):(p(ce,ne),ne=gh(fe,ce.mode,Ee),ne.return=ce,ce=ne),L(ce)):p(ce,ne)}return Yt}var Jt=Ad(!0),Sc=Ad(!1),za=nr(null),kr=null,Uo=null,wl=null;function no(){wl=Uo=kr=null}function bc(s){var a=za.current;Lt(za),s._currentValue=a}function xn(s,a,p){for(;s!==null;){var y=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,y!==null&&(y.childLanes|=a)):y!==null&&(y.childLanes&a)!==a&&(y.childLanes|=a),s===p)break;s=s.return}}function Wo(s,a){kr=s,wl=Uo=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&($n=!0),s.firstContext=null)}function Rr(s){var a=s._currentValue;if(wl!==s)if(s={context:s,memoizedValue:a,next:null},Uo===null){if(kr===null)throw Error(t(308));Uo=s,kr.dependencies={lanes:0,firstContext:s}}else Uo=Uo.next=s;return a}var Ms=null;function Id(s){Ms===null?Ms=[s]:Ms.push(s)}function _c(s,a,p,y){var S=a.interleaved;return S===null?(p.next=p,Id(a)):(p.next=S.next,S.next=p),a.interleaved=p,ro(s,y)}function ro(s,a){s.lanes|=a;var p=s.alternate;for(p!==null&&(p.lanes|=a),p=s,s=s.return;s!==null;)s.childLanes|=a,p=s.alternate,p!==null&&(p.childLanes|=a),p=s,s=s.return;return p.tag===3?p.stateNode:null}var Dr=!1;function Cc(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function B0(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function io(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function zr(s,a,p){var y=s.updateQueue;if(y===null)return null;if(y=y.shared,(mt&2)!==0){var S=y.pending;return S===null?a.next=a:(a.next=S.next,S.next=a),y.pending=a,ro(s,p)}return S=y.interleaved,S===null?(a.next=a,Id(y)):(a.next=S.next,S.next=a),y.interleaved=a,ro(s,p)}function Ec(s,a,p){if(a=a.updateQueue,a!==null&&(a=a.shared,(p&4194240)!==0)){var y=a.lanes;y&=s.pendingLanes,p|=y,a.lanes=p,va(s,p)}}function U0(s,a){var p=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var S=null,E=null;if(p=p.firstBaseUpdate,p!==null){do{var L={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};E===null?S=E=L:E=E.next=L,p=p.next}while(p!==null);E===null?S=E=a:E=E.next=a}else S=E=a;p={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:E,shared:y.shared,effects:y.effects},s.updateQueue=p;return}s=p.lastBaseUpdate,s===null?p.firstBaseUpdate=a:s.next=a,p.lastBaseUpdate=a}function kl(s,a,p,y){var S=s.updateQueue;Dr=!1;var E=S.firstBaseUpdate,L=S.lastBaseUpdate,J=S.shared.pending;if(J!==null){S.shared.pending=null;var Z=J,he=Z.next;Z.next=null,L===null?E=he:L.next=he,L=Z;var Se=s.alternate;Se!==null&&(Se=Se.updateQueue,J=Se.lastBaseUpdate,J!==L&&(J===null?Se.firstBaseUpdate=he:J.next=he,Se.lastBaseUpdate=Z))}if(E!==null){var Ce=S.baseState;L=0,Se=he=Z=null,J=E;do{var xe=J.lane,Pe=J.eventTime;if((y&xe)===xe){Se!==null&&(Se=Se.next={eventTime:Pe,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var Re=s,De=J;switch(xe=a,Pe=p,De.tag){case 1:if(Re=De.payload,typeof Re=="function"){Ce=Re.call(Pe,Ce,xe);break e}Ce=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=De.payload,xe=typeof Re=="function"?Re.call(Pe,Ce,xe):Re,xe==null)break e;Ce=x({},Ce,xe);break e;case 2:Dr=!0}}J.callback!==null&&J.lane!==0&&(s.flags|=64,xe=S.effects,xe===null?S.effects=[J]:xe.push(J))}else Pe={eventTime:Pe,lane:xe,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Se===null?(he=Se=Pe,Z=Ce):Se=Se.next=Pe,L|=xe;if(J=J.next,J===null){if(J=S.shared.pending,J===null)break;xe=J,J=xe.next,xe.next=null,S.lastBaseUpdate=xe,S.shared.pending=null}}while(!0);if(Se===null&&(Z=Ce),S.baseState=Z,S.firstBaseUpdate=he,S.lastBaseUpdate=Se,a=S.shared.interleaved,a!==null){S=a;do L|=S.lane,S=S.next;while(S!==a)}else E===null&&(S.shared.lanes=0);qo|=L,s.lanes=L,s.memoizedState=Ce}}function Pd(s,a,p){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var y=s[a],S=y.callback;if(S!==null){if(y.callback=null,y=p,typeof S!="function")throw Error(t(191,S));S.call(y)}}}var La={},Pi=nr(La),Fa=nr(La),xl=nr(La);function oo(s){if(s===La)throw Error(t(174));return s}function Od(s,a){switch(Dt(xl,a),Dt(Fa,s),Dt(Pi,La),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Te(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=Te(a,s)}Lt(Pi),Dt(Pi,a)}function jo(){Lt(Pi),Lt(Fa),Lt(xl)}function Rd(s){oo(xl.current);var a=oo(Pi.current),p=Te(a,s.type);a!==p&&(Dt(Fa,s),Dt(Pi,p))}function Tc(s){Fa.current===s&&(Lt(Pi),Lt(Fa))}var jt=nr(0);function Ns(s){for(var a=s;a!==null;){if(a.tag===13){var p=a.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Dd=[];function Mc(){for(var s=0;s<Dd.length;s++)Dd[s]._workInProgressVersionPrimary=null;Dd.length=0}var Ba=W.ReactCurrentDispatcher,zd=W.ReactCurrentBatchConfig,$o=0,Ht=null,Qt=null,fn=null,Sl=!1,Ua=!1,As=0,it=0;function On(){throw Error(t(321))}function Ld(s,a){if(a===null)return!1;for(var p=0;p<a.length&&p<s.length;p++)if(!de(s[p],a[p]))return!1;return!0}function Is(s,a,p,y,S,E){if($o=E,Ht=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Ba.current=s===null||s.memoizedState===null?Ag:Dc,s=p(y,S),Ua){E=0;do{if(Ua=!1,As=0,25<=E)throw Error(t(301));E+=1,fn=Qt=null,a.updateQueue=null,Ba.current=El,s=p(y,S)}while(Ua)}if(Ba.current=Rc,a=Qt!==null&&Qt.next!==null,$o=0,fn=Qt=Ht=null,Sl=!1,a)throw Error(t(300));return s}function Nc(){var s=As!==0;return As=0,s}function Oi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Ht.memoizedState=fn=s:fn=fn.next=s,fn}function Lr(){if(Qt===null){var s=Ht.alternate;s=s!==null?s.memoizedState:null}else s=Qt.next;var a=fn===null?Ht.memoizedState:fn.next;if(a!==null)fn=a,Qt=s;else{if(s===null)throw Error(t(310));Qt=s,s={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},fn===null?Ht.memoizedState=fn=s:fn=fn.next=s}return fn}function Rn(s,a){return typeof a=="function"?a(s):a}function Fd(s){var a=Lr(),p=a.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=s;var y=Qt,S=y.baseQueue,E=p.pending;if(E!==null){if(S!==null){var L=S.next;S.next=E.next,E.next=L}y.baseQueue=S=E,p.pending=null}if(S!==null){E=S.next,y=y.baseState;var J=L=null,Z=null,he=E;do{var Se=he.lane;if(($o&Se)===Se)Z!==null&&(Z=Z.next={lane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),y=he.hasEagerState?he.eagerState:s(y,he.action);else{var Ce={lane:Se,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null};Z===null?(J=Z=Ce,L=y):Z=Z.next=Ce,Ht.lanes|=Se,qo|=Se}he=he.next}while(he!==null&&he!==E);Z===null?L=y:Z.next=J,de(y,a.memoizedState)||($n=!0),a.memoizedState=y,a.baseState=L,a.baseQueue=Z,p.lastRenderedState=y}if(s=p.interleaved,s!==null){S=s;do E=S.lane,Ht.lanes|=E,qo|=E,S=S.next;while(S!==s)}else S===null&&(p.lanes=0);return[a.memoizedState,p.dispatch]}function bl(s){var a=Lr(),p=a.queue;if(p===null)throw Error(t(311));p.lastRenderedReducer=s;var y=p.dispatch,S=p.pending,E=a.memoizedState;if(S!==null){p.pending=null;var L=S=S.next;do E=s(E,L.action),L=L.next;while(L!==S);de(E,a.memoizedState)||($n=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),p.lastRenderedState=E}return[E,y]}function Ac(){}function Bd(s,a){var p=Ht,y=Lr(),S=a(),E=!de(y.memoizedState,S);if(E&&(y.memoizedState=S,$n=!0),y=y.queue,Ri(so.bind(null,p,y,s),[s]),y.getSnapshot!==a||E||fn!==null&&fn.memoizedState.tag&1){if(p.flags|=2048,_l(9,sr.bind(null,p,y,S,a),void 0,null),gn===null)throw Error(t(349));($o&30)!==0||Ud(p,a,S)}return S}function Ud(s,a,p){s.flags|=16384,s={getSnapshot:a,value:p},a=Ht.updateQueue,a===null?(a={lastEffect:null,stores:null},Ht.updateQueue=a,a.stores=[s]):(p=a.stores,p===null?a.stores=[s]:p.push(s))}function sr(s,a,p,y){a.value=p,a.getSnapshot=y,Ic(a)&&Wd(s)}function so(s,a,p){return p(function(){Ic(a)&&Wd(s)})}function Ic(s){var a=s.getSnapshot;s=s.value;try{var p=a();return!de(s,p)}catch{return!0}}function Wd(s){var a=ro(s,1);a!==null&&ui(a,s,1,-1)}function Wa(s){var a=Oi();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:s},a.queue=s,s=s.dispatch=q0.bind(null,Ht,s),[a.memoizedState,s]}function _l(s,a,p,y){return s={tag:s,create:a,destroy:p,deps:y,next:null},a=Ht.updateQueue,a===null?(a={lastEffect:null,stores:null},Ht.updateQueue=a,a.lastEffect=s.next=s):(p=a.lastEffect,p===null?a.lastEffect=s.next=s:(y=p.next,p.next=s,s.next=y,a.lastEffect=s)),s}function Pc(){return Lr().memoizedState}function ja(s,a,p,y){var S=Oi();Ht.flags|=s,S.memoizedState=_l(1|a,p,void 0,y===void 0?null:y)}function Cl(s,a,p,y){var S=Lr();y=y===void 0?null:y;var E=void 0;if(Qt!==null){var L=Qt.memoizedState;if(E=L.destroy,y!==null&&Ld(y,L.deps)){S.memoizedState=_l(a,p,E,y);return}}Ht.flags|=s,S.memoizedState=_l(1|a,p,E,y)}function Oc(s,a){return ja(8390656,8,s,a)}function Ri(s,a){return Cl(2048,8,s,a)}function W0(s,a){return Cl(4,2,s,a)}function lo(s,a){return Cl(4,4,s,a)}function jd(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function $d(s,a,p){return p=p!=null?p.concat([s]):null,Cl(4,4,jd.bind(null,a,s),p)}function $a(){}function j0(s,a){var p=Lr();a=a===void 0?null:a;var y=p.memoizedState;return y!==null&&a!==null&&Ld(a,y[1])?y[0]:(p.memoizedState=[s,a],s)}function $0(s,a){var p=Lr();a=a===void 0?null:a;var y=p.memoizedState;return y!==null&&a!==null&&Ld(a,y[1])?y[0]:(s=s(),p.memoizedState=[s,a],s)}function H0(s,a,p){return($o&21)===0?(s.baseState&&(s.baseState=!1,$n=!0),s.memoizedState=p):(de(p,a)||(p=id(),Ht.lanes|=p,qo|=p,s.baseState=!0),a)}function V0(s,a){var p=_t;_t=p!==0&&4>p?p:4,s(!0);var y=zd.transition;zd.transition={};try{s(!1),a()}finally{_t=p,zd.transition=y}}function Hd(){return Lr().memoizedState}function Ng(s,a,p){var y=Go(s);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},Vd(s))jn(a,p);else if(p=_c(s,a,p,y),p!==null){var S=qn();ui(p,s,y,S),ii(p,a,y)}}function q0(s,a,p){var y=Go(s),S={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(Vd(s))jn(a,S);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var L=a.lastRenderedState,J=E(L,p);if(S.hasEagerState=!0,S.eagerState=J,de(J,L)){var Z=a.interleaved;Z===null?(S.next=S,Id(a)):(S.next=Z.next,Z.next=S),a.interleaved=S;return}}catch{}finally{}p=_c(s,a,S,y),p!==null&&(S=qn(),ui(p,s,y,S),ii(p,a,y))}}function Vd(s){var a=s.alternate;return s===Ht||a!==null&&a===Ht}function jn(s,a){Ua=Sl=!0;var p=s.pending;p===null?a.next=a:(a.next=p.next,p.next=a),s.pending=a}function ii(s,a,p){if((p&4194240)!==0){var y=a.lanes;y&=s.pendingLanes,p|=y,a.lanes=p,va(s,p)}}var Rc={readContext:Rr,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useInsertionEffect:On,useLayoutEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useMutableSource:On,useSyncExternalStore:On,useId:On,unstable_isNewReconciler:!1},Ag={readContext:Rr,useCallback:function(s,a){return Oi().memoizedState=[s,a===void 0?null:a],s},useContext:Rr,useEffect:Oc,useImperativeHandle:function(s,a,p){return p=p!=null?p.concat([s]):null,ja(4194308,4,jd.bind(null,a,s),p)},useLayoutEffect:function(s,a){return ja(4194308,4,s,a)},useInsertionEffect:function(s,a){return ja(4,2,s,a)},useMemo:function(s,a){var p=Oi();return a=a===void 0?null:a,s=s(),p.memoizedState=[s,a],s},useReducer:function(s,a,p){var y=Oi();return a=p!==void 0?p(a):a,y.memoizedState=y.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},y.queue=s,s=s.dispatch=Ng.bind(null,Ht,s),[y.memoizedState,s]},useRef:function(s){var a=Oi();return s={current:s},a.memoizedState=s},useState:Wa,useDebugValue:$a,useDeferredValue:function(s){return Oi().memoizedState=s},useTransition:function(){var s=Wa(!1),a=s[0];return s=V0.bind(null,s[1]),Oi().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,p){var y=Ht,S=Oi();if(Ft){if(p===void 0)throw Error(t(407));p=p()}else{if(p=a(),gn===null)throw Error(t(349));($o&30)!==0||Ud(y,a,p)}S.memoizedState=p;var E={value:p,getSnapshot:a};return S.queue=E,Oc(so.bind(null,y,E,s),[s]),y.flags|=2048,_l(9,sr.bind(null,y,E,p,a),void 0,null),p},useId:function(){var s=Oi(),a=gn.identifierPrefix;if(Ft){var p=Mi,y=Ti;p=(y&~(1<<32-ti(y)-1)).toString(32)+p,a=":"+a+"R"+p,p=As++,0<p&&(a+="H"+p.toString(32)),a+=":"}else p=it++,a=":"+a+"r"+p.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},Dc={readContext:Rr,useCallback:j0,useContext:Rr,useEffect:Ri,useImperativeHandle:$d,useInsertionEffect:W0,useLayoutEffect:lo,useMemo:$0,useReducer:Fd,useRef:Pc,useState:function(){return Fd(Rn)},useDebugValue:$a,useDeferredValue:function(s){var a=Lr();return H0(a,Qt.memoizedState,s)},useTransition:function(){var s=Fd(Rn)[0],a=Lr().memoizedState;return[s,a]},useMutableSource:Ac,useSyncExternalStore:Bd,useId:Hd,unstable_isNewReconciler:!1},El={readContext:Rr,useCallback:j0,useContext:Rr,useEffect:Ri,useImperativeHandle:$d,useInsertionEffect:W0,useLayoutEffect:lo,useMemo:$0,useReducer:bl,useRef:Pc,useState:function(){return bl(Rn)},useDebugValue:$a,useDeferredValue:function(s){var a=Lr();return Qt===null?a.memoizedState=s:H0(a,Qt.memoizedState,s)},useTransition:function(){var s=bl(Rn)[0],a=Lr().memoizedState;return[s,a]},useMutableSource:Ac,useSyncExternalStore:Bd,useId:Hd,unstable_isNewReconciler:!1};function Fr(s,a){if(s&&s.defaultProps){a=x({},a),s=s.defaultProps;for(var p in s)a[p]===void 0&&(a[p]=s[p]);return a}return a}function zc(s,a,p,y){a=s.memoizedState,p=p(y,a),p=p==null?a:x({},a,p),s.memoizedState=p,s.lanes===0&&(s.updateQueue.baseState=p)}var Lc={isMounted:function(s){return(s=s._reactInternals)?ps(s)===s:!1},enqueueSetState:function(s,a,p){s=s._reactInternals;var y=qn(),S=Go(s),E=io(y,S);E.payload=a,p!=null&&(E.callback=p),a=zr(s,E,S),a!==null&&(ui(a,s,S,y),Ec(a,s,S))},enqueueReplaceState:function(s,a,p){s=s._reactInternals;var y=qn(),S=Go(s),E=io(y,S);E.tag=1,E.payload=a,p!=null&&(E.callback=p),a=zr(s,E,S),a!==null&&(ui(a,s,S,y),Ec(a,s,S))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var p=qn(),y=Go(s),S=io(p,y);S.tag=2,a!=null&&(S.callback=a),a=zr(s,S,y),a!==null&&(ui(a,s,y,p),Ec(a,s,y))}};function qd(s,a,p,y,S,E,L){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,E,L):a.prototype&&a.prototype.isPureReactComponent?!Ie(p,y)||!Ie(S,E):!0}function Ps(s,a,p){var y=!1,S=Fo,E=a.contextType;return typeof E=="object"&&E!==null?E=Rr(E):(S=ir(a)?Wn:An.current,y=a.contextTypes,E=(y=y!=null)?yl(s,S):Fo),a=new a(p,E),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Lc,s.stateNode=a,a._reactInternals=s,y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=S,s.__reactInternalMemoizedMaskedChildContext=E),a}function Tl(s,a,p,y){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(p,y),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(p,y),a.state!==s&&Lc.enqueueReplaceState(a,a.state,null)}function Kd(s,a,p,y){var S=s.stateNode;S.props=p,S.state=s.memoizedState,S.refs={},Cc(s);var E=a.contextType;typeof E=="object"&&E!==null?S.context=Rr(E):(E=ir(a)?Wn:An.current,S.context=yl(s,E)),S.state=s.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(zc(s,a,E,p),S.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(a=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),a!==S.state&&Lc.enqueueReplaceState(S,S.state,null),kl(s,p,S,y),S.state=s.memoizedState),typeof S.componentDidMount=="function"&&(s.flags|=4194308)}function Os(s,a){try{var p="",y=a;do p+=X(y),y=y.return;while(y);var S=p}catch(E){S=`
Error generating stack: `+E.message+`
`+E.stack}return{value:s,source:a,stack:S,digest:null}}function Fc(s,a,p){return{value:s,source:null,stack:p??null,digest:a??null}}function Ml(s,a){try{console.error(a.value)}catch(p){setTimeout(function(){throw p})}}var K0=typeof WeakMap=="function"?WeakMap:Map;function Ha(s,a,p){p=io(-1,p),p.tag=3,p.payload={element:null};var y=a.value;return p.callback=function(){Gc||(Gc=!0,uh=y),Ml(s,a)},p}function Bc(s,a,p){p=io(-1,p),p.tag=3;var y=s.type.getDerivedStateFromError;if(typeof y=="function"){var S=a.value;p.payload=function(){return y(S)},p.callback=function(){Ml(s,a)}}var E=s.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(p.callback=function(){Ml(s,a),typeof y!="function"&&(Ko===null?Ko=new Set([this]):Ko.add(this));var L=a.stack;this.componentDidCatch(a.value,{componentStack:L!==null?L:""})}),p}function Va(s,a,p){var y=s.pingCache;if(y===null){y=s.pingCache=new K0;var S=new Set;y.set(a,S)}else S=y.get(a),S===void 0&&(S=new Set,y.set(a,S));S.has(p)||(S.add(p),s=Fg.bind(null,s,a,p),a.then(s,s))}function J0(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function Jd(s,a,p,y,S){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(a=io(-1,1),a.tag=2,zr(p,a,1))),p.lanes|=1),s):(s.flags|=65536,s.lanes=S,s)}var Uc=W.ReactCurrentOwner,$n=!1;function Sn(s,a,p,y){a.child=s===null?Sc(a,null,p,y):Jt(a,s.child,p,y)}function G0(s,a,p,y,S){p=p.render;var E=a.ref;return Wo(a,S),y=Is(s,a,p,y,E,S),p=Nc(),s!==null&&!$n?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~S,oi(s,a,S)):(Ft&&p&&Oa(a),a.flags|=1,Sn(s,a,y,S),a.child)}function Gd(s,a,p,y,S){if(s===null){var E=p.type;return typeof E=="function"&&!tf(E)&&E.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(a.tag=15,a.type=E,Di(s,a,E,y,S)):(s=nf(p.type,null,y,a,a.mode,S),s.ref=a.ref,s.return=a,a.child=s)}if(E=s.child,(s.lanes&S)===0){var L=E.memoizedProps;if(p=p.compare,p=p!==null?p:Ie,p(L,y)&&s.ref===a.ref)return oi(s,a,S)}return a.flags|=1,s=ci(E,y),s.ref=a.ref,s.return=a,a.child=s}function Di(s,a,p,y,S){if(s!==null){var E=s.memoizedProps;if(Ie(E,y)&&s.ref===a.ref)if($n=!1,a.pendingProps=y=E,(s.lanes&S)!==0)(s.flags&131072)!==0&&($n=!0);else return a.lanes=s.lanes,oi(s,a,S)}return Xd(s,a,p,y,S)}function Qd(s,a,p){var y=a.pendingProps,S=y.children,E=s!==null?s.memoizedState:null;if(y.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(Pl,Sr),Sr|=p;else{if((p&1073741824)===0)return s=E!==null?E.baseLanes|p:p,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,Dt(Pl,Sr),Sr|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=E!==null?E.baseLanes:p,Dt(Pl,Sr),Sr|=y}else E!==null?(y=E.baseLanes|p,a.memoizedState=null):y=p,Dt(Pl,Sr),Sr|=y;return Sn(s,a,S,p),a.child}function Yd(s,a){var p=a.ref;(s===null&&p!==null||s!==null&&s.ref!==p)&&(a.flags|=512,a.flags|=2097152)}function Xd(s,a,p,y,S){var E=ir(p)?Wn:An.current;return E=yl(a,E),Wo(a,S),p=Is(s,a,p,y,E,S),y=Nc(),s!==null&&!$n?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~S,oi(s,a,S)):(Ft&&y&&Oa(a),a.flags|=1,Sn(s,a,p,S),a.child)}function Zd(s,a,p,y,S){if(ir(p)){var E=!0;Ir(a)}else E=!1;if(Wo(a,S),a.stateNode===null)jc(s,a),Ps(a,p,y),Kd(a,p,y,S),y=!0;else if(s===null){var L=a.stateNode,J=a.memoizedProps;L.props=J;var Z=L.context,he=p.contextType;typeof he=="object"&&he!==null?he=Rr(he):(he=ir(p)?Wn:An.current,he=yl(a,he));var Se=p.getDerivedStateFromProps,Ce=typeof Se=="function"||typeof L.getSnapshotBeforeUpdate=="function";Ce||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(J!==y||Z!==he)&&Tl(a,L,y,he),Dr=!1;var xe=a.memoizedState;L.state=xe,kl(a,y,L,S),Z=a.memoizedState,J!==y||xe!==Z||rr.current||Dr?(typeof Se=="function"&&(zc(a,p,Se,y),Z=a.memoizedState),(J=Dr||qd(a,p,J,y,xe,Z,he))?(Ce||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(a.flags|=4194308)):(typeof L.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=y,a.memoizedState=Z),L.props=y,L.state=Z,L.context=he,y=J):(typeof L.componentDidMount=="function"&&(a.flags|=4194308),y=!1)}else{L=a.stateNode,B0(s,a),J=a.memoizedProps,he=a.type===a.elementType?J:Fr(a.type,J),L.props=he,Ce=a.pendingProps,xe=L.context,Z=p.contextType,typeof Z=="object"&&Z!==null?Z=Rr(Z):(Z=ir(p)?Wn:An.current,Z=yl(a,Z));var Pe=p.getDerivedStateFromProps;(Se=typeof Pe=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(J!==Ce||xe!==Z)&&Tl(a,L,y,Z),Dr=!1,xe=a.memoizedState,L.state=xe,kl(a,y,L,S);var Re=a.memoizedState;J!==Ce||xe!==Re||rr.current||Dr?(typeof Pe=="function"&&(zc(a,p,Pe,y),Re=a.memoizedState),(he=Dr||qd(a,p,he,y,xe,Re,Z)||!1)?(Se||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(y,Re,Z),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(y,Re,Z)),typeof L.componentDidUpdate=="function"&&(a.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof L.componentDidUpdate!="function"||J===s.memoizedProps&&xe===s.memoizedState||(a.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||J===s.memoizedProps&&xe===s.memoizedState||(a.flags|=1024),a.memoizedProps=y,a.memoizedState=Re),L.props=y,L.state=Re,L.context=Z,y=he):(typeof L.componentDidUpdate!="function"||J===s.memoizedProps&&xe===s.memoizedState||(a.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||J===s.memoizedProps&&xe===s.memoizedState||(a.flags|=1024),y=!1)}return eh(s,a,p,y,E,S)}function eh(s,a,p,y,S,E){Yd(s,a);var L=(a.flags&128)!==0;if(!y&&!L)return S&&O0(a,p,!1),oi(s,a,E);y=a.stateNode,Uc.current=a;var J=L&&typeof p.getDerivedStateFromError!="function"?null:y.render();return a.flags|=1,s!==null&&L?(a.child=Jt(a,s.child,null,E),a.child=Jt(a,null,J,E)):Sn(s,a,J,E),a.memoizedState=y.state,S&&O0(a,p,!0),a.child}function Q0(s){var a=s.stateNode;a.pendingContext?I0(s,a.pendingContext,a.pendingContext!==a.context):a.context&&I0(s,a.context,!1),Od(s,a.containerInfo)}function zi(s,a,p,y,S){return Ai(),Ii(S),a.flags|=256,Sn(s,a,p,y),a.child}var qa={dehydrated:null,treeContext:null,retryLane:0};function Ka(s){return{baseLanes:s,cachePool:null,transitions:null}}function Wc(s,a,p){var y=a.pendingProps,S=jt.current,E=!1,L=(a.flags&128)!==0,J;if((J=L)||(J=s!==null&&s.memoizedState===null?!1:(S&2)!==0),J?(E=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(S|=1),Dt(jt,S&1),s===null)return or(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(L=y.children,s=y.fallback,E?(y=a.mode,E=a.child,L={mode:"hidden",children:L},(y&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=L):E=rf(L,y,0,null),s=Fs(s,y,p,null),E.return=a,s.return=a,E.sibling=s,a.child=E,a.child.memoizedState=Ka(p),a.memoizedState=qa,s):Nl(a,L));if(S=s.memoizedState,S!==null&&(J=S.dehydrated,J!==null))return He(s,a,L,y,J,S,p);if(E){E=y.fallback,L=a.mode,S=s.child,J=S.sibling;var Z={mode:"hidden",children:y.children};return(L&1)===0&&a.child!==S?(y=a.child,y.childLanes=0,y.pendingProps=Z,a.deletions=null):(y=ci(S,Z),y.subtreeFlags=S.subtreeFlags&14680064),J!==null?E=ci(J,E):(E=Fs(E,L,p,null),E.flags|=2),E.return=a,y.return=a,y.sibling=E,a.child=y,y=E,E=a.child,L=s.child.memoizedState,L=L===null?Ka(p):{baseLanes:L.baseLanes|p,cachePool:null,transitions:L.transitions},E.memoizedState=L,E.childLanes=s.childLanes&~p,a.memoizedState=qa,y}return E=s.child,s=E.sibling,y=ci(E,{mode:"visible",children:y.children}),(a.mode&1)===0&&(y.lanes=p),y.return=a,y.sibling=null,s!==null&&(p=a.deletions,p===null?(a.deletions=[s],a.flags|=16):p.push(s)),a.child=y,a.memoizedState=null,y}function Nl(s,a){return a=rf({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function ao(s,a,p,y){return y!==null&&Ii(y),Jt(a,s.child,null,p),s=Nl(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function He(s,a,p,y,S,E,L){if(p)return a.flags&256?(a.flags&=-257,y=Fc(Error(t(422))),ao(s,a,L,y)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(E=y.fallback,S=a.mode,y=rf({mode:"visible",children:y.children},S,0,null),E=Fs(E,S,L,null),E.flags|=2,y.return=a,E.return=a,y.sibling=E,a.child=y,(a.mode&1)!==0&&Jt(a,s.child,null,L),a.child.memoizedState=Ka(L),a.memoizedState=qa,E);if((a.mode&1)===0)return ao(s,a,L,null);if(S.data==="$!"){if(y=S.nextSibling&&S.nextSibling.dataset,y)var J=y.dgst;return y=J,E=Error(t(419)),y=Fc(E,y,void 0),ao(s,a,L,y)}if(J=(L&s.childLanes)!==0,$n||J){if(y=gn,y!==null){switch(L&-L){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(y.suspendedLanes|L))!==0?0:S,S!==0&&S!==E.retryLane&&(E.retryLane=S,ro(s,S),ui(y,s,S,-1))}return mh(),y=Fc(Error(t(421))),ao(s,a,L,y)}return S.data==="$?"?(a.flags|=128,a.child=s.child,a=Bg.bind(null,s),S._reactRetry=a,null):(s=E.treeContext,wr=zo(S.nextSibling),Pn=a,Ft=!0,ri=null,s!==null&&(Pr[Or++]=Ti,Pr[Or++]=Mi,Pr[Or++]=_s,Ti=s.id,Mi=s.overflow,_s=a),a=Nl(a,y.children),a.flags|=4096,a)}function Ja(s,a,p){s.lanes|=a;var y=s.alternate;y!==null&&(y.lanes|=a),xn(s.return,a,p)}function Ga(s,a,p,y,S){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:S}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=y,E.tail=p,E.tailMode=S)}function Ho(s,a,p){var y=a.pendingProps,S=y.revealOrder,E=y.tail;if(Sn(s,a,y.children,p),y=jt.current,(y&2)!==0)y=y&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ja(s,p,a);else if(s.tag===19)Ja(s,p,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}if(Dt(jt,y),(a.mode&1)===0)a.memoizedState=null;else switch(S){case"forwards":for(p=a.child,S=null;p!==null;)s=p.alternate,s!==null&&Ns(s)===null&&(S=p),p=p.sibling;p=S,p===null?(S=a.child,a.child=null):(S=p.sibling,p.sibling=null),Ga(a,!1,S,p,E);break;case"backwards":for(p=null,S=a.child,a.child=null;S!==null;){if(s=S.alternate,s!==null&&Ns(s)===null){a.child=S;break}s=S.sibling,S.sibling=p,p=S,S=s}Ga(a,!0,p,null,E);break;case"together":Ga(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function jc(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function oi(s,a,p){if(s!==null&&(a.dependencies=s.dependencies),qo|=a.lanes,(p&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,p=ci(s,s.pendingProps),a.child=p,p.return=a;s.sibling!==null;)s=s.sibling,p=p.sibling=ci(s,s.pendingProps),p.return=a;p.sibling=null}return a.child}function Y0(s,a,p){switch(a.tag){case 3:Q0(a),Ai();break;case 5:Rd(a);break;case 1:ir(a.type)&&Ir(a);break;case 4:Od(a,a.stateNode.containerInfo);break;case 10:var y=a.type._context,S=a.memoizedProps.value;Dt(za,y._currentValue),y._currentValue=S;break;case 13:if(y=a.memoizedState,y!==null)return y.dehydrated!==null?(Dt(jt,jt.current&1),a.flags|=128,null):(p&a.child.childLanes)!==0?Wc(s,a,p):(Dt(jt,jt.current&1),s=oi(s,a,p),s!==null?s.sibling:null);Dt(jt,jt.current&1);break;case 19:if(y=(p&a.childLanes)!==0,(s.flags&128)!==0){if(y)return Ho(s,a,p);a.flags|=128}if(S=a.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Dt(jt,jt.current),y)break;return null;case 22:case 23:return a.lanes=0,Qd(s,a,p)}return oi(s,a,p)}var bn,th,X0,nh;bn=function(s,a){for(var p=a.child;p!==null;){if(p.tag===5||p.tag===6)s.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===a)break;for(;p.sibling===null;){if(p.return===null||p.return===a)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},th=function(){},X0=function(s,a,p,y){var S=s.memoizedProps;if(S!==y){s=a.stateNode,oo(Pi.current);var E=null;switch(p){case"input":S=Ot(s,S),y=Ot(s,y),E=[];break;case"select":S=x({},S,{value:void 0}),y=x({},y,{value:void 0}),E=[];break;case"textarea":S=Nt(s,S),y=Nt(s,y),E=[];break;default:typeof S.onClick!="function"&&typeof y.onClick=="function"&&(s.onclick=hc)}cn(p,y);var L;p=null;for(he in S)if(!y.hasOwnProperty(he)&&S.hasOwnProperty(he)&&S[he]!=null)if(he==="style"){var J=S[he];for(L in J)J.hasOwnProperty(L)&&(p||(p={}),p[L]="")}else he!=="dangerouslySetInnerHTML"&&he!=="children"&&he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&he!=="autoFocus"&&(i.hasOwnProperty(he)?E||(E=[]):(E=E||[]).push(he,null));for(he in y){var Z=y[he];if(J=S!=null?S[he]:void 0,y.hasOwnProperty(he)&&Z!==J&&(Z!=null||J!=null))if(he==="style")if(J){for(L in J)!J.hasOwnProperty(L)||Z&&Z.hasOwnProperty(L)||(p||(p={}),p[L]="");for(L in Z)Z.hasOwnProperty(L)&&J[L]!==Z[L]&&(p||(p={}),p[L]=Z[L])}else p||(E||(E=[]),E.push(he,p)),p=Z;else he==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,J=J?J.__html:void 0,Z!=null&&J!==Z&&(E=E||[]).push(he,Z)):he==="children"?typeof Z!="string"&&typeof Z!="number"||(E=E||[]).push(he,""+Z):he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&(i.hasOwnProperty(he)?(Z!=null&&he==="onScroll"&&zt("scroll",s),E||J===Z||(E=[])):(E=E||[]).push(he,Z))}p&&(E=E||[]).push("style",p);var he=E;(a.updateQueue=he)&&(a.flags|=4)}},nh=function(s,a,p,y){p!==y&&(a.flags|=4)};function Qa(s,a){if(!Ft)switch(s.tailMode){case"hidden":a=s.tail;for(var p=null;a!==null;)a.alternate!==null&&(p=a),a=a.sibling;p===null?s.tail=null:p.sibling=null;break;case"collapsed":p=s.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function _n(s){var a=s.alternate!==null&&s.alternate.child===s.child,p=0,y=0;if(a)for(var S=s.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags&14680064,y|=S.flags&14680064,S.return=s,S=S.sibling;else for(S=s.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=s,S=S.sibling;return s.subtreeFlags|=y,s.childLanes=p,a}function Ig(s,a,p){var y=a.pendingProps;switch(Es(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _n(a),null;case 1:return ir(a.type)&&yc(),_n(a),null;case 3:return y=a.stateNode,jo(),Lt(rr),Lt(An),Mc(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(s===null||s.child===null)&&(Ra(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ri!==null&&(dh(ri),ri=null))),th(s,a),_n(a),null;case 5:Tc(a);var S=oo(xl.current);if(p=a.type,s!==null&&a.stateNode!=null)X0(s,a,p,y,S),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!y){if(a.stateNode===null)throw Error(t(166));return _n(a),null}if(s=oo(Pi.current),Ra(a)){y=a.stateNode,p=a.type;var E=a.memoizedProps;switch(y[Ci]=a,y[Lo]=E,s=(a.mode&1)!==0,p){case"dialog":zt("cancel",y),zt("close",y);break;case"iframe":case"object":case"embed":zt("load",y);break;case"video":case"audio":for(S=0;S<Zi.length;S++)zt(Zi[S],y);break;case"source":zt("error",y);break;case"img":case"image":case"link":zt("error",y),zt("load",y);break;case"details":zt("toggle",y);break;case"input":an(y,E),zt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!E.multiple},zt("invalid",y);break;case"textarea":hr(y,E),zt("invalid",y)}cn(p,E),S=null;for(var L in E)if(E.hasOwnProperty(L)){var J=E[L];L==="children"?typeof J=="string"?y.textContent!==J&&(E.suppressHydrationWarning!==!0&&Na(y.textContent,J,s),S=["children",J]):typeof J=="number"&&y.textContent!==""+J&&(E.suppressHydrationWarning!==!0&&Na(y.textContent,J,s),S=["children",""+J]):i.hasOwnProperty(L)&&J!=null&&L==="onScroll"&&zt("scroll",y)}switch(p){case"input":$e(y),en(y,E,!0);break;case"textarea":$e(y),pr(y);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(y.onclick=hc)}y=S,a.updateQueue=y,y!==null&&(a.flags|=4)}else{L=S.nodeType===9?S:S.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=ge(p)),s==="http://www.w3.org/1999/xhtml"?p==="script"?(s=L.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof y.is=="string"?s=L.createElement(p,{is:y.is}):(s=L.createElement(p),p==="select"&&(L=s,y.multiple?L.multiple=!0:y.size&&(L.size=y.size))):s=L.createElementNS(s,p),s[Ci]=a,s[Lo]=y,bn(s,a,!1,!1),a.stateNode=s;e:{switch(L=Mr(p,y),p){case"dialog":zt("cancel",s),zt("close",s),S=y;break;case"iframe":case"object":case"embed":zt("load",s),S=y;break;case"video":case"audio":for(S=0;S<Zi.length;S++)zt(Zi[S],s);S=y;break;case"source":zt("error",s),S=y;break;case"img":case"image":case"link":zt("error",s),zt("load",s),S=y;break;case"details":zt("toggle",s),S=y;break;case"input":an(s,y),S=Ot(s,y),zt("invalid",s);break;case"option":S=y;break;case"select":s._wrapperState={wasMultiple:!!y.multiple},S=x({},y,{value:void 0}),zt("invalid",s);break;case"textarea":hr(s,y),S=Nt(s,y),zt("invalid",s);break;default:S=y}cn(p,S),J=S;for(E in J)if(J.hasOwnProperty(E)){var Z=J[E];E==="style"?xi(s,Z):E==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&rt(s,Z)):E==="children"?typeof Z=="string"?(p!=="textarea"||Z!=="")&&ft(s,Z):typeof Z=="number"&&ft(s,""+Z):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(i.hasOwnProperty(E)?Z!=null&&E==="onScroll"&&zt("scroll",s):Z!=null&&I(s,E,Z,L))}switch(p){case"input":$e(s),en(s,y,!1);break;case"textarea":$e(s),pr(s);break;case"option":y.value!=null&&s.setAttribute("value",""+ke(y.value));break;case"select":s.multiple=!!y.multiple,E=y.value,E!=null?bt(s,!!y.multiple,E,!1):y.defaultValue!=null&&bt(s,!!y.multiple,y.defaultValue,!0);break;default:typeof S.onClick=="function"&&(s.onclick=hc)}switch(p){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return _n(a),null;case 6:if(s&&a.stateNode!=null)nh(s,a,s.memoizedProps,y);else{if(typeof y!="string"&&a.stateNode===null)throw Error(t(166));if(p=oo(xl.current),oo(Pi.current),Ra(a)){if(y=a.stateNode,p=a.memoizedProps,y[Ci]=a,(E=y.nodeValue!==p)&&(s=Pn,s!==null))switch(s.tag){case 3:Na(y.nodeValue,p,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Na(y.nodeValue,p,(s.mode&1)!==0)}E&&(a.flags|=4)}else y=(p.nodeType===9?p:p.ownerDocument).createTextNode(y),y[Ci]=a,a.stateNode=y}return _n(a),null;case 13:if(Lt(jt),y=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Ft&&wr!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Nd(),Ai(),a.flags|=98560,E=!1;else if(E=Ra(a),y!==null&&y.dehydrated!==null){if(s===null){if(!E)throw Error(t(318));if(E=a.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(t(317));E[Ci]=a}else Ai(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;_n(a),E=!1}else ri!==null&&(dh(ri),ri=null),E=!0;if(!E)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=p,a):(y=y!==null,y!==(s!==null&&s.memoizedState!==null)&&y&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(jt.current&1)!==0?dn===0&&(dn=3):mh())),a.updateQueue!==null&&(a.flags|=4),_n(a),null);case 4:return jo(),th(s,a),s===null&&Ro(a.stateNode.containerInfo),_n(a),null;case 10:return bc(a.type._context),_n(a),null;case 17:return ir(a.type)&&yc(),_n(a),null;case 19:if(Lt(jt),E=a.memoizedState,E===null)return _n(a),null;if(y=(a.flags&128)!==0,L=E.rendering,L===null)if(y)Qa(E,!1);else{if(dn!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(L=Ns(s),L!==null){for(a.flags|=128,Qa(E,!1),y=L.updateQueue,y!==null&&(a.updateQueue=y,a.flags|=4),a.subtreeFlags=0,y=p,p=a.child;p!==null;)E=p,s=y,E.flags&=14680066,L=E.alternate,L===null?(E.childLanes=0,E.lanes=s,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=L.childLanes,E.lanes=L.lanes,E.child=L.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=L.memoizedProps,E.memoizedState=L.memoizedState,E.updateQueue=L.updateQueue,E.type=L.type,s=L.dependencies,E.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),p=p.sibling;return Dt(jt,jt.current&1|2),a.child}s=s.sibling}E.tail!==null&&Ut()>Rs&&(a.flags|=128,y=!0,Qa(E,!1),a.lanes=4194304)}else{if(!y)if(s=Ns(L),s!==null){if(a.flags|=128,y=!0,p=s.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),Qa(E,!0),E.tail===null&&E.tailMode==="hidden"&&!L.alternate&&!Ft)return _n(a),null}else 2*Ut()-E.renderingStartTime>Rs&&p!==1073741824&&(a.flags|=128,y=!0,Qa(E,!1),a.lanes=4194304);E.isBackwards?(L.sibling=a.child,a.child=L):(p=E.last,p!==null?p.sibling=L:a.child=L,E.last=L)}return E.tail!==null?(a=E.tail,E.rendering=a,E.tail=a.sibling,E.renderingStartTime=Ut(),a.sibling=null,p=jt.current,Dt(jt,y?p&1|2:p&1),a):(_n(a),null);case 22:case 23:return ph(),y=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==y&&(a.flags|=8192),y&&(a.mode&1)!==0?(Sr&1073741824)!==0&&(_n(a),a.subtreeFlags&6&&(a.flags|=8192)):_n(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function Pg(s,a){switch(Es(a),a.tag){case 1:return ir(a.type)&&yc(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return jo(),Lt(rr),Lt(An),Mc(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return Tc(a),null;case 13:if(Lt(jt),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Ai()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Lt(jt),null;case 4:return jo(),null;case 10:return bc(a.type._context),null;case 22:case 23:return ph(),null;case 24:return null;default:return null}}var $c=!1,$t=!1,Hn=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Al(s,a){var p=s.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){Vt(s,a,y)}else p.current=null}function Ya(s,a,p){try{p()}catch(y){Vt(s,a,y)}}var Z0=!1;function Og(s,a){if(Aa=Gu,s=At(),ba(s)){if("selectionStart"in s)var p={start:s.selectionStart,end:s.selectionEnd};else e:{p=(p=s.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var S=y.anchorOffset,E=y.focusNode;y=y.focusOffset;try{p.nodeType,E.nodeType}catch{p=null;break e}var L=0,J=-1,Z=-1,he=0,Se=0,Ce=s,xe=null;t:for(;;){for(var Pe;Ce!==p||S!==0&&Ce.nodeType!==3||(J=L+S),Ce!==E||y!==0&&Ce.nodeType!==3||(Z=L+y),Ce.nodeType===3&&(L+=Ce.nodeValue.length),(Pe=Ce.firstChild)!==null;)xe=Ce,Ce=Pe;for(;;){if(Ce===s)break t;if(xe===p&&++he===S&&(J=L),xe===E&&++Se===y&&(Z=L),(Pe=Ce.nextSibling)!==null)break;Ce=xe,xe=Ce.parentNode}Ce=Pe}p=J===-1||Z===-1?null:{start:J,end:Z}}else p=null}p=p||{start:0,end:0}}else p=null;for(Ss={focusedElem:s,selectionRange:p},Gu=!1,Oe=a;Oe!==null;)if(a=Oe,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Oe=s;else for(;Oe!==null;){a=Oe;try{var Re=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Re!==null){var De=Re.memoizedProps,Yt=Re.memoizedState,ce=a.stateNode,ne=ce.getSnapshotBeforeUpdate(a.elementType===a.type?De:Fr(a.type,De),Yt);ce.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var fe=a.stateNode.containerInfo;fe.nodeType===1?fe.textContent="":fe.nodeType===9&&fe.documentElement&&fe.removeChild(fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ee){Vt(a,a.return,Ee)}if(s=a.sibling,s!==null){s.return=a.return,Oe=s;break}Oe=a.return}return Re=Z0,Z0=!1,Re}function uo(s,a,p){var y=a.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var S=y=y.next;do{if((S.tag&s)===s){var E=S.destroy;S.destroy=void 0,E!==void 0&&Ya(a,p,E)}S=S.next}while(S!==y)}}function Xa(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var p=a=a.next;do{if((p.tag&s)===s){var y=p.create;p.destroy=y()}p=p.next}while(p!==a)}}function Hc(s){var a=s.ref;if(a!==null){var p=s.stateNode;switch(s.tag){case 5:s=p;break;default:s=p}typeof a=="function"?a(s):a.current=s}}function em(s){var a=s.alternate;a!==null&&(s.alternate=null,em(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Ci],delete a[Lo],delete a[mc],delete a[j],delete a[ml])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function tm(s){return s.tag===5||s.tag===3||s.tag===4}function nm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||tm(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function rh(s,a,p){var y=s.tag;if(y===5||y===6)s=s.stateNode,a?p.nodeType===8?p.parentNode.insertBefore(s,a):p.insertBefore(s,a):(p.nodeType===8?(a=p.parentNode,a.insertBefore(s,p)):(a=p,a.appendChild(s)),p=p._reactRootContainer,p!=null||a.onclick!==null||(a.onclick=hc));else if(y!==4&&(s=s.child,s!==null))for(rh(s,a,p),s=s.sibling;s!==null;)rh(s,a,p),s=s.sibling}function Vc(s,a,p){var y=s.tag;if(y===5||y===6)s=s.stateNode,a?p.insertBefore(s,a):p.appendChild(s);else if(y!==4&&(s=s.child,s!==null))for(Vc(s,a,p),s=s.sibling;s!==null;)Vc(s,a,p),s=s.sibling}var mn=null,si=!1;function Li(s,a,p){for(p=p.child;p!==null;)ih(s,a,p),p=p.sibling}function ih(s,a,p){if(Si&&typeof Si.onCommitFiberUnmount=="function")try{Si.onCommitFiberUnmount($u,p)}catch{}switch(p.tag){case 5:$t||Al(p,a);case 6:var y=mn,S=si;mn=null,Li(s,a,p),mn=y,si=S,mn!==null&&(si?(s=mn,p=p.stateNode,s.nodeType===8?s.parentNode.removeChild(p):s.removeChild(p)):mn.removeChild(p.stateNode));break;case 18:mn!==null&&(si?(s=mn,p=p.stateNode,s.nodeType===8?Ed(s.parentNode,p):s.nodeType===1&&Ed(s,p),Ct(s)):Ed(mn,p.stateNode));break;case 4:y=mn,S=si,mn=p.stateNode.containerInfo,si=!0,Li(s,a,p),mn=y,si=S;break;case 0:case 11:case 14:case 15:if(!$t&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){S=y=y.next;do{var E=S,L=E.destroy;E=E.tag,L!==void 0&&((E&2)!==0||(E&4)!==0)&&Ya(p,a,L),S=S.next}while(S!==y)}Li(s,a,p);break;case 1:if(!$t&&(Al(p,a),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(J){Vt(p,a,J)}Li(s,a,p);break;case 21:Li(s,a,p);break;case 22:p.mode&1?($t=(y=$t)||p.memoizedState!==null,Li(s,a,p),$t=y):Li(s,a,p);break;default:Li(s,a,p)}}function Il(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var p=s.stateNode;p===null&&(p=s.stateNode=new Hn),a.forEach(function(y){var S=Ug.bind(null,s,y);p.has(y)||(p.add(y),y.then(S,S))})}}function xr(s,a){var p=a.deletions;if(p!==null)for(var y=0;y<p.length;y++){var S=p[y];try{var E=s,L=a,J=L;e:for(;J!==null;){switch(J.tag){case 5:mn=J.stateNode,si=!1;break e;case 3:mn=J.stateNode.containerInfo,si=!0;break e;case 4:mn=J.stateNode.containerInfo,si=!0;break e}J=J.return}if(mn===null)throw Error(t(160));ih(E,L,S),mn=null,si=!1;var Z=S.alternate;Z!==null&&(Z.return=null),S.return=null}catch(he){Vt(S,a,he)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)oh(a,s),a=a.sibling}function oh(s,a){var p=s.alternate,y=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(xr(a,s),li(s),y&4){try{uo(3,s,s.return),Xa(3,s)}catch(De){Vt(s,s.return,De)}try{uo(5,s,s.return)}catch(De){Vt(s,s.return,De)}}break;case 1:xr(a,s),li(s),y&512&&p!==null&&Al(p,p.return);break;case 5:if(xr(a,s),li(s),y&512&&p!==null&&Al(p,p.return),s.flags&32){var S=s.stateNode;try{ft(S,"")}catch(De){Vt(s,s.return,De)}}if(y&4&&(S=s.stateNode,S!=null)){var E=s.memoizedProps,L=p!==null?p.memoizedProps:E,J=s.type,Z=s.updateQueue;if(s.updateQueue=null,Z!==null)try{J==="input"&&E.type==="radio"&&E.name!=null&&Eo(S,E),Mr(J,L);var he=Mr(J,E);for(L=0;L<Z.length;L+=2){var Se=Z[L],Ce=Z[L+1];Se==="style"?xi(S,Ce):Se==="dangerouslySetInnerHTML"?rt(S,Ce):Se==="children"?ft(S,Ce):I(S,Se,Ce,he)}switch(J){case"input":En(S,E);break;case"textarea":fs(S,E);break;case"select":var xe=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!E.multiple;var Pe=E.value;Pe!=null?bt(S,!!E.multiple,Pe,!1):xe!==!!E.multiple&&(E.defaultValue!=null?bt(S,!!E.multiple,E.defaultValue,!0):bt(S,!!E.multiple,E.multiple?[]:"",!1))}S[Lo]=E}catch(De){Vt(s,s.return,De)}}break;case 6:if(xr(a,s),li(s),y&4){if(s.stateNode===null)throw Error(t(162));S=s.stateNode,E=s.memoizedProps;try{S.nodeValue=E}catch(De){Vt(s,s.return,De)}}break;case 3:if(xr(a,s),li(s),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Ct(a.containerInfo)}catch(De){Vt(s,s.return,De)}break;case 4:xr(a,s),li(s);break;case 13:xr(a,s),li(s),S=s.child,S.flags&8192&&(E=S.memoizedState!==null,S.stateNode.isHidden=E,!E||S.alternate!==null&&S.alternate.memoizedState!==null||(ah=Ut())),y&4&&Il(s);break;case 22:if(Se=p!==null&&p.memoizedState!==null,s.mode&1?($t=(he=$t)||Se,xr(a,s),$t=he):xr(a,s),li(s),y&8192){if(he=s.memoizedState!==null,(s.stateNode.isHidden=he)&&!Se&&(s.mode&1)!==0)for(Oe=s,Se=s.child;Se!==null;){for(Ce=Oe=Se;Oe!==null;){switch(xe=Oe,Pe=xe.child,xe.tag){case 0:case 11:case 14:case 15:uo(4,xe,xe.return);break;case 1:Al(xe,xe.return);var Re=xe.stateNode;if(typeof Re.componentWillUnmount=="function"){y=xe,p=xe.return;try{a=y,Re.props=a.memoizedProps,Re.state=a.memoizedState,Re.componentWillUnmount()}catch(De){Vt(y,p,De)}}break;case 5:Al(xe,xe.return);break;case 22:if(xe.memoizedState!==null){Vo(Ce);continue}}Pe!==null?(Pe.return=xe,Oe=Pe):Vo(Ce)}Se=Se.sibling}e:for(Se=null,Ce=s;;){if(Ce.tag===5){if(Se===null){Se=Ce;try{S=Ce.stateNode,he?(E=S.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(J=Ce.stateNode,Z=Ce.memoizedProps.style,L=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,J.style.display=er("display",L))}catch(De){Vt(s,s.return,De)}}}else if(Ce.tag===6){if(Se===null)try{Ce.stateNode.nodeValue=he?"":Ce.memoizedProps}catch(De){Vt(s,s.return,De)}}else if((Ce.tag!==22&&Ce.tag!==23||Ce.memoizedState===null||Ce===s)&&Ce.child!==null){Ce.child.return=Ce,Ce=Ce.child;continue}if(Ce===s)break e;for(;Ce.sibling===null;){if(Ce.return===null||Ce.return===s)break e;Se===Ce&&(Se=null),Ce=Ce.return}Se===Ce&&(Se=null),Ce.sibling.return=Ce.return,Ce=Ce.sibling}}break;case 19:xr(a,s),li(s),y&4&&Il(s);break;case 21:break;default:xr(a,s),li(s)}}function li(s){var a=s.flags;if(a&2){try{e:{for(var p=s.return;p!==null;){if(tm(p)){var y=p;break e}p=p.return}throw Error(t(160))}switch(y.tag){case 5:var S=y.stateNode;y.flags&32&&(ft(S,""),y.flags&=-33);var E=nm(s);Vc(s,E,S);break;case 3:case 4:var L=y.stateNode.containerInfo,J=nm(s);rh(s,J,L);break;default:throw Error(t(161))}}catch(Z){Vt(s,s.return,Z)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function qc(s,a,p){Oe=s,sh(s)}function sh(s,a,p){for(var y=(s.mode&1)!==0;Oe!==null;){var S=Oe,E=S.child;if(S.tag===22&&y){var L=S.memoizedState!==null||$c;if(!L){var J=S.alternate,Z=J!==null&&J.memoizedState!==null||$t;J=$c;var he=$t;if($c=L,($t=Z)&&!he)for(Oe=S;Oe!==null;)L=Oe,Z=L.child,L.tag===22&&L.memoizedState!==null?rm(S):Z!==null?(Z.return=L,Oe=Z):rm(S);for(;E!==null;)Oe=E,sh(E),E=E.sibling;Oe=S,$c=J,$t=he}ai(s)}else(S.subtreeFlags&8772)!==0&&E!==null?(E.return=S,Oe=E):ai(s)}}function ai(s){for(;Oe!==null;){var a=Oe;if((a.flags&8772)!==0){var p=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:$t||Xa(5,a);break;case 1:var y=a.stateNode;if(a.flags&4&&!$t)if(p===null)y.componentDidMount();else{var S=a.elementType===a.type?p.memoizedProps:Fr(a.type,p.memoizedProps);y.componentDidUpdate(S,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var E=a.updateQueue;E!==null&&Pd(a,E,y);break;case 3:var L=a.updateQueue;if(L!==null){if(p=null,a.child!==null)switch(a.child.tag){case 5:p=a.child.stateNode;break;case 1:p=a.child.stateNode}Pd(a,L,p)}break;case 5:var J=a.stateNode;if(p===null&&a.flags&4){p=J;var Z=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&p.focus();break;case"img":Z.src&&(p.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var he=a.alternate;if(he!==null){var Se=he.memoizedState;if(Se!==null){var Ce=Se.dehydrated;Ce!==null&&Ct(Ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}$t||a.flags&512&&Hc(a)}catch(xe){Vt(a,a.return,xe)}}if(a===s){Oe=null;break}if(p=a.sibling,p!==null){p.return=a.return,Oe=p;break}Oe=a.return}}function Vo(s){for(;Oe!==null;){var a=Oe;if(a===s){Oe=null;break}var p=a.sibling;if(p!==null){p.return=a.return,Oe=p;break}Oe=a.return}}function rm(s){for(;Oe!==null;){var a=Oe;try{switch(a.tag){case 0:case 11:case 15:var p=a.return;try{Xa(4,a)}catch(Z){Vt(a,p,Z)}break;case 1:var y=a.stateNode;if(typeof y.componentDidMount=="function"){var S=a.return;try{y.componentDidMount()}catch(Z){Vt(a,S,Z)}}var E=a.return;try{Hc(a)}catch(Z){Vt(a,E,Z)}break;case 5:var L=a.return;try{Hc(a)}catch(Z){Vt(a,L,Z)}}}catch(Z){Vt(a,a.return,Z)}if(a===s){Oe=null;break}var J=a.sibling;if(J!==null){J.return=a.return,Oe=J;break}Oe=a.return}}var im=Math.ceil,Kc=W.ReactCurrentDispatcher,lh=W.ReactCurrentOwner,Br=W.ReactCurrentBatchConfig,mt=0,gn=null,rn=null,Cn=0,Sr=0,Pl=nr(0),dn=0,Za=null,qo=0,eu=0,Jc=0,tu=null,lr=null,ah=0,Rs=1/0,co=null,Gc=!1,uh=null,Ko=null,Qc=!1,Jo=null,Vn=0,nu=0,ch=null,Yc=-1,ru=0;function qn(){return(mt&6)!==0?Ut():Yc!==-1?Yc:Yc=Ut()}function Go(s){return(s.mode&1)===0?1:(mt&2)!==0&&Cn!==0?Cn&-Cn:L0.transition!==null?(ru===0&&(ru=id()),ru):(s=_t,s!==0||(s=window.event,s=s===void 0?16:u0(s.type)),s)}function ui(s,a,p,y){if(50<nu)throw nu=0,ch=null,Error(t(185));ya(s,p,y),((mt&2)===0||s!==gn)&&(s===gn&&((mt&2)===0&&(eu|=p),dn===4&&Qo(s,Cn)),ar(s,y),p===1&&mt===0&&(a.mode&1)===0&&(Rs=Ut()+500,vc&&Bo()))}function ar(s,a){var p=s.callbackNode;cg(s,a);var y=ms(s,s===gn?Cn:0);if(y===0)p!==null&&Yp(p),s.callbackNode=null,s.callbackPriority=0;else if(a=y&-y,s.callbackPriority!==a){if(p!=null&&Yp(p),a===1)s.tag===0?bs(om.bind(null,s)):R0(om.bind(null,s)),pc(function(){(mt&6)===0&&Bo()}),p=null;else{switch(gs(y)){case 1:p=nd;break;case 4:p=Xp;break;case 16:p=ma;break;case 536870912:p=rd;break;default:p=ma}p=dm(p,Xc.bind(null,s))}s.callbackPriority=a,s.callbackNode=p}}function Xc(s,a){if(Yc=-1,ru=0,(mt&6)!==0)throw Error(t(327));var p=s.callbackNode;if(Ol()&&s.callbackNode!==p)return null;var y=ms(s,s===gn?Cn:0);if(y===0)return null;if((y&30)!==0||(y&s.expiredLanes)!==0||a)a=Zc(s,y);else{a=y;var S=mt;mt|=2;var E=lm();(gn!==s||Cn!==a)&&(co=null,Rs=Ut()+500,zs(s,a));do try{zg();break}catch(J){sm(s,J)}while(!0);no(),Kc.current=E,mt=S,rn!==null?a=0:(gn=null,Cn=0,a=dn)}if(a!==0){if(a===2&&(S=Vu(s),S!==0&&(y=S,a=fh(s,S))),a===1)throw p=Za,zs(s,0),Qo(s,y),ar(s,Ut()),p;if(a===6)Qo(s,y);else{if(S=s.current.alternate,(y&30)===0&&!Rg(S)&&(a=Zc(s,y),a===2&&(E=Vu(s),E!==0&&(y=E,a=fh(s,E))),a===1))throw p=Za,zs(s,0),Qo(s,y),ar(s,Ut()),p;switch(s.finishedWork=S,s.finishedLanes=y,a){case 0:case 1:throw Error(t(345));case 2:Ls(s,lr,co);break;case 3:if(Qo(s,y),(y&130023424)===y&&(a=ah+500-Ut(),10<a)){if(ms(s,0)!==0)break;if(S=s.suspendedLanes,(S&y)!==y){qn(),s.pingedLanes|=s.suspendedLanes&S;break}s.timeoutHandle=Do(Ls.bind(null,s,lr,co),a);break}Ls(s,lr,co);break;case 4:if(Qo(s,y),(y&4194240)===y)break;for(a=s.eventTimes,S=-1;0<y;){var L=31-ti(y);E=1<<L,L=a[L],L>S&&(S=L),y&=~E}if(y=S,y=Ut()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*im(y/1960))-y,10<y){s.timeoutHandle=Do(Ls.bind(null,s,lr,co),y);break}Ls(s,lr,co);break;case 5:Ls(s,lr,co);break;default:throw Error(t(329))}}}return ar(s,Ut()),s.callbackNode===p?Xc.bind(null,s):null}function fh(s,a){var p=tu;return s.current.memoizedState.isDehydrated&&(zs(s,a).flags|=256),s=Zc(s,a),s!==2&&(a=lr,lr=p,a!==null&&dh(a)),s}function dh(s){lr===null?lr=s:lr.push.apply(lr,s)}function Rg(s){for(var a=s;;){if(a.flags&16384){var p=a.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var S=p[y],E=S.getSnapshot;S=S.value;try{if(!de(E(),S))return!1}catch{return!1}}}if(p=a.child,a.subtreeFlags&16384&&p!==null)p.return=a,a=p;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Qo(s,a){for(a&=~Jc,a&=~eu,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var p=31-ti(a),y=1<<p;s[p]=-1,a&=~y}}function om(s){if((mt&6)!==0)throw Error(t(327));Ol();var a=ms(s,0);if((a&1)===0)return ar(s,Ut()),null;var p=Zc(s,a);if(s.tag!==0&&p===2){var y=Vu(s);y!==0&&(a=y,p=fh(s,y))}if(p===1)throw p=Za,zs(s,0),Qo(s,a),ar(s,Ut()),p;if(p===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,Ls(s,lr,co),ar(s,Ut()),null}function hh(s,a){var p=mt;mt|=1;try{return s(a)}finally{mt=p,mt===0&&(Rs=Ut()+500,vc&&Bo())}}function Ds(s){Jo!==null&&Jo.tag===0&&(mt&6)===0&&Ol();var a=mt;mt|=1;var p=Br.transition,y=_t;try{if(Br.transition=null,_t=1,s)return s()}finally{_t=y,Br.transition=p,mt=a,(mt&6)===0&&Bo()}}function ph(){Sr=Pl.current,Lt(Pl)}function zs(s,a){s.finishedWork=null,s.finishedLanes=0;var p=s.timeoutHandle;if(p!==-1&&(s.timeoutHandle=-1,Pa(p)),rn!==null)for(p=rn.return;p!==null;){var y=p;switch(Es(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&yc();break;case 3:jo(),Lt(rr),Lt(An),Mc();break;case 5:Tc(y);break;case 4:jo();break;case 13:Lt(jt);break;case 19:Lt(jt);break;case 10:bc(y.type._context);break;case 22:case 23:ph()}p=p.return}if(gn=s,rn=s=ci(s.current,null),Cn=Sr=a,dn=0,Za=null,Jc=eu=qo=0,lr=tu=null,Ms!==null){for(a=0;a<Ms.length;a++)if(p=Ms[a],y=p.interleaved,y!==null){p.interleaved=null;var S=y.next,E=p.pending;if(E!==null){var L=E.next;E.next=S,y.next=L}p.pending=y}Ms=null}return s}function sm(s,a){do{var p=rn;try{if(no(),Ba.current=Rc,Sl){for(var y=Ht.memoizedState;y!==null;){var S=y.queue;S!==null&&(S.pending=null),y=y.next}Sl=!1}if($o=0,fn=Qt=Ht=null,Ua=!1,As=0,lh.current=null,p===null||p.return===null){dn=1,Za=a,rn=null;break}e:{var E=s,L=p.return,J=p,Z=a;if(a=Cn,J.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var he=Z,Se=J,Ce=Se.tag;if((Se.mode&1)===0&&(Ce===0||Ce===11||Ce===15)){var xe=Se.alternate;xe?(Se.updateQueue=xe.updateQueue,Se.memoizedState=xe.memoizedState,Se.lanes=xe.lanes):(Se.updateQueue=null,Se.memoizedState=null)}var Pe=J0(L);if(Pe!==null){Pe.flags&=-257,Jd(Pe,L,J,E,a),Pe.mode&1&&Va(E,he,a),a=Pe,Z=he;var Re=a.updateQueue;if(Re===null){var De=new Set;De.add(Z),a.updateQueue=De}else Re.add(Z);break e}else{if((a&1)===0){Va(E,he,a),mh();break e}Z=Error(t(426))}}else if(Ft&&J.mode&1){var Yt=J0(L);if(Yt!==null){(Yt.flags&65536)===0&&(Yt.flags|=256),Jd(Yt,L,J,E,a),Ii(Os(Z,J));break e}}E=Z=Os(Z,J),dn!==4&&(dn=2),tu===null?tu=[E]:tu.push(E),E=L;do{switch(E.tag){case 3:E.flags|=65536,a&=-a,E.lanes|=a;var ce=Ha(E,Z,a);U0(E,ce);break e;case 1:J=Z;var ne=E.type,fe=E.stateNode;if((E.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(Ko===null||!Ko.has(fe)))){E.flags|=65536,a&=-a,E.lanes|=a;var Ee=Bc(E,J,a);U0(E,Ee);break e}}E=E.return}while(E!==null)}um(p)}catch(ze){a=ze,rn===p&&p!==null&&(rn=p=p.return);continue}break}while(!0)}function lm(){var s=Kc.current;return Kc.current=Rc,s===null?Rc:s}function mh(){(dn===0||dn===3||dn===2)&&(dn=4),gn===null||(qo&268435455)===0&&(eu&268435455)===0||Qo(gn,Cn)}function Zc(s,a){var p=mt;mt|=2;var y=lm();(gn!==s||Cn!==a)&&(co=null,zs(s,a));do try{Dg();break}catch(S){sm(s,S)}while(!0);if(no(),mt=p,Kc.current=y,rn!==null)throw Error(t(261));return gn=null,Cn=0,dn}function Dg(){for(;rn!==null;)am(rn)}function zg(){for(;rn!==null&&!ju();)am(rn)}function am(s){var a=fm(s.alternate,s,Sr);s.memoizedProps=s.pendingProps,a===null?um(s):rn=a,lh.current=null}function um(s){var a=s;do{var p=a.alternate;if(s=a.return,(a.flags&32768)===0){if(p=Ig(p,a,Sr),p!==null){rn=p;return}}else{if(p=Pg(p,a),p!==null){p.flags&=32767,rn=p;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{dn=6,rn=null;return}}if(a=a.sibling,a!==null){rn=a;return}rn=a=s}while(a!==null);dn===0&&(dn=5)}function Ls(s,a,p){var y=_t,S=Br.transition;try{Br.transition=null,_t=1,Lg(s,a,p,y)}finally{Br.transition=S,_t=y}return null}function Lg(s,a,p,y){do Ol();while(Jo!==null);if((mt&6)!==0)throw Error(t(327));p=s.finishedWork;var S=s.finishedLanes;if(p===null)return null;if(s.finishedWork=null,s.finishedLanes=0,p===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var E=p.lanes|p.childLanes;if(i0(s,E),s===gn&&(rn=gn=null,Cn=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Qc||(Qc=!0,dm(ma,function(){return Ol(),null})),E=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||E){E=Br.transition,Br.transition=null;var L=_t;_t=1;var J=mt;mt|=4,lh.current=null,Og(s,p),oh(p,s),Tg(Ss),Gu=!!Aa,Ss=Aa=null,s.current=p,qc(p),lg(),mt=J,_t=L,Br.transition=E}else s.current=p;if(Qc&&(Qc=!1,Jo=s,Vn=S),E=s.pendingLanes,E===0&&(Ko=null),ug(p.stateNode),ar(s,Ut()),a!==null)for(y=s.onRecoverableError,p=0;p<a.length;p++)S=a[p],y(S.value,{componentStack:S.stack,digest:S.digest});if(Gc)throw Gc=!1,s=uh,uh=null,s;return(Vn&1)!==0&&s.tag!==0&&Ol(),E=s.pendingLanes,(E&1)!==0?s===ch?nu++:(nu=0,ch=s):nu=0,Bo(),null}function Ol(){if(Jo!==null){var s=gs(Vn),a=Br.transition,p=_t;try{if(Br.transition=null,_t=16>s?16:s,Jo===null)var y=!1;else{if(s=Jo,Jo=null,Vn=0,(mt&6)!==0)throw Error(t(331));var S=mt;for(mt|=4,Oe=s.current;Oe!==null;){var E=Oe,L=E.child;if((Oe.flags&16)!==0){var J=E.deletions;if(J!==null){for(var Z=0;Z<J.length;Z++){var he=J[Z];for(Oe=he;Oe!==null;){var Se=Oe;switch(Se.tag){case 0:case 11:case 15:uo(8,Se,E)}var Ce=Se.child;if(Ce!==null)Ce.return=Se,Oe=Ce;else for(;Oe!==null;){Se=Oe;var xe=Se.sibling,Pe=Se.return;if(em(Se),Se===he){Oe=null;break}if(xe!==null){xe.return=Pe,Oe=xe;break}Oe=Pe}}}var Re=E.alternate;if(Re!==null){var De=Re.child;if(De!==null){Re.child=null;do{var Yt=De.sibling;De.sibling=null,De=Yt}while(De!==null)}}Oe=E}}if((E.subtreeFlags&2064)!==0&&L!==null)L.return=E,Oe=L;else e:for(;Oe!==null;){if(E=Oe,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:uo(9,E,E.return)}var ce=E.sibling;if(ce!==null){ce.return=E.return,Oe=ce;break e}Oe=E.return}}var ne=s.current;for(Oe=ne;Oe!==null;){L=Oe;var fe=L.child;if((L.subtreeFlags&2064)!==0&&fe!==null)fe.return=L,Oe=fe;else e:for(L=ne;Oe!==null;){if(J=Oe,(J.flags&2048)!==0)try{switch(J.tag){case 0:case 11:case 15:Xa(9,J)}}catch(ze){Vt(J,J.return,ze)}if(J===L){Oe=null;break e}var Ee=J.sibling;if(Ee!==null){Ee.return=J.return,Oe=Ee;break e}Oe=J.return}}if(mt=S,Bo(),Si&&typeof Si.onPostCommitFiberRoot=="function")try{Si.onPostCommitFiberRoot($u,s)}catch{}y=!0}return y}finally{_t=p,Br.transition=a}}return!1}function ef(s,a,p){a=Os(p,a),a=Ha(s,a,1),s=zr(s,a,1),a=qn(),s!==null&&(ya(s,1,a),ar(s,a))}function Vt(s,a,p){if(s.tag===3)ef(s,s,p);else for(;a!==null;){if(a.tag===3){ef(a,s,p);break}else if(a.tag===1){var y=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Ko===null||!Ko.has(y))){s=Os(p,s),s=Bc(a,s,1),a=zr(a,s,1),s=qn(),a!==null&&(ya(a,1,s),ar(a,s));break}}a=a.return}}function Fg(s,a,p){var y=s.pingCache;y!==null&&y.delete(a),a=qn(),s.pingedLanes|=s.suspendedLanes&p,gn===s&&(Cn&p)===p&&(dn===4||dn===3&&(Cn&130023424)===Cn&&500>Ut()-ah?zs(s,0):Jc|=p),ar(s,a)}function cm(s,a){a===0&&((s.mode&1)===0?a=1:(a=Hu,Hu<<=1,(Hu&130023424)===0&&(Hu=4194304)));var p=qn();s=ro(s,a),s!==null&&(ya(s,a,p),ar(s,p))}function Bg(s){var a=s.memoizedState,p=0;a!==null&&(p=a.retryLane),cm(s,p)}function Ug(s,a){var p=0;switch(s.tag){case 13:var y=s.stateNode,S=s.memoizedState;S!==null&&(p=S.retryLane);break;case 19:y=s.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(a),cm(s,p)}var fm;fm=function(s,a,p){if(s!==null)if(s.memoizedProps!==a.pendingProps||rr.current)$n=!0;else{if((s.lanes&p)===0&&(a.flags&128)===0)return $n=!1,Y0(s,a,p);$n=(s.flags&131072)!==0}else $n=!1,Ft&&(a.flags&1048576)!==0&&D0(a,kc,a.index);switch(a.lanes=0,a.tag){case 2:var y=a.type;jc(s,a),s=a.pendingProps;var S=yl(a,An.current);Wo(a,p),S=Is(null,a,y,s,S,p);var E=Nc();return a.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,ir(y)?(E=!0,Ir(a)):E=!1,a.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Cc(a),S.updater=Lc,a.stateNode=S,S._reactInternals=a,Kd(a,y,s,p),a=eh(null,a,y,!0,E,p)):(a.tag=0,Ft&&E&&Oa(a),Sn(null,a,S,p),a=a.child),a;case 16:y=a.elementType;e:{switch(jc(s,a),s=a.pendingProps,S=y._init,y=S(y._payload),a.type=y,S=a.tag=jg(y),s=Fr(y,s),S){case 0:a=Xd(null,a,y,s,p);break e;case 1:a=Zd(null,a,y,s,p);break e;case 11:a=G0(null,a,y,s,p);break e;case 14:a=Gd(null,a,y,Fr(y.type,s),p);break e}throw Error(t(306,y,""))}return a;case 0:return y=a.type,S=a.pendingProps,S=a.elementType===y?S:Fr(y,S),Xd(s,a,y,S,p);case 1:return y=a.type,S=a.pendingProps,S=a.elementType===y?S:Fr(y,S),Zd(s,a,y,S,p);case 3:e:{if(Q0(a),s===null)throw Error(t(387));y=a.pendingProps,E=a.memoizedState,S=E.element,B0(s,a),kl(a,y,null,p);var L=a.memoizedState;if(y=L.element,E.isDehydrated)if(E={element:y,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){S=Os(Error(t(423)),a),a=zi(s,a,y,p,S);break e}else if(y!==S){S=Os(Error(t(424)),a),a=zi(s,a,y,p,S);break e}else for(wr=zo(a.stateNode.containerInfo.firstChild),Pn=a,Ft=!0,ri=null,p=Sc(a,null,y,p),a.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Ai(),y===S){a=oi(s,a,p);break e}Sn(s,a,y,p)}a=a.child}return a;case 5:return Rd(a),s===null&&or(a),y=a.type,S=a.pendingProps,E=s!==null?s.memoizedProps:null,L=S.children,Ia(y,S)?L=null:E!==null&&Ia(y,E)&&(a.flags|=32),Yd(s,a),Sn(s,a,L,p),a.child;case 6:return s===null&&or(a),null;case 13:return Wc(s,a,p);case 4:return Od(a,a.stateNode.containerInfo),y=a.pendingProps,s===null?a.child=Jt(a,null,y,p):Sn(s,a,y,p),a.child;case 11:return y=a.type,S=a.pendingProps,S=a.elementType===y?S:Fr(y,S),G0(s,a,y,S,p);case 7:return Sn(s,a,a.pendingProps,p),a.child;case 8:return Sn(s,a,a.pendingProps.children,p),a.child;case 12:return Sn(s,a,a.pendingProps.children,p),a.child;case 10:e:{if(y=a.type._context,S=a.pendingProps,E=a.memoizedProps,L=S.value,Dt(za,y._currentValue),y._currentValue=L,E!==null)if(de(E.value,L)){if(E.children===S.children&&!rr.current){a=oi(s,a,p);break e}}else for(E=a.child,E!==null&&(E.return=a);E!==null;){var J=E.dependencies;if(J!==null){L=E.child;for(var Z=J.firstContext;Z!==null;){if(Z.context===y){if(E.tag===1){Z=io(-1,p&-p),Z.tag=2;var he=E.updateQueue;if(he!==null){he=he.shared;var Se=he.pending;Se===null?Z.next=Z:(Z.next=Se.next,Se.next=Z),he.pending=Z}}E.lanes|=p,Z=E.alternate,Z!==null&&(Z.lanes|=p),xn(E.return,p,a),J.lanes|=p;break}Z=Z.next}}else if(E.tag===10)L=E.type===a.type?null:E.child;else if(E.tag===18){if(L=E.return,L===null)throw Error(t(341));L.lanes|=p,J=L.alternate,J!==null&&(J.lanes|=p),xn(L,p,a),L=E.sibling}else L=E.child;if(L!==null)L.return=E;else for(L=E;L!==null;){if(L===a){L=null;break}if(E=L.sibling,E!==null){E.return=L.return,L=E;break}L=L.return}E=L}Sn(s,a,S.children,p),a=a.child}return a;case 9:return S=a.type,y=a.pendingProps.children,Wo(a,p),S=Rr(S),y=y(S),a.flags|=1,Sn(s,a,y,p),a.child;case 14:return y=a.type,S=Fr(y,a.pendingProps),S=Fr(y.type,S),Gd(s,a,y,S,p);case 15:return Di(s,a,a.type,a.pendingProps,p);case 17:return y=a.type,S=a.pendingProps,S=a.elementType===y?S:Fr(y,S),jc(s,a),a.tag=1,ir(y)?(s=!0,Ir(a)):s=!1,Wo(a,p),Ps(a,y,S),Kd(a,y,S,p),eh(null,a,y,!0,s,p);case 19:return Ho(s,a,p);case 22:return Qd(s,a,p)}throw Error(t(156,a.tag))};function dm(s,a){return Qp(s,a)}function Wg(s,a,p,y){this.tag=s,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(s,a,p,y){return new Wg(s,a,p,y)}function tf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function jg(s){if(typeof s=="function")return tf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===R)return 11;if(s===oe)return 14}return 2}function ci(s,a){var p=s.alternate;return p===null?(p=Ur(s.tag,a,s.key,s.mode),p.elementType=s.elementType,p.type=s.type,p.stateNode=s.stateNode,p.alternate=s,s.alternate=p):(p.pendingProps=a,p.type=s.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=s.flags&14680064,p.childLanes=s.childLanes,p.lanes=s.lanes,p.child=s.child,p.memoizedProps=s.memoizedProps,p.memoizedState=s.memoizedState,p.updateQueue=s.updateQueue,a=s.dependencies,p.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},p.sibling=s.sibling,p.index=s.index,p.ref=s.ref,p}function nf(s,a,p,y,S,E){var L=2;if(y=s,typeof s=="function")tf(s)&&(L=1);else if(typeof s=="string")L=5;else e:switch(s){case H:return Fs(p.children,S,E,a);case Y:L=8,S|=8;break;case q:return s=Ur(12,p,a,S|2),s.elementType=q,s.lanes=E,s;case Q:return s=Ur(13,p,a,S),s.elementType=Q,s.lanes=E,s;case ue:return s=Ur(19,p,a,S),s.elementType=ue,s.lanes=E,s;case ae:return rf(p,S,E,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case C:L=10;break e;case U:L=9;break e;case R:L=11;break e;case oe:L=14;break e;case se:L=16,y=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=Ur(L,p,a,S),a.elementType=s,a.type=y,a.lanes=E,a}function Fs(s,a,p,y){return s=Ur(7,s,y,a),s.lanes=p,s}function rf(s,a,p,y){return s=Ur(22,s,y,a),s.elementType=ae,s.lanes=p,s.stateNode={isHidden:!1},s}function gh(s,a,p){return s=Ur(6,s,null,a),s.lanes=p,s}function yh(s,a,p){return a=Ur(4,s.children!==null?s.children:[],s.key,a),a.lanes=p,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function $g(s,a,p,y,S){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ga(0),this.expirationTimes=ga(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ga(0),this.identifierPrefix=y,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function vh(s,a,p,y,S,E,L,J,Z){return s=new $g(s,a,p,J,Z),a===1?(a=1,E===!0&&(a|=8)):a=0,E=Ur(3,null,null,a),s.current=E,E.stateNode=s,E.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cc(E),s}function Hg(s,a,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:y==null?null:""+y,children:s,containerInfo:a,implementation:p}}function hm(s){if(!s)return Fo;s=s._reactInternals;e:{if(ps(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(ir(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var p=s.type;if(ir(p))return P0(s,p,a)}return a}function pm(s,a,p,y,S,E,L,J,Z){return s=vh(p,y,!0,s,S,E,L,J,Z),s.context=hm(null),p=s.current,y=qn(),S=Go(p),E=io(y,S),E.callback=a??null,zr(p,E,S),s.current.lanes=S,ya(s,S,y),ar(s,y),s}function of(s,a,p,y){var S=a.current,E=qn(),L=Go(S);return p=hm(p),a.context===null?a.context=p:a.pendingContext=p,a=io(E,L),a.payload={element:s},y=y===void 0?null:y,y!==null&&(a.callback=y),s=zr(S,a,L),s!==null&&(ui(s,S,L,E),Ec(s,S,L)),L}function sf(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function mm(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var p=s.retryLane;s.retryLane=p!==0&&p<a?p:a}}function wh(s,a){mm(s,a),(s=s.alternate)&&mm(s,a)}function Vg(){return null}var gm=typeof reportError=="function"?reportError:function(s){console.error(s)};function lf(s){this._internalRoot=s}iu.prototype.render=lf.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));of(s,a,null,null)},iu.prototype.unmount=lf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Ds(function(){of(null,s,null,null)}),a[vr]=null}};function iu(s){this._internalRoot=s}iu.prototype.unstable_scheduleHydration=function(s){if(s){var a=sd();s={blockedOn:null,target:s,priority:a};for(var p=0;p<Ao.length&&a!==0&&a<Ao[p].priority;p++);Ao.splice(p,0,s),p===0&&l0(s)}};function kh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function af(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function ym(){}function qg(s,a,p,y,S){if(S){if(typeof y=="function"){var E=y;y=function(){var he=sf(L);E.call(he)}}var L=pm(a,y,s,0,null,!1,!1,"",ym);return s._reactRootContainer=L,s[vr]=L.current,Ro(s.nodeType===8?s.parentNode:s),Ds(),L}for(;S=s.lastChild;)s.removeChild(S);if(typeof y=="function"){var J=y;y=function(){var he=sf(Z);J.call(he)}}var Z=vh(s,0,!1,null,null,!1,!1,"",ym);return s._reactRootContainer=Z,s[vr]=Z.current,Ro(s.nodeType===8?s.parentNode:s),Ds(function(){of(a,Z,p,y)}),Z}function Bs(s,a,p,y,S){var E=p._reactRootContainer;if(E){var L=E;if(typeof S=="function"){var J=S;S=function(){var Z=sf(L);J.call(Z)}}of(a,L,s,S)}else L=qg(p,a,s,S,y);return sf(L)}od=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var p=Zs(a.pendingLanes);p!==0&&(va(a,p|1),ar(a,Ut()),(mt&6)===0&&(Rs=Ut()+500,Bo()))}break;case 13:Ds(function(){var y=ro(s,1);if(y!==null){var S=qn();ui(y,s,1,S)}}),wh(s,1)}},qu=function(s){if(s.tag===13){var a=ro(s,134217728);if(a!==null){var p=qn();ui(a,s,134217728,p)}wh(s,134217728)}},o0=function(s){if(s.tag===13){var a=Go(s),p=ro(s,a);if(p!==null){var y=qn();ui(p,s,a,y)}wh(s,a)}},sd=function(){return _t},ld=function(s,a){var p=_t;try{return _t=s,a()}finally{_t=p}},Qf=function(s,a,p){switch(a){case"input":if(En(s,p),a=p.name,p.type==="radio"&&a!=null){for(p=s;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<p.length;a++){var y=p[a];if(y!==s&&y.form===s.form){var S=gc(y);if(!S)throw Error(t(90));pt(y),En(y,S)}}}break;case"textarea":fs(s,p);break;case"select":a=p.value,a!=null&&bt(s,!!p.multiple,a,!1)}},Vp=hh,Yf=Ds;var Kg={usingClientEntryPoint:!1,Events:[Nn,tt,gc,$p,Hp,hh]},ou={findFiberByHostInstance:Ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jg={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Jp(s),s===null?null:s.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||Vg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uf.isDisabled&&uf.supportsFiber)try{$u=uf.inject(Jg),Si=uf}catch{}}return Hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kg,Hr.createPortal=function(s,a){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kh(a))throw Error(t(200));return Hg(s,a,null,p)},Hr.createRoot=function(s,a){if(!kh(s))throw Error(t(299));var p=!1,y="",S=gm;return a!=null&&(a.unstable_strictMode===!0&&(p=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),a=vh(s,1,!1,null,null,p,!1,y,S),s[vr]=a.current,Ro(s.nodeType===8?s.parentNode:s),new lf(a)},Hr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Jp(a),s=s===null?null:s.stateNode,s},Hr.flushSync=function(s){return Ds(s)},Hr.hydrate=function(s,a,p){if(!af(a))throw Error(t(200));return Bs(null,s,a,!0,p)},Hr.hydrateRoot=function(s,a,p){if(!kh(s))throw Error(t(405));var y=p!=null&&p.hydratedSources||null,S=!1,E="",L=gm;if(p!=null&&(p.unstable_strictMode===!0&&(S=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onRecoverableError!==void 0&&(L=p.onRecoverableError)),a=pm(a,null,s,1,p??null,S,!1,E,L),s[vr]=a.current,Ro(s),y)for(s=0;s<y.length;s++)p=y[s],S=p._getVersion,S=S(p._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[p,S]:a.mutableSourceEagerHydrationData.push(p,S);return new iu(a)},Hr.render=function(s,a,p){if(!af(a))throw Error(t(200));return Bs(null,s,a,!1,p)},Hr.unmountComponentAtNode=function(s){if(!af(s))throw Error(t(40));return s._reactRootContainer?(Ds(function(){Bs(null,null,s,!1,function(){s._reactRootContainer=null,s[vr]=null})}),!0):!1},Hr.unstable_batchedUpdates=hh,Hr.unstable_renderSubtreeIntoContainer=function(s,a,p,y){if(!af(p))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Bs(s,a,p,!1,y)},Hr.version="18.3.1-next-f1338f8080-20240426",Hr}var vw;function TC(){if(vw)return uy.exports;vw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),uy.exports=EC(),uy.exports}var ww;function MC(){if(ww)return xm;ww=1;var n=TC();return xm.createRoot=n.createRoot,xm.hydrateRoot=n.hydrateRoot,xm}var NC=MC();const iv=Xe.createContext({});function AC(){const{dom:n,editor:e,setLoading:t,editorFactory:r}=Xe.useContext(iv),i=Xe.useRef(null);return Xe.useEffect(()=>{const o=i.current;if(!r||!o)return;n.current=o;const l=r(o);if(l)return t(!0),l.create().then(u=>{e.current=u}).finally(()=>{t(!1)}).catch(console.error),()=>{l.destroy()}},[n,e,r,t]),i}const IC=()=>{const n=AC();return P4.createElement("div",{"data-milkdown-root":!0,ref:n})},PC=({children:n})=>{const e=Xe.useRef(void 0),[t,r]=Xe.useState(void 0),i=Xe.useRef(void 0),[o,l]=Xe.useState(!0),u=Xe.useMemo(()=>({loading:o,dom:e,editor:i,setLoading:l,editorFactory:t,setEditorFactory:r}),[o,t]);return P4.createElement(iv.Provider,{value:u},n)};function OC(n,e=[]){const t=Xe.useContext(iv),r=Xe.useCallback(n,e);return Xe.useLayoutEffect(()=>{t.setEditorFactory(()=>r)},[t,r]),{loading:t.loading,get:()=>t.editor.current}}var dy={exports:{}},hy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw;function RC(){return kw||(kw=1,function(n){function e(se,ae){var K=se.length;se.push(ae);e:for(;0<K;){var _=K-1>>>1,x=se[_];if(0<i(x,ae))se[_]=ae,se[K]=x,K=_;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var ae=se[0],K=se.pop();if(K!==ae){se[0]=K;e:for(var _=0,x=se.length,M=x>>>1;_<M;){var D=2*(_+1)-1,N=se[D],te=D+1,X=se[te];if(0>i(N,K))te<x&&0>i(X,N)?(se[_]=X,se[te]=K,_=te):(se[_]=N,se[D]=K,_=D);else if(te<x&&0>i(X,K))se[_]=X,se[te]=K,_=te;else break e}}return ae}function i(se,ae){var K=se.sortIndex-ae.sortIndex;return K!==0?K:se.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var f=[],h=[],g=1,m=null,w=3,k=!1,b=!1,A=!1,O=!1,F=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function W(se){for(var ae=t(h);ae!==null;){if(ae.callback===null)r(h);else if(ae.startTime<=se)r(h),ae.sortIndex=ae.expirationTime,e(f,ae);else break;ae=t(h)}}function B(se){if(A=!1,W(se),!b)if(t(f)!==null)b=!0,z||(z=!0,R());else{var ae=t(h);ae!==null&&oe(B,ae.startTime-se)}}var z=!1,H=-1,Y=5,q=-1;function C(){return O?!0:!(n.unstable_now()-q<Y)}function U(){if(O=!1,z){var se=n.unstable_now();q=se;var ae=!0;try{e:{b=!1,A&&(A=!1,V(H),H=-1),k=!0;var K=w;try{t:{for(W(se),m=t(f);m!==null&&!(m.expirationTime>se&&C());){var _=m.callback;if(typeof _=="function"){m.callback=null,w=m.priorityLevel;var x=_(m.expirationTime<=se);if(se=n.unstable_now(),typeof x=="function"){m.callback=x,W(se),ae=!0;break t}m===t(f)&&r(f),W(se)}else r(f);m=t(f)}if(m!==null)ae=!0;else{var M=t(h);M!==null&&oe(B,M.startTime-se),ae=!1}}break e}finally{m=null,w=K,k=!1}ae=void 0}}finally{ae?R():z=!1}}}var R;if(typeof I=="function")R=function(){I(U)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ue=Q.port2;Q.port1.onmessage=U,R=function(){ue.postMessage(null)}}else R=function(){F(U,0)};function oe(se,ae){H=F(function(){se(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(se){switch(w){case 1:case 2:case 3:var ae=3;break;default:ae=w}var K=w;w=ae;try{return se()}finally{w=K}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(se,ae){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var K=w;w=se;try{return ae()}finally{w=K}},n.unstable_scheduleCallback=function(se,ae,K){var _=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?_+K:_):K=_,se){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=K+x,se={id:g++,callback:ae,priorityLevel:se,startTime:K,expirationTime:x,sortIndex:-1},K>_?(se.sortIndex=K,e(h,se),t(f)===null&&se===t(h)&&(A?(V(H),H=-1):A=!0,oe(B,K-_))):(se.sortIndex=x,e(f,se),b||k||(b=!0,z||(z=!0,R()))),se},n.unstable_shouldYield=C,n.unstable_wrapCallback=function(se){var ae=w;return function(){var K=w;w=ae;try{return se.apply(this,arguments)}finally{w=K}}}}(hy)),hy}var xw;function DC(){return xw||(xw=1,dy.exports=RC()),dy.exports}var py=DC();const op=Symbol(),zC=Symbol(),LC=typeof window>"u"||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent),O4=LC?Xe.useEffect:Xe.useLayoutEffect,FC=py.unstable_runWithPriority?n=>{try{py.unstable_runWithPriority(py.unstable_NormalPriority,n)}catch(e){if(e.message==="Not implemented.")n();else throw e}}:n=>n(),BC=n=>({value:t,children:r})=>{const i=Xe.useRef(t),o=Xe.useRef(0),[l,u]=Xe.useState(null);l&&(l(t),u(null));const f=Xe.useRef();if(!f.current){const h=new Set,g=(m,w)=>{o.current+=1;const k={n:o.current};w!=null&&w.suspense&&(k.n*=-1,k.p=new Promise(b=>{u(()=>A=>{k.v=A,delete k.p,b(A)})})),h.forEach(b=>b(k)),m()};f.current={[op]:{v:i,n:o,l:h,u:g}}}return O4(()=>{i.current=t,o.current+=1,FC(()=>{f.current[op].l.forEach(h=>{h({n:o.current,v:t})})})},[t]),Xe.createElement(n,{value:f.current},r)};function UC(n){const e=Xe.createContext({[op]:{v:{current:n},n:{current:-1},l:new Set,u:t=>t()}});return e[zC]=e.Provider,e.Provider=BC(e.Provider),delete e.Consumer,e}function WC(n,e){const t=Xe.useContext(n)[op],{v:{current:r},n:{current:i},l:o}=t,l=e(r),[u,f]=Xe.useReducer((h,g)=>{if(!g)return[r,l];if("p"in g)throw g.p;if(g.n===i)return Object.is(h[1],l)?h:[r,l];try{if("v"in g){if(Object.is(h[0],g.v))return h;const m=e(g.v);return Object.is(h[1],m)?h:[g.v,m]}}catch{}return[...h]},[r,l]);return Object.is(u[1],l)||f(),O4(()=>(o.add(f),()=>{o.delete(f)}),[o]),u[1]}function jC(n){const e=Xe.useContext(n)[op],{u:t}=e;return t}const $C=Symbol(),R4=Symbol(),Ch="a",D4="f",Sw="p",z4="c",L4="t",F4="h",Im="w",B4="o",U4="k";let HC=(n,e)=>new Proxy(n,e);const a2=Object.getPrototypeOf,bw=new WeakMap,VC=n=>n&&(bw.has(n)?bw.get(n):a2(n)===Object.prototype||a2(n)===Array.prototype),_w=n=>typeof n=="object"&&n!==null,qC=n=>Object.values(Object.getOwnPropertyDescriptors(n)).some(e=>!e.configurable&&!e.writable),KC=n=>{if(Array.isArray(n))return Array.from(n);const e=Object.getOwnPropertyDescriptors(n);return Object.values(e).forEach(t=>{t.configurable=!0}),Object.create(a2(n),e)},JC=(n,e)=>{const t={[D4]:e};let r=!1;const i=(u,f)=>{if(!r){let h=t[Ch].get(n);if(h||(h={},t[Ch].set(n,h)),u===Im)h[Im]=!0;else{let g=h[u];g||(g=new Set,h[u]=g),g.add(f)}}},o=()=>{r=!0,t[Ch].delete(n)},l={get(u,f){return f===R4?n:(i(U4,f),j4(Reflect.get(u,f),t[Ch],t[z4],t[L4]))},has(u,f){return f===$C?(o(),!0):(i(F4,f),Reflect.has(u,f))},getOwnPropertyDescriptor(u,f){return i(B4,f),Reflect.getOwnPropertyDescriptor(u,f)},ownKeys(u){return i(Im),Reflect.ownKeys(u)}};return e&&(l.set=l.deleteProperty=()=>!1),[l,t]},W4=n=>n[R4]||n,j4=(n,e,t,r)=>{if(!VC(n))return n;let i=r&&r.get(n);if(!i){const f=W4(n);qC(f)?i=[f,KC(f)]:i=[f],r==null||r.set(n,i)}const[o,l]=i;let u=t&&t.get(o);return(!u||u[1][D4]!==!!l)&&(u=JC(o,!!l),u[1][Sw]=HC(l||o,u[0]),t&&t.set(o,u)),u[1][Ch]=e,u[1][z4]=t,u[1][L4]=r,u[1][Sw]},GC=(n,e)=>{const t=Reflect.ownKeys(n),r=Reflect.ownKeys(e);return t.length!==r.length||t.some((i,o)=>i!==r[o])},u2=(n,e,t,r,i=Object.is)=>{if(i(n,e))return!1;if(!_w(n)||!_w(e))return!0;const o=t.get(W4(n));if(!o)return!0;if(r){if(r.get(n)===e)return!1;r.set(n,e)}let l=null;for(const u of o[F4]||[])if(l=Reflect.has(n,u)!==Reflect.has(e,u),l)return l;if(o[Im]===!0){if(l=GC(n,e),l)return l}else for(const u of o[B4]||[]){const f=!!Reflect.getOwnPropertyDescriptor(n,u),h=!!Reflect.getOwnPropertyDescriptor(e,u);if(l=f!==h,l)return l}for(const u of o[U4]||[])if(l=u2(n[u],e[u],t,r,i),l)return l;if(l===null)throw new Error("invalid used");return l},QC=n=>()=>{const[,t]=Xe.useReducer(h=>h+1,0),r=Xe.useMemo(()=>new WeakMap,[]),i=Xe.useRef(),o=Xe.useRef();Xe.useEffect(()=>{i.current!==o.current&&u2(i.current,o.current,r,new WeakMap)&&(i.current=o.current,t())});const l=Xe.useCallback(h=>(o.current=h,i.current&&i.current!==h&&!u2(i.current,h,r,new WeakMap)?i.current:(i.current=h,h)),[r]),u=n(l),f=Xe.useMemo(()=>new WeakMap,[]);return j4(u,r,f)},YC=(n,e)=>{const{stateContextName:t="StateContainer",updateContextName:r="UpdateContainer",concurrentMode:i}={},o=UC(void 0),l=Xe.createContext(void 0);o.displayName=t,l.displayName=r;const u=w=>{const[k,b]=n(w);return Xe.createElement(l.Provider,{value:b},Xe.createElement(o.Provider,{value:k},w.children))},f=w=>{const k=WC(o,w);return Xe.useDebugValue(k),k},h=QC(f),g=i?()=>{const w=jC(o),k=Xe.useContext(l);return Xe.useCallback((...b)=>{let A;return w(()=>{A=k(...b)}),A},[w,k])}:()=>Xe.useContext(l);return{Provider:u,useTrackedState:h,useTracked:()=>[h(),g()],useUpdate:g,useSelector:f}};var $4=Symbol.for("immer-nothing"),Cw=Symbol.for("immer-draftable"),vi=Symbol.for("immer-state");function go(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Rf=Object.getPrototypeOf;function Df(n){return!!n&&!!n[vi]}function Mu(n){var e;return n?H4(n)||Array.isArray(n)||!!n[Cw]||!!((e=n.constructor)!=null&&e[Cw])||O1(n)||R1(n):!1}var XC=Object.prototype.constructor.toString();function H4(n){if(!n||typeof n!="object")return!1;const e=Rf(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===XC}function h1(n,e){P1(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,r)=>e(r,t,n))}function P1(n){const e=n[vi];return e?e.type_:Array.isArray(n)?1:O1(n)?2:R1(n)?3:0}function c2(n,e){return P1(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function V4(n,e,t){const r=P1(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function ZC(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function O1(n){return n instanceof Map}function R1(n){return n instanceof Set}function uu(n){return n.copy_||n.base_}function f2(n,e){if(O1(n))return new Map(n);if(R1(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=H4(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[vi];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const l=i[o],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:n[l]})}return Object.create(Rf(n),r)}else{const r=Rf(n);if(r!==null&&t)return{...n};const i=Object.create(r);return Object.assign(i,n)}}function ov(n,e=!1){return D1(n)||Df(n)||!Mu(n)||(P1(n)>1&&(n.set=n.add=n.clear=n.delete=e8),Object.freeze(n),e&&Object.entries(n).forEach(([t,r])=>ov(r,!0))),n}function e8(){go(2)}function D1(n){return Object.isFrozen(n)}var t8={};function Nu(n){const e=t8[n];return e||go(0,n),e}var sp;function q4(){return sp}function n8(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ew(n,e){e&&(Nu("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function d2(n){h2(n),n.drafts_.forEach(r8),n.drafts_=null}function h2(n){n===sp&&(sp=n.parent_)}function Tw(n){return sp=n8(sp,n)}function r8(n){const e=n[vi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Mw(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[vi].modified_&&(d2(e),go(4)),Mu(n)&&(n=p1(e,n),e.parent_||m1(e,n)),e.patches_&&Nu("Patches").generateReplacementPatches_(t[vi].base_,n,e.patches_,e.inversePatches_)):n=p1(e,t,[]),d2(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==$4?n:void 0}function p1(n,e,t){if(D1(e))return e;const r=e[vi];if(!r)return h1(e,(i,o)=>Nw(n,r,e,i,o,t)),e;if(r.scope_!==n)return e;if(!r.modified_)return m1(n,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,l=!1;r.type_===3&&(o=new Set(i),i.clear(),l=!0),h1(o,(u,f)=>Nw(n,r,i,u,f,t,l)),m1(n,i,!1),t&&n.patches_&&Nu("Patches").generatePatches_(r,t,n.patches_,n.inversePatches_)}return r.copy_}function Nw(n,e,t,r,i,o,l){if(Df(i)){const u=o&&e&&e.type_!==3&&!c2(e.assigned_,r)?o.concat(r):void 0,f=p1(n,i,u);if(V4(t,r,f),Df(f))n.canAutoFreeze_=!1;else return}else l&&t.add(i);if(Mu(i)&&!D1(i)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;p1(n,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,r)&&m1(n,i)}}function m1(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&ov(e,t)}function i8(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:q4(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=sv;t&&(i=[r],o=lp);const{revoke:l,proxy:u}=Proxy.revocable(i,o);return r.draft_=u,r.revoke_=l,u}var sv={get(n,e){if(e===vi)return n;const t=uu(n);if(!c2(t,e))return o8(n,t,e);const r=t[e];return n.finalized_||!Mu(r)?r:r===my(n.base_,e)?(gy(n),n.copy_[e]=m2(r,n)):r},has(n,e){return e in uu(n)},ownKeys(n){return Reflect.ownKeys(uu(n))},set(n,e,t){const r=K4(uu(n),e);if(r!=null&&r.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const i=my(uu(n),e),o=i==null?void 0:i[vi];if(o&&o.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(ZC(t,i)&&(t!==void 0||c2(n.base_,e)))return!0;gy(n),p2(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return my(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,gy(n),p2(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=uu(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){go(11)},getPrototypeOf(n){return Rf(n.base_)},setPrototypeOf(){go(12)}},lp={};h1(sv,(n,e)=>{lp[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});lp.deleteProperty=function(n,e){return lp.set.call(this,n,e,void 0)};lp.set=function(n,e,t){return sv.set.call(this,n[0],e,t,n[0])};function my(n,e){const t=n[vi];return(t?uu(t):n)[e]}function o8(n,e,t){var i;const r=K4(e,t);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(n.draft_):void 0}function K4(n,e){if(!(e in n))return;let t=Rf(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=Rf(t)}}function p2(n){n.modified_||(n.modified_=!0,n.parent_&&p2(n.parent_))}function gy(n){n.copy_||(n.copy_=f2(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var s8=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const o=t;t=e;const l=this;return function(f=o,...h){return l.produce(f,g=>t.call(this,g,...h))}}typeof t!="function"&&go(6),r!==void 0&&typeof r!="function"&&go(7);let i;if(Mu(e)){const o=Tw(this),l=m2(e,void 0);let u=!0;try{i=t(l),u=!1}finally{u?d2(o):h2(o)}return Ew(o,r),Mw(i,o)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===$4&&(i=void 0),this.autoFreeze_&&ov(i,!0),r){const o=[],l=[];Nu("Patches").generateReplacementPatches_(e,i,o,l),r(o,l)}return i}else go(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(l,...u)=>this.produceWithPatches(l,f=>e(f,...u));let r,i;return[this.produce(e,t,(l,u)=>{r=l,i=u}),r,i]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){Mu(n)||go(8),Df(n)&&(n=l8(n));const e=Tw(this),t=m2(n,void 0);return t[vi].isManual_=!0,h2(e),t}finishDraft(n,e){const t=n&&n[vi];(!t||!t.isManual_)&&go(9);const{scope_:r}=t;return Ew(r,e),Mw(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}t>-1&&(e=e.slice(t+1));const r=Nu("Patches").applyPatches_;return Df(n)?r(n,e):this.produce(n,i=>r(i,e))}};function m2(n,e){const t=O1(n)?Nu("MapSet").proxyMap_(n,e):R1(n)?Nu("MapSet").proxySet_(n,e):i8(n,e);return(e?e.scope_:q4()).drafts_.push(t),t}function l8(n){return Df(n)||go(10,n),J4(n)}function J4(n){if(!Mu(n)||D1(n))return n;const e=n[vi];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=f2(n,e.scope_.immer_.useStrictShallowCopy_)}else t=f2(n,!0);return h1(t,(r,i)=>{V4(t,r,J4(i))}),e&&(e.finalized_=!1),t}var wi=new s8,a8=wi.produce;wi.produceWithPatches.bind(wi);wi.setAutoFreeze.bind(wi);wi.setUseStrictShallowCopy.bind(wi);wi.applyPatches.bind(wi);wi.createDraft.bind(wi);wi.finishDraft.bind(wi);var Eh={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var u8=Eh.exports,Aw;function c8(){return Aw||(Aw=1,function(n,e){(function(){var t,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",h=500,g="__lodash_placeholder__",m=1,w=2,k=4,b=1,A=2,O=1,F=2,V=4,I=8,W=16,B=32,z=64,H=128,Y=256,q=512,C=30,U="...",R=800,Q=16,ue=1,oe=2,se=3,ae=1/0,K=9007199254740991,_=17976931348623157e292,x=NaN,M=4294967295,D=M-1,N=M>>>1,te=[["ary",H],["bind",O],["bindKey",F],["curry",I],["curryRight",W],["flip",q],["partial",B],["partialRight",z],["rearg",Y]],X="[object Arguments]",re="[object Array]",pe="[object AsyncFunction]",ke="[object Boolean]",Me="[object Date]",je="[object DOMException]",$e="[object Error]",pt="[object Function]",ln="[object GeneratorFunction]",Ot="[object Map]",an="[object Number]",Eo="[object Null]",En="[object Object]",en="[object Promise]",Ji="[object Proxy]",kn="[object RegExp]",bt="[object Set]",Nt="[object String]",hr="[object Symbol]",fs="[object Undefined]",pr="[object WeakMap]",ge="[object WeakSet]",Te="[object ArrayBuffer]",Ue="[object DataView]",rt="[object Float32Array]",ft="[object Float64Array]",un="[object Int8Array]",ei="[object Int16Array]",er="[object Int32Array]",xi="[object Uint8Array]",Gi="[object Uint8ClampedArray]",cn="[object Uint16Array]",Mr="[object Uint32Array]",mr=/\b__p \+= '';/g,Gf=/\b(__p \+=) '' \+/g,Qf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ds=/&(?:amp|lt|gt|quot|#39);/g,hs=/[&<>"']/g,jp=RegExp(ds.source),$p=RegExp(hs.source),Hp=/<%-([\s\S]+?)%>/g,Vp=/<%([\s\S]+?)%>/g,Yf=/<%=([\s\S]+?)%>/g,Xf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qp=/^\w*$/,fa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,da=/[\\^$.*+?()[\]{}|]/g,ha=RegExp(da.source),Zf=/^\s+/,pa=/\s/,Uu=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Wu=/\{\n\/\* \[wrapped with (.+)\] \*/,ed=/,? & /,rg=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ig=/[()=,{}\[\]\/\s]/,og=/\\(\\)?/g,ps=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,td=/\w*$/,Kp=/^[-+]0x[0-9a-f]+$/i,sg=/^0b[01]+$/i,Jp=/^\[object .+?Constructor\]$/,Gp=/^0o[0-7]+$/i,Qp=/^(?:0|[1-9]\d*)$/,Yp=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ju=/($^)/,lg=/['\n\r\u2028\u2029\\]/g,Ut="\\ud800-\\udfff",ag="\\u0300-\\u036f",nd="\\ufe20-\\ufe2f",Xp="\\u20d0-\\u20ff",ma=ag+nd+Xp,Zp="\\u2700-\\u27bf",rd="a-z\\xdf-\\xf6\\xf8-\\xff",$u="\\xac\\xb1\\xd7\\xf7",Si="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ug="\\u2000-\\u206f",ti=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",e0="A-Z\\xc0-\\xd6\\xd8-\\xde",t0="\\ufe0e\\ufe0f",n0=$u+Si+ug+ti,Xs="[']",Hu="["+Ut+"]",Zs="["+n0+"]",ms="["+ma+"]",r0="\\d+",cg="["+Zp+"]",Vu="["+rd+"]",id="[^"+Ut+n0+r0+Zp+rd+e0+"]",ga="\\ud83c[\\udffb-\\udfff]",ya="(?:"+ms+"|"+ga+")",i0="[^"+Ut+"]",va="(?:\\ud83c[\\udde6-\\uddff]){2}",_t="[\\ud800-\\udbff][\\udc00-\\udfff]",gs="["+e0+"]",od="\\u200d",qu="(?:"+Vu+"|"+id+")",o0="(?:"+gs+"|"+id+")",sd="(?:"+Xs+"(?:d|ll|m|re|s|t|ve))?",ld="(?:"+Xs+"(?:D|LL|M|RE|S|T|VE))?",Ku=ya+"?",wa="["+t0+"]?",To="(?:"+od+"(?:"+[i0,va,_t].join("|")+")"+wa+Ku+")*",Mo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",No="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",el=wa+Ku+To,ka="(?:"+[cg,va,_t].join("|")+")"+el,Ao="(?:"+[i0+ms+"?",ms,va,_t,Hu].join("|")+")",fg=RegExp(Xs,"g"),s0=RegExp(ms,"g"),ys=RegExp(ga+"(?="+ga+")|"+Ao+el,"g"),dg=RegExp([gs+"?"+Vu+"+"+sd+"(?="+[Zs,gs,"$"].join("|")+")",o0+"+"+ld+"(?="+[Zs,gs+qu,"$"].join("|")+")",gs+"?"+qu+"+"+sd,gs+"+"+ld,No,Mo,r0,ka].join("|"),"g"),l0=RegExp("["+od+Ut+ma+t0+"]"),Ju=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,a0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],hg=-1,Tt={};Tt[rt]=Tt[ft]=Tt[un]=Tt[ei]=Tt[er]=Tt[xi]=Tt[Gi]=Tt[cn]=Tt[Mr]=!0,Tt[X]=Tt[re]=Tt[Te]=Tt[ke]=Tt[Ue]=Tt[Me]=Tt[$e]=Tt[pt]=Tt[Ot]=Tt[an]=Tt[En]=Tt[kn]=Tt[bt]=Tt[Nt]=Tt[pr]=!1;var Ct={};Ct[X]=Ct[re]=Ct[Te]=Ct[Ue]=Ct[ke]=Ct[Me]=Ct[rt]=Ct[ft]=Ct[un]=Ct[ei]=Ct[er]=Ct[Ot]=Ct[an]=Ct[En]=Ct[kn]=Ct[bt]=Ct[Nt]=Ct[hr]=Ct[xi]=Ct[Gi]=Ct[cn]=Ct[Mr]=!0,Ct[$e]=Ct[pt]=Ct[pr]=!1;var tl={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Gu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},pg={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},mg={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ad=parseFloat,Qu=parseInt,Yu=typeof Jl=="object"&&Jl&&Jl.Object===Object&&Jl,u0=typeof self=="object"&&self&&self.Object===Object&&self,Wt=Yu||u0||Function("return this")(),xa=e&&!e.nodeType&&e,bi=xa&&!0&&n&&!n.nodeType&&n,ud=bi&&bi.exports===xa,nl=ud&&Yu.process,Bn=function(){try{var ie=bi&&bi.require&&bi.require("util").types;return ie||nl&&nl.binding&&nl.binding("util")}catch{}}(),cd=Bn&&Bn.isArrayBuffer,tr=Bn&&Bn.isDate,vs=Bn&&Bn.isMap,Xu=Bn&&Bn.isRegExp,rl=Bn&&Bn.isSet,c0=Bn&&Bn.isTypedArray;function Un(ie,me,de){switch(de.length){case 0:return ie.call(me);case 1:return ie.call(me,de[0]);case 2:return ie.call(me,de[0],de[1]);case 3:return ie.call(me,de[0],de[1],de[2])}return ie.apply(me,de)}function fd(ie,me,de,Ie){for(var Qe=-1,yt=ie==null?0:ie.length;++Qe<yt;){var tn=ie[Qe];me(Ie,tn,de(tn),ie)}return Ie}function Tn(ie,me){for(var de=-1,Ie=ie==null?0:ie.length;++de<Ie&&me(ie[de],de,ie)!==!1;);return ie}function Zu(ie,me){for(var de=ie==null?0:ie.length;de--&&me(ie[de],de,ie)!==!1;);return ie}function dd(ie,me){for(var de=-1,Ie=ie==null?0:ie.length;++de<Ie;)if(!me(ie[de],de,ie))return!1;return!0}function Io(ie,me){for(var de=-1,Ie=ie==null?0:ie.length,Qe=0,yt=[];++de<Ie;){var tn=ie[de];me(tn,de,ie)&&(yt[Qe++]=tn)}return yt}function ec(ie,me){var de=ie==null?0:ie.length;return!!de&&il(ie,me,0)>-1}function hd(ie,me,de){for(var Ie=-1,Qe=ie==null?0:ie.length;++Ie<Qe;)if(de(me,ie[Ie]))return!0;return!1}function Rt(ie,me){for(var de=-1,Ie=ie==null?0:ie.length,Qe=Array(Ie);++de<Ie;)Qe[de]=me(ie[de],de,ie);return Qe}function Po(ie,me){for(var de=-1,Ie=me.length,Qe=ie.length;++de<Ie;)ie[Qe+de]=me[de];return ie}function pd(ie,me,de,Ie){var Qe=-1,yt=ie==null?0:ie.length;for(Ie&&yt&&(de=ie[++Qe]);++Qe<yt;)de=me(de,ie[Qe],Qe,ie);return de}function gg(ie,me,de,Ie){var Qe=ie==null?0:ie.length;for(Ie&&Qe&&(de=ie[--Qe]);Qe--;)de=me(de,ie[Qe],Qe,ie);return de}function md(ie,me){for(var de=-1,Ie=ie==null?0:ie.length;++de<Ie;)if(me(ie[de],de,ie))return!0;return!1}var yg=yd("length");function f0(ie){return ie.split("")}function vg(ie){return ie.match(rg)||[]}function d0(ie,me,de){var Ie;return de(ie,function(Qe,yt,tn){if(me(Qe,yt,tn))return Ie=yt,!1}),Ie}function tc(ie,me,de,Ie){for(var Qe=ie.length,yt=de+(Ie?1:-1);Ie?yt--:++yt<Qe;)if(me(ie[yt],yt,ie))return yt;return-1}function il(ie,me,de){return me===me?ic(ie,me,de):tc(ie,h0,de)}function gd(ie,me,de,Ie){for(var Qe=de-1,yt=ie.length;++Qe<yt;)if(Ie(ie[Qe],me))return Qe;return-1}function h0(ie){return ie!==ie}function p0(ie,me){var de=ie==null?0:ie.length;return de?vd(ie,me)/de:x}function yd(ie){return function(me){return me==null?t:me[ie]}}function nc(ie){return function(me){return ie==null?t:ie[me]}}function m0(ie,me,de,Ie,Qe){return Qe(ie,function(yt,tn,At){de=Ie?(Ie=!1,yt):me(de,yt,tn,At)}),de}function wg(ie,me){var de=ie.length;for(ie.sort(me);de--;)ie[de]=ie[de].value;return ie}function vd(ie,me){for(var de,Ie=-1,Qe=ie.length;++Ie<Qe;){var yt=me(ie[Ie]);yt!==t&&(de=de===t?yt:de+yt)}return de}function wd(ie,me){for(var de=-1,Ie=Array(ie);++de<ie;)Ie[de]=me(de);return Ie}function kg(ie,me){return Rt(me,function(de){return[de,ie[de]]})}function g0(ie){return ie&&ie.slice(0,oc(ie)+1).replace(Zf,"")}function gr(ie){return function(me){return ie(me)}}function Sa(ie,me){return Rt(me,function(de){return ie[de]})}function Qi(ie,me){return ie.has(me)}function y0(ie,me){for(var de=-1,Ie=ie.length;++de<Ie&&il(me,ie[de],0)>-1;);return de}function kd(ie,me){for(var de=ie.length;de--&&il(me,ie[de],0)>-1;);return de}function v0(ie,me){for(var de=ie.length,Ie=0;de--;)ie[de]===me&&++Ie;return Ie}var w0=nc(tl),k0=nc(Gu);function x0(ie){return"\\"+mg[ie]}function ol(ie,me){return ie==null?t:ie[me]}function sl(ie){return l0.test(ie)}function xg(ie){return Ju.test(ie)}function Sg(ie){for(var me,de=[];!(me=ie.next()).done;)de.push(me.value);return de}function rc(ie){var me=-1,de=Array(ie.size);return ie.forEach(function(Ie,Qe){de[++me]=[Qe,Ie]}),de}function xd(ie,me){return function(de){return ie(me(de))}}function Nr(ie,me){for(var de=-1,Ie=ie.length,Qe=0,yt=[];++de<Ie;){var tn=ie[de];(tn===me||tn===g)&&(ie[de]=g,yt[Qe++]=de)}return yt}function Oo(ie){var me=-1,de=Array(ie.size);return ie.forEach(function(Ie){de[++me]=Ie}),de}function bg(ie){var me=-1,de=Array(ie.size);return ie.forEach(function(Ie){de[++me]=[Ie,Ie]}),de}function ic(ie,me,de){for(var Ie=de-1,Qe=ie.length;++Ie<Qe;)if(ie[Ie]===me)return Ie;return-1}function _g(ie,me,de){for(var Ie=de+1;Ie--;)if(ie[Ie]===me)return Ie;return Ie}function ws(ie){return sl(ie)?b0(ie):yg(ie)}function yr(ie){return sl(ie)?_0(ie):f0(ie)}function oc(ie){for(var me=ie.length;me--&&pa.test(ie.charAt(me)););return me}var S0=nc(pg);function b0(ie){for(var me=ys.lastIndex=0;ys.test(ie);)++me;return me}function _0(ie){return ie.match(ys)||[]}function Cg(ie){return ie.match(dg)||[]}var Eg=function ie(me){me=me==null?Wt:ll.defaults(Wt.Object(),me,ll.pick(Wt,a0));var de=me.Array,Ie=me.Date,Qe=me.Error,yt=me.Function,tn=me.Math,At=me.Object,ba=me.RegExp,Tg=me.String,Ar=me.TypeError,Yi=de.prototype,Sd=yt.prototype,_i=At.prototype,al=me["__core-js_shared__"],_a=Sd.toString,vt=_i.hasOwnProperty,ul=0,sc=function(){var c=/[^.]+$/.exec(al&&al.keys&&al.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Ca=_i.toString,lc=_a.call(At),C0=Wt._,E0=ba("^"+_a.call(vt).replace(da,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ea=ud?me.Buffer:t,Xi=me.Symbol,Ta=me.Uint8Array,bd=Ea?Ea.allocUnsafe:t,ni=xd(At.getPrototypeOf,At),ac=At.create,uc=_i.propertyIsEnumerable,cc=Yi.splice,T0=Xi?Xi.isConcatSpreadable:t,Zi=Xi?Xi.iterator:t,ks=Xi?Xi.toStringTag:t,Ma=function(){try{var c=Ho(At,"defineProperty");return c({},"",{}),c}catch{}}(),M0=me.clearTimeout!==Wt.clearTimeout&&me.clearTimeout,zt=Ie&&Ie.now!==Wt.Date.now&&Ie.now,_d=me.setTimeout!==Wt.setTimeout&&me.setTimeout,xs=tn.ceil,Ro=tn.floor,fc=At.getOwnPropertySymbols,Cd=Ea?Ea.isBuffer:t,cl=me.isFinite,dc=Yi.join,fl=xd(At.keys,At),nn=tn.max,Mn=tn.min,Mg=Ie.now,N0=me.parseInt,Na=tn.random,hc=Yi.reverse,Aa=Ho(me,"DataView"),Ss=Ho(me,"Map"),Ia=Ho(me,"Promise"),Do=Ho(me,"Set"),Pa=Ho(me,"WeakMap"),dl=Ho(At,"create"),pc=Pa&&new Pa,hl={},Ed=Vo(Aa),zo=Vo(Ss),A0=Vo(Ia),pl=Vo(Do),Ci=Vo(Pa),Lo=Xi?Xi.prototype:t,vr=Lo?Lo.valueOf:t,mc=Lo?Lo.toString:t;function j(c){if(on(c)&&!nt(c)&&!(c instanceof tt)){if(c instanceof Nn)return c;if(vt.call(c,"__wrapped__"))return im(c)}return new Nn(c)}var ml=function(){function c(){}return function(d){if(!Xt(d))return{};if(ac)return ac(d);c.prototype=d;var v=new c;return c.prototype=t,v}}();function Ei(){}function Nn(c,d){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=t}j.templateSettings={escape:Hp,evaluate:Vp,interpolate:Yf,variable:"",imports:{_:j}},j.prototype=Ei.prototype,j.prototype.constructor=j,Nn.prototype=ml(Ei.prototype),Nn.prototype.constructor=Nn;function tt(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=M,this.__views__=[]}function gc(){var c=new tt(this.__wrapped__);return c.__actions__=jn(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=jn(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=jn(this.__views__),c}function Td(){if(this.__filtered__){var c=new tt(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function gl(){var c=this.__wrapped__.value(),d=this.__dir__,v=nt(c),T=d<0,P=v?c.length:0,$=th(0,P,this.__views__),G=$.start,ee=$.end,le=ee-G,ve=T?ee:G-1,we=this.__iteratees__,be=we.length,Ae=0,Le=Mn(le,this.__takeCount__);if(!v||!T&&P==le&&Le==le)return _l(c,this.__actions__);var Je=[];e:for(;le--&&Ae<Le;){ve+=d;for(var lt=-1,Ge=c[ve];++lt<be;){var dt=we[lt],gt=dt.iteratee,di=dt.type,br=gt(Ge);if(di==oe)Ge=br;else if(!br){if(di==ue)continue e;break e}}Je[Ae++]=Ge}return Je}tt.prototype=ml(Ei.prototype),tt.prototype.constructor=tt;function nr(c){var d=-1,v=c==null?0:c.length;for(this.clear();++d<v;){var T=c[d];this.set(T[0],T[1])}}function Lt(){this.__data__=dl?dl(null):{},this.size=0}function Dt(c){var d=this.has(c)&&delete this.__data__[c];return this.size-=d?1:0,d}function Fo(c){var d=this.__data__;if(dl){var v=d[c];return v===f?t:v}return vt.call(d,c)?d[c]:t}function An(c){var d=this.__data__;return dl?d[c]!==t:vt.call(d,c)}function rr(c,d){var v=this.__data__;return this.size+=this.has(c)?0:1,v[c]=dl&&d===t?f:d,this}nr.prototype.clear=Lt,nr.prototype.delete=Dt,nr.prototype.get=Fo,nr.prototype.has=An,nr.prototype.set=rr;function Wn(c){var d=-1,v=c==null?0:c.length;for(this.clear();++d<v;){var T=c[d];this.set(T[0],T[1])}}function yl(){this.__data__=[],this.size=0}function ir(c){var d=this.__data__,v=Pn(d,c);if(v<0)return!1;var T=d.length-1;return v==T?d.pop():cc.call(d,v,1),--this.size,!0}function yc(c){var d=this.__data__,v=Pn(d,c);return v<0?t:d[v][1]}function I0(c){return Pn(this.__data__,c)>-1}function P0(c,d){var v=this.__data__,T=Pn(v,c);return T<0?(++this.size,v.push([c,d])):v[T][1]=d,this}Wn.prototype.clear=yl,Wn.prototype.delete=ir,Wn.prototype.get=yc,Wn.prototype.has=I0,Wn.prototype.set=P0;function Ir(c){var d=-1,v=c==null?0:c.length;for(this.clear();++d<v;){var T=c[d];this.set(T[0],T[1])}}function O0(){this.size=0,this.__data__={hash:new nr,map:new(Ss||Wn),string:new nr}}function eo(c){var d=Ja(this,c).delete(c);return this.size-=d?1:0,d}function vc(c){return Ja(this,c).get(c)}function Md(c){return Ja(this,c).has(c)}function R0(c,d){var v=Ja(this,c),T=v.size;return v.set(c,d),this.size+=v.size==T?0:1,this}Ir.prototype.clear=O0,Ir.prototype.delete=eo,Ir.prototype.get=vc,Ir.prototype.has=Md,Ir.prototype.set=R0;function bs(c){var d=-1,v=c==null?0:c.length;for(this.__data__=new Ir;++d<v;)this.add(c[d])}function Bo(c){return this.__data__.set(c,f),this}function vl(c){return this.__data__.has(c)}bs.prototype.add=bs.prototype.push=Bo,bs.prototype.has=vl;function In(c){var d=this.__data__=new Wn(c);this.size=d.size}function wc(){this.__data__=new Wn,this.size=0}function kc(c){var d=this.__data__,v=d.delete(c);return this.size=d.size,v}function Pr(c){return this.__data__.get(c)}function Or(c){return this.__data__.has(c)}function _s(c,d){var v=this.__data__;if(v instanceof Wn){var T=v.__data__;if(!Ss||T.length<i-1)return T.push([c,d]),this.size=++v.size,this;v=this.__data__=new Ir(T)}return v.set(c,d),this.size=v.size,this}In.prototype.clear=wc,In.prototype.delete=kc,In.prototype.get=Pr,In.prototype.has=Or,In.prototype.set=_s;function Ti(c,d){var v=nt(c),T=!v&&su(c),P=!v&&!T&&Rl(c),$=!v&&!T&&!P&&cf(c),G=v||T||P||$,ee=G?wd(c.length,Tg):[],le=ee.length;for(var ve in c)(d||vt.call(c,ve))&&!(G&&(ve=="length"||P&&(ve=="offset"||ve=="parent")||$&&(ve=="buffer"||ve=="byteLength"||ve=="byteOffset")||$t(ve,le)))&&ee.push(ve);return ee}function Mi(c){var d=c.length;return d?c[Sl(0,d-1)]:t}function Cs(c,d){return qc(jn(c),to(d,0,c.length))}function D0(c){return qc(jn(c))}function Oa(c,d,v){(v!==t&&!fo(c[d],v)||v===t&&!(d in c))&&Ni(c,d,v)}function Es(c,d,v){var T=c[d];(!(vt.call(c,d)&&fo(T,v))||v===t&&!(d in c))&&Ni(c,d,v)}function Pn(c,d){for(var v=c.length;v--;)if(fo(c[v][0],d))return v;return-1}function wr(c,d,v,T){return Ii(c,function(P,$,G){d(T,P,v(P),G)}),T}function Ft(c,d){return c&&ii(d,Dn(d),c)}function ri(c,d){return c&&ii(d,jr(d),c)}function Ni(c,d,v){d=="__proto__"&&Ma?Ma(c,d,{configurable:!0,enumerable:!0,value:v,writable:!0}):c[d]=v}function xc(c,d){for(var v=-1,T=d.length,P=de(T),$=c==null;++v<T;)P[v]=$?t:Xg(c,d[v]);return P}function to(c,d,v){return c===c&&(v!==t&&(c=c<=v?c:v),d!==t&&(c=c>=d?c:d)),c}function or(c,d,v,T,P,$){var G,ee=d&m,le=d&w,ve=d&k;if(v&&(G=P?v(c,T,P,$):v(c)),G!==t)return G;if(!Xt(c))return c;var we=nt(c);if(we){if(G=Qa(c),!ee)return jn(c,G)}else{var be=bn(c),Ae=be==pt||be==ln;if(Rl(c))return $d(c,ee);if(be==En||be==X||Ae&&!P){if(G=le||Ae?{}:_n(c),!ee)return le?Ag(c,ri(G,c)):Rc(c,Ft(G,c))}else{if(!Ct[be])return P?c:{};G=Ig(c,be,ee)}}$||($=new In);var Le=$.get(c);if(Le)return Le;$.set(c,G),Q3(c)?c.forEach(function(Ge){G.add(or(Ge,d,v,Ge,c,$))}):J3(c)&&c.forEach(function(Ge,dt){G.set(dt,or(Ge,d,v,dt,c,$))});var Je=ve?le?Ka:qa:le?jr:Dn,lt=we?t:Je(c);return Tn(lt||c,function(Ge,dt){lt&&(dt=Ge,Ge=c[dt]),Es(G,dt,or(Ge,d,v,dt,c,$))}),G}function z0(c){var d=Dn(c);return function(v){return Ra(v,c,d)}}function Ra(c,d,v){var T=v.length;if(c==null)return!T;for(c=At(c);T--;){var P=v[T],$=d[P],G=c[P];if(G===t&&!(P in c)||!$(G))return!1}return!0}function Nd(c,d,v){if(typeof c!="function")throw new Ar(l);return Il(function(){c.apply(t,v)},d)}function Ai(c,d,v,T){var P=-1,$=ec,G=!0,ee=c.length,le=[],ve=d.length;if(!ee)return le;v&&(d=Rt(d,gr(v))),T?($=hd,G=!1):d.length>=i&&($=Qi,G=!1,d=new bs(d));e:for(;++P<ee;){var we=c[P],be=v==null?we:v(we);if(we=T||we!==0?we:0,G&&be===be){for(var Ae=ve;Ae--;)if(d[Ae]===be)continue e;le.push(we)}else $(d,be,T)||le.push(we)}return le}var Ii=Fr(kr),L0=Fr(Uo,!0);function Da(c,d){var v=!0;return Ii(c,function(T,P,$){return v=!!d(T,P,$),v}),v}function Ts(c,d,v){for(var T=-1,P=c.length;++T<P;){var $=c[T],G=d($);if(G!=null&&(ee===t?G===G&&!fi(G):v(G,ee)))var ee=G,le=$}return le}function F0(c,d,v,T){var P=c.length;for(v=ot(v),v<0&&(v=-v>P?0:P+v),T=T===t||T>P?P:ot(T),T<0&&(T+=P),T=v>T?0:X3(T);v<T;)c[v++]=d;return c}function Ad(c,d){var v=[];return Ii(c,function(T,P,$){d(T,P,$)&&v.push(T)}),v}function Jt(c,d,v,T,P){var $=-1,G=c.length;for(v||(v=$c),P||(P=[]);++$<G;){var ee=c[$];d>0&&v(ee)?d>1?Jt(ee,d-1,v,T,P):Po(P,ee):T||(P[P.length]=ee)}return P}var Sc=zc(),za=zc(!0);function kr(c,d){return c&&Sc(c,d,Dn)}function Uo(c,d){return c&&za(c,d,Dn)}function wl(c,d){return Io(d,function(v){return Us(c[v])})}function no(c,d){d=Ri(d,c);for(var v=0,T=d.length;c!=null&&v<T;)c=c[ai(d[v++])];return v&&v==T?c:t}function bc(c,d,v){var T=d(c);return nt(c)?T:Po(T,v(c))}function xn(c){return c==null?c===t?fs:Eo:ks&&ks in At(c)?jc(c):rh(c)}function Wo(c,d){return c>d}function Rr(c,d){return c!=null&&vt.call(c,d)}function Ms(c,d){return c!=null&&d in At(c)}function Id(c,d,v){return c>=Mn(d,v)&&c<nn(d,v)}function _c(c,d,v){for(var T=v?hd:ec,P=c[0].length,$=c.length,G=$,ee=de($),le=1/0,ve=[];G--;){var we=c[G];G&&d&&(we=Rt(we,gr(d))),le=Mn(we.length,le),ee[G]=!v&&(d||P>=120&&we.length>=120)?new bs(G&&we):t}we=c[0];var be=-1,Ae=ee[0];e:for(;++be<P&&ve.length<le;){var Le=we[be],Je=d?d(Le):Le;if(Le=v||Le!==0?Le:0,!(Ae?Qi(Ae,Je):T(ve,Je,v))){for(G=$;--G;){var lt=ee[G];if(!(lt?Qi(lt,Je):T(c[G],Je,v)))continue e}Ae&&Ae.push(Je),ve.push(Le)}}return ve}function ro(c,d,v,T){return kr(c,function(P,$,G){d(T,v(P),$,G)}),T}function Dr(c,d,v){d=Ri(d,c),c=mn(c,d);var T=c==null?c:c[ai(Vn(d))];return T==null?t:Un(T,c,v)}function Cc(c){return on(c)&&xn(c)==X}function B0(c){return on(c)&&xn(c)==Te}function io(c){return on(c)&&xn(c)==Me}function zr(c,d,v,T,P){return c===d?!0:c==null||d==null||!on(c)&&!on(d)?c!==c&&d!==d:Ec(c,d,v,T,zr,P)}function Ec(c,d,v,T,P,$){var G=nt(c),ee=nt(d),le=G?re:bn(c),ve=ee?re:bn(d);le=le==X?En:le,ve=ve==X?En:ve;var we=le==En,be=ve==En,Ae=le==ve;if(Ae&&Rl(c)){if(!Rl(d))return!1;G=!0,we=!1}if(Ae&&!we)return $||($=new In),G||cf(c)?Zd(c,d,v,T,P,$):eh(c,d,le,v,T,P,$);if(!(v&b)){var Le=we&&vt.call(c,"__wrapped__"),Je=be&&vt.call(d,"__wrapped__");if(Le||Je){var lt=Le?c.value():c,Ge=Je?d.value():d;return $||($=new In),P(lt,Ge,v,T,$)}}return Ae?($||($=new In),Q0(c,d,v,T,P,$)):!1}function U0(c){return on(c)&&bn(c)==Ot}function kl(c,d,v,T){var P=v.length,$=P,G=!T;if(c==null)return!$;for(c=At(c);P--;){var ee=v[P];if(G&&ee[2]?ee[1]!==c[ee[0]]:!(ee[0]in c))return!1}for(;++P<$;){ee=v[P];var le=ee[0],ve=c[le],we=ee[1];if(G&&ee[2]){if(ve===t&&!(le in c))return!1}else{var be=new In;if(T)var Ae=T(ve,we,le,c,d,be);if(!(Ae===t?zr(we,ve,b|A,T,be):Ae))return!1}}return!0}function Pd(c){if(!Xt(c)||Z0(c))return!1;var d=Us(c)?E0:Jp;return d.test(Vo(c))}function La(c){return on(c)&&xn(c)==kn}function Pi(c){return on(c)&&bn(c)==bt}function Fa(c){return on(c)&&vm(c.length)&&!!Tt[xn(c)]}function xl(c){return typeof c=="function"?c:c==null?$r:typeof c=="object"?nt(c)?jt(c[0],c[1]):Tc(c):uw(c)}function oo(c){if(!uo(c))return fl(c);var d=[];for(var v in At(c))vt.call(c,v)&&v!="constructor"&&d.push(v);return d}function Od(c){if(!Xt(c))return nm(c);var d=uo(c),v=[];for(var T in c)T=="constructor"&&(d||!vt.call(c,T))||v.push(T);return v}function jo(c,d){return c<d}function Rd(c,d){var v=-1,T=Wr(c)?de(c.length):[];return Ii(c,function(P,$,G){T[++v]=d(P,$,G)}),T}function Tc(c){var d=Ga(c);return d.length==1&&d[0][2]?Hc(d[0][0],d[0][1]):function(v){return v===c||kl(v,c,d)}}function jt(c,d){return Oe(c)&&Xa(d)?Hc(ai(c),d):function(v){var T=Xg(v,c);return T===t&&T===d?Zg(v,c):zr(d,T,b|A)}}function Ns(c,d,v,T,P){c!==d&&Sc(d,function($,G){if(P||(P=new In),Xt($))Dd(c,d,G,v,Ns,T,P);else{var ee=T?T(Li(c,G),$,G+"",c,d,P):t;ee===t&&(ee=$),Oa(c,G,ee)}},jr)}function Dd(c,d,v,T,P,$,G){var ee=Li(c,v),le=Li(d,v),ve=G.get(le);if(ve){Oa(c,v,ve);return}var we=$?$(ee,le,v+"",c,d,G):t,be=we===t;if(be){var Ae=nt(le),Le=!Ae&&Rl(le),Je=!Ae&&!Le&&cf(le);we=le,Ae||Le||Je?nt(ee)?we=ee:hn(ee)?we=jn(ee):Le?(be=!1,we=$d(le,!0)):Je?(be=!1,we=V0(le,!0)):we=[]:xh(le)||su(le)?(we=ee,su(ee)?we=Z3(ee):(!Xt(ee)||Us(ee))&&(we=_n(le))):be=!1}be&&(G.set(le,we),P(we,le,T,$,G),G.delete(le)),Oa(c,v,we)}function Mc(c,d){var v=c.length;if(v)return d+=d<0?v:0,$t(d,v)?c[d]:t}function Ba(c,d,v){d.length?d=Rt(d,function($){return nt($)?function(G){return no(G,$.length===1?$[0]:$)}:$}):d=[$r];var T=-1;d=Rt(d,gr(He()));var P=Rd(c,function($,G,ee){var le=Rt(d,function(ve){return ve($)});return{criteria:le,index:++T,value:$}});return wg(P,function($,G){return Ng($,G,v)})}function zd(c,d){return $o(c,d,function(v,T){return Zg(c,T)})}function $o(c,d,v){for(var T=-1,P=d.length,$={};++T<P;){var G=d[T],ee=no(c,G);v(ee,G)&&Is($,Ri(G,c),ee)}return $}function Ht(c){return function(d){return no(d,c)}}function Qt(c,d,v,T){var P=T?gd:il,$=-1,G=d.length,ee=c;for(c===d&&(d=jn(d)),v&&(ee=Rt(c,gr(v)));++$<G;)for(var le=0,ve=d[$],we=v?v(ve):ve;(le=P(ee,we,le,T))>-1;)ee!==c&&cc.call(ee,le,1),cc.call(c,le,1);return c}function fn(c,d){for(var v=c?d.length:0,T=v-1;v--;){var P=d[v];if(v==T||P!==$){var $=P;$t(P)?cc.call(c,P,1):Ic(c,P)}}return c}function Sl(c,d){return c+Ro(Na()*(d-c+1))}function Ua(c,d,v,T){for(var P=-1,$=nn(xs((d-c)/(v||1)),0),G=de($);$--;)G[T?$:++P]=c,c+=v;return G}function As(c,d){var v="";if(!c||d<1||d>K)return v;do d%2&&(v+=c),d=Ro(d/2),d&&(c+=c);while(d);return v}function it(c,d){return xr(Vc(c,d,$r),c+"")}function On(c){return Mi(ff(c))}function Ld(c,d){var v=ff(c);return qc(v,to(d,0,v.length))}function Is(c,d,v,T){if(!Xt(c))return c;d=Ri(d,c);for(var P=-1,$=d.length,G=$-1,ee=c;ee!=null&&++P<$;){var le=ai(d[P]),ve=v;if(le==="__proto__"||le==="constructor"||le==="prototype")return c;if(P!=G){var we=ee[le];ve=T?T(we,le,ee):t,ve===t&&(ve=Xt(we)?we:$t(d[P+1])?[]:{})}Es(ee,le,ve),ee=ee[le]}return c}var Nc=pc?function(c,d){return pc.set(c,d),c}:$r,Oi=Ma?function(c,d){return Ma(c,"toString",{configurable:!0,enumerable:!1,value:ty(d),writable:!0})}:$r;function Lr(c){return qc(ff(c))}function Rn(c,d,v){var T=-1,P=c.length;d<0&&(d=-d>P?0:P+d),v=v>P?P:v,v<0&&(v+=P),P=d>v?0:v-d>>>0,d>>>=0;for(var $=de(P);++T<P;)$[T]=c[T+d];return $}function Fd(c,d){var v;return Ii(c,function(T,P,$){return v=d(T,P,$),!v}),!!v}function bl(c,d,v){var T=0,P=c==null?T:c.length;if(typeof d=="number"&&d===d&&P<=N){for(;T<P;){var $=T+P>>>1,G=c[$];G!==null&&!fi(G)&&(v?G<=d:G<d)?T=$+1:P=$}return P}return Ac(c,d,$r,v)}function Ac(c,d,v,T){var P=0,$=c==null?0:c.length;if($===0)return 0;d=v(d);for(var G=d!==d,ee=d===null,le=fi(d),ve=d===t;P<$;){var we=Ro((P+$)/2),be=v(c[we]),Ae=be!==t,Le=be===null,Je=be===be,lt=fi(be);if(G)var Ge=T||Je;else ve?Ge=Je&&(T||Ae):ee?Ge=Je&&Ae&&(T||!Le):le?Ge=Je&&Ae&&!Le&&(T||!lt):Le||lt?Ge=!1:Ge=T?be<=d:be<d;Ge?P=we+1:$=we}return Mn($,D)}function Bd(c,d){for(var v=-1,T=c.length,P=0,$=[];++v<T;){var G=c[v],ee=d?d(G):G;if(!v||!fo(ee,le)){var le=ee;$[P++]=G===0?0:G}}return $}function Ud(c){return typeof c=="number"?c:fi(c)?x:+c}function sr(c){if(typeof c=="string")return c;if(nt(c))return Rt(c,sr)+"";if(fi(c))return mc?mc.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}function so(c,d,v){var T=-1,P=ec,$=c.length,G=!0,ee=[],le=ee;if(v)G=!1,P=hd;else if($>=i){var ve=d?null:G0(c);if(ve)return Oo(ve);G=!1,P=Qi,le=new bs}else le=d?[]:ee;e:for(;++T<$;){var we=c[T],be=d?d(we):we;if(we=v||we!==0?we:0,G&&be===be){for(var Ae=le.length;Ae--;)if(le[Ae]===be)continue e;d&&le.push(be),ee.push(we)}else P(le,be,v)||(le!==ee&&le.push(be),ee.push(we))}return ee}function Ic(c,d){return d=Ri(d,c),c=mn(c,d),c==null||delete c[ai(Vn(d))]}function Wd(c,d,v,T){return Is(c,d,v(no(c,d)),T)}function Wa(c,d,v,T){for(var P=c.length,$=T?P:-1;(T?$--:++$<P)&&d(c[$],$,c););return v?Rn(c,T?0:$,T?$+1:P):Rn(c,T?$+1:0,T?P:$)}function _l(c,d){var v=c;return v instanceof tt&&(v=v.value()),pd(d,function(T,P){return P.func.apply(P.thisArg,Po([T],P.args))},v)}function Pc(c,d,v){var T=c.length;if(T<2)return T?so(c[0]):[];for(var P=-1,$=de(T);++P<T;)for(var G=c[P],ee=-1;++ee<T;)ee!=P&&($[P]=Ai($[P]||G,c[ee],d,v));return so(Jt($,1),d,v)}function ja(c,d,v){for(var T=-1,P=c.length,$=d.length,G={};++T<P;){var ee=T<$?d[T]:t;v(G,c[T],ee)}return G}function Cl(c){return hn(c)?c:[]}function Oc(c){return typeof c=="function"?c:$r}function Ri(c,d){return nt(c)?c:Oe(c,d)?[c]:sh(It(c))}var W0=it;function lo(c,d,v){var T=c.length;return v=v===t?T:v,!d&&v>=T?c:Rn(c,d,v)}var jd=M0||function(c){return Wt.clearTimeout(c)};function $d(c,d){if(d)return c.slice();var v=c.length,T=bd?bd(v):new c.constructor(v);return c.copy(T),T}function $a(c){var d=new c.constructor(c.byteLength);return new Ta(d).set(new Ta(c)),d}function j0(c,d){var v=d?$a(c.buffer):c.buffer;return new c.constructor(v,c.byteOffset,c.byteLength)}function $0(c){var d=new c.constructor(c.source,td.exec(c));return d.lastIndex=c.lastIndex,d}function H0(c){return vr?At(vr.call(c)):{}}function V0(c,d){var v=d?$a(c.buffer):c.buffer;return new c.constructor(v,c.byteOffset,c.length)}function Hd(c,d){if(c!==d){var v=c!==t,T=c===null,P=c===c,$=fi(c),G=d!==t,ee=d===null,le=d===d,ve=fi(d);if(!ee&&!ve&&!$&&c>d||$&&G&&le&&!ee&&!ve||T&&G&&le||!v&&le||!P)return 1;if(!T&&!$&&!ve&&c<d||ve&&v&&P&&!T&&!$||ee&&v&&P||!G&&P||!le)return-1}return 0}function Ng(c,d,v){for(var T=-1,P=c.criteria,$=d.criteria,G=P.length,ee=v.length;++T<G;){var le=Hd(P[T],$[T]);if(le){if(T>=ee)return le;var ve=v[T];return le*(ve=="desc"?-1:1)}}return c.index-d.index}function q0(c,d,v,T){for(var P=-1,$=c.length,G=v.length,ee=-1,le=d.length,ve=nn($-G,0),we=de(le+ve),be=!T;++ee<le;)we[ee]=d[ee];for(;++P<G;)(be||P<$)&&(we[v[P]]=c[P]);for(;ve--;)we[ee++]=c[P++];return we}function Vd(c,d,v,T){for(var P=-1,$=c.length,G=-1,ee=v.length,le=-1,ve=d.length,we=nn($-ee,0),be=de(we+ve),Ae=!T;++P<we;)be[P]=c[P];for(var Le=P;++le<ve;)be[Le+le]=d[le];for(;++G<ee;)(Ae||P<$)&&(be[Le+v[G]]=c[P++]);return be}function jn(c,d){var v=-1,T=c.length;for(d||(d=de(T));++v<T;)d[v]=c[v];return d}function ii(c,d,v,T){var P=!v;v||(v={});for(var $=-1,G=d.length;++$<G;){var ee=d[$],le=T?T(v[ee],c[ee],ee,v,c):t;le===t&&(le=c[ee]),P?Ni(v,ee,le):Es(v,ee,le)}return v}function Rc(c,d){return ii(c,oi(c),d)}function Ag(c,d){return ii(c,Y0(c),d)}function Dc(c,d){return function(v,T){var P=nt(v)?fd:wr,$=d?d():{};return P(v,c,He(T,2),$)}}function El(c){return it(function(d,v){var T=-1,P=v.length,$=P>1?v[P-1]:t,G=P>2?v[2]:t;for($=c.length>3&&typeof $=="function"?(P--,$):t,G&&Hn(v[0],v[1],G)&&($=P<3?t:$,P=1),d=At(d);++T<P;){var ee=v[T];ee&&c(d,ee,T,$)}return d})}function Fr(c,d){return function(v,T){if(v==null)return v;if(!Wr(v))return c(v,T);for(var P=v.length,$=d?P:-1,G=At(v);(d?$--:++$<P)&&T(G[$],$,G)!==!1;);return v}}function zc(c){return function(d,v,T){for(var P=-1,$=At(d),G=T(d),ee=G.length;ee--;){var le=G[c?ee:++P];if(v($[le],le,$)===!1)break}return d}}function Lc(c,d,v){var T=d&O,P=Tl(c);function $(){var G=this&&this!==Wt&&this instanceof $?P:c;return G.apply(T?v:this,arguments)}return $}function qd(c){return function(d){d=It(d);var v=sl(d)?yr(d):t,T=v?v[0]:d.charAt(0),P=v?lo(v,1).join(""):d.slice(1);return T[c]()+P}}function Ps(c){return function(d){return pd(lw(sw(d).replace(fg,"")),c,"")}}function Tl(c){return function(){var d=arguments;switch(d.length){case 0:return new c;case 1:return new c(d[0]);case 2:return new c(d[0],d[1]);case 3:return new c(d[0],d[1],d[2]);case 4:return new c(d[0],d[1],d[2],d[3]);case 5:return new c(d[0],d[1],d[2],d[3],d[4]);case 6:return new c(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new c(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var v=ml(c.prototype),T=c.apply(v,d);return Xt(T)?T:v}}function Kd(c,d,v){var T=Tl(c);function P(){for(var $=arguments.length,G=de($),ee=$,le=ao(P);ee--;)G[ee]=arguments[ee];var ve=$<3&&G[0]!==le&&G[$-1]!==le?[]:Nr(G,le);if($-=ve.length,$<v)return $n(c,d,Ml,P.placeholder,t,G,ve,t,t,v-$);var we=this&&this!==Wt&&this instanceof P?T:c;return Un(we,this,G)}return P}function Os(c){return function(d,v,T){var P=At(d);if(!Wr(d)){var $=He(v,3);d=Dn(d),v=function(ee){return $(P[ee],ee,P)}}var G=c(d,v,T);return G>-1?P[$?d[G]:G]:t}}function Fc(c){return zi(function(d){var v=d.length,T=v,P=Nn.prototype.thru;for(c&&d.reverse();T--;){var $=d[T];if(typeof $!="function")throw new Ar(l);if(P&&!G&&Nl($)=="wrapper")var G=new Nn([],!0)}for(T=G?T:v;++T<v;){$=d[T];var ee=Nl($),le=ee=="wrapper"?Wc($):t;le&&Ya(le[0])&&le[1]==(H|I|B|Y)&&!le[4].length&&le[9]==1?G=G[Nl(le[0])].apply(G,le[3]):G=$.length==1&&Ya($)?G[ee]():G.thru($)}return function(){var ve=arguments,we=ve[0];if(G&&ve.length==1&&nt(we))return G.plant(we).value();for(var be=0,Ae=v?d[be].apply(this,ve):we;++be<v;)Ae=d[be].call(this,Ae);return Ae}})}function Ml(c,d,v,T,P,$,G,ee,le,ve){var we=d&H,be=d&O,Ae=d&F,Le=d&(I|W),Je=d&q,lt=Ae?t:Tl(c);function Ge(){for(var dt=arguments.length,gt=de(dt),di=dt;di--;)gt[di]=arguments[di];if(Le)var br=ao(Ge),hi=v0(gt,br);if(T&&(gt=q0(gt,T,P,Le)),$&&(gt=Vd(gt,$,G,Le)),dt-=hi,Le&&dt<ve){var pn=Nr(gt,br);return $n(c,d,Ml,Ge.placeholder,v,gt,pn,ee,le,ve-dt)}var ho=be?v:this,js=Ae?ho[c]:c;return dt=gt.length,ee?gt=si(gt,ee):Je&&dt>1&&gt.reverse(),we&&le<dt&&(gt.length=le),this&&this!==Wt&&this instanceof Ge&&(js=lt||Tl(js)),js.apply(ho,gt)}return Ge}function K0(c,d){return function(v,T){return ro(v,c,d(T),{})}}function Ha(c,d){return function(v,T){var P;if(v===t&&T===t)return d;if(v!==t&&(P=v),T!==t){if(P===t)return T;typeof v=="string"||typeof T=="string"?(v=sr(v),T=sr(T)):(v=Ud(v),T=Ud(T)),P=c(v,T)}return P}}function Bc(c){return zi(function(d){return d=Rt(d,gr(He())),it(function(v){var T=this;return c(d,function(P){return Un(P,T,v)})})})}function Va(c,d){d=d===t?" ":sr(d);var v=d.length;if(v<2)return v?As(d,c):d;var T=As(d,xs(c/ws(d)));return sl(d)?lo(yr(T),0,c).join(""):T.slice(0,c)}function J0(c,d,v,T){var P=d&O,$=Tl(c);function G(){for(var ee=-1,le=arguments.length,ve=-1,we=T.length,be=de(we+le),Ae=this&&this!==Wt&&this instanceof G?$:c;++ve<we;)be[ve]=T[ve];for(;le--;)be[ve++]=arguments[++ee];return Un(Ae,P?v:this,be)}return G}function Jd(c){return function(d,v,T){return T&&typeof T!="number"&&Hn(d,v,T)&&(v=T=t),d=Ws(d),v===t?(v=d,d=0):v=Ws(v),T=T===t?d<v?1:-1:Ws(T),Ua(d,v,T,c)}}function Uc(c){return function(d,v){return typeof d=="string"&&typeof v=="string"||(d=Fi(d),v=Fi(v)),c(d,v)}}function $n(c,d,v,T,P,$,G,ee,le,ve){var we=d&I,be=we?G:t,Ae=we?t:G,Le=we?$:t,Je=we?t:$;d|=we?B:z,d&=~(we?z:B),d&V||(d&=-4);var lt=[c,d,P,Le,be,Je,Ae,ee,le,ve],Ge=v.apply(t,lt);return Ya(c)&&ih(Ge,lt),Ge.placeholder=T,oh(Ge,c,d)}function Sn(c){var d=tn[c];return function(v,T){if(v=Fi(v),T=T==null?0:Mn(ot(T),292),T&&cl(v)){var P=(It(v)+"e").split("e"),$=d(P[0]+"e"+(+P[1]+T));return P=(It($)+"e").split("e"),+(P[0]+"e"+(+P[1]-T))}return d(v)}}var G0=Do&&1/Oo(new Do([,-0]))[1]==ae?function(c){return new Do(c)}:iy;function Gd(c){return function(d){var v=bn(d);return v==Ot?rc(d):v==bt?bg(d):kg(d,c(d))}}function Di(c,d,v,T,P,$,G,ee){var le=d&F;if(!le&&typeof c!="function")throw new Ar(l);var ve=T?T.length:0;if(ve||(d&=-97,T=P=t),G=G===t?G:nn(ot(G),0),ee=ee===t?ee:ot(ee),ve-=P?P.length:0,d&z){var we=T,be=P;T=P=t}var Ae=le?t:Wc(c),Le=[c,d,v,T,P,we,be,$,G,ee];if(Ae&&tm(Le,Ae),c=Le[0],d=Le[1],v=Le[2],T=Le[3],P=Le[4],ee=Le[9]=Le[9]===t?le?0:c.length:nn(Le[9]-ve,0),!ee&&d&(I|W)&&(d&=-25),!d||d==O)var Je=Lc(c,d,v);else d==I||d==W?Je=Kd(c,d,ee):(d==B||d==(O|B))&&!P.length?Je=J0(c,d,v,T):Je=Ml.apply(t,Le);var lt=Ae?Nc:ih;return oh(lt(Je,Le),c,d)}function Qd(c,d,v,T){return c===t||fo(c,_i[v])&&!vt.call(T,v)?d:c}function Yd(c,d,v,T,P,$){return Xt(c)&&Xt(d)&&($.set(d,c),Ns(c,d,t,Yd,$),$.delete(d)),c}function Xd(c){return xh(c)?t:c}function Zd(c,d,v,T,P,$){var G=v&b,ee=c.length,le=d.length;if(ee!=le&&!(G&&le>ee))return!1;var ve=$.get(c),we=$.get(d);if(ve&&we)return ve==d&&we==c;var be=-1,Ae=!0,Le=v&A?new bs:t;for($.set(c,d),$.set(d,c);++be<ee;){var Je=c[be],lt=d[be];if(T)var Ge=G?T(lt,Je,be,d,c,$):T(Je,lt,be,c,d,$);if(Ge!==t){if(Ge)continue;Ae=!1;break}if(Le){if(!md(d,function(dt,gt){if(!Qi(Le,gt)&&(Je===dt||P(Je,dt,v,T,$)))return Le.push(gt)})){Ae=!1;break}}else if(!(Je===lt||P(Je,lt,v,T,$))){Ae=!1;break}}return $.delete(c),$.delete(d),Ae}function eh(c,d,v,T,P,$,G){switch(v){case Ue:if(c.byteLength!=d.byteLength||c.byteOffset!=d.byteOffset)return!1;c=c.buffer,d=d.buffer;case Te:return!(c.byteLength!=d.byteLength||!$(new Ta(c),new Ta(d)));case ke:case Me:case an:return fo(+c,+d);case $e:return c.name==d.name&&c.message==d.message;case kn:case Nt:return c==d+"";case Ot:var ee=rc;case bt:var le=T&b;if(ee||(ee=Oo),c.size!=d.size&&!le)return!1;var ve=G.get(c);if(ve)return ve==d;T|=A,G.set(c,d);var we=Zd(ee(c),ee(d),T,P,$,G);return G.delete(c),we;case hr:if(vr)return vr.call(c)==vr.call(d)}return!1}function Q0(c,d,v,T,P,$){var G=v&b,ee=qa(c),le=ee.length,ve=qa(d),we=ve.length;if(le!=we&&!G)return!1;for(var be=le;be--;){var Ae=ee[be];if(!(G?Ae in d:vt.call(d,Ae)))return!1}var Le=$.get(c),Je=$.get(d);if(Le&&Je)return Le==d&&Je==c;var lt=!0;$.set(c,d),$.set(d,c);for(var Ge=G;++be<le;){Ae=ee[be];var dt=c[Ae],gt=d[Ae];if(T)var di=G?T(gt,dt,Ae,d,c,$):T(dt,gt,Ae,c,d,$);if(!(di===t?dt===gt||P(dt,gt,v,T,$):di)){lt=!1;break}Ge||(Ge=Ae=="constructor")}if(lt&&!Ge){var br=c.constructor,hi=d.constructor;br!=hi&&"constructor"in c&&"constructor"in d&&!(typeof br=="function"&&br instanceof br&&typeof hi=="function"&&hi instanceof hi)&&(lt=!1)}return $.delete(c),$.delete(d),lt}function zi(c){return xr(Vc(c,t,Jc),c+"")}function qa(c){return bc(c,Dn,oi)}function Ka(c){return bc(c,jr,Y0)}var Wc=pc?function(c){return pc.get(c)}:iy;function Nl(c){for(var d=c.name+"",v=hl[d],T=vt.call(hl,d)?v.length:0;T--;){var P=v[T],$=P.func;if($==null||$==c)return P.name}return d}function ao(c){var d=vt.call(j,"placeholder")?j:c;return d.placeholder}function He(){var c=j.iteratee||ny;return c=c===ny?xl:c,arguments.length?c(arguments[0],arguments[1]):c}function Ja(c,d){var v=c.__data__;return Al(d)?v[typeof d=="string"?"string":"hash"]:v.map}function Ga(c){for(var d=Dn(c),v=d.length;v--;){var T=d[v],P=c[T];d[v]=[T,P,Xa(P)]}return d}function Ho(c,d){var v=ol(c,d);return Pd(v)?v:t}function jc(c){var d=vt.call(c,ks),v=c[ks];try{c[ks]=t;var T=!0}catch{}var P=Ca.call(c);return T&&(d?c[ks]=v:delete c[ks]),P}var oi=fc?function(c){return c==null?[]:(c=At(c),Io(fc(c),function(d){return uc.call(c,d)}))}:oy,Y0=fc?function(c){for(var d=[];c;)Po(d,oi(c)),c=ni(c);return d}:oy,bn=xn;(Aa&&bn(new Aa(new ArrayBuffer(1)))!=Ue||Ss&&bn(new Ss)!=Ot||Ia&&bn(Ia.resolve())!=en||Do&&bn(new Do)!=bt||Pa&&bn(new Pa)!=pr)&&(bn=function(c){var d=xn(c),v=d==En?c.constructor:t,T=v?Vo(v):"";if(T)switch(T){case Ed:return Ue;case zo:return Ot;case A0:return en;case pl:return bt;case Ci:return pr}return d});function th(c,d,v){for(var T=-1,P=v.length;++T<P;){var $=v[T],G=$.size;switch($.type){case"drop":c+=G;break;case"dropRight":d-=G;break;case"take":d=Mn(d,c+G);break;case"takeRight":c=nn(c,d-G);break}}return{start:c,end:d}}function X0(c){var d=c.match(Wu);return d?d[1].split(ed):[]}function nh(c,d,v){d=Ri(d,c);for(var T=-1,P=d.length,$=!1;++T<P;){var G=ai(d[T]);if(!($=c!=null&&v(c,G)))break;c=c[G]}return $||++T!=P?$:(P=c==null?0:c.length,!!P&&vm(P)&&$t(G,P)&&(nt(c)||su(c)))}function Qa(c){var d=c.length,v=new c.constructor(d);return d&&typeof c[0]=="string"&&vt.call(c,"index")&&(v.index=c.index,v.input=c.input),v}function _n(c){return typeof c.constructor=="function"&&!uo(c)?ml(ni(c)):{}}function Ig(c,d,v){var T=c.constructor;switch(d){case Te:return $a(c);case ke:case Me:return new T(+c);case Ue:return j0(c,v);case rt:case ft:case un:case ei:case er:case xi:case Gi:case cn:case Mr:return V0(c,v);case Ot:return new T;case an:case Nt:return new T(c);case kn:return $0(c);case bt:return new T;case hr:return H0(c)}}function Pg(c,d){var v=d.length;if(!v)return c;var T=v-1;return d[T]=(v>1?"& ":"")+d[T],d=d.join(v>2?", ":" "),c.replace(Uu,`{
/* [wrapped with `+d+`] */
`)}function $c(c){return nt(c)||su(c)||!!(T0&&c&&c[T0])}function $t(c,d){var v=typeof c;return d=d??K,!!d&&(v=="number"||v!="symbol"&&Qp.test(c))&&c>-1&&c%1==0&&c<d}function Hn(c,d,v){if(!Xt(v))return!1;var T=typeof d;return(T=="number"?Wr(v)&&$t(d,v.length):T=="string"&&d in v)?fo(v[d],c):!1}function Oe(c,d){if(nt(c))return!1;var v=typeof c;return v=="number"||v=="symbol"||v=="boolean"||c==null||fi(c)?!0:qp.test(c)||!Xf.test(c)||d!=null&&c in At(d)}function Al(c){var d=typeof c;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?c!=="__proto__":c===null}function Ya(c){var d=Nl(c),v=j[d];if(typeof v!="function"||!(d in tt.prototype))return!1;if(c===v)return!0;var T=Wc(v);return!!T&&c===T[0]}function Z0(c){return!!sc&&sc in c}var Og=al?Us:sy;function uo(c){var d=c&&c.constructor,v=typeof d=="function"&&d.prototype||_i;return c===v}function Xa(c){return c===c&&!Xt(c)}function Hc(c,d){return function(v){return v==null?!1:v[c]===d&&(d!==t||c in At(v))}}function em(c){var d=fe(c,function(T){return v.size===h&&v.clear(),T}),v=d.cache;return d}function tm(c,d){var v=c[1],T=d[1],P=v|T,$=P<(O|F|H),G=T==H&&v==I||T==H&&v==Y&&c[7].length<=d[8]||T==(H|Y)&&d[7].length<=d[8]&&v==I;if(!($||G))return c;T&O&&(c[2]=d[2],P|=v&O?0:V);var ee=d[3];if(ee){var le=c[3];c[3]=le?q0(le,ee,d[4]):ee,c[4]=le?Nr(c[3],g):d[4]}return ee=d[5],ee&&(le=c[5],c[5]=le?Vd(le,ee,d[6]):ee,c[6]=le?Nr(c[5],g):d[6]),ee=d[7],ee&&(c[7]=ee),T&H&&(c[8]=c[8]==null?d[8]:Mn(c[8],d[8])),c[9]==null&&(c[9]=d[9]),c[0]=d[0],c[1]=P,c}function nm(c){var d=[];if(c!=null)for(var v in At(c))d.push(v);return d}function rh(c){return Ca.call(c)}function Vc(c,d,v){return d=nn(d===t?c.length-1:d,0),function(){for(var T=arguments,P=-1,$=nn(T.length-d,0),G=de($);++P<$;)G[P]=T[d+P];P=-1;for(var ee=de(d+1);++P<d;)ee[P]=T[P];return ee[d]=v(G),Un(c,this,ee)}}function mn(c,d){return d.length<2?c:no(c,Rn(d,0,-1))}function si(c,d){for(var v=c.length,T=Mn(d.length,v),P=jn(c);T--;){var $=d[T];c[T]=$t($,v)?P[$]:t}return c}function Li(c,d){if(!(d==="constructor"&&typeof c[d]=="function")&&d!="__proto__")return c[d]}var ih=li(Nc),Il=_d||function(c,d){return Wt.setTimeout(c,d)},xr=li(Oi);function oh(c,d,v){var T=d+"";return xr(c,Pg(T,rm(X0(T),v)))}function li(c){var d=0,v=0;return function(){var T=Mg(),P=Q-(T-v);if(v=T,P>0){if(++d>=R)return arguments[0]}else d=0;return c.apply(t,arguments)}}function qc(c,d){var v=-1,T=c.length,P=T-1;for(d=d===t?T:d;++v<d;){var $=Sl(v,P),G=c[$];c[$]=c[v],c[v]=G}return c.length=d,c}var sh=em(function(c){var d=[];return c.charCodeAt(0)===46&&d.push(""),c.replace(fa,function(v,T,P,$){d.push(P?$.replace(og,"$1"):T||v)}),d});function ai(c){if(typeof c=="string"||fi(c))return c;var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}function Vo(c){if(c!=null){try{return _a.call(c)}catch{}try{return c+""}catch{}}return""}function rm(c,d){return Tn(te,function(v){var T="_."+v[0];d&v[1]&&!ec(c,T)&&c.push(T)}),c.sort()}function im(c){if(c instanceof tt)return c.clone();var d=new Nn(c.__wrapped__,c.__chain__);return d.__actions__=jn(c.__actions__),d.__index__=c.__index__,d.__values__=c.__values__,d}function Kc(c,d,v){(v?Hn(c,d,v):d===t)?d=1:d=nn(ot(d),0);var T=c==null?0:c.length;if(!T||d<1)return[];for(var P=0,$=0,G=de(xs(T/d));P<T;)G[$++]=Rn(c,P,P+=d);return G}function lh(c){for(var d=-1,v=c==null?0:c.length,T=0,P=[];++d<v;){var $=c[d];$&&(P[T++]=$)}return P}function Br(){var c=arguments.length;if(!c)return[];for(var d=de(c-1),v=arguments[0],T=c;T--;)d[T-1]=arguments[T];return Po(nt(v)?jn(v):[v],Jt(d,1))}var mt=it(function(c,d){return hn(c)?Ai(c,Jt(d,1,hn,!0)):[]}),gn=it(function(c,d){var v=Vn(d);return hn(v)&&(v=t),hn(c)?Ai(c,Jt(d,1,hn,!0),He(v,2)):[]}),rn=it(function(c,d){var v=Vn(d);return hn(v)&&(v=t),hn(c)?Ai(c,Jt(d,1,hn,!0),t,v):[]});function Cn(c,d,v){var T=c==null?0:c.length;return T?(d=v||d===t?1:ot(d),Rn(c,d<0?0:d,T)):[]}function Sr(c,d,v){var T=c==null?0:c.length;return T?(d=v||d===t?1:ot(d),d=T-d,Rn(c,0,d<0?0:d)):[]}function Pl(c,d){return c&&c.length?Wa(c,He(d,3),!0,!0):[]}function dn(c,d){return c&&c.length?Wa(c,He(d,3),!0):[]}function Za(c,d,v,T){var P=c==null?0:c.length;return P?(v&&typeof v!="number"&&Hn(c,d,v)&&(v=0,T=P),F0(c,d,v,T)):[]}function qo(c,d,v){var T=c==null?0:c.length;if(!T)return-1;var P=v==null?0:ot(v);return P<0&&(P=nn(T+P,0)),tc(c,He(d,3),P)}function eu(c,d,v){var T=c==null?0:c.length;if(!T)return-1;var P=T-1;return v!==t&&(P=ot(v),P=v<0?nn(T+P,0):Mn(P,T-1)),tc(c,He(d,3),P,!0)}function Jc(c){var d=c==null?0:c.length;return d?Jt(c,1):[]}function tu(c){var d=c==null?0:c.length;return d?Jt(c,ae):[]}function lr(c,d){var v=c==null?0:c.length;return v?(d=d===t?1:ot(d),Jt(c,d)):[]}function ah(c){for(var d=-1,v=c==null?0:c.length,T={};++d<v;){var P=c[d];T[P[0]]=P[1]}return T}function Rs(c){return c&&c.length?c[0]:t}function co(c,d,v){var T=c==null?0:c.length;if(!T)return-1;var P=v==null?0:ot(v);return P<0&&(P=nn(T+P,0)),il(c,d,P)}function Gc(c){var d=c==null?0:c.length;return d?Rn(c,0,-1):[]}var uh=it(function(c){var d=Rt(c,Cl);return d.length&&d[0]===c[0]?_c(d):[]}),Ko=it(function(c){var d=Vn(c),v=Rt(c,Cl);return d===Vn(v)?d=t:v.pop(),v.length&&v[0]===c[0]?_c(v,He(d,2)):[]}),Qc=it(function(c){var d=Vn(c),v=Rt(c,Cl);return d=typeof d=="function"?d:t,d&&v.pop(),v.length&&v[0]===c[0]?_c(v,t,d):[]});function Jo(c,d){return c==null?"":dc.call(c,d)}function Vn(c){var d=c==null?0:c.length;return d?c[d-1]:t}function nu(c,d,v){var T=c==null?0:c.length;if(!T)return-1;var P=T;return v!==t&&(P=ot(v),P=P<0?nn(T+P,0):Mn(P,T-1)),d===d?_g(c,d,P):tc(c,h0,P,!0)}function ch(c,d){return c&&c.length?Mc(c,ot(d)):t}var Yc=it(ru);function ru(c,d){return c&&c.length&&d&&d.length?Qt(c,d):c}function qn(c,d,v){return c&&c.length&&d&&d.length?Qt(c,d,He(v,2)):c}function Go(c,d,v){return c&&c.length&&d&&d.length?Qt(c,d,t,v):c}var ui=zi(function(c,d){var v=c==null?0:c.length,T=xc(c,d);return fn(c,Rt(d,function(P){return $t(P,v)?+P:P}).sort(Hd)),T});function ar(c,d){var v=[];if(!(c&&c.length))return v;var T=-1,P=[],$=c.length;for(d=He(d,3);++T<$;){var G=c[T];d(G,T,c)&&(v.push(G),P.push(T))}return fn(c,P),v}function Xc(c){return c==null?c:hc.call(c)}function fh(c,d,v){var T=c==null?0:c.length;return T?(v&&typeof v!="number"&&Hn(c,d,v)?(d=0,v=T):(d=d==null?0:ot(d),v=v===t?T:ot(v)),Rn(c,d,v)):[]}function dh(c,d){return bl(c,d)}function Rg(c,d,v){return Ac(c,d,He(v,2))}function Qo(c,d){var v=c==null?0:c.length;if(v){var T=bl(c,d);if(T<v&&fo(c[T],d))return T}return-1}function om(c,d){return bl(c,d,!0)}function hh(c,d,v){return Ac(c,d,He(v,2),!0)}function Ds(c,d){var v=c==null?0:c.length;if(v){var T=bl(c,d,!0)-1;if(fo(c[T],d))return T}return-1}function ph(c){return c&&c.length?Bd(c):[]}function zs(c,d){return c&&c.length?Bd(c,He(d,2)):[]}function sm(c){var d=c==null?0:c.length;return d?Rn(c,1,d):[]}function lm(c,d,v){return c&&c.length?(d=v||d===t?1:ot(d),Rn(c,0,d<0?0:d)):[]}function mh(c,d,v){var T=c==null?0:c.length;return T?(d=v||d===t?1:ot(d),d=T-d,Rn(c,d<0?0:d,T)):[]}function Zc(c,d){return c&&c.length?Wa(c,He(d,3),!1,!0):[]}function Dg(c,d){return c&&c.length?Wa(c,He(d,3)):[]}var zg=it(function(c){return so(Jt(c,1,hn,!0))}),am=it(function(c){var d=Vn(c);return hn(d)&&(d=t),so(Jt(c,1,hn,!0),He(d,2))}),um=it(function(c){var d=Vn(c);return d=typeof d=="function"?d:t,so(Jt(c,1,hn,!0),t,d)});function Ls(c){return c&&c.length?so(c):[]}function Lg(c,d){return c&&c.length?so(c,He(d,2)):[]}function Ol(c,d){return d=typeof d=="function"?d:t,c&&c.length?so(c,t,d):[]}function ef(c){if(!(c&&c.length))return[];var d=0;return c=Io(c,function(v){if(hn(v))return d=nn(v.length,d),!0}),wd(d,function(v){return Rt(c,yd(v))})}function Vt(c,d){if(!(c&&c.length))return[];var v=ef(c);return d==null?v:Rt(v,function(T){return Un(d,t,T)})}var Fg=it(function(c,d){return hn(c)?Ai(c,d):[]}),cm=it(function(c){return Pc(Io(c,hn))}),Bg=it(function(c){var d=Vn(c);return hn(d)&&(d=t),Pc(Io(c,hn),He(d,2))}),Ug=it(function(c){var d=Vn(c);return d=typeof d=="function"?d:t,Pc(Io(c,hn),t,d)}),fm=it(ef);function dm(c,d){return ja(c||[],d||[],Es)}function Wg(c,d){return ja(c||[],d||[],Is)}var Ur=it(function(c){var d=c.length,v=d>1?c[d-1]:t;return v=typeof v=="function"?(c.pop(),v):t,Vt(c,v)});function tf(c){var d=j(c);return d.__chain__=!0,d}function jg(c,d){return d(c),c}function ci(c,d){return d(c)}var nf=zi(function(c){var d=c.length,v=d?c[0]:0,T=this.__wrapped__,P=function($){return xc($,c)};return d>1||this.__actions__.length||!(T instanceof tt)||!$t(v)?this.thru(P):(T=T.slice(v,+v+(d?1:0)),T.__actions__.push({func:ci,args:[P],thisArg:t}),new Nn(T,this.__chain__).thru(function($){return d&&!$.length&&$.push(t),$}))});function Fs(){return tf(this)}function rf(){return new Nn(this.value(),this.__chain__)}function gh(){this.__values__===t&&(this.__values__=Y3(this.value()));var c=this.__index__>=this.__values__.length,d=c?t:this.__values__[this.__index__++];return{done:c,value:d}}function yh(){return this}function $g(c){for(var d,v=this;v instanceof Ei;){var T=im(v);T.__index__=0,T.__values__=t,d?P.__wrapped__=T:d=T;var P=T;v=v.__wrapped__}return P.__wrapped__=c,d}function vh(){var c=this.__wrapped__;if(c instanceof tt){var d=c;return this.__actions__.length&&(d=new tt(this)),d=d.reverse(),d.__actions__.push({func:ci,args:[Xc],thisArg:t}),new Nn(d,this.__chain__)}return this.thru(Xc)}function Hg(){return _l(this.__wrapped__,this.__actions__)}var hm=Dc(function(c,d,v){vt.call(c,v)?++c[v]:Ni(c,v,1)});function pm(c,d,v){var T=nt(c)?dd:Da;return v&&Hn(c,d,v)&&(d=t),T(c,He(d,3))}function of(c,d){var v=nt(c)?Io:Ad;return v(c,He(d,3))}var sf=Os(qo),mm=Os(eu);function wh(c,d){return Jt(Bs(c,d),1)}function Vg(c,d){return Jt(Bs(c,d),ae)}function gm(c,d,v){return v=v===t?1:ot(v),Jt(Bs(c,d),v)}function lf(c,d){var v=nt(c)?Tn:Ii;return v(c,He(d,3))}function iu(c,d){var v=nt(c)?Zu:L0;return v(c,He(d,3))}var kh=Dc(function(c,d,v){vt.call(c,v)?c[v].push(d):Ni(c,v,[d])});function af(c,d,v,T){c=Wr(c)?c:ff(c),v=v&&!T?ot(v):0;var P=c.length;return v<0&&(v=nn(P+v,0)),wm(c)?v<=P&&c.indexOf(d,v)>-1:!!P&&il(c,d,v)>-1}var ym=it(function(c,d,v){var T=-1,P=typeof d=="function",$=Wr(c)?de(c.length):[];return Ii(c,function(G){$[++T]=P?Un(d,G,v):Dr(G,d,v)}),$}),qg=Dc(function(c,d,v){Ni(c,v,d)});function Bs(c,d){var v=nt(c)?Rt:Rd;return v(c,He(d,3))}function Kg(c,d,v,T){return c==null?[]:(nt(d)||(d=d==null?[]:[d]),v=T?t:v,nt(v)||(v=v==null?[]:[v]),Ba(c,d,v))}var ou=Dc(function(c,d,v){c[v?0:1].push(d)},function(){return[[],[]]});function Jg(c,d,v){var T=nt(c)?pd:m0,P=arguments.length<3;return T(c,He(d,4),v,P,Ii)}function uf(c,d,v){var T=nt(c)?gg:m0,P=arguments.length<3;return T(c,He(d,4),v,P,L0)}function s(c,d){var v=nt(c)?Io:Ad;return v(c,Ee(He(d,3)))}function a(c){var d=nt(c)?Mi:On;return d(c)}function p(c,d,v){(v?Hn(c,d,v):d===t)?d=1:d=ot(d);var T=nt(c)?Cs:Ld;return T(c,d)}function y(c){var d=nt(c)?D0:Lr;return d(c)}function S(c){if(c==null)return 0;if(Wr(c))return wm(c)?ws(c):c.length;var d=bn(c);return d==Ot||d==bt?c.size:oo(c).length}function E(c,d,v){var T=nt(c)?md:Fd;return v&&Hn(c,d,v)&&(d=t),T(c,He(d,3))}var L=it(function(c,d){if(c==null)return[];var v=d.length;return v>1&&Hn(c,d[0],d[1])?d=[]:v>2&&Hn(d[0],d[1],d[2])&&(d=[d[0]]),Ba(c,Jt(d,1),[])}),J=zt||function(){return Wt.Date.now()};function Z(c,d){if(typeof d!="function")throw new Ar(l);return c=ot(c),function(){if(--c<1)return d.apply(this,arguments)}}function he(c,d,v){return d=v?t:d,d=c&&d==null?c.length:d,Di(c,H,t,t,t,t,d)}function Se(c,d){var v;if(typeof d!="function")throw new Ar(l);return c=ot(c),function(){return--c>0&&(v=d.apply(this,arguments)),c<=1&&(d=t),v}}var Ce=it(function(c,d,v){var T=O;if(v.length){var P=Nr(v,ao(Ce));T|=B}return Di(c,T,d,v,P)}),xe=it(function(c,d,v){var T=O|F;if(v.length){var P=Nr(v,ao(xe));T|=B}return Di(d,T,c,v,P)});function Pe(c,d,v){d=v?t:d;var T=Di(c,I,t,t,t,t,t,d);return T.placeholder=Pe.placeholder,T}function Re(c,d,v){d=v?t:d;var T=Di(c,W,t,t,t,t,t,d);return T.placeholder=Re.placeholder,T}function De(c,d,v){var T,P,$,G,ee,le,ve=0,we=!1,be=!1,Ae=!0;if(typeof c!="function")throw new Ar(l);d=Fi(d)||0,Xt(v)&&(we=!!v.leading,be="maxWait"in v,$=be?nn(Fi(v.maxWait)||0,d):$,Ae="trailing"in v?!!v.trailing:Ae);function Le(pn){var ho=T,js=P;return T=P=t,ve=pn,G=c.apply(js,ho),G}function Je(pn){return ve=pn,ee=Il(dt,d),we?Le(pn):G}function lt(pn){var ho=pn-le,js=pn-ve,cw=d-ho;return be?Mn(cw,$-js):cw}function Ge(pn){var ho=pn-le,js=pn-ve;return le===t||ho>=d||ho<0||be&&js>=$}function dt(){var pn=J();if(Ge(pn))return gt(pn);ee=Il(dt,lt(pn))}function gt(pn){return ee=t,Ae&&T?Le(pn):(T=P=t,G)}function di(){ee!==t&&jd(ee),ve=0,T=le=P=ee=t}function br(){return ee===t?G:gt(J())}function hi(){var pn=J(),ho=Ge(pn);if(T=arguments,P=this,le=pn,ho){if(ee===t)return Je(le);if(be)return jd(ee),ee=Il(dt,d),Le(le)}return ee===t&&(ee=Il(dt,d)),G}return hi.cancel=di,hi.flush=br,hi}var Yt=it(function(c,d){return Nd(c,1,d)}),ce=it(function(c,d,v){return Nd(c,Fi(d)||0,v)});function ne(c){return Di(c,q)}function fe(c,d){if(typeof c!="function"||d!=null&&typeof d!="function")throw new Ar(l);var v=function(){var T=arguments,P=d?d.apply(this,T):T[0],$=v.cache;if($.has(P))return $.get(P);var G=c.apply(this,T);return v.cache=$.set(P,G)||$,G};return v.cache=new(fe.Cache||Ir),v}fe.Cache=Ir;function Ee(c){if(typeof c!="function")throw new Ar(l);return function(){var d=arguments;switch(d.length){case 0:return!c.call(this);case 1:return!c.call(this,d[0]);case 2:return!c.call(this,d[0],d[1]);case 3:return!c.call(this,d[0],d[1],d[2])}return!c.apply(this,d)}}function ze(c){return Se(2,c)}var We=W0(function(c,d){d=d.length==1&&nt(d[0])?Rt(d[0],gr(He())):Rt(Jt(d,1),gr(He()));var v=d.length;return it(function(T){for(var P=-1,$=Mn(T.length,v);++P<$;)T[P]=d[P].call(this,T[P]);return Un(c,this,T)})}),Be=it(function(c,d){var v=Nr(d,ao(Be));return Di(c,B,t,d,v)}),Ke=it(function(c,d){var v=Nr(d,ao(Ke));return Di(c,z,t,d,v)}),yn=zi(function(c,d){return Di(c,Y,t,t,t,d)});function wt(c,d){if(typeof c!="function")throw new Ar(l);return d=d===t?d:ot(d),it(c,d)}function Yo(c,d){if(typeof c!="function")throw new Ar(l);return d=d==null?0:nn(ot(d),0),it(function(v){var T=v[d],P=lo(v,0,d);return T&&Po(P,T),Un(c,this,P)})}function Gg(c,d,v){var T=!0,P=!0;if(typeof c!="function")throw new Ar(l);return Xt(v)&&(T="leading"in v?!!v.leading:T,P="trailing"in v?!!v.trailing:P),De(c,d,{leading:T,maxWait:d,trailing:P})}function Xb(c){return he(c,1)}function Zb(c,d){return Be(Oc(d),c)}function e6(){if(!arguments.length)return[];var c=arguments[0];return nt(c)?c:[c]}function t6(c){return or(c,k)}function n6(c,d){return d=typeof d=="function"?d:t,or(c,k,d)}function r6(c){return or(c,m|k)}function i6(c,d){return d=typeof d=="function"?d:t,or(c,m|k,d)}function o6(c,d){return d==null||Ra(c,d,Dn(d))}function fo(c,d){return c===d||c!==c&&d!==d}var s6=Uc(Wo),l6=Uc(function(c,d){return c>=d}),su=Cc(function(){return arguments}())?Cc:function(c){return on(c)&&vt.call(c,"callee")&&!uc.call(c,"callee")},nt=de.isArray,a6=cd?gr(cd):B0;function Wr(c){return c!=null&&vm(c.length)&&!Us(c)}function hn(c){return on(c)&&Wr(c)}function u6(c){return c===!0||c===!1||on(c)&&xn(c)==ke}var Rl=Cd||sy,c6=tr?gr(tr):io;function f6(c){return on(c)&&c.nodeType===1&&!xh(c)}function d6(c){if(c==null)return!0;if(Wr(c)&&(nt(c)||typeof c=="string"||typeof c.splice=="function"||Rl(c)||cf(c)||su(c)))return!c.length;var d=bn(c);if(d==Ot||d==bt)return!c.size;if(uo(c))return!oo(c).length;for(var v in c)if(vt.call(c,v))return!1;return!0}function h6(c,d){return zr(c,d)}function p6(c,d,v){v=typeof v=="function"?v:t;var T=v?v(c,d):t;return T===t?zr(c,d,t,v):!!T}function Qg(c){if(!on(c))return!1;var d=xn(c);return d==$e||d==je||typeof c.message=="string"&&typeof c.name=="string"&&!xh(c)}function m6(c){return typeof c=="number"&&cl(c)}function Us(c){if(!Xt(c))return!1;var d=xn(c);return d==pt||d==ln||d==pe||d==Ji}function K3(c){return typeof c=="number"&&c==ot(c)}function vm(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=K}function Xt(c){var d=typeof c;return c!=null&&(d=="object"||d=="function")}function on(c){return c!=null&&typeof c=="object"}var J3=vs?gr(vs):U0;function g6(c,d){return c===d||kl(c,d,Ga(d))}function y6(c,d,v){return v=typeof v=="function"?v:t,kl(c,d,Ga(d),v)}function v6(c){return G3(c)&&c!=+c}function w6(c){if(Og(c))throw new Qe(o);return Pd(c)}function k6(c){return c===null}function x6(c){return c==null}function G3(c){return typeof c=="number"||on(c)&&xn(c)==an}function xh(c){if(!on(c)||xn(c)!=En)return!1;var d=ni(c);if(d===null)return!0;var v=vt.call(d,"constructor")&&d.constructor;return typeof v=="function"&&v instanceof v&&_a.call(v)==lc}var Yg=Xu?gr(Xu):La;function S6(c){return K3(c)&&c>=-9007199254740991&&c<=K}var Q3=rl?gr(rl):Pi;function wm(c){return typeof c=="string"||!nt(c)&&on(c)&&xn(c)==Nt}function fi(c){return typeof c=="symbol"||on(c)&&xn(c)==hr}var cf=c0?gr(c0):Fa;function b6(c){return c===t}function _6(c){return on(c)&&bn(c)==pr}function C6(c){return on(c)&&xn(c)==ge}var E6=Uc(jo),T6=Uc(function(c,d){return c<=d});function Y3(c){if(!c)return[];if(Wr(c))return wm(c)?yr(c):jn(c);if(Zi&&c[Zi])return Sg(c[Zi]());var d=bn(c),v=d==Ot?rc:d==bt?Oo:ff;return v(c)}function Ws(c){if(!c)return c===0?c:0;if(c=Fi(c),c===ae||c===-1/0){var d=c<0?-1:1;return d*_}return c===c?c:0}function ot(c){var d=Ws(c),v=d%1;return d===d?v?d-v:d:0}function X3(c){return c?to(ot(c),0,M):0}function Fi(c){if(typeof c=="number")return c;if(fi(c))return x;if(Xt(c)){var d=typeof c.valueOf=="function"?c.valueOf():c;c=Xt(d)?d+"":d}if(typeof c!="string")return c===0?c:+c;c=g0(c);var v=sg.test(c);return v||Gp.test(c)?Qu(c.slice(2),v?2:8):Kp.test(c)?x:+c}function Z3(c){return ii(c,jr(c))}function M6(c){return c?to(ot(c),-9007199254740991,K):c===0?c:0}function It(c){return c==null?"":sr(c)}var N6=El(function(c,d){if(uo(d)||Wr(d)){ii(d,Dn(d),c);return}for(var v in d)vt.call(d,v)&&Es(c,v,d[v])}),ew=El(function(c,d){ii(d,jr(d),c)}),km=El(function(c,d,v,T){ii(d,jr(d),c,T)}),A6=El(function(c,d,v,T){ii(d,Dn(d),c,T)}),I6=zi(xc);function P6(c,d){var v=ml(c);return d==null?v:Ft(v,d)}var O6=it(function(c,d){c=At(c);var v=-1,T=d.length,P=T>2?d[2]:t;for(P&&Hn(d[0],d[1],P)&&(T=1);++v<T;)for(var $=d[v],G=jr($),ee=-1,le=G.length;++ee<le;){var ve=G[ee],we=c[ve];(we===t||fo(we,_i[ve])&&!vt.call(c,ve))&&(c[ve]=$[ve])}return c}),R6=it(function(c){return c.push(t,Yd),Un(tw,t,c)});function D6(c,d){return d0(c,He(d,3),kr)}function z6(c,d){return d0(c,He(d,3),Uo)}function L6(c,d){return c==null?c:Sc(c,He(d,3),jr)}function F6(c,d){return c==null?c:za(c,He(d,3),jr)}function B6(c,d){return c&&kr(c,He(d,3))}function U6(c,d){return c&&Uo(c,He(d,3))}function W6(c){return c==null?[]:wl(c,Dn(c))}function j6(c){return c==null?[]:wl(c,jr(c))}function Xg(c,d,v){var T=c==null?t:no(c,d);return T===t?v:T}function $6(c,d){return c!=null&&nh(c,d,Rr)}function Zg(c,d){return c!=null&&nh(c,d,Ms)}var H6=K0(function(c,d,v){d!=null&&typeof d.toString!="function"&&(d=Ca.call(d)),c[d]=v},ty($r)),V6=K0(function(c,d,v){d!=null&&typeof d.toString!="function"&&(d=Ca.call(d)),vt.call(c,d)?c[d].push(v):c[d]=[v]},He),q6=it(Dr);function Dn(c){return Wr(c)?Ti(c):oo(c)}function jr(c){return Wr(c)?Ti(c,!0):Od(c)}function K6(c,d){var v={};return d=He(d,3),kr(c,function(T,P,$){Ni(v,d(T,P,$),T)}),v}function J6(c,d){var v={};return d=He(d,3),kr(c,function(T,P,$){Ni(v,P,d(T,P,$))}),v}var G6=El(function(c,d,v){Ns(c,d,v)}),tw=El(function(c,d,v,T){Ns(c,d,v,T)}),Q6=zi(function(c,d){var v={};if(c==null)return v;var T=!1;d=Rt(d,function($){return $=Ri($,c),T||(T=$.length>1),$}),ii(c,Ka(c),v),T&&(v=or(v,m|w|k,Xd));for(var P=d.length;P--;)Ic(v,d[P]);return v});function Y6(c,d){return nw(c,Ee(He(d)))}var X6=zi(function(c,d){return c==null?{}:zd(c,d)});function nw(c,d){if(c==null)return{};var v=Rt(Ka(c),function(T){return[T]});return d=He(d),$o(c,v,function(T,P){return d(T,P[0])})}function Z6(c,d,v){d=Ri(d,c);var T=-1,P=d.length;for(P||(P=1,c=t);++T<P;){var $=c==null?t:c[ai(d[T])];$===t&&(T=P,$=v),c=Us($)?$.call(c):$}return c}function e_(c,d,v){return c==null?c:Is(c,d,v)}function t_(c,d,v,T){return T=typeof T=="function"?T:t,c==null?c:Is(c,d,v,T)}var rw=Gd(Dn),iw=Gd(jr);function n_(c,d,v){var T=nt(c),P=T||Rl(c)||cf(c);if(d=He(d,4),v==null){var $=c&&c.constructor;P?v=T?new $:[]:Xt(c)?v=Us($)?ml(ni(c)):{}:v={}}return(P?Tn:kr)(c,function(G,ee,le){return d(v,G,ee,le)}),v}function r_(c,d){return c==null?!0:Ic(c,d)}function i_(c,d,v){return c==null?c:Wd(c,d,Oc(v))}function o_(c,d,v,T){return T=typeof T=="function"?T:t,c==null?c:Wd(c,d,Oc(v),T)}function ff(c){return c==null?[]:Sa(c,Dn(c))}function s_(c){return c==null?[]:Sa(c,jr(c))}function l_(c,d,v){return v===t&&(v=d,d=t),v!==t&&(v=Fi(v),v=v===v?v:0),d!==t&&(d=Fi(d),d=d===d?d:0),to(Fi(c),d,v)}function a_(c,d,v){return d=Ws(d),v===t?(v=d,d=0):v=Ws(v),c=Fi(c),Id(c,d,v)}function u_(c,d,v){if(v&&typeof v!="boolean"&&Hn(c,d,v)&&(d=v=t),v===t&&(typeof d=="boolean"?(v=d,d=t):typeof c=="boolean"&&(v=c,c=t)),c===t&&d===t?(c=0,d=1):(c=Ws(c),d===t?(d=c,c=0):d=Ws(d)),c>d){var T=c;c=d,d=T}if(v||c%1||d%1){var P=Na();return Mn(c+P*(d-c+ad("1e-"+((P+"").length-1))),d)}return Sl(c,d)}var c_=Ps(function(c,d,v){return d=d.toLowerCase(),c+(v?ow(d):d)});function ow(c){return ey(It(c).toLowerCase())}function sw(c){return c=It(c),c&&c.replace(Yp,w0).replace(s0,"")}function f_(c,d,v){c=It(c),d=sr(d);var T=c.length;v=v===t?T:to(ot(v),0,T);var P=v;return v-=d.length,v>=0&&c.slice(v,P)==d}function d_(c){return c=It(c),c&&$p.test(c)?c.replace(hs,k0):c}function h_(c){return c=It(c),c&&ha.test(c)?c.replace(da,"\\$&"):c}var p_=Ps(function(c,d,v){return c+(v?"-":"")+d.toLowerCase()}),m_=Ps(function(c,d,v){return c+(v?" ":"")+d.toLowerCase()}),g_=qd("toLowerCase");function y_(c,d,v){c=It(c),d=ot(d);var T=d?ws(c):0;if(!d||T>=d)return c;var P=(d-T)/2;return Va(Ro(P),v)+c+Va(xs(P),v)}function v_(c,d,v){c=It(c),d=ot(d);var T=d?ws(c):0;return d&&T<d?c+Va(d-T,v):c}function w_(c,d,v){c=It(c),d=ot(d);var T=d?ws(c):0;return d&&T<d?Va(d-T,v)+c:c}function k_(c,d,v){return v||d==null?d=0:d&&(d=+d),N0(It(c).replace(Zf,""),d||0)}function x_(c,d,v){return(v?Hn(c,d,v):d===t)?d=1:d=ot(d),As(It(c),d)}function S_(){var c=arguments,d=It(c[0]);return c.length<3?d:d.replace(c[1],c[2])}var b_=Ps(function(c,d,v){return c+(v?"_":"")+d.toLowerCase()});function __(c,d,v){return v&&typeof v!="number"&&Hn(c,d,v)&&(d=v=t),v=v===t?M:v>>>0,v?(c=It(c),c&&(typeof d=="string"||d!=null&&!Yg(d))&&(d=sr(d),!d&&sl(c))?lo(yr(c),0,v):c.split(d,v)):[]}var C_=Ps(function(c,d,v){return c+(v?" ":"")+ey(d)});function E_(c,d,v){return c=It(c),v=v==null?0:to(ot(v),0,c.length),d=sr(d),c.slice(v,v+d.length)==d}function T_(c,d,v){var T=j.templateSettings;v&&Hn(c,d,v)&&(d=t),c=It(c),d=km({},d,T,Qd);var P=km({},d.imports,T.imports,Qd),$=Dn(P),G=Sa(P,$),ee,le,ve=0,we=d.interpolate||ju,be="__p += '",Ae=ba((d.escape||ju).source+"|"+we.source+"|"+(we===Yf?ps:ju).source+"|"+(d.evaluate||ju).source+"|$","g"),Le="//# sourceURL="+(vt.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++hg+"]")+`
`;c.replace(Ae,function(Ge,dt,gt,di,br,hi){return gt||(gt=di),be+=c.slice(ve,hi).replace(lg,x0),dt&&(ee=!0,be+=`' +
__e(`+dt+`) +
'`),br&&(le=!0,be+=`';
`+br+`;
__p += '`),gt&&(be+=`' +
((__t = (`+gt+`)) == null ? '' : __t) +
'`),ve=hi+Ge.length,Ge}),be+=`';
`;var Je=vt.call(d,"variable")&&d.variable;if(!Je)be=`with (obj) {
`+be+`
}
`;else if(ig.test(Je))throw new Qe(u);be=(le?be.replace(mr,""):be).replace(Gf,"$1").replace(Qf,"$1;"),be="function("+(Je||"obj")+`) {
`+(Je?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ee?", __e = _.escape":"")+(le?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+be+`return __p
}`;var lt=aw(function(){return yt($,Le+"return "+be).apply(t,G)});if(lt.source=be,Qg(lt))throw lt;return lt}function M_(c){return It(c).toLowerCase()}function N_(c){return It(c).toUpperCase()}function A_(c,d,v){if(c=It(c),c&&(v||d===t))return g0(c);if(!c||!(d=sr(d)))return c;var T=yr(c),P=yr(d),$=y0(T,P),G=kd(T,P)+1;return lo(T,$,G).join("")}function I_(c,d,v){if(c=It(c),c&&(v||d===t))return c.slice(0,oc(c)+1);if(!c||!(d=sr(d)))return c;var T=yr(c),P=kd(T,yr(d))+1;return lo(T,0,P).join("")}function P_(c,d,v){if(c=It(c),c&&(v||d===t))return c.replace(Zf,"");if(!c||!(d=sr(d)))return c;var T=yr(c),P=y0(T,yr(d));return lo(T,P).join("")}function O_(c,d){var v=C,T=U;if(Xt(d)){var P="separator"in d?d.separator:P;v="length"in d?ot(d.length):v,T="omission"in d?sr(d.omission):T}c=It(c);var $=c.length;if(sl(c)){var G=yr(c);$=G.length}if(v>=$)return c;var ee=v-ws(T);if(ee<1)return T;var le=G?lo(G,0,ee).join(""):c.slice(0,ee);if(P===t)return le+T;if(G&&(ee+=le.length-ee),Yg(P)){if(c.slice(ee).search(P)){var ve,we=le;for(P.global||(P=ba(P.source,It(td.exec(P))+"g")),P.lastIndex=0;ve=P.exec(we);)var be=ve.index;le=le.slice(0,be===t?ee:be)}}else if(c.indexOf(sr(P),ee)!=ee){var Ae=le.lastIndexOf(P);Ae>-1&&(le=le.slice(0,Ae))}return le+T}function R_(c){return c=It(c),c&&jp.test(c)?c.replace(ds,S0):c}var D_=Ps(function(c,d,v){return c+(v?" ":"")+d.toUpperCase()}),ey=qd("toUpperCase");function lw(c,d,v){return c=It(c),d=v?t:d,d===t?xg(c)?Cg(c):vg(c):c.match(d)||[]}var aw=it(function(c,d){try{return Un(c,t,d)}catch(v){return Qg(v)?v:new Qe(v)}}),z_=zi(function(c,d){return Tn(d,function(v){v=ai(v),Ni(c,v,Ce(c[v],c))}),c});function L_(c){var d=c==null?0:c.length,v=He();return c=d?Rt(c,function(T){if(typeof T[1]!="function")throw new Ar(l);return[v(T[0]),T[1]]}):[],it(function(T){for(var P=-1;++P<d;){var $=c[P];if(Un($[0],this,T))return Un($[1],this,T)}})}function F_(c){return z0(or(c,m))}function ty(c){return function(){return c}}function B_(c,d){return c==null||c!==c?d:c}var U_=Fc(),W_=Fc(!0);function $r(c){return c}function ny(c){return xl(typeof c=="function"?c:or(c,m))}function j_(c){return Tc(or(c,m))}function $_(c,d){return jt(c,or(d,m))}var H_=it(function(c,d){return function(v){return Dr(v,c,d)}}),V_=it(function(c,d){return function(v){return Dr(c,v,d)}});function ry(c,d,v){var T=Dn(d),P=wl(d,T);v==null&&!(Xt(d)&&(P.length||!T.length))&&(v=d,d=c,c=this,P=wl(d,Dn(d)));var $=!(Xt(v)&&"chain"in v)||!!v.chain,G=Us(c);return Tn(P,function(ee){var le=d[ee];c[ee]=le,G&&(c.prototype[ee]=function(){var ve=this.__chain__;if($||ve){var we=c(this.__wrapped__),be=we.__actions__=jn(this.__actions__);return be.push({func:le,args:arguments,thisArg:c}),we.__chain__=ve,we}return le.apply(c,Po([this.value()],arguments))})}),c}function q_(){return Wt._===this&&(Wt._=C0),this}function iy(){}function K_(c){return c=ot(c),it(function(d){return Mc(d,c)})}var J_=Bc(Rt),G_=Bc(dd),Q_=Bc(md);function uw(c){return Oe(c)?yd(ai(c)):Ht(c)}function Y_(c){return function(d){return c==null?t:no(c,d)}}var X_=Jd(),Z_=Jd(!0);function oy(){return[]}function sy(){return!1}function eC(){return{}}function tC(){return""}function nC(){return!0}function rC(c,d){if(c=ot(c),c<1||c>K)return[];var v=M,T=Mn(c,M);d=He(d),c-=M;for(var P=wd(T,d);++v<c;)d(v);return P}function iC(c){return nt(c)?Rt(c,ai):fi(c)?[c]:jn(sh(It(c)))}function oC(c){var d=++ul;return It(c)+d}var sC=Ha(function(c,d){return c+d},0),lC=Sn("ceil"),aC=Ha(function(c,d){return c/d},1),uC=Sn("floor");function cC(c){return c&&c.length?Ts(c,$r,Wo):t}function fC(c,d){return c&&c.length?Ts(c,He(d,2),Wo):t}function dC(c){return p0(c,$r)}function hC(c,d){return p0(c,He(d,2))}function pC(c){return c&&c.length?Ts(c,$r,jo):t}function mC(c,d){return c&&c.length?Ts(c,He(d,2),jo):t}var gC=Ha(function(c,d){return c*d},1),yC=Sn("round"),vC=Ha(function(c,d){return c-d},0);function wC(c){return c&&c.length?vd(c,$r):0}function kC(c,d){return c&&c.length?vd(c,He(d,2)):0}return j.after=Z,j.ary=he,j.assign=N6,j.assignIn=ew,j.assignInWith=km,j.assignWith=A6,j.at=I6,j.before=Se,j.bind=Ce,j.bindAll=z_,j.bindKey=xe,j.castArray=e6,j.chain=tf,j.chunk=Kc,j.compact=lh,j.concat=Br,j.cond=L_,j.conforms=F_,j.constant=ty,j.countBy=hm,j.create=P6,j.curry=Pe,j.curryRight=Re,j.debounce=De,j.defaults=O6,j.defaultsDeep=R6,j.defer=Yt,j.delay=ce,j.difference=mt,j.differenceBy=gn,j.differenceWith=rn,j.drop=Cn,j.dropRight=Sr,j.dropRightWhile=Pl,j.dropWhile=dn,j.fill=Za,j.filter=of,j.flatMap=wh,j.flatMapDeep=Vg,j.flatMapDepth=gm,j.flatten=Jc,j.flattenDeep=tu,j.flattenDepth=lr,j.flip=ne,j.flow=U_,j.flowRight=W_,j.fromPairs=ah,j.functions=W6,j.functionsIn=j6,j.groupBy=kh,j.initial=Gc,j.intersection=uh,j.intersectionBy=Ko,j.intersectionWith=Qc,j.invert=H6,j.invertBy=V6,j.invokeMap=ym,j.iteratee=ny,j.keyBy=qg,j.keys=Dn,j.keysIn=jr,j.map=Bs,j.mapKeys=K6,j.mapValues=J6,j.matches=j_,j.matchesProperty=$_,j.memoize=fe,j.merge=G6,j.mergeWith=tw,j.method=H_,j.methodOf=V_,j.mixin=ry,j.negate=Ee,j.nthArg=K_,j.omit=Q6,j.omitBy=Y6,j.once=ze,j.orderBy=Kg,j.over=J_,j.overArgs=We,j.overEvery=G_,j.overSome=Q_,j.partial=Be,j.partialRight=Ke,j.partition=ou,j.pick=X6,j.pickBy=nw,j.property=uw,j.propertyOf=Y_,j.pull=Yc,j.pullAll=ru,j.pullAllBy=qn,j.pullAllWith=Go,j.pullAt=ui,j.range=X_,j.rangeRight=Z_,j.rearg=yn,j.reject=s,j.remove=ar,j.rest=wt,j.reverse=Xc,j.sampleSize=p,j.set=e_,j.setWith=t_,j.shuffle=y,j.slice=fh,j.sortBy=L,j.sortedUniq=ph,j.sortedUniqBy=zs,j.split=__,j.spread=Yo,j.tail=sm,j.take=lm,j.takeRight=mh,j.takeRightWhile=Zc,j.takeWhile=Dg,j.tap=jg,j.throttle=Gg,j.thru=ci,j.toArray=Y3,j.toPairs=rw,j.toPairsIn=iw,j.toPath=iC,j.toPlainObject=Z3,j.transform=n_,j.unary=Xb,j.union=zg,j.unionBy=am,j.unionWith=um,j.uniq=Ls,j.uniqBy=Lg,j.uniqWith=Ol,j.unset=r_,j.unzip=ef,j.unzipWith=Vt,j.update=i_,j.updateWith=o_,j.values=ff,j.valuesIn=s_,j.without=Fg,j.words=lw,j.wrap=Zb,j.xor=cm,j.xorBy=Bg,j.xorWith=Ug,j.zip=fm,j.zipObject=dm,j.zipObjectDeep=Wg,j.zipWith=Ur,j.entries=rw,j.entriesIn=iw,j.extend=ew,j.extendWith=km,ry(j,j),j.add=sC,j.attempt=aw,j.camelCase=c_,j.capitalize=ow,j.ceil=lC,j.clamp=l_,j.clone=t6,j.cloneDeep=r6,j.cloneDeepWith=i6,j.cloneWith=n6,j.conformsTo=o6,j.deburr=sw,j.defaultTo=B_,j.divide=aC,j.endsWith=f_,j.eq=fo,j.escape=d_,j.escapeRegExp=h_,j.every=pm,j.find=sf,j.findIndex=qo,j.findKey=D6,j.findLast=mm,j.findLastIndex=eu,j.findLastKey=z6,j.floor=uC,j.forEach=lf,j.forEachRight=iu,j.forIn=L6,j.forInRight=F6,j.forOwn=B6,j.forOwnRight=U6,j.get=Xg,j.gt=s6,j.gte=l6,j.has=$6,j.hasIn=Zg,j.head=Rs,j.identity=$r,j.includes=af,j.indexOf=co,j.inRange=a_,j.invoke=q6,j.isArguments=su,j.isArray=nt,j.isArrayBuffer=a6,j.isArrayLike=Wr,j.isArrayLikeObject=hn,j.isBoolean=u6,j.isBuffer=Rl,j.isDate=c6,j.isElement=f6,j.isEmpty=d6,j.isEqual=h6,j.isEqualWith=p6,j.isError=Qg,j.isFinite=m6,j.isFunction=Us,j.isInteger=K3,j.isLength=vm,j.isMap=J3,j.isMatch=g6,j.isMatchWith=y6,j.isNaN=v6,j.isNative=w6,j.isNil=x6,j.isNull=k6,j.isNumber=G3,j.isObject=Xt,j.isObjectLike=on,j.isPlainObject=xh,j.isRegExp=Yg,j.isSafeInteger=S6,j.isSet=Q3,j.isString=wm,j.isSymbol=fi,j.isTypedArray=cf,j.isUndefined=b6,j.isWeakMap=_6,j.isWeakSet=C6,j.join=Jo,j.kebabCase=p_,j.last=Vn,j.lastIndexOf=nu,j.lowerCase=m_,j.lowerFirst=g_,j.lt=E6,j.lte=T6,j.max=cC,j.maxBy=fC,j.mean=dC,j.meanBy=hC,j.min=pC,j.minBy=mC,j.stubArray=oy,j.stubFalse=sy,j.stubObject=eC,j.stubString=tC,j.stubTrue=nC,j.multiply=gC,j.nth=ch,j.noConflict=q_,j.noop=iy,j.now=J,j.pad=y_,j.padEnd=v_,j.padStart=w_,j.parseInt=k_,j.random=u_,j.reduce=Jg,j.reduceRight=uf,j.repeat=x_,j.replace=S_,j.result=Z6,j.round=yC,j.runInContext=ie,j.sample=a,j.size=S,j.snakeCase=b_,j.some=E,j.sortedIndex=dh,j.sortedIndexBy=Rg,j.sortedIndexOf=Qo,j.sortedLastIndex=om,j.sortedLastIndexBy=hh,j.sortedLastIndexOf=Ds,j.startCase=C_,j.startsWith=E_,j.subtract=vC,j.sum=wC,j.sumBy=kC,j.template=T_,j.times=rC,j.toFinite=Ws,j.toInteger=ot,j.toLength=X3,j.toLower=M_,j.toNumber=Fi,j.toSafeInteger=M6,j.toString=It,j.toUpper=N_,j.trim=A_,j.trimEnd=I_,j.trimStart=P_,j.truncate=O_,j.unescape=R_,j.uniqueId=oC,j.upperCase=D_,j.upperFirst=ey,j.each=lf,j.eachRight=iu,j.first=Rs,ry(j,function(){var c={};return kr(j,function(d,v){vt.call(j.prototype,v)||(c[v]=d)}),c}(),{chain:!1}),j.VERSION=r,Tn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){j[c].placeholder=j}),Tn(["drop","take"],function(c,d){tt.prototype[c]=function(v){v=v===t?1:nn(ot(v),0);var T=this.__filtered__&&!d?new tt(this):this.clone();return T.__filtered__?T.__takeCount__=Mn(v,T.__takeCount__):T.__views__.push({size:Mn(v,M),type:c+(T.__dir__<0?"Right":"")}),T},tt.prototype[c+"Right"]=function(v){return this.reverse()[c](v).reverse()}}),Tn(["filter","map","takeWhile"],function(c,d){var v=d+1,T=v==ue||v==se;tt.prototype[c]=function(P){var $=this.clone();return $.__iteratees__.push({iteratee:He(P,3),type:v}),$.__filtered__=$.__filtered__||T,$}}),Tn(["head","last"],function(c,d){var v="take"+(d?"Right":"");tt.prototype[c]=function(){return this[v](1).value()[0]}}),Tn(["initial","tail"],function(c,d){var v="drop"+(d?"":"Right");tt.prototype[c]=function(){return this.__filtered__?new tt(this):this[v](1)}}),tt.prototype.compact=function(){return this.filter($r)},tt.prototype.find=function(c){return this.filter(c).head()},tt.prototype.findLast=function(c){return this.reverse().find(c)},tt.prototype.invokeMap=it(function(c,d){return typeof c=="function"?new tt(this):this.map(function(v){return Dr(v,c,d)})}),tt.prototype.reject=function(c){return this.filter(Ee(He(c)))},tt.prototype.slice=function(c,d){c=ot(c);var v=this;return v.__filtered__&&(c>0||d<0)?new tt(v):(c<0?v=v.takeRight(-c):c&&(v=v.drop(c)),d!==t&&(d=ot(d),v=d<0?v.dropRight(-d):v.take(d-c)),v)},tt.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},tt.prototype.toArray=function(){return this.take(M)},kr(tt.prototype,function(c,d){var v=/^(?:filter|find|map|reject)|While$/.test(d),T=/^(?:head|last)$/.test(d),P=j[T?"take"+(d=="last"?"Right":""):d],$=T||/^find/.test(d);P&&(j.prototype[d]=function(){var G=this.__wrapped__,ee=T?[1]:arguments,le=G instanceof tt,ve=ee[0],we=le||nt(G),be=function(dt){var gt=P.apply(j,Po([dt],ee));return T&&Ae?gt[0]:gt};we&&v&&typeof ve=="function"&&ve.length!=1&&(le=we=!1);var Ae=this.__chain__,Le=!!this.__actions__.length,Je=$&&!Ae,lt=le&&!Le;if(!$&&we){G=lt?G:new tt(this);var Ge=c.apply(G,ee);return Ge.__actions__.push({func:ci,args:[be],thisArg:t}),new Nn(Ge,Ae)}return Je&&lt?c.apply(this,ee):(Ge=this.thru(be),Je?T?Ge.value()[0]:Ge.value():Ge)})}),Tn(["pop","push","shift","sort","splice","unshift"],function(c){var d=Yi[c],v=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",T=/^(?:pop|shift)$/.test(c);j.prototype[c]=function(){var P=arguments;if(T&&!this.__chain__){var $=this.value();return d.apply(nt($)?$:[],P)}return this[v](function(G){return d.apply(nt(G)?G:[],P)})}}),kr(tt.prototype,function(c,d){var v=j[d];if(v){var T=v.name+"";vt.call(hl,T)||(hl[T]=[]),hl[T].push({name:d,func:v})}}),hl[Ml(t,F).name]=[{name:"wrapper",func:t}],tt.prototype.clone=gc,tt.prototype.reverse=Td,tt.prototype.value=gl,j.prototype.at=nf,j.prototype.chain=Fs,j.prototype.commit=rf,j.prototype.next=gh,j.prototype.plant=$g,j.prototype.reverse=vh,j.prototype.toJSON=j.prototype.valueOf=j.prototype.value=Hg,j.prototype.first=j.prototype.head,Zi&&(j.prototype[Zi]=yh),j},ll=Eg();bi?((bi.exports=ll)._=ll,xa._=ll):Wt._=ll}).call(u8)}(Eh,Eh.exports)),Eh.exports}c8();var yy={exports:{}},Iw;function f8(){return Iw||(Iw=1,function(n,e){(function(t,r){n.exports=r()})(self,function(){return(()=>{var t={d:(f,h)=>{for(var g in h)t.o(h,g)&&!t.o(f,g)&&Object.defineProperty(f,g,{enumerable:!0,get:h[g]})},o:(f,h)=>Object.prototype.hasOwnProperty.call(f,h)},r={};function i(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}function o(f,h){for(var g=0;g<h.length;g++){var m=h[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}t.d(r,{default:()=>u});var l=function(){function f(m){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i(this,f),this.rs=m,this.leaveOpen=!!w.leaveOpen&&w.leaveOpen,this.autoCloseAfter=w.autoCloseAfter?w.autoCloseAfter:1500,this.skipInitial=!!w.skipInitial&&w.skipInitial,this.logging=!!w.logging&&w.logging,w.hasOwnProperty("modalBackdrop")){if(typeof w.modalBackdrop!="boolean"&&w.modalBackdrop!=="onlySmallScreens")throw'options.modalBackdrop has to be true/false or "onlySmallScreens"';this.modalBackdrop=w.modalBackdrop}else this.modalBackdrop="onlySmallScreens";this.active=!1,this.online=!1,this.closed=!1,this.lastSynced=null,this.lastSyncedUpdateLoop=null}var h,g;return h=f,g=[{key:"log",value:function(){if(this.logging){for(var m,w=arguments.length,k=new Array(w),b=0;b<w;b++)k[b]=arguments[b];(m=console).debug.apply(m,["[RS-WIDGET] "].concat(k))}}},{key:"eventHandler",value:function(m,w){var k=this;switch(this.log("EVENT: ",m),m){case"ready":this.setState(this.state);break;case"sync-req-done":this.syncInProgress=!0,this.rsSyncButton.classList.add("rs-rotate"),setTimeout(function(){k.syncInProgress&&(k.rsConnectedLabel.textContent="Synchronizing")},1e3);break;case"sync-done":if(this.online&&!w.completed)return;this.syncInProgress=!1,this.rsSyncButton.classList.remove("rs-rotate"),this.updateLastSyncedStatus(),!this.closed&&this.shouldCloseWhenSyncDone&&setTimeout(this.close.bind(this),this.autoCloseAfter);break;case"disconnected":this.active=!1,this.setOnline(),this.setBackendClass(),this.open(),this.setInitialState();break;case"connected":this.active=!0,this.online=!0,this.rs.hasFeature("Sync")?(this.shouldCloseWhenSyncDone=!0,this.rs.on("sync-req-done",function(A){return k.eventHandler("sync-req-done",A)}),this.rs.on("sync-done",function(A){return k.eventHandler("sync-done",A)})):(this.rsSyncButton.classList.add("rs-hidden"),setTimeout(this.close.bind(this),this.autoCloseAfter));var b=this.rs.remote.userAddress;this.rsConnectedUser.innerHTML=b,this.setBackendClass(this.rs.backend),this.rsConnectedLabel.textContent="Connected",this.setState("connected");break;case"network-offline":this.setOffline();break;case"network-online":this.setOnline();break;case"error":this.setBackendClass(this.rs.backend),w.name==="DiscoveryError"?this.handleDiscoveryError(w):w.name==="SyncError"?this.handleSyncError(w):w.name==="Unauthorized"?this.handleUnauthorized(w):console.debug('Encountered unhandled error: "'.concat(w,'"'))}}},{key:"setState",value:function(m){if(m){this.log("Setting state ",m);var w=document.querySelector(".rs-box.rs-selected");w&&(w.classList.remove("rs-selected"),w.setAttribute("aria-hidden","true"));var k=document.querySelector(".rs-box.rs-box-"+m);k&&(k.classList.add("rs-selected"),k.setAttribute("aria-hidden","false"));var b=this.rsWidget.className.match(/rs-state-\S+/g)[0];this.rsWidget.classList.remove(b),this.rsWidget.classList.add("rs-state-".concat(m||this.state)),this.state=m}}},{key:"setInitialState",value:function(){this.skipInitial?this.showChooseOrSignIn():this.setState("initial")}},{key:"createHtmlTemplate",value:function(){var m=document.createElement("div");m.id="remotestorage-widget",m.innerHTML='<div class="remotestorage-widget-modal-backdrop"></div> <div class="rs-widget rs-state-initial"> <div class="rs-widget-icon"> <svg class="rs-main-logo" id="rs-main-logo-remotestorage" xmlns="http://www.w3.org/2000/svg" version="1.1" xml:space="preserve" width="0.739008in" height="0.853339in" style="shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd" viewBox="0 0 739 853" xmlns:xlink="http://www.w3.org/1999/xlink"> <g> <polygon class="rs-logo-shape" points="370,754 0,542 0,640 185,747 370,853 554,747 739,640 739,525 739,525 739,476 739,427 739,378 653,427 370,589 86,427 86,427 86,361 185,418 370,524 554,418 653,361 739,311 739,213 739,213 554,107 370,0 185,107 58,180 144,230 228,181 370,100 511,181 652,263 370,425 87,263 87,263 0,213 0,213 0,311 0,378 0,427 0,476 86,525 185,582 370,689 554,582 653,525 653,590 653,592 "/> </g> </svg> <svg class="rs-main-logo" id="rs-main-logo-dropbox" width="40" height="36" xml:space="preserve" stroke-miterlimit="1.4142" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 104 97" stroke-linejoin="round" version="1.1" clip-rule="evenodd"> <path d="m30.691 0l-30.691 20.039 21.221 16.994 30.946-19.108-21.476-17.925z" fill="#007ee5"/> <path d="m0 54.028l30.691 20.039 21.476-17.926-30.945-19.108-21.222 16.995z" fill="#007ee5"/> <path d="m52.167 56.142l21.477 17.926 30.696-20.039-21.227-16.995-30.946 19.108z" fill="#007ee5"/> <path d="m104.34 20.039l-30.696-20.039-21.477 17.925 30.946 19.108 21.227-16.994z" fill="#007ee5"/> <path d="m52.23 59.998l-21.538 17.873-9.218-6.018v6.747l30.756 18.443 30.756-18.443v-6.747l-9.216 6.018-21.54-17.873z" fill="#007ee5"/> </svg> <svg class="rs-main-logo" id="rs-main-logo-googledrive" width="40" height="40" version="1.1" stroke-miterlimit="1.4142" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" width="100%" stroke-linejoin="round" clip-rule="evenodd" viewBox="0 0 511 442" height="100%"> <path d="m166.23 0.10955l0.44-0.009998 0.04 0.49-0.56 0.02 0.08-0.5z" fill="#0ba25e"/> <path d="m164.52 3.3896c0.39-0.56 1.15-1.68 1.54-2.24l0.7-0.11c0.52 6.34 2.38 12.45 3.78 18.62 6.02 26.81 12.1 53.6 18.43 80.33 4.15 18.33 8.78 36.57 12.58 54.97 3.3 11.39 5.07 23.14 8.26 34.55 2.06 10.64 5.29 21.02 7.02 31.72-0.7 1.17-1.4 2.35-2.11 3.52-0.17 0.27-0.53 0.83-0.7 1.11l-0.26 0.45c-0.04 0.08-0.13 0.25-0.18 0.33-0.39 0.72-1.17 2.15-1.56 2.86-0.07 0.13-0.22 0.39-0.3 0.52l-0.71 1.26c-0.09 0.15-0.26 0.44-0.34 0.59l-0.83 1.45c-0.04 0.08-0.13 0.24-0.18 0.32l-1.03 1.8c-0.09 0.15-0.27 0.47-0.36 0.63-0.1 0.17-0.3 0.5-0.4 0.67l-1.01 1.74c-0.08 0.13-0.24 0.41-0.32 0.54l-0.62 1.05c-0.1 0.18-0.32 0.55-0.42 0.73-0.4 0.69-1.19 2.07-1.59 2.77-0.07 0.12-0.22 0.37-0.29 0.5l-0.63 1.05c-0.1 0.19-0.32 0.55-0.43 0.74-0.37 0.65-1.13 1.94-1.5 2.59-0.09 0.15-0.26 0.46-0.35 0.61l-0.75 1.35c-0.07 0.12-0.21 0.37-0.28 0.49l-0.77 1.35-0.32 0.56c-0.4 0.66-1.18 1.99-1.57 2.66-0.09 0.15-0.27 0.46-0.36 0.62l-0.71 1.28c-0.07 0.12-0.2 0.35-0.26 0.47l-0.82 1.42c-0.07 0.13-0.22 0.38-0.29 0.5-0.42 0.72-1.25 2.15-1.67 2.87-0.07 0.13-0.23 0.39-0.31 0.52l-0.6 0.99c-0.1 0.18-0.31 0.53-0.41 0.71-0.38 0.66-1.13 1.97-1.51 2.63-0.06 0.11-0.2 0.35-0.26 0.46l-0.82 1.46c-0.06 0.11-0.18 0.32-0.24 0.43l-0.84 1.47c-0.07 0.11-0.21 0.35-0.28 0.46-0.39 0.66-1.18 1.96-1.57 2.62-0.11 0.17-0.31 0.53-0.42 0.71l-0.59 1.1c-0.08 0.14-0.23 0.42-0.3 0.55l-1.03 1.78c-0.08 0.15-0.26 0.45-0.34 0.6-0.09 0.14-0.25 0.43-0.33 0.57-1.69 2.85-3.22 5.79-5.09 8.53-10.65 17.37-20.45 35.28-30.76 52.86-16.74 28.97-33.46 57.94-50.2 86.91-2.51 4.51-5.37 8.83-7.53 13.54-0.11 0.16-0.33 0.48-0.44 0.64-4.01-5.78-7.11-12.16-10.78-18.16-16.74-28.99-33.49-57.97-50.22-86.97-9.3-16.31-18.99-32.42-28.04-48.88 35.84-61.85 71.52-123.81 107.29-185.7 0.03-0.06 0.1-0.17 0.13-0.23l0.98-1.68c0.04-0.07 0.12-0.21 0.17-0.28l0.99-1.69c0.09-0.15 0.27-0.47 0.37-0.62 0.1-0.18 0.3-0.53 0.4-0.71l0.99-1.76 0.28-0.48 0.74-1.18c0.13-0.19 0.39-0.58 0.52-0.78 0.36-0.54 1.09-1.63 1.46-2.17 0.04-0.18 0.11-0.53 0.15-0.7l0.87-1.67 0.16-0.28 1-1.68c0.1-0.16 0.3-0.5 0.4-0.67 0.11-0.19 0.33-0.58 0.45-0.78l0.84-1.47c0.09-0.16 0.27-0.47 0.36-0.62l0.7-1.23c0.08-0.13 0.24-0.41 0.32-0.55 0.39-0.67 1.17-2.01 1.57-2.68l0.32-0.56 0.73-1.33c0.06-0.1 0.18-0.32 0.24-0.42l0.96-1.68c0.12-0.2 0.37-0.61 0.5-0.81l0.65-0.98c0.14-0.2 0.41-0.59 0.55-0.78 0.12-0.2 0.37-0.6 0.5-0.8l0.54-1.04c0.18-0.39 0.55-1.17 0.73-1.56l0.55-0.77c0.1-0.14 0.29-0.41 0.39-0.55 0.37-0.31 1.12-0.95 1.49-1.27l-0.07-1.17c0.06-0.14 0.2-0.42 0.27-0.56l0.85-1.69c0.07-0.12 0.21-0.37 0.28-0.49l0.75-1.22c0.14-0.2 0.41-0.6 0.55-0.8 0.34-0.56 1.03-1.66 1.37-2.21 0.1-0.2 0.28-0.59 0.38-0.79l0.53-1.15c0.16-0.3 0.5-0.91 0.67-1.22l0.66-0.94c0.14-0.19 0.42-0.57 0.56-0.76 0.12-0.2 0.37-0.6 0.49-0.8l0.49-1.03c0.11-0.23 0.34-0.7 0.45-0.93l0.86-1.66c0.13-0.2 0.38-0.62 0.5-0.83l0.66-0.98c0.14-0.2 0.42-0.58 0.56-0.78 0.13-0.2 0.38-0.61 0.5-0.81l0.51-1.04c0.15-0.29 0.44-0.86 0.58-1.15l0.68-1.12c0.12-0.19 0.36-0.57 0.49-0.76 0.36-0.56 1.09-1.68 1.46-2.23 0.04-0.17 0.13-0.51 0.17-0.68l0.87-1.66c0.03-0.07 0.11-0.2 0.15-0.27l1-1.71c0.1-0.17 0.29-0.5 0.39-0.67 0.1-0.16 0.29-0.5 0.39-0.66l1-1.75c0.04-0.07 0.12-0.21 0.16-0.29l0.94-1.63c0.05-0.07 0.14-0.22 0.18-0.3l1.01-1.7c0.09-0.16 0.27-0.46 0.36-0.62 0.1-0.17 0.3-0.52 0.4-0.7l0.96-1.69c0.06-0.11 0.18-0.32 0.24-0.42l0.81-1.31c0.13-0.19 0.39-0.58 0.51-0.77 0.37-0.55 1.09-1.65 1.46-2.2 0.03-0.17 0.11-0.51 0.15-0.68l0.85-1.63c0.07-0.12 0.22-0.37 0.29-0.5l0.76-1.19c0.14-0.19 0.4-0.58 0.54-0.78 0.35-0.56 1.05-1.67 1.4-2.23 0.05-0.16 0.14-0.48 0.19-0.64l0.88-1.65c0.04-0.08 0.12-0.22 0.16-0.3l1.02-1.7204c0.08-0.15 0.26-0.45 0.35-0.6 0.09-0.17 0.27-0.49 0.36-0.65l1-1.78c0.05-0.07 0.13-0.22 0.17-0.29l0.95-1.61c0.03-0.05 0.1-0.16 0.13-0.21z" fill="#0ba25e"/> <path id="#fccd48ff" fill="#fccd48" d="m166.67 0.099552c32.48-0.15 64.97-0.02 97.46-0.07 26.88 0.099998 53.78-0.21 80.65 0.15 0.53 1.02 1.07 2.03 1.64 3.04 0.08 0.13 0.23 0.41 0.31 0.55 2.6 4.53 5.24 9.0404 7.81 13.58 0.05 0.08 0.13 0.23 0.18 0.3 4.98 8.55 9.94 17.11 14.83 25.71 0.04 0.07 0.13 0.21 0.17 0.29 0.89 1.53 1.81 3.06 2.72 4.6 0.08 0.13 0.23 0.4 0.31 0.54 1.25 2.2 2.51 4.39 3.78 6.58 0.05 0.07 0.13 0.21 0.17 0.29 1.27 2.18 2.52 4.38 3.78 6.58 0.08 0.13 0.23 0.39 0.31 0.52 1.27 2.14 2.5 4.3 3.72 6.46 0.08 0.13 0.23 0.4 0.31 0.53 11.94 20.62 23.85 41.25 35.75 61.9-1.36 5.99 1.93 11.95 0.1 17.97-1.11 16.45-7.32 32.46-17.56 45.38-3.33 3.61-0.1 8.62-0.46 12.9-3.59 4.35-8.21 7.6-12.57 11.11 0.01 3.28 0.02 6.56-0.13 9.85-3.89 2.57-8.35 4.06-12.3 6.54-0.42 1.33-0.85 2.67-1.26 4.02-3.17 1.5-6.56 2.47-9.73 3.99-12.55-3.6-24.97-7.61-37.49-11.32-11.65-3.85-23.58-6.87-35.11-11.11l-0.66-1.18c-0.06-0.09-0.16-0.27-0.21-0.36l-0.95-1.61-0.4-0.68c-0.09-0.15-0.25-0.44-0.34-0.59-0.71-1.26-1.36-2.55-1.94-3.87l-0.06-0.13-0.07-0.1c-0.44-0.7-1.33-2.11-1.78-2.81-0.05-0.08-0.15-0.24-0.2-0.33l-0.29-0.46c-0.17-0.29-0.52-0.86-0.69-1.15-0.43-0.73-1.3-2.19-1.73-2.92-0.11-0.18-0.32-0.55-0.43-0.73l-0.61-1.04c-0.08-0.14-0.24-0.41-0.32-0.55l-0.97-1.67c-0.04-0.07-0.13-0.21-0.17-0.29l-1.02-1.75c-0.09-0.16-0.27-0.48-0.36-0.63-0.1-0.18-0.31-0.55-0.41-0.73l-0.83-1.46c-0.1-0.17-0.3-0.53-0.4-0.7l-0.64-1.13c-0.09-0.15-0.26-0.45-0.35-0.6-0.39-0.72-1.18-2.15-1.58-2.87-0.04-0.08-0.14-0.25-0.18-0.33l-0.27-0.47c-0.19-0.28-0.56-0.84-0.75-1.12-0.99-1.66-1.92-3.36-2.81-5.07-0.05-0.08-0.14-0.25-0.18-0.33l-0.26-0.46c-0.19-0.27-0.57-0.81-0.76-1.07-0.44-0.79-1.32-2.37-1.76-3.16-0.05-0.08-0.15-0.25-0.19-0.34l-0.27-0.48c-0.2-0.33-0.59-0.98-0.79-1.31l-0.86-1.45c-0.08-0.14-0.25-0.42-0.34-0.57-0.38-0.66-1.15-1.99-1.54-2.65-0.09-0.15-0.26-0.46-0.35-0.62-0.68-1.13-1.33-2.27-1.97-3.41-0.05-0.09-0.16-0.27-0.21-0.36l-0.95-1.63c-0.1-0.16-0.29-0.48-0.38-0.65-0.09-0.15-0.26-0.45-0.35-0.6l-1.01-1.76c-0.05-0.08-0.14-0.25-0.19-0.33l-0.82-1.47c-0.07-0.12-0.2-0.35-0.27-0.47-0.38-0.67-1.15-2-1.53-2.67-0.08-0.14-0.24-0.41-0.32-0.54-0.62-1.03-1.24-2.07-1.84-3.1-27.73-48.12-55.5-96.21-83.29-144.3-1.74-3.0004-3.32-6.1204-5.45-8.8804l-0.05-0.45005-0.04-0.49z"/> <path d="m166.15 0.60955l0.56-0.02 0.05 0.45005-0.7 0.11 0.09-0.54005z" fill="#089156"/> <path d="m166.76 1.0396c2.13 2.76 3.71 5.88 5.45 8.88 27.79 48.09 55.56 96.18 83.29 144.3-12.84 22.36-25.78 44.67-38.67 67.01-1.73-10.7-4.96-21.08-7.02-31.72-3.19-11.41-4.96-23.16-8.26-34.55-3.8-18.4-8.43-36.64-12.58-54.97-6.33-26.73-12.41-53.52-18.43-80.33-1.4-6.17-3.26-12.28-3.78-18.62z" fill="#089156"/> <path d="m164.39 3.5996c0.03-0.05 0.1-0.16 0.13-0.21-0.03 0.05-0.1 0.16-0.13 0.21z" fill="#089156"/> <path d="m163.27 5.4996c0.05-0.07 0.13-0.22 0.17-0.29-0.04 0.07-0.12 0.22-0.17 0.29z" fill="#089156"/> <path d="m161.91 7.9296c0.09-0.17 0.27-0.49 0.36-0.65-0.09 0.16-0.27 0.48-0.36 0.65z" fill="#089156"/> <path d="m161.56 8.5296c0.08-0.15 0.26-0.45 0.35-0.6-0.09 0.15-0.27 0.45-0.35 0.6z" fill="#089156"/> <path d="m160.38 10.55c0.04-0.08 0.12-0.22 0.16-0.3-0.04 0.08-0.12 0.22-0.16 0.3z" fill="#089156"/> <path d="m159.31 12.84c0.05-0.16 0.14-0.48 0.19-0.64-0.05 0.16-0.14 0.48-0.19 0.64z" fill="#089156"/> <path d="m157.91 15.07c0.35-0.56 1.05-1.67 1.4-2.23-0.35 0.56-1.05 1.67-1.4 2.23z" fill="#089156"/> <path d="m157.37 15.85c0.14-0.19 0.4-0.58 0.54-0.78-0.14 0.2-0.4 0.59-0.54 0.78z" fill="#089156"/> <path d="m156.32 17.54c0.07-0.12 0.22-0.37 0.29-0.5-0.07 0.13-0.22 0.38-0.29 0.5z" fill="#089156"/> <path d="m155.32 19.85c0.03-0.17 0.11-0.51 0.15-0.68-0.04 0.17-0.12 0.51-0.15 0.68z" fill="#089156"/> <path d="m153.86 22.05c0.37-0.55 1.09-1.65 1.46-2.2-0.37 0.55-1.09 1.65-1.46 2.2z" fill="#089156"/> <path d="m153.35 22.82c0.13-0.19 0.39-0.58 0.51-0.77-0.12 0.19-0.38 0.58-0.51 0.77z" fill="#089156"/> <path d="m152.3 24.55c0.06-0.11 0.18-0.32 0.24-0.42-0.06 0.1-0.18 0.31-0.24 0.42z" fill="#089156"/> <path d="m150.94 26.94c0.1-0.17 0.3-0.52 0.4-0.7-0.1 0.18-0.3 0.53-0.4 0.7z" fill="#089156"/> <path d="m150.58 27.56c0.09-0.16 0.27-0.46 0.36-0.62-0.09 0.16-0.27 0.46-0.36 0.62z" fill="#089156"/> <path d="m149.39 29.56c0.05-0.07 0.14-0.22 0.18-0.3-0.04 0.08-0.13 0.23-0.18 0.3z" fill="#089156"/> <path d="m148.29 31.48c0.04-0.07 0.12-0.21 0.16-0.29-0.04 0.08-0.12 0.22-0.16 0.29z" fill="#089156"/> <path d="m146.9 33.89c0.1-0.16 0.29-0.5 0.39-0.66-0.1 0.16-0.29 0.5-0.39 0.66z" fill="#089156"/> <path d="m146.51 34.56c0.1-0.17 0.29-0.5 0.39-0.67-0.1 0.17-0.29 0.5-0.39 0.67z" fill="#089156"/> <path d="m145.36 36.54c0.03-0.07 0.11-0.2 0.15-0.27-0.04 0.07-0.12 0.2-0.15 0.27z" fill="#089156"/> <path d="m144.32 38.88c0.04-0.17 0.13-0.51 0.17-0.68-0.04 0.17-0.13 0.51-0.17 0.68z" fill="#089156"/> <path d="m142.86 41.11c0.36-0.56 1.09-1.68 1.46-2.23-0.37 0.55-1.1 1.67-1.46 2.23z" fill="#089156"/> <path d="m142.37 41.87c0.12-0.19 0.36-0.57 0.49-0.76-0.13 0.19-0.37 0.57-0.49 0.76z" fill="#089156"/> <path d="m141.11 44.14c0.15-0.29 0.44-0.86 0.58-1.15-0.14 0.29-0.43 0.86-0.58 1.15z" fill="#089156"/> <path d="m140.1 45.99c0.13-0.2 0.38-0.61 0.5-0.81-0.12 0.2-0.37 0.61-0.5 0.81z" fill="#089156"/> <path d="m139.54 46.77c0.14-0.2 0.42-0.58 0.56-0.78-0.14 0.2-0.42 0.58-0.56 0.78z" fill="#089156"/> <path d="m138.38 48.58c0.13-0.2 0.38-0.62 0.5-0.83-0.12 0.21-0.37 0.63-0.5 0.83z" fill="#089156"/> <path d="m137.07 51.17c0.11-0.23 0.34-0.7 0.45-0.93-0.11 0.23-0.34 0.7-0.45 0.93z" fill="#089156"/> <path d="m136.09 53c0.12-0.2 0.37-0.6 0.49-0.8-0.12 0.2-0.37 0.6-0.49 0.8z" fill="#089156"/> <path d="m135.53 53.76c0.14-0.19 0.42-0.57 0.56-0.76-0.14 0.19-0.42 0.57-0.56 0.76z" fill="#089156"/> <path d="m134.2 55.92c0.16-0.3 0.5-0.91 0.67-1.22-0.17 0.31-0.51 0.92-0.67 1.22z" fill="#089156"/> <path d="m133.29 57.86c0.1-0.2 0.28-0.59 0.38-0.79-0.1 0.2-0.28 0.59-0.38 0.79z" fill="#089156"/> <path d="m131.92 60.07c0.34-0.56 1.03-1.66 1.37-2.21-0.34 0.55-1.03 1.65-1.37 2.21z" fill="#089156"/> <path d="m131.37 60.87c0.14-0.2 0.41-0.6 0.55-0.8-0.14 0.2-0.41 0.6-0.55 0.8z" fill="#089156"/> <path d="m130.34 62.58c0.07-0.12 0.21-0.37 0.28-0.49-0.07 0.12-0.21 0.37-0.28 0.49z" fill="#089156"/> <path d="m129.22 64.83c0.06-0.14 0.2-0.42 0.27-0.56-0.07 0.14-0.21 0.42-0.27 0.56z" fill="#089156"/> <path d="m127.8 67.27c0.35-0.61 1.06-1.83 1.42-2.44l0.07 1.17c-0.37 0.32-1.12 0.96-1.49 1.27z" fill="#089156"/> <path d="m127.41 67.82c0.1-0.14 0.29-0.41 0.39-0.55-0.1 0.14-0.29 0.41-0.39 0.55z" fill="#089156"/> <path d="m126.13 70.15c0.18-0.39 0.55-1.17 0.73-1.56-0.18 0.39-0.55 1.17-0.73 1.56z" fill="#089156"/> <path d="m125.09 71.99c0.12-0.2 0.37-0.6 0.5-0.8-0.13 0.2-0.38 0.6-0.5 0.8z" fill="#089156"/> <path d="m124.54 72.77c0.14-0.2 0.41-0.59 0.55-0.78-0.14 0.19-0.41 0.58-0.55 0.78z" fill="#089156"/> <path d="m123.39 74.56c0.12-0.2 0.37-0.61 0.5-0.81-0.13 0.2-0.38 0.61-0.5 0.81z" fill="#089156"/> <path d="m122.19 76.66c0.06-0.1 0.18-0.32 0.24-0.42-0.06 0.1-0.18 0.32-0.24 0.42z" fill="#089156"/> <path d="m121.14 78.55l0.32-0.56-0.32 0.56z" fill="#089156"/> <path d="m119.25 81.78c0.08-0.13 0.24-0.41 0.32-0.55-0.08 0.14-0.24 0.42-0.32 0.55z" fill="#089156"/> <path d="m118.19 83.63c0.09-0.16 0.27-0.47 0.36-0.62-0.09 0.15-0.27 0.46-0.36 0.62z" fill="#089156"/> <path d="m116.9 85.88c0.11-0.19 0.33-0.58 0.45-0.78-0.12 0.2-0.34 0.59-0.45 0.78z" fill="#089156"/> <path d="m116.5 86.55c0.1-0.16 0.3-0.5 0.4-0.67-0.1 0.17-0.3 0.51-0.4 0.67z" fill="#089156"/> <path d="m115.34 88.51l0.16-0.28-0.16 0.28z" fill="#089156"/> <path d="m114.32 90.88c0.04-0.18 0.11-0.53 0.15-0.7-0.04 0.17-0.11 0.52-0.15 0.7z" fill="#089156"/> <path d="m112.86 93.05c0.36-0.54 1.09-1.63 1.46-2.17-0.37 0.54-1.1 1.63-1.46 2.17z" fill="#089156"/> <path d="m112.34 93.83c0.13-0.19 0.39-0.58 0.52-0.78-0.13 0.2-0.39 0.59-0.52 0.78z" fill="#089156"/> <path d="m111.32 95.49l0.28-0.48-0.28 0.48z" fill="#089156"/> <path d="m109.93 97.96c0.1-0.18 0.3-0.53 0.4-0.71-0.1 0.18-0.3 0.53-0.4 0.71z" fill="#089156"/> <path d="m109.56 98.58c0.09-0.15 0.27-0.47 0.37-0.62-0.1 0.15-0.28 0.47-0.37 0.62z" fill="#089156"/> <path d="m108.4 100.55c0.04-0.07 0.12-0.21 0.17-0.28-0.05 0.07-0.13 0.21-0.17 0.28z" fill="#089156"/> <path d="m107.29 102.46c0.03-0.06 0.1-0.17 0.13-0.23-0.03 0.06-0.1 0.17-0.13 0.23z" fill="#089156"/> <path d="m214.02 225.86c0.17-0.28 0.53-0.84 0.7-1.11-0.17 0.27-0.53 0.83-0.7 1.11z" fill="#089156"/> <path d="m213.58 226.64c0.05-0.08 0.14-0.25 0.18-0.33-0.04 0.08-0.13 0.25-0.18 0.33z" fill="#089156"/> <path d="m211.72 230.02c0.08-0.13 0.23-0.39 0.3-0.52-0.07 0.13-0.22 0.39-0.3 0.52z" fill="#089156"/> <path d="m210.67 231.87c0.08-0.15 0.25-0.44 0.34-0.59-0.09 0.15-0.26 0.44-0.34 0.59z" fill="#089156"/> <path d="m209.66 233.64c0.05-0.08 0.14-0.24 0.18-0.32-0.04 0.08-0.13 0.24-0.18 0.32z" fill="#089156"/> <path d="m208.27 236.07c0.09-0.16 0.27-0.48 0.36-0.63-0.09 0.15-0.27 0.47-0.36 0.63z" fill="#089156"/> <path d="m207.87 236.74c0.1-0.17 0.3-0.5 0.4-0.67-0.1 0.17-0.3 0.5-0.4 0.67z" fill="#089156"/> <path d="m206.54 239.02c0.08-0.13 0.24-0.41 0.32-0.54-0.08 0.13-0.24 0.41-0.32 0.54z" fill="#089156"/> <path d="m205.5 240.8c0.1-0.18 0.32-0.55 0.42-0.73-0.1 0.18-0.32 0.55-0.42 0.73z" fill="#089156"/> <path d="m203.62 244.07c0.07-0.13 0.22-0.38 0.29-0.5-0.07 0.12-0.22 0.37-0.29 0.5z" fill="#089156"/> <path d="m202.56 245.86c0.11-0.19 0.33-0.55 0.43-0.74-0.1 0.19-0.32 0.55-0.43 0.74z" fill="#089156"/> <path d="m200.71 249.06c0.09-0.15 0.26-0.46 0.35-0.61-0.09 0.15-0.26 0.46-0.35 0.61z" fill="#089156"/> <path d="m199.68 250.9c0.07-0.12 0.21-0.37 0.28-0.49-0.07 0.12-0.21 0.37-0.28 0.49z" fill="#089156"/> <path d="m198.59 252.81l0.32-0.56-0.32 0.56z" fill="#089156"/> <path d="m196.66 256.09c0.09-0.16 0.27-0.47 0.36-0.62-0.09 0.15-0.27 0.46-0.36 0.62z" fill="#089156"/> <path d="m195.69 257.84c0.06-0.12 0.19-0.35 0.26-0.47-0.07 0.12-0.2 0.35-0.26 0.47z" fill="#089156"/> <path d="m194.58 259.76c0.07-0.12 0.22-0.37 0.29-0.5-0.07 0.13-0.22 0.38-0.29 0.5z" fill="#089156"/> <path d="m192.6 263.15c0.08-0.13 0.24-0.39 0.31-0.52-0.07 0.13-0.23 0.39-0.31 0.52z" fill="#089156"/> <path d="m191.59 264.85c0.1-0.18 0.31-0.53 0.41-0.71-0.1 0.18-0.31 0.53-0.41 0.71z" fill="#089156"/> <path d="m189.82 267.94c0.06-0.11 0.2-0.35 0.26-0.46-0.06 0.11-0.2 0.35-0.26 0.46z" fill="#089156"/> <path d="m188.76 269.83c0.06-0.11 0.18-0.32 0.24-0.43-0.06 0.11-0.18 0.32-0.24 0.43z" fill="#089156"/> <path d="m187.64 271.76c0.07-0.11 0.21-0.35 0.28-0.46-0.07 0.11-0.21 0.35-0.28 0.46z" fill="#089156"/> <path d="m185.65 275.09c0.11-0.18 0.31-0.54 0.42-0.71-0.11 0.17-0.31 0.53-0.42 0.71z" fill="#089156"/> <path d="m184.76 276.74c0.07-0.13 0.22-0.41 0.3-0.55-0.08 0.14-0.23 0.42-0.3 0.55z" fill="#089156"/> <path d="m183.39 279.12c0.08-0.15 0.26-0.45 0.34-0.6-0.08 0.15-0.26 0.45-0.34 0.6z" fill="#089156"/> <path d="m183.06 279.69c0.08-0.14 0.24-0.43 0.33-0.57-0.09 0.14-0.25 0.43-0.33 0.57z" fill="#089156"/> <path d="m346.42 3.2196c0.08 0.13 0.23 0.41 0.31 0.55-0.08-0.14-0.23-0.42-0.31-0.55z" fill="#10985b"/> <path d="m354.54 17.35c0.05 0.08 0.13 0.23 0.18 0.3-0.05-0.07-0.13-0.22-0.18-0.3z" fill="#10985b"/> <path d="m369.55 43.36c0.04 0.07 0.13 0.21 0.17 0.29-0.04-0.08-0.13-0.22-0.17-0.29z" fill="#10985b"/> <path d="m372.44 48.25c0.08 0.13 0.23 0.4 0.31 0.54-0.08-0.14-0.23-0.41-0.31-0.54z" fill="#10985b"/> <path d="m376.53 55.37c0.05 0.07 0.13 0.21 0.17 0.29-0.04-0.08-0.12-0.22-0.17-0.29z" fill="#10985b"/> <path d="m380.48 62.24c0.08 0.13 0.23 0.39 0.31 0.52-0.08-0.13-0.23-0.39-0.31-0.52z" fill="#10985b"/> <path d="m384.51 69.22c0.08 0.13 0.23 0.4 0.31 0.53-0.08-0.13-0.23-0.4-0.31-0.53z" fill="#10985b"/> <path d="m420.57 131.65c17.39 30.13 34.89 60.21 52.14 90.43 0.08 0.13 0.24 0.41 0.32 0.54 0.4 0.66 1.2 1.97 1.59 2.62 0.08 0.13 0.24 0.4 0.32 0.53l0.8 1.37c0.05 0.09 0.15 0.28 0.21 0.37l1 1.74c0.1 0.17 0.29 0.52 0.39 0.69 0.09 0.15 0.27 0.46 0.36 0.62l0.98 1.7 0.16 0.28 0.98 1.68c0.04 0.07 0.12 0.2 0.16 0.27l0.98 1.7c0.1 0.17 0.29 0.5 0.39 0.67 0.09 0.17 0.28 0.5 0.37 0.66l1.01 1.78c0.14 0.35 0.42 1.03 0.56 1.37l0.28 0.55 0.13 0.29 0.22 0.29 0.59 0.89c0.21 0.33 0.62 0.99 0.83 1.32 0.12 0.2 0.38 0.6 0.5 0.8l0.66 1.05c0.2 0.45 0.6 1.36 0.8 1.81l0.3 0.54 0.11 0.21 0.09 0.13c0.44 0.65 1.31 1.96 1.75 2.61 0.11 0.18 0.33 0.54 0.45 0.72l0.6 1c0.09 0.16 0.27 0.47 0.36 0.62l1.01 1.77c0.09 0.16 0.27 0.48 0.36 0.64s0.27 0.47 0.36 0.63l1 1.71c0.04 0.08 0.13 0.23 0.18 0.3l0.91 1.6c0.06 0.1 0.18 0.31 0.24 0.41l0.92 1.61c0.11 0.18 0.32 0.55 0.43 0.73 0.09 0.16 0.28 0.48 0.37 0.64 0.74 1.23 1.45 2.48 2.11 3.76 0.1 0.21 0.3 0.63 0.39 0.84l0.46 1.04c0.12 0.2 0.36 0.61 0.47 0.81 0.15 0.2 0.44 0.58 0.59 0.77l0.69 0.98c0.12 0.19 0.36 0.57 0.49 0.77l1.01 1.75c0.09 0.16 0.27 0.48 0.36 0.64s0.27 0.47 0.37 0.63l1 1.72c0.04 0.08 0.12 0.22 0.16 0.29l0.95 1.66c0.04 0.07 0.12 0.2 0.16 0.27l0.97 1.69c0.1 0.17 0.3 0.51 0.4 0.69 0.1 0.17 0.3 0.51 0.39 0.68l1 1.72c0.04 0.07 0.11 0.21 0.15 0.28l1.06 1.98-0.01 0.9c-25.02-7.19-49.64-15.72-74.73-22.65-22.77-7.35-45.75-14.04-68.52-21.35 3.17-1.52 6.56-2.49 9.73-3.99 0.41-1.35 0.84-2.69 1.26-4.02 3.95-2.48 8.41-3.97 12.3-6.54 0.15-3.29 0.14-6.57 0.13-9.85 4.36-3.51 8.98-6.76 12.57-11.11 0.36-4.28-2.87-9.29 0.46-12.9 10.24-12.92 16.45-28.93 17.56-45.38 1.83-6.02-1.46-11.98-0.1-17.97z" fill="#f9c941"/> <path d="m509.91 287.41l0.52 0.02 0.29 0.76-0.59 0.04-0.22-0.82z" fill="#f9c941"/> <path d="m257.34 157.32c0.08 0.13 0.24 0.4 0.32 0.54-0.08-0.14-0.24-0.41-0.32-0.54z" fill="#e3b73a"/> <path d="m259.19 160.53c0.07 0.12 0.2 0.35 0.27 0.47-0.07-0.12-0.2-0.35-0.27-0.47z" fill="#e3b73a"/> <path d="m260.28 162.47c0.05 0.08 0.14 0.25 0.19 0.33-0.05-0.08-0.14-0.25-0.19-0.33z" fill="#e3b73a"/> <path d="m261.48 164.56c0.09 0.15 0.26 0.45 0.35 0.6-0.09-0.15-0.26-0.45-0.35-0.6z" fill="#e3b73a"/> <path d="m261.83 165.16c0.09 0.17 0.28 0.49 0.38 0.65-0.1-0.16-0.29-0.48-0.38-0.65z" fill="#e3b73a"/> <path d="m263.16 167.44c0.05 0.09 0.16 0.27 0.21 0.36-0.05-0.09-0.16-0.27-0.21-0.36z" fill="#e3b73a"/> <path d="m265.34 171.21c0.09 0.16 0.26 0.47 0.35 0.62-0.09-0.15-0.26-0.46-0.35-0.62z" fill="#e3b73a"/> <path d="m267.23 174.48c0.09 0.15 0.26 0.43 0.34 0.57-0.08-0.14-0.25-0.42-0.34-0.57z" fill="#e3b73a"/> <path d="m268.43 176.5c0.2 0.33 0.59 0.98 0.79 1.31-0.2-0.33-0.59-0.98-0.79-1.31z" fill="#e3b73a"/> <path d="m269.49 178.29c0.04 0.09 0.14 0.26 0.19 0.34-0.05-0.08-0.15-0.25-0.19-0.34z" fill="#e3b73a"/> <path d="m271.44 181.79c0.19 0.26 0.57 0.8 0.76 1.07-0.19-0.27-0.57-0.81-0.76-1.07z" fill="#e3b73a"/> <path d="m272.46 183.32c0.04 0.08 0.13 0.25 0.18 0.33-0.05-0.08-0.14-0.25-0.18-0.33z" fill="#e3b73a"/> <path d="m275.45 188.72c0.19 0.28 0.56 0.84 0.75 1.12-0.19-0.28-0.56-0.84-0.75-1.12z" fill="#e3b73a"/> <path d="m276.47 190.31c0.04 0.08 0.14 0.25 0.18 0.33-0.04-0.08-0.14-0.25-0.18-0.33z" fill="#e3b73a"/> <path d="m278.23 193.51c0.09 0.15 0.26 0.45 0.35 0.6-0.09-0.15-0.26-0.45-0.35-0.6z" fill="#e3b73a"/> <path d="m279.22 195.24c0.1 0.17 0.3 0.53 0.4 0.7-0.1-0.17-0.3-0.53-0.4-0.7z" fill="#e3b73a"/> <path d="m280.45 197.4c0.1 0.18 0.31 0.55 0.41 0.73-0.1-0.18-0.31-0.55-0.41-0.73z" fill="#e3b73a"/> <path d="m280.86 198.13c0.09 0.15 0.27 0.47 0.36 0.63-0.09-0.16-0.27-0.48-0.36-0.63z" fill="#e3b73a"/> <path d="m282.24 200.51c0.04 0.08 0.13 0.22 0.17 0.29-0.04-0.07-0.13-0.21-0.17-0.29z" fill="#e3b73a"/> <path d="m283.38 202.47c0.08 0.14 0.24 0.41 0.32 0.55-0.08-0.14-0.24-0.41-0.32-0.55z" fill="#e3b73a"/> <path d="m284.31 204.06c0.11 0.18 0.32 0.55 0.43 0.73-0.11-0.18-0.32-0.55-0.43-0.73z" fill="#e3b73a"/> <path d="m286.47 207.71c0.17 0.29 0.52 0.86 0.69 1.15-0.17-0.29-0.52-0.86-0.69-1.15z" fill="#e3b73a"/> <path d="m287.45 209.32c0.05 0.09 0.15 0.25 0.2 0.33-0.05-0.08-0.15-0.24-0.2-0.33z" fill="#e3b73a"/> <path d="m289.43 212.46l0.07 0.1 0.06 0.13c-0.03-0.06-0.1-0.17-0.13-0.23z" fill="#e3b73a"/> <path d="m291.5 216.56c0.09 0.15 0.25 0.44 0.34 0.59-0.09-0.15-0.25-0.44-0.34-0.59z" fill="#e3b73a"/> <path d="m291.84 217.15l0.4 0.68-0.4-0.68z" fill="#e3b73a"/> <path d="m293.19 219.44c0.05 0.09 0.15 0.27 0.21 0.36-0.06-0.09-0.16-0.27-0.21-0.36z" fill="#e3b73a"/> <path d="m294.06 220.98c11.53 4.24 23.46 7.26 35.11 11.11 12.52 3.71 24.94 7.72 37.49 11.32 22.77 7.31 45.75 14 68.52 21.35-0.34 4.87 0.62 9.86-0.59 14.64-0.93 4.65-6.49 5.38-8.78 9.09-30.77 0.01-61.53 0.1-92.29-0.03l-0.66-0.05c-12.71-22.6-25.93-44.92-38.8-67.43z" fill="#e3b73a"/> <path d="m472.71 222.08c0.08 0.13 0.24 0.41 0.32 0.54-0.08-0.13-0.24-0.41-0.32-0.54z" fill="#e8b835"/> <path d="m474.62 225.24c0.08 0.13 0.24 0.4 0.32 0.53-0.08-0.13-0.24-0.4-0.32-0.53z" fill="#e8b835"/> <path d="m475.74 227.14c0.05 0.09 0.15 0.28 0.21 0.37-0.06-0.09-0.16-0.28-0.21-0.37z" fill="#e8b835"/> <path d="m476.95 229.25c0.1 0.17 0.29 0.52 0.39 0.69-0.1-0.17-0.29-0.52-0.39-0.69z" fill="#e8b835"/> <path d="m477.34 229.94c0.09 0.15 0.27 0.46 0.36 0.62-0.09-0.16-0.27-0.47-0.36-0.62z" fill="#e8b835"/> <path d="m478.68 232.26l0.16 0.28-0.16-0.28z" fill="#e8b835"/> <path d="m479.82 234.22c0.04 0.07 0.12 0.2 0.16 0.27-0.04-0.07-0.12-0.2-0.16-0.27z" fill="#e8b835"/> <path d="m480.96 236.19c0.1 0.17 0.29 0.5 0.39 0.67-0.1-0.17-0.29-0.5-0.39-0.67z" fill="#e8b835"/> <path d="m481.35 236.86c0.09 0.17 0.28 0.5 0.37 0.66-0.09-0.16-0.28-0.49-0.37-0.66z" fill="#e8b835"/> <path d="m482.73 239.3c0.14 0.35 0.42 1.03 0.56 1.37-0.14-0.34-0.42-1.02-0.56-1.37z" fill="#e8b835"/> <path d="m483.57 241.22c0.09 0.15 0.26 0.44 0.35 0.58l-0.22-0.29-0.13-0.29z" fill="#e8b835"/> <path d="m484.51 242.69c0.21 0.33 0.62 0.99 0.83 1.32-0.21-0.33-0.62-0.99-0.83-1.32z" fill="#e8b835"/> <path d="m485.34 244.01c0.12 0.2 0.38 0.6 0.5 0.8-0.12-0.2-0.38-0.6-0.5-0.8z" fill="#e8b835"/> <path d="m486.5 245.86c0.2 0.45 0.6 1.36 0.8 1.81-0.2-0.45-0.6-1.36-0.8-1.81z" fill="#e8b835"/> <path d="m487.6 248.21c0.05 0.09 0.15 0.26 0.2 0.34l-0.09-0.13-0.11-0.21z" fill="#e8b835"/> <path d="m489.55 251.16c0.11 0.18 0.33 0.54 0.45 0.72-0.12-0.18-0.34-0.54-0.45-0.72z" fill="#e8b835"/> <path d="m490.6 252.88c0.09 0.16 0.27 0.47 0.36 0.62-0.09-0.15-0.27-0.46-0.36-0.62z" fill="#e8b835"/> <path d="m491.97 255.27c0.09 0.16 0.27 0.48 0.36 0.64-0.09-0.16-0.27-0.48-0.36-0.64z" fill="#e8b835"/> <path d="m492.33 255.91c0.09 0.16 0.27 0.47 0.36 0.63-0.09-0.16-0.27-0.47-0.36-0.63z" fill="#e8b835"/> <path d="m493.69 258.25c0.04 0.08 0.13 0.23 0.18 0.3-0.05-0.07-0.14-0.22-0.18-0.3z" fill="#e8b835"/> <path d="m494.78 260.15c0.06 0.1 0.18 0.31 0.24 0.41-0.06-0.1-0.18-0.31-0.24-0.41z" fill="#e8b835"/> <path d="m495.94 262.17c0.11 0.18 0.32 0.55 0.43 0.73-0.11-0.18-0.32-0.55-0.43-0.73z" fill="#e8b835"/> <path d="m496.37 262.9c0.09 0.16 0.28 0.48 0.37 0.64-0.09-0.16-0.28-0.48-0.37-0.64z" fill="#e8b835"/> <path d="m435.18 264.76c25.09 6.93 49.71 15.46 74.73 22.65l0.22 0.82c-28.09 0.64-56.22 0.11-84.32 0.26 2.29-3.71 7.85-4.44 8.78-9.09 1.21-4.78 0.25-9.77 0.59-14.64z" fill="#e8b835"/> <path d="m498.85 267.3c0.1 0.21 0.3 0.63 0.39 0.84-0.09-0.21-0.29-0.63-0.39-0.84z" fill="#e8b835"/> <path d="m499.7 269.18c0.12 0.2 0.36 0.61 0.47 0.81-0.11-0.2-0.35-0.61-0.47-0.81z" fill="#e8b835"/> <path d="m500.17 269.99c0.15 0.2 0.44 0.58 0.59 0.77-0.15-0.19-0.44-0.57-0.59-0.77z" fill="#e8b835"/> <path d="m501.45 271.74c0.12 0.19 0.36 0.57 0.49 0.77-0.13-0.2-0.37-0.58-0.49-0.77z" fill="#e8b835"/> <path d="m502.95 274.26c0.09 0.16 0.27 0.48 0.36 0.64-0.09-0.16-0.27-0.48-0.36-0.64z" fill="#e8b835"/> <path d="m503.31 274.9c0.09 0.16 0.27 0.47 0.37 0.63-0.1-0.16-0.28-0.47-0.37-0.63z" fill="#e8b835"/> <path d="m504.68 277.25c0.04 0.08 0.12 0.22 0.16 0.29-0.04-0.07-0.12-0.21-0.16-0.29z" fill="#e8b835"/> <path d="m505.79 279.2c0.04 0.07 0.12 0.2 0.16 0.27-0.04-0.07-0.12-0.2-0.16-0.27z" fill="#e8b835"/> <path d="m506.92 281.16c0.1 0.17 0.3 0.51 0.4 0.69-0.1-0.18-0.3-0.52-0.4-0.69z" fill="#e8b835"/> <path d="m507.32 281.85c0.1 0.17 0.3 0.51 0.39 0.68-0.09-0.17-0.29-0.51-0.39-0.68z" fill="#e8b835"/> <path d="m508.71 284.25c0.04 0.07 0.11 0.21 0.15 0.28-0.04-0.07-0.11-0.21-0.15-0.28z" fill="#e8b835"/> <path d="m509.92 286.51c0.13 0.23 0.38 0.69 0.51 0.92l-0.52-0.02 0.01-0.9z" fill="#e8b835"/> <path d="m147.21 341.08c10.31-17.58 20.11-35.49 30.76-52.86 51.63 0.19 103.27-0.29 154.89 0.19l0.66 0.05c-26.11 0.84-52.29-0.22-78.4 0.44-4.98 3.21-8.3 8.41-13.07 11.91-4.43 3.23-7.69 7.73-11.92 11.18-5.93 4.37-10.34 10.43-16.36 14.71-6.96 7.37-14.99 13.58-22.01 20.91-5.26 4.04-9.66 9.03-14.56 13.48-5.39 3.91-9.52 9.21-14.56 13.53-0.13 0.11-0.38 0.33-0.51 0.45-0.27 0.21-0.8 0.65-1.07 0.86-0.13 0.11-0.37 0.31-0.5 0.42-3.97 3.07-7.01 7.12-10.91 10.27-0.13 0.11-0.38 0.32-0.5 0.42-0.13 0.11-0.38 0.32-0.51 0.42-5.69 4.67-10.25 10.58-16.22 14.93-6.01 5.96-12.79 11.08-18.5 17.36-8.44 6.94-15.74 15.13-24.44 21.78 2.16-4.71 5.02-9.03 7.53-13.54 16.74-28.97 33.46-57.94 50.2-86.91z" fill="#296ad9"/> <path d="m89.04 442.17c0.11-0.16 0.33-0.48 0.44-0.64l-0.03 0.65-0.41-0.01z" fill="#296ad9"/> <path id="#2a71e9ff" fill="#2a71e9" d="m333.52 288.46c30.76 0.13 61.52 0.04 92.29 0.03 28.1-0.15 56.23 0.38 84.32-0.26l0.59-0.04 0.4 0.11v0.08c-29.66 51.27-59.23 102.6-88.89 153.88-110.93-0.03-221.86 0.1-332.78-0.08l0.03-0.65c8.7-6.65 16-14.84 24.44-21.78 5.71-6.28 12.49-11.4 18.5-17.36 5.97-4.35 10.53-10.26 16.22-14.93 0.13-0.1 0.38-0.31 0.51-0.42 0.12-0.1 0.37-0.31 0.5-0.42 3.9-3.15 6.94-7.2 10.91-10.27 0.13-0.11 0.37-0.31 0.5-0.42 0.27-0.21 0.8-0.65 1.07-0.86 0.13-0.12 0.38-0.34 0.51-0.45 5.04-4.32 9.17-9.62 14.56-13.53 4.9-4.45 9.3-9.44 14.56-13.48 7.02-7.33 15.05-13.54 22.01-20.91 6.02-4.28 10.43-10.34 16.36-14.71 4.23-3.45 7.49-7.95 11.92-11.18 4.77-3.5 8.09-8.7 13.07-11.91 26.11-0.66 52.29 0.4 78.4-0.44z"/> <path d="m162.13 375.07c0.13-0.12 0.38-0.34 0.51-0.45-0.13 0.11-0.38 0.33-0.51 0.45z" fill="#286ee6"/> <path d="m161.06 375.93c0.27-0.21 0.8-0.65 1.07-0.86-0.27 0.21-0.8 0.65-1.07 0.86z" fill="#286ee6"/> <path d="m160.56 376.35c0.13-0.11 0.37-0.31 0.5-0.42-0.13 0.11-0.37 0.31-0.5 0.42z" fill="#286ee6"/> <path d="m149.15 387.04c0.12-0.1 0.37-0.31 0.5-0.42-0.13 0.11-0.38 0.32-0.5 0.42z" fill="#286ee6"/> <path d="m148.64 387.46c0.13-0.1 0.38-0.31 0.51-0.42-0.13 0.11-0.38 0.32-0.51 0.42z" fill="#286ee6"/> </svg> </div> <div class="rs-box rs-box-initial" aria-hidden="false"> <h3 class="rs-small-headline">Connect your storage</h3> <span class="rs-sub-headline">To sync data with your account</span> </div> <div class="rs-box rs-box-connected" aria-hidden="true"> <div class="rs-connected-text"> <h1 class="rs-user rs-small-headline">user@provider.com</h1> <span class="rs-sub-headline">Connected</span> </div> <div class="rs-connected-buttons"> <button class="rs-button rs-button-small rs-sync" title="Sync now"> <svg class="rs-icon rs-loop-icon" xml:space="preserve" version="1.1" x="0px" y="0px" height="16" width="16" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xmlns="http://www.w3.org/2000/svg"> <path d="m273.4 300.5l-0.3 58c48.9-8.2 86.3-51 86.3-102.5 0-15.9-3.6-31-10-44.5-2.8-5.8-6-11.3-9.8-16.5l47.1-43.5c1.1 1.3 2.1 2.7 3.1 4 20.9 28 33.2 62.8 33.2 100.5v3.7c-1.5 71.5-47.6 132-111.4 154.6-12.3 4.3-25.2 7.3-38.5 8.7l-0.1 57-76.2-67-26.2-23 44.4-38.7 58.4-50.8z"/> <path d="m89 252.3c1.6-72.1 48.3-133 112.9-155.2 11.7-4 24-6.8 36.8-8.1l0.1-57 76.1 66.9 26.2 23.1-44.3 38.6-58.4 50.9 0.2-57.9c-48.8 8.3-86 51.1-86 102.4 0 16 3.6 31.1 10.1 44.7 2.7 5.8 6 11.2 9.7 16.3l-47 43.6c-1.3-1.6-2.6-3.3-3.8-5-20.5-27.9-32.6-62.3-32.6-99.6v-3.7z"/> </svg> </button> <button class="rs-button rs-button-small rs-disconnect" title="Disconnect"> <svg class="rs-icon rs-power-icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="16" height="16" style="enable-background:new 0 0 512 512" xml:space="preserve" viewBox="0 0 512 512" version="1.1"> <path d="m256 256c-17.7 0-32-14.3-32-32v-160c0-17.7 14.3-32 32-32s32 14.3 32 32v160c0 17.7-14.3 32-32 32z"/> <path d="m379 68.8c-5-3-10.8-4.8-17-4.8-17.7 0-32 14.3-32 32 0 6.2 1.8 12 4.8 16.9 2 3.2 4.6 6.1 7.6 8.4 1.2 0.9 2.4 1.7 3.7 2.5 8.1 5.6 15.8 11.9 23 19.1 30.3 30.2 46.9 70.4 46.9 113.1s-16.6 82.9-46.9 113.1c-30.2 30.3-70.4 46.9-113.1 46.9s-82.9-16.6-113.1-46.9c-30.3-30.2-46.9-70.4-46.9-113.1s16.6-82.9 46.9-113.1c7.1-7.1 14.8-13.5 22.9-19 1.4-0.8 2.6-1.6 3.9-2.6 3-2.3 5.5-5.1 7.5-8.3 3.1-4.9 4.8-10.7 4.8-16.9 0-17.7-14.3-32-32-32-6.2 0-12 1.8-16.9 4.8l-0.1-0.1c-60.8 40-101 108.9-101 187.2 0 123.7 100.3 224 224 224s224-100.3 224-224c0-78.3-40.2-147.2-101-187.2z"/> </svg> </button> </div> </div> <div class="rs-box rs-box-error" aria-hidden="true"> <div class="rs-error-message"></div> <div class="rs-error-buttons"> <a href="#" class="rs-reconnect rs-hidden">Renew</a> <button class="rs-button rs-button-small rs-disconnect" title="Disconnect"> <svg class="rs-icon rs-power-icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="16" height="16" style="enable-background:new 0 0 512 512" xml:space="preserve" viewBox="0 0 512 512" version="1.1"> <path d="m256 256c-17.7 0-32-14.3-32-32v-160c0-17.7 14.3-32 32-32s32 14.3 32 32v160c0 17.7-14.3 32-32 32z"/> <path d="m379 68.8c-5-3-10.8-4.8-17-4.8-17.7 0-32 14.3-32 32 0 6.2 1.8 12 4.8 16.9 2 3.2 4.6 6.1 7.6 8.4 1.2 0.9 2.4 1.7 3.7 2.5 8.1 5.6 15.8 11.9 23 19.1 30.3 30.2 46.9 70.4 46.9 113.1s-16.6 82.9-46.9 113.1c-30.2 30.3-70.4 46.9-113.1 46.9s-82.9-16.6-113.1-46.9c-30.3-30.2-46.9-70.4-46.9-113.1s16.6-82.9 46.9-113.1c7.1-7.1 14.8-13.5 22.9-19 1.4-0.8 2.6-1.6 3.9-2.6 3-2.3 5.5-5.1 7.5-8.3 3.1-4.9 4.8-10.7 4.8-16.9 0-17.7-14.3-32-32-32-6.2 0-12 1.8-16.9 4.8l-0.1-0.1c-60.8 40-101 108.9-101 187.2 0 123.7 100.3 224 224 224s224-100.3 224-224c0-78.3-40.2-147.2-101-187.2z"/> </svg> </button> </div> </div> <div class="rs-box rs-box-choose" aria-hidden="true"> <div class="rs-content"> <h1 class="rs-big-headline">Connect your storage</h1> <p class="rs-short-desc"> This app allows you to sync data with a <a class="rs-help" href="https://remotestorage.io/" target="_blank" rel="noopener">storage provider of your choice</a>. </p> <div class="rs-button-wrap"> <button class="rs-button rs-button-big rs-choose-rs"> <svg class="rs-logo" fill-rule="evenodd" height="40" width="40" xmlns="http://www.w3.org/2000/svg" version="1.1" style="shape-rendering:geometricPrecision;image-rendering:optimizeQuality;text-rendering:geometricPrecision" clip-rule="evenodd" xml:space="preserve" viewBox="0 0 739 853"> <g> <polygon class="rs-logo-shape" points="370 754 0 542 0 640 185 747 370 853 554 747 739 640 739 525 739 525 739 476 739 427 739 378 653 427 370 589 86 427 86 427 86 361 185 418 370 524 554 418 653 361 739 311 739 213 739 213 554 107 370 0 185 107 58 180 144 230 228 181 370 100 511 181 652 263 370 425 87 263 87 263 0 213 0 213 0 311 0 378 0 427 0 476 86 525 185 582 370 689 554 582 653 525 653 590 653 592"/> </g> </svg> <div>RemoteStorage</div> </button> <button class="rs-button rs-button-big rs-choose-dropbox"> <svg class="dropbox-logo" width="40" height="40" xml:space="preserve" stroke-miterlimit="1.4142" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 104 97" stroke-linejoin="round" version="1.1" clip-rule="evenodd"> <path d="m30.691 0l-30.691 20.039 21.221 16.994 30.946-19.108-21.476-17.925z" fill="#007ee5"/> <path d="m0 54.028l30.691 20.039 21.476-17.926-30.945-19.108-21.222 16.995z" fill="#007ee5"/> <path d="m52.167 56.142l21.477 17.926 30.696-20.039-21.227-16.995-30.946 19.108z" fill="#007ee5"/> <path d="m104.34 20.039l-30.696-20.039-21.477 17.925 30.946 19.108 21.227-16.994z" fill="#007ee5"/> <path d="m52.23 59.998l-21.538 17.873-9.218-6.018v6.747l30.756 18.443 30.756-18.443v-6.747l-9.216 6.018-21.54-17.873z" fill="#007ee5"/> </svg> <div>Dropbox</div> </button> <button class="rs-button rs-button-big rs-choose-googledrive"> <svg class="googledrive-logo" width="40" height="40" version="1.1" stroke-miterlimit="1.4142" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" width="100%" stroke-linejoin="round" clip-rule="evenodd" viewBox="0 0 511 442" height="100%"> <path d="m166.23 0.10955l0.44-0.009998 0.04 0.49-0.56 0.02 0.08-0.5z" fill="#0ba25e"/> <path d="m164.52 3.3896c0.39-0.56 1.15-1.68 1.54-2.24l0.7-0.11c0.52 6.34 2.38 12.45 3.78 18.62 6.02 26.81 12.1 53.6 18.43 80.33 4.15 18.33 8.78 36.57 12.58 54.97 3.3 11.39 5.07 23.14 8.26 34.55 2.06 10.64 5.29 21.02 7.02 31.72-0.7 1.17-1.4 2.35-2.11 3.52-0.17 0.27-0.53 0.83-0.7 1.11l-0.26 0.45c-0.04 0.08-0.13 0.25-0.18 0.33-0.39 0.72-1.17 2.15-1.56 2.86-0.07 0.13-0.22 0.39-0.3 0.52l-0.71 1.26c-0.09 0.15-0.26 0.44-0.34 0.59l-0.83 1.45c-0.04 0.08-0.13 0.24-0.18 0.32l-1.03 1.8c-0.09 0.15-0.27 0.47-0.36 0.63-0.1 0.17-0.3 0.5-0.4 0.67l-1.01 1.74c-0.08 0.13-0.24 0.41-0.32 0.54l-0.62 1.05c-0.1 0.18-0.32 0.55-0.42 0.73-0.4 0.69-1.19 2.07-1.59 2.77-0.07 0.12-0.22 0.37-0.29 0.5l-0.63 1.05c-0.1 0.19-0.32 0.55-0.43 0.74-0.37 0.65-1.13 1.94-1.5 2.59-0.09 0.15-0.26 0.46-0.35 0.61l-0.75 1.35c-0.07 0.12-0.21 0.37-0.28 0.49l-0.77 1.35-0.32 0.56c-0.4 0.66-1.18 1.99-1.57 2.66-0.09 0.15-0.27 0.46-0.36 0.62l-0.71 1.28c-0.07 0.12-0.2 0.35-0.26 0.47l-0.82 1.42c-0.07 0.13-0.22 0.38-0.29 0.5-0.42 0.72-1.25 2.15-1.67 2.87-0.07 0.13-0.23 0.39-0.31 0.52l-0.6 0.99c-0.1 0.18-0.31 0.53-0.41 0.71-0.38 0.66-1.13 1.97-1.51 2.63-0.06 0.11-0.2 0.35-0.26 0.46l-0.82 1.46c-0.06 0.11-0.18 0.32-0.24 0.43l-0.84 1.47c-0.07 0.11-0.21 0.35-0.28 0.46-0.39 0.66-1.18 1.96-1.57 2.62-0.11 0.17-0.31 0.53-0.42 0.71l-0.59 1.1c-0.08 0.14-0.23 0.42-0.3 0.55l-1.03 1.78c-0.08 0.15-0.26 0.45-0.34 0.6-0.09 0.14-0.25 0.43-0.33 0.57-1.69 2.85-3.22 5.79-5.09 8.53-10.65 17.37-20.45 35.28-30.76 52.86-16.74 28.97-33.46 57.94-50.2 86.91-2.51 4.51-5.37 8.83-7.53 13.54-0.11 0.16-0.33 0.48-0.44 0.64-4.01-5.78-7.11-12.16-10.78-18.16-16.74-28.99-33.49-57.97-50.22-86.97-9.3-16.31-18.99-32.42-28.04-48.88 35.84-61.85 71.52-123.81 107.29-185.7 0.03-0.06 0.1-0.17 0.13-0.23l0.98-1.68c0.04-0.07 0.12-0.21 0.17-0.28l0.99-1.69c0.09-0.15 0.27-0.47 0.37-0.62 0.1-0.18 0.3-0.53 0.4-0.71l0.99-1.76 0.28-0.48 0.74-1.18c0.13-0.19 0.39-0.58 0.52-0.78 0.36-0.54 1.09-1.63 1.46-2.17 0.04-0.18 0.11-0.53 0.15-0.7l0.87-1.67 0.16-0.28 1-1.68c0.1-0.16 0.3-0.5 0.4-0.67 0.11-0.19 0.33-0.58 0.45-0.78l0.84-1.47c0.09-0.16 0.27-0.47 0.36-0.62l0.7-1.23c0.08-0.13 0.24-0.41 0.32-0.55 0.39-0.67 1.17-2.01 1.57-2.68l0.32-0.56 0.73-1.33c0.06-0.1 0.18-0.32 0.24-0.42l0.96-1.68c0.12-0.2 0.37-0.61 0.5-0.81l0.65-0.98c0.14-0.2 0.41-0.59 0.55-0.78 0.12-0.2 0.37-0.6 0.5-0.8l0.54-1.04c0.18-0.39 0.55-1.17 0.73-1.56l0.55-0.77c0.1-0.14 0.29-0.41 0.39-0.55 0.37-0.31 1.12-0.95 1.49-1.27l-0.07-1.17c0.06-0.14 0.2-0.42 0.27-0.56l0.85-1.69c0.07-0.12 0.21-0.37 0.28-0.49l0.75-1.22c0.14-0.2 0.41-0.6 0.55-0.8 0.34-0.56 1.03-1.66 1.37-2.21 0.1-0.2 0.28-0.59 0.38-0.79l0.53-1.15c0.16-0.3 0.5-0.91 0.67-1.22l0.66-0.94c0.14-0.19 0.42-0.57 0.56-0.76 0.12-0.2 0.37-0.6 0.49-0.8l0.49-1.03c0.11-0.23 0.34-0.7 0.45-0.93l0.86-1.66c0.13-0.2 0.38-0.62 0.5-0.83l0.66-0.98c0.14-0.2 0.42-0.58 0.56-0.78 0.13-0.2 0.38-0.61 0.5-0.81l0.51-1.04c0.15-0.29 0.44-0.86 0.58-1.15l0.68-1.12c0.12-0.19 0.36-0.57 0.49-0.76 0.36-0.56 1.09-1.68 1.46-2.23 0.04-0.17 0.13-0.51 0.17-0.68l0.87-1.66c0.03-0.07 0.11-0.2 0.15-0.27l1-1.71c0.1-0.17 0.29-0.5 0.39-0.67 0.1-0.16 0.29-0.5 0.39-0.66l1-1.75c0.04-0.07 0.12-0.21 0.16-0.29l0.94-1.63c0.05-0.07 0.14-0.22 0.18-0.3l1.01-1.7c0.09-0.16 0.27-0.46 0.36-0.62 0.1-0.17 0.3-0.52 0.4-0.7l0.96-1.69c0.06-0.11 0.18-0.32 0.24-0.42l0.81-1.31c0.13-0.19 0.39-0.58 0.51-0.77 0.37-0.55 1.09-1.65 1.46-2.2 0.03-0.17 0.11-0.51 0.15-0.68l0.85-1.63c0.07-0.12 0.22-0.37 0.29-0.5l0.76-1.19c0.14-0.19 0.4-0.58 0.54-0.78 0.35-0.56 1.05-1.67 1.4-2.23 0.05-0.16 0.14-0.48 0.19-0.64l0.88-1.65c0.04-0.08 0.12-0.22 0.16-0.3l1.02-1.7204c0.08-0.15 0.26-0.45 0.35-0.6 0.09-0.17 0.27-0.49 0.36-0.65l1-1.78c0.05-0.07 0.13-0.22 0.17-0.29l0.95-1.61c0.03-0.05 0.1-0.16 0.13-0.21z" fill="#0ba25e"/> <path id="#fccd48ff" fill="#fccd48" d="m166.67 0.099552c32.48-0.15 64.97-0.02 97.46-0.07 26.88 0.099998 53.78-0.21 80.65 0.15 0.53 1.02 1.07 2.03 1.64 3.04 0.08 0.13 0.23 0.41 0.31 0.55 2.6 4.53 5.24 9.0404 7.81 13.58 0.05 0.08 0.13 0.23 0.18 0.3 4.98 8.55 9.94 17.11 14.83 25.71 0.04 0.07 0.13 0.21 0.17 0.29 0.89 1.53 1.81 3.06 2.72 4.6 0.08 0.13 0.23 0.4 0.31 0.54 1.25 2.2 2.51 4.39 3.78 6.58 0.05 0.07 0.13 0.21 0.17 0.29 1.27 2.18 2.52 4.38 3.78 6.58 0.08 0.13 0.23 0.39 0.31 0.52 1.27 2.14 2.5 4.3 3.72 6.46 0.08 0.13 0.23 0.4 0.31 0.53 11.94 20.62 23.85 41.25 35.75 61.9-1.36 5.99 1.93 11.95 0.1 17.97-1.11 16.45-7.32 32.46-17.56 45.38-3.33 3.61-0.1 8.62-0.46 12.9-3.59 4.35-8.21 7.6-12.57 11.11 0.01 3.28 0.02 6.56-0.13 9.85-3.89 2.57-8.35 4.06-12.3 6.54-0.42 1.33-0.85 2.67-1.26 4.02-3.17 1.5-6.56 2.47-9.73 3.99-12.55-3.6-24.97-7.61-37.49-11.32-11.65-3.85-23.58-6.87-35.11-11.11l-0.66-1.18c-0.06-0.09-0.16-0.27-0.21-0.36l-0.95-1.61-0.4-0.68c-0.09-0.15-0.25-0.44-0.34-0.59-0.71-1.26-1.36-2.55-1.94-3.87l-0.06-0.13-0.07-0.1c-0.44-0.7-1.33-2.11-1.78-2.81-0.05-0.08-0.15-0.24-0.2-0.33l-0.29-0.46c-0.17-0.29-0.52-0.86-0.69-1.15-0.43-0.73-1.3-2.19-1.73-2.92-0.11-0.18-0.32-0.55-0.43-0.73l-0.61-1.04c-0.08-0.14-0.24-0.41-0.32-0.55l-0.97-1.67c-0.04-0.07-0.13-0.21-0.17-0.29l-1.02-1.75c-0.09-0.16-0.27-0.48-0.36-0.63-0.1-0.18-0.31-0.55-0.41-0.73l-0.83-1.46c-0.1-0.17-0.3-0.53-0.4-0.7l-0.64-1.13c-0.09-0.15-0.26-0.45-0.35-0.6-0.39-0.72-1.18-2.15-1.58-2.87-0.04-0.08-0.14-0.25-0.18-0.33l-0.27-0.47c-0.19-0.28-0.56-0.84-0.75-1.12-0.99-1.66-1.92-3.36-2.81-5.07-0.05-0.08-0.14-0.25-0.18-0.33l-0.26-0.46c-0.19-0.27-0.57-0.81-0.76-1.07-0.44-0.79-1.32-2.37-1.76-3.16-0.05-0.08-0.15-0.25-0.19-0.34l-0.27-0.48c-0.2-0.33-0.59-0.98-0.79-1.31l-0.86-1.45c-0.08-0.14-0.25-0.42-0.34-0.57-0.38-0.66-1.15-1.99-1.54-2.65-0.09-0.15-0.26-0.46-0.35-0.62-0.68-1.13-1.33-2.27-1.97-3.41-0.05-0.09-0.16-0.27-0.21-0.36l-0.95-1.63c-0.1-0.16-0.29-0.48-0.38-0.65-0.09-0.15-0.26-0.45-0.35-0.6l-1.01-1.76c-0.05-0.08-0.14-0.25-0.19-0.33l-0.82-1.47c-0.07-0.12-0.2-0.35-0.27-0.47-0.38-0.67-1.15-2-1.53-2.67-0.08-0.14-0.24-0.41-0.32-0.54-0.62-1.03-1.24-2.07-1.84-3.1-27.73-48.12-55.5-96.21-83.29-144.3-1.74-3.0004-3.32-6.1204-5.45-8.8804l-0.05-0.45005-0.04-0.49z"/> <path d="m166.15 0.60955l0.56-0.02 0.05 0.45005-0.7 0.11 0.09-0.54005z" fill="#089156"/> <path d="m166.76 1.0396c2.13 2.76 3.71 5.88 5.45 8.88 27.79 48.09 55.56 96.18 83.29 144.3-12.84 22.36-25.78 44.67-38.67 67.01-1.73-10.7-4.96-21.08-7.02-31.72-3.19-11.41-4.96-23.16-8.26-34.55-3.8-18.4-8.43-36.64-12.58-54.97-6.33-26.73-12.41-53.52-18.43-80.33-1.4-6.17-3.26-12.28-3.78-18.62z" fill="#089156"/> <path d="m164.39 3.5996c0.03-0.05 0.1-0.16 0.13-0.21-0.03 0.05-0.1 0.16-0.13 0.21z" fill="#089156"/> <path d="m163.27 5.4996c0.05-0.07 0.13-0.22 0.17-0.29-0.04 0.07-0.12 0.22-0.17 0.29z" fill="#089156"/> <path d="m161.91 7.9296c0.09-0.17 0.27-0.49 0.36-0.65-0.09 0.16-0.27 0.48-0.36 0.65z" fill="#089156"/> <path d="m161.56 8.5296c0.08-0.15 0.26-0.45 0.35-0.6-0.09 0.15-0.27 0.45-0.35 0.6z" fill="#089156"/> <path d="m160.38 10.55c0.04-0.08 0.12-0.22 0.16-0.3-0.04 0.08-0.12 0.22-0.16 0.3z" fill="#089156"/> <path d="m159.31 12.84c0.05-0.16 0.14-0.48 0.19-0.64-0.05 0.16-0.14 0.48-0.19 0.64z" fill="#089156"/> <path d="m157.91 15.07c0.35-0.56 1.05-1.67 1.4-2.23-0.35 0.56-1.05 1.67-1.4 2.23z" fill="#089156"/> <path d="m157.37 15.85c0.14-0.19 0.4-0.58 0.54-0.78-0.14 0.2-0.4 0.59-0.54 0.78z" fill="#089156"/> <path d="m156.32 17.54c0.07-0.12 0.22-0.37 0.29-0.5-0.07 0.13-0.22 0.38-0.29 0.5z" fill="#089156"/> <path d="m155.32 19.85c0.03-0.17 0.11-0.51 0.15-0.68-0.04 0.17-0.12 0.51-0.15 0.68z" fill="#089156"/> <path d="m153.86 22.05c0.37-0.55 1.09-1.65 1.46-2.2-0.37 0.55-1.09 1.65-1.46 2.2z" fill="#089156"/> <path d="m153.35 22.82c0.13-0.19 0.39-0.58 0.51-0.77-0.12 0.19-0.38 0.58-0.51 0.77z" fill="#089156"/> <path d="m152.3 24.55c0.06-0.11 0.18-0.32 0.24-0.42-0.06 0.1-0.18 0.31-0.24 0.42z" fill="#089156"/> <path d="m150.94 26.94c0.1-0.17 0.3-0.52 0.4-0.7-0.1 0.18-0.3 0.53-0.4 0.7z" fill="#089156"/> <path d="m150.58 27.56c0.09-0.16 0.27-0.46 0.36-0.62-0.09 0.16-0.27 0.46-0.36 0.62z" fill="#089156"/> <path d="m149.39 29.56c0.05-0.07 0.14-0.22 0.18-0.3-0.04 0.08-0.13 0.23-0.18 0.3z" fill="#089156"/> <path d="m148.29 31.48c0.04-0.07 0.12-0.21 0.16-0.29-0.04 0.08-0.12 0.22-0.16 0.29z" fill="#089156"/> <path d="m146.9 33.89c0.1-0.16 0.29-0.5 0.39-0.66-0.1 0.16-0.29 0.5-0.39 0.66z" fill="#089156"/> <path d="m146.51 34.56c0.1-0.17 0.29-0.5 0.39-0.67-0.1 0.17-0.29 0.5-0.39 0.67z" fill="#089156"/> <path d="m145.36 36.54c0.03-0.07 0.11-0.2 0.15-0.27-0.04 0.07-0.12 0.2-0.15 0.27z" fill="#089156"/> <path d="m144.32 38.88c0.04-0.17 0.13-0.51 0.17-0.68-0.04 0.17-0.13 0.51-0.17 0.68z" fill="#089156"/> <path d="m142.86 41.11c0.36-0.56 1.09-1.68 1.46-2.23-0.37 0.55-1.1 1.67-1.46 2.23z" fill="#089156"/> <path d="m142.37 41.87c0.12-0.19 0.36-0.57 0.49-0.76-0.13 0.19-0.37 0.57-0.49 0.76z" fill="#089156"/> <path d="m141.11 44.14c0.15-0.29 0.44-0.86 0.58-1.15-0.14 0.29-0.43 0.86-0.58 1.15z" fill="#089156"/> <path d="m140.1 45.99c0.13-0.2 0.38-0.61 0.5-0.81-0.12 0.2-0.37 0.61-0.5 0.81z" fill="#089156"/> <path d="m139.54 46.77c0.14-0.2 0.42-0.58 0.56-0.78-0.14 0.2-0.42 0.58-0.56 0.78z" fill="#089156"/> <path d="m138.38 48.58c0.13-0.2 0.38-0.62 0.5-0.83-0.12 0.21-0.37 0.63-0.5 0.83z" fill="#089156"/> <path d="m137.07 51.17c0.11-0.23 0.34-0.7 0.45-0.93-0.11 0.23-0.34 0.7-0.45 0.93z" fill="#089156"/> <path d="m136.09 53c0.12-0.2 0.37-0.6 0.49-0.8-0.12 0.2-0.37 0.6-0.49 0.8z" fill="#089156"/> <path d="m135.53 53.76c0.14-0.19 0.42-0.57 0.56-0.76-0.14 0.19-0.42 0.57-0.56 0.76z" fill="#089156"/> <path d="m134.2 55.92c0.16-0.3 0.5-0.91 0.67-1.22-0.17 0.31-0.51 0.92-0.67 1.22z" fill="#089156"/> <path d="m133.29 57.86c0.1-0.2 0.28-0.59 0.38-0.79-0.1 0.2-0.28 0.59-0.38 0.79z" fill="#089156"/> <path d="m131.92 60.07c0.34-0.56 1.03-1.66 1.37-2.21-0.34 0.55-1.03 1.65-1.37 2.21z" fill="#089156"/> <path d="m131.37 60.87c0.14-0.2 0.41-0.6 0.55-0.8-0.14 0.2-0.41 0.6-0.55 0.8z" fill="#089156"/> <path d="m130.34 62.58c0.07-0.12 0.21-0.37 0.28-0.49-0.07 0.12-0.21 0.37-0.28 0.49z" fill="#089156"/> <path d="m129.22 64.83c0.06-0.14 0.2-0.42 0.27-0.56-0.07 0.14-0.21 0.42-0.27 0.56z" fill="#089156"/> <path d="m127.8 67.27c0.35-0.61 1.06-1.83 1.42-2.44l0.07 1.17c-0.37 0.32-1.12 0.96-1.49 1.27z" fill="#089156"/> <path d="m127.41 67.82c0.1-0.14 0.29-0.41 0.39-0.55-0.1 0.14-0.29 0.41-0.39 0.55z" fill="#089156"/> <path d="m126.13 70.15c0.18-0.39 0.55-1.17 0.73-1.56-0.18 0.39-0.55 1.17-0.73 1.56z" fill="#089156"/> <path d="m125.09 71.99c0.12-0.2 0.37-0.6 0.5-0.8-0.13 0.2-0.38 0.6-0.5 0.8z" fill="#089156"/> <path d="m124.54 72.77c0.14-0.2 0.41-0.59 0.55-0.78-0.14 0.19-0.41 0.58-0.55 0.78z" fill="#089156"/> <path d="m123.39 74.56c0.12-0.2 0.37-0.61 0.5-0.81-0.13 0.2-0.38 0.61-0.5 0.81z" fill="#089156"/> <path d="m122.19 76.66c0.06-0.1 0.18-0.32 0.24-0.42-0.06 0.1-0.18 0.32-0.24 0.42z" fill="#089156"/> <path d="m121.14 78.55l0.32-0.56-0.32 0.56z" fill="#089156"/> <path d="m119.25 81.78c0.08-0.13 0.24-0.41 0.32-0.55-0.08 0.14-0.24 0.42-0.32 0.55z" fill="#089156"/> <path d="m118.19 83.63c0.09-0.16 0.27-0.47 0.36-0.62-0.09 0.15-0.27 0.46-0.36 0.62z" fill="#089156"/> <path d="m116.9 85.88c0.11-0.19 0.33-0.58 0.45-0.78-0.12 0.2-0.34 0.59-0.45 0.78z" fill="#089156"/> <path d="m116.5 86.55c0.1-0.16 0.3-0.5 0.4-0.67-0.1 0.17-0.3 0.51-0.4 0.67z" fill="#089156"/> <path d="m115.34 88.51l0.16-0.28-0.16 0.28z" fill="#089156"/> <path d="m114.32 90.88c0.04-0.18 0.11-0.53 0.15-0.7-0.04 0.17-0.11 0.52-0.15 0.7z" fill="#089156"/> <path d="m112.86 93.05c0.36-0.54 1.09-1.63 1.46-2.17-0.37 0.54-1.1 1.63-1.46 2.17z" fill="#089156"/> <path d="m112.34 93.83c0.13-0.19 0.39-0.58 0.52-0.78-0.13 0.2-0.39 0.59-0.52 0.78z" fill="#089156"/> <path d="m111.32 95.49l0.28-0.48-0.28 0.48z" fill="#089156"/> <path d="m109.93 97.96c0.1-0.18 0.3-0.53 0.4-0.71-0.1 0.18-0.3 0.53-0.4 0.71z" fill="#089156"/> <path d="m109.56 98.58c0.09-0.15 0.27-0.47 0.37-0.62-0.1 0.15-0.28 0.47-0.37 0.62z" fill="#089156"/> <path d="m108.4 100.55c0.04-0.07 0.12-0.21 0.17-0.28-0.05 0.07-0.13 0.21-0.17 0.28z" fill="#089156"/> <path d="m107.29 102.46c0.03-0.06 0.1-0.17 0.13-0.23-0.03 0.06-0.1 0.17-0.13 0.23z" fill="#089156"/> <path d="m214.02 225.86c0.17-0.28 0.53-0.84 0.7-1.11-0.17 0.27-0.53 0.83-0.7 1.11z" fill="#089156"/> <path d="m213.58 226.64c0.05-0.08 0.14-0.25 0.18-0.33-0.04 0.08-0.13 0.25-0.18 0.33z" fill="#089156"/> <path d="m211.72 230.02c0.08-0.13 0.23-0.39 0.3-0.52-0.07 0.13-0.22 0.39-0.3 0.52z" fill="#089156"/> <path d="m210.67 231.87c0.08-0.15 0.25-0.44 0.34-0.59-0.09 0.15-0.26 0.44-0.34 0.59z" fill="#089156"/> <path d="m209.66 233.64c0.05-0.08 0.14-0.24 0.18-0.32-0.04 0.08-0.13 0.24-0.18 0.32z" fill="#089156"/> <path d="m208.27 236.07c0.09-0.16 0.27-0.48 0.36-0.63-0.09 0.15-0.27 0.47-0.36 0.63z" fill="#089156"/> <path d="m207.87 236.74c0.1-0.17 0.3-0.5 0.4-0.67-0.1 0.17-0.3 0.5-0.4 0.67z" fill="#089156"/> <path d="m206.54 239.02c0.08-0.13 0.24-0.41 0.32-0.54-0.08 0.13-0.24 0.41-0.32 0.54z" fill="#089156"/> <path d="m205.5 240.8c0.1-0.18 0.32-0.55 0.42-0.73-0.1 0.18-0.32 0.55-0.42 0.73z" fill="#089156"/> <path d="m203.62 244.07c0.07-0.13 0.22-0.38 0.29-0.5-0.07 0.12-0.22 0.37-0.29 0.5z" fill="#089156"/> <path d="m202.56 245.86c0.11-0.19 0.33-0.55 0.43-0.74-0.1 0.19-0.32 0.55-0.43 0.74z" fill="#089156"/> <path d="m200.71 249.06c0.09-0.15 0.26-0.46 0.35-0.61-0.09 0.15-0.26 0.46-0.35 0.61z" fill="#089156"/> <path d="m199.68 250.9c0.07-0.12 0.21-0.37 0.28-0.49-0.07 0.12-0.21 0.37-0.28 0.49z" fill="#089156"/> <path d="m198.59 252.81l0.32-0.56-0.32 0.56z" fill="#089156"/> <path d="m196.66 256.09c0.09-0.16 0.27-0.47 0.36-0.62-0.09 0.15-0.27 0.46-0.36 0.62z" fill="#089156"/> <path d="m195.69 257.84c0.06-0.12 0.19-0.35 0.26-0.47-0.07 0.12-0.2 0.35-0.26 0.47z" fill="#089156"/> <path d="m194.58 259.76c0.07-0.12 0.22-0.37 0.29-0.5-0.07 0.13-0.22 0.38-0.29 0.5z" fill="#089156"/> <path d="m192.6 263.15c0.08-0.13 0.24-0.39 0.31-0.52-0.07 0.13-0.23 0.39-0.31 0.52z" fill="#089156"/> <path d="m191.59 264.85c0.1-0.18 0.31-0.53 0.41-0.71-0.1 0.18-0.31 0.53-0.41 0.71z" fill="#089156"/> <path d="m189.82 267.94c0.06-0.11 0.2-0.35 0.26-0.46-0.06 0.11-0.2 0.35-0.26 0.46z" fill="#089156"/> <path d="m188.76 269.83c0.06-0.11 0.18-0.32 0.24-0.43-0.06 0.11-0.18 0.32-0.24 0.43z" fill="#089156"/> <path d="m187.64 271.76c0.07-0.11 0.21-0.35 0.28-0.46-0.07 0.11-0.21 0.35-0.28 0.46z" fill="#089156"/> <path d="m185.65 275.09c0.11-0.18 0.31-0.54 0.42-0.71-0.11 0.17-0.31 0.53-0.42 0.71z" fill="#089156"/> <path d="m184.76 276.74c0.07-0.13 0.22-0.41 0.3-0.55-0.08 0.14-0.23 0.42-0.3 0.55z" fill="#089156"/> <path d="m183.39 279.12c0.08-0.15 0.26-0.45 0.34-0.6-0.08 0.15-0.26 0.45-0.34 0.6z" fill="#089156"/> <path d="m183.06 279.69c0.08-0.14 0.24-0.43 0.33-0.57-0.09 0.14-0.25 0.43-0.33 0.57z" fill="#089156"/> <path d="m346.42 3.2196c0.08 0.13 0.23 0.41 0.31 0.55-0.08-0.14-0.23-0.42-0.31-0.55z" fill="#10985b"/> <path d="m354.54 17.35c0.05 0.08 0.13 0.23 0.18 0.3-0.05-0.07-0.13-0.22-0.18-0.3z" fill="#10985b"/> <path d="m369.55 43.36c0.04 0.07 0.13 0.21 0.17 0.29-0.04-0.08-0.13-0.22-0.17-0.29z" fill="#10985b"/> <path d="m372.44 48.25c0.08 0.13 0.23 0.4 0.31 0.54-0.08-0.14-0.23-0.41-0.31-0.54z" fill="#10985b"/> <path d="m376.53 55.37c0.05 0.07 0.13 0.21 0.17 0.29-0.04-0.08-0.12-0.22-0.17-0.29z" fill="#10985b"/> <path d="m380.48 62.24c0.08 0.13 0.23 0.39 0.31 0.52-0.08-0.13-0.23-0.39-0.31-0.52z" fill="#10985b"/> <path d="m384.51 69.22c0.08 0.13 0.23 0.4 0.31 0.53-0.08-0.13-0.23-0.4-0.31-0.53z" fill="#10985b"/> <path d="m420.57 131.65c17.39 30.13 34.89 60.21 52.14 90.43 0.08 0.13 0.24 0.41 0.32 0.54 0.4 0.66 1.2 1.97 1.59 2.62 0.08 0.13 0.24 0.4 0.32 0.53l0.8 1.37c0.05 0.09 0.15 0.28 0.21 0.37l1 1.74c0.1 0.17 0.29 0.52 0.39 0.69 0.09 0.15 0.27 0.46 0.36 0.62l0.98 1.7 0.16 0.28 0.98 1.68c0.04 0.07 0.12 0.2 0.16 0.27l0.98 1.7c0.1 0.17 0.29 0.5 0.39 0.67 0.09 0.17 0.28 0.5 0.37 0.66l1.01 1.78c0.14 0.35 0.42 1.03 0.56 1.37l0.28 0.55 0.13 0.29 0.22 0.29 0.59 0.89c0.21 0.33 0.62 0.99 0.83 1.32 0.12 0.2 0.38 0.6 0.5 0.8l0.66 1.05c0.2 0.45 0.6 1.36 0.8 1.81l0.3 0.54 0.11 0.21 0.09 0.13c0.44 0.65 1.31 1.96 1.75 2.61 0.11 0.18 0.33 0.54 0.45 0.72l0.6 1c0.09 0.16 0.27 0.47 0.36 0.62l1.01 1.77c0.09 0.16 0.27 0.48 0.36 0.64s0.27 0.47 0.36 0.63l1 1.71c0.04 0.08 0.13 0.23 0.18 0.3l0.91 1.6c0.06 0.1 0.18 0.31 0.24 0.41l0.92 1.61c0.11 0.18 0.32 0.55 0.43 0.73 0.09 0.16 0.28 0.48 0.37 0.64 0.74 1.23 1.45 2.48 2.11 3.76 0.1 0.21 0.3 0.63 0.39 0.84l0.46 1.04c0.12 0.2 0.36 0.61 0.47 0.81 0.15 0.2 0.44 0.58 0.59 0.77l0.69 0.98c0.12 0.19 0.36 0.57 0.49 0.77l1.01 1.75c0.09 0.16 0.27 0.48 0.36 0.64s0.27 0.47 0.37 0.63l1 1.72c0.04 0.08 0.12 0.22 0.16 0.29l0.95 1.66c0.04 0.07 0.12 0.2 0.16 0.27l0.97 1.69c0.1 0.17 0.3 0.51 0.4 0.69 0.1 0.17 0.3 0.51 0.39 0.68l1 1.72c0.04 0.07 0.11 0.21 0.15 0.28l1.06 1.98-0.01 0.9c-25.02-7.19-49.64-15.72-74.73-22.65-22.77-7.35-45.75-14.04-68.52-21.35 3.17-1.52 6.56-2.49 9.73-3.99 0.41-1.35 0.84-2.69 1.26-4.02 3.95-2.48 8.41-3.97 12.3-6.54 0.15-3.29 0.14-6.57 0.13-9.85 4.36-3.51 8.98-6.76 12.57-11.11 0.36-4.28-2.87-9.29 0.46-12.9 10.24-12.92 16.45-28.93 17.56-45.38 1.83-6.02-1.46-11.98-0.1-17.97z" fill="#f9c941"/> <path d="m509.91 287.41l0.52 0.02 0.29 0.76-0.59 0.04-0.22-0.82z" fill="#f9c941"/> <path d="m257.34 157.32c0.08 0.13 0.24 0.4 0.32 0.54-0.08-0.14-0.24-0.41-0.32-0.54z" fill="#e3b73a"/> <path d="m259.19 160.53c0.07 0.12 0.2 0.35 0.27 0.47-0.07-0.12-0.2-0.35-0.27-0.47z" fill="#e3b73a"/> <path d="m260.28 162.47c0.05 0.08 0.14 0.25 0.19 0.33-0.05-0.08-0.14-0.25-0.19-0.33z" fill="#e3b73a"/> <path d="m261.48 164.56c0.09 0.15 0.26 0.45 0.35 0.6-0.09-0.15-0.26-0.45-0.35-0.6z" fill="#e3b73a"/> <path d="m261.83 165.16c0.09 0.17 0.28 0.49 0.38 0.65-0.1-0.16-0.29-0.48-0.38-0.65z" fill="#e3b73a"/> <path d="m263.16 167.44c0.05 0.09 0.16 0.27 0.21 0.36-0.05-0.09-0.16-0.27-0.21-0.36z" fill="#e3b73a"/> <path d="m265.34 171.21c0.09 0.16 0.26 0.47 0.35 0.62-0.09-0.15-0.26-0.46-0.35-0.62z" fill="#e3b73a"/> <path d="m267.23 174.48c0.09 0.15 0.26 0.43 0.34 0.57-0.08-0.14-0.25-0.42-0.34-0.57z" fill="#e3b73a"/> <path d="m268.43 176.5c0.2 0.33 0.59 0.98 0.79 1.31-0.2-0.33-0.59-0.98-0.79-1.31z" fill="#e3b73a"/> <path d="m269.49 178.29c0.04 0.09 0.14 0.26 0.19 0.34-0.05-0.08-0.15-0.25-0.19-0.34z" fill="#e3b73a"/> <path d="m271.44 181.79c0.19 0.26 0.57 0.8 0.76 1.07-0.19-0.27-0.57-0.81-0.76-1.07z" fill="#e3b73a"/> <path d="m272.46 183.32c0.04 0.08 0.13 0.25 0.18 0.33-0.05-0.08-0.14-0.25-0.18-0.33z" fill="#e3b73a"/> <path d="m275.45 188.72c0.19 0.28 0.56 0.84 0.75 1.12-0.19-0.28-0.56-0.84-0.75-1.12z" fill="#e3b73a"/> <path d="m276.47 190.31c0.04 0.08 0.14 0.25 0.18 0.33-0.04-0.08-0.14-0.25-0.18-0.33z" fill="#e3b73a"/> <path d="m278.23 193.51c0.09 0.15 0.26 0.45 0.35 0.6-0.09-0.15-0.26-0.45-0.35-0.6z" fill="#e3b73a"/> <path d="m279.22 195.24c0.1 0.17 0.3 0.53 0.4 0.7-0.1-0.17-0.3-0.53-0.4-0.7z" fill="#e3b73a"/> <path d="m280.45 197.4c0.1 0.18 0.31 0.55 0.41 0.73-0.1-0.18-0.31-0.55-0.41-0.73z" fill="#e3b73a"/> <path d="m280.86 198.13c0.09 0.15 0.27 0.47 0.36 0.63-0.09-0.16-0.27-0.48-0.36-0.63z" fill="#e3b73a"/> <path d="m282.24 200.51c0.04 0.08 0.13 0.22 0.17 0.29-0.04-0.07-0.13-0.21-0.17-0.29z" fill="#e3b73a"/> <path d="m283.38 202.47c0.08 0.14 0.24 0.41 0.32 0.55-0.08-0.14-0.24-0.41-0.32-0.55z" fill="#e3b73a"/> <path d="m284.31 204.06c0.11 0.18 0.32 0.55 0.43 0.73-0.11-0.18-0.32-0.55-0.43-0.73z" fill="#e3b73a"/> <path d="m286.47 207.71c0.17 0.29 0.52 0.86 0.69 1.15-0.17-0.29-0.52-0.86-0.69-1.15z" fill="#e3b73a"/> <path d="m287.45 209.32c0.05 0.09 0.15 0.25 0.2 0.33-0.05-0.08-0.15-0.24-0.2-0.33z" fill="#e3b73a"/> <path d="m289.43 212.46l0.07 0.1 0.06 0.13c-0.03-0.06-0.1-0.17-0.13-0.23z" fill="#e3b73a"/> <path d="m291.5 216.56c0.09 0.15 0.25 0.44 0.34 0.59-0.09-0.15-0.25-0.44-0.34-0.59z" fill="#e3b73a"/> <path d="m291.84 217.15l0.4 0.68-0.4-0.68z" fill="#e3b73a"/> <path d="m293.19 219.44c0.05 0.09 0.15 0.27 0.21 0.36-0.06-0.09-0.16-0.27-0.21-0.36z" fill="#e3b73a"/> <path d="m294.06 220.98c11.53 4.24 23.46 7.26 35.11 11.11 12.52 3.71 24.94 7.72 37.49 11.32 22.77 7.31 45.75 14 68.52 21.35-0.34 4.87 0.62 9.86-0.59 14.64-0.93 4.65-6.49 5.38-8.78 9.09-30.77 0.01-61.53 0.1-92.29-0.03l-0.66-0.05c-12.71-22.6-25.93-44.92-38.8-67.43z" fill="#e3b73a"/> <path d="m472.71 222.08c0.08 0.13 0.24 0.41 0.32 0.54-0.08-0.13-0.24-0.41-0.32-0.54z" fill="#e8b835"/> <path d="m474.62 225.24c0.08 0.13 0.24 0.4 0.32 0.53-0.08-0.13-0.24-0.4-0.32-0.53z" fill="#e8b835"/> <path d="m475.74 227.14c0.05 0.09 0.15 0.28 0.21 0.37-0.06-0.09-0.16-0.28-0.21-0.37z" fill="#e8b835"/> <path d="m476.95 229.25c0.1 0.17 0.29 0.52 0.39 0.69-0.1-0.17-0.29-0.52-0.39-0.69z" fill="#e8b835"/> <path d="m477.34 229.94c0.09 0.15 0.27 0.46 0.36 0.62-0.09-0.16-0.27-0.47-0.36-0.62z" fill="#e8b835"/> <path d="m478.68 232.26l0.16 0.28-0.16-0.28z" fill="#e8b835"/> <path d="m479.82 234.22c0.04 0.07 0.12 0.2 0.16 0.27-0.04-0.07-0.12-0.2-0.16-0.27z" fill="#e8b835"/> <path d="m480.96 236.19c0.1 0.17 0.29 0.5 0.39 0.67-0.1-0.17-0.29-0.5-0.39-0.67z" fill="#e8b835"/> <path d="m481.35 236.86c0.09 0.17 0.28 0.5 0.37 0.66-0.09-0.16-0.28-0.49-0.37-0.66z" fill="#e8b835"/> <path d="m482.73 239.3c0.14 0.35 0.42 1.03 0.56 1.37-0.14-0.34-0.42-1.02-0.56-1.37z" fill="#e8b835"/> <path d="m483.57 241.22c0.09 0.15 0.26 0.44 0.35 0.58l-0.22-0.29-0.13-0.29z" fill="#e8b835"/> <path d="m484.51 242.69c0.21 0.33 0.62 0.99 0.83 1.32-0.21-0.33-0.62-0.99-0.83-1.32z" fill="#e8b835"/> <path d="m485.34 244.01c0.12 0.2 0.38 0.6 0.5 0.8-0.12-0.2-0.38-0.6-0.5-0.8z" fill="#e8b835"/> <path d="m486.5 245.86c0.2 0.45 0.6 1.36 0.8 1.81-0.2-0.45-0.6-1.36-0.8-1.81z" fill="#e8b835"/> <path d="m487.6 248.21c0.05 0.09 0.15 0.26 0.2 0.34l-0.09-0.13-0.11-0.21z" fill="#e8b835"/> <path d="m489.55 251.16c0.11 0.18 0.33 0.54 0.45 0.72-0.12-0.18-0.34-0.54-0.45-0.72z" fill="#e8b835"/> <path d="m490.6 252.88c0.09 0.16 0.27 0.47 0.36 0.62-0.09-0.15-0.27-0.46-0.36-0.62z" fill="#e8b835"/> <path d="m491.97 255.27c0.09 0.16 0.27 0.48 0.36 0.64-0.09-0.16-0.27-0.48-0.36-0.64z" fill="#e8b835"/> <path d="m492.33 255.91c0.09 0.16 0.27 0.47 0.36 0.63-0.09-0.16-0.27-0.47-0.36-0.63z" fill="#e8b835"/> <path d="m493.69 258.25c0.04 0.08 0.13 0.23 0.18 0.3-0.05-0.07-0.14-0.22-0.18-0.3z" fill="#e8b835"/> <path d="m494.78 260.15c0.06 0.1 0.18 0.31 0.24 0.41-0.06-0.1-0.18-0.31-0.24-0.41z" fill="#e8b835"/> <path d="m495.94 262.17c0.11 0.18 0.32 0.55 0.43 0.73-0.11-0.18-0.32-0.55-0.43-0.73z" fill="#e8b835"/> <path d="m496.37 262.9c0.09 0.16 0.28 0.48 0.37 0.64-0.09-0.16-0.28-0.48-0.37-0.64z" fill="#e8b835"/> <path d="m435.18 264.76c25.09 6.93 49.71 15.46 74.73 22.65l0.22 0.82c-28.09 0.64-56.22 0.11-84.32 0.26 2.29-3.71 7.85-4.44 8.78-9.09 1.21-4.78 0.25-9.77 0.59-14.64z" fill="#e8b835"/> <path d="m498.85 267.3c0.1 0.21 0.3 0.63 0.39 0.84-0.09-0.21-0.29-0.63-0.39-0.84z" fill="#e8b835"/> <path d="m499.7 269.18c0.12 0.2 0.36 0.61 0.47 0.81-0.11-0.2-0.35-0.61-0.47-0.81z" fill="#e8b835"/> <path d="m500.17 269.99c0.15 0.2 0.44 0.58 0.59 0.77-0.15-0.19-0.44-0.57-0.59-0.77z" fill="#e8b835"/> <path d="m501.45 271.74c0.12 0.19 0.36 0.57 0.49 0.77-0.13-0.2-0.37-0.58-0.49-0.77z" fill="#e8b835"/> <path d="m502.95 274.26c0.09 0.16 0.27 0.48 0.36 0.64-0.09-0.16-0.27-0.48-0.36-0.64z" fill="#e8b835"/> <path d="m503.31 274.9c0.09 0.16 0.27 0.47 0.37 0.63-0.1-0.16-0.28-0.47-0.37-0.63z" fill="#e8b835"/> <path d="m504.68 277.25c0.04 0.08 0.12 0.22 0.16 0.29-0.04-0.07-0.12-0.21-0.16-0.29z" fill="#e8b835"/> <path d="m505.79 279.2c0.04 0.07 0.12 0.2 0.16 0.27-0.04-0.07-0.12-0.2-0.16-0.27z" fill="#e8b835"/> <path d="m506.92 281.16c0.1 0.17 0.3 0.51 0.4 0.69-0.1-0.18-0.3-0.52-0.4-0.69z" fill="#e8b835"/> <path d="m507.32 281.85c0.1 0.17 0.3 0.51 0.39 0.68-0.09-0.17-0.29-0.51-0.39-0.68z" fill="#e8b835"/> <path d="m508.71 284.25c0.04 0.07 0.11 0.21 0.15 0.28-0.04-0.07-0.11-0.21-0.15-0.28z" fill="#e8b835"/> <path d="m509.92 286.51c0.13 0.23 0.38 0.69 0.51 0.92l-0.52-0.02 0.01-0.9z" fill="#e8b835"/> <path d="m147.21 341.08c10.31-17.58 20.11-35.49 30.76-52.86 51.63 0.19 103.27-0.29 154.89 0.19l0.66 0.05c-26.11 0.84-52.29-0.22-78.4 0.44-4.98 3.21-8.3 8.41-13.07 11.91-4.43 3.23-7.69 7.73-11.92 11.18-5.93 4.37-10.34 10.43-16.36 14.71-6.96 7.37-14.99 13.58-22.01 20.91-5.26 4.04-9.66 9.03-14.56 13.48-5.39 3.91-9.52 9.21-14.56 13.53-0.13 0.11-0.38 0.33-0.51 0.45-0.27 0.21-0.8 0.65-1.07 0.86-0.13 0.11-0.37 0.31-0.5 0.42-3.97 3.07-7.01 7.12-10.91 10.27-0.13 0.11-0.38 0.32-0.5 0.42-0.13 0.11-0.38 0.32-0.51 0.42-5.69 4.67-10.25 10.58-16.22 14.93-6.01 5.96-12.79 11.08-18.5 17.36-8.44 6.94-15.74 15.13-24.44 21.78 2.16-4.71 5.02-9.03 7.53-13.54 16.74-28.97 33.46-57.94 50.2-86.91z" fill="#296ad9"/> <path d="m89.04 442.17c0.11-0.16 0.33-0.48 0.44-0.64l-0.03 0.65-0.41-0.01z" fill="#296ad9"/> <path id="#2a71e9ff" fill="#2a71e9" d="m333.52 288.46c30.76 0.13 61.52 0.04 92.29 0.03 28.1-0.15 56.23 0.38 84.32-0.26l0.59-0.04 0.4 0.11v0.08c-29.66 51.27-59.23 102.6-88.89 153.88-110.93-0.03-221.86 0.1-332.78-0.08l0.03-0.65c8.7-6.65 16-14.84 24.44-21.78 5.71-6.28 12.49-11.4 18.5-17.36 5.97-4.35 10.53-10.26 16.22-14.93 0.13-0.1 0.38-0.31 0.51-0.42 0.12-0.1 0.37-0.31 0.5-0.42 3.9-3.15 6.94-7.2 10.91-10.27 0.13-0.11 0.37-0.31 0.5-0.42 0.27-0.21 0.8-0.65 1.07-0.86 0.13-0.12 0.38-0.34 0.51-0.45 5.04-4.32 9.17-9.62 14.56-13.53 4.9-4.45 9.3-9.44 14.56-13.48 7.02-7.33 15.05-13.54 22.01-20.91 6.02-4.28 10.43-10.34 16.36-14.71 4.23-3.45 7.49-7.95 11.92-11.18 4.77-3.5 8.09-8.7 13.07-11.91 26.11-0.66 52.29 0.4 78.4-0.44z"/> <path d="m162.13 375.07c0.13-0.12 0.38-0.34 0.51-0.45-0.13 0.11-0.38 0.33-0.51 0.45z" fill="#286ee6"/> <path d="m161.06 375.93c0.27-0.21 0.8-0.65 1.07-0.86-0.27 0.21-0.8 0.65-1.07 0.86z" fill="#286ee6"/> <path d="m160.56 376.35c0.13-0.11 0.37-0.31 0.5-0.42-0.13 0.11-0.37 0.31-0.5 0.42z" fill="#286ee6"/> <path d="m149.15 387.04c0.12-0.1 0.37-0.31 0.5-0.42-0.13 0.11-0.38 0.32-0.5 0.42z" fill="#286ee6"/> <path d="m148.64 387.46c0.13-0.1 0.38-0.31 0.51-0.42-0.13 0.11-0.38 0.32-0.51 0.42z" fill="#286ee6"/> </svg> <div>Google Drive</div> </button> </div> </div> </div> <div class="rs-box rs-box-sign-in" aria-hidden="true"> <div class="rs-content"> <form name="rs-sign-in-form" class="rs-sign-in-form"> <h1 class="rs-big-headline">Connect your storage</h1> <input type="text" name="rs-user-address" placeholder="user@provider.com" autocapitalize="off"> <div class="rs-sign-in-error rs-hidden"></div> <button type="submit" class="rs-connect">Connect</button> <a href="https://remotestorage.io/get/" class="rs-help" target="_blank" rel="noopener">Need help?</a> </form> </div> </div> </div> ';var w=document.createElement("style");return w.innerHTML=`#remotestorage-widget {
  z-index: 21000000;
}

.rs-widget {
  box-sizing: border-box;
  overflow: hidden;
  max-width: 350px;
  padding: 10px;
  margin: 10px;
  border-radius: 3px;
  background-color: #fff;
  box-shadow: 0 1px 2px 0 rgba(0,0,0,0.1), 0 3px 8px 0 rgba(0,0,0,0.2);
  font-family: arial, sans-serif;
  font-size: 16px;
  color: #333;
  will-change: max-height, height, width, opacity, max-width, background, box-shadow;
  transition-property: width, height, opacity, max-width, max-height, background, box-shadow;
  transition-duration: 300ms;
}

.rs-widget * {
  box-sizing: border-box;
}

.rs-widget .rs-hidden {
  display: none;
}

.rs-box {
  overflow: hidden;
  will-change: height;
  transition-property: height, width, max-height;
  transition-duration: 300ms;
  transition-timing-function: ease-in;
  opacity: 0;
  max-height: 0px;
}

.rs-box.rs-selected:not([aria-hidden=true]) {
  opacity: 1;
  max-height: 420px;
}

/* Main logo */
.rs-main-logo {
  float: left;
  height: 36px;
  width: 36px;
  margin-top: 1px;
  margin-right: 0.625em;
  transition: margin-left 300ms ease-out, transform 300ms ease-out;
  cursor: pointer;
}
.rs-widget .rs-backend-remotestorage svg#rs-main-logo-remotestorage {
  display: block;
}
.rs-widget[class*="rs-backend-"]:not(.rs-backend-remotestorage) svg#rs-main-logo-remotestorage {
  display: none;
}
.rs-widget.rs-backend-dropbox svg#rs-main-logo-dropbox {
  display: block;
}
.rs-widget:not(.rs-backend-dropbox) svg#rs-main-logo-dropbox {
  display: none;
}
.rs-widget.rs-backend-googledrive svg#rs-main-logo-googledrive {
  display: block;
}
.rs-widget:not(.rs-backend-googledrive) svg#rs-main-logo-googledrive {
  display: none;
}

polygon.rs-logo-shape {
  fill: #FF4B03;
}

polygon.rs-logo-shape,
#rs-main-logo-dropbox path,
#rs-main-logo-googledrive path {
  transition-property: fill;
  transition-duration: 0.5s;
}

.rs-offline polygon.rs-logo-shape,
.rs-offline #rs-main-logo-dropbox path,
.rs-offline #rs-main-logo-googledrive path {
  fill: #888;
  transition-property: fill;
  transition-duration: 0.5s;
}

/* Hide everything except logo when connected and clicked outside of box */
.rs-closed {
  max-width: 56px;
  background-color: transparent;
  box-shadow: none;
  opacity: 0.5;

  transition: max-height 100ms ease-out 0ms, max-width 300ms ease-out 300ms, background 300ms ease-in 200ms, opacity 300ms ease 200ms;
}

.rs-closed:hover {
  cursor: pointer;
  opacity: 1;
}

.rs-box-initial {
  transition-duration: 0ms;
}

.rs-box-initial:hover {
  cursor: pointer;
}

.rs-widget a {
  color: #0093cc;
}

/* HEADLINE */
.rs-small-headline {
  font-size: 1em;
  font-weight: bold;
  margin: 0;
  margin-bottom: 2px;
  height: 1.2em;
  word-break: break-all;
  overflow: hidden;
  line-height: 1em;
}

.rs-sub-headline {
  word-break: break-all;
  overflow: hidden;
  color: #666;
  font-size: 0.92em;
  height: 1.2em;
}
.rs-big-headline {
  font-size: 1.625em;
  font-weight: normal;
  text-align: center;
  margin-top: 20px;
  margin-bottom: 20px;
}

/* BUTTONS  */
.rs-button {
  font: inherit;
  color: inherit;
  background-color: transparent;
  border: 1px solid #dcdcdc;
  border-radius: 3px;
  cursor: pointer;
}
.rs-button-small {
  padding: 0.6em 0.7em;
  margin-left: 0.2em;
  transition: border-color 300ms ease-out;
}
.rs-button-small svg {
  vertical-align: top;
}
.rs-button-wrap {
  margin-top: 10px;
}

.rs-button-wrap img,
.rs-button-wrap svg {
  float: left;
  margin-right: 0.6em;
  width: 40px;
  height: 40px;
}

.rs-button-big {
  padding: 15px 10px;
  margin-bottom: 10px;
  display: block;
  width: 100%;
  text-align: left;
  transition: box-shadow 200ms;
}
.rs-button-big > div {
  font-size: 1.125em;
  padding: 10px 0;
}
.rs-button-big:hover {
  box-shadow: 0 1px 2px 0 rgba(0,0,0,0.1), 0 3px 8px 0 rgba(0,0,0,0.2);
}
.rs-button-big:active {
  background-color: #eee;
  box-shadow: 0 1px 2px 0 rgba(0,0,0,0.1), 0 3px 8px 0 rgba(0,0,0,0.2);
}
.rs-button-big:last-child {
  margin-bottom: 0;
}

.rs-content {
  padding: 0 10px 10px 10px;
}


.rs-state-choose .rs-main-logo,
.rs-state-sign-in .rs-main-logo {
  margin-left: 45%;
  float: none;
}

.rs-sign-in-form input[type=text] {
  padding: 15px 10px;
  display: block;
  width: 100%;
  font: inherit;
  height: 52px;
  border: 1px solid #aaa;
  border-radius: 0;
  box-shadow: none;
}
.rs-sign-in-form button.rs-connect {
  padding: 15px 10px;
  margin-top: 20px;
  margin-bottom: 15px;
  display: block;
  width: 100%;
  border: none;
  border-radius: 3px;
  background-color: #3fb34f;
  font: inherit;
  color: #fff;
  transition: box-shadow 200ms, background-color 200ms;
}

.rs-sign-in-form button.rs-connect:hover {
  cursor: pointer;
  background-color: #4BCB5D;
  box-shadow: 0 1px 2px 0 rgba(0,0,0,0.1), 0 3px 8px 0 rgba(0,0,0,0.2);
}

.rs-sign-in-form button.rs-connect:active {
  background-color: #3fb34f;
}

.rs-sign-in-form button.rs-connect:disabled,
.rs-sign-in-form button.rs-connect:disabled:hover {
  background-color: #aaa;
}

.rs-sign-in-form button.rs-connecting svg {
  height: 1em;
  width: auto;
  vertical-align: middle;
  margin-left: 0.5em;
  animation: rs-spin 1s linear infinite;
}

.rs-sign-in-error.rs-hidden,
.rs-box-error.rs-hidden {
  height: 0;
}

.rs-sign-in-error.rs-visible,
.rs-box-error.rs-visible {
  height: auto;
  border-radius: 3px;
  padding: 0.5em 0.5em;
  margin-top: 0.5em;
  text-align: center;
  background-color: rgba(255,0,0,0.1);
  color: darkred;
}

.rs-box-error {
  display: flex;
  flex-direction: row;
}

.rs-box-error .rs-error-message {
  flex: auto;
}

 /*Choose provider box */
.rs-box-choose {
  text-align: center;
  overflow: hidden;
}

.rs-box-choose p {
  margin-top: 0;
  margin-bottom: 20px;
  line-height: 1.4em;
}

/*Connected box */
.rs-box-connected {
  display: flex;
  flex-direction: row;
  height: 40px;
  transition: height 0s;
}
.rs-connected-text {
  flex: auto;
  min-width: 0;
}
.rs-box-connected .rs-user {
  font-weight: bold;
  text-overflow: ellipsis;
  overflow: hidden;
  word-break: keep-all;
}
.rs-connected-buttons, .rs-error-buttons {
  flex: none;
}
.rs-disconnect:hover {
  border-color: #FF2D2D;
}
.rs-disconnect:hover .rs-icon{
  fill: #FF2D2D;
}
.rs-sync:hover {
  border-color: #FFBB0C;
}
.rs-sync:hover .rs-icon {
  fill: #FFBB0C;
}
.rs-sync.rs-rotate {
  border-color: #FFBB0C;
}
.rs-sync.rs-rotate .rs-icon {
  fill: #FFBB0C;
  animation: rs-spin 1s linear infinite;
}

/* Floating widget styles (top right corner) */
.rs-floating {
  position: fixed;
  top: 0;
  right: 0;
}

@keyframes rs-spin {
  100% {
    transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

/* Small/mobile screens */
@media screen and (max-width: 420px) {
  .rs-widget {
    font-size: 100%;
    transition: all 300ms ease-out;
    max-width: 400px;
  }
  .rs-floating {
    position: relative;
    top: auto;
    right: auto
  }
  .rs-closed {
    max-width: 56px;
  }
  .rs-state-choose,
  .rs-state-sign-in {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    max-width: 100%;
  }
}

/* remove dotted outline border on Firefox */
.rs-widget a:focus,
.rs-widget a:active,
.rs-widget button:focus,
.rs-widget input:focus {
  outline:none;
}
.rs-widget button::-moz-focus-inner,
.rs-widget input[type="button"]::-moz-focus-inner {
  border:0;
}

/* prevent rounded buttons on mobile Safari */
.rs-widget button,
.rs-widget input[type="button"] {
  -webkit-appearance: none;
}

.remotestorage-widget-modal-backdrop {
  display: none;
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: rgba(0, 0, 0, 0.5);
  opacity: 0;
  transition: opacity 0.3s linear;
}

.remotestorage-widget-modal-backdrop.visible {
  opacity: 1;
  transition: opacity 0.3s linear;
}
`,m.appendChild(w),m}},{key:"setModalClass",value:function(){if(this.modalBackdrop){if(this.modalBackdrop==="onlySmallScreens"&&!this.isSmallScreen())return;this.rsWidget.classList.add("rs-modal")}}},{key:"setupElements",value:function(){this.rsWidget=document.querySelector(".rs-widget"),this.rsBackdrop=document.querySelector(".remotestorage-widget-modal-backdrop"),this.rsInitial=document.querySelector(".rs-box-initial"),this.rsChoose=document.querySelector(".rs-box-choose"),this.rsConnected=document.querySelector(".rs-box-connected"),this.rsSignIn=document.querySelector(".rs-box-sign-in"),this.rsConnectedLabel=document.querySelector(".rs-box-connected .rs-sub-headline"),this.rsChooseRemoteStorageButton=document.querySelector("button.rs-choose-rs"),this.rsChooseDropboxButton=document.querySelector("button.rs-choose-dropbox"),this.rsChooseGoogleDriveButton=document.querySelector("button.rs-choose-googledrive"),this.rsErrorBox=document.querySelector(".rs-box-error .rs-error-message"),this.rs.apiKeys.hasOwnProperty("googledrive")||this.rsChooseGoogleDriveButton.parentNode.removeChild(this.rsChooseGoogleDriveButton),this.rs.apiKeys.hasOwnProperty("dropbox")||this.rsChooseDropboxButton.parentNode.removeChild(this.rsChooseDropboxButton),this.rsSignInForm=document.querySelector(".rs-sign-in-form"),this.rsAddressInput=this.rsSignInForm.querySelector("input[name=rs-user-address]"),this.rsConnectButton=document.querySelector(".rs-connect"),this.rsDisconnectButton=document.querySelector(".rs-disconnect"),this.rsSyncButton=document.querySelector(".rs-sync"),this.rsLogo=document.querySelector(".rs-widget-icon"),this.rsErrorReconnectLink=document.querySelector(".rs-box-error a.rs-reconnect"),this.rsErrorDisconnectButton=document.querySelector(".rs-box-error button.rs-disconnect"),this.rsConnectedUser=document.querySelector(".rs-connected-text h1.rs-user")}},{key:"setupHandlers",value:function(){var m=this;this.rs.on("connected",function(){return m.eventHandler("connected")}),this.rs.on("ready",function(){return m.eventHandler("ready")}),this.rs.on("disconnected",function(){return m.eventHandler("disconnected")}),this.rs.on("network-online",function(){return m.eventHandler("network-online")}),this.rs.on("network-offline",function(){return m.eventHandler("network-offline")}),this.rs.on("error",function(w){return m.eventHandler("error",w)}),this.setEventListeners(),this.setClickHandlers()}},{key:"attach",value:function(m){var w,k=this.createHtmlTemplate();if(m){if(w=document.getElementById(m),!parent)throw'Failed to find target DOM element with id="'+m+'"'}else w=document.body;w.appendChild(k),this.setupElements(),this.setupHandlers(),this.setInitialState(),this.setModalClass()}},{key:"setEventListeners",value:function(){var m=this;this.rsSignInForm.addEventListener("submit",function(w){w.preventDefault();var k=document.querySelector("input[name=rs-user-address]").value;m.disableConnectButton(),m.rs.connect(k)})}},{key:"showChooseOrSignIn",value:function(){this.rsWidget.classList.contains("rs-modal")&&(this.rsBackdrop.style.display="block",this.rsBackdrop.classList.add("visible")),this.rs.apiKeys&&Object.keys(this.rs.apiKeys).length>0?this.setState("choose"):this.setState("sign-in")}},{key:"setClickHandlers",value:function(){var m=this;this.rsInitial.addEventListener("click",function(){return m.showChooseOrSignIn()}),this.rsChooseRemoteStorageButton.addEventListener("click",function(){m.setState("sign-in"),m.rsAddressInput.focus()}),this.rsChooseDropboxButton.addEventListener("click",function(){return m.rs.dropbox.connect()}),this.rsChooseGoogleDriveButton.addEventListener("click",function(){return m.rs.googledrive.connect()}),this.rsDisconnectButton.addEventListener("click",function(){return m.rs.disconnect()}),this.rsErrorReconnectLink.addEventListener("click",function(){return m.rs.reconnect()}),this.rsErrorDisconnectButton.addEventListener("click",function(){return m.rs.disconnect()}),this.rs.hasFeature("Sync")&&this.rsSyncButton.addEventListener("click",function(){m.rsSyncButton.classList.contains("rs-rotate")?(m.rs.stopSync(),m.rsSyncButton.classList.remove("rs-rotate")):(m.rsConnectedLabel.textContent="Synchronizing",m.rs.startSync(),m.rsSyncButton.classList.add("rs-rotate"))}),document.addEventListener("click",function(){return m.close()}),this.rsWidget.addEventListener("click",function(w){return w.stopPropagation()}),this.rsLogo.addEventListener("click",function(){return m.toggle()})}},{key:"toggle",value:function(){this.closed?this.open():this.state==="initial"?this.showChooseOrSignIn():this.close()}},{key:"open",value:function(){this.closed=!1,this.rsWidget.classList.remove("rs-closed"),this.shouldCloseWhenSyncDone=!1;var m=document.querySelector(".rs-box.rs-selected");m&&m.setAttribute("aria-hidden","false")}},{key:"close",value:function(){var m=this;if(this.state!=="error"){if(!this.leaveOpen&&this.active){this.closed=!0,this.rsWidget.classList.add("rs-closed");var w=document.querySelector(".rs-box.rs-selected");w&&w.setAttribute("aria-hidden","true")}else this.active?this.setState("connected"):this.setInitialState();this.rsWidget.classList.contains("rs-modal")&&(this.rsBackdrop.classList.remove("visible"),setTimeout(function(){m.rsBackdrop.style.display="none"},300))}}},{key:"disableConnectButton",value:function(){this.rsConnectButton.disabled=!0,this.rsConnectButton.classList.add("rs-connecting"),this.rsConnectButton.innerHTML="Connecting ".concat(`<svg width="38" height="38" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg" stroke="#fff">
  <g fill="none" fill-rule="evenodd">
    <g transform="translate(1 1)" stroke-width="2">
      <circle stroke-opacity=".5" cx="18" cy="18" r="18"/>
      <path d="M36 18c0-9.94-8.06-18-18-18"></path>
    </g>
  </g>
</svg>
`)}},{key:"enableConnectButton",value:function(){this.rsConnectButton.disabled=!1,this.rsConnectButton.textContent="Connect",this.rsConnectButton.classList.remove("rs-connecting")}},{key:"setOffline",value:function(){this.online&&(this.rsWidget.classList.add("rs-offline"),this.rsConnectedLabel.textContent="Offline",this.online=!1)}},{key:"setOnline",value:function(){this.online||(this.rsWidget.classList.remove("rs-offline"),this.active&&(this.rsConnectedLabel.textContent="Connected")),this.online=!0}},{key:"setBackendClass",value:function(m){this.rsWidget.classList.remove("rs-backend-remotestorage"),this.rsWidget.classList.remove("rs-backend-dropbox"),this.rsWidget.classList.remove("rs-backend-googledrive"),m&&this.rsWidget.classList.add("rs-backend-".concat(m))}},{key:"showErrorBox",value:function(m){this.rsErrorBox.innerHTML=m,this.setState("error")}},{key:"hideErrorBox",value:function(){this.rsErrorBox.innerHTML="",this.close()}},{key:"handleDiscoveryError",value:function(m){var w=document.querySelector(".rs-sign-in-error");w.innerHTML=m.message,w.classList.remove("rs-hidden"),w.classList.add("rs-visible"),this.enableConnectButton()}},{key:"handleSyncError",value:function(m){console.debug('Encountered SyncError: "'.concat(m.message,'"')),this.setOffline()}},{key:"handleUnauthorized",value:function(m){m.code&&m.code==="access_denied"?this.rs.disconnect():(this.open(),this.showErrorBox(m.message+" "),this.rsErrorBox.appendChild(this.rsErrorReconnectLink),this.rsErrorReconnectLink.classList.remove("rs-hidden"))}},{key:"updateLastSyncedStatus",value:function(){var m=new Date;if(this.online)return this.lastSynced=m,void(this.rsConnectedLabel.textContent="Synced just now");if(this.lastSynced){var w=Math.round((m.getTime()-this.lastSynced.getTime())/1e3);this.rsConnectedLabel.textContent="Synced ".concat(w," seconds ago")}else this.rsWidget.classList.contains("rs-state-unauthorized")||(this.rsConnectedLabel.textContent="Offline")}},{key:"isSmallScreen",value:function(){return window.innerWidth<421}}],g&&o(h.prototype,g),Object.defineProperty(h,"prototype",{writable:!1}),f}();const u=l;return r.default})()})}(yy)),yy.exports}var d8=f8();const h8=Sp(d8);var Pm={exports:{}};/*! For license information please see remotestorage.js.LICENSE.txt */var p8=Pm.exports,Pw;function m8(){return Pw||(Pw=1,function(n,e){(function(t,r){n.exports=r()})(p8,function(){return function(){var t={548:function(l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.Access=void 0;class f{static _rs_init(){}constructor(){this.reset()}get scopes(){return Object.keys(this.scopeModeMap).map(g=>({name:g,mode:this.scopeModeMap[g]}))}get scopeParameter(){return this.scopes.map(g=>`${this._scopeNameForParameter(g)}:${g.mode}`).join(" ")}claim(g,m){if(typeof g!="string"||g.indexOf("/")!==-1||g.length===0)throw new Error("Scope should be a non-empty string without forward slashes");if(!m.match(/^rw?$/))throw new Error("Mode should be either 'r' or 'rw'");this._adjustRootPaths(g),this.scopeModeMap[g]=m}get(g){return this.scopeModeMap[g]}remove(g){const m={};for(const w in this.scopeModeMap)m[w]=this.scopeModeMap[w];this.reset(),delete m[g];for(const w in m)this.claim(w,m[w])}checkPermission(g,m){const w=this.get(g);return w&&(m==="r"||w==="rw")}checkPathPermission(g,m){if(this.checkPermission("*",m))return!0;const w=this._getModuleName(g);return!!this.checkPermission(w,m)}reset(){this.rootPaths=[],this.scopeModeMap={}}_getModuleName(g){if(g[0]!=="/")throw new Error("Path should start with a slash");const m=g.replace(/^\/public/,"").match(/^\/([^/]*)\//);return m?m[1]:"*"}_adjustRootPaths(g){"*"in this.scopeModeMap||g==="*"?this.rootPaths=["/"]:g in this.scopeModeMap||(this.rootPaths.push("/"+g+"/"),this.rootPaths.push("/public/"+g+"/"))}_scopeNameForParameter(g){if(g.name==="*"&&this.storageType){if(this.storageType==="2012.04")return"";if(this.storageType.match(/remotestorage-0[01]/))return"root"}return g.name}setStorageType(g){this.storageType=g}}u.Access=f,u.default=f},275:function(l,u,f){var h=this&&this.__awaiter||function(V,I,W,B){return new(W||(W=Promise))(function(z,H){function Y(U){try{C(B.next(U))}catch(R){H(R)}}function q(U){try{C(B.throw(U))}catch(R){H(R)}}function C(U){var R;U.done?z(U.value):(R=U.value,R instanceof W?R:new W(function(Q){Q(R)})).then(Y,q)}C((B=B.apply(V,I||[])).next())})},g=this&&this.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(u,"__esModule",{value:!0}),u.Authorize=void 0;const m=g(f(334)),w=f(746),k=g(f(503)),b=f(368);let A;function O(V){const I=V||F.getLocation().href,W={};for(const[H,Y]of new URL(I).searchParams)W[H]=Y;const B=I.indexOf("#");if(B===-1)return W;const z=I.substring(B+1);return z.includes("=")?z.split("&").reduce(function(H,Y){const q=Y.split("=");if(q[0]==="state"&&q[1].match(/rsDiscovery/)){let C=decodeURIComponent(q[1]);const U=C.substr(C.indexOf("rsDiscovery=")).split("&")[0].split("=")[1];H.rsDiscovery=JSON.parse(atob(U)),C=C.replace(new RegExp("&?rsDiscovery="+U),""),C.length>0&&(H.state=C)}else H[decodeURIComponent(q[0])]=decodeURIComponent(q[1]);return H},W):W}class F{static authorize(I,W){if((0,m.default)("[Authorize] authURL = ",W.authURL,"scope = ",W.scope,"redirectUri = ",W.redirectUri,"clientId = ",W.clientId,"response_type =",W.response_type),!W.scope)throw new Error("Cannot authorize due to undefined or empty scope; did you forget to access.claim()?");if(!(0,w.localStorageAvailable)()&&I.backend==="remotestorage"){W.redirectUri+=W.redirectUri.indexOf("#")>0?"&":"#";const z={userAddress:I.remote.userAddress,href:I.remote.href,storageApi:I.remote.storageApi,properties:I.remote.properties};W.redirectUri+="rsDiscovery="+(0,w.toBase64)(JSON.stringify(z))}const B=function(z){const H=new URL(z.redirectUri);z.state||(z.state=H.hash?H.hash.substring(1):""),z.response_type||(z.response_type="token");const Y=new URL(z.authURL);Y.searchParams.set("redirect_uri",z.redirectUri.replace(/#.*$/,"")),Y.searchParams.set("scope",z.scope),Y.searchParams.set("client_id",z.clientId);for(const q of["state","response_type","code_challenge","code_challenge_method","token_access_type"]){const C=z[q];C&&Y.searchParams.set(q,C)}return Y.href}(W);w.globalContext.cordova?F.openWindow(B,W.redirectUri,"location=yes,clearsessioncache=yes,clearcache=yes").then(z=>{I.remote.configure({token:z.access_token})}):F.setLocation(B)}static refreshAccessToken(I,W,B){return h(this,void 0,void 0,function*(){var z,H,Y;yield W.configure({token:null,tokenType:null});const q=new URLSearchParams({grant_type:"refresh_token",client_id:W.clientId,refresh_token:B}),C=yield(0,b.requestWithTimeout)("POST",W.TOKEN_URL,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:q.toString(),responseType:"json"});if((C==null?void 0:C.status)!==200)throw yield W.configure({refreshToken:null}),new k.default("refresh token rejected:"+JSON.stringify(C.response));{(0,m.default)(`[Authorize] access token good for ${(z=C==null?void 0:C.response)===null||z===void 0?void 0:z.expires_in} seconds`);const U={token:(H=C==null?void 0:C.response)===null||H===void 0?void 0:H.access_token,tokenType:(Y=C==null?void 0:C.response)===null||Y===void 0?void 0:Y.token_type};if(!U.token)throw new Error(`no access_token in "successful" refresh: ${C.response}`);yield W.configure(U)}})}static setLocation(I){if(typeof I=="string")document.location.href=I;else{if(typeof I!="object")throw"Invalid location "+I;document.location=I}}static _rs_supported(){return typeof document<"u"}static _rs_cleanup(I){I.removeEventListener("features-loaded",A)}}u.Authorize=F,F.IMPLIED_FAKE_TOKEN=!1,F.getLocation=function(){return document.location},F.openWindow=function(V,I,W){return new Promise((B,z)=>{const H=open(V,"_blank",W);function Y(){z("Authorization was canceled")}H&&!H.closed?(H.addEventListener("loadstart",function(q){if(q.url.indexOf(I)!==0)return;H.removeEventListener("exit",Y),H.close();const C=O(q.url);C?B(C):z("Authorization error")}),H.addEventListener("exit",Y)):z("Authorization popup was blocked")})},F._rs_init=function(V){const I=O();let W;I&&(W=F.getLocation(),W.hash=""),A=function(){let B=!1;if(I){if(I.error)throw I.error==="access_denied"?new k.default("Authorization failed: access denied",{code:"access_denied"}):new k.default(`Authorization failed: ${I.error}`);I.rsDiscovery&&V.remote.configure(I.rsDiscovery),I.access_token&&(V.remote.configure({token:I.access_token}),B=!0),I.remotestorage&&(V.connect(I.remotestorage),B=!0),I.state&&(W=F.getLocation(),F.setLocation(W.href.split("#")[0]+"#"+I.state)),I.code&&(function(z){h(this,void 0,void 0,function*(){var H,Y,q,C;const U=sessionStorage.getItem("remotestorage:codeVerifier");if(!U)return void(0,m.default)("[Authorize] Ignoring OAuth code parameter, because no PKCE code verifier found in sessionStorage");W=F.getLocation();let R=W.origin;W.pathname!=="/"&&(R+=W.pathname);const Q=new URLSearchParams({code:z,grant_type:"authorization_code",client_id:V.remote.clientId,redirect_uri:R,code_verifier:U}),ue=yield(0,b.requestWithTimeout)("POST",V.remote.TOKEN_URL,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Q.toString(),responseType:"json"});if(ue.status===200){(0,m.default)(`[Authorize] access token good for ${(H=ue==null?void 0:ue.response)===null||H===void 0?void 0:H.expires_in} seconds`);const oe={token:(Y=ue==null?void 0:ue.response)===null||Y===void 0?void 0:Y.access_token,refreshToken:(q=ue==null?void 0:ue.response)===null||q===void 0?void 0:q.refresh_token,tokenType:(C=ue==null?void 0:ue.response)===null||C===void 0?void 0:C.token_type};oe.token?V.remote.configure(oe):V._emit("error",new Error(`no access_token in "successful" response: ${ue.response}`)),sessionStorage.removeItem("remotestorage:codeVerifier")}else V._emit("error",new Error(`${ue.statusText}: ${ue.response}`))})}(I.code),B=!0),B||V.remote.stopWaitingForToken()}else V.remote.stopWaitingForToken()},V.on("features-loaded",A)},u.default=F},424:function(l,u,f){var h=this&&this.__awaiter||function(V,I,W,B){return new(W||(W=Promise))(function(z,H){function Y(U){try{C(B.next(U))}catch(R){H(R)}}function q(U){try{C(B.throw(U))}catch(R){H(R)}}function C(U){var R;U.done?z(U.value):(R=U.value,R instanceof W?R:new W(function(Q){Q(R)})).then(Y,q)}C((B=B.apply(V,I||[])).next())})},g=this&&this.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(u,"__esModule",{value:!0}),u.BaseClient=void 0;const m=g(f(439)),w=g(f(613)),k=g(f(491)),b=g(f(93)),A=g(f(28)),O=f(746);class F{constructor(I,W){if(this.schemas={configurable:!0,get(){return F.Types.inScope(this.moduleName)}},W[W.length-1]!=="/")throw"Not a folder: "+W;W==="/"&&(this.makePath=B=>(B[0]==="/"?"":"/")+B),this.storage=I,this.base=W,this.moduleName=function(B){const z=B.split("/");return B.length>2?z[1]:"root"}(this.base),this.addEvents(["change"]),this.on=this.on.bind(this),I.onChange(this.base,this._fireChange.bind(this))}scope(I){return new F(this.storage,this.makePath(I))}getListing(I,W){return h(this,void 0,void 0,function*(){if(typeof I!="string")I="";else if(I.length>0&&!(0,O.isFolder)(I))return Promise.reject("Not a folder: "+I);return this.storage.get(this.makePath(I),W).then(B=>B.statusCode===404?{}:B.body)})}getAll(I,W){return h(this,void 0,void 0,function*(){if(typeof I!="string")I="";else if(I.length>0&&!(0,O.isFolder)(I))return Promise.reject("Not a folder: "+I);return this.storage.get(this.makePath(I),W).then(B=>{if(B.statusCode===404)return{};if(typeof B.body=="object"){const z=Object.keys(B.body);if(z.length===0)return{};const H=z.map(Y=>this.storage.get(this.makePath(I+Y),W).then(q=>{if(typeof q.body=="string")try{q.body=JSON.parse(q.body)}catch{}typeof q.body=="object"&&(B.body[Y]=q.body)}));return Promise.all(H).then(()=>B.body)}})})}getFile(I,W){return h(this,void 0,void 0,function*(){return typeof I!="string"?Promise.reject("Argument 'path' of baseClient.getFile must be a string"):this.storage.get(this.makePath(I),W).then(B=>({data:B.body,contentType:B.contentType,revision:B.revision}))})}storeFile(I,W,B){return h(this,void 0,void 0,function*(){return typeof I!="string"?Promise.reject("Argument 'mimeType' of baseClient.storeFile must be a string"):typeof W!="string"?Promise.reject("Argument 'path' of baseClient.storeFile must be a string"):typeof B!="string"&&typeof B!="object"?Promise.reject("Argument 'body' of baseClient.storeFile must be a string, ArrayBuffer, or ArrayBufferView"):(this.storage.access.checkPathPermission(this.makePath(W),"rw")||console.warn("WARNING: Editing a document to which only read access ('r') was claimed"),this.storage.put(this.makePath(W),B,I).then(z=>z.statusCode===200||z.statusCode===201?z.revision:Promise.reject("Request (PUT "+this.makePath(W)+") failed with status: "+z.statusCode)))})}getObject(I,W){return h(this,void 0,void 0,function*(){return typeof I!="string"?Promise.reject("Argument 'path' of baseClient.getObject must be a string"):this.storage.get(this.makePath(I),W).then(B=>{if(typeof B.body=="object")return B.body;if(typeof B.body=="string")try{return JSON.parse(B.body)}catch{throw new Error("Not valid JSON: "+this.makePath(I))}else if(B.body!==void 0&&B.statusCode===200)return Promise.reject("Not an object: "+this.makePath(I))})})}storeObject(I,W,B){return h(this,void 0,void 0,function*(){if(typeof I!="string")return Promise.reject("Argument 'typeAlias' of baseClient.storeObject must be a string");if(typeof W!="string")return Promise.reject("Argument 'path' of baseClient.storeObject must be a string");if(typeof B!="object")return Promise.reject("Argument 'object' of baseClient.storeObject must be an object");this._attachType(B,I);try{const z=this.validate(B);if(!z.valid)return Promise.reject(z)}catch(z){return Promise.reject(z)}return this.storage.put(this.makePath(W),JSON.stringify(B),"application/json; charset=UTF-8").then(z=>z.statusCode===200||z.statusCode===201?z.revision:Promise.reject("Request (PUT "+this.makePath(W)+") failed with status: "+z.statusCode))})}remove(I){return typeof I!="string"?Promise.reject("Argument 'path' of baseClient.remove must be a string"):(this.storage.access.checkPathPermission(this.makePath(I),"rw")||console.warn("WARNING: Removing a document to which only read access ('r') was claimed"),this.storage.delete(this.makePath(I)))}getItemURL(I){if(typeof I!="string")throw"Argument 'path' of baseClient.getItemURL must be a string";return this.storage.connected?(I=(0,O.cleanPath)(this.makePath(I)),this.storage.remote.href+I):void 0}cache(I,W="ALL"){if(typeof I!="string")throw"Argument 'path' of baseClient.cache must be a string";if(typeof W!="string")throw"Argument 'strategy' of baseClient.cache must be a string or undefined";if(W!=="FLUSH"&&W!=="SEEN"&&W!=="ALL")throw`Argument 'strategy' of baseclient.cache must be one of ["FLUSH", "SEEN", "ALL"]`;return this.storage.caching.set(this.makePath(I),W),this}declareType(I,W,B){let z;if(B&&typeof W=="string")z=W;else if(B||typeof W=="string"){if(!B&&typeof W=="string")throw new Error("declareType() requires a JSON Schema object to be passed, in order to validate object types/formats")}else B=W,z=this._defaultTypeURI(I);F.Types.declare(this.moduleName,I,z,B)}validate(I){const W=F.Types.getSchema(I["@context"]);if(W)return m.default.validateResult(I,W);throw new k.default(I["@context"])}_defaultTypeURI(I){return"http://remotestorage.io/spec/modules/"+encodeURIComponent(this.moduleName)+"/"+encodeURIComponent(I)}_attachType(I,W){I["@context"]=F.Types.resolveAlias(this.moduleName+"/"+W)||this._defaultTypeURI(W)}makePath(I){return this.base+(I||"")}_fireChange(I){A.default.changeEvents[I.origin]&&(["new","old","lastCommon"].forEach(function(W){if((!I[W+"ContentType"]||/^application\/(.*)json(.*)/.exec(I[W+"ContentType"]))&&typeof I[W+"Value"]=="string")try{I[W+"Value"]=JSON.parse(I[W+"Value"])}catch{}}),this._emit("change",I))}static _rs_init(){}}u.BaseClient=F,F.Types=w.default,(0,O.applyMixins)(F,[b.default]),u.default=F},285:function(l,u,f){var h=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(u,"__esModule",{value:!0}),u.Caching=void 0;const g=f(746),m=h(f(334));class w{constructor(){this.pendingActivations=[],this.reset()}set(b,A){if(typeof b!="string")throw new Error("path should be a string");if(!(0,g.isFolder)(b))throw new Error("path should be a folder");if(!A.match(/^(FLUSH|SEEN|ALL)$/))throw new Error("strategy should be 'FLUSH', 'SEEN', or 'ALL'");this._rootPaths[b]=A,A==="ALL"&&(this.activateHandler?this.activateHandler(b):this.pendingActivations.push(b))}enable(b){this.set(b,"ALL")}disable(b){this.set(b,"FLUSH")}onActivate(b){(0,m.default)("[Caching] Setting activate handler",b,this.pendingActivations),this.activateHandler=b;for(let A=0;A<this.pendingActivations.length;A++)b(this.pendingActivations[A]);this.pendingActivations=[]}checkPath(b){return this._rootPaths[b]!==void 0?this._rootPaths[b]:b==="/"?"SEEN":this.checkPath((0,g.containingFolder)(b))}reset(){this._rootPaths={}}static _rs_init(){}}u.Caching=w,u.default=w},496:function(l,u,f){var h=this&&this.__awaiter||function(W,B,z,H){return new(z||(z=Promise))(function(Y,q){function C(Q){try{R(H.next(Q))}catch(ue){q(ue)}}function U(Q){try{R(H.throw(Q))}catch(ue){q(ue)}}function R(Q){var ue;Q.done?Y(Q.value):(ue=Q.value,ue instanceof z?ue:new z(function(oe){oe(ue)})).then(C,U)}R((H=H.apply(W,B||[])).next())})},g=this&&this.__importDefault||function(W){return W&&W.__esModule?W:{default:W}};const m=g(f(93)),w=g(f(28)),k=g(f(334)),b=f(746);function A(W){if(typeof W=="object"&&typeof W.path=="string")if((0,b.isFolder)(W.path)){if(W.local&&W.local.itemsMap)return W.local;if(W.common&&W.common.itemsMap)return W.common}else{if(W.local){if(W.local.body&&W.local.contentType)return W.local;if(W.local.body===!1)return}if(W.common&&W.common.body&&W.common.contentType)return W.common;if(W.body&&W.contentType)return{body:W.body,contentType:W.contentType}}}function O(W,B){for(const z in W){if(W[z]&&W[z].remote)return!0;const H=A(W[z]);if(H&&H.timestamp&&new Date().getTime()-H.timestamp<=B)return!1;if(!H)return!0}return!0}function F(W){const B={path:W,common:{}};return(0,b.isFolder)(W)&&(B.common.itemsMap={}),B}function V(W,B){return W.common||(W.common={itemsMap:{}}),W.common.itemsMap||(W.common.itemsMap={}),W.local||(W.local=(0,b.deepClone)(W.common)),W.local.itemsMap||(W.local.itemsMap=W.common.itemsMap),W.local.itemsMap[B]=!0,W}class I{constructor(){this._updateNodesRunning=!1,this._updateNodesQueued=[]}get(B,z,H){return h(this,void 0,void 0,function*(){return typeof z=="number"?this.getNodes((0,b.pathsFromRoot)(B)).then(Y=>{const q=A(Y[B]);return O(Y,z)?H(B):q?{statusCode:200,body:q.body||q.itemsMap,contentType:q.contentType}:{statusCode:404}}):this.getNodes([B]).then(Y=>{const q=A(Y[B]);if(q){if((0,b.isFolder)(B))for(const C in q.itemsMap)q.itemsMap.hasOwnProperty(C)&&q.itemsMap[C]===!1&&delete q.itemsMap[C];return{statusCode:200,body:q.body||q.itemsMap,contentType:q.contentType}}return{statusCode:404}})})}put(B,z,H){return h(this,void 0,void 0,function*(){const Y=(0,b.pathsFromRoot)(B);return this._updateNodes(Y,function(q,C){try{for(let U=0,R=q.length;U<R;U++){const Q=q[U];let ue,oe=C[Q];oe||(C[Q]=oe=F(Q)),U===0?(ue=A(oe),oe.local={body:z,contentType:H,previousBody:ue?ue.body:void 0,previousContentType:ue?ue.contentType:void 0}):oe=V(oe,q[U-1].substring(Q.length))}return C}catch(U){throw(0,k.default)("[Cachinglayer] Error during PUT",C,U),U}})})}delete(B){const z=(0,b.pathsFromRoot)(B);return this._updateNodes(z,function(H,Y){for(let q=0,C=H.length;q<C;q++){const U=H[q],R=Y[U];let Q;if(R)if(q===0)Q=A(R),R.local={body:!1,previousBody:Q?Q.body:void 0,previousContentType:Q?Q.contentType:void 0};else{R.local||(R.local=(0,b.deepClone)(R.common));const ue=H[q-1].substring(U.length);if(delete R.local.itemsMap[ue],Object.getOwnPropertyNames(R.local.itemsMap).length>0)break}else console.error("Cannot delete non-existing node "+U)}return Y})}flush(B){return this._getAllDescendentPaths(B).then(z=>this.getNodes(z)).then(z=>{for(const H in z){const Y=z[H];Y&&Y.common&&Y.local&&this._emitChange({path:Y.path,origin:"local",oldValue:Y.local.body===!1?void 0:Y.local.body,newValue:Y.common.body===!1?void 0:Y.common.body}),z[H]=void 0}return this.setNodes(z)})}_emitChange(B){w.default.changeEvents[B.origin]&&this._emit("change",B)}fireInitial(){w.default.changeEvents.local&&this.forAllNodes(B=>{if((0,b.isDocument)(B.path)){const z=A(B);z&&this._emitChange({path:B.path,origin:"local",oldValue:void 0,oldContentType:void 0,newValue:z.body,newContentType:z.contentType})}}).then(()=>{this._emit("local-events-done")})}onDiff(B){this.diffHandler=B}migrate(B){return typeof B!="object"||B.common||(B.common={},typeof B.path=="string"?B.path.substr(-1)==="/"&&typeof B.body=="object"&&(B.common.itemsMap=B.body):(B.local||(B.local={}),B.local.body=B.body,B.local.contentType=B.contentType)),B}_updateNodes(B,z){return new Promise((H,Y)=>{this._doUpdateNodes(B,z,{resolve:H,reject:Y})})}_doUpdateNodes(B,z,H){this._updateNodesRunning?this._updateNodesQueued.push({paths:B,cb:z,promise:H}):(this._updateNodesRunning=!0,this.getNodes(B).then(Y=>{const q=(0,b.deepClone)(Y),C=[];Y=z(B,Y);for(const U in Y){const R=Y[U];(0,b.equal)(R,q[U])?delete Y[U]:(0,b.isDocument)(U)&&((0,b.equal)(R.local.body,R.local.previousBody)&&R.local.contentType===R.local.previousContentType||C.push({path:U,origin:"window",oldValue:R.local.previousBody,newValue:R.local.body===!1?void 0:R.local.body,oldContentType:R.local.previousContentType,newContentType:R.local.contentType}),delete R.local.previousBody,delete R.local.previousContentType)}this.setNodes(Y).then(()=>{this._emitChangeEvents(C),H.resolve({statusCode:200})})}).then(()=>Promise.resolve(),Y=>{H.reject(Y)}).then(()=>{this._updateNodesRunning=!1;const Y=this._updateNodesQueued.shift();Y&&this._doUpdateNodes(Y.paths,Y.cb,Y.promise)}))}_emitChangeEvents(B){for(let z=0,H=B.length;z<H;z++)this._emitChange(B[z]),this.diffHandler&&this.diffHandler(B[z].path)}_getAllDescendentPaths(B){return(0,b.isFolder)(B)?this.getNodes([B]).then(z=>{const H=[B],Y=A(z[B]),q=Object.keys(Y.itemsMap).map(C=>this._getAllDescendentPaths(B+C).then(U=>{for(let R=0,Q=U.length;R<Q;R++)H.push(U[R])}));return Promise.all(q).then(()=>H)}):Promise.resolve([B])}_getInternals(){return{getLatest:A,makeNode:F,isOutdated:O}}}(0,b.applyMixins)(I,[m.default]),l.exports=I},28:function(l){l.exports={cache:!0,changeEvents:{local:!0,window:!1,remote:!0,conflict:!0},cordovaRedirectUri:void 0,logging:!1,modules:[],backgroundSyncInterval:6e4,disableFeatures:[],discoveryTimeout:5e3,isBackground:!1,requestTimeout:3e4,syncInterval:1e4}},373:function(l,u,f){var h=this&&this.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};const g=h(f(199)),m=h(f(28)),w=h(f(334)),k=f(746);let b;const A="remotestorage:discover";let O={};const F=function(V){return new Promise((I,W)=>{if(V in O)return I(O[V]);const B=new g.default({tls_only:!1,uri_fallback:!0,request_timeout:m.default.discoveryTimeout});return setTimeout(()=>W(new Error("timed out")),m.default.discoveryTimeout),B.lookup(V,function(z,H){if(z)return W(z);if(typeof H.idx.links.remotestorage!="object"||typeof H.idx.links.remotestorage.length!="number"||H.idx.links.remotestorage.length<=0)return(0,w.default)("[Discover] WebFinger record for "+V+" does not have remotestorage defined in the links section ",JSON.stringify(H.json)),W("WebFinger record for "+V+" does not have remotestorage defined in the links section.");const Y=H.idx.links.remotestorage[0],q=Y.properties["http://tools.ietf.org/html/rfc6749#section-4.2"]||Y.properties["auth-endpoint"],C=Y.properties["http://remotestorage.io/spec/version"]||Y.type;return O[V]={href:Y.href,storageApi:C,authURL:q,properties:Y.properties},b&&localStorage.setItem(A,JSON.stringify({cache:O})),I(O[V])})})};(F.DiscoveryError=function(V){this.name="DiscoveryError",this.message=V,this.stack=new Error().stack}).prototype=Object.create(Error.prototype),F.DiscoveryError.prototype.constructor=F.DiscoveryError,F._rs_init=function(){if(b=(0,k.localStorageAvailable)(),b)try{O=JSON.parse(localStorage[A]).cache}catch{}},F._rs_supported=function(){return Object.prototype.hasOwnProperty.call(k.globalContext,"fetch")||Object.prototype.hasOwnProperty.call(k.globalContext,"XMLHttpRequest")},F._rs_cleanup=function(){b&&delete localStorage[A]},l.exports=F},706:function(l,u,f){var h=this&&this.__awaiter||function(K,_,x,M){return new(x||(x=Promise))(function(D,N){function te(pe){try{re(M.next(pe))}catch(ke){N(ke)}}function X(pe){try{re(M.throw(pe))}catch(ke){N(ke)}}function re(pe){var ke;pe.done?D(pe.value):(ke=pe.value,ke instanceof x?ke:new x(function(Me){Me(ke)})).then(te,X)}re((M=M.apply(K,_||[])).next())})},g=this&&this.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};const m=g(f(93)),w=g(f(424)),k=g(f(941)),b=g(f(982)),A=g(f(503)),O=f(746),F=f(368),V=f(684),I=g(f(275));let W;const B="remotestorage:dropbox",z="https://api.dropboxapi.com/2/files/list_folder",H="https://api.dropboxapi.com/2/files/list_folder/continue",Y="/remotestorage";function q(K){return(Y+"/"+K).replace(/\/+$/,"").replace(/\/+/g,"/")}const C=/[\u007f-\uffff]/g;function U(K){return JSON.stringify(K).replace(C,function(_){return"\\u"+("000"+_.charCodeAt(0).toString(16)).slice(-4)})}function R(K,_){return new RegExp("^"+_.join("\\/")+"(\\/|$)").test(K.error_summary)}function Q(K){return K instanceof ArrayBuffer||(0,F.isArrayBufferView)(K)}class ue extends V.RemoteBase{constructor(_){if(super(_),this.online=!0,this.storageApi="draft-dejong-remotestorage-19",this._initialFetchDone=!1,this.addEvents(["connected","not-connected"]),this.clientId=_.apiKeys.dropbox.appKey,this.TOKEN_URL="https://api.dropboxapi.com/oauth2/token",this._revCache=new k.default("rev"),this._fetchDeltaCursor=null,this._fetchDeltaPromise=null,this._itemRefs={},W=(0,O.localStorageAvailable)(),W){const x=(0,O.getJSONFromLocalStorage)(B);x&&this.configure(x),this._itemRefs=(0,O.getJSONFromLocalStorage)(`${B}:shares`)||{}}this.connected&&setTimeout(this._emit.bind(this),0,"connected")}connect(){return h(this,void 0,void 0,function*(){try{if(this.rs.setBackend("dropbox"),this.token)ae(this.rs);else{const{codeVerifier:_,codeChallenge:x,state:M}=yield(0,O.generateCodeVerifier)();sessionStorage.setItem("remotestorage:codeVerifier",_),sessionStorage.setItem("remotestorage:state",M),this.rs.authorize({authURL:"https://www.dropbox.com/oauth2/authorize",scope:"account_info.read files.content.read files.content.write files.metadata.read files.metadata.write",clientId:this.clientId,response_type:"code",state:M,code_challenge:x,code_challenge_method:"S256",token_access_type:"offline"})}}catch(_){throw this.rs._emit("error",_),this.rs.setBackend(void 0),_}})}configure(_){return h(this,void 0,void 0,function*(){_.userAddress!==void 0&&(this.userAddress=_.userAddress),_.token!==void 0&&(this.token=_.token),_.refreshToken!==void 0&&(this.refreshToken=_.refreshToken),_.tokenType!==void 0&&(this.tokenType=_.tokenType);const x=()=>{W&&localStorage.setItem(B,JSON.stringify({userAddress:this.userAddress,token:this.token,refreshToken:this.refreshToken,tokenType:this.tokenType}))};if(this.refreshToken||this.token)if(this.connected=!0,this.userAddress)this._emit("connected"),x();else try{const M=yield this.info();this.userAddress=M.email,this._emit("connected"),x()}catch{this.connected=!1,this.rs._emit("error",new Error("Could not fetch user info.")),x.apply(this)}else this.connected=!1,W&&localStorage.removeItem(B),this.rs.setBackend(void 0)})}_getFolder(_){const x=this._revCache,M=N=>{let te;if(N.status!==200&&N.status!==409)return Promise.reject("Unexpected response status: "+N.status);try{te=JSON.parse(N.responseText)}catch(re){return Promise.reject(re)}if(N.status===409)return R(te,["path","not_found"])?Promise.resolve({}):Promise.reject(new Error("API returned an error: "+te.error_summary));const X=te.entries.reduce((re,pe)=>{try{const ke=pe[".tag"]==="folder",Me=pe.path_display.split("/").slice(-1)[0]+(ke?"/":"");if(ke)re[Me]={ETag:x.get(_+Me)};else{const je=new Date(pe.server_modified);re[Me]={ETag:pe.rev,"Content-Length":pe.size,"Last-Modified":je.toUTCString()},this._revCache.set(_+Me,pe.rev)}}catch(ke){console.error(`[Dropbox] folder ${_} has entry ${JSON.stringify(pe)}:`,ke)}return re},{});return te.has_more?D(te.cursor).then(function(re){return Object.assign(X,re)}):Promise.resolve(X)},D=N=>{const te={body:{cursor:N}};return this._request("POST",H,te).then(M)};return this._request("POST",z,{body:{path:q(_)}}).then(M).then(function(N){return Promise.resolve({statusCode:200,body:N,contentType:"application/json; charset=UTF-8",revision:x.get(_)})})}get(_,x={}){if(!this.connected)return Promise.reject("not connected (path: "+_+")");const M=this._revCache.get(_);if(M===null)return Promise.resolve({statusCode:404});if(x&&x.ifNoneMatch){if(!this._initialFetchDone)return this.fetchDelta().then(()=>this.get(_,x));if(M&&M===x.ifNoneMatch)return Promise.resolve({statusCode:304})}if(_.slice(-1)==="/")return this._getFolder(_);const D={headers:{"Dropbox-API-Arg":U({path:q(_)})},responseType:"arraybuffer"};return x&&x.ifNoneMatch&&(D.headers["If-None-Match"]=x.ifNoneMatch),this._request("GET","https://content.dropboxapi.com/2/files/download",D).then(N=>{const te=N.status;let X,re,pe,ke;return te!==200&&te!==409?Promise.resolve({statusCode:te}):(X=N.getResponseHeader("Dropbox-API-Result"),(0,O.getTextFromArrayBuffer)(N.response,"UTF-8").then(Me=>{re=Me,te===409&&(X=re);try{X=JSON.parse(X)}catch(je){return Promise.reject(je)}if(te===409)return R(X,["path","not_found"])?{statusCode:404}:Promise.reject(new Error('API error while downloading file ("'+_+'"): '+X.error_summary));if(pe=N.getResponseHeader("Content-Type"),ke=X.rev,this._revCache.set(_,ke),this._shareIfNeeded(_),(0,O.shouldBeTreatedAsBinary)(Me,pe))re=N.response;else try{re=JSON.parse(re),pe="application/json; charset=UTF-8"}catch{}return{statusCode:te,body:re,contentType:pe,revision:ke}}))})}put(_,x,M){return h(this,arguments,void 0,function*(D,N,te,X={}){if(!this.connected)throw new Error("not connected (path: "+D+")");const re=this._revCache.get(D);if(X&&X.ifMatch&&re&&re!==X.ifMatch)return{statusCode:412,revision:re};if(X&&X.ifNoneMatch==="*"&&re&&re!=="rev")return{statusCode:412,revision:re};if(!te.match(/charset=/)&&Q(N)&&(te+="; charset=binary"),N.length>157286400)throw new Error("Cannot upload file larger than 150MB");const pe={body:N,contentType:te,path:D};if(X&&(X.ifMatch||X.ifNoneMatch==="*")){const Me=yield this._getMetadata(D);if(X&&X.ifNoneMatch==="*"&&Me)return{statusCode:412,revision:Me.rev};if(X&&X.ifMatch&&Me&&Me.rev!==X.ifMatch)return{statusCode:412,revision:Me.rev}}const ke=yield this._uploadSimple(pe);return this._shareIfNeeded(D),ke})}delete(_){return h(this,arguments,void 0,function*(x,M={}){if(!this.connected)throw new Error("not connected (path: "+x+")");const D=this._revCache.get(x);if(M!=null&&M.ifMatch&&D&&M.ifMatch!==D)return{statusCode:412,revision:D};if(M!=null&&M.ifMatch){const N=yield this._getMetadata(x);if(M!=null&&M.ifMatch&&N&&N.rev!==M.ifMatch)return{statusCode:412,revision:N.rev}}return this._deleteSimple(x)})}_shareIfNeeded(_){if(_.match(/^\/public\/.*[^/]$/)&&this._itemRefs[_]===void 0)return this.share(_)}share(_){const x={body:{path:q(_)}};return this._request("POST","https://api.dropboxapi.com/2/sharing/create_shared_link_with_settings",x).then(M=>{if(M.status!==200&&M.status!==409)return Promise.reject(new Error("Invalid response status:"+M.status));let D;try{D=JSON.parse(M.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+M.responseText))}return M.status===409?R(D,["shared_link_already_exists"])?this._getSharedLink(_):Promise.reject(new Error("API error: "+D.error_summary)):Promise.resolve(D.url)}).then(M=>(this._itemRefs[_]=M,W&&localStorage.setItem(B+":shares",JSON.stringify(this._itemRefs)),Promise.resolve(M)),M=>(M.message='Sharing Dropbox file or folder ("'+_+'") failed: '+M.message,Promise.reject(M)))}info(){return this._request("POST","https://api.dropboxapi.com/2/users/get_current_account",{}).then(function(_){let x;try{const M=JSON.parse(_.responseText);x=M==null?void 0:M.email}catch{return Promise.reject(new Error("Could not query current account info: Invalid API response: "+_.responseText))}return Promise.resolve({email:x})})}_request(_,x,M){return h(this,arguments,void 0,function*(D,N,te,X=1){if(this.isForbiddenRequestMethod(D,N))throw`Don't use ${D} on directories!`;if(!this.token)throw new A.default("No access token");te.headers||(te.headers={}),te.headers.Authorization="Bearer "+this.token,typeof te.body!="object"||Q(te.body)||(te.body=JSON.stringify(te.body),te.headers["Content-Type"]="application/json; charset=UTF-8"),this.rs._emit("wire-busy",{method:D,isFolder:(0,O.isFolder)(N)});try{const re=yield(0,F.requestWithTimeout)(D,N,te);return this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:D,isFolder:(0,O.isFolder)(N),success:!0}),(re==null?void 0:re.status)===401&&this.refreshToken?X>=3?(console.error(`Abandoned after ${X} attempts: ${D} ${N}`),re):(this.rs._emit("wire-busy",{method:D,isFolder:(0,O.isFolder)(N)}),yield I.default.refreshAccessToken(this.rs,this,this.refreshToken),this.rs._emit("wire-done",{method:D,isFolder:(0,O.isFolder)(N),success:!0}),this._request(D,N,te,X+1)):[503,429].includes(re==null?void 0:re.status)?(this.online&&(this.online=!1,this.rs._emit("network-offline")),X>=3?(console.warn(`Abandoned after ${X} attempts: ${D} ${N}`),re):(yield new Promise(pe=>setTimeout(pe,(0,F.retryAfterMs)(re))),this._request(D,N,te,X+1))):re}catch(re){throw this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:D,isFolder:(0,O.isFolder)(N),success:!1}),re}})}fetchDelta(..._){if(this._fetchDeltaPromise)return this._fetchDeltaPromise;const x=M=>h(this,void 0,void 0,function*(){let D,N;typeof M=="string"?(D=H,N={cursor:M}):(D=z,N={path:Y,recursive:!0,include_deleted:!0});try{const te=yield this._request("POST",D,{body:N});if(te.status===401)throw new A.default;if(te.status!==200&&te.status!==409)throw new Error("Invalid response status: "+te.status);let X;try{X=JSON.parse(te.responseText)}catch{throw new Error("Invalid response body: "+te.responseText)}if(te.status===409){if(!R(X,["path","not_found"]))throw new Error("API returned an error: "+X.error_summary);X={cursor:null,entries:[],has_more:!1}}if(M||this._revCache.deactivatePropagation(),X.entries.forEach(re=>{const pe=re.path_display.slice(14);re[".tag"]==="deleted"?(this._revCache.delete(pe),this._revCache.delete(pe+"/")):re[".tag"]==="file"&&this._revCache.set(pe,re.rev)}),this._fetchDeltaCursor=X.cursor,X.has_more)return x(X.cursor);this._revCache.activatePropagation(),this._initialFetchDone=!0}catch(te){if(te==="timeout")return;throw te}});return this._fetchDeltaPromise=x(this._fetchDeltaCursor).catch(M=>(typeof M=="object"&&"message"in M?M.message="Dropbox: fetchDelta: "+M.message:M=`Dropbox: fetchDelta: ${M}`,this.rs._emit("error",M),this._fetchDeltaPromise=null,Promise.reject(M))).then(()=>(this._fetchDeltaPromise=null,Promise.resolve(_))),this._fetchDeltaPromise}_getMetadata(_){const x={path:q(_)};return this._request("POST","https://api.dropboxapi.com/2/files/get_metadata",{body:x}).then(M=>{if(M.status!==200&&M.status!==409)return Promise.reject(new Error("Invalid response status:"+M.status));let D;try{D=JSON.parse(M.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+M.responseText))}return M.status===409?R(D,["path","not_found"])?Promise.resolve():Promise.reject(new Error("API error: "+D.error_summary)):Promise.resolve(D)}).then(void 0,M=>(M.message='Could not load metadata for file or folder ("'+_+'"): '+M.message,Promise.reject(M)))}_uploadSimple(_){const x={path:q(_.path),mode:{".tag":"overwrite",update:void 0},mute:!0};return _.ifMatch&&(x.mode={".tag":"update",update:_.ifMatch}),this._request("POST","https://content.dropboxapi.com/2/files/upload",{body:_.body,headers:{"Content-Type":"application/octet-stream","Dropbox-API-Arg":U(x)}}).then(M=>{if(M.status!==200&&M.status!==409)return Promise.resolve({statusCode:M.status});let D;try{D=JSON.parse(M.responseText)}catch{return Promise.reject(new Error("Invalid API result: "+M.responseText))}return M.status===409?R(D,["path","conflict"])?this._getMetadata(_.path).then(function(N){return Promise.resolve({statusCode:412,revision:N.rev})}):(this.rs._emit("error",new Error(D.error_summary)),Promise.resolve({statusCode:M.status})):(this._revCache.set(_.path,D.rev),Promise.resolve({statusCode:M.status,revision:D.rev}))})}_deleteSimple(_){const x={path:q(_)};return this._request("POST","https://api.dropboxapi.com/2/files/delete",{body:x}).then(M=>{if(M.status!==200&&M.status!==409)return Promise.resolve({statusCode:M.status});let D;try{D=JSON.parse(M.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+M.responseText))}if(M.status===409){if(R(D,["path_lookup","not_found"]))return Promise.resolve({statusCode:404});this.rs._emit("error",new Error(D.error_summary))}return Promise.resolve({statusCode:M.status})}).then(M=>(M.statusCode!==200&&M.statusCode!==404||(this._revCache.delete(_),delete this._itemRefs[_]),Promise.resolve(M)),M=>(M.message='Could not delete Dropbox file or folder ("'+_+'"): '+M.message,Promise.reject(M)))}_getSharedLink(_){return h(this,void 0,void 0,function*(){const x={body:{path:q(_),direct_only:!0}};return this._request("POST","https://api.dropbox.com/2/sharing/list_shared_links",x).then(M=>{if(M.status!==200&&M.status!==409)return Promise.reject(new Error("Invalid response status: "+M.status));let D;try{D=JSON.parse(M.responseText)}catch{return Promise.reject(new Error("Invalid response body: "+M.responseText))}return M.status===409?Promise.reject(new Error("API error: "+(D==null?void 0:D.error_summary)||0)):D.links.length?Promise.resolve(D.links[0].url):Promise.reject(new Error("No links returned"))},M=>(M.message='Could not get link to a shared file or folder ("'+_+'"): '+M.message,Promise.reject(M)))})}static _rs_init(_){W=(0,O.localStorageAvailable)(),_.apiKeys.dropbox&&(_.dropbox=new ue(_)),_.backend==="dropbox"&&ae(_)}static _rs_supported(){return!0}static _rs_cleanup(_){(function(x){(function(M){M._origRemote&&(M.remote=M._origRemote,delete M._origRemote)})(x),function(M){M._dropboxOrigSync&&(M.sync.sync=M._dropboxOrigSync,delete M._dropboxOrigSync)}(x),function(M){M._origBaseClientGetItemURL&&(w.default.prototype.getItemURL=M._origBaseClientGetItemURL,delete M._origBaseClientGetItemURL)}(x),se(x)})(_),W&&localStorage.removeItem(B),_.setBackend(void 0)}}function oe(K,..._){K._dropboxOrigSync||(K._dropboxOrigSync=K.sync.sync.bind(K.sync),K.sync.sync=(function(){return this.dropbox.fetchDelta(K,..._).then(K._dropboxOrigSync,function(x){K._emit("error",new b.default(x)),K._emit("sync-done")})}).bind(K))}function se(K){K._dropboxOrigSyncCycle&&(K.syncCycle=K._dropboxOrigSyncCycle,delete K._dropboxOrigSyncCycle)}function ae(K){(function(_){_._origRemote||(_._origRemote=_.remote,_.remote=_.dropbox)})(K),K.sync?oe(K):function(_,...x){_._dropboxOrigSyncCycle||(_._dropboxOrigSyncCycle=_.syncCycle,_.syncCycle=()=>{if(!_.sync)throw new Error("expected sync to be initialized by now");oe(_),_._dropboxOrigSyncCycle(_,...x),se(_)})}(K),function(_){_._origBaseClientGetItemURL||(_._origBaseClientGetItemURL=w.default.prototype.getItemURL,w.default.prototype.getItemURL=function(){throw new Error("getItemURL is not implemented for Dropbox yet")})}(K)}(0,O.applyMixins)(ue,[m.default]),l.exports=ue},451:function(l,u,f){const h=(this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}})(f(93)),g=f(746);class m{constructor(){this.addEvents(["background","foreground"]),this.mode=typeof window<"u"?"browser":"node",this.mode==="browser"&&(this.setBrowserPrefixedNames(),document.addEventListener(this.visibilityChangeEvent,this.setVisibility.bind(this),!1),this.setVisibility())}setBrowserPrefixedNames(){this.mode==="browser"&&(document.hidden!==void 0?(this.hiddenProperty="hidden",this.visibilityChangeEvent="visibilitychange"):document.mozHidden!==void 0?(this.hiddenProperty="mozHidden",this.visibilityChangeEvent="mozvisibilitychange"):document.msHidden!==void 0?(this.hiddenProperty="msHidden",this.visibilityChangeEvent="msvisibilitychange"):document.webkitHidden!==void 0&&(this.hiddenProperty="webkitHidden",this.visibilityChangeEvent="webkitvisibilitychange"))}setVisibility(){document[this.hiddenProperty]?this.goBackground():this.goForeground()}isBrowser(){return this.mode==="browser"}isNode(){return this.mode==="node"}goBackground(){this._emit("background")}goForeground(){this._emit("foreground")}static _rs_init(){}static _rs_cleanup(){}}(0,g.applyMixins)(m,[h.default]),l.exports=m},93:function(l,u,f){var h=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(u,"__esModule",{value:!0}),u.EventHandling=void 0;const g=h(f(334));class m{addEvents(k){k.forEach(b=>this._addEvent(b))}addEventListener(k,b){if(typeof k!="string")throw new Error("Argument eventName should be a string");if(typeof b!="function")throw new Error("Argument handler should be a function");(0,g.default)("[EventHandling] Adding event listener",k),this._validateEvent(k),this._handlers[k].push(b)}on(k,b){return this.addEventListener(k,b)}removeEventListener(k,b){this._validateEvent(k);const A=this._handlers[k].length;for(let O=0;O<A;O++)if(this._handlers[k][O]===b)return void this._handlers[k].splice(O,1)}_emit(k,...b){this._validateEvent(k),this._handlers[k].slice().forEach(A=>{A.apply(this,b)})}_validateEvent(k){if(!(k in this._handlers))throw new Error("Unknown event: "+k)}_delegateEvent(k,b){b.on(k,A=>{this._emit(k,A)})}_addEvent(k){this._handlers===void 0&&(this._handlers={}),this._handlers[k]=[]}}u.EventHandling=m,u.default=m},545:function(l,u,f){var h=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};const g=h(f(28)),m=h(f(451)),w=h(f(334)),k=f(746),b=h(f(370)),A=h(f(548)),O=h(f(275)),F=h(f(373)),V=h(f(424)),I=h(f(801)),W=h(f(706)),B=h(f(600)),z=h(f(313)),H=h(f(285)),Y=h(f(567)),q=h(f(794)),C=h(f(365)),U={features:[],featuresDone:0,readyFired:!1,loadFeatures(){this.features=[],this.featuresDone=0,this.readyFired=!1,this.featureModules={WireClient:B.default,Dropbox:W.default,GoogleDrive:I.default,Access:A.default,Discover:F.default,Authorize:O.default,BaseClient:V.default,Env:m.default},g.default.cache&&(0,k.extend)(this.featureModules,{Caching:H.default,IndexedDB:Y.default,LocalStorage:q.default,InMemoryStorage:C.default,Sync:z.default}),g.default.disableFeatures.forEach(R=>{this.featureModules[R]&&delete this.featureModules[R]}),this._allLoaded=!1;for(const R in this.featureModules)this.loadFeature(R)},hasFeature(R){for(let Q=this.features.length-1;Q>=0;Q--)if(this.features[Q].name===R)return this.features[Q].supported;return!1},loadFeature(R){const Q=this.featureModules[R],ue=!Q._rs_supported||Q._rs_supported();(0,w.default)(`[RemoteStorage] [FEATURE ${R}] initializing ...`),typeof ue=="object"?ue.then(()=>{this.featureSupported(R,!0),this.initFeature(R)},()=>{this.featureSupported(R,!1)}):typeof ue=="boolean"?(this.featureSupported(R,ue),ue&&this.initFeature(R)):this.featureSupported(R,!1)},initFeature(R){const Q=this.featureModules[R];let ue;try{ue=Q._rs_init(this)}catch(oe){return void this.featureFailed(R,oe)}typeof ue=="object"&&typeof ue.then=="function"?ue.then(()=>{this.featureInitialized(R)},oe=>{this.featureFailed(R,oe)}):this.featureInitialized(R)},featureFailed(R,Q){(0,w.default)(`[RemoteStorage] [FEATURE ${R}] initialization failed (${Q})`),this.featureDone()},featureSupported(R,Q){(0,w.default)(`[RemoteStorage] [FEATURE ${R}]${Q?"":"not "} supported`),Q||this.featureDone()},featureInitialized(R){(0,w.default)(`[RemoteStorage] [FEATURE ${R}] initialized`),this.features.push({name:R,init:this.featureModules[R]._rs_init,supported:!0,cleanup:this.featureModules[R]._rs_cleanup}),this.featureDone()},featureDone(){this.featuresDone++,this.featuresDone===Object.keys(this.featureModules).length&&setTimeout(this.featuresLoaded.bind(this),0)},_setCachingModule(){["IndexedDB","LocalStorage","InMemoryStorage"].some(R=>{if(this.features.some(Q=>Q.name===R))return this.features.local=this.featureModules[R],!0})},_fireReady(){try{this.readyFired||(this._emit("ready"),this.readyFired=!0)}catch(R){console.error("'ready' failed: ",R,R.stack),this._emit("error",R)}},featuresLoaded(){(0,w.default)("[RemoteStorage] All features loaded"),this._setCachingModule(),this.local=g.default.cache&&this.features.local&&new this.features.local,this.local&&this.remote?(this._setGPD(b.default,this),this._bindChange(this.local)):this.remote&&this._setGPD(this.remote,this.remote),this.remote&&(this.remote.on("connected",()=>{this._fireReady(),this._emit("connected")}),this.remote.on("not-connected",()=>{this._fireReady(),this._emit("not-connected")}),this.remote.connected&&(this._fireReady(),this._emit("connected")),this.hasFeature("Authorize")||this.remote.stopWaitingForToken()),this._collectCleanupFunctions();try{this._allLoaded=!0,this._emit("features-loaded")}catch(R){(0,k.logError)(R),this._emit("error",R)}this._processPending()},_collectCleanupFunctions(){this._cleanups=[];for(let R=0;R<this.features.length;R++){const Q=this.features[R].cleanup;typeof Q=="function"&&this._cleanups.push(Q)}}};l.exports=U},801:function(l,u,f){var h=this&&this.__importDefault||function(q){return q&&q.__esModule?q:{default:q}};const g=h(f(424)),m=h(f(93)),w=f(746),k=f(368),b=f(684),A="https://www.googleapis.com",O="remotestorage:googledrive",F="application/vnd.google-apps.folder";let V;function I(q){return q.substr(-1)==="/"&&(q=q.substr(0,q.length-1)),decodeURIComponent(q)}function W(q){return q.replace(/[^\/]+\/?$/,"")}function B(q){const C=q.split("/");return q.substr(-1)==="/"?C[C.length-2]+"/":C[C.length-1]}function z(q){return(0,w.cleanPath)(`/remotestorage/${q}`)}class H{constructor(C){this._items={},this.maxAge=C,this._items={}}get(C){const U=this._items[C],R=new Date().getTime();return U&&U.t>=R-this.maxAge?U.v:void 0}set(C,U){this._items[C]={v:U,t:new Date().getTime()}}}class Y extends b.RemoteBase{constructor(C,U){if(super(C),this.online=!0,this.storageApi="draft-dejong-remotestorage-19",this.addEvents(["connected","not-connected"]),this.clientId=U,this._fileIdCache=new H(300),V=(0,w.localStorageAvailable)(),V){const R=(0,w.getJSONFromLocalStorage)(O);R&&this.configure(R)}}configure(C){C.userAddress!==void 0&&(this.userAddress=C.userAddress),C.token!==void 0&&(this.token=C.token);const U=function(){V&&localStorage.setItem(O,JSON.stringify({userAddress:this.userAddress,token:this.token}))},R=function(){this.connected=!1,delete this.token,V&&localStorage.removeItem(O)};this.token?(this.connected=!0,this.userAddress?(this._emit("connected"),U.apply(this)):this.info().then(Q=>{this.userAddress=Q.user.emailAddress,this._emit("connected"),U.apply(this)}).catch(()=>{R.apply(this),this.rs._emit("error",new Error("Could not fetch user info."))})):R.apply(this)}connect(){this.rs.setBackend("googledrive"),this.rs.authorize({authURL:"https://accounts.google.com/o/oauth2/auth",scope:"https://www.googleapis.com/auth/drive",clientId:this.clientId})}get(C,U={}){return(0,w.isFolder)(C)?this._getFolder(z(C)):this._getFile(z(C),U)}put(C,U,R,Q={}){const ue=z(C);function oe(se){if(se.status>=200&&se.status<300){const ae=JSON.parse(se.responseText),K=this.stripQuotes(ae.etag);return Promise.resolve({statusCode:200,contentType:ae.mimeType,revision:K})}return se.status===412?Promise.resolve({statusCode:412,revision:"conflict"}):Promise.reject("PUT failed with status "+se.status+" ("+se.responseText+")")}return this._getFileId(ue).then(se=>se?Q&&Q.ifNoneMatch==="*"?oe({status:412}):this._updateFile(se,ue,U,R,Q).then(oe):this._createFile(ue,U,R).then(oe))}delete(C,U={}){const R=z(C);return this._getFileId(R).then(Q=>Q?this._getMeta(Q).then(ue=>{let oe;return typeof ue=="object"&&typeof ue.etag=="string"&&(oe=this.stripQuotes(ue.etag)),U&&U.ifMatch&&U.ifMatch!==oe?{statusCode:412,revision:oe}:this._request("DELETE",A+"/drive/v2/files/"+Q,{}).then(se=>se.status===200||se.status===204?{statusCode:200}:Promise.reject("Delete failed: "+se.status+" ("+se.responseText+")"))}):Promise.resolve({statusCode:200}))}info(){const C=A+"/drive/v2/about?fields=user";return this._request("GET",C,{}).then(function(U){try{const R=JSON.parse(U.responseText);return Promise.resolve(R)}catch(R){return Promise.reject(R)}})}_updateFile(C,U,R,Q,ue){const oe={mimeType:Q},se={"Content-Type":"application/json; charset=UTF-8"};return ue&&ue.ifMatch&&(se["If-Match"]=this.addQuotes(ue.ifMatch)),this._request("PUT",A+"/upload/drive/v2/files/"+C+"?uploadType=resumable",{body:JSON.stringify(oe),headers:se}).then(ae=>ae.status===412?ae:this._request("PUT",ae.getResponseHeader("Location"),{body:Q.match(/^application\/json/)?JSON.stringify(R):R}))}_createFile(C,U,R){return this._getParentId(C).then(Q=>{const ue={title:I(B(C)),mimeType:R,parents:[{kind:"drive#fileLink",id:Q}]};return this._request("POST",A+"/upload/drive/v2/files?uploadType=resumable",{body:JSON.stringify(ue),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(oe=>this._request("POST",oe.getResponseHeader("Location"),{body:R.match(/^application\/json/)?JSON.stringify(U):U}))})}_getFile(C,U){return this._getFileId(C).then(R=>this._getMeta(R).then(Q=>{let ue;if(typeof Q=="object"&&typeof Q.etag=="string"&&(ue=this.stripQuotes(Q.etag)),U&&U.ifNoneMatch&&ue===U.ifNoneMatch)return Promise.resolve({statusCode:304});if(!Q.downloadUrl){if(!Q.exportLinks||!Q.exportLinks["text/html"])return Promise.resolve({statusCode:200,body:"",contentType:Q.mimeType,revision:ue});Q.mimeType+=";export=text/html",Q.downloadUrl=Q.exportLinks["text/html"]}return this._request("GET",Q.downloadUrl,{responseType:"arraybuffer"}).then(oe=>(0,w.getTextFromArrayBuffer)(oe.response,"UTF-8").then(function(se){let ae=se;if(Q.mimeType.match(/^application\/json/))try{ae=JSON.parse(ae)}catch{}else(0,w.shouldBeTreatedAsBinary)(se,Q.mimeType)&&(ae=oe.response);return{statusCode:200,body:ae,contentType:Q.mimeType,revision:ue}}))}))}_getFolder(C){return this._getFileId(C).then(U=>{let R,Q,ue;if(!U)return Promise.resolve({statusCode:404});const oe="'"+U+"' in parents";return this._request("GET",A+"/drive/v2/files?q="+encodeURIComponent(oe)+"&fields="+encodeURIComponent("items(downloadUrl,etag,fileSize,id,mimeType,title,labels)")+"&maxResults=1000&trashed=false",{}).then(se=>{var ae;if(se.status!==200)return Promise.reject("request failed or something: "+se.status);try{R=JSON.parse(se.responseText)}catch{return Promise.reject("non-JSON response from GoogleDrive")}ue={};for(const K of R.items)!((ae=K.labels)===null||ae===void 0)&&ae.trashed||(Q=this.stripQuotes(K.etag),K.mimeType===F?(this._fileIdCache.set(C+(0,w.cleanPath)(K.title)+"/",K.id),ue[K.title+"/"]={ETag:Q}):(this._fileIdCache.set(C+(0,w.cleanPath)(K.title),K.id),ue[K.title]={ETag:Q,"Content-Type":K.mimeType,"Content-Length":K.fileSize}));return Promise.resolve({statusCode:200,body:ue,contentType:"application/json; charset=UTF-8",revision:void 0})})})}_getParentId(C){const U=W(C);return this._getFileId(U).then(R=>R?Promise.resolve(R):this._createFolder(U))}_createFolder(C){return this._getParentId(C).then(U=>this._request("POST",A+"/drive/v2/files",{body:JSON.stringify({title:I(B(C)),mimeType:F,parents:[{id:U}]}),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(R=>{const Q=JSON.parse(R.responseText);return Promise.resolve(Q.id)}))}_getFileId(C){let U;return C==="/"?Promise.resolve("root"):(U=this._fileIdCache.get(C))?Promise.resolve(U):this._getFolder(W(C)).then(()=>(U=this._fileIdCache.get(C),U?Promise.resolve(U):C.substr(-1)==="/"?this._createFolder(C).then(()=>this._getFileId(C)):Promise.resolve()))}_getMeta(C){return this._request("GET",A+"/drive/v2/files/"+C,{}).then(function(U){return U.status===200?Promise.resolve(JSON.parse(U.responseText)):Promise.reject("request (getting metadata for "+C+") failed with status: "+U.status)})}_request(C,U,R){return this.isForbiddenRequestMethod(C,U)?Promise.reject(`Don't use ${C} on directories!`):(R.headers||(R.headers={}),R.headers.Authorization="Bearer "+this.token,this.rs._emit("wire-busy",{method:C,isFolder:(0,w.isFolder)(U)}),(0,k.requestWithTimeout)(C,U,R).then(Q=>Q&&Q.status===401?void this.connect():(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:C,isFolder:(0,w.isFolder)(U),success:!0}),Promise.resolve(Q)),Q=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:C,isFolder:(0,w.isFolder)(U),success:!1}),Promise.reject(Q))))}static _rs_init(C){const U=C.apiKeys.googledrive;var R;U&&(C.googledrive=new Y(C,U.clientId),C.backend==="googledrive"&&(C._origRemote=C.remote,C.remote=C.googledrive,(R=C)._origBaseClientGetItemURL||(R._origBaseClientGetItemURL=g.default.prototype.getItemURL,g.default.prototype.getItemURL=function(){throw new Error("getItemURL is not implemented for Google Drive yet")})))}static _rs_supported(){return!0}static _rs_cleanup(C){var U;C.setBackend(void 0),C._origRemote&&(C.remote=C._origRemote,delete C._origRemote),(U=C)._origBaseClientGetItemURL&&(g.default.prototype.getItemURL=U._origBaseClientGetItemURL,delete U._origBaseClientGetItemURL)}}(0,w.applyMixins)(Y,[m.default]),l.exports=Y},567:function(l,u,f){var h=this&&this.__awaiter||function(V,I,W,B){return new(W||(W=Promise))(function(z,H){function Y(U){try{C(B.next(U))}catch(R){H(R)}}function q(U){try{C(B.throw(U))}catch(R){H(R)}}function C(U){var R;U.done?z(U.value):(R=U.value,R instanceof W?R:new W(function(Q){Q(R)})).then(Y,q)}C((B=B.apply(V,I||[])).next())})},g=this&&this.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};const m=g(f(93)),w=g(f(496)),k=g(f(334)),b=f(746),A="remotestorage";let O;class F extends w.default{constructor(I){super(),this.addEvents(["change","local-events-done"]),this.db=I||O,this.db?(this.getsRunning=0,this.putsRunning=0,this.changesQueued={},this.changesRunning={},this.commitSlownessWarning=null):(0,k.default)("[IndexedDB] Failed to open DB")}getNodes(I){return h(this,void 0,void 0,function*(){const W=[],B={};for(let z=0,H=I.length;z<H;z++)this.changesQueued[I[z]]!==void 0?B[I[z]]=(0,b.deepClone)(this.changesQueued[I[z]]||void 0):this.changesRunning[I[z]]!==void 0?B[I[z]]=(0,b.deepClone)(this.changesRunning[I[z]]||void 0):W.push(I[z]);return W.length>0?this.getNodesFromDb(W).then(function(z){for(const H in B)z[H]=B[H];return z}):Promise.resolve(B)})}setNodes(I){return h(this,void 0,void 0,function*(){for(const W in I)this.changesQueued[W]=I[W]||!1;return this.maybeFlush(),Promise.resolve()})}maybeFlush(){this.putsRunning===0?this.flushChangesQueued():this.commitSlownessWarning||(this.commitSlownessWarning=f.g.setInterval(function(){console.warn("WARNING: waited more than 10 seconds for previous commit to finish")},1e4))}flushChangesQueued(){this.commitSlownessWarning&&(clearInterval(this.commitSlownessWarning),this.commitSlownessWarning=null),Object.keys(this.changesQueued).length>0&&(this.changesRunning=this.changesQueued,this.changesQueued={},this.setNodesInDb(this.changesRunning).then(this.flushChangesQueued.bind(this)))}getNodesFromDb(I){return new Promise((W,B)=>{const z=this.db.transaction(["nodes"],"readonly"),H=z.objectStore("nodes"),Y={};this.getsRunning++,I.map(q=>{H.get(q).onsuccess=C=>{Y[q]=C.target.result}}),z.oncomplete=()=>{W(Y),this.getsRunning--},z.onerror=z.onabort=()=>{B("get transaction error/abort"),this.getsRunning--}})}setNodesInDb(I){return h(this,void 0,void 0,function*(){return new Promise((W,B)=>{const z=this.db.transaction(["nodes"],"readwrite"),H=z.objectStore("nodes"),Y=new Date().getTime();this.putsRunning++,(0,k.default)("[IndexedDB] Starting put",I,this.putsRunning);for(const q in I){const C=I[q];if(typeof C=="object")try{H.put(C)}catch(U){throw(0,k.default)("[IndexedDB] Error while putting",C,U),U}else try{H.delete(q)}catch(U){throw(0,k.default)("[IndexedDB] Error while removing",H,C,U),U}}z.oncomplete=()=>{this.putsRunning--,(0,k.default)("[IndexedDB] Finished put",I,this.putsRunning,new Date().getTime()-Y+"ms"),W()},z.onerror=()=>{this.putsRunning--,B("transaction error")},z.onabort=()=>{B("transaction abort"),this.putsRunning--}})})}reset(I){const W=this.db.name;this.db.close(),F.clean(this.db.name,()=>{F.open(W,(B,z)=>{B?(0,k.default)("[IndexedDB] Error while resetting local storage",B):this.db=z,typeof I=="function"&&I(self)})})}forAllNodes(I){return h(this,void 0,void 0,function*(){return new Promise(W=>{this.db.transaction(["nodes"],"readonly").objectStore("nodes").openCursor().onsuccess=B=>{const z=B.target.result;z?(I(this.migrate(z.value)),z.continue()):W()}})})}closeDB(){this.putsRunning===0?this.db.close():setTimeout(this.closeDB.bind(this),100)}static open(I,W){const B=setTimeout(function(){W("timeout trying to open db")},1e4);try{const z=indexedDB.open(I,2);z.onerror=function(){(0,k.default)("[IndexedDB] Opening DB failed",z),clearTimeout(B),W(z.error)},z.onupgradeneeded=function(H){const Y=z.result;(0,k.default)("[IndexedDB] Upgrade: from ",H.oldVersion," to ",H.newVersion),H.oldVersion!==1&&((0,k.default)("[IndexedDB] Creating object store: nodes"),Y.createObjectStore("nodes",{keyPath:"path"})),(0,k.default)("[IndexedDB] Creating object store: changes"),Y.createObjectStore("changes",{keyPath:"path"})},z.onsuccess=function(){clearTimeout(B);const H=z.result;if(!H.objectStoreNames.contains("nodes")||!H.objectStoreNames.contains("changes"))return(0,k.default)("[IndexedDB] Missing object store. Resetting the database."),void F.clean(I,function(){F.open(I,W)});W(null,z.result)}}catch(z){(0,k.default)("[IndexedDB] Failed to open database: "+z),(0,k.default)("[IndexedDB] Resetting database and trying again."),clearTimeout(B),F.clean(I,function(){F.open(I,W)})}}static clean(I,W){const B=indexedDB.deleteDatabase(I);B.onsuccess=function(){(0,k.default)("[IndexedDB] Done removing DB"),W()},B.onerror=B.onabort=function(z){console.error('Failed to remove database "'+I+'"',z)}}static _rs_init(I){return new Promise((W,B)=>{F.open(A,function(z,H){z?B(z):(O=H,H.onerror=()=>{I._emit("error",z)},W())})})}static _rs_supported(){return new Promise((I,W)=>{const B=(0,b.getGlobalContext)();let z=!1;if(typeof navigator<"u"&&navigator.userAgent.match(/Android (2|3|4\.[0-3])/)&&(navigator.userAgent.match(/Chrome|Firefox/)||(z=!0)),"indexedDB"in B&&!z)try{const H=indexedDB.open("rs-check");H.onerror=function(){W()},H.onsuccess=function(){H.result.close(),indexedDB.deleteDatabase("rs-check"),I()}}catch{W()}else W()})}static _rs_cleanup(I){return new Promise(W=>{I.local&&I.local.closeDB(),F.clean(A,W)})}diffHandler(){}}(0,b.applyMixins)(F,[m.default]),l.exports=F},365:function(l,u,f){var h=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};const g=h(f(93)),m=h(f(496)),w=f(746);class k extends m.default{constructor(){super(),this._storage={},this.addEvents(["change","local-events-done"])}getNodes(A){const O={};for(let F=0,V=A.length;F<V;F++)O[A[F]]=(0,w.deepClone)(this._storage[A[F]]);return Promise.resolve(O)}setNodes(A){for(const O in A)A[O]===void 0?delete this._storage[O]:this._storage[O]=A[O];return Promise.resolve()}forAllNodes(A){for(const O in this._storage)A(this.migrate(this._storage[O]));return Promise.resolve()}diffHandler(){}static _rs_init(){}static _rs_supported(){return!0}static _rs_cleanup(){}}(0,w.applyMixins)(k,[g.default]),l.exports=k},794:function(l,u,f){var h=this&&this.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};const g=h(f(496)),m=h(f(93)),w=h(f(334)),k=f(746),b="remotestorage:cache:nodes:";function A(F){return F.substr(0,26)===b||F.substr(0,28)==="remotestorage:cache:changes:"}class O extends g.default{constructor(){super(),this.addEvents(["change","local-events-done"])}diffHandler(...V){}getNodes(V){const I={};for(let W=0,B=V.length;W<B;W++)try{I[V[W]]=JSON.parse(localStorage[b+V[W]])}catch{I[V[W]]=void 0}return Promise.resolve(I)}setNodes(V){for(const I in V)localStorage[b+I]=JSON.stringify(V[I]);return Promise.resolve()}forAllNodes(V){let I;for(let W=0,B=localStorage.length;W<B;W++)if(localStorage.key(W).substr(0,26)===b){try{I=this.migrate(JSON.parse(localStorage[localStorage.key(W)]))}catch{I=void 0}I&&V(I)}return Promise.resolve()}static _rs_init(){}static _rs_supported(){return(0,k.localStorageAvailable)()}static _rs_cleanup(){const V=[];for(let I=0,W=localStorage.length;I<W;I++){const B=localStorage.key(I);A(B)&&V.push(B)}V.forEach(I=>{(0,w.default)("[LocalStorage] Removing",I),delete localStorage[I]})}}(0,k.applyMixins)(O,[m.default]),l.exports=O},334:function(l,u,f){const h=(this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}})(f(28));l.exports=function(...g){h.default.logging&&console.log(...g)}},684:function(l,u,f){var h=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(u,"__esModule",{value:!0}),u.RemoteBase=void 0;const g=h(f(93)),m=f(746);class w extends g.default{constructor(b){super(),this.rs=b,this.connected=!1}stopWaitingForToken(){this.connected||this._emit("not-connected")}addQuotes(b){return typeof b!="string"?b:b==="*"?"*":'"'+b+'"'}stripQuotes(b){return typeof b!="string"?b:b.replace(/^["']|["']$/g,"")}isForbiddenRequestMethod(b,A){return(b==="PUT"||b==="DELETE")&&(0,m.isFolder)(A)}}u.RemoteBase=w},423:function(l,u,f){var h=this&&this.__createBinding||(Object.create?function(K,_,x,M){M===void 0&&(M=x);var D=Object.getOwnPropertyDescriptor(_,x);D&&!("get"in D?!_.__esModule:D.writable||D.configurable)||(D={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(K,M,D)}:function(K,_,x,M){M===void 0&&(M=x),K[M]=_[x]}),g=this&&this.__setModuleDefault||(Object.create?function(K,_){Object.defineProperty(K,"default",{enumerable:!0,value:_})}:function(K,_){K.default=_}),m=this&&this.__importStar||function(K){if(K&&K.__esModule)return K;var _={};if(K!=null)for(var x in K)x!=="default"&&Object.prototype.hasOwnProperty.call(K,x)&&h(_,K,x);return g(_,K),_},w=this&&this.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(u,"__esModule",{value:!0}),u.RemoteStorage=void 0;const k=w(f(28)),b=w(f(334)),A=f(746),O=w(f(548)),F=w(f(275)),V=w(f(424)),I=w(f(285)),W=f(93),B=w(f(801)),z=w(f(706)),H=w(f(373)),Y=w(f(982)),q=w(f(503)),C=w(f(545)),U=m(f(746)),R=(0,A.getGlobalContext)();let Q;function ue(K){return K.statusCode!==403&&K.statusCode!==401||this._emit("error",new q.default),Promise.resolve(K)}function oe(K){return typeof K=="number"&&K>=2e3&&K<=36e5}var se;(function(K){K.GOOGLE="googledrive",K.DROPBOX="dropbox"})(se||(se={}));class ae{constructor(_){if(this._pending=[],this._cleanups=[],this._pathHandlers={change:{}},this.apiKeys={},this._init=C.default.loadFeatures,this.features=C.default.features,this.loadFeature=C.default.loadFeature,this.featureSupported=C.default.featureSupported,this.featureDone=C.default.featureDone,this.featuresDone=C.default.featuresDone,this.featuresLoaded=C.default.featuresLoaded,this.featureInitialized=C.default.featureInitialized,this.featureFailed=C.default.featureFailed,this.hasFeature=C.default.hasFeature,this._setCachingModule=C.default._setCachingModule,this._collectCleanupFunctions=C.default._collectCleanupFunctions,this._fireReady=C.default._fireReady,this.initFeature=C.default.initFeature,typeof _=="object"&&(0,A.extend)(k.default,_),this.addEvents(["ready","authing","connecting","connected","disconnected","not-connected","conflict","error","features-loaded","sync-interval-change","sync-req-done","sync-done","wire-busy","wire-done","network-offline","network-online"]),this._setGPD({get:this._pendingGPD("get"),put:this._pendingGPD("put"),delete:this._pendingGPD("delete")}),Q=(0,A.localStorageAvailable)(),Q){this.apiKeys=(0,A.getJSONFromLocalStorage)("remotestorage:api-keys")||{};const M=localStorage.getItem("remotestorage:backend");M==="dropbox"||M==="googledrive"?this.setBackend(M):this.setBackend("remotestorage")}const x=this.on;this.on=function(M,D){if(this._allLoaded)switch(M){case"features-loaded":setTimeout(D,0);break;case"ready":this.remote&&setTimeout(D,0);break;case"connected":this.remote&&this.remote.connected&&setTimeout(D,0);break;case"not-connected":this.remote&&!this.remote.connected&&setTimeout(D,0)}return x.call(this,M,D)},this._init(),this.fireInitial=(function(){this.local&&setTimeout(this.local.fireInitial.bind(this.local),0)}).bind(this),this.on("ready",this.fireInitial.bind(this)),this.loadModules()}get connected(){return this.remote.connected}loadModules(){k.default.modules.forEach(this.addModule.bind(this))}authorize(_){if(this.access.setStorageType(this.remote.storageApi),_.scope===void 0&&(_.scope=this.access.scopeParameter),R.cordova)_.redirectUri=k.default.cordovaRedirectUri;else{const x=F.default.getLocation();let M=x.origin;x.pathname!=="/"&&(M+=x.pathname),_.redirectUri=M}_.clientId===void 0&&(_.clientId=_.redirectUri.match(/^(https?:\/\/[^/]+)/)[0]),F.default.authorize(this,_)}impliedauth(_,x){_=_||this.remote.storageApi,x=x||String(document.location),(0,b.default)("ImpliedAuth proceeding due to absent authURL; storageApi = "+_+" redirectUri = "+x),this.remote.configure({token:F.default.IMPLIED_FAKE_TOKEN}),document.location.href=x}connect(_,x){if(this.setBackend("remotestorage"),_.indexOf("@")<0&&!_.match(/^(https?:\/\/)?[^\s\/$\.?#]+\.[^\s]*$/))this._emit("error",new ae.DiscoveryError("Not a valid user address or URL."));else{if(_.indexOf("@")<0&&!_.match(/^https?:\/\//)&&(_=`https://${_}`),R.cordova){if(typeof k.default.cordovaRedirectUri!="string")return void this._emit("error",new ae.DiscoveryError("Please supply a custom HTTPS redirect URI for your Cordova app"));if(!R.cordova.InAppBrowser)return void this._emit("error",new ae.DiscoveryError("Please include the InAppBrowser Cordova plugin to enable OAuth"))}this.remote.configure({userAddress:_}),this._emit("connecting"),(0,H.default)(_).then(M=>{if(this._emit("authing"),M.userAddress=_,this.remote.configure(M),!this.remote.connected)if(M.authURL)if(x===void 0)this.authorize({authURL:M.authURL});else{if(typeof x!="string")throw new Error("Supplied bearer token must be a string");(0,b.default)("Skipping authorization sequence and connecting with known token"),this.remote.configure({token:x})}else this.impliedauth()},()=>{this._emit("error",new ae.DiscoveryError("No storage information found for this user address."))})}}reconnect(){this.remote.configure({token:null}),this.backend==="remotestorage"?this.connect(this.remote.userAddress):this.remote.connect()}disconnect(){this.remote&&this.remote.configure({userAddress:null,href:null,storageApi:null,token:null,properties:null}),this._setGPD({get:this._pendingGPD("get"),put:this._pendingGPD("put"),delete:this._pendingGPD("delete")});const _=this._cleanups.length;let x=0;const M=()=>{x++,x>=_&&(this._init(),this._emit("disconnected"))};_>0?this._cleanups.forEach(D=>{const N=D(this);typeof N=="object"&&typeof N.then=="function"?N.then(M):M()}):M()}setBackend(_){this.backend=_,Q&&(_!==void 0?localStorage.setItem("remotestorage:backend",_):localStorage.removeItem("remotestorage:backend"))}onChange(_,x){this._pathHandlers.change[_]||(this._pathHandlers.change[_]=[]),this._pathHandlers.change[_].push(x)}enableLog(){k.default.logging=!0}disableLog(){k.default.logging=!1}log(..._){b.default.apply(ae,_)}setApiKeys(_){const x=[se.GOOGLE,se.DROPBOX];if(typeof _!="object"||!Object.keys(_).every(M=>x.includes(M)))return console.error("setApiKeys() was called with invalid arguments"),!1;Object.keys(_).forEach(M=>{const D=_[M];if(D){switch(M){case se.DROPBOX:this.apiKeys[se.DROPBOX]={appKey:D},this.dropbox!==void 0&&this.dropbox.clientId===D||z.default._rs_init(this);break;case se.GOOGLE:this.apiKeys[se.GOOGLE]={clientId:D},this.googledrive!==void 0&&this.googledrive.clientId===D||B.default._rs_init(this)}return!0}delete this.apiKeys[M]}),Q&&localStorage.setItem("remotestorage:api-keys",JSON.stringify(this.apiKeys))}setCordovaRedirectUri(_){if(typeof _!="string"||!_.match(/http(s)?:\/\//))throw new Error("Cordova redirect URI must be a URI string");k.default.cordovaRedirectUri=_}_setGPD(_,x){function M(D){return function(...N){return D.apply(x,N).then(ue.bind(this))}}this.get=M(_.get),this.put=M(_.put),this.delete=M(_.delete)}_pendingGPD(_){return(...x)=>{const M=Array.prototype.slice.call(x);return new Promise((D,N)=>{this._pending.push({method:_,args:M,promise:{resolve:D,reject:N}})})}}_processPending(){this._pending.forEach(_=>{try{this[_.method](..._.args).then(_.promise.resolve,_.promise.reject)}catch(x){_.promise.reject(x)}}),this._pending=[]}_bindChange(_){_.on("change",this._dispatchEvent.bind(this,"change"))}_dispatchEvent(_,x){Object.keys(this._pathHandlers[_]).forEach(M=>{const D=M.length;x.path.substr(0,D)===M&&this._pathHandlers[_][M].forEach(N=>{const te={};for(const X in x)te[X]=x[X];te.relativePath=x.path.replace(new RegExp("^"+M),"");try{N(te)}catch(X){console.error("'change' handler failed: ",X,X.stack),this._emit("error",X)}})})}scope(_){if(typeof _!="string")throw"Argument 'path' of baseClient.scope must be a string";return this.access.checkPathPermission(_,"r")||console.warn("WARNING: Please use remoteStorage.access.claim() to ask for access permissions first: https://remotestoragejs.readthedocs.io/en/latest/js-api/access.html#claim"),new V.default(this,_)}getSyncInterval(){return k.default.syncInterval}setSyncInterval(_){if(!oe(_))throw _+" is not a valid sync interval";const x=k.default.syncInterval;k.default.syncInterval=_,this._emit("sync-interval-change",{oldValue:x,newValue:_})}getBackgroundSyncInterval(){return k.default.backgroundSyncInterval}setBackgroundSyncInterval(_){if(!oe(_))throw _+" is not a valid sync interval";const x=k.default.backgroundSyncInterval;k.default.backgroundSyncInterval=_,this._emit("sync-interval-change",{oldValue:x,newValue:_})}getCurrentSyncInterval(){return k.default.isBackground?k.default.backgroundSyncInterval:k.default.syncInterval}getRequestTimeout(){return k.default.requestTimeout}setRequestTimeout(_){if(typeof _!="number")throw _+" is not a valid request timeout";k.default.requestTimeout=_}syncCycle(){this.sync&&!this.sync.stopped&&(this.on("sync-done",()=>{this.sync&&!this.sync.stopped&&(this._syncTimer&&(clearTimeout(this._syncTimer),this._syncTimer=void 0),this._syncTimer=setTimeout(this.sync.sync.bind(this.sync),this.getCurrentSyncInterval()))}),this.sync.sync())}startSync(){return k.default.cache?(this.sync.stopped=!1,this.syncStopped=!1,this.sync.sync()):(console.warn("Nothing to sync, because caching is disabled."),Promise.resolve())}stopSync(){clearTimeout(this._syncTimer),this._syncTimer=void 0,this.sync?this.sync.stopped=!0:this.syncStopped=!0}addModule(_){const x=_.name,M=_.builder;if(Object.defineProperty(this,x,{configurable:!0,get:function(){const D=this._loadModule(x,M);return Object.defineProperty(this,x,{value:D}),D}}),x.indexOf("-")!==-1){const D=x.replace(/\-[a-z]/g,function(N){return N[1].toUpperCase()});Object.defineProperty(this,D,{get:function(){return this[x]}})}}_loadModule(_,x){if(x)return x(new V.default(this,"/"+_+"/"),new V.default(this,"/public/"+_+"/")).exports;throw"Unknown module: "+_}}u.RemoteStorage=ae,ae.Authorize=F.default,ae.SyncError=Y.default,ae.Unauthorized=q.default,ae.DiscoveryError=H.default.DiscoveryError,ae.util=U,Object.defineProperty(ae.prototype,"access",{get:function(){const K=new O.default;return Object.defineProperty(this,"access",{value:K}),K},configurable:!0}),Object.defineProperty(ae.prototype,"caching",{configurable:!0,get:function(){const K=new I.default;return Object.defineProperty(this,"caching",{value:K}),K}}),(0,A.applyMixins)(ae,[W.EventHandling]),u.default=ae},368:function(l,u,f){var h=this&&this.__awaiter||function(k,b,A,O){return new(A||(A=Promise))(function(F,V){function I(z){try{B(O.next(z))}catch(H){V(H)}}function W(z){try{B(O.throw(z))}catch(H){V(H)}}function B(z){var H;z.done?F(z.value):(H=z.value,H instanceof A?H:new A(function(Y){Y(H)})).then(I,W)}B((O=O.apply(k,b||[])).next())})},g=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(u,"__esModule",{value:!0}),u.isArrayBufferView=void 0,u.retryAfterMs=function(k){const b=1e3*parseInt(k.getResponseHeader("Retry-After"));return b>=1e3?b:Math.max(1500,Math.min(6e4,Math.round(w.default.syncInterval/(2.9+.2*Math.random()))))},u.requestWithTimeout=function(k,b,A){return h(this,void 0,void 0,function*(){return typeof fetch=="function"?function(O,F,V){return h(this,void 0,void 0,function*(){const I=typeof AbortController=="function"?new AbortController:null;let W;const B=new Promise((q,C)=>{W=setTimeout(()=>{I&&I.abort(),C("timeout")},w.default.requestTimeout)});let z;const H={},Y=fetch(F,{method:O,headers:V.headers,body:V.body,signal:I?I.signal:void 0}).then(q=>{switch((0,m.default)("[requests fetch]",q),q.headers.forEach((C,U)=>{H[U.toUpperCase()]=C}),z={readyState:4,status:q.status,statusText:q.statusText,response:void 0,getResponseHeader:C=>H[C.toUpperCase()]||null,responseType:V.responseType,responseURL:F},V.responseType){case"arraybuffer":return q.arrayBuffer();case"blob":return q.blob();case"json":return q.json();case void 0:case"":case"text":return q.text();default:throw new Error("responseType 'document' is not currently supported using fetch")}}).then(q=>(z.response=q,V.responseType&&V.responseType!=="text"||(z.responseText=q),z)).finally(()=>{clearTimeout(W)});return Promise.race([Y,B])})}(k,b,A):typeof XMLHttpRequest=="function"?function(O,F,V){return h(this,void 0,void 0,function*(){return new Promise((I,W)=>{(0,m.default)("[requests XHR]",O,F);let B=!1;const z=setTimeout(()=>{B=!0,W("timeout")},w.default.requestTimeout),H=new XMLHttpRequest;if(H.open(O,F,!0),V.responseType&&(H.responseType=V.responseType),V.headers)for(const q in V.headers)H.setRequestHeader(q,V.headers[q]);H.onload=()=>{B||(clearTimeout(z),I(H))},H.onerror=q=>{B||(clearTimeout(z),W(q))};let Y=V.body;typeof Y=="object"&&!(0,u.isArrayBufferView)(Y)&&Y instanceof ArrayBuffer&&(Y=new Uint8Array(Y)),H.send(Y)})})}(k,b,A):Promise.reject("[Requests] You need to add a polyfill for fetch or XMLHttpRequest")})};const m=g(f(334)),w=g(f(28));if(typeof(f.g||window).ArrayBufferView=="function")u.isArrayBufferView=function(k){return k&&k instanceof(f.g||window).ArrayBufferView};else{const k=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];u.isArrayBufferView=function(b){for(let A=0;A<8;A++)if(b instanceof k[A])return!0;return!1}}},941:function(l){l.exports=class{constructor(u){this._itemsRev={},this._storage={},this._canPropagate=!1,this.defaultValue=u,this.activatePropagation()}get(u){u=u.toLowerCase();let f=this._storage[u];return f===void 0&&(f=this.defaultValue,this._storage[u]=f),f}set(u,f){return u=u.toLowerCase(),this._storage[u]===f||(this._storage[u]=f,f||delete this._itemsRev[u],this._updateParentFolderItemRev(u,f),this._canPropagate&&this._propagate(u)),f}delete(u){return this.set(u,null)}deactivatePropagation(){return this._canPropagate=!1,!0}activatePropagation(){return this._canPropagate||(this._generateFolderRev("/"),this._canPropagate=!0),!0}_hashCode(u){let f=0;if(u.length===0)return f;for(let h=0;h<u.length;h++)f=(f<<5)-f+u.charCodeAt(h),f|=0;return f}_generateHash(u){const f=u.sort().join("|");return""+this._hashCode(f)}_updateParentFolderItemRev(u,f){if(u!=="/"){const h=this._getParentFolder(u);this._itemsRev[h]||(this._itemsRev[h]={});const g=this._itemsRev[h];f?g[u]=f:delete g[u],this._updateParentFolderItemRev(h,this.defaultValue)}}_getParentFolder(u){return u.substr(0,u.lastIndexOf("/",u.length-2)+1)}_propagate(u){if(u!=="/"){const f=this._getParentFolder(u),h=this._itemsRev[f],g=[];for(const w in h)g.push(h[w]);const m=this._generateHash(g);this.set(f,m)}}_generateFolderRev(u){const f=this._itemsRev[u];let h=this.defaultValue;if(f){const g=[];for(const m in f){let w;w=m.substr(-1)==="/"?this._generateFolderRev(m):f[m],g.push(w)}g.length>0&&(h=this._generateHash(g))}return this.set(u,h),h}}},491:function(l){class u extends Error{constructor(h){super();const g=new Error("Schema not found: "+h);return g.name="SchemaNotFound",g}}l.exports=u},982:function(l){class u extends Error{constructor(h){super(),this.name="SyncError",this.message="Sync failed: ",typeof h=="string"?this.message+=h:(this.message+=h.message,this.stack=h.stack,this.originalError=h)}}l.exports=u},313:function(l,u,f){var h=this&&this.__awaiter||function(q,C,U,R){return new(U||(U=Promise))(function(Q,ue){function oe(K){try{ae(R.next(K))}catch(_){ue(_)}}function se(K){try{ae(R.throw(K))}catch(_){ue(_)}}function ae(K){var _;K.done?Q(K.value):(_=K.value,_ instanceof U?_:new U(function(x){x(_)})).then(oe,se)}ae((R=R.apply(q,C||[])).next())})},g=this&&this.__importDefault||function(q){return q&&q.__esModule?q:{default:q}};Object.defineProperty(u,"__esModule",{value:!0}),u.Sync=void 0;const m=g(f(28)),w=g(f(451)),k=g(f(93)),b=g(f(334)),A=g(f(275)),O=g(f(982)),F=g(f(503)),V=f(746);let I,W;function B(q,C,U){return{action:q,path:C,promise:U}}function z(q,C){return q.common.revision!==C&&(!q.remote||q.remote.revision!==C)}function H(q){return q.common&&q.common.revision}class Y{constructor(C){this._finishedTasks=[],this.rs=C,this._tasks={},this._running={},this._timeStarted={},this.numThreads=10,this.rs.local.onDiff(U=>{this.addTask(U),this.doTasks()}),this.rs.caching.onActivate(U=>{this.addTask(U),this.doTasks()}),this.addEvents(["done","req-done"])}now(){return new Date().getTime()}queueGetRequest(C){return new Promise((U,R)=>{this.rs.remote.connected?this.rs.remote.online?(this.addTask(C,(function(){this.rs.local.get(C).then(Q=>U(Q))}).bind(this)),this.doTasks()):R("cannot fulfill maxAge requirement - remote is not online"):R("cannot fulfill maxAge requirement - remote is not connected")})}corruptServerItemsMap(C,U){if(typeof C!="object"||Array.isArray(C))return!0;for(const R in C){const Q=C[R];if(typeof Q!="object"||typeof Q.ETag!="string")return!0;if((0,V.isFolder)(R)){if(R.substring(0,R.length-1).indexOf("/")!==-1)return!0}else if(R.indexOf("/")!==-1||U&&(typeof Q["Content-Type"]!="string"||typeof Q["Content-Length"]!="number"))return!0}return!1}corruptItemsMap(C){if(typeof C!="object"||Array.isArray(C))return!0;for(const U in C)if(typeof C[U]!="boolean")return!0;return!1}corruptRevision(C){return typeof C!="object"||Array.isArray(C)||C.revision&&typeof C.revision!="string"||C.body&&typeof C.body!="string"&&typeof C.body!="object"||C.contentType&&typeof C.contentType!="string"||C.contentLength&&typeof C.contentLength!="number"||C.timestamp&&typeof C.timestamp!="number"||C.itemsMap&&this.corruptItemsMap(C.itemsMap)}isCorrupt(C){return typeof C!="object"||Array.isArray(C)||typeof C.path!="string"||this.corruptRevision(C.common)||C.local&&this.corruptRevision(C.local)||C.remote&&this.corruptRevision(C.remote)||C.push&&this.corruptRevision(C.push)}hasTasks(){return Object.getOwnPropertyNames(this._tasks).length>0}collectDiffTasks(){return h(this,void 0,void 0,function*(){let C=0;return this.rs.local.forAllNodes(U=>{C>100||(this.isCorrupt(U)?((0,b.default)("[Sync] WARNING: corrupt node in local cache",U),typeof U=="object"&&U.path&&(this.addTask(U.path),C++)):(this.needsFetch(U)&&this.rs.access.checkPathPermission(U.path,"r")||(0,V.isDocument)(U.path)&&this.needsPush(U)&&this.rs.access.checkPathPermission(U.path,"rw"))&&(this.addTask(U.path),C++))}).then(()=>C).catch(U=>{throw U})})}inConflict(C){return C.local&&C.remote&&(C.remote.body!==void 0||C.remote.itemsMap)}needsRefresh(C){return!!C.common&&(!C.common.timestamp||this.now()-C.common.timestamp>m.default.syncInterval)}needsFetch(C){return!!this.inConflict(C)||!(!C.common||C.common.itemsMap!==void 0||C.common.body!==void 0)||!(!C.remote||C.remote.itemsMap!==void 0||C.remote.body!==void 0)}needsPush(C){return!this.inConflict(C)&&(!(!C.local||C.push)||void 0)}needsRemotePut(C){return C.local&&C.local.body}needsRemoteDelete(C){return C.local&&C.local.body===!1}getParentPath(C){const U=C.match(/^(.*\/)([^\/]+\/?)$/);if(U)return U[1];throw new Error('Not a valid path: "'+C+'"')}deleteChildPathsFromTasks(){for(const C in this._tasks){const U=(0,V.pathsFromRoot)(C);for(let R=1;R<U.length;R++)this._tasks[U[R]]&&(Array.isArray(this._tasks[C])&&this._tasks[C].length&&Array.prototype.push.apply(this._tasks[U[R]],this._tasks[C]),delete this._tasks[C])}}collectRefreshTasks(){return h(this,void 0,void 0,function*(){return this.rs.local.forAllNodes(C=>{let U;if(this.needsRefresh(C)){try{U=this.getParentPath(C.path)}catch{}U&&this.rs.access.checkPathPermission(U,"r")?this.addTask(U):this.rs.access.checkPathPermission(C.path,"r")&&this.addTask(C.path)}}).then(()=>this.deleteChildPathsFromTasks()).catch(C=>{throw C})})}flush(C){for(const U in C)this.rs.caching.checkPath(U)==="FLUSH"&&C[U]&&!C[U].local&&((0,b.default)("[Sync] Flushing",U),C[U]=void 0);return C}doTask(C){return this.rs.local.getNodes([C]).then(U=>{const R=U[C];return R===void 0||function(Q){return Q.remote&&Q.remote.revision&&!Q.remote.itemsMap&&!Q.remote.body}(R)?B("get",C,this.rs.remote.get(C)):this.needsRemotePut(R)?(R.push=(0,V.deepClone)(R.local),R.push.timestamp=this.now(),this.rs.local.setNodes(this.flush(U)).then(()=>{let Q;return Q=H(R)?{ifMatch:R.common.revision}:{ifNoneMatch:"*"},B("put",C,this.rs.remote.put(C,R.push.body,R.push.contentType,Q))})):this.needsRemoteDelete(R)?(R.push={body:!1,timestamp:this.now()},this.rs.local.setNodes(this.flush(U)).then(()=>H(R)?B("delete",C,this.rs.remote.delete(C,{ifMatch:R.common.revision})):B("get",C,this.rs.remote.get(C)))):H(R)?B("get",C,this.rs.remote.get(C,{ifNoneMatch:R.common.revision})):B("get",C,this.rs.remote.get(C))})}autoMergeFolder(C){if(C.remote.itemsMap&&(C.common=C.remote,delete C.remote,C.common.itemsMap)){for(const U in C.common.itemsMap)C.local.itemsMap[U]||(C.local.itemsMap[U]=!1);(0,V.equal)(C.local.itemsMap,C.common.itemsMap)&&delete C.local}return C}autoMergeDocument(C){return function(U){return(!U.remote||!U.remote.revision||U.remote.revision===U.common.revision)&&(U.common.body===void 0&&U.remote.body===!1||U.remote.body===U.common.body&&U.remote.contentType===U.common.contentType)}(C)?delete(C=function(U){return U.remote&&U.remote.body===!1&&U.local&&U.local.body===!1&&delete U.local,U}(C)).remote:C.remote.body!==void 0&&((0,b.default)("[Sync] Emitting keep/revert"),this.rs.local._emitChange({origin:"conflict",path:C.path,oldValue:C.local.body,newValue:C.remote.body,lastCommonValue:C.common.body,oldContentType:C.local.contentType,newContentType:C.remote.contentType,lastCommonContentType:C.common.contentType}),C.remote.body?C.common=C.remote:C.common={},delete C.remote,delete C.local),C}autoMerge(C){if(C.remote){if(C.local)return(0,V.isFolder)(C.path)?this.autoMergeFolder(C):this.autoMergeDocument(C);if((0,V.isFolder)(C.path))C.remote.itemsMap!==void 0&&(C.common=C.remote,delete C.remote);else if(C.remote.body!==void 0){const U={origin:"remote",path:C.path,oldValue:C.common.body===!1?void 0:C.common.body,newValue:C.remote.body===!1?void 0:C.remote.body,oldContentType:C.common.contentType,newContentType:C.remote.contentType};if((U.oldValue||U.newValue)&&this.rs.local._emitChange(U),!C.remote.body)return;C.common=C.remote,delete C.remote}return C}C.common.body&&this.rs.local._emitChange({origin:"remote",path:C.path,oldValue:C.common.body,newValue:void 0,oldContentType:C.common.contentType,newContentType:void 0})}updateCommonTimestamp(C,U){return h(this,void 0,void 0,function*(){return this.rs.local.getNodes([C]).then(R=>(R[C]&&R[C].common&&R[C].common.revision===U&&(R[C].common.timestamp=this.now()),this.rs.local.setNodes(this.flush(R))))})}markChildren(C,U,R,Q){return h(this,void 0,void 0,function*(){const ue=[],oe={},se={};for(const ae in U)ue.push(C+ae),oe[C+ae]=U[ae];for(const ae in Q)ue.push(C+ae);return this.rs.local.getNodes(ue).then(ae=>{let K,_;for(const x in ae)if(_=ae[x],oe[x])_&&_.common?z(_,oe[x].ETag)&&(R[x]=(0,V.deepClone)(_),R[x].remote={revision:oe[x].ETag,timestamp:this.now()},R[x]=this.autoMerge(R[x])):(K=this.rs.caching.checkPath(x),K==="ALL"&&(R[x]={path:x,common:{timestamp:this.now()},remote:{revision:oe[x].ETag,timestamp:this.now()}})),R[x]&&oe[x]["Content-Type"]&&(R[x].remote.contentType=oe[x]["Content-Type"]),R[x]&&oe[x]["Content-Length"]&&(R[x].remote.contentLength=oe[x]["Content-Length"]);else if(Q[x.substring(C.length)]&&_&&_.common){if(_.common.itemsMap)for(const M in _.common.itemsMap)se[x+M]=!0;if(_.local&&_.local.itemsMap)for(const M in _.local.itemsMap)se[x+M]=!0;if(_.remote||(0,V.isFolder)(x))R[x]=void 0;else if(R[x]=this.autoMerge(_),R[x]===void 0){const M=this.getParentPath(x),D=R[M],N=x.substring(C.length);D&&D.local&&(delete D.local.itemsMap[N],(0,V.equal)(D.local.itemsMap,D.common.itemsMap)&&delete D.local)}}return this.deleteRemoteTrees(Object.keys(se),R).then(x=>this.rs.local.setNodes(this.flush(x)))})})}deleteRemoteTrees(C,U){return h(this,void 0,void 0,function*(){return C.length===0?Promise.resolve(U):this.rs.local.getNodes(C).then(R=>h(this,void 0,void 0,function*(){const Q={};function ue(oe,se){if(oe&&oe.itemsMap)for(const ae in oe.itemsMap)Q[se+ae]=!0}for(const oe in R){const se=R[oe];se&&((0,V.isFolder)(oe)?(ue(se.common,oe),ue(se.local,oe)):se.common&&typeof se.common.body!==void 0&&(U[oe]=(0,V.deepClone)(se),U[oe].remote={body:!1,timestamp:this.now()},U[oe]=this.autoMerge(U[oe])))}return this.deleteRemoteTrees(Object.keys(Q),U).then(oe=>this.rs.local.setNodes(this.flush(oe)))}))})}completeFetch(C,U,R,Q){return h(this,void 0,void 0,function*(){let ue,oe;const se=(0,V.pathsFromRoot)(C);return(0,V.isFolder)(C)?ue=[C]:(oe=se[1],ue=[C,oe]),this.rs.local.getNodes(ue).then(ae=>{let K,_,x=ae[C];const M={};function D(N){if(N&&N.itemsMap)for(K in N.itemsMap)U[K]||(M[K]=!0)}if(typeof x=="object"&&x.path===C&&typeof x.common=="object"||(x={path:C,common:{}},ae[C]=x),x.remote={revision:Q,timestamp:this.now()},(0,V.isFolder)(C))for(K in D(x.common),D(x.remote),x.remote.itemsMap={},U)x.remote.itemsMap[K]=!0;else x.remote.body=U,x.remote.contentType=R,_=ae[oe],_&&_.local&&_.local.itemsMap&&(K=C.substring(oe.length),_.local.itemsMap[K]=!0,(0,V.equal)(_.local.itemsMap,_.common.itemsMap)&&delete _.local);return ae[C]=this.autoMerge(x),{toBeSaved:ae,missingChildren:M}})})}completePush(C,U,R,Q){return h(this,void 0,void 0,function*(){return this.rs.local.getNodes([C]).then(ue=>{const oe=ue[C];if(!oe.push)throw this.stopped=!0,new Error("completePush called but no push version!");return R?((0,b.default)("[Sync] We have a conflict"),oe.remote&&oe.remote.revision===Q||(oe.remote={revision:Q||"conflict",timestamp:this.now()},delete oe.push),ue[C]=this.autoMerge(oe)):(oe.common={revision:Q,timestamp:this.now()},U==="put"?(oe.common.body=oe.push.body,oe.common.contentType=oe.push.contentType,(0,V.equal)(oe.local.body,oe.push.body)&&oe.local.contentType===oe.push.contentType&&delete oe.local,delete oe.push):U==="delete"&&(oe.local.body===!1?ue[C]=void 0:delete oe.push)),this.rs.local.setNodes(this.flush(ue))})})}dealWithFailure(C){return h(this,void 0,void 0,function*(){return this.rs.local.getNodes([C]).then(U=>{if(U[C])return delete U[C].push,this.rs.local.setNodes(this.flush(U))})})}interpretStatus(C){const U={statusCode:C,successful:void 0,conflict:void 0,unAuth:void 0,notFound:void 0,changed:void 0,networkProblems:void 0};if(typeof C=="string"&&(C==="offline"||C==="timeout"))return U.successful=!1,U.networkProblems=!0,U;if(typeof C=="number"){const R=Math.floor(C/100);return U.successful=R===2||C===304||C===412||C===404,U.conflict=C===412,U.unAuth=C===401&&this.rs.remote.token!==A.default.IMPLIED_FAKE_TOKEN||C===402||C===403,U.notFound=C===404,U.changed=C!==304,U}}handleGetResponse(C,U,R,Q,ue){return h(this,void 0,void 0,function*(){return U.notFound&&(R=!!(0,V.isFolder)(C)&&{}),U.changed?this.completeFetch(C,R,Q,ue).then(oe=>(0,V.isFolder)(C)?this.corruptServerItemsMap(R)?((0,b.default)("[Sync] WARNING: Discarding corrupt folder description from server for "+C),!1):this.markChildren(C,R,oe.toBeSaved,oe.missingChildren).then(()=>!0):this.rs.local.setNodes(this.flush(oe.toBeSaved)).then(()=>!0)):this.updateCommonTimestamp(C,ue).then(()=>!0)})}handleResponse(C,U,R){const Q=this.interpretStatus(R.statusCode);if(Q.successful){if(U==="get")return this.handleGetResponse(C,Q,R.body,R.contentType,R.revision);if(U==="put"||U==="delete")return this.completePush(C,U,Q.conflict,R.revision).then(function(){return!0});throw new Error(`cannot handle response for unknown action ${U}`)}{let ue;return ue=Q.unAuth?new F.default:Q.networkProblems?new O.default("Network request failed."):new Error("HTTP response code "+Q.statusCode+" received."),this.dealWithFailure(C).then(()=>{throw this.rs._emit("error",ue),ue})}}finishTask(C,U=!0){if(C.action!==void 0){if(!(U&&((0,b.default)("[Sync] queue finished task:",C.path),this._finishedTasks.push(C),this._finishedTasks.length>1)))return(0,b.default)("[Sync] run task:",C.path),C.promise.then(R=>this.handleResponse(C.path,C.action,R),R=>((0,b.default)("[Sync] wireclient rejects its promise!",C.path,C.action,R),this.handleResponse(C.path,C.action,{statusCode:"offline"}))).then(R=>h(this,void 0,void 0,function*(){if(this._finishedTasks.shift(),delete this._timeStarted[C.path],delete this._running[C.path],R&&this._tasks[C.path]){for(let Q=0;Q<this._tasks[C.path].length;Q++)this._tasks[C.path][Q]();delete this._tasks[C.path]}this.rs._emit("sync-req-done",{tasksRemaining:Object.keys(this._tasks).length}),this._finishedTasks.length>0?this.finishTask(this._finishedTasks[0],!1):yield this.collectTasks(!1).then(()=>{!this.hasTasks()||this.stopped?((0,b.default)("[Sync] Sync is done! Reschedule?",Object.getOwnPropertyNames(this._tasks).length,this.stopped),this.done||(this.done=!0,this.rs._emit("sync-done",{completed:!0}))):setTimeout(()=>{this.doTasks()},10)})}),R=>{(0,b.default)("[Sync] Error",R),this._finishedTasks.shift(),delete this._timeStarted[C.path],delete this._running[C.path],this.rs._emit("sync-req-done",{tasksRemaining:Object.keys(this._tasks).length}),this._finishedTasks.length>0?this.finishTask(this._finishedTasks[0],!1):this.done||(this.done=!0,this.rs._emit("sync-done",{completed:!1}))});(0,b.default)("[Sync] delaying finished task:",C.path)}else delete this._running[C.path]}doTasks(){let C,U,R=0;C=this.rs.remote.connected?this.rs.remote.online?this.numThreads:1:0;const Q=C-Object.getOwnPropertyNames(this._running).length;if(Q<=0)return!0;for(U in this._tasks)if(!this._running[U]&&(this._timeStarted[U]=this.now(),this._running[U]=this.doTask(U),this._running[U].then(this.finishTask.bind(this)),R++,R>=Q))return!0;return R>=Q}collectTasks(C){return h(this,void 0,void 0,function*(){return this.hasTasks()||this.stopped?Promise.resolve():this.collectDiffTasks().then(U=>U||C===!1?Promise.resolve():this.collectRefreshTasks(),function(U){throw U})})}addTask(C,U){this._tasks[C]||(this._tasks[C]=[]),typeof U=="function"&&this._tasks[C].push(U)}sync(){return this.done=!1,this.doTasks()?Promise.resolve():this.collectTasks().then(()=>{try{this.doTasks()}catch(C){(0,b.default)("[Sync] doTasks error",C)}},function(C){throw(0,b.default)("[Sync] Sync error",C),new Error("Local cache unavailable")})}static _rs_init(C){I=function(){(0,b.default)("[Sync] syncCycleCb calling syncCycle");const U=new w.default;U.isBrowser()&&function(R,Q){function ue(oe){const se=Q.getCurrentSyncInterval();m.default.isBackground=!oe;const ae=Q.getCurrentSyncInterval();Q._emit("sync-interval-change",{oldValue:se,newValue:ae})}R.on("background",()=>ue(!1)),R.on("foreground",()=>ue(!0))}(U,C),C.sync||(C.sync=new Y(C),C.syncStopped&&((0,b.default)("[Sync] Instantiating sync stopped"),C.sync.stopped=!0,delete C.syncStopped)),(0,b.default)("[Sync] syncCycleCb calling syncCycle"),C.syncCycle()},W=function(){C.removeEventListener("connected",W),C.startSync()},C.on("ready",I),C.on("connected",W)}static _rs_cleanup(C){C.stopSync(),C.removeEventListener("ready",I),C.removeEventListener("connected",W),C.sync=void 0,delete C.sync}}u.Sync=Y,(0,V.applyMixins)(Y,[k.default]),u.default=Y},370:function(l,u,f){var h=this&&this.__awaiter||function(k,b,A,O){return new(A||(A=Promise))(function(F,V){function I(z){try{B(O.next(z))}catch(H){V(H)}}function W(z){try{B(O.throw(z))}catch(H){V(H)}}function B(z){var H;z.done?F(z.value):(H=z.value,H instanceof A?H:new A(function(Y){Y(H)})).then(I,W)}B((O=O.apply(k,b||[])).next())})};const g=(this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}})(f(334));function m(k){return this.backend==="dropbox"&&!!k.match(/^\/public\/.*[^\/]$/)}const w={get:function(k,b){if(this.local){if(b===void 0)b=typeof(A=this).remote=="object"&&A.remote.connected&&A.remote.online?2*A.getSyncInterval():((0,g.default)("Not setting default maxAge, because remote is offline or not connected"),!1);else if(typeof b!="number"&&b!==!1)return Promise.reject("Argument 'maxAge' must be 'false' or a number");return this.local.get(k,b,this.sync.queueGetRequest.bind(this.sync))}return this.remote.get(k);var A},put:function(k,b,A){return m.bind(this)(k)?w._wrapBusyDone.call(this,this.remote.put(k,b,A)):this.local?this.local.put(k,b,A):w._wrapBusyDone.call(this,this.remote.put(k,b,A))},delete:function(k){return this.local?this.local.delete(k):w._wrapBusyDone.call(this,this.remote.delete(k))},_wrapBusyDone:function(k){return h(this,void 0,void 0,function*(){return this._emit("wire-busy"),k.then(b=>(this._emit("wire-done",{success:!0}),Promise.resolve(b)),b=>(this._emit("wire-done",{success:!1}),Promise.reject(b)))})}};l.exports=w},613:function(l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.BaseClientTypes=void 0;class f{constructor(){this.uris={},this.schemas={},this.aliases={}}declare(m,w,k,b){const A=m+"/"+w;if(b.extends){const O=b.extends.split("/"),F=O.length===1?m+"/"+O.shift():O.join("/"),V=this.uris[F];if(!V)throw"Type '"+A+"' tries to extend unknown schema '"+F+"'";b.extends=this.schemas[V]}this.uris[A]=k,this.aliases[k]=A,this.schemas[k]=b}resolveAlias(m){return this.uris[m]}getSchema(m){return this.schemas[m]}inScope(m){const w=m.length,k={};for(const b in this.uris)if(b.substr(0,w+1)===m+"/"){const A=this.uris[b];k[A]=this.schemas[A]}return k}}u.BaseClientTypes=f;const h=new f;u.default=h},503:function(l){class u extends Error{constructor(h,g={}){super(),this.name="Unauthorized",this.message=h===void 0?"App authorization expired or revoked.":h,g.code!==void 0&&(this.code=g.code),this.stack=new Error().stack}}l.exports=u},746:function(l,u,f){var h=this&&this.__awaiter||function(m,w,k,b){return new(k||(k=Promise))(function(A,O){function F(W){try{I(b.next(W))}catch(B){O(B)}}function V(W){try{I(b.throw(W))}catch(B){O(B)}}function I(W){var B;W.done?A(W.value):(B=W.value,B instanceof k?B:new k(function(z){z(B)})).then(F,V)}I((b=b.apply(m,w||[])).next())})};function g(m,w){if(typeof m=="object"&&!Array.isArray(m)&&m!==null){for(const k in m)if(typeof m[k]=="object"&&m[k]!==null)if(m[k].toString()==="[object ArrayBuffer]"){w[k]=new ArrayBuffer(m[k].byteLength);const b=new Int8Array(m[k]);new Int8Array(w[k]).set(b)}else g(m[k],w[k])}}Object.defineProperty(u,"__esModule",{value:!0}),u.toBase64=u.getTextFromArrayBuffer=u.shouldBeTreatedAsBinary=u.getJSONFromLocalStorage=u.localStorageAvailable=u.pathsFromRoot=u.deepClone=u.equal=u.bindAll=u.cleanPath=u.baseName=u.isDocument=u.isFolder=u.containingFolder=u.extend=u.getGlobalContext=u.globalContext=u.logError=void 0,u.generateCodeVerifier=function(){return h(this,arguments,void 0,function*(m=128){const w=new Uint8Array(m);crypto.getRandomValues(w);const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",b=Array.from(w).map(I=>k[I%66]),A=b.join(""),O=Uint8Array.from(b.map(I=>I.charCodeAt(0))),F=(V=yield crypto.subtle.digest("SHA-256",O),btoa(String.fromCharCode.apply(null,new Uint8Array(V))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""));var V;return crypto.getRandomValues(w),{codeVerifier:A,codeChallenge:F,state:Array.from(w).map(I=>k[I%66]).join("")}})},u.applyMixins=function(m,w){w.forEach(k=>{Object.getOwnPropertyNames(k.prototype).forEach(b=>{Object.defineProperty(m.prototype,b,Object.getOwnPropertyDescriptor(k.prototype,b))})})},u.logError=m=>{typeof m=="string"?console.error(m):console.error(m.message,m.stack)},u.globalContext=typeof window<"u"?window:typeof self=="object"?self:f.g,u.getGlobalContext=()=>typeof window<"u"?window:typeof self=="object"?self:f.g,u.extend=(...m)=>{const w=m[0];return Array.prototype.slice.call(m,1).forEach(function(k){for(const b in k)w[b]=k[b]}),w},u.containingFolder=m=>{if(m==="")return"/";if(!m)throw"Path not given!";return m.replace(/\/+/g,"/").replace(/[^\/]+\/?$/,"")},u.isFolder=m=>m.slice(-1)==="/",u.isDocument=m=>!(0,u.isFolder)(m),u.baseName=m=>{const w=m.split("/");return(0,u.isFolder)(m)?w[w.length-2]+"/":w[w.length-1]},u.cleanPath=m=>m.replace(/\/+/g,"/").split("/").map(encodeURIComponent).join("/").replace(/'/g,"%27"),u.bindAll=m=>{for(const w in this)typeof m[w]=="function"&&(m[w]=m[w].bind(m))},u.equal=(m,w,k=[])=>{let b;if(typeof m!=typeof w)return!1;if(typeof m=="number"||typeof m=="boolean"||typeof m=="string")return m===w;if(typeof m=="function")return m.toString()===w.toString();if(m instanceof ArrayBuffer&&w instanceof ArrayBuffer&&(m=new Uint8Array(m),w=new Uint8Array(w)),m instanceof Array){if(m.length!==w.length)return!1;for(let A=0,O=m.length;A<O;A++)if(!(0,u.equal)(m[A],w[A],k))return!1}else{for(b in m)if(m.hasOwnProperty(b)&&!(b in w))return!1;for(b in w){if(!w.hasOwnProperty(b))continue;if(!(b in m))return!1;let A;if(typeof w[b]=="object"){if(k.indexOf(w[b])>=0)continue;A=k.slice(),A.push(w[b])}if(!(0,u.equal)(m[b],w[b],A))return!1}}return!0},u.deepClone=m=>{if(m!==void 0){const w=JSON.parse(JSON.stringify(m));return g(m,w),w}},u.pathsFromRoot=m=>{const w=[m],k=m.replace(/\/$/,"").split("/");for(;k.length>1;)k.pop(),w.push(k.join("/")+"/");return w},u.localStorageAvailable=()=>{const m=(0,u.getGlobalContext)();if(!("localStorage"in m))return!1;try{return m.localStorage.setItem("rs-check","1"),m.localStorage.removeItem("rs-check"),!0}catch{return!1}},u.getJSONFromLocalStorage=m=>{const w=(0,u.getGlobalContext)();try{return JSON.parse(w.localStorage.getItem(m))}catch{}},u.shouldBeTreatedAsBinary=(m,w)=>!!(w&&w.match(/charset=binary/)||/[\x00-\x08\x0E-\x1F\uFFFD]/.test(m)),u.getTextFromArrayBuffer=(m,w)=>new Promise(k=>{if(typeof Blob>"u"||typeof FileReader>"u"){const b=Buffer.from(m);k(b.toString(w))}else{let b;const A=u.globalContext;if(A.BlobBuilder=A.BlobBuilder||A.WebKitBlobBuilder,A.BlobBuilder!==void 0){const F=new A.BlobBuilder;F.append(m),b=F.getBlob()}else b=new Blob([m]);const O=new FileReader;typeof O.addEventListener=="function"?O.addEventListener("loadend",function(F){k(F.target.result)}):O.onloadend=function(F){k(F.target.result)},O.readAsText(b,w)}}),u.toBase64=m=>{const w=(0,u.getGlobalContext)();return"btoa"in w?w.btoa(m):Buffer.from(m).toString("base64")}},600:function(l,u,f){var h=this&&this.__awaiter||function(z,H,Y,q){return new(Y||(Y=Promise))(function(C,U){function R(oe){try{ue(q.next(oe))}catch(se){U(se)}}function Q(oe){try{ue(q.throw(oe))}catch(se){U(se)}}function ue(oe){var se;oe.done?C(oe.value):(se=oe.value,se instanceof Y?se:new Y(function(ae){ae(se)})).then(R,Q)}ue((q=q.apply(z,H||[])).next())})},g=this&&this.__importDefault||function(z){return z&&z.__esModule?z:{default:z}};const m=g(f(275)),w=g(f(93)),k=g(f(503)),b=g(f(334)),A=f(746),O=f(368),F=f(684);let V;const I="remotestorage:wireclient",W={"draft-dejong-remotestorage-00":2,"draft-dejong-remotestorage-01":3,"draft-dejong-remotestorage-02":4,"https://www.w3.org/community/rww/wiki/read-write-web-00#simple":1};class B extends F.RemoteBase{constructor(H){if(super(H),this._revisionCache={},V=(0,A.localStorageAvailable)(),this.addEvents(["connected","not-connected"]),V){const Y=function(){const q=(0,A.getJSONFromLocalStorage)(I)||{},{userAddress:C,href:U,storageApi:R,token:Q,properties:ue}=q;return{userAddress:C,href:U,storageApi:R,token:Q,properties:ue}}();Y&&setTimeout(()=>{this.configure(Y)},0)}this.connected&&setTimeout(this._emit.bind(this),0,"connected")}get storageType(){if(this.storageApi){const H=this.storageApi.match(/draft-dejong-(remotestorage-\d\d)/);return H?H[1]:"2012.04"}}_request(H,Y,q,C,U,R,Q){return h(this,void 0,void 0,function*(){if(this.isForbiddenRequestMethod(H,Y))return Promise.reject(`Don't use ${H} on directories!`);let ue;return q!==m.default.IMPLIED_FAKE_TOKEN&&(C.Authorization="Bearer "+q),this.rs._emit("wire-busy",{method:H,isFolder:(0,A.isFolder)(Y)}),(0,O.requestWithTimeout)(H,Y,{body:U,headers:C,responseType:"arraybuffer"}).then(oe=>{if(this.online||(this.online=!0,this.rs._emit("network-online")),this.rs._emit("wire-done",{method:H,isFolder:(0,A.isFolder)(Y),success:!0}),se=oe.status,[401,403,404,412].indexOf(se)>=0)return(0,b.default)("[WireClient] Error response status",oe.status),ue=R?this.stripQuotes(oe.getResponseHeader("ETag")):void 0,oe.status===401&&this.rs._emit("error",new k.default),Promise.resolve({statusCode:oe.status,revision:ue});if(function(ae){return[201,204,304].indexOf(ae)>=0}(oe.status)||oe.status===200&&H!=="GET")return ue=this.stripQuotes(oe.getResponseHeader("ETag")),(0,b.default)("[WireClient] Successful request",ue),Promise.resolve({statusCode:oe.status,revision:ue});{const ae=oe.getResponseHeader("Content-Type");ue=R?this.stripQuotes(oe.getResponseHeader("ETag")):oe.status===200?Q:void 0;const K=function(_){let x,M="utf-8";return _&&(x=_.match(/charset=(.+)$/),x&&(M=x[1])),M}(ae);return(0,A.shouldBeTreatedAsBinary)(oe.response,ae)?((0,b.default)("[WireClient] Successful request with unknown or binary mime-type",ue),Promise.resolve({statusCode:oe.status,body:oe.response,contentType:ae,revision:ue})):(0,A.getTextFromArrayBuffer)(oe.response,K).then(_=>((0,b.default)("[WireClient] Successful request",ue),Promise.resolve({statusCode:oe.status,body:_,contentType:ae,revision:ue})))}var se},oe=>(this.online&&(this.online=!1,this.rs._emit("network-offline")),this.rs._emit("wire-done",{method:H,isFolder:(0,A.isFolder)(Y),success:!1}),Promise.reject(oe)))})}configure(H){if(typeof H!="object")throw new Error("WireClient configure settings parameter should be an object");if(H.userAddress!==void 0&&(this.userAddress=H.userAddress),H.href!==void 0&&(this.href=H.href),H.storageApi!==void 0&&(this.storageApi=H.storageApi),H.token!==void 0&&(this.token=H.token),H.properties!==void 0&&(this.properties=H.properties),typeof this.storageApi=="string"){const Y=W[this.storageApi]||5;this.supportsRevs=Y>=2}this.href&&this.token?(this.connected=!0,this.online=!0,this._emit("connected")):this.connected=!1,V&&(localStorage[I]=JSON.stringify({userAddress:this.userAddress,href:this.href,storageApi:this.storageApi,token:this.token,properties:this.properties}))}get(H,Y={}){if(!this.connected)return Promise.reject("not connected (path: "+H+")");const q={};return this.supportsRevs&&Y.ifNoneMatch&&(q["If-None-Match"]=this.addQuotes(Y.ifNoneMatch)),this._request("GET",this.href+(0,A.cleanPath)(H),this.token,q,void 0,this.supportsRevs,this._revisionCache[H]).then(C=>{if(!(0,A.isFolder)(H))return Promise.resolve(C);let U={};if(C.body!==void 0)try{C.body=JSON.parse(C.body)}catch{return Promise.reject("Folder description at "+this.href+(0,A.cleanPath)(H)+" is not JSON")}if(C.statusCode===200&&typeof C.body=="object"){if(Object.keys(C.body).length===0)C.statusCode=404;else if((R=C.body)["@context"]==="http://remotestorage.io/spec/folder-description"&&typeof R.items=="object"){for(const Q in C.body.items)this._revisionCache[H+Q]=C.body.items[Q].ETag;U=C.body.items}else Object.keys(C.body).forEach(Q=>{this._revisionCache[H+Q]=C.body[Q],U[Q]={ETag:C.body[Q]}});return C.body=U,Promise.resolve(C)}return Promise.resolve(C);var R})}put(H,Y,q,C={}){if(!this.connected)return Promise.reject("not connected (path: "+H+")");!q.match(/charset=/)&&(Y instanceof ArrayBuffer||(0,O.isArrayBufferView)(Y))&&(q+="; charset=binary");const U={"Content-Type":q};return this.supportsRevs&&(C.ifMatch&&(U["If-Match"]=this.addQuotes(C.ifMatch)),C.ifNoneMatch&&(U["If-None-Match"]=this.addQuotes(C.ifNoneMatch))),this._request("PUT",this.href+(0,A.cleanPath)(H),this.token,U,Y,this.supportsRevs)}delete(H,Y={}){if(!this.connected)throw new Error("not connected (path: "+H+")");Y||(Y={});const q={};return this.supportsRevs&&Y.ifMatch&&(q["If-Match"]=this.addQuotes(Y.ifMatch)),this._request("DELETE",this.href+(0,A.cleanPath)(H),this.token,q,void 0,this.supportsRevs)}static _rs_init(H){H.remote=new B(H),H.remote.online=!0}static _rs_supported(){return typeof fetch=="function"||typeof XMLHttpRequest=="function"}static _rs_cleanup(){V&&delete localStorage[I]}}(0,A.applyMixins)(B,[w.default]),l.exports=B},439:function(l,u){var f,h;f=function(){var g,m,w,k;Object.keys||(Object.keys=(g=Object.prototype.hasOwnProperty,m=!{toString:null}.propertyIsEnumerable("toString"),k=(w=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(_){if(typeof _!="object"&&typeof _!="function"||_===null)throw new TypeError("Object.keys called on non-object");var x=[];for(var M in _)g.call(_,M)&&x.push(M);if(m)for(var D=0;D<k;D++)g.call(_,w[D])&&x.push(w[D]);return x})),Object.create||(Object.create=function(){function _(){}return function(x){if(arguments.length!==1)throw new Error("Object.create implementation only accepts one parameter.");return _.prototype=x,new _}}()),Array.isArray||(Array.isArray=function(_){return Object.prototype.toString.call(_)==="[object Array]"}),Array.prototype.indexOf||(Array.prototype.indexOf=function(_){if(this===null)throw new TypeError;var x=Object(this),M=x.length>>>0;if(M===0)return-1;var D=0;if(arguments.length>1&&((D=Number(arguments[1]))!=D?D=0:D!==0&&D!==1/0&&D!==-1/0&&(D=(D>0||-1)*Math.floor(Math.abs(D)))),D>=M)return-1;for(var N=D>=0?D:Math.max(M-Math.abs(D),0);N<M;N++)if(N in x&&x[N]===_)return N;return-1}),Object.isFrozen||(Object.isFrozen=function(_){for(var x="tv4_test_frozen_key";_.hasOwnProperty(x);)x+=Math.random();try{return _[x]=!0,delete _[x],!1}catch{return!0}});var b={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},A={"*":!0};function O(_){return encodeURI(_).replace(/%25[0-9][0-9]/g,function(x){return"%"+x.substring(3)})}function F(_){var x="";b[_.charAt(0)]&&(x=_.charAt(0),_=_.substring(1));var M="",D="",N=!0,te=!1,X=!1;x==="+"?N=!1:x==="."?(D=".",M="."):x==="/"?(D="/",M="/"):x==="#"?(D="#",N=!1):x===";"?(D=";",M=";",te=!0,X=!0):x==="?"?(D="?",M="&",te=!0):x==="&"&&(D="&",M="&",te=!0);for(var re=[],pe=_.split(","),ke=[],Me={},je=0;je<pe.length;je++){var $e=pe[je],pt=null;if($e.indexOf(":")!==-1){var ln=$e.split(":");$e=ln[0],pt=parseInt(ln[1],10)}for(var Ot={};A[$e.charAt($e.length-1)];)Ot[$e.charAt($e.length-1)]=!0,$e=$e.substring(0,$e.length-1);var an={truncate:pt,name:$e,suffices:Ot};ke.push(an),Me[$e]=an,re.push($e)}var Eo=function(En){for(var en="",Ji=0,kn=0;kn<ke.length;kn++){var bt=ke[kn],Nt=En(bt.name);if(Nt==null||Array.isArray(Nt)&&Nt.length===0||typeof Nt=="object"&&Object.keys(Nt).length===0)Ji++;else if(en+=kn===Ji?D:M||",",Array.isArray(Nt)){te&&(en+=bt.name+"=");for(var hr=0;hr<Nt.length;hr++)hr>0&&(en+=bt.suffices["*"]&&M||",",bt.suffices["*"]&&te&&(en+=bt.name+"=")),en+=N?encodeURIComponent(Nt[hr]).replace(/!/g,"%21"):O(Nt[hr])}else if(typeof Nt=="object"){te&&!bt.suffices["*"]&&(en+=bt.name+"=");var fs=!0;for(var pr in Nt)fs||(en+=bt.suffices["*"]&&M||","),fs=!1,en+=N?encodeURIComponent(pr).replace(/!/g,"%21"):O(pr),en+=bt.suffices["*"]?"=":",",en+=N?encodeURIComponent(Nt[pr]).replace(/!/g,"%21"):O(Nt[pr])}else te&&(en+=bt.name,X&&Nt===""||(en+="=")),bt.truncate!=null&&(Nt=Nt.substring(0,bt.truncate)),en+=N?encodeURIComponent(Nt).replace(/!/g,"%21"):O(Nt)}return en};return Eo.varNames=re,{prefix:D,substitution:Eo}}function V(_){if(!(this instanceof V))return new V(_);for(var x=_.split("{"),M=[x.shift()],D=[],N=[],te=[];x.length>0;){var X=x.shift(),re=X.split("}")[0],pe=X.substring(re.length+1),ke=F(re);N.push(ke.substitution),D.push(ke.prefix),M.push(pe),te=te.concat(ke.substitution.varNames)}this.fill=function(Me){for(var je=M[0],$e=0;$e<N.length;$e++)je+=(0,N[$e])(Me),je+=M[$e+1];return je},this.varNames=te,this.template=_}V.prototype={toString:function(){return this.template},fillFromObject:function(_){return this.fill(function(x){return _[x]})}};var I=function(_,x,M,D,N){if(this.missing=[],this.missingMap={},this.formatValidators=_?Object.create(_.formatValidators):{},this.schemas=_?Object.create(_.schemas):{},this.collectMultiple=x,this.errors=[],this.handleError=x?this.collectError:this.returnError,D&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),N&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=M||U("en"),typeof this.errorReporter=="string")throw new Error("debug");if(this.definedKeywords={},_)for(var te in _.definedKeywords)this.definedKeywords[te]=_.definedKeywords[te].slice(0)};function W(_,x){if(_===x)return!0;if(_&&x&&typeof _=="object"&&typeof x=="object"){if(Array.isArray(_)!==Array.isArray(x))return!1;if(Array.isArray(_)){if(_.length!==x.length)return!1;for(var M=0;M<_.length;M++)if(!W(_[M],x[M]))return!1}else{var D;for(D in _)if(x[D]===void 0&&_[D]!==void 0)return!1;for(D in x)if(_[D]===void 0&&x[D]!==void 0)return!1;for(D in _)if(!W(_[D],x[D]))return!1}return!0}return!1}I.prototype.defineKeyword=function(_,x){this.definedKeywords[_]=this.definedKeywords[_]||[],this.definedKeywords[_].push(x)},I.prototype.createError=function(_,x,M,D,N,te,X){var re=new se(_,x,M,D,N);return re.message=this.errorReporter(re,te,X),re},I.prototype.returnError=function(_){return _},I.prototype.collectError=function(_){return _&&this.errors.push(_),null},I.prototype.prefixErrors=function(_,x,M){for(var D=_;D<this.errors.length;D++)this.errors[D]=this.errors[D].prefixWith(x,M);return this},I.prototype.banUnknownProperties=function(_,x){for(var M in this.unknownPropertyPaths){var D=this.createError(R.UNKNOWN_PROPERTY,{path:M},M,"",null,_,x),N=this.handleError(D);if(N)return N}return null},I.prototype.addFormat=function(_,x){if(typeof _=="object"){for(var M in _)this.addFormat(M,_[M]);return this}this.formatValidators[_]=x},I.prototype.resolveRefs=function(_,x){if(_.$ref!==void 0){if((x=x||{})[_.$ref])return this.createError(R.CIRCULAR_REFERENCE,{urls:Object.keys(x).join(", ")},"","",null,void 0,_);x[_.$ref]=!0,_=this.getSchema(_.$ref,x)}return _},I.prototype.getSchema=function(_,x){var M;if(this.schemas[_]!==void 0)return M=this.schemas[_],this.resolveRefs(M,x);var D=_,N="";if(_.indexOf("#")!==-1&&(N=_.substring(_.indexOf("#")+1),D=_.substring(0,_.indexOf("#"))),typeof this.schemas[D]=="object"){M=this.schemas[D];var te=decodeURIComponent(N);if(te==="")return this.resolveRefs(M,x);if(te.charAt(0)!=="/")return;for(var X=te.split("/").slice(1),re=0;re<X.length;re++){var pe=X[re].replace(/~1/g,"/").replace(/~0/g,"~");if(M[pe]===void 0){M=void 0;break}M=M[pe]}if(M!==void 0)return this.resolveRefs(M,x)}this.missing[D]===void 0&&(this.missing.push(D),this.missing[D]=D,this.missingMap[D]=D)},I.prototype.searchSchemas=function(_,x){if(Array.isArray(_))for(var M=0;M<_.length;M++)this.searchSchemas(_[M],x);else if(_&&typeof _=="object"){for(var D in typeof _.id=="string"&&function(te,X){if(X.substring(0,te.length)===te){var re=X.substring(te.length);if(X.length>0&&X.charAt(te.length-1)==="/"||re.charAt(0)==="#"||re.charAt(0)==="?")return!0}return!1}(x,_.id)&&this.schemas[_.id]===void 0&&(this.schemas[_.id]=_),_)if(D!=="enum"){if(typeof _[D]=="object")this.searchSchemas(_[D],x);else if(D==="$ref"){var N=q(_[D]);N&&this.schemas[N]===void 0&&this.missingMap[N]===void 0&&(this.missingMap[N]=N)}}}},I.prototype.addSchema=function(_,x){if(typeof _!="string"||x===void 0){if(typeof _!="object"||typeof _.id!="string")return;_=(x=_).id}_===q(_)+"#"&&(_=q(_)),this.schemas[_]=x,delete this.missingMap[_],C(x,_),this.searchSchemas(x,_)},I.prototype.getSchemaMap=function(){var _={};for(var x in this.schemas)_[x]=this.schemas[x];return _},I.prototype.getSchemaUris=function(_){var x=[];for(var M in this.schemas)_&&!_.test(M)||x.push(M);return x},I.prototype.getMissingUris=function(_){var x=[];for(var M in this.missingMap)_&&!_.test(M)||x.push(M);return x},I.prototype.dropSchemas=function(){this.schemas={},this.reset()},I.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},I.prototype.validateAll=function(_,x,M,D,N){var te;if(!(x=this.resolveRefs(x)))return null;if(x instanceof se)return this.errors.push(x),x;var X,re=this.errors.length,pe=null,ke=null;if(this.checkRecursive&&_&&typeof _=="object"){if(te=!this.scanned.length,_[this.validatedSchemasKey]){var Me=_[this.validatedSchemasKey].indexOf(x);if(Me!==-1)return this.errors=this.errors.concat(_[this.validationErrorsKey][Me]),null}if(Object.isFrozen(_)&&(X=this.scannedFrozen.indexOf(_))!==-1){var je=this.scannedFrozenSchemas[X].indexOf(x);if(je!==-1)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[X][je]),null}if(this.scanned.push(_),Object.isFrozen(_))X===-1&&(X=this.scannedFrozen.length,this.scannedFrozen.push(_),this.scannedFrozenSchemas.push([])),pe=this.scannedFrozenSchemas[X].length,this.scannedFrozenSchemas[X][pe]=x,this.scannedFrozenValidationErrors[X][pe]=[];else{if(!_[this.validatedSchemasKey])try{Object.defineProperty(_,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(_,this.validationErrorsKey,{value:[],configurable:!0})}catch{_[this.validatedSchemasKey]=[],_[this.validationErrorsKey]=[]}ke=_[this.validatedSchemasKey].length,_[this.validatedSchemasKey][ke]=x,_[this.validationErrorsKey][ke]=[]}}var $e=this.errors.length,pt=this.validateBasic(_,x,N)||this.validateNumeric(_,x,N)||this.validateString(_,x,N)||this.validateArray(_,x,N)||this.validateObject(_,x,N)||this.validateCombinations(_,x,N)||this.validateHypermedia(_,x,N)||this.validateFormat(_,x,N)||this.validateDefinedKeywords(_,x,N)||null;if(te){for(;this.scanned.length;)delete this.scanned.pop()[this.validatedSchemasKey];this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(pt||$e!==this.errors.length)for(;M&&M.length||D&&D.length;){var ln=M&&M.length?""+M.pop():null,Ot=D&&D.length?""+D.pop():null;pt&&(pt=pt.prefixWith(ln,Ot)),this.prefixErrors($e,ln,Ot)}return pe!==null?this.scannedFrozenValidationErrors[X][pe]=this.errors.slice(re):ke!==null&&(_[this.validationErrorsKey][ke]=this.errors.slice(re)),this.handleError(pt)},I.prototype.validateFormat=function(_,x){if(typeof x.format!="string"||!this.formatValidators[x.format])return null;var M=this.formatValidators[x.format].call(null,_,x);return typeof M=="string"||typeof M=="number"?this.createError(R.FORMAT_CUSTOM,{message:M},"","/format",null,_,x):M&&typeof M=="object"?this.createError(R.FORMAT_CUSTOM,{message:M.message||"?"},M.dataPath||"",M.schemaPath||"/format",null,_,x):null},I.prototype.validateDefinedKeywords=function(_,x,M){for(var D in this.definedKeywords)if(x[D]!==void 0)for(var N=this.definedKeywords[D],te=0;te<N.length;te++){var X=(0,N[te])(_,x[D],x,M);if(typeof X=="string"||typeof X=="number")return this.createError(R.KEYWORD_CUSTOM,{key:D,message:X},"","",null,_,x).prefixWith(null,D);if(X&&typeof X=="object"){var re=X.code;if(typeof re=="string"){if(!R[re])throw new Error("Undefined error code (use defineError): "+re);re=R[re]}else typeof re!="number"&&(re=R.KEYWORD_CUSTOM);var pe=typeof X.message=="object"?X.message:{key:D,message:X.message||"?"},ke=X.schemaPath||"/"+D.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(re,pe,X.dataPath||null,ke,null,_,x)}}return null},I.prototype.validateBasic=function(_,x,M){var D;return(D=this.validateType(_,x,M))||(D=this.validateEnum(_,x,M))?D.prefixWith(null,"type"):null},I.prototype.validateType=function(_,x){if(x.type===void 0)return null;var M=typeof _;_===null?M="null":Array.isArray(_)&&(M="array");var D=x.type;Array.isArray(D)||(D=[D]);for(var N=0;N<D.length;N++){var te=D[N];if(te===M||te==="integer"&&M==="number"&&_%1==0)return null}return this.createError(R.INVALID_TYPE,{type:M,expected:D.join("/")},"","",null,_,x)},I.prototype.validateEnum=function(_,x){if(x.enum===void 0)return null;for(var M=0;M<x.enum.length;M++)if(W(_,x.enum[M]))return null;return this.createError(R.ENUM_MISMATCH,{value:typeof JSON<"u"?JSON.stringify(_):_},"","",null,_,x)},I.prototype.validateNumeric=function(_,x,M){return this.validateMultipleOf(_,x,M)||this.validateMinMax(_,x,M)||this.validateNaN(_,x,M)||null};var B=Math.pow(2,-51),z=1-B;function H(_){var x=String(_).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return x?{href:x[0]||"",protocol:x[1]||"",authority:x[2]||"",host:x[3]||"",hostname:x[4]||"",port:x[5]||"",pathname:x[6]||"",search:x[7]||"",hash:x[8]||""}:null}function Y(_,x){return x=H(x||""),_=H(_||""),x&&_?(x.protocol||_.protocol)+(x.protocol||x.authority?x.authority:_.authority)+(M=x.protocol||x.authority||x.pathname.charAt(0)==="/"?x.pathname:x.pathname?(_.authority&&!_.pathname?"/":"")+_.pathname.slice(0,_.pathname.lastIndexOf("/")+1)+x.pathname:_.pathname,D=[],M.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(N){N==="/.."?D.pop():D.push(N)}),D.join("").replace(/^\//,M.charAt(0)==="/"?"/":""))+(x.protocol||x.authority||x.pathname?x.search:x.search||_.search)+x.hash:null;var M,D}function q(_){return _.split("#")[0]}function C(_,x){if(_&&typeof _=="object")if(x===void 0?x=_.id:typeof _.id=="string"&&(x=Y(x,_.id),_.id=x),Array.isArray(_))for(var M=0;M<_.length;M++)C(_[M],x);else for(var D in typeof _.$ref=="string"&&(_.$ref=Y(x,_.$ref)),_)D!=="enum"&&C(_[D],x)}function U(_){var x=ae[_=_||"en"];return function(M){var D=x[M.code]||oe[M.code];if(typeof D!="string")return"Unknown error code "+M.code+": "+JSON.stringify(M.messageParams);var N=M.params;return D.replace(/\{([^{}]*)\}/g,function(te,X){var re=N[X];return typeof re=="string"||typeof re=="number"?re:te})}}I.prototype.validateMultipleOf=function(_,x){var M=x.multipleOf||x.divisibleBy;if(M===void 0)return null;if(typeof _=="number"){var D=_/M%1;if(D>=B&&D<z)return this.createError(R.NUMBER_MULTIPLE_OF,{value:_,multipleOf:M},"","",null,_,x)}return null},I.prototype.validateMinMax=function(_,x){if(typeof _!="number")return null;if(x.minimum!==void 0){if(_<x.minimum)return this.createError(R.NUMBER_MINIMUM,{value:_,minimum:x.minimum},"","/minimum",null,_,x);if(x.exclusiveMinimum&&_===x.minimum)return this.createError(R.NUMBER_MINIMUM_EXCLUSIVE,{value:_,minimum:x.minimum},"","/exclusiveMinimum",null,_,x)}if(x.maximum!==void 0){if(_>x.maximum)return this.createError(R.NUMBER_MAXIMUM,{value:_,maximum:x.maximum},"","/maximum",null,_,x);if(x.exclusiveMaximum&&_===x.maximum)return this.createError(R.NUMBER_MAXIMUM_EXCLUSIVE,{value:_,maximum:x.maximum},"","/exclusiveMaximum",null,_,x)}return null},I.prototype.validateNaN=function(_,x){return typeof _!="number"?null:isNaN(_)===!0||_===1/0||_===-1/0?this.createError(R.NUMBER_NOT_A_NUMBER,{value:_},"","/type",null,_,x):null},I.prototype.validateString=function(_,x,M){return this.validateStringLength(_,x,M)||this.validateStringPattern(_,x,M)||null},I.prototype.validateStringLength=function(_,x){return typeof _!="string"?null:x.minLength!==void 0&&_.length<x.minLength?this.createError(R.STRING_LENGTH_SHORT,{length:_.length,minimum:x.minLength},"","/minLength",null,_,x):x.maxLength!==void 0&&_.length>x.maxLength?this.createError(R.STRING_LENGTH_LONG,{length:_.length,maximum:x.maxLength},"","/maxLength",null,_,x):null},I.prototype.validateStringPattern=function(_,x){if(typeof _!="string"||typeof x.pattern!="string"&&!(x.pattern instanceof RegExp))return null;var M;if(x.pattern instanceof RegExp)M=x.pattern;else{var D,N="",te=x.pattern.match(/^\/(.+)\/([img]*)$/);te?(D=te[1],N=te[2]):D=x.pattern,M=new RegExp(D,N)}return M.test(_)?null:this.createError(R.STRING_PATTERN,{pattern:x.pattern},"","/pattern",null,_,x)},I.prototype.validateArray=function(_,x,M){return Array.isArray(_)&&(this.validateArrayLength(_,x,M)||this.validateArrayUniqueItems(_,x,M)||this.validateArrayItems(_,x,M))||null},I.prototype.validateArrayLength=function(_,x){var M;return x.minItems!==void 0&&_.length<x.minItems&&(M=this.createError(R.ARRAY_LENGTH_SHORT,{length:_.length,minimum:x.minItems},"","/minItems",null,_,x),this.handleError(M))||x.maxItems!==void 0&&_.length>x.maxItems&&(M=this.createError(R.ARRAY_LENGTH_LONG,{length:_.length,maximum:x.maxItems},"","/maxItems",null,_,x),this.handleError(M))?M:null},I.prototype.validateArrayUniqueItems=function(_,x){if(x.uniqueItems){for(var M=0;M<_.length;M++)for(var D=M+1;D<_.length;D++)if(W(_[M],_[D])){var N=this.createError(R.ARRAY_UNIQUE,{match1:M,match2:D},"","/uniqueItems",null,_,x);if(this.handleError(N))return N}}return null},I.prototype.validateArrayItems=function(_,x,M){if(x.items===void 0)return null;var D,N;if(Array.isArray(x.items)){for(N=0;N<_.length;N++)if(N<x.items.length){if(D=this.validateAll(_[N],x.items[N],[N],["items",N],M+"/"+N))return D}else if(x.additionalItems!==void 0){if(typeof x.additionalItems=="boolean"){if(!x.additionalItems&&(D=this.createError(R.ARRAY_ADDITIONAL_ITEMS,{},"/"+N,"/additionalItems",null,_,x),this.handleError(D)))return D}else if(D=this.validateAll(_[N],x.additionalItems,[N],["additionalItems"],M+"/"+N))return D}}else for(N=0;N<_.length;N++)if(D=this.validateAll(_[N],x.items,[N],["items"],M+"/"+N))return D;return null},I.prototype.validateObject=function(_,x,M){return typeof _!="object"||_===null||Array.isArray(_)?null:this.validateObjectMinMaxProperties(_,x,M)||this.validateObjectRequiredProperties(_,x,M)||this.validateObjectProperties(_,x,M)||this.validateObjectDependencies(_,x,M)||null},I.prototype.validateObjectMinMaxProperties=function(_,x){var M,D=Object.keys(_);return x.minProperties!==void 0&&D.length<x.minProperties&&(M=this.createError(R.OBJECT_PROPERTIES_MINIMUM,{propertyCount:D.length,minimum:x.minProperties},"","/minProperties",null,_,x),this.handleError(M))||x.maxProperties!==void 0&&D.length>x.maxProperties&&(M=this.createError(R.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:D.length,maximum:x.maxProperties},"","/maxProperties",null,_,x),this.handleError(M))?M:null},I.prototype.validateObjectRequiredProperties=function(_,x){if(x.required!==void 0)for(var M=0;M<x.required.length;M++){var D=x.required[M];if(_[D]===void 0){var N=this.createError(R.OBJECT_REQUIRED,{key:D},"","/required/"+M,null,_,x);if(this.handleError(N))return N}}return null},I.prototype.validateObjectProperties=function(_,x,M){var D;for(var N in _){var te=M+"/"+N.replace(/~/g,"~0").replace(/\//g,"~1"),X=!1;if(x.properties!==void 0&&x.properties[N]!==void 0&&(X=!0,D=this.validateAll(_[N],x.properties[N],[N],["properties",N],te)))return D;if(x.patternProperties!==void 0){for(var re in x.patternProperties)if(new RegExp(re).test(N)&&(X=!0,D=this.validateAll(_[N],x.patternProperties[re],[N],["patternProperties",re],te)))return D}if(X)this.trackUnknownProperties&&(this.knownPropertyPaths[te]=!0,delete this.unknownPropertyPaths[te]);else if(x.additionalProperties!==void 0){if(this.trackUnknownProperties&&(this.knownPropertyPaths[te]=!0,delete this.unknownPropertyPaths[te]),typeof x.additionalProperties=="boolean"){if(!x.additionalProperties&&(D=this.createError(R.OBJECT_ADDITIONAL_PROPERTIES,{key:N},"","/additionalProperties",null,_,x).prefixWith(N,null),this.handleError(D)))return D}else if(D=this.validateAll(_[N],x.additionalProperties,[N],["additionalProperties"],te))return D}else this.trackUnknownProperties&&!this.knownPropertyPaths[te]&&(this.unknownPropertyPaths[te]=!0)}return null},I.prototype.validateObjectDependencies=function(_,x,M){var D;if(x.dependencies!==void 0){for(var N in x.dependencies)if(_[N]!==void 0){var te=x.dependencies[N];if(typeof te=="string"){if(_[te]===void 0&&(D=this.createError(R.OBJECT_DEPENDENCY_KEY,{key:N,missing:te},"","",null,_,x).prefixWith(null,N).prefixWith(null,"dependencies"),this.handleError(D)))return D}else if(Array.isArray(te))for(var X=0;X<te.length;X++){var re=te[X];if(_[re]===void 0&&(D=this.createError(R.OBJECT_DEPENDENCY_KEY,{key:N,missing:re},"","/"+X,null,_,x).prefixWith(null,N).prefixWith(null,"dependencies"),this.handleError(D)))return D}else if(D=this.validateAll(_,te,[],["dependencies",N],M))return D}}return null},I.prototype.validateCombinations=function(_,x,M){return this.validateAllOf(_,x,M)||this.validateAnyOf(_,x,M)||this.validateOneOf(_,x,M)||this.validateNot(_,x,M)||null},I.prototype.validateAllOf=function(_,x,M){if(x.allOf===void 0)return null;for(var D,N=0;N<x.allOf.length;N++){var te=x.allOf[N];if(D=this.validateAll(_,te,[],["allOf",N],M))return D}return null},I.prototype.validateAnyOf=function(_,x,M){if(x.anyOf===void 0)return null;var D,N,te=[],X=this.errors.length;this.trackUnknownProperties&&(D=this.unknownPropertyPaths,N=this.knownPropertyPaths);for(var re=!0,pe=0;pe<x.anyOf.length;pe++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var ke=x.anyOf[pe],Me=this.errors.length,je=this.validateAll(_,ke,[],["anyOf",pe],M);if(je===null&&Me===this.errors.length){if(this.errors=this.errors.slice(0,X),this.trackUnknownProperties){for(var $e in this.knownPropertyPaths)N[$e]=!0,delete D[$e];for(var pt in this.unknownPropertyPaths)N[pt]||(D[pt]=!0);re=!1;continue}return null}je&&te.push(je.prefixWith(null,""+pe).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=D,this.knownPropertyPaths=N),re?(te=te.concat(this.errors.slice(X)),this.errors=this.errors.slice(0,X),this.createError(R.ANY_OF_MISSING,{},"","/anyOf",te,_,x)):void 0},I.prototype.validateOneOf=function(_,x,M){if(x.oneOf===void 0)return null;var D,N,te=null,X=[],re=this.errors.length;this.trackUnknownProperties&&(D=this.unknownPropertyPaths,N=this.knownPropertyPaths);for(var pe=0;pe<x.oneOf.length;pe++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var ke=x.oneOf[pe],Me=this.errors.length,je=this.validateAll(_,ke,[],["oneOf",pe],M);if(je===null&&Me===this.errors.length){if(te!==null)return this.errors=this.errors.slice(0,re),this.createError(R.ONE_OF_MULTIPLE,{index1:te,index2:pe},"","/oneOf",null,_,x);if(te=pe,this.trackUnknownProperties){for(var $e in this.knownPropertyPaths)N[$e]=!0,delete D[$e];for(var pt in this.unknownPropertyPaths)N[pt]||(D[pt]=!0)}}else je&&X.push(je)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=D,this.knownPropertyPaths=N),te===null?(X=X.concat(this.errors.slice(re)),this.errors=this.errors.slice(0,re),this.createError(R.ONE_OF_MISSING,{},"","/oneOf",X,_,x)):(this.errors=this.errors.slice(0,re),null)},I.prototype.validateNot=function(_,x,M){if(x.not===void 0)return null;var D,N,te=this.errors.length;this.trackUnknownProperties&&(D=this.unknownPropertyPaths,N=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var X=this.validateAll(_,x.not,null,null,M),re=this.errors.slice(te);return this.errors=this.errors.slice(0,te),this.trackUnknownProperties&&(this.unknownPropertyPaths=D,this.knownPropertyPaths=N),X===null&&re.length===0?this.createError(R.NOT_PASSED,{},"","/not",null,_,x):null},I.prototype.validateHypermedia=function(_,x,M){if(!x.links)return null;for(var D,N=0;N<x.links.length;N++){var te=x.links[N];if(te.rel==="describedby"){for(var X=new V(te.href),re=!0,pe=0;pe<X.varNames.length;pe++)if(!(X.varNames[pe]in _)){re=!1;break}if(re){var ke={$ref:X.fillFromObject(_)};if(D=this.validateAll(_,ke,[],["links",N],M))return D}}}};var R={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},Q={};for(var ue in R)Q[R[ue]]=ue;var oe={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};function se(_,x,M,D,N){if(Error.call(this),_===void 0)throw new Error("No error code supplied: "+D);this.message="",this.params=x,this.code=_,this.dataPath=M||"",this.schemaPath=D||"",this.subErrors=N||null;var te=new Error(this.message);if(this.stack=te.stack||te.stacktrace,!this.stack)try{throw te}catch(X){this.stack=X.stack||X.stacktrace}}se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se.prototype.name="ValidationError",se.prototype.prefixWith=function(_,x){if(_!==null&&(_=_.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+_+this.dataPath),x!==null&&(x=x.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+x+this.schemaPath),this.subErrors!==null)for(var M=0;M<this.subErrors.length;M++)this.subErrors[M].prefixWith(_,x);return this};var ae={},K=function _(x){var M,D,N=new I,te={setErrorReporter:function(X){return typeof X=="string"?this.language(X):(D=X,!0)},addFormat:function(){N.addFormat.apply(N,arguments)},language:function(X){return X?(ae[X]||(X=X.split("-")[0]),!!ae[X]&&(M=X,X)):M},addLanguage:function(X,re){var pe;for(pe in R)re[pe]&&!re[R[pe]]&&(re[R[pe]]=re[pe]);var ke=X.split("-")[0];if(ae[ke])for(pe in ae[X]=Object.create(ae[ke]),re)ae[ke][pe]===void 0&&(ae[ke][pe]=re[pe]),ae[X][pe]=re[pe];else ae[X]=re,ae[ke]=re;return this},freshApi:function(X){var re=_();return X&&re.language(X),re},validate:function(X,re,pe,ke){var Me=U(M),je=D?function(ln,Ot,an){return D(ln,Ot,an)||Me(ln,Ot,an)}:Me,$e=new I(N,!1,je,pe,ke);typeof re=="string"&&(re={$ref:re}),$e.addSchema("",re);var pt=$e.validateAll(X,re,null,null,"");return!pt&&ke&&(pt=$e.banUnknownProperties(X,re)),this.error=pt,this.missing=$e.missing,this.valid=pt===null,this.valid},validateResult:function(){var X={toString:function(){return this.valid?"valid":this.error.message}};return this.validate.apply(X,arguments),X},validateMultiple:function(X,re,pe,ke){var Me=U(M),je=D?function(ln,Ot,an){return D(ln,Ot,an)||Me(ln,Ot,an)}:Me,$e=new I(N,!0,je,pe,ke);typeof re=="string"&&(re={$ref:re}),$e.addSchema("",re),$e.validateAll(X,re,null,null,""),ke&&$e.banUnknownProperties(X,re);var pt={toString:function(){return this.valid?"valid":this.error.message}};return pt.errors=$e.errors,pt.missing=$e.missing,pt.valid=pt.errors.length===0,pt},addSchema:function(){return N.addSchema.apply(N,arguments)},getSchema:function(){return N.getSchema.apply(N,arguments)},getSchemaMap:function(){return N.getSchemaMap.apply(N,arguments)},getSchemaUris:function(){return N.getSchemaUris.apply(N,arguments)},getMissingUris:function(){return N.getMissingUris.apply(N,arguments)},dropSchemas:function(){N.dropSchemas.apply(N,arguments)},defineKeyword:function(){N.defineKeyword.apply(N,arguments)},defineError:function(X,re,pe){if(typeof X!="string"||!/^[A-Z]+(_[A-Z]+)*$/.test(X))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if(typeof re!="number"||re%1!=0||re<1e4)throw new Error("Code number must be an integer > 10000");if(R[X]!==void 0)throw new Error("Error already defined: "+X+" as "+R[X]);if(Q[re]!==void 0)throw new Error("Error code already used: "+Q[re]+" as "+re);for(var ke in R[X]=re,Q[re]=X,oe[X]=oe[re]=pe,ae){var Me=ae[ke];Me[X]&&(Me[re]=Me[re]||Me[X])}},reset:function(){N.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:C,resolveUrl:Y,getDocumentUri:q,errorCodes:R};return te.language("en"),te}();return K.addLanguage("en-gb",oe),K.tv4=K,K},(h=f.apply(u,[]))===void 0||(l.exports=h)},199:function(l,u,f){var h;typeof fetch!="function"&&typeof XMLHttpRequest!="function"&&(XMLHttpRequest=f(317)),function(g){var m={"http://webfist.org/spec/rel":"webfist","http://webfinger.net/rel/avatar":"avatar",remotestorage:"remotestorage","http://tools.ietf.org/id/draft-dejong-remotestorage":"remotestorage",remoteStorage:"remotestorage","http://www.packetizer.com/rel/share":"share","http://webfinger.net/rel/profile-page":"profile",me:"profile",vcard:"vcard",blog:"blog","http://packetizer.com/rel/blog":"blog","http://schemas.google.com/g/2010#updates-from":"updates","https://camlistore.org/rel/server":"camilstore"},w={avatar:[],remotestorage:[],blog:[],vcard:[],updates:[],share:[],profile:[],webfist:[],camlistore:[]},k=["webfinger","host-meta","host-meta.json"];function b(O){return O.toString=function(){return this.message},O}function A(O){typeof O!="object"&&(O={}),this.config={tls_only:O.tls_only===void 0||O.tls_only,webfist_fallback:O.webfist_fallback!==void 0&&O.webfist_fallback,uri_fallback:O.uri_fallback!==void 0&&O.uri_fallback,request_timeout:O.request_timeout!==void 0?O.request_timeout:1e4}}A.prototype.__fetchJRD=function(O,F,V){if(typeof fetch=="function")return this.__fetchJRD_fetch(O,F,V);if(typeof XMLHttpRequest=="function")return this.__fetchJRD_XHR(O,F,V);throw new Error("add a polyfill for fetch or XMLHttpRequest")},A.prototype.__fetchJRD_fetch=function(O,F,V){var I,W=this;typeof AbortController=="function"&&(I=new AbortController);var B=fetch(O,{headers:{Accept:"application/jrd+json, application/json"},signal:I?I.signal:void 0}).then(function(H){if(H.ok)return H.text();throw H.status===404?b({message:"resource not found",url:O,status:H.status}):b({message:"error during request",url:O,status:H.status})},function(H){throw b({message:"error during request",url:O,status:void 0,err:H})}).then(function(H){if(W.__isValidJSON(H))return H;throw b({message:"invalid json",url:O,status:void 0})}),z=new Promise(function(H,Y){setTimeout(function(){Y(b({message:"request timed out",url:O,status:void 0})),I&&I.abort()},W.config.request_timeout)});Promise.race([B,z]).then(function(H){V(H)}).catch(function(H){F(H)})},A.prototype.__fetchJRD_XHR=function(O,F,V){var I=this,W=!1,B=new XMLHttpRequest;function z(){if(!W)return W=!0,B.status===200?I.__isValidJSON(B.responseText)?V(B.responseText):F(b({message:"invalid json",url:O,status:B.status})):B.status===404?F(b({message:"resource not found",url:O,status:B.status})):B.status>=301&&B.status<=302?function(Y){return typeof Y=="string"&&Y.split("://")[0]==="https"}(B.getResponseHeader("Location"))?H():F(b({message:"no redirect URL found",url:O,status:B.status})):F(b({message:"error during request",url:O,status:B.status}))}function H(){B.onreadystatechange=function(){B.readyState===4&&z()},B.onload=function(){z()},B.ontimeout=function(){return F(b({message:"request timed out",url:O,status:B.status}))},B.open("GET",O,!0),B.timeout=I.config.request_timeout,B.setRequestHeader("Accept","application/jrd+json, application/json"),B.send()}return H()},A.prototype.__isValidJSON=function(O){try{JSON.parse(O)}catch{return!1}return!0},A.prototype.__isLocalhost=function(O){return/^localhost(\.localdomain)?(\:[0-9]+)?$/.test(O)},A.prototype.__processJRD=function(O,F,V,I){var W=JSON.parse(F);if(typeof W!="object"||typeof W.links!="object")return W.error!==void 0?V(b({message:W.error,request:O})):V(b({message:"unknown response from server",request:O}));var B=W.links;Array.isArray(B)||(B=[]);var z={object:W,json:F,idx:{}};z.idx.properties={name:void 0},z.idx.links=JSON.parse(JSON.stringify(w)),B.map(function(q,C){if(m.hasOwnProperty(q.rel)&&z.idx.links[m[q.rel]]){var U={};Object.keys(q).map(function(R,Q){U[R]=q[R]}),z.idx.links[m[q.rel]].push(U)}});var H=JSON.parse(F).properties;for(var Y in H)H.hasOwnProperty(Y)&&Y==="http://packetizer.com/ns/name"&&(z.idx.properties.name=H[Y]);return I(z)},A.prototype.lookup=function(O,F){if(typeof O!="string")throw new Error("first parameter must be a user address");if(typeof F!="function")throw new Error("second parameter must be a callback");var V=this,I="";I=O.indexOf("://")>-1?O.replace(/ /g,"").split("/")[2]:O.replace(/ /g,"").split("@")[1];var W=0,B="https";function z(){var q="";return O.split("://")[1]||(q="acct:"),B+"://"+I+"/.well-known/"+k[W]+"?resource="+q+O}function H(q){if(V.config.uri_fallback&&I!=="webfist.org"&&W!==k.length-1)return W+=1,Y();if(!V.config.tls_only&&B==="https")return W=0,B="http",Y();if(!V.config.webfist_fallback||I==="webfist.org")return F(q);W=0,B="http",I="webfist.org";var C=z();V.__fetchJRD(C,F,function(U){V.__processJRD(C,U,F,function(R){typeof R.idx.links.webfist=="object"&&typeof R.idx.links.webfist[0].href=="string"&&V.__fetchJRD(R.idx.links.webfist[0].href,F,function(Q){V.__processJRD(C,Q,F,function(ue){return F(null,F)})})})})}function Y(){var q=z();V.__fetchJRD(q,H,function(C){V.__processJRD(q,C,F,function(U){F(null,U)})})}return V.__isLocalhost(I)&&(B="http"),setTimeout(Y,0)},A.prototype.lookupLink=function(O,F,V){if(!w.hasOwnProperty(F))return V("unsupported rel "+F);this.lookup(O,function(I,W){var B=W.idx.links[F];return I?V(I):B.length===0?V('no links found with rel="'+F+'"'):V(null,B[0])})},(h=(function(){return A}).apply(u,[]))===void 0||(l.exports=h)}()},317:function(l){l.exports=XMLHttpRequest}},r={};function i(l){var u=r[l];if(u!==void 0)return u.exports;var f=r[l]={exports:{}};return t[l].call(f.exports,f,f.exports,i),f.exports}i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var o=i(423);return o.default}()})}(Pm)),Pm.exports}var g8=m8();const y8=Sp(g8),bp=new y8,v8=new h8(bp);v8.attach();bp.access.claim("milkynotes","rw");bp.caching.enable("/milkynotes/");const G4=bp.scope("/milkynotes/"),w8={notes:{},isRSLoggedIn:!1},ap={UPDATE_NOTE:"UPDATE_NOTE",UPDATE_RS_STATUS:"UPDATE_RS_STATUS"};function k8(n,e){(Array.isArray(e.payload)?e.payload:[e.payload]).forEach(r=>{n.notes[r.id]={...r,content:r.content.replaceAll(/<br\s*\/?>\s*/g,`
`)}}),e.isInit||G4.storeFile("application/json","notes.json",JSON.stringify(n.notes))}const x8=a8((n,e)=>{switch(e.type){case ap.UPDATE_NOTE:k8(n,e);break;case ap.UPDATE_RS_STATUS:n.isRSLoggedIn=e.payload;break;default:throw new Error(`unrecognized action type: ${e.type}`)}}),{Provider:S8,useTrackedState:b8,useUpdate:Q4}=YC(({reducer:n,initialState:e})=>Xe.useReducer(n,e));function _8({children:n}){return vo.jsx(S8,{reducer:x8,initialState:w8,children:n})}var Gr=(n=>(n.docTypeError="docTypeError",n.contextNotFound="contextNotFound",n.timerNotFound="timerNotFound",n.ctxCallOutOfScope="ctxCallOutOfScope",n.createNodeInParserFail="createNodeInParserFail",n.stackOverFlow="stackOverFlow",n.parserMatchError="parserMatchError",n.serializerMatchError="serializerMatchError",n.getAtomFromSchemaFail="getAtomFromSchemaFail",n.expectDomTypeError="expectDomTypeError",n.callCommandBeforeEditorView="callCommandBeforeEditorView",n.missingRootElement="missingRootElement",n.missingNodeInSchema="missingNodeInSchema",n.missingMarkInSchema="missingMarkInSchema",n.ctxNotBind="ctxNotBind",n.missingYjsDoc="missingYjsDoc",n))(Gr||{});class ki extends Error{constructor(e,t){super(t),this.name="MilkdownError",this.code=e}}const C8=(n,e)=>typeof e=="function"?"[Function]":e,zf=n=>JSON.stringify(n,C8);function E8(n){return new ki(Gr.docTypeError,`Doc type error, unsupported type: ${zf(n)}`)}function T8(n){return new ki(Gr.contextNotFound,`Context "${n}" not found, do you forget to inject it?`)}function M8(n){return new ki(Gr.timerNotFound,`Timer "${n}" not found, do you forget to record it?`)}function lv(){return new ki(Gr.ctxCallOutOfScope,"Should not call a context out of the plugin.")}function N8(...n){const e=n.reduce((t,r)=>{if(!r)return t;const i=o=>Array.isArray(o)?o.map(l=>i(l)).join(", "):o.toJSON?zf(o.toJSON()):o.spec?zf(o.spec):o.toString();return`${t}, ${i(r)}`},"Create prosemirror node from remark failed in parser");return new ki(Gr.createNodeInParserFail,e)}function Y4(){return new ki(Gr.stackOverFlow,"Stack over flow, cannot pop on an empty stack.")}function A8(n){return new ki(Gr.parserMatchError,`Cannot match target parser for node: ${zf(n)}.`)}function I8(n){return new ki(Gr.serializerMatchError,`Cannot match target serializer for node: ${zf(n)}.`)}function P8(n,e){return new ki(Gr.getAtomFromSchemaFail,`Cannot get ${n}: ${e} from schema.`)}function us(n){return new ki(Gr.expectDomTypeError,`Expect to be a dom, but get: ${zf(n)}.`)}function O8(){return new ki(Gr.callCommandBeforeEditorView,"You're trying to call a command before editor view initialized, make sure to get commandManager from ctx after editor view has been initialized")}function R8(n){return new ki(Gr.missingNodeInSchema,`Missing node in schema, milkdown cannot find "${n}" in schema.`)}function D8(n){return new ki(Gr.missingMarkInSchema,`Missing mark in schema, milkdown cannot find "${n}" in schema.`)}var X4=n=>{throw TypeError(n)},Z4=(n,e,t)=>e.has(n)||X4("Cannot "+t),Fe=(n,e,t)=>(Z4(n,e,"read from private field"),t?t.call(n):e.get(n)),sn=(n,e,t)=>e.has(n)?X4("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Et=(n,e,t,r)=>(Z4(n,e,"write to private field"),e.set(n,t),t),Zo,zl,Th,Om,Rm,Dm,pf,Mh,cu,Nh,Ah,Ih,Ll,Fl,zm,po,mf,fu,Ph,Bl,Oh,Lm;class ex{constructor(){this.sliceMap=new Map,this.get=e=>{const t=typeof e=="string"?[...this.sliceMap.values()].find(r=>r.type.name===e):this.sliceMap.get(e.id);if(!t){const r=typeof e=="string"?e:e.name;throw T8(r)}return t},this.remove=e=>{const t=typeof e=="string"?[...this.sliceMap.values()].find(r=>r.type.name===e):this.sliceMap.get(e.id);t&&this.sliceMap.delete(t.type.id)},this.has=e=>typeof e=="string"?[...this.sliceMap.values()].some(t=>t.type.name===e):this.sliceMap.has(e.id)}}let z8=class{constructor(e,t,r){sn(this,Zo),sn(this,zl),sn(this,Th),Et(this,Zo,[]),Et(this,Th,()=>{Fe(this,Zo).forEach(i=>i(Fe(this,zl)))}),this.set=i=>{Et(this,zl,i),Fe(this,Th).call(this)},this.get=()=>Fe(this,zl),this.update=i=>{Et(this,zl,i(Fe(this,zl))),Fe(this,Th).call(this)},this.type=r,Et(this,zl,t),e.set(r.id,this)}on(e){return Fe(this,Zo).push(e),()=>{Et(this,Zo,Fe(this,Zo).filter(t=>t!==e))}}once(e){const t=this.on(r=>{e(r),t()});return t}off(e){Et(this,Zo,Fe(this,Zo).filter(t=>t!==e))}offAll(){Et(this,Zo,[])}};Zo=new WeakMap;zl=new WeakMap;Th=new WeakMap;class L8{constructor(e,t){this.id=Symbol(`Context-${t}`),this.name=t,this._defaultValue=e,this._typeInfo=()=>{throw lv()}}create(e,t=this._defaultValue){return new z8(e,t,this)}}const St=(n,e)=>new L8(n,e);class F8{constructor(e,t,r){sn(this,Om),sn(this,Rm),sn(this,Dm),sn(this,pf),sn(this,Mh),sn(this,cu),sn(this,Nh),sn(this,Ah),sn(this,Ih),Et(this,pf,new Set),Et(this,Mh,new Set),Et(this,cu,new Map),Et(this,Nh,new Map),this.read=()=>({metadata:Fe(this,Om),injectedSlices:[...Fe(this,pf)].map(i=>({name:typeof i=="string"?i:i.name,value:Fe(this,Ah).call(this,i)})),consumedSlices:[...Fe(this,Mh)].map(i=>({name:typeof i=="string"?i:i.name,value:Fe(this,Ah).call(this,i)})),recordedTimers:[...Fe(this,cu)].map(([i,{duration:o}])=>({name:i.name,duration:o,status:Fe(this,Ih).call(this,i)})),waitTimers:[...Fe(this,Nh)].map(([i,{duration:o}])=>({name:i.name,duration:o,status:Fe(this,Ih).call(this,i)}))}),this.onRecord=i=>{Fe(this,cu).set(i,{start:Date.now(),duration:0})},this.onClear=i=>{Fe(this,cu).delete(i)},this.onDone=i=>{const o=Fe(this,cu).get(i);o&&(o.duration=Date.now()-o.start)},this.onWait=(i,o)=>{const l=Date.now();o.finally(()=>{Fe(this,Nh).set(i,{duration:Date.now()-l})})},this.onInject=i=>{Fe(this,pf).add(i)},this.onRemove=i=>{Fe(this,pf).delete(i)},this.onUse=i=>{Fe(this,Mh).add(i)},Et(this,Ah,i=>Fe(this,Rm).get(i).get()),Et(this,Ih,i=>Fe(this,Dm).get(i).status),Et(this,Rm,e),Et(this,Dm,t),Et(this,Om,r)}}Om=new WeakMap;Rm=new WeakMap;Dm=new WeakMap;pf=new WeakMap;Mh=new WeakMap;cu=new WeakMap;Nh=new WeakMap;Ah=new WeakMap;Ih=new WeakMap;const B8=class tx{constructor(e,t,r){sn(this,Ll),sn(this,Fl),sn(this,zm),sn(this,po),this.produce=i=>i&&Object.keys(i).length?new tx(Fe(this,Ll),Fe(this,Fl),{...i}):this,this.inject=(i,o)=>{var l;const u=i.create(Fe(this,Ll).sliceMap);return o!=null&&u.set(o),(l=Fe(this,po))==null||l.onInject(i),this},this.remove=i=>{var o;return Fe(this,Ll).remove(i),(o=Fe(this,po))==null||o.onRemove(i),this},this.record=i=>{var o;return i.create(Fe(this,Fl).store),(o=Fe(this,po))==null||o.onRecord(i),this},this.clearTimer=i=>{var o;return Fe(this,Fl).remove(i),(o=Fe(this,po))==null||o.onClear(i),this},this.isInjected=i=>Fe(this,Ll).has(i),this.isRecorded=i=>Fe(this,Fl).has(i),this.use=i=>{var o;return(o=Fe(this,po))==null||o.onUse(i),Fe(this,Ll).get(i)},this.get=i=>this.use(i).get(),this.set=(i,o)=>this.use(i).set(o),this.update=(i,o)=>this.use(i).update(o),this.timer=i=>Fe(this,Fl).get(i),this.done=i=>{var o;this.timer(i).done(),(o=Fe(this,po))==null||o.onDone(i)},this.wait=i=>{var o;const l=this.timer(i).start();return(o=Fe(this,po))==null||o.onWait(i,l),l},this.waitTimers=async i=>{await Promise.all(this.get(i).map(o=>this.wait(o)))},Et(this,Ll,e),Et(this,Fl,t),Et(this,zm,r),r&&Et(this,po,new F8(e,t,r))}get meta(){return Fe(this,zm)}get inspector(){return Fe(this,po)}};Ll=new WeakMap;Fl=new WeakMap;zm=new WeakMap;po=new WeakMap;let U8=B8;class W8{constructor(){this.store=new Map,this.get=e=>{const t=this.store.get(e.id);if(!t)throw M8(e.name);return t},this.remove=e=>{this.store.delete(e.id)},this.has=e=>this.store.has(e.id)}}class j8{constructor(e,t){sn(this,mf),sn(this,fu),sn(this,Ph),sn(this,Bl),sn(this,Oh),sn(this,Lm),Et(this,mf,null),Et(this,fu,null),Et(this,Bl,"pending"),this.start=()=>(Fe(this,mf)??Et(this,mf,new Promise((r,i)=>{Et(this,fu,o=>{o instanceof CustomEvent&&o.detail.id===Fe(this,Ph)&&(Et(this,Bl,"resolved"),Fe(this,Oh).call(this),o.stopImmediatePropagation(),r())}),Fe(this,Lm).call(this,()=>{Fe(this,Bl)==="pending"&&Et(this,Bl,"rejected"),Fe(this,Oh).call(this),i(new Error(`Timing ${this.type.name} timeout.`))}),Et(this,Bl,"pending"),addEventListener(this.type.name,Fe(this,fu))})),Fe(this,mf)),this.done=()=>{const r=new CustomEvent(this.type.name,{detail:{id:Fe(this,Ph)}});dispatchEvent(r)},Et(this,Oh,()=>{Fe(this,fu)&&removeEventListener(this.type.name,Fe(this,fu))}),Et(this,Lm,r=>{setTimeout(()=>{r()},this.type.timeout)}),Et(this,Ph,Symbol(t.name)),this.type=t,e.set(t.id,this)}get status(){return Fe(this,Bl)}}mf=new WeakMap;fu=new WeakMap;Ph=new WeakMap;Bl=new WeakMap;Oh=new WeakMap;Lm=new WeakMap;class $8{constructor(e,t=3e3){this.create=r=>new j8(r,this),this.id=Symbol(`Timer-${e}`),this.name=e,this.timeout=t}}const ia=(n,e=3e3)=>new $8(n,e);function Jn(n){this.content=n}Jn.prototype={constructor:Jn,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),o=r.content.slice();return i==-1?o.push(t||n,e):(o[i+1]=e,t&&(o[i]=t)),new Jn(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Jn(t)},addToStart:function(n,e){return new Jn([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Jn(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),o=r.find(n);return i.splice(o==-1?i.length:o,0,e,t),new Jn(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Jn.from(n),n.size?new Jn(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Jn.from(n),n.size?new Jn(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Jn.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Jn.from=function(n){if(n instanceof Jn)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Jn(e)};function nx(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),o=e.child(r);if(i==o){t+=i.nodeSize;continue}if(!i.sameMarkup(o))return t;if(i.isText&&i.text!=o.text){for(let l=0;i.text[l]==o.text[l];l++)t++;return t}if(i.content.size||o.content.size){let l=nx(i.content,o.content,t+1);if(l!=null)return l}t+=i.nodeSize}}function rx(n,e,t,r){for(let i=n.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:t,b:r};let l=n.child(--i),u=e.child(--o),f=l.nodeSize;if(l==u){t-=f,r-=f;continue}if(!l.sameMarkup(u))return{a:t,b:r};if(l.isText&&l.text!=u.text){let h=0,g=Math.min(l.text.length,u.text.length);for(;h<g&&l.text[l.text.length-h-1]==u.text[u.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(l.content.size||u.content.size){let h=rx(l.content,u.content,t-1,r-1);if(h)return h}t-=f,r-=f}}class _e{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,o){for(let l=0,u=0;u<t;l++){let f=this.content[l],h=u+f.nodeSize;if(h>e&&r(f,i+u,o||null,l)!==!1&&f.content.size){let g=u+1;f.nodesBetween(Math.max(0,e-g),Math.min(f.content.size,t-g),r,i+g)}u=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let o="",l=!0;return this.nodesBetween(e,t,(u,f)=>{let h=u.isText?u.text.slice(Math.max(e,f)-f,t-f):u.isLeaf?i?typeof i=="function"?i(u):i:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&h||u.isTextblock)&&r&&(l?l=!1:o+=r),o+=h},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new _e(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let o=0,l=0;l<t;o++){let u=this.content[o],f=l+u.nodeSize;f>e&&((l<e||f>t)&&(u.isText?u=u.cut(Math.max(0,e-l),Math.min(u.text.length,t-l)):u=u.cut(Math.max(0,e-l-1),Math.min(u.content.size,t-l-1))),r.push(u),i+=u.nodeSize),l=f}return new _e(r,i)}cutByIndex(e,t){return e==t?_e.empty:e==0&&t==this.content.length?this:new _e(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new _e(i,o)}addToStart(e){return new _e([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new _e(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return nx(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return rx(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Sm(0,e);if(e==this.size)return Sm(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),l=i+o.nodeSize;if(l>=e)return l==e||t>0?Sm(r+1,l):Sm(r,i);i=l}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return _e.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new _e(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return _e.empty;let t,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(t||(t=e.slice(0,i)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new _e(t||e,r)}static from(e){if(!e)return _e.empty;if(e instanceof _e)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new _e([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}_e.empty=new _e([],0);const vy={index:0,offset:0};function Sm(n,e){return vy.index=n,vy.offset=e,vy}function g1(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!g1(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!g1(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}class kt{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&g1(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return kt.none;if(e instanceof kt)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}}kt.none=[];class y1 extends Error{}class Ne{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=ox(this.content,e+this.openStart,t);return r&&new Ne(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Ne(ix(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Ne.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ne(_e.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)i++;return new Ne(e,r,i)}}Ne.empty=new Ne(_e.empty,0,0);function ix(n,e,t){let{index:r,offset:i}=n.findIndex(e),o=n.maybeChild(r),{index:l,offset:u}=n.findIndex(t);if(i==e||o.isText){if(u!=t&&!n.child(l).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=l)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(ix(o.content,e-i-1,t-i-1)))}function ox(n,e,t,r){let{index:i,offset:o}=n.findIndex(e),l=n.maybeChild(i);if(o==e||l.isText)return n.cut(0,e).append(t).append(n.cut(e));let u=ox(l.content,e-o-1,t);return u&&n.replaceChild(i,l.copy(u))}function H8(n,e,t){if(t.openStart>n.depth)throw new y1("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new y1("Inconsistent open depths");return sx(n,e,t,0)}function sx(n,e,t,r){let i=n.index(r),o=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let l=sx(n,e,t,r+1);return o.copy(o.content.replaceChild(i,l))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let l=n.parent,u=l.content;return ku(l,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:l,end:u}=V8(t,n);return ku(o,ax(n,l,u,e,r))}else return ku(o,v1(n,e,r))}function lx(n,e){if(!e.type.compatibleContent(n.type))throw new y1("Cannot join "+e.type.name+" onto "+n.type.name)}function g2(n,e,t){let r=n.node(t);return lx(r,e.node(t)),r}function wu(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Gh(n,e,t,r){let i=(e||n).node(t),o=0,l=e?e.index(t):i.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(wu(n.nodeAfter,r),o++));for(let u=o;u<l;u++)wu(i.child(u),r);e&&e.depth==t&&e.textOffset&&wu(e.nodeBefore,r)}function ku(n,e){return n.type.checkContent(e),n.copy(e)}function ax(n,e,t,r,i){let o=n.depth>i&&g2(n,e,i+1),l=r.depth>i&&g2(t,r,i+1),u=[];return Gh(null,n,i,u),o&&l&&e.index(i)==t.index(i)?(lx(o,l),wu(ku(o,ax(n,e,t,r,i+1)),u)):(o&&wu(ku(o,v1(n,e,i+1)),u),Gh(e,t,i,u),l&&wu(ku(l,v1(t,r,i+1)),u)),Gh(r,null,i,u),new _e(u)}function v1(n,e,t){let r=[];if(Gh(null,n,t,r),n.depth>t){let i=g2(n,e,t+1);wu(ku(i,v1(n,e,t+1)),r)}return Gh(e,null,t,r),new _e(r)}function V8(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)i=e.node(o).copy(_e.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class up{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return kt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let u=r;r=i,i=u}let o=r.marks;for(var l=0;l<o.length;l++)o[l].type.spec.inclusive===!1&&(!i||!o[l].isInSet(i.marks))&&(o=o[l--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new ux(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,o=t;for(let l=e;;){let{index:u,offset:f}=l.content.findIndex(o),h=o-f;if(r.push(l,u,i+f),!h||(l=l.child(u),l.isText))break;o=h-1,i+=f+1}return new up(t,r,o)}static resolveCached(e,t){let r=Ow.get(e);if(r)for(let o=0;o<r.elts.length;o++){let l=r.elts[o];if(l.pos==t)return l}else Ow.set(e,r=new q8);let i=r.elts[r.i]=up.resolve(e,t);return r.i=(r.i+1)%K8,i}}class q8{constructor(){this.elts=[],this.i=0}}const K8=12,Ow=new WeakMap;class ux{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const J8=Object.create(null);class wo{constructor(e,t,r,i=kt.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||_e.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&g1(this.attrs,t||e.defaultAttrs||J8)&&kt.sameSet(this.marks,r||kt.none)}copy(e=null){return e==this.content?this:new wo(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new wo(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return Ne.empty;let i=this.resolve(e),o=this.resolve(t),l=r?0:i.sharedDepth(t),u=i.start(l),h=i.node(l).content.cut(i.pos-u,o.pos-u);return new Ne(h,i.depth-l,o.depth-l)}replace(e,t,r){return H8(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return up.resolveCached(this,e)}resolveNoCache(e){return up.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),cx(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=_e.empty,i=0,o=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,i,o),u=l&&l.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let f=i;f<o;f++)if(!this.type.allowsMarks(r.child(f).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),l=o&&o.matchFragment(this.content,t);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=kt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!kt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=_e.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,i,r);return o.type.checkAttrs(o.attrs),o}}wo.prototype.text=void 0;class w1 extends wo{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):cx(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new w1(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new w1(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function cx(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Au{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new G8(e,t);if(r.next==null)return Au.empty;let i=fx(r);r.next&&r.err("Unexpected trailing text");let o=n7(t7(i));return r7(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let o=t;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function o(l,u){let f=l.matchFragment(e,r);if(f&&(!t||f.validEnd))return _e.from(u.map(h=>h.createAndFill()));for(let h=0;h<l.next.length;h++){let{type:g,next:m}=l.next[h];if(!(g.isText||g.hasRequiredAttrs())&&i.indexOf(m)==-1){i.push(m);let w=o(m,u.concat(g));if(w)return w}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let l=[];for(let u=i;u.type;u=u.via)l.push(u.type);return l.reverse()}for(let l=0;l<o.next.length;l++){let{type:u,next:f}=o.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!i.type||f.validEnd)&&(r.push({match:u.contentMatch,type:u,via:i}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)o+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return o}).join(`
`)}}Au.empty=new Au(!0);class G8{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function fx(n){let e=[];do e.push(Q8(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Q8(n){let e=[];do e.push(Y8(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Y8(n){let e=e7(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=X8(n,e);else break;return e}function Rw(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function X8(n,e){let t=Rw(n),r=t;return n.eat(",")&&(n.next!="}"?r=Rw(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function Z8(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let o in t){let l=t[o];l.isInGroup(e)&&i.push(l)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function e7(n){if(n.eat("(")){let e=fx(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=Z8(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function t7(n){let e=[[]];return i(o(n,0),t()),e;function t(){return e.push([])-1}function r(l,u,f){let h={term:f,to:u};return e[l].push(h),h}function i(l,u){l.forEach(f=>f.to=u)}function o(l,u){if(l.type=="choice")return l.exprs.reduce((f,h)=>f.concat(o(h,u)),[]);if(l.type=="seq")for(let f=0;;f++){let h=o(l.exprs[f],u);if(f==l.exprs.length-1)return h;i(h,u=t())}else if(l.type=="star"){let f=t();return r(u,f),i(o(l.expr,f),f),[r(f)]}else if(l.type=="plus"){let f=t();return i(o(l.expr,u),f),i(o(l.expr,f),f),[r(f)]}else{if(l.type=="opt")return[r(u)].concat(o(l.expr,u));if(l.type=="range"){let f=u;for(let h=0;h<l.min;h++){let g=t();i(o(l.expr,f),g),f=g}if(l.max==-1)i(o(l.expr,f),f);else for(let h=l.min;h<l.max;h++){let g=t();r(f,g),i(o(l.expr,f),g),f=g}return[r(f)]}else{if(l.type=="name")return[r(u,void 0,l.value)];throw new Error("Unknown expr type")}}}}function dx(n,e){return e-n}function Dw(n,e){let t=[];return r(e),t.sort(dx);function r(i){let o=n[i];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(i);for(let l=0;l<o.length;l++){let{term:u,to:f}=o[l];!u&&t.indexOf(f)==-1&&r(f)}}}function n7(n){let e=Object.create(null);return t(Dw(n,0));function t(r){let i=[];r.forEach(l=>{n[l].forEach(({term:u,to:f})=>{if(!u)return;let h;for(let g=0;g<i.length;g++)i[g][0]==u&&(h=i[g][1]);Dw(n,f).forEach(g=>{h||i.push([u,h=[]]),h.indexOf(g)==-1&&h.push(g)})})});let o=e[r.join(",")]=new Au(r.indexOf(n.length-1)>-1);for(let l=0;l<i.length;l++){let u=i[l][1].sort(dx);o.next.push({type:i[l][0],next:e[u.join(",")]||t(u)})}return o}}function r7(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],o=!i.validEnd,l=[];for(let u=0;u<i.next.length;u++){let{type:f,next:h}=i.next[u];l.push(f.name),o&&!(f.isText||f.hasRequiredAttrs())&&(o=!1),r.indexOf(h)==-1&&r.push(h)}o&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function hx(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function px(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let o=n[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function mx(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let o=n[i];o.validate&&o.validate(e[i])}}function gx(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new o7(n,r,e[r]);return t}let k1=class yx{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=gx(e,r.attrs),this.defaultAttrs=hx(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Au.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:px(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new wo(this,this.computeAttrs(e),_e.from(t),kt.setFrom(r))}createChecked(e=null,t,r){return t=_e.from(t),this.checkContent(t),new wo(this,this.computeAttrs(e),t,kt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=_e.from(t),t.size){let l=this.contentMatch.fillBefore(t);if(!l)return null;t=l.append(t)}let i=this.contentMatch.matchFragment(t),o=i&&i.fillBefore(_e.empty,!0);return o?new wo(this,e,t.append(o),kt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){mx(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:kt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,l)=>r[o]=new yx(o,t,l));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function i7(n,e,t){let r=t.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${o}`)}}class o7{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?i7(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class z1{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=gx(e,i.attrs),this.excluded=null;let o=hx(this.attrs);this.instance=o?new kt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new kt(this,px(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((o,l)=>r[o]=new z1(o,i++,t,l)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){mx(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class s7{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=Jn.from(e.nodes),t.marks=Jn.from(e.marks||{}),this.nodes=k1.compile(this.spec.nodes,this),this.marks=z1.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],l=o.spec.content||"",u=o.spec.marks;if(o.contentMatch=r[l]||(r[l]=Au.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=u=="_"?null:u?zw(this,u.split(" ")):u==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],l=o.spec.excludes;o.excluded=l==null?[o]:l==""?[]:zw(this,l.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof k1){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new w1(r,r.defaultAttrs,e,kt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return wo.fromJSON(this,e)}markFromJSON(e){return kt.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function zw(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],o=n.marks[i],l=o;if(o)t.push(o);else for(let u in n.marks){let f=n.marks[u];(i=="_"||f.spec.group&&f.spec.group.split(" ").indexOf(i)>-1)&&t.push(l=f)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function l7(n){return n.tag!=null}function a7(n){return n.style!=null}class Iu{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(l7(i))this.tags.push(i);else if(a7(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let r=new Fw(this,t,!1);return r.addAll(e,kt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Fw(this,t,!0);return r.addAll(e,kt.none,t.from,t.to),Ne.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(f7(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}matchStyle(e,t,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let l=this.styles[o],u=l.style;if(!(u.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(l.getAttrs){let f=l.getAttrs(t);if(f===!1)continue;l.attrs=f||void 0}return l}}}static schemaRules(e){let t=[];function r(i){let o=i.priority==null?50:i.priority,l=0;for(;l<t.length;l++){let u=t[l];if((u.priority==null?50:u.priority)<o)break}t.splice(l,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(l=>{r(l=Bw(l)),l.mark||l.ignore||l.clearMark||(l.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(l=>{r(l=Bw(l)),l.node||l.ignore||l.mark||(l.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Iu(e,Iu.schemaRules(e)))}}const vx={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},u7={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},wx={ol:!0,ul:!0},cp=1,y2=2,Fm=4;function Lw(n,e,t){return e!=null?(e?cp:0)|(e==="full"?y2:0):n&&n.whitespace=="pre"?cp|y2:t&-5}class bm{constructor(e,t,r,i,o,l){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=l,this.content=[],this.activeMarks=kt.none,this.match=o||(l&Fm?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(_e.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&cp)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let t=_e.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(_e.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!vx.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Fw{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,o,l=Lw(null,t.preserveWhitespace,0)|(r?Fm:0);i?o=new bm(i.type,i.attrs,kt.none,!0,t.topMatch||i.type.contentMatch,l):r?o=new bm(null,null,kt.none,!0,null,l):o=new bm(e.schema.topNodeType,null,kt.none,!0,null,l),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,o=i.options&y2?"full":this.localPreserveWS||(i.options&cp)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let l=i.content[i.content.length-1],u=e.previousSibling;(!l||u&&u.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),u;wx.hasOwnProperty(l)&&this.parser.normalizeLists&&c7(e);let f=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(f?f.ignore:u7.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,t);else if(!f||f.skip||f.closeParent){f&&f.closeParent?this.open=Math.max(0,this.open-1):f&&f.skip.nodeType&&(e=f.skip);let h,g=this.needsBlock;if(vx.hasOwnProperty(l))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),h=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let m=f&&f.skip?t:this.readStyles(e,t);m&&this.addAll(e,m),h&&this.sync(o),this.needsBlock=g}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,f,h,f.consuming===!1?u:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],l=r.getPropertyValue(o);if(l)for(let u=void 0;;){let f=this.parser.matchStyle(o,l,this,u);if(!f)break;if(f.ignore)return null;if(f.clearMark?t=t.filter(h=>!f.clearMark(h)):t=t.concat(this.parser.schema.marks[f.mark].create(f.attrs)),f.consuming===!1)u=f;else break}}return t}addElementByRule(e,t,r,i){let o,l;if(t.node)if(l=this.parser.schema.nodes[t.node],l.isLeaf)this.insertNode(l.create(t.attrs),r)||this.leafFallback(e,r);else{let f=this.enter(l,t.attrs||null,r,t.preserveWhitespace);f&&(o=!0,r=f)}else{let f=this.parser.schema.marks[t.mark];r=r.concat(f.create(t.attrs))}let u=this.top;if(l&&l.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(f=>this.insertNode(f,r));else{let f=e;typeof t.contentElement=="string"?f=e.querySelector(t.contentElement):typeof t.contentElement=="function"?f=t.contentElement(e):t.contentElement&&(f=t.contentElement),this.findAround(e,f,!0),this.addAll(f,r),this.findAround(e,f,!1)}o&&this.sync(u)&&this.open--}addAll(e,t,r,i){let o=r||0;for(let l=r?e.childNodes[r]:e.firstChild,u=i==null?null:e.childNodes[i];l!=u;l=l.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(l,t);this.findAtPoint(e,o)}findPlace(e,t){let r,i;for(let o=this.open;o>=0;o--){let l=this.nodes[o],u=l.findWrapping(e);if(u&&(!r||r.length>u.length)&&(r=u,i=l,!u.length)||l.solid)break}if(!r)return null;this.sync(i);for(let o=0;o<r.length;o++)t=this.enterInner(r[o],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(t=this.enterInner(i,null,t))}let r=this.findPlace(e,t);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=kt.none;for(let l of r.concat(e.marks))(i.type?i.type.allowsMarkType(l.type):Uw(l.type,e.type))&&(o=l.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,t,r,i){let o=this.findPlace(e.create(t),r);return o&&(o=this.enterInner(e,t,r,!0,i)),o}enterInner(e,t,r,i=!1,o){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let u=Lw(e,o,l.options);l.options&Fm&&l.content.length==0&&(u|=Fm);let f=kt.none;return r=r.filter(h=>(l.type?l.type.allowsMarkType(h.type):Uw(h.type,e))?(f=h.addToSet(f),!1):!0),this.nodes.push(new bm(e,t,f,i,null,u)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=cp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),l=(u,f)=>{for(;u>=0;u--){let h=t[u];if(h==""){if(u==t.length-1||u==0)continue;for(;f>=o;f--)if(l(u-1,f))return!0;return!1}else{let g=f>0||f==0&&i?this.nodes[f].type:r&&f>=o?r.node(f-o).type:null;if(!g||g.name!=h&&!g.isInGroup(h))return!1;f--}}return!0};return l(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function c7(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&wx.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function f7(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Bw(n){let e={};for(let t in n)e[t]=n[t];return e}function Uw(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let o=[],l=u=>{o.push(u);for(let f=0;f<u.edgeCount;f++){let{type:h,next:g}=u.edge(f);if(h==e||o.indexOf(g)<0&&l(g))return!0}};if(l(i.contentMatch))return!0}}class zu{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=wy(t).createDocumentFragment());let i=r,o=[];return e.forEach(l=>{if(o.length||l.marks.length){let u=0,f=0;for(;u<o.length&&f<l.marks.length;){let h=l.marks[f];if(!this.marks[h.type.name]){f++;continue}if(!h.eq(o[u][0])||h.type.spec.spanning===!1)break;u++,f++}for(;u<o.length;)i=o.pop()[1];for(;f<l.marks.length;){let h=l.marks[f++],g=this.serializeMark(h,l.isInline,t);g&&(o.push([h,i]),i.appendChild(g.dom),i=g.contentDOM||g.dom)}}i.appendChild(this.serializeNodeInner(l,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Bm(wy(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Bm(wy(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return Bm(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new zu(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Ww(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Ww(e.marks)}}function Ww(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function wy(n){return n.document||window.document}const jw=new WeakMap;function d7(n){let e=jw.get(n);return e===void 0&&jw.set(n,e=h7(n)),e}function h7(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function Bm(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=d7(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=i.indexOf(" ");l>0&&(t=i.slice(0,l),i=i.slice(l+1));let u,f=t?n.createElementNS(t,i):n.createElement(i),h=e[1],g=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){g=2;for(let m in h)if(h[m]!=null){let w=m.indexOf(" ");w>0?f.setAttributeNS(m.slice(0,w),m.slice(w+1),h[m]):f.setAttribute(m,h[m])}}for(let m=g;m<e.length;m++){let w=e[m];if(w===0){if(m<e.length-1||m>g)throw new RangeError("Content hole must be the only child of its parent node");return{dom:f,contentDOM:f}}else{let{dom:k,contentDOM:b}=Bm(n,w,t,r);if(f.appendChild(k),b){if(u)throw new RangeError("Multiple content holes");u=b}}}return{dom:f,contentDOM:u}}const p7={};function av(n,e){const t=p7,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return kx(n,r,i)}function kx(n,e,t){if(m7(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return $w(n.children,e,t)}return Array.isArray(n)?$w(n,e,t):""}function $w(n,e,t){const r=[];let i=-1;for(;++i<n.length;)r[i]=kx(n[i],e,t);return r.join("")}function m7(n){return!!(n&&typeof n=="object")}const Hw=document.createElement("i");function uv(n){const e="&"+n+";";Hw.innerHTML=e;const t=Hw.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function yi(n,e,t,r){const i=n.length;let o=0,l;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,t=t>0?t:0,r.length<1e4)l=Array.from(r),l.unshift(e,t),n.splice(...l);else for(t&&n.splice(e,t);o<r.length;)l=r.slice(o,o+1e4),l.unshift(e,0),n.splice(...l),o+=1e4,e+=1e4}function ji(n,e){return n.length>0?(yi(n,n.length,0,e),n):e}const Vw={}.hasOwnProperty;function xx(n){const e={};let t=-1;for(;++t<n.length;)g7(e,n[t]);return e}function g7(n,e){let t;for(t in e){const i=(Vw.call(n,t)?n[t]:void 0)||(n[t]={}),o=e[t];let l;if(o)for(l in o){Vw.call(i,l)||(i[l]=[]);const u=o[l];y7(i[l],Array.isArray(u)?u:u?[u]:[])}}}function y7(n,e){let t=-1;const r=[];for(;++t<e.length;)(e[t].add==="after"?n:r).push(e[t]);yi(n,0,0,r)}function Sx(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function ko(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const _r=oa(/[A-Za-z]/),qr=oa(/[\dA-Za-z]/),v7=oa(/[#-'*+\--9=?A-Z^-~]/);function x1(n){return n!==null&&(n<32||n===127)}const v2=oa(/\d/),w7=oa(/[\dA-Fa-f]/),k7=oa(/[!-/:-@[-`{-~]/);function qe(n){return n!==null&&n<-2}function Bt(n){return n!==null&&(n<0||n===32)}function ht(n){return n===-2||n===-1||n===32}const L1=oa(new RegExp("\\p{P}|\\p{S}","u")),Pu=oa(/\s/);function oa(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function xt(n,e,t,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return l;function l(f){return ht(f)?(n.enter(t),u(f)):e(f)}function u(f){return ht(f)&&o++<i?(n.consume(f),u):(n.exit(t),e(f))}}const x7={tokenize:S7};function S7(n){const e=n.attempt(this.parser.constructs.contentInitial,r,i);let t;return e;function r(u){if(u===null){n.consume(u);return}return n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),xt(n,e,"linePrefix")}function i(u){return n.enter("paragraph"),o(u)}function o(u){const f=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=f),t=f,l(u)}function l(u){if(u===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(u);return}return qe(u)?(n.consume(u),n.exit("chunkText"),o):(n.consume(u),l)}}const b7={tokenize:_7},qw={tokenize:C7};function _7(n){const e=this,t=[];let r=0,i,o,l;return u;function u(I){if(r<t.length){const W=t[r];return e.containerState=W[1],n.attempt(W[0].continuation,f,h)(I)}return h(I)}function f(I){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&V();const W=e.events.length;let B=W,z;for(;B--;)if(e.events[B][0]==="exit"&&e.events[B][1].type==="chunkFlow"){z=e.events[B][1].end;break}F(r);let H=W;for(;H<e.events.length;)e.events[H][1].end={...z},H++;return yi(e.events,B+1,0,e.events.slice(W)),e.events.length=H,h(I)}return u(I)}function h(I){if(r===t.length){if(!i)return w(I);if(i.currentConstruct&&i.currentConstruct.concrete)return b(I);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(qw,g,m)(I)}function g(I){return i&&V(),F(r),w(I)}function m(I){return e.parser.lazy[e.now().line]=r!==t.length,l=e.now().offset,b(I)}function w(I){return e.containerState={},n.attempt(qw,k,b)(I)}function k(I){return r++,t.push([e.currentConstruct,e.containerState]),w(I)}function b(I){if(I===null){i&&V(),F(0),n.consume(I);return}return i=i||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),A(I)}function A(I){if(I===null){O(n.exit("chunkFlow"),!0),F(0),n.consume(I);return}return qe(I)?(n.consume(I),O(n.exit("chunkFlow")),r=0,e.interrupt=void 0,u):(n.consume(I),A)}function O(I,W){const B=e.sliceStream(I);if(W&&B.push(null),I.previous=o,o&&(o.next=I),o=I,i.defineSkip(I.start),i.write(B),e.parser.lazy[I.start.line]){let z=i.events.length;for(;z--;)if(i.events[z][1].start.offset<l&&(!i.events[z][1].end||i.events[z][1].end.offset>l))return;const H=e.events.length;let Y=H,q,C;for(;Y--;)if(e.events[Y][0]==="exit"&&e.events[Y][1].type==="chunkFlow"){if(q){C=e.events[Y][1].end;break}q=!0}for(F(r),z=H;z<e.events.length;)e.events[z][1].end={...C},z++;yi(e.events,Y+1,0,e.events.slice(H)),e.events.length=z}}function F(I){let W=t.length;for(;W-- >I;){const B=t[W];e.containerState=B[1],B[0].exit.call(e,n)}t.length=I}function V(){i.write([null]),o=void 0,i=void 0,e.containerState._closeFlow=void 0}}function C7(n,e,t){return xt(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Lf(n){if(n===null||Bt(n)||Pu(n))return 1;if(L1(n))return 2}function F1(n,e,t){const r=[];let i=-1;for(;++i<n.length;){const o=n[i].resolveAll;o&&!r.includes(o)&&(e=o(e,t),r.push(o))}return e}const w2={name:"attention",resolveAll:E7,tokenize:T7};function E7(n,e){let t=-1,r,i,o,l,u,f,h,g;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(r=t;r--;)if(n[r][0]==="exit"&&n[r][1].type==="attentionSequence"&&n[r][1]._open&&e.sliceSerialize(n[r][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[r][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[r][1].end.offset-n[r][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;f=n[r][1].end.offset-n[r][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const m={...n[r][1].end},w={...n[t][1].start};Kw(m,-f),Kw(w,f),l={type:f>1?"strongSequence":"emphasisSequence",start:m,end:{...n[r][1].end}},u={type:f>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:w},o={type:f>1?"strongText":"emphasisText",start:{...n[r][1].end},end:{...n[t][1].start}},i={type:f>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},n[r][1].end={...l.start},n[t][1].start={...u.end},h=[],n[r][1].end.offset-n[r][1].start.offset&&(h=ji(h,[["enter",n[r][1],e],["exit",n[r][1],e]])),h=ji(h,[["enter",i,e],["enter",l,e],["exit",l,e],["enter",o,e]]),h=ji(h,F1(e.parser.constructs.insideSpan.null,n.slice(r+1,t),e)),h=ji(h,[["exit",o,e],["enter",u,e],["exit",u,e],["exit",i,e]]),n[t][1].end.offset-n[t][1].start.offset?(g=2,h=ji(h,[["enter",n[t][1],e],["exit",n[t][1],e]])):g=0,yi(n,r-1,t-r+3,h),t=r+h.length-g-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function T7(n,e){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Lf(r);let o;return l;function l(f){return o=f,n.enter("attentionSequence"),u(f)}function u(f){if(f===o)return n.consume(f),u;const h=n.exit("attentionSequence"),g=Lf(f),m=!g||g===2&&i||t.includes(f),w=!i||i===2&&g||t.includes(r);return h._open=!!(o===42?m:m&&(i||!w)),h._close=!!(o===42?w:w&&(g||!m)),e(f)}}function Kw(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const M7={name:"autolink",tokenize:N7};function N7(n,e,t){let r=0;return i;function i(k){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(k),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),o}function o(k){return _r(k)?(n.consume(k),l):k===64?t(k):h(k)}function l(k){return k===43||k===45||k===46||qr(k)?(r=1,u(k)):h(k)}function u(k){return k===58?(n.consume(k),r=0,f):(k===43||k===45||k===46||qr(k))&&r++<32?(n.consume(k),u):(r=0,h(k))}function f(k){return k===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(k),n.exit("autolinkMarker"),n.exit("autolink"),e):k===null||k===32||k===60||x1(k)?t(k):(n.consume(k),f)}function h(k){return k===64?(n.consume(k),g):v7(k)?(n.consume(k),h):t(k)}function g(k){return qr(k)?m(k):t(k)}function m(k){return k===46?(n.consume(k),r=0,g):k===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(k),n.exit("autolinkMarker"),n.exit("autolink"),e):w(k)}function w(k){if((k===45||qr(k))&&r++<63){const b=k===45?w:m;return n.consume(k),b}return t(k)}}const _p={partial:!0,tokenize:A7};function A7(n,e,t){return r;function r(o){return ht(o)?xt(n,i,"linePrefix")(o):i(o)}function i(o){return o===null||qe(o)?e(o):t(o)}}const bx={continuation:{tokenize:P7},exit:O7,name:"blockQuote",tokenize:I7};function I7(n,e,t){const r=this;return i;function i(l){if(l===62){const u=r.containerState;return u.open||(n.enter("blockQuote",{_container:!0}),u.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(l),n.exit("blockQuoteMarker"),o}return t(l)}function o(l){return ht(l)?(n.enter("blockQuotePrefixWhitespace"),n.consume(l),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(l))}}function P7(n,e,t){const r=this;return i;function i(l){return ht(l)?xt(n,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):o(l)}function o(l){return n.attempt(bx,e,t)(l)}}function O7(n){n.exit("blockQuote")}const _x={name:"characterEscape",tokenize:R7};function R7(n,e,t){return r;function r(o){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(o),n.exit("escapeMarker"),i}function i(o){return k7(o)?(n.enter("characterEscapeValue"),n.consume(o),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(o)}}const Cx={name:"characterReference",tokenize:D7};function D7(n,e,t){const r=this;let i=0,o,l;return u;function u(m){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(m),n.exit("characterReferenceMarker"),f}function f(m){return m===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(m),n.exit("characterReferenceMarkerNumeric"),h):(n.enter("characterReferenceValue"),o=31,l=qr,g(m))}function h(m){return m===88||m===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(m),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),o=6,l=w7,g):(n.enter("characterReferenceValue"),o=7,l=v2,g(m))}function g(m){if(m===59&&i){const w=n.exit("characterReferenceValue");return l===qr&&!uv(r.sliceSerialize(w))?t(m):(n.enter("characterReferenceMarker"),n.consume(m),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return l(m)&&i++<o?(n.consume(m),g):t(m)}}const Jw={partial:!0,tokenize:L7},Gw={concrete:!0,name:"codeFenced",tokenize:z7};function z7(n,e,t){const r=this,i={partial:!0,tokenize:B};let o=0,l=0,u;return f;function f(z){return h(z)}function h(z){const H=r.events[r.events.length-1];return o=H&&H[1].type==="linePrefix"?H[2].sliceSerialize(H[1],!0).length:0,u=z,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),g(z)}function g(z){return z===u?(l++,n.consume(z),g):l<3?t(z):(n.exit("codeFencedFenceSequence"),ht(z)?xt(n,m,"whitespace")(z):m(z))}function m(z){return z===null||qe(z)?(n.exit("codeFencedFence"),r.interrupt?e(z):n.check(Jw,A,W)(z)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),w(z))}function w(z){return z===null||qe(z)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),m(z)):ht(z)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),xt(n,k,"whitespace")(z)):z===96&&z===u?t(z):(n.consume(z),w)}function k(z){return z===null||qe(z)?m(z):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),b(z))}function b(z){return z===null||qe(z)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),m(z)):z===96&&z===u?t(z):(n.consume(z),b)}function A(z){return n.attempt(i,W,O)(z)}function O(z){return n.enter("lineEnding"),n.consume(z),n.exit("lineEnding"),F}function F(z){return o>0&&ht(z)?xt(n,V,"linePrefix",o+1)(z):V(z)}function V(z){return z===null||qe(z)?n.check(Jw,A,W)(z):(n.enter("codeFlowValue"),I(z))}function I(z){return z===null||qe(z)?(n.exit("codeFlowValue"),V(z)):(n.consume(z),I)}function W(z){return n.exit("codeFenced"),e(z)}function B(z,H,Y){let q=0;return C;function C(oe){return z.enter("lineEnding"),z.consume(oe),z.exit("lineEnding"),U}function U(oe){return z.enter("codeFencedFence"),ht(oe)?xt(z,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(oe):R(oe)}function R(oe){return oe===u?(z.enter("codeFencedFenceSequence"),Q(oe)):Y(oe)}function Q(oe){return oe===u?(q++,z.consume(oe),Q):q>=l?(z.exit("codeFencedFenceSequence"),ht(oe)?xt(z,ue,"whitespace")(oe):ue(oe)):Y(oe)}function ue(oe){return oe===null||qe(oe)?(z.exit("codeFencedFence"),H(oe)):Y(oe)}}}function L7(n,e,t){const r=this;return i;function i(l){return l===null?t(l):(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),o)}function o(l){return r.parser.lazy[r.now().line]?t(l):e(l)}}const ky={name:"codeIndented",tokenize:B7},F7={partial:!0,tokenize:U7};function B7(n,e,t){const r=this;return i;function i(h){return n.enter("codeIndented"),xt(n,o,"linePrefix",5)(h)}function o(h){const g=r.events[r.events.length-1];return g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?l(h):t(h)}function l(h){return h===null?f(h):qe(h)?n.attempt(F7,l,f)(h):(n.enter("codeFlowValue"),u(h))}function u(h){return h===null||qe(h)?(n.exit("codeFlowValue"),l(h)):(n.consume(h),u)}function f(h){return n.exit("codeIndented"),e(h)}}function U7(n,e,t){const r=this;return i;function i(l){return r.parser.lazy[r.now().line]?t(l):qe(l)?(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),i):xt(n,o,"linePrefix",5)(l)}function o(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):qe(l)?i(l):t(l)}}const W7={name:"codeText",previous:$7,resolve:j7,tokenize:H7};function j7(n){let e=n.length-4,t=3,r,i;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(r=t;++r<e;)if(n[r][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(r=t-1,e++;++r<=e;)i===void 0?r!==e&&n[r][1].type!=="lineEnding"&&(i=r):(r===e||n[r][1].type==="lineEnding")&&(n[i][1].type="codeTextData",r!==i+2&&(n[i][1].end=n[r-1][1].end,n.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return n}function $7(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function H7(n,e,t){let r=0,i,o;return l;function l(m){return n.enter("codeText"),n.enter("codeTextSequence"),u(m)}function u(m){return m===96?(n.consume(m),r++,u):(n.exit("codeTextSequence"),f(m))}function f(m){return m===null?t(m):m===32?(n.enter("space"),n.consume(m),n.exit("space"),f):m===96?(o=n.enter("codeTextSequence"),i=0,g(m)):qe(m)?(n.enter("lineEnding"),n.consume(m),n.exit("lineEnding"),f):(n.enter("codeTextData"),h(m))}function h(m){return m===null||m===32||m===96||qe(m)?(n.exit("codeTextData"),f(m)):(n.consume(m),h)}function g(m){return m===96?(n.consume(m),i++,g):i===r?(n.exit("codeTextSequence"),n.exit("codeText"),e(m)):(o.type="codeTextData",h(m))}}class V7{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const r=t??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,t,r){const i=t||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&bh(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),bh(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),bh(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);bh(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);bh(this.left,t.reverse())}}}function bh(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function Ex(n){const e={};let t=-1,r,i,o,l,u,f,h;const g=new V7(n);for(;++t<g.length;){for(;t in e;)t=e[t];if(r=g.get(t),t&&r[1].type==="chunkFlow"&&g.get(t-1)[1].type==="listItemPrefix"&&(f=r[1]._tokenizer.events,o=0,o<f.length&&f[o][1].type==="lineEndingBlank"&&(o+=2),o<f.length&&f[o][1].type==="content"))for(;++o<f.length&&f[o][1].type!=="content";)f[o][1].type==="chunkText"&&(f[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,q7(g,t)),t=e[t],h=!0);else if(r[1]._container){for(o=t,i=void 0;o--;)if(l=g.get(o),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(i&&(g.get(i)[1].type="lineEndingBlank"),l[1].type="lineEnding",i=o);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;i&&(r[1].end={...g.get(i)[1].start},u=g.slice(i,t),u.unshift(r),g.splice(i,t-i+1,u))}}return yi(n,0,Number.POSITIVE_INFINITY,g.slice(0)),!h}function q7(n,e){const t=n.get(e)[1],r=n.get(e)[2];let i=e-1;const o=[];let l=t._tokenizer;l||(l=r.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,f=[],h={};let g,m,w=-1,k=t,b=0,A=0;const O=[A];for(;k;){for(;n.get(++i)[1]!==k;);o.push(i),k._tokenizer||(g=r.sliceStream(k),k.next||g.push(null),m&&l.defineSkip(k.start),k._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(g),k._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),m=k,k=k.next}for(k=t;++w<u.length;)u[w][0]==="exit"&&u[w-1][0]==="enter"&&u[w][1].type===u[w-1][1].type&&u[w][1].start.line!==u[w][1].end.line&&(A=w+1,O.push(A),k._tokenizer=void 0,k.previous=void 0,k=k.next);for(l.events=[],k?(k._tokenizer=void 0,k.previous=void 0):O.pop(),w=O.length;w--;){const F=u.slice(O[w],O[w+1]),V=o.pop();f.push([V,V+F.length-1]),n.splice(V,2,F)}for(f.reverse(),w=-1;++w<f.length;)h[b+f[w][0]]=b+f[w][1],b+=f[w][1]-f[w][0]-1;return h}const K7={resolve:G7,tokenize:Q7},J7={partial:!0,tokenize:Y7};function G7(n){return Ex(n),n}function Q7(n,e){let t;return r;function r(u){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),i(u)}function i(u){return u===null?o(u):qe(u)?n.check(J7,l,o)(u):(n.consume(u),i)}function o(u){return n.exit("chunkContent"),n.exit("content"),e(u)}function l(u){return n.consume(u),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function Y7(n,e,t){const r=this;return i;function i(l){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),xt(n,o,"linePrefix")}function o(l){if(l===null||qe(l))return t(l);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(l):n.interrupt(r.parser.constructs.flow,t,e)(l)}}function Tx(n,e,t,r,i,o,l,u,f){const h=f||Number.POSITIVE_INFINITY;let g=0;return m;function m(F){return F===60?(n.enter(r),n.enter(i),n.enter(o),n.consume(F),n.exit(o),w):F===null||F===32||F===41||x1(F)?t(F):(n.enter(r),n.enter(l),n.enter(u),n.enter("chunkString",{contentType:"string"}),A(F))}function w(F){return F===62?(n.enter(o),n.consume(F),n.exit(o),n.exit(i),n.exit(r),e):(n.enter(u),n.enter("chunkString",{contentType:"string"}),k(F))}function k(F){return F===62?(n.exit("chunkString"),n.exit(u),w(F)):F===null||F===60||qe(F)?t(F):(n.consume(F),F===92?b:k)}function b(F){return F===60||F===62||F===92?(n.consume(F),k):k(F)}function A(F){return!g&&(F===null||F===41||Bt(F))?(n.exit("chunkString"),n.exit(u),n.exit(l),n.exit(r),e(F)):g<h&&F===40?(n.consume(F),g++,A):F===41?(n.consume(F),g--,A):F===null||F===32||F===40||x1(F)?t(F):(n.consume(F),F===92?O:A)}function O(F){return F===40||F===41||F===92?(n.consume(F),A):A(F)}}function Mx(n,e,t,r,i,o){const l=this;let u=0,f;return h;function h(k){return n.enter(r),n.enter(i),n.consume(k),n.exit(i),n.enter(o),g}function g(k){return u>999||k===null||k===91||k===93&&!f||k===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?t(k):k===93?(n.exit(o),n.enter(i),n.consume(k),n.exit(i),n.exit(r),e):qe(k)?(n.enter("lineEnding"),n.consume(k),n.exit("lineEnding"),g):(n.enter("chunkString",{contentType:"string"}),m(k))}function m(k){return k===null||k===91||k===93||qe(k)||u++>999?(n.exit("chunkString"),g(k)):(n.consume(k),f||(f=!ht(k)),k===92?w:m)}function w(k){return k===91||k===92||k===93?(n.consume(k),u++,m):m(k)}}function Nx(n,e,t,r,i,o){let l;return u;function u(w){return w===34||w===39||w===40?(n.enter(r),n.enter(i),n.consume(w),n.exit(i),l=w===40?41:w,f):t(w)}function f(w){return w===l?(n.enter(i),n.consume(w),n.exit(i),n.exit(r),e):(n.enter(o),h(w))}function h(w){return w===l?(n.exit(o),f(l)):w===null?t(w):qe(w)?(n.enter("lineEnding"),n.consume(w),n.exit("lineEnding"),xt(n,h,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),g(w))}function g(w){return w===l||w===null||qe(w)?(n.exit("chunkString"),h(w)):(n.consume(w),w===92?m:g)}function m(w){return w===l||w===92?(n.consume(w),g):g(w)}}function Qh(n,e){let t;return r;function r(i){return qe(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),t=!0,r):ht(i)?xt(n,r,t?"linePrefix":"lineSuffix")(i):e(i)}}const X7={name:"definition",tokenize:e9},Z7={partial:!0,tokenize:t9};function e9(n,e,t){const r=this;let i;return o;function o(k){return n.enter("definition"),l(k)}function l(k){return Mx.call(r,n,u,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(k)}function u(k){return i=ko(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),k===58?(n.enter("definitionMarker"),n.consume(k),n.exit("definitionMarker"),f):t(k)}function f(k){return Bt(k)?Qh(n,h)(k):h(k)}function h(k){return Tx(n,g,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(k)}function g(k){return n.attempt(Z7,m,m)(k)}function m(k){return ht(k)?xt(n,w,"whitespace")(k):w(k)}function w(k){return k===null||qe(k)?(n.exit("definition"),r.parser.defined.push(i),e(k)):t(k)}}function t9(n,e,t){return r;function r(u){return Bt(u)?Qh(n,i)(u):t(u)}function i(u){return Nx(n,o,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function o(u){return ht(u)?xt(n,l,"whitespace")(u):l(u)}function l(u){return u===null||qe(u)?e(u):t(u)}}const n9={name:"hardBreakEscape",tokenize:r9};function r9(n,e,t){return r;function r(o){return n.enter("hardBreakEscape"),n.consume(o),i}function i(o){return qe(o)?(n.exit("hardBreakEscape"),e(o)):t(o)}}const i9={name:"headingAtx",resolve:o9,tokenize:s9};function o9(n,e){let t=n.length-2,r=3,i,o;return n[r][1].type==="whitespace"&&(r+=2),t-2>r&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(r===t-1||t-4>r&&n[t-2][1].type==="whitespace")&&(t-=r+1===t?2:4),t>r&&(i={type:"atxHeadingText",start:n[r][1].start,end:n[t][1].end},o={type:"chunkText",start:n[r][1].start,end:n[t][1].end,contentType:"text"},yi(n,r,t-r+1,[["enter",i,e],["enter",o,e],["exit",o,e],["exit",i,e]])),n}function s9(n,e,t){let r=0;return i;function i(g){return n.enter("atxHeading"),o(g)}function o(g){return n.enter("atxHeadingSequence"),l(g)}function l(g){return g===35&&r++<6?(n.consume(g),l):g===null||Bt(g)?(n.exit("atxHeadingSequence"),u(g)):t(g)}function u(g){return g===35?(n.enter("atxHeadingSequence"),f(g)):g===null||qe(g)?(n.exit("atxHeading"),e(g)):ht(g)?xt(n,u,"whitespace")(g):(n.enter("atxHeadingText"),h(g))}function f(g){return g===35?(n.consume(g),f):(n.exit("atxHeadingSequence"),u(g))}function h(g){return g===null||g===35||Bt(g)?(n.exit("atxHeadingText"),u(g)):(n.consume(g),h)}}const l9=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Qw=["pre","script","style","textarea"],a9={concrete:!0,name:"htmlFlow",resolveTo:f9,tokenize:d9},u9={partial:!0,tokenize:p9},c9={partial:!0,tokenize:h9};function f9(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function d9(n,e,t){const r=this;let i,o,l,u,f;return h;function h(N){return g(N)}function g(N){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(N),m}function m(N){return N===33?(n.consume(N),w):N===47?(n.consume(N),o=!0,A):N===63?(n.consume(N),i=3,r.interrupt?e:x):_r(N)?(n.consume(N),l=String.fromCharCode(N),O):t(N)}function w(N){return N===45?(n.consume(N),i=2,k):N===91?(n.consume(N),i=5,u=0,b):_r(N)?(n.consume(N),i=4,r.interrupt?e:x):t(N)}function k(N){return N===45?(n.consume(N),r.interrupt?e:x):t(N)}function b(N){const te="CDATA[";return N===te.charCodeAt(u++)?(n.consume(N),u===te.length?r.interrupt?e:R:b):t(N)}function A(N){return _r(N)?(n.consume(N),l=String.fromCharCode(N),O):t(N)}function O(N){if(N===null||N===47||N===62||Bt(N)){const te=N===47,X=l.toLowerCase();return!te&&!o&&Qw.includes(X)?(i=1,r.interrupt?e(N):R(N)):l9.includes(l.toLowerCase())?(i=6,te?(n.consume(N),F):r.interrupt?e(N):R(N)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?t(N):o?V(N):I(N))}return N===45||qr(N)?(n.consume(N),l+=String.fromCharCode(N),O):t(N)}function F(N){return N===62?(n.consume(N),r.interrupt?e:R):t(N)}function V(N){return ht(N)?(n.consume(N),V):C(N)}function I(N){return N===47?(n.consume(N),C):N===58||N===95||_r(N)?(n.consume(N),W):ht(N)?(n.consume(N),I):C(N)}function W(N){return N===45||N===46||N===58||N===95||qr(N)?(n.consume(N),W):B(N)}function B(N){return N===61?(n.consume(N),z):ht(N)?(n.consume(N),B):I(N)}function z(N){return N===null||N===60||N===61||N===62||N===96?t(N):N===34||N===39?(n.consume(N),f=N,H):ht(N)?(n.consume(N),z):Y(N)}function H(N){return N===f?(n.consume(N),f=null,q):N===null||qe(N)?t(N):(n.consume(N),H)}function Y(N){return N===null||N===34||N===39||N===47||N===60||N===61||N===62||N===96||Bt(N)?B(N):(n.consume(N),Y)}function q(N){return N===47||N===62||ht(N)?I(N):t(N)}function C(N){return N===62?(n.consume(N),U):t(N)}function U(N){return N===null||qe(N)?R(N):ht(N)?(n.consume(N),U):t(N)}function R(N){return N===45&&i===2?(n.consume(N),se):N===60&&i===1?(n.consume(N),ae):N===62&&i===4?(n.consume(N),M):N===63&&i===3?(n.consume(N),x):N===93&&i===5?(n.consume(N),_):qe(N)&&(i===6||i===7)?(n.exit("htmlFlowData"),n.check(u9,D,Q)(N)):N===null||qe(N)?(n.exit("htmlFlowData"),Q(N)):(n.consume(N),R)}function Q(N){return n.check(c9,ue,D)(N)}function ue(N){return n.enter("lineEnding"),n.consume(N),n.exit("lineEnding"),oe}function oe(N){return N===null||qe(N)?Q(N):(n.enter("htmlFlowData"),R(N))}function se(N){return N===45?(n.consume(N),x):R(N)}function ae(N){return N===47?(n.consume(N),l="",K):R(N)}function K(N){if(N===62){const te=l.toLowerCase();return Qw.includes(te)?(n.consume(N),M):R(N)}return _r(N)&&l.length<8?(n.consume(N),l+=String.fromCharCode(N),K):R(N)}function _(N){return N===93?(n.consume(N),x):R(N)}function x(N){return N===62?(n.consume(N),M):N===45&&i===2?(n.consume(N),x):R(N)}function M(N){return N===null||qe(N)?(n.exit("htmlFlowData"),D(N)):(n.consume(N),M)}function D(N){return n.exit("htmlFlow"),e(N)}}function h9(n,e,t){const r=this;return i;function i(l){return qe(l)?(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),o):t(l)}function o(l){return r.parser.lazy[r.now().line]?t(l):e(l)}}function p9(n,e,t){return r;function r(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),n.attempt(_p,e,t)}}const m9={name:"htmlText",tokenize:g9};function g9(n,e,t){const r=this;let i,o,l;return u;function u(x){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(x),f}function f(x){return x===33?(n.consume(x),h):x===47?(n.consume(x),B):x===63?(n.consume(x),I):_r(x)?(n.consume(x),Y):t(x)}function h(x){return x===45?(n.consume(x),g):x===91?(n.consume(x),o=0,b):_r(x)?(n.consume(x),V):t(x)}function g(x){return x===45?(n.consume(x),k):t(x)}function m(x){return x===null?t(x):x===45?(n.consume(x),w):qe(x)?(l=m,ae(x)):(n.consume(x),m)}function w(x){return x===45?(n.consume(x),k):m(x)}function k(x){return x===62?se(x):x===45?w(x):m(x)}function b(x){const M="CDATA[";return x===M.charCodeAt(o++)?(n.consume(x),o===M.length?A:b):t(x)}function A(x){return x===null?t(x):x===93?(n.consume(x),O):qe(x)?(l=A,ae(x)):(n.consume(x),A)}function O(x){return x===93?(n.consume(x),F):A(x)}function F(x){return x===62?se(x):x===93?(n.consume(x),F):A(x)}function V(x){return x===null||x===62?se(x):qe(x)?(l=V,ae(x)):(n.consume(x),V)}function I(x){return x===null?t(x):x===63?(n.consume(x),W):qe(x)?(l=I,ae(x)):(n.consume(x),I)}function W(x){return x===62?se(x):I(x)}function B(x){return _r(x)?(n.consume(x),z):t(x)}function z(x){return x===45||qr(x)?(n.consume(x),z):H(x)}function H(x){return qe(x)?(l=H,ae(x)):ht(x)?(n.consume(x),H):se(x)}function Y(x){return x===45||qr(x)?(n.consume(x),Y):x===47||x===62||Bt(x)?q(x):t(x)}function q(x){return x===47?(n.consume(x),se):x===58||x===95||_r(x)?(n.consume(x),C):qe(x)?(l=q,ae(x)):ht(x)?(n.consume(x),q):se(x)}function C(x){return x===45||x===46||x===58||x===95||qr(x)?(n.consume(x),C):U(x)}function U(x){return x===61?(n.consume(x),R):qe(x)?(l=U,ae(x)):ht(x)?(n.consume(x),U):q(x)}function R(x){return x===null||x===60||x===61||x===62||x===96?t(x):x===34||x===39?(n.consume(x),i=x,Q):qe(x)?(l=R,ae(x)):ht(x)?(n.consume(x),R):(n.consume(x),ue)}function Q(x){return x===i?(n.consume(x),i=void 0,oe):x===null?t(x):qe(x)?(l=Q,ae(x)):(n.consume(x),Q)}function ue(x){return x===null||x===34||x===39||x===60||x===61||x===96?t(x):x===47||x===62||Bt(x)?q(x):(n.consume(x),ue)}function oe(x){return x===47||x===62||Bt(x)?q(x):t(x)}function se(x){return x===62?(n.consume(x),n.exit("htmlTextData"),n.exit("htmlText"),e):t(x)}function ae(x){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(x),n.exit("lineEnding"),K}function K(x){return ht(x)?xt(n,_,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(x):_(x)}function _(x){return n.enter("htmlTextData"),l(x)}}const cv={name:"labelEnd",resolveAll:k9,resolveTo:x9,tokenize:S9},y9={tokenize:b9},v9={tokenize:_9},w9={tokenize:C9};function k9(n){let e=-1;const t=[];for(;++e<n.length;){const r=n[e][1];if(t.push(n[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return n.length!==t.length&&yi(n,0,n.length,t),n}function x9(n,e){let t=n.length,r=0,i,o,l,u;for(;t--;)if(i=n[t][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;n[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(l){if(n[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=t,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(l=t);const f={type:n[o][1].type==="labelLink"?"link":"image",start:{...n[o][1].start},end:{...n[n.length-1][1].end}},h={type:"label",start:{...n[o][1].start},end:{...n[l][1].end}},g={type:"labelText",start:{...n[o+r+2][1].end},end:{...n[l-2][1].start}};return u=[["enter",f,e],["enter",h,e]],u=ji(u,n.slice(o+1,o+r+3)),u=ji(u,[["enter",g,e]]),u=ji(u,F1(e.parser.constructs.insideSpan.null,n.slice(o+r+4,l-3),e)),u=ji(u,[["exit",g,e],n[l-2],n[l-1],["exit",h,e]]),u=ji(u,n.slice(l+1)),u=ji(u,[["exit",f,e]]),yi(n,o,n.length,u),n}function S9(n,e,t){const r=this;let i=r.events.length,o,l;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return u;function u(w){return o?o._inactive?m(w):(l=r.parser.defined.includes(ko(r.sliceSerialize({start:o.end,end:r.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(w),n.exit("labelMarker"),n.exit("labelEnd"),f):t(w)}function f(w){return w===40?n.attempt(y9,g,l?g:m)(w):w===91?n.attempt(v9,g,l?h:m)(w):l?g(w):m(w)}function h(w){return n.attempt(w9,g,m)(w)}function g(w){return e(w)}function m(w){return o._balanced=!0,t(w)}}function b9(n,e,t){return r;function r(m){return n.enter("resource"),n.enter("resourceMarker"),n.consume(m),n.exit("resourceMarker"),i}function i(m){return Bt(m)?Qh(n,o)(m):o(m)}function o(m){return m===41?g(m):Tx(n,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function l(m){return Bt(m)?Qh(n,f)(m):g(m)}function u(m){return t(m)}function f(m){return m===34||m===39||m===40?Nx(n,h,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):g(m)}function h(m){return Bt(m)?Qh(n,g)(m):g(m)}function g(m){return m===41?(n.enter("resourceMarker"),n.consume(m),n.exit("resourceMarker"),n.exit("resource"),e):t(m)}}function _9(n,e,t){const r=this;return i;function i(u){return Mx.call(r,n,o,l,"reference","referenceMarker","referenceString")(u)}function o(u){return r.parser.defined.includes(ko(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(u):t(u)}function l(u){return t(u)}}function C9(n,e,t){return r;function r(o){return n.enter("reference"),n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),i}function i(o){return o===93?(n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),n.exit("reference"),e):t(o)}}const E9={name:"labelStartImage",resolveAll:cv.resolveAll,tokenize:T9};function T9(n,e,t){const r=this;return i;function i(u){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(u),n.exit("labelImageMarker"),o}function o(u){return u===91?(n.enter("labelMarker"),n.consume(u),n.exit("labelMarker"),n.exit("labelImage"),l):t(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(u):e(u)}}const M9={name:"labelStartLink",resolveAll:cv.resolveAll,tokenize:N9};function N9(n,e,t){const r=this;return i;function i(l){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(l),n.exit("labelMarker"),n.exit("labelLink"),o}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(l):e(l)}}const xy={name:"lineEnding",tokenize:A9};function A9(n,e){return t;function t(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),xt(n,e,"linePrefix")}}const Um={name:"thematicBreak",tokenize:I9};function I9(n,e,t){let r=0,i;return o;function o(h){return n.enter("thematicBreak"),l(h)}function l(h){return i=h,u(h)}function u(h){return h===i?(n.enter("thematicBreakSequence"),f(h)):r>=3&&(h===null||qe(h))?(n.exit("thematicBreak"),e(h)):t(h)}function f(h){return h===i?(n.consume(h),r++,f):(n.exit("thematicBreakSequence"),ht(h)?xt(n,u,"whitespace")(h):u(h))}}const Vr={continuation:{tokenize:D9},exit:L9,name:"list",tokenize:R9},P9={partial:!0,tokenize:F9},O9={partial:!0,tokenize:z9};function R9(n,e,t){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,l=0;return u;function u(k){const b=r.containerState.type||(k===42||k===43||k===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!r.containerState.marker||k===r.containerState.marker:v2(k)){if(r.containerState.type||(r.containerState.type=b,n.enter(b,{_container:!0})),b==="listUnordered")return n.enter("listItemPrefix"),k===42||k===45?n.check(Um,t,h)(k):h(k);if(!r.interrupt||k===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),f(k)}return t(k)}function f(k){return v2(k)&&++l<10?(n.consume(k),f):(!r.interrupt||l<2)&&(r.containerState.marker?k===r.containerState.marker:k===41||k===46)?(n.exit("listItemValue"),h(k)):t(k)}function h(k){return n.enter("listItemMarker"),n.consume(k),n.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||k,n.check(_p,r.interrupt?t:g,n.attempt(P9,w,m))}function g(k){return r.containerState.initialBlankLine=!0,o++,w(k)}function m(k){return ht(k)?(n.enter("listItemPrefixWhitespace"),n.consume(k),n.exit("listItemPrefixWhitespace"),w):t(k)}function w(k){return r.containerState.size=o+r.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(k)}}function D9(n,e,t){const r=this;return r.containerState._closeFlow=void 0,n.check(_p,i,o);function i(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,xt(n,e,"listItemIndent",r.containerState.size+1)(u)}function o(u){return r.containerState.furtherBlankLines||!ht(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,n.attempt(O9,e,l)(u))}function l(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,xt(n,n.attempt(Vr,e,t),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function z9(n,e,t){const r=this;return xt(n,i,"listItemIndent",r.containerState.size+1);function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?e(o):t(o)}}function L9(n){n.exit(this.containerState.type)}function F9(n,e,t){const r=this;return xt(n,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const l=r.events[r.events.length-1];return!ht(o)&&l&&l[1].type==="listItemPrefixWhitespace"?e(o):t(o)}}const Yw={name:"setextUnderline",resolveTo:B9,tokenize:U9};function B9(n,e){let t=n.length,r,i,o;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){r=t;break}n[t][1].type==="paragraph"&&(i=t)}else n[t][1].type==="content"&&n.splice(t,1),!o&&n[t][1].type==="definition"&&(o=t);const l={type:"setextHeading",start:{...n[r][1].start},end:{...n[n.length-1][1].end}};return n[i][1].type="setextHeadingText",o?(n.splice(i,0,["enter",l,e]),n.splice(o+1,0,["exit",n[r][1],e]),n[r][1].end={...n[o][1].end}):n[r][1]=l,n.push(["exit",l,e]),n}function U9(n,e,t){const r=this;let i;return o;function o(h){let g=r.events.length,m;for(;g--;)if(r.events[g][1].type!=="lineEnding"&&r.events[g][1].type!=="linePrefix"&&r.events[g][1].type!=="content"){m=r.events[g][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||m)?(n.enter("setextHeadingLine"),i=h,l(h)):t(h)}function l(h){return n.enter("setextHeadingLineSequence"),u(h)}function u(h){return h===i?(n.consume(h),u):(n.exit("setextHeadingLineSequence"),ht(h)?xt(n,f,"lineSuffix")(h):f(h))}function f(h){return h===null||qe(h)?(n.exit("setextHeadingLine"),e(h)):t(h)}}const W9={tokenize:j9};function j9(n){const e=this,t=n.attempt(_p,r,n.attempt(this.parser.constructs.flowInitial,i,xt(n,n.attempt(this.parser.constructs.flow,i,n.attempt(K7,i)),"linePrefix")));return t;function r(o){if(o===null){n.consume(o);return}return n.enter("lineEndingBlank"),n.consume(o),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function i(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const $9={resolveAll:Ix()},H9=Ax("string"),V9=Ax("text");function Ax(n){return{resolveAll:Ix(n==="text"?q9:void 0),tokenize:e};function e(t){const r=this,i=this.parser.constructs[n],o=t.attempt(i,l,u);return l;function l(g){return h(g)?o(g):u(g)}function u(g){if(g===null){t.consume(g);return}return t.enter("data"),t.consume(g),f}function f(g){return h(g)?(t.exit("data"),o(g)):(t.consume(g),f)}function h(g){if(g===null)return!0;const m=i[g];let w=-1;if(m)for(;++w<m.length;){const k=m[w];if(!k.previous||k.previous.call(r,r.previous))return!0}return!1}}}function Ix(n){return e;function e(t,r){let i=-1,o;for(;++i<=t.length;)o===void 0?t[i]&&t[i][1].type==="data"&&(o=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==o+2&&(t[o][1].end=t[i-1][1].end,t.splice(o+2,i-o-2),i=o+2),o=void 0);return n?n(t,r):t}}function q9(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const r=n[t-1][1],i=e.sliceStream(r);let o=i.length,l=-1,u=0,f;for(;o--;){const h=i[o];if(typeof h=="string"){for(l=h.length;h.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(h===-2)f=!0,u++;else if(h!==-1){o++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(u=0),u){const h={type:t===n.length||f||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?l:r.start._bufferIndex+l,_index:r.start._index+o,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...h.start},r.start.offset===r.end.offset?Object.assign(r,h):(n.splice(t,0,["enter",h,e],["exit",h,e]),t+=2)}t++}return n}const K9={42:Vr,43:Vr,45:Vr,48:Vr,49:Vr,50:Vr,51:Vr,52:Vr,53:Vr,54:Vr,55:Vr,56:Vr,57:Vr,62:bx},J9={91:X7},G9={[-2]:ky,[-1]:ky,32:ky},Q9={35:i9,42:Um,45:[Yw,Um],60:a9,61:Yw,95:Um,96:Gw,126:Gw},Y9={38:Cx,92:_x},X9={[-5]:xy,[-4]:xy,[-3]:xy,33:E9,38:Cx,42:w2,60:[M7,m9],91:M9,92:[n9,_x],93:cv,95:w2,96:W7},Z9={null:[w2,$9]},eE={null:[42,95]},tE={null:[]},nE=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:eE,contentInitial:J9,disable:tE,document:K9,flow:Q9,flowInitial:G9,insideSpan:Z9,string:Y9,text:X9},Symbol.toStringTag,{value:"Module"}));function rE(n,e,t){let r={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const i={},o=[];let l=[],u=[];const f={attempt:H(B),check:H(z),consume:V,enter:I,exit:W,interrupt:H(z,{interrupt:!0})},h={code:null,containerState:{},defineSkip:A,events:[],now:b,parser:n,previous:null,sliceSerialize:w,sliceStream:k,write:m};let g=e.tokenize.call(h,f);return e.resolveAll&&o.push(e),h;function m(U){return l=ji(l,U),O(),l[l.length-1]!==null?[]:(Y(e,0),h.events=F1(o,h.events,h),h.events)}function w(U,R){return oE(k(U),R)}function k(U){return iE(l,U)}function b(){const{_bufferIndex:U,_index:R,line:Q,column:ue,offset:oe}=r;return{_bufferIndex:U,_index:R,line:Q,column:ue,offset:oe}}function A(U){i[U.line]=U.column,C()}function O(){let U;for(;r._index<l.length;){const R=l[r._index];if(typeof R=="string")for(U=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===U&&r._bufferIndex<R.length;)F(R.charCodeAt(r._bufferIndex));else F(R)}}function F(U){g=g(U)}function V(U){qe(U)?(r.line++,r.column=1,r.offset+=U===-3?2:1,C()):U!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),h.previous=U}function I(U,R){const Q=R||{};return Q.type=U,Q.start=b(),h.events.push(["enter",Q,h]),u.push(Q),Q}function W(U){const R=u.pop();return R.end=b(),h.events.push(["exit",R,h]),R}function B(U,R){Y(U,R.from)}function z(U,R){R.restore()}function H(U,R){return Q;function Q(ue,oe,se){let ae,K,_,x;return Array.isArray(ue)?D(ue):"tokenize"in ue?D([ue]):M(ue);function M(re){return pe;function pe(ke){const Me=ke!==null&&re[ke],je=ke!==null&&re.null,$e=[...Array.isArray(Me)?Me:Me?[Me]:[],...Array.isArray(je)?je:je?[je]:[]];return D($e)(ke)}}function D(re){return ae=re,K=0,re.length===0?se:N(re[K])}function N(re){return pe;function pe(ke){return x=q(),_=re,re.partial||(h.currentConstruct=re),re.name&&h.parser.constructs.disable.null.includes(re.name)?X():re.tokenize.call(R?Object.assign(Object.create(h),R):h,f,te,X)(ke)}}function te(re){return U(_,x),oe}function X(re){return x.restore(),++K<ae.length?N(ae[K]):se}}}function Y(U,R){U.resolveAll&&!o.includes(U)&&o.push(U),U.resolve&&yi(h.events,R,h.events.length-R,U.resolve(h.events.slice(R),h)),U.resolveTo&&(h.events=U.resolveTo(h.events,h))}function q(){const U=b(),R=h.previous,Q=h.currentConstruct,ue=h.events.length,oe=Array.from(u);return{from:ue,restore:se};function se(){r=U,h.previous=R,h.currentConstruct=Q,h.events.length=ue,u=oe,C()}}function C(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function iE(n,e){const t=e.start._index,r=e.start._bufferIndex,i=e.end._index,o=e.end._bufferIndex;let l;if(t===i)l=[n[t].slice(r,o)];else{if(l=n.slice(t,i),r>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(r):l.shift()}o>0&&l.push(n[i].slice(0,o))}return l}function oE(n,e){let t=-1;const r=[];let i;for(;++t<n.length;){const o=n[t];let l;if(typeof o=="string")l=o;else switch(o){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&i)continue;l=" ";break}default:l=String.fromCharCode(o)}i=o===-2,r.push(l)}return r.join("")}function sE(n){const r={constructs:xx([nE,...(n||{}).extensions||[]]),content:i(x7),defined:[],document:i(b7),flow:i(W9),lazy:{},string:i(H9),text:i(V9)};return r;function i(o){return l;function l(u){return rE(r,o,u)}}}function lE(n){for(;!Ex(n););return n}const Xw=/[\0\t\n\r]/g;function aE(){let n=1,e="",t=!0,r;return i;function i(o,l,u){const f=[];let h,g,m,w,k;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(l||void 0).decode(o)),m=0,e="",t&&(o.charCodeAt(0)===65279&&m++,t=void 0);m<o.length;){if(Xw.lastIndex=m,h=Xw.exec(o),w=h&&h.index!==void 0?h.index:o.length,k=o.charCodeAt(w),!h){e=o.slice(m);break}if(k===10&&m===w&&r)f.push(-3),r=void 0;else switch(r&&(f.push(-5),r=void 0),m<w&&(f.push(o.slice(m,w)),n+=w-m),k){case 0:{f.push(65533),n++;break}case 9:{for(g=Math.ceil(n/4)*4,f.push(-2);n++<g;)f.push(-1);break}case 10:{f.push(-4),n=1;break}default:r=!0,n=1}m=w+1}return u&&(r&&f.push(-5),e&&f.push(e),f.push(null)),f}}const uE=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Px(n){return n.replace(uE,cE)}function cE(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),o=i===120||i===88;return Sx(t.slice(o?2:1),o?16:10)}return uv(t)||n}function Yh(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?Zw(n.position):"start"in n||"end"in n?Zw(n):"line"in n||"column"in n?k2(n):""}function k2(n){return ek(n&&n.line)+":"+ek(n&&n.column)}function Zw(n){return k2(n&&n.start)+"-"+k2(n&&n.end)}function ek(n){return n&&typeof n=="number"?n:1}const Ox={}.hasOwnProperty;function fE(n,e,t){return typeof e!="string"&&(t=e,e=void 0),dE(t)(lE(sE(t).document().write(aE()(n,e,!0))))}function dE(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Ji),autolinkProtocol:q,autolinkEmail:q,atxHeading:o(an),blockQuote:o(je),characterEscape:q,characterReference:q,codeFenced:o($e),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:o($e,l),codeText:o(pt,l),codeTextData:q,data:q,codeFlowValue:q,definition:o(ln),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:o(Ot),hardBreakEscape:o(Eo),hardBreakTrailing:o(Eo),htmlFlow:o(En,l),htmlFlowData:q,htmlText:o(En,l),htmlTextData:q,image:o(en),label:l,link:o(Ji),listItem:o(bt),listItemValue:w,listOrdered:o(kn,m),listUnordered:o(kn),paragraph:o(Nt),reference:N,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:o(an),strong:o(hr),thematicBreak:o(pr)},exit:{atxHeading:f(),atxHeadingSequence:B,autolink:f(),autolinkEmail:Me,autolinkProtocol:ke,blockQuote:f(),characterEscapeValue:C,characterReferenceMarkerHexadecimal:X,characterReferenceMarkerNumeric:X,characterReferenceValue:re,characterReference:pe,codeFenced:f(O),codeFencedFence:A,codeFencedFenceInfo:k,codeFencedFenceMeta:b,codeFlowValue:C,codeIndented:f(F),codeText:f(oe),codeTextData:C,data:C,definition:f(),definitionDestinationString:W,definitionLabelString:V,definitionTitleString:I,emphasis:f(),hardBreakEscape:f(R),hardBreakTrailing:f(R),htmlFlow:f(Q),htmlFlowData:C,htmlText:f(ue),htmlTextData:C,image:f(ae),label:_,labelText:K,lineEnding:U,link:f(se),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:te,resourceDestinationString:x,resourceTitleString:M,resource:D,setextHeading:f(Y),setextHeadingLineSequence:H,setextHeadingText:z,strong:f(),thematicBreak:f()}};Rx(e,(n||{}).mdastExtensions||[]);const t={};return r;function r(ge){let Te={type:"root",children:[]};const Ue={stack:[Te],tokenStack:[],config:e,enter:u,exit:h,buffer:l,resume:g,data:t},rt=[];let ft=-1;for(;++ft<ge.length;)if(ge[ft][1].type==="listOrdered"||ge[ft][1].type==="listUnordered")if(ge[ft][0]==="enter")rt.push(ft);else{const un=rt.pop();ft=i(ge,un,ft)}for(ft=-1;++ft<ge.length;){const un=e[ge[ft][0]];Ox.call(un,ge[ft][1].type)&&un[ge[ft][1].type].call(Object.assign({sliceSerialize:ge[ft][2].sliceSerialize},Ue),ge[ft][1])}if(Ue.tokenStack.length>0){const un=Ue.tokenStack[Ue.tokenStack.length-1];(un[1]||tk).call(Ue,void 0,un[0])}for(Te.position={start:Dl(ge.length>0?ge[0][1].start:{line:1,column:1,offset:0}),end:Dl(ge.length>0?ge[ge.length-2][1].end:{line:1,column:1,offset:0})},ft=-1;++ft<e.transforms.length;)Te=e.transforms[ft](Te)||Te;return Te}function i(ge,Te,Ue){let rt=Te-1,ft=-1,un=!1,ei,er,xi,Gi;for(;++rt<=Ue;){const cn=ge[rt];switch(cn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{cn[0]==="enter"?ft++:ft--,Gi=void 0;break}case"lineEndingBlank":{cn[0]==="enter"&&(ei&&!Gi&&!ft&&!xi&&(xi=rt),Gi=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Gi=void 0}if(!ft&&cn[0]==="enter"&&cn[1].type==="listItemPrefix"||ft===-1&&cn[0]==="exit"&&(cn[1].type==="listUnordered"||cn[1].type==="listOrdered")){if(ei){let Mr=rt;for(er=void 0;Mr--;){const mr=ge[Mr];if(mr[1].type==="lineEnding"||mr[1].type==="lineEndingBlank"){if(mr[0]==="exit")continue;er&&(ge[er][1].type="lineEndingBlank",un=!0),mr[1].type="lineEnding",er=Mr}else if(!(mr[1].type==="linePrefix"||mr[1].type==="blockQuotePrefix"||mr[1].type==="blockQuotePrefixWhitespace"||mr[1].type==="blockQuoteMarker"||mr[1].type==="listItemIndent"))break}xi&&(!er||xi<er)&&(ei._spread=!0),ei.end=Object.assign({},er?ge[er][1].start:cn[1].end),ge.splice(er||rt,0,["exit",ei,cn[2]]),rt++,Ue++}if(cn[1].type==="listItemPrefix"){const Mr={type:"listItem",_spread:!1,start:Object.assign({},cn[1].start),end:void 0};ei=Mr,ge.splice(rt,0,["enter",Mr,cn[2]]),rt++,Ue++,xi=void 0,Gi=!0}}}return ge[Te][1]._spread=un,Ue}function o(ge,Te){return Ue;function Ue(rt){u.call(this,ge(rt),rt),Te&&Te.call(this,rt)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(ge,Te,Ue){this.stack[this.stack.length-1].children.push(ge),this.stack.push(ge),this.tokenStack.push([Te,Ue||void 0]),ge.position={start:Dl(Te.start),end:void 0}}function f(ge){return Te;function Te(Ue){ge&&ge.call(this,Ue),h.call(this,Ue)}}function h(ge,Te){const Ue=this.stack.pop(),rt=this.tokenStack.pop();if(rt)rt[0].type!==ge.type&&(Te?Te.call(this,ge,rt[0]):(rt[1]||tk).call(this,ge,rt[0]));else throw new Error("Cannot close `"+ge.type+"` ("+Yh({start:ge.start,end:ge.end})+"): its not open");Ue.position.end=Dl(ge.end)}function g(){return av(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function w(ge){if(this.data.expectingFirstListItemValue){const Te=this.stack[this.stack.length-2];Te.start=Number.parseInt(this.sliceSerialize(ge),10),this.data.expectingFirstListItemValue=void 0}}function k(){const ge=this.resume(),Te=this.stack[this.stack.length-1];Te.lang=ge}function b(){const ge=this.resume(),Te=this.stack[this.stack.length-1];Te.meta=ge}function A(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function O(){const ge=this.resume(),Te=this.stack[this.stack.length-1];Te.value=ge.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function F(){const ge=this.resume(),Te=this.stack[this.stack.length-1];Te.value=ge.replace(/(\r?\n|\r)$/g,"")}function V(ge){const Te=this.resume(),Ue=this.stack[this.stack.length-1];Ue.label=Te,Ue.identifier=ko(this.sliceSerialize(ge)).toLowerCase()}function I(){const ge=this.resume(),Te=this.stack[this.stack.length-1];Te.title=ge}function W(){const ge=this.resume(),Te=this.stack[this.stack.length-1];Te.url=ge}function B(ge){const Te=this.stack[this.stack.length-1];if(!Te.depth){const Ue=this.sliceSerialize(ge).length;Te.depth=Ue}}function z(){this.data.setextHeadingSlurpLineEnding=!0}function H(ge){const Te=this.stack[this.stack.length-1];Te.depth=this.sliceSerialize(ge).codePointAt(0)===61?1:2}function Y(){this.data.setextHeadingSlurpLineEnding=void 0}function q(ge){const Ue=this.stack[this.stack.length-1].children;let rt=Ue[Ue.length-1];(!rt||rt.type!=="text")&&(rt=fs(),rt.position={start:Dl(ge.start),end:void 0},Ue.push(rt)),this.stack.push(rt)}function C(ge){const Te=this.stack.pop();Te.value+=this.sliceSerialize(ge),Te.position.end=Dl(ge.end)}function U(ge){const Te=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ue=Te.children[Te.children.length-1];Ue.position.end=Dl(ge.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Te.type)&&(q.call(this,ge),C.call(this,ge))}function R(){this.data.atHardBreak=!0}function Q(){const ge=this.resume(),Te=this.stack[this.stack.length-1];Te.value=ge}function ue(){const ge=this.resume(),Te=this.stack[this.stack.length-1];Te.value=ge}function oe(){const ge=this.resume(),Te=this.stack[this.stack.length-1];Te.value=ge}function se(){const ge=this.stack[this.stack.length-1];if(this.data.inReference){const Te=this.data.referenceType||"shortcut";ge.type+="Reference",ge.referenceType=Te,delete ge.url,delete ge.title}else delete ge.identifier,delete ge.label;this.data.referenceType=void 0}function ae(){const ge=this.stack[this.stack.length-1];if(this.data.inReference){const Te=this.data.referenceType||"shortcut";ge.type+="Reference",ge.referenceType=Te,delete ge.url,delete ge.title}else delete ge.identifier,delete ge.label;this.data.referenceType=void 0}function K(ge){const Te=this.sliceSerialize(ge),Ue=this.stack[this.stack.length-2];Ue.label=Px(Te),Ue.identifier=ko(Te).toLowerCase()}function _(){const ge=this.stack[this.stack.length-1],Te=this.resume(),Ue=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ue.type==="link"){const rt=ge.children;Ue.children=rt}else Ue.alt=Te}function x(){const ge=this.resume(),Te=this.stack[this.stack.length-1];Te.url=ge}function M(){const ge=this.resume(),Te=this.stack[this.stack.length-1];Te.title=ge}function D(){this.data.inReference=void 0}function N(){this.data.referenceType="collapsed"}function te(ge){const Te=this.resume(),Ue=this.stack[this.stack.length-1];Ue.label=Te,Ue.identifier=ko(this.sliceSerialize(ge)).toLowerCase(),this.data.referenceType="full"}function X(ge){this.data.characterReferenceType=ge.type}function re(ge){const Te=this.sliceSerialize(ge),Ue=this.data.characterReferenceType;let rt;Ue?(rt=Sx(Te,Ue==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):rt=uv(Te);const ft=this.stack[this.stack.length-1];ft.value+=rt}function pe(ge){const Te=this.stack.pop();Te.position.end=Dl(ge.end)}function ke(ge){C.call(this,ge);const Te=this.stack[this.stack.length-1];Te.url=this.sliceSerialize(ge)}function Me(ge){C.call(this,ge);const Te=this.stack[this.stack.length-1];Te.url="mailto:"+this.sliceSerialize(ge)}function je(){return{type:"blockquote",children:[]}}function $e(){return{type:"code",lang:null,meta:null,value:""}}function pt(){return{type:"inlineCode",value:""}}function ln(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ot(){return{type:"emphasis",children:[]}}function an(){return{type:"heading",depth:0,children:[]}}function Eo(){return{type:"break"}}function En(){return{type:"html",value:""}}function en(){return{type:"image",title:null,url:"",alt:null}}function Ji(){return{type:"link",title:null,url:"",children:[]}}function kn(ge){return{type:"list",ordered:ge.type==="listOrdered",start:null,spread:ge._spread,children:[]}}function bt(ge){return{type:"listItem",spread:ge._spread,checked:null,children:[]}}function Nt(){return{type:"paragraph",children:[]}}function hr(){return{type:"strong",children:[]}}function fs(){return{type:"text",value:""}}function pr(){return{type:"thematicBreak"}}}function Dl(n){return{line:n.line,column:n.column,offset:n.offset}}function Rx(n,e){let t=-1;for(;++t<e.length;){const r=e[t];Array.isArray(r)?Rx(n,r):hE(n,r)}}function hE(n,e){let t;for(t in e)if(Ox.call(e,t))switch(t){case"canContainEols":{const r=e[t];r&&n[t].push(...r);break}case"transforms":{const r=e[t];r&&n[t].push(...r);break}case"enter":case"exit":{const r=e[t];r&&Object.assign(n[t],r);break}}}function tk(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+Yh({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+Yh({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Yh({start:e.start,end:e.end})+") is still open")}function x2(n){const e=this;e.parser=t;function t(r){return fE(r,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}const nk={}.hasOwnProperty;function pE(n,e){const t=e||{};function r(i,...o){let l=r.invalid;const u=r.handlers;if(i&&nk.call(i,n)){const f=String(i[n]);l=nk.call(u,f)?u[f]:r.unknown}if(l)return l.call(this,i,...o)}return r.handlers=t.handlers||{},r.invalid=t.invalid,r.unknown=t.unknown,r}const mE={}.hasOwnProperty;function Dx(n,e){let t=-1,r;if(e.extensions)for(;++t<e.extensions.length;)Dx(n,e.extensions[t]);for(r in e)if(mE.call(e,r))switch(r){case"extensions":break;case"unsafe":{rk(n[r],e[r]);break}case"join":{rk(n[r],e[r]);break}case"handlers":{gE(n[r],e[r]);break}default:n.options[r]=e[r]}return n}function rk(n,e){e&&n.push(...e)}function gE(n,e){e&&Object.assign(n,e)}function yE(n,e,t,r){const i=t.enter("blockquote"),o=t.createTracker(r);o.move("> "),o.shift(2);const l=t.indentLines(t.containerFlow(n,o.current()),vE);return i(),l}function vE(n,e,t){return">"+(t?"":" ")+n}function zx(n,e){return ik(n,e.inConstruct,!0)&&!ik(n,e.notInConstruct,!1)}function ik(n,e,t){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return t;let r=-1;for(;++r<e.length;)if(n.includes(e[r]))return!0;return!1}function ok(n,e,t,r){let i=-1;for(;++i<t.unsafe.length;)if(t.unsafe[i].character===`
`&&zx(t.stack,t.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function wE(n,e){const t=String(n);let r=t.indexOf(e),i=r,o=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>l&&(l=o):o=1,i=r+e.length,r=t.indexOf(e,i);return l}function S2(n,e){return!!(e.options.fences===!1&&n.value&&!n.lang&&/[^ \r\n]/.test(n.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(n.value))}function kE(n){const e=n.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function xE(n,e,t,r){const i=kE(t),o=n.value||"",l=i==="`"?"GraveAccent":"Tilde";if(S2(n,t)){const m=t.enter("codeIndented"),w=t.indentLines(o,SE);return m(),w}const u=t.createTracker(r),f=i.repeat(Math.max(wE(o,i)+1,3)),h=t.enter("codeFenced");let g=u.move(f);if(n.lang){const m=t.enter(`codeFencedLang${l}`);g+=u.move(t.safe(n.lang,{before:g,after:" ",encode:["`"],...u.current()})),m()}if(n.lang&&n.meta){const m=t.enter(`codeFencedMeta${l}`);g+=u.move(" "),g+=u.move(t.safe(n.meta,{before:g,after:`
`,encode:["`"],...u.current()})),m()}return g+=u.move(`
`),o&&(g+=u.move(o+`
`)),g+=u.move(f),h(),g}function SE(n,e,t){return(t?"":"    ")+n}function fv(n){const e=n.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function bE(n,e,t,r){const i=fv(t),o=i==='"'?"Quote":"Apostrophe",l=t.enter("definition");let u=t.enter("label");const f=t.createTracker(r);let h=f.move("[");return h+=f.move(t.safe(t.associationId(n),{before:h,after:"]",...f.current()})),h+=f.move("]: "),u(),!n.url||/[\0- \u007F]/.test(n.url)?(u=t.enter("destinationLiteral"),h+=f.move("<"),h+=f.move(t.safe(n.url,{before:h,after:">",...f.current()})),h+=f.move(">")):(u=t.enter("destinationRaw"),h+=f.move(t.safe(n.url,{before:h,after:n.title?" ":`
`,...f.current()}))),u(),n.title&&(u=t.enter(`title${o}`),h+=f.move(" "+i),h+=f.move(t.safe(n.title,{before:h,after:i,...f.current()})),h+=f.move(i),u()),l(),h}function _E(n){const e=n.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function ta(n){return"&#x"+n.toString(16).toUpperCase()+";"}function S1(n,e,t){const r=Lf(n),i=Lf(e);return r===void 0?i===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Lx.peek=CE;function Lx(n,e,t,r){const i=_E(t),o=t.enter("emphasis"),l=t.createTracker(r),u=l.move(i);let f=l.move(t.containerPhrasing(n,{after:i,before:u,...l.current()}));const h=f.charCodeAt(0),g=S1(r.before.charCodeAt(r.before.length-1),h,i);g.inside&&(f=ta(h)+f.slice(1));const m=f.charCodeAt(f.length-1),w=S1(r.after.charCodeAt(0),m,i);w.inside&&(f=f.slice(0,-1)+ta(m));const k=l.move(i);return o(),t.attentionEncodeSurroundingInfo={after:w.outside,before:g.outside},u+f+k}function CE(n,e,t){return t.options.emphasis||"*"}const B1=function(n){if(n==null)return NE;if(typeof n=="function")return U1(n);if(typeof n=="object")return Array.isArray(n)?EE(n):TE(n);if(typeof n=="string")return ME(n);throw new Error("Expected function, string, or object as test")};function EE(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=B1(n[t]);return U1(r);function r(...i){let o=-1;for(;++o<e.length;)if(e[o].apply(this,i))return!0;return!1}}function TE(n){const e=n;return U1(t);function t(r){const i=r;let o;for(o in n)if(i[o]!==e[o])return!1;return!0}}function ME(n){return U1(e);function e(t){return t&&t.type===n}}function U1(n){return e;function e(t,r,i){return!!(AE(t)&&n.call(this,t,typeof r=="number"?r:void 0,i||void 0))}}function NE(){return!0}function AE(n){return n!==null&&typeof n=="object"&&"type"in n}const Fx=[],IE=!0,b2=!1,_2="skip";function Bx(n,e,t,r){let i;typeof e=="function"&&typeof t!="function"?(r=t,t=e):i=e;const o=B1(i),l=r?-1:1;u(n,void 0,[])();function u(f,h,g){const m=f&&typeof f=="object"?f:{};if(typeof m.type=="string"){const k=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(w,"name",{value:"node ("+(f.type+(k?"<"+k+">":""))+")"})}return w;function w(){let k=Fx,b,A,O;if((!e||o(f,h,g[g.length-1]||void 0))&&(k=PE(t(f,g)),k[0]===b2))return k;if("children"in f&&f.children){const F=f;if(F.children&&k[0]!==_2)for(A=(r?F.children.length:-1)+l,O=g.concat(F);A>-1&&A<F.children.length;){const V=F.children[A];if(b=u(V,A,O)(),b[0]===b2)return b;A=typeof b[1]=="number"?b[1]:A+l}}return k}}}function PE(n){return Array.isArray(n)?n:typeof n=="number"?[IE,n]:n==null?Fx:[n]}function Lu(n,e,t,r){let i,o,l;typeof e=="function"&&typeof t!="function"?(o=void 0,l=e,i=t):(o=e,l=t,i=r),Bx(n,o,u,i);function u(f,h){const g=h[h.length-1],m=g?g.children.indexOf(f):void 0;return l(f,m,g)}}function Ux(n,e){let t=!1;return Lu(n,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return t=!0,b2}),!!((!n.depth||n.depth<3)&&av(n)&&(e.options.setext||t))}function OE(n,e,t,r){const i=Math.max(Math.min(6,n.depth||1),1),o=t.createTracker(r);if(Ux(n,t)){const g=t.enter("headingSetext"),m=t.enter("phrasing"),w=t.containerPhrasing(n,{...o.current(),before:`
`,after:`
`});return m(),g(),w+`
`+(i===1?"=":"-").repeat(w.length-(Math.max(w.lastIndexOf("\r"),w.lastIndexOf(`
`))+1))}const l="#".repeat(i),u=t.enter("headingAtx"),f=t.enter("phrasing");o.move(l+" ");let h=t.containerPhrasing(n,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(h)&&(h=ta(h.charCodeAt(0))+h.slice(1)),h=h?l+" "+h:l,t.options.closeAtx&&(h+=" "+l),f(),u(),h}Wx.peek=RE;function Wx(n){return n.value||""}function RE(){return"<"}jx.peek=DE;function jx(n,e,t,r){const i=fv(t),o=i==='"'?"Quote":"Apostrophe",l=t.enter("image");let u=t.enter("label");const f=t.createTracker(r);let h=f.move("![");return h+=f.move(t.safe(n.alt,{before:h,after:"]",...f.current()})),h+=f.move("]("),u(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(u=t.enter("destinationLiteral"),h+=f.move("<"),h+=f.move(t.safe(n.url,{before:h,after:">",...f.current()})),h+=f.move(">")):(u=t.enter("destinationRaw"),h+=f.move(t.safe(n.url,{before:h,after:n.title?" ":")",...f.current()}))),u(),n.title&&(u=t.enter(`title${o}`),h+=f.move(" "+i),h+=f.move(t.safe(n.title,{before:h,after:i,...f.current()})),h+=f.move(i),u()),h+=f.move(")"),l(),h}function DE(){return"!"}$x.peek=zE;function $x(n,e,t,r){const i=n.referenceType,o=t.enter("imageReference");let l=t.enter("label");const u=t.createTracker(r);let f=u.move("![");const h=t.safe(n.alt,{before:f,after:"]",...u.current()});f+=u.move(h+"]["),l();const g=t.stack;t.stack=[],l=t.enter("reference");const m=t.safe(t.associationId(n),{before:f,after:"]",...u.current()});return l(),t.stack=g,o(),i==="full"||!h||h!==m?f+=u.move(m+"]"):i==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function zE(){return"!"}Hx.peek=LE;function Hx(n,e,t){let r=n.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<t.unsafe.length;){const l=t.unsafe[o],u=t.compilePattern(l);let f;if(l.atBreak)for(;f=u.exec(r);){let h=f.index;r.charCodeAt(h)===10&&r.charCodeAt(h-1)===13&&h--,r=r.slice(0,h)+" "+r.slice(f.index+1)}}return i+r+i}function LE(){return"`"}function Vx(n,e){const t=av(n);return!!(!e.options.resourceLink&&n.url&&!n.title&&n.children&&n.children.length===1&&n.children[0].type==="text"&&(t===n.url||"mailto:"+t===n.url)&&/^[a-z][a-z+.-]+:/i.test(n.url)&&!/[\0- <>\u007F]/.test(n.url))}qx.peek=FE;function qx(n,e,t,r){const i=fv(t),o=i==='"'?"Quote":"Apostrophe",l=t.createTracker(r);let u,f;if(Vx(n,t)){const g=t.stack;t.stack=[],u=t.enter("autolink");let m=l.move("<");return m+=l.move(t.containerPhrasing(n,{before:m,after:">",...l.current()})),m+=l.move(">"),u(),t.stack=g,m}u=t.enter("link"),f=t.enter("label");let h=l.move("[");return h+=l.move(t.containerPhrasing(n,{before:h,after:"](",...l.current()})),h+=l.move("]("),f(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(f=t.enter("destinationLiteral"),h+=l.move("<"),h+=l.move(t.safe(n.url,{before:h,after:">",...l.current()})),h+=l.move(">")):(f=t.enter("destinationRaw"),h+=l.move(t.safe(n.url,{before:h,after:n.title?" ":")",...l.current()}))),f(),n.title&&(f=t.enter(`title${o}`),h+=l.move(" "+i),h+=l.move(t.safe(n.title,{before:h,after:i,...l.current()})),h+=l.move(i),f()),h+=l.move(")"),u(),h}function FE(n,e,t){return Vx(n,t)?"<":"["}Kx.peek=BE;function Kx(n,e,t,r){const i=n.referenceType,o=t.enter("linkReference");let l=t.enter("label");const u=t.createTracker(r);let f=u.move("[");const h=t.containerPhrasing(n,{before:f,after:"]",...u.current()});f+=u.move(h+"]["),l();const g=t.stack;t.stack=[],l=t.enter("reference");const m=t.safe(t.associationId(n),{before:f,after:"]",...u.current()});return l(),t.stack=g,o(),i==="full"||!h||h!==m?f+=u.move(m+"]"):i==="shortcut"?f=f.slice(0,-1):f+=u.move("]"),f}function BE(){return"["}function dv(n){const e=n.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function UE(n){const e=dv(n),t=n.options.bulletOther;if(!t)return e==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+t+"`) to be different");return t}function WE(n){const e=n.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function Jx(n){const e=n.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function jE(n,e,t,r){const i=t.enter("list"),o=t.bulletCurrent;let l=n.ordered?WE(t):dv(t);const u=n.ordered?l==="."?")":".":UE(t);let f=e&&t.bulletLastUsed?l===t.bulletLastUsed:!1;if(!n.ordered){const g=n.children?n.children[0]:void 0;if((l==="*"||l==="-")&&g&&(!g.children||!g.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(f=!0),Jx(t)===l&&g){let m=-1;for(;++m<n.children.length;){const w=n.children[m];if(w&&w.type==="listItem"&&w.children&&w.children[0]&&w.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=u),t.bulletCurrent=l;const h=t.containerFlow(n,r);return t.bulletLastUsed=l,t.bulletCurrent=o,i(),h}function $E(n){const e=n.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function HE(n,e,t,r){const i=$E(t);let o=t.bulletCurrent||dv(t);e&&e.type==="list"&&e.ordered&&(o=(typeof e.start=="number"&&e.start>-1?e.start:1)+(t.options.incrementListMarker===!1?0:e.children.indexOf(n))+o);let l=o.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||n.spread))&&(l=Math.ceil(l/4)*4);const u=t.createTracker(r);u.move(o+" ".repeat(l-o.length)),u.shift(l);const f=t.enter("listItem"),h=t.indentLines(t.containerFlow(n,u.current()),g);return f(),h;function g(m,w,k){return w?(k?"":" ".repeat(l))+m:(k?o:o+" ".repeat(l-o.length))+m}}function VE(n,e,t,r){const i=t.enter("paragraph"),o=t.enter("phrasing"),l=t.containerPhrasing(n,r);return o(),i(),l}const qE=B1(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function KE(n,e,t,r){return(n.children.some(function(l){return qE(l)})?t.containerPhrasing:t.containerFlow).call(t,n,r)}function JE(n){const e=n.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Gx.peek=GE;function Gx(n,e,t,r){const i=JE(t),o=t.enter("strong"),l=t.createTracker(r),u=l.move(i+i);let f=l.move(t.containerPhrasing(n,{after:i,before:u,...l.current()}));const h=f.charCodeAt(0),g=S1(r.before.charCodeAt(r.before.length-1),h,i);g.inside&&(f=ta(h)+f.slice(1));const m=f.charCodeAt(f.length-1),w=S1(r.after.charCodeAt(0),m,i);w.inside&&(f=f.slice(0,-1)+ta(m));const k=l.move(i+i);return o(),t.attentionEncodeSurroundingInfo={after:w.outside,before:g.outside},u+f+k}function GE(n,e,t){return t.options.strong||"*"}function QE(n,e,t,r){return t.safe(n.value,r)}function YE(n){const e=n.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function XE(n,e,t){const r=(Jx(t)+(t.options.ruleSpaces?" ":"")).repeat(YE(t));return t.options.ruleSpaces?r.slice(0,-1):r}const hv={blockquote:yE,break:ok,code:xE,definition:bE,emphasis:Lx,hardBreak:ok,heading:OE,html:Wx,image:jx,imageReference:$x,inlineCode:Hx,link:qx,linkReference:Kx,list:jE,listItem:HE,paragraph:VE,root:KE,strong:Gx,text:QE,thematicBreak:XE},ZE=[eT];function eT(n,e,t,r){if(e.type==="code"&&S2(e,r)&&(n.type==="list"||n.type===e.type&&S2(n,r)))return!1;if("spread"in t&&typeof t.spread=="boolean")return n.type==="paragraph"&&(n.type===e.type||e.type==="definition"||e.type==="heading"&&Ux(e,r))?void 0:t.spread?1:0}const lu=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],tT=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:lu},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:lu},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:lu},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:lu},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:lu},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:lu},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:lu},{atBreak:!0,character:"~"}];function nT(n){return n.label||!n.identifier?n.label||"":Px(n.identifier)}function rT(n){if(!n._compiled){const e=(n.atBreak?"[\\r\\n][\\t ]*":"")+(n.before?"(?:"+n.before+")":"");n._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(n.character)?"\\":"")+n.character+(n.after?"(?:"+n.after+")":""),"g")}return n._compiled}function iT(n,e,t){const r=e.indexStack,i=n.children||[],o=[];let l=-1,u=t.before,f;r.push(-1);let h=e.createTracker(t);for(;++l<i.length;){const g=i[l];let m;if(r[r.length-1]=l,l+1<i.length){let b=e.handle.handlers[i[l+1].type];b&&b.peek&&(b=b.peek),m=b?b(i[l+1],n,e,{before:"",after:"",...h.current()}).charAt(0):""}else m=t.after;o.length>0&&(u==="\r"||u===`
`)&&g.type==="html"&&(o[o.length-1]=o[o.length-1].replace(/(\r?\n|\r)$/," "),u=" ",h=e.createTracker(t),h.move(o.join("")));let w=e.handle(g,n,e,{...h.current(),after:m,before:u});f&&f===w.slice(0,1)&&(w=ta(f.charCodeAt(0))+w.slice(1));const k=e.attentionEncodeSurroundingInfo;e.attentionEncodeSurroundingInfo=void 0,f=void 0,k&&(o.length>0&&k.before&&u===o[o.length-1].slice(-1)&&(o[o.length-1]=o[o.length-1].slice(0,-1)+ta(u.charCodeAt(0))),k.after&&(f=m)),h.move(w),o.push(w),u=w.slice(-1)}return r.pop(),o.join("")}function oT(n,e,t){const r=e.indexStack,i=n.children||[],o=e.createTracker(t),l=[];let u=-1;for(r.push(-1);++u<i.length;){const f=i[u];r[r.length-1]=u,l.push(o.move(e.handle(f,n,e,{before:`
`,after:`
`,...o.current()}))),f.type!=="list"&&(e.bulletLastUsed=void 0),u<i.length-1&&l.push(o.move(sT(f,i[u+1],n,e)))}return r.pop(),l.join("")}function sT(n,e,t,r){let i=r.join.length;for(;i--;){const o=r.join[i](n,e,t,r);if(o===!0||o===1)break;if(typeof o=="number")return`
`.repeat(1+o);if(o===!1)return`

<!---->

`}return`

`}const lT=/\r?\n|\r/g;function aT(n,e){const t=[];let r=0,i=0,o;for(;o=lT.exec(n);)l(n.slice(r,o.index)),t.push(o[0]),r=o.index+o[0].length,i++;return l(n.slice(r)),t.join("");function l(u){t.push(e(u,i,!u))}}function uT(n,e,t){const r=(t.before||"")+(e||"")+(t.after||""),i=[],o=[],l={};let u=-1;for(;++u<n.unsafe.length;){const g=n.unsafe[u];if(!zx(n.stack,g))continue;const m=n.compilePattern(g);let w;for(;w=m.exec(r);){const k="before"in g||!!g.atBreak,b="after"in g,A=w.index+(k?w[1].length:0);i.includes(A)?(l[A].before&&!k&&(l[A].before=!1),l[A].after&&!b&&(l[A].after=!1)):(i.push(A),l[A]={before:k,after:b})}}i.sort(cT);let f=t.before?t.before.length:0;const h=r.length-(t.after?t.after.length:0);for(u=-1;++u<i.length;){const g=i[u];g<f||g>=h||g+1<h&&i[u+1]===g+1&&l[g].after&&!l[g+1].before&&!l[g+1].after||i[u-1]===g-1&&l[g].before&&!l[g-1].before&&!l[g-1].after||(f!==g&&o.push(sk(r.slice(f,g),"\\")),f=g,/[!-/:-@[-`{-~]/.test(r.charAt(g))&&(!t.encode||!t.encode.includes(r.charAt(g)))?o.push("\\"):(o.push(ta(r.charCodeAt(g))),f++))}return o.push(sk(r.slice(f,h),t.after)),o.join("")}function cT(n,e){return n-e}function sk(n,e){const t=/\\(?=[!-/:-@[-`{-~])/g,r=[],i=[],o=n+e;let l=-1,u=0,f;for(;f=t.exec(o);)r.push(f.index);for(;++l<r.length;)u!==r[l]&&i.push(n.slice(u,r[l])),i.push("\\"),u=r[l];return i.push(n.slice(u)),i.join("")}function fT(n){const e=n||{},t=e.now||{};let r=e.lineShift||0,i=t.line||1,o=t.column||1;return{move:f,current:l,shift:u};function l(){return{now:{line:i,column:o},lineShift:r}}function u(h){r+=h}function f(h){const g=h||"",m=g.split(/\r?\n|\r/g),w=m[m.length-1];return i+=m.length-1,o=m.length===1?o+w.length:1+w.length+r,g}}function dT(n,e){const t=e||{},r={associationId:nT,containerPhrasing:gT,containerFlow:yT,createTracker:fT,compilePattern:rT,enter:o,handlers:{...hv},handle:void 0,indentLines:aT,indexStack:[],join:[...ZE],options:{},safe:vT,stack:[],unsafe:[...tT]};Dx(r,t),r.options.tightDefinitions&&r.join.push(mT),r.handle=pE("type",{invalid:hT,unknown:pT,handlers:r.handlers});let i=r.handle(n,void 0,r,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return i&&i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i;function o(l){return r.stack.push(l),u;function u(){r.stack.pop()}}}function hT(n){throw new Error("Cannot handle value `"+n+"`, expected node")}function pT(n){const e=n;throw new Error("Cannot handle unknown node `"+e.type+"`")}function mT(n,e){if(n.type==="definition"&&n.type===e.type)return 0}function gT(n,e){return iT(n,this,e)}function yT(n,e){return oT(n,this,e)}function vT(n,e){return uT(this,n,e)}function C2(n){const e=this;e.compiler=t;function t(r){return dT(r,{...e.data("settings"),...n,extensions:e.data("toMarkdownExtensions")||[]})}}function lk(n){if(n)throw n}var Sy,ak;function wT(){if(ak)return Sy;ak=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},o=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var g=n.call(h,"constructor"),m=h.constructor&&h.constructor.prototype&&n.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!g&&!m)return!1;var w;for(w in h);return typeof w>"u"||n.call(h,w)},l=function(h,g){t&&g.name==="__proto__"?t(h,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):h[g.name]=g.newValue},u=function(h,g){if(g==="__proto__")if(n.call(h,g)){if(r)return r(h,g).value}else return;return h[g]};return Sy=function f(){var h,g,m,w,k,b,A=arguments[0],O=1,F=arguments.length,V=!1;for(typeof A=="boolean"&&(V=A,A=arguments[1]||{},O=2),(A==null||typeof A!="object"&&typeof A!="function")&&(A={});O<F;++O)if(h=arguments[O],h!=null)for(g in h)m=u(A,g),w=u(h,g),A!==w&&(V&&w&&(o(w)||(k=i(w)))?(k?(k=!1,b=m&&i(m)?m:[]):b=m&&o(m)?m:{},l(A,{name:g,newValue:f(V,b,w)})):typeof w<"u"&&l(A,{name:g,newValue:w}));return A},Sy}var kT=wT();const by=Sp(kT);function YR(){}function E2(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function xT(){const n=[],e={run:t,use:r};return e;function t(...i){let o=-1;const l=i.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...i);function u(f,...h){const g=n[++o];let m=-1;if(f){l(f);return}for(;++m<i.length;)(h[m]===null||h[m]===void 0)&&(h[m]=i[m]);i=h,g?ST(g,u)(...h):l(null,...h)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return n.push(i),e}}function ST(n,e){let t;return r;function r(...l){const u=n.length>l.length;let f;u&&l.push(i);try{f=n.apply(this,l)}catch(h){const g=h;if(u&&t)throw g;return i(g)}u||(f&&f.then&&typeof f.then=="function"?f.then(o,i):f instanceof Error?i(f):o(f))}function i(l,...u){t||(t=!0,e(l,...u))}function o(l){i(null,l)}}class Qr extends Error{constructor(e,t,r){super(),typeof t=="string"&&(r=t,t=void 0);let i="",o={},l=!1;if(t&&("line"in t&&"column"in t?o={place:t}:"start"in t&&"end"in t?o={place:t}:"type"in t?o={ancestors:[t],place:t.position}:o={...t}),typeof e=="string"?i=e:!o.cause&&e&&(l=!0,i=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof r=="string"){const f=r.indexOf(":");f===-1?o.ruleId=r:(o.source=r.slice(0,f),o.ruleId=r.slice(f+1))}if(!o.place&&o.ancestors&&o.ancestors){const f=o.ancestors[o.ancestors.length-1];f&&(o.place=f.position)}const u=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=u?u.line:void 0,this.name=Yh(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=l&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}Qr.prototype.file="";Qr.prototype.name="";Qr.prototype.reason="";Qr.prototype.message="";Qr.prototype.stack="";Qr.prototype.column=void 0;Qr.prototype.line=void 0;Qr.prototype.ancestors=void 0;Qr.prototype.cause=void 0;Qr.prototype.fatal=void 0;Qr.prototype.place=void 0;Qr.prototype.ruleId=void 0;Qr.prototype.source=void 0;const ts={basename:bT,dirname:_T,extname:CT,join:ET,sep:"/"};function bT(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Cp(n);let t=0,r=-1,i=n.length,o;if(e===void 0||e.length===0||e.length>n.length){for(;i--;)if(n.codePointAt(i)===47){if(o){t=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":n.slice(t,r)}if(e===n)return"";let l=-1,u=e.length-1;for(;i--;)if(n.codePointAt(i)===47){if(o){t=i+1;break}}else l<0&&(o=!0,l=i+1),u>-1&&(n.codePointAt(i)===e.codePointAt(u--)?u<0&&(r=i):(u=-1,r=l));return t===r?r=l:r<0&&(r=n.length),n.slice(t,r)}function _T(n){if(Cp(n),n.length===0)return".";let e=-1,t=n.length,r;for(;--t;)if(n.codePointAt(t)===47){if(r){e=t;break}}else r||(r=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function CT(n){Cp(n);let e=n.length,t=-1,r=0,i=-1,o=0,l;for(;e--;){const u=n.codePointAt(e);if(u===47){if(l){r=e+1;break}continue}t<0&&(l=!0,t=e+1),u===46?i<0?i=e:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||t<0||o===0||o===1&&i===t-1&&i===r+1?"":n.slice(i,t)}function ET(...n){let e=-1,t;for(;++e<n.length;)Cp(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":TT(t)}function TT(n){Cp(n);const e=n.codePointAt(0)===47;let t=MT(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function MT(n,e){let t="",r=0,i=-1,o=0,l=-1,u,f;for(;++l<=n.length;){if(l<n.length)u=n.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(i===l-1||o===1))if(i!==l-1&&o===2){if(t.length<2||r!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(f=t.lastIndexOf("/"),f!==t.length-1){f<0?(t="",r=0):(t=t.slice(0,f),r=t.length-1-t.lastIndexOf("/")),i=l,o=0;continue}}else if(t.length>0){t="",r=0,i=l,o=0;continue}}e&&(t=t.length>0?t+"/..":"..",r=2)}else t.length>0?t+="/"+n.slice(i+1,l):t=n.slice(i+1,l),r=l-i-1;i=l,o=0}else u===46&&o>-1?o++:o=-1}return t}function Cp(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const NT={cwd:AT};function AT(){return"/"}function T2(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function IT(n){if(typeof n=="string")n=new URL(n);else if(!T2(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return PT(n)}function PT(n){if(n.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const r=e.codePointAt(t+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const _y=["history","path","basename","stem","extname","dirname"];class OT{constructor(e){let t;e?T2(e)?t={path:e}:typeof e=="string"||RT(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":NT.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<_y.length;){const o=_y[r];o in t&&t[o]!==void 0&&t[o]!==null&&(this[o]=o==="history"?[...t[o]]:t[o])}let i;for(i in t)_y.includes(i)||(this[i]=t[i])}get basename(){return typeof this.path=="string"?ts.basename(this.path):void 0}set basename(e){Ey(e,"basename"),Cy(e,"basename"),this.path=ts.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?ts.dirname(this.path):void 0}set dirname(e){uk(this.basename,"dirname"),this.path=ts.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?ts.extname(this.path):void 0}set extname(e){if(Cy(e,"extname"),uk(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ts.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){T2(e)&&(e=IT(e)),Ey(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?ts.basename(this.path,this.extname):void 0}set stem(e){Ey(e,"stem"),Cy(e,"stem"),this.path=ts.join(this.dirname||"",e+(this.extname||""))}fail(e,t,r){const i=this.message(e,t,r);throw i.fatal=!0,i}info(e,t,r){const i=this.message(e,t,r);return i.fatal=void 0,i}message(e,t,r){const i=new Qr(e,t,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Cy(n,e){if(n&&n.includes(ts.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+ts.sep+"`")}function Ey(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function uk(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function RT(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const DT=function(n){const r=this.constructor.prototype,i=r[n],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o},zT={}.hasOwnProperty;class pv extends DT{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=xT()}copy(){const e=new pv;let t=-1;for(;++t<this.attachers.length;){const r=this.attachers[t];e.use(...r)}return e.data(by(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(Ny("data",this.frozen),this.namespace[e]=t,this):zT.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Ny("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=t.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=_m(e),r=this.parser||this.Parser;return Ty("parse",r),r(String(t),t)}process(e,t){const r=this;return this.freeze(),Ty("process",this.parser||this.Parser),My("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(o,l){const u=_m(e),f=r.parse(u);r.run(f,u,function(g,m,w){if(g||!m||!w)return h(g);const k=m,b=r.stringify(k,w);FT(b)?w.value=b:w.result=b,h(g,w)});function h(g,m){g||!m?l(g):o?o(m):t(void 0,m)}}}processSync(e){let t=!1,r;return this.freeze(),Ty("processSync",this.parser||this.Parser),My("processSync",this.compiler||this.Compiler),this.process(e,i),fk("processSync","process",t),r;function i(o,l){t=!0,lk(o),r=l}}run(e,t,r){ck(e),this.freeze();const i=this.transformers;return!r&&typeof t=="function"&&(r=t,t=void 0),r?o(void 0,r):new Promise(o);function o(l,u){const f=_m(t);i.run(e,f,h);function h(g,m,w){const k=m||e;g?u(g):l?l(k):r(void 0,k,w)}}}runSync(e,t){let r=!1,i;return this.run(e,t,o),fk("runSync","run",r),i;function o(l,u){lk(l),i=u,r=!0}}stringify(e,t){this.freeze();const r=_m(t),i=this.compiler||this.Compiler;return My("stringify",i),ck(e),i(e,r)}use(e,...t){const r=this.attachers,i=this.namespace;if(Ny("use",this.frozen),e!=null)if(typeof e=="function")f(e,t);else if(typeof e=="object")Array.isArray(e)?u(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(h){if(typeof h=="function")f(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[g,...m]=h;f(g,m)}else l(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function l(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(h.plugins),h.settings&&(i.settings=by(!0,i.settings,h.settings))}function u(h){let g=-1;if(h!=null)if(Array.isArray(h))for(;++g<h.length;){const m=h[g];o(m)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function f(h,g){let m=-1,w=-1;for(;++m<r.length;)if(r[m][0]===h){w=m;break}if(w===-1)r.push([h,...g]);else if(g.length>0){let[k,...b]=g;const A=r[w][1];E2(A)&&E2(k)&&(k=by(!0,A,k)),r[w]=[h,k,...b]}}}}const M2=new pv().freeze();function Ty(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function My(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function Ny(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function ck(n){if(!E2(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function fk(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function _m(n){return LT(n)?n:new OT(n)}function LT(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function FT(n){return typeof n=="string"||BT(n)}function BT(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}var Qx=n=>{throw TypeError(n)},Yx=(n,e,t)=>e.has(n)||Qx("Cannot "+t),ct=(n,e,t)=>(Yx(n,e,"read from private field"),t?t.call(n):e.get(n)),vn=(n,e,t)=>e.has(n)?Qx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),qt=(n,e,t,r)=>(Yx(n,e,"write to private field"),e.set(n,t),t),es,Rh,Wm,jm,$m,Dh,zh,Hs,Lh,Hm,Vm,Fh,qm,Bh,Km,Jm,gf,du,Gm,Uh;class Xx{}class Zx{constructor(){this.elements=[],this.size=()=>this.elements.length,this.top=()=>this.elements.at(-1),this.push=e=>{var t;(t=this.top())==null||t.push(e)},this.open=e=>{this.elements.push(e)},this.close=()=>{const e=this.elements.pop();if(!e)throw Y4();return e}}}class mv extends Xx{constructor(e,t,r){super(),this.type=e,this.content=t,this.attrs=r}push(e,...t){this.content.push(e,...t)}pop(){return this.content.pop()}static create(e,t,r){return new mv(e,t,r)}}const N2=class extends Zx{constructor(e){super(),vn(this,es),vn(this,Rh),vn(this,Wm),vn(this,jm),vn(this,$m),vn(this,Dh),vn(this,zh),qt(this,es,kt.none),qt(this,Rh,t=>t.isText),qt(this,Wm,(t,r)=>{if(ct(this,Rh).call(this,t)&&ct(this,Rh).call(this,r)&&kt.sameSet(t.marks,r.marks))return this.schema.text(t.text+r.text,t.marks)}),qt(this,jm,t=>{const r=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.parseMarkdown.match(t));if(!r)throw A8(t);return r}),qt(this,$m,t=>{const r=ct(this,jm).call(this,t);r.spec.parseMarkdown.runner(this,t,r)}),this.injectRoot=(t,r,i)=>(this.openNode(r,i),this.next(t.children),this),this.openNode=(t,r)=>(this.open(mv.create(t,[],r)),this),qt(this,Dh,()=>{qt(this,es,kt.none);const t=this.close();return ct(this,zh).call(this,t.type,t.attrs,t.content)}),this.closeNode=()=>(ct(this,Dh).call(this),this),qt(this,zh,(t,r,i)=>{const o=t.createAndFill(r,i,ct(this,es));if(!o)throw N8(t,r,i);return this.push(o),o}),this.addNode=(t,r,i)=>(ct(this,zh).call(this,t,r,i),this),this.openMark=(t,r)=>{const i=t.create(r);return qt(this,es,i.addToSet(ct(this,es))),this},this.closeMark=t=>(qt(this,es,t.removeFromSet(ct(this,es))),this),this.addText=t=>{const r=this.top();if(!r)throw Y4();const i=r.pop(),o=this.schema.text(t,ct(this,es));if(!i)return r.push(o),this;const l=ct(this,Wm).call(this,i,o);return l?(r.push(l),this):(r.push(i,o),this)},this.build=()=>{let t;do t=ct(this,Dh).call(this);while(this.size());return t},this.next=(t=[])=>([t].flat().forEach(r=>ct(this,$m).call(this,r)),this),this.toDoc=()=>this.build(),this.run=(t,r)=>{const i=t.runSync(t.parse(r),r);return this.next(i),this},this.schema=e}};es=new WeakMap;Rh=new WeakMap;Wm=new WeakMap;jm=new WeakMap;$m=new WeakMap;Dh=new WeakMap;zh=new WeakMap;N2.create=(n,e)=>{const t=new N2(n);return r=>(t.run(e,r),t.toDoc())};let UT=N2;const A2=class extends Xx{constructor(e,t,r,i={}){super(),this.type=e,this.children=t,this.value=r,this.props=i,this.push=(o,...l)=>{this.children||(this.children=[]),this.children.push(o,...l)},this.pop=()=>{var o;return(o=this.children)==null?void 0:o.pop()}}};A2.create=(n,e,t,r={})=>new A2(n,e,t,r);let dk=A2;const WT=n=>Object.prototype.hasOwnProperty.call(n,"size"),I2=class extends Zx{constructor(e){super(),vn(this,Hs),vn(this,Lh),vn(this,Hm),vn(this,Vm),vn(this,Fh),vn(this,qm),vn(this,Bh),vn(this,Km),vn(this,Jm),vn(this,gf),vn(this,du),vn(this,Gm),vn(this,Uh),qt(this,Hs,kt.none),qt(this,Lh,t=>{const r=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.toMarkdown.match(t));if(!r)throw I8(t.type);return r}),qt(this,Hm,t=>ct(this,Lh).call(this,t).spec.toMarkdown.runner(this,t)),qt(this,Vm,(t,r)=>ct(this,Lh).call(this,t).spec.toMarkdown.runner(this,t,r)),qt(this,Fh,t=>{const{marks:r}=t,i=u=>u.type.spec.priority??50;[...r].sort((u,f)=>i(u)-i(f)).every(u=>!ct(this,Vm).call(this,u,t))&&ct(this,Hm).call(this,t),r.forEach(u=>ct(this,Uh).call(this,u))}),qt(this,qm,(t,r)=>{var i;if(t.type===r||((i=t.children)==null?void 0:i.length)!==1)return t;const o=h=>{var g;if(h.type===r)return h;if(((g=h.children)==null?void 0:g.length)!==1)return null;const[m]=h.children;return m?o(m):null},l=o(t);if(!l)return t;const u=l.children?[...l.children]:void 0,f={...t,children:u};return f.children=u,l.children=[f],l}),qt(this,Bh,t=>{const{children:r}=t;return r&&(t.children=r.reduce((i,o,l)=>{if(l===0)return[o];const u=i.at(-1);if(u&&u.isMark&&o.isMark){o=ct(this,qm).call(this,o,u.type);const{children:f,...h}=o,{children:g,...m}=u;if(o.type===u.type&&f&&g&&JSON.stringify(h)===JSON.stringify(m)){const w={...m,children:[...g,...f]};return i.slice(0,-1).concat(ct(this,Bh).call(this,w))}}return i.concat(o)},[])),t}),qt(this,Km,t=>{const r={...t.props,type:t.type};return t.children&&(r.children=t.children),t.value&&(r.value=t.value),r}),this.openNode=(t,r,i)=>(this.open(dk.create(t,void 0,r,i)),this),qt(this,Jm,(t,r)=>{let i="",o="";const l=t.children;let u=-1,f=-1;const h=m=>{m&&m.forEach((w,k)=>{w.type==="text"&&w.value&&(u<0&&(u=k),f=k)})};if(l){h(l);const m=l==null?void 0:l[f],w=l==null?void 0:l[u];m&&m.value.endsWith(" ")&&(o=m.value.match(/ +$/)[0],m.value=m.value.trimEnd()),w&&w.value.startsWith(" ")&&(i=w.value.match(/^ +/)[0],w.value=w.value.trimStart())}i.length&&ct(this,du).call(this,"text",void 0,i);const g=r();return o.length&&ct(this,du).call(this,"text",void 0,o),g}),qt(this,gf,(t=!1)=>{const r=this.close(),i=()=>ct(this,du).call(this,r.type,r.children,r.value,r.props);return t?ct(this,Jm).call(this,r,i):i()}),this.closeNode=()=>(ct(this,gf).call(this),this),qt(this,du,(t,r,i,o)=>{const l=dk.create(t,r,i,o),u=ct(this,Bh).call(this,ct(this,Km).call(this,l));return this.push(u),u}),this.addNode=(t,r,i,o)=>(ct(this,du).call(this,t,r,i,o),this),qt(this,Gm,(t,r,i,o)=>t.isInSet(ct(this,Hs))?this:(qt(this,Hs,t.addToSet(ct(this,Hs))),this.openNode(r,i,{...o,isMark:!0}))),qt(this,Uh,t=>{t.isInSet(ct(this,Hs))&&(qt(this,Hs,t.type.removeFromSet(ct(this,Hs))),ct(this,gf).call(this,!0))}),this.withMark=(t,r,i,o)=>(ct(this,Gm).call(this,t,r,i,o),this),this.closeMark=t=>(ct(this,Uh).call(this,t),this),this.build=()=>{let t=null;do t=ct(this,gf).call(this);while(this.size());return t},this.next=t=>WT(t)?(t.forEach(r=>{ct(this,Fh).call(this,r)}),this):(ct(this,Fh).call(this,t),this),this.toString=t=>t.stringify(this.build()),this.run=t=>(this.next(t),this),this.schema=e}};Hs=new WeakMap;Lh=new WeakMap;Hm=new WeakMap;Vm=new WeakMap;Fh=new WeakMap;qm=new WeakMap;Bh=new WeakMap;Km=new WeakMap;Jm=new WeakMap;gf=new WeakMap;du=new WeakMap;Gm=new WeakMap;Uh=new WeakMap;I2.create=(n,e)=>{const t=new I2(n);return r=>(t.run(r),t.toString(e))};let jT=I2;const e5=65535,t5=Math.pow(2,16);function $T(n,e){return n+e*t5}function hk(n){return n&e5}function HT(n){return(n-(n&e5))/t5}const n5=1,r5=2,Qm=4,i5=8;class P2{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&i5)>0}get deletedBefore(){return(this.delInfo&(n5|Qm))>0}get deletedAfter(){return(this.delInfo&(r5|Qm))>0}get deletedAcross(){return(this.delInfo&Qm)>0}}class mi{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&mi.empty)return mi.empty}recover(e){let t=0,r=hk(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+HT(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let f=this.ranges[u]-(this.inverted?i:0);if(f>e)break;let h=this.ranges[u+o],g=this.ranges[u+l],m=f+h;if(e<=m){let w=h?e==f?-1:e==m?1:t:t,k=f+i+(w<0?0:g);if(r)return k;let b=e==(t<0?f:m)?null:$T(u/3,e-f),A=e==f?r5:e==m?n5:Qm;return(t<0?e!=f:e!=m)&&(A|=i5),new P2(k,A,b)}i+=g-h}return r?e+i:new P2(e+i,0,null)}touches(e,t){let r=0,i=hk(t),o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let f=this.ranges[u]-(this.inverted?r:0);if(f>e)break;let h=this.ranges[u+o],g=f+h;if(e<=g&&u==i*3)return!0;r+=this.ranges[u+l]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let l=this.ranges[i],u=l-(this.inverted?o:0),f=l+(this.inverted?0:o),h=this.ranges[i+t],g=this.ranges[i+r];e(u,u+h,f,f+g),o+=g-h}}invert(){return new mi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?mi.empty:new mi(e<0?[0,-e,0]:[0,0,e])}}mi.empty=new mi([]);class fp{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new fp(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new fp;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let o=this.from;o<this.to;o++){let l=this._maps[o],u=l.mapResult(e,t);if(u.recover!=null){let f=this.getMirror(o);if(f!=null&&f>o&&f<this.to){o=f,e=this._maps[f].recover(u.recover);continue}}i|=u.delInfo,e=u.pos}return r?e:new P2(e,i,null)}}const Ay=Object.create(null);class dr{getMap(){return mi.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Ay[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Ay)throw new RangeError("Duplicate use of step JSON ID "+e);return Ay[e]=t,t.prototype.jsonID=e,t}}class wn{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new wn(e,null)}static fail(e){return new wn(null,e)}static fromReplace(e,t,r,i){try{return wn.ok(e.replace(t,r,i))}catch(o){if(o instanceof y1)return wn.fail(o.message);throw o}}}function gv(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(gv(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return _e.fromArray(r)}class Js extends dr{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new Ne(gv(t.content,(l,u)=>!l.isAtom||!u.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),i),t.openStart,t.openEnd);return wn.fromReplace(e,this.from,this.to,o)}invert(){return new rs(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Js(t.pos,r.pos,this.mark)}merge(e){return e instanceof Js&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Js(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Js(t.from,t.to,e.markFromJSON(t.mark))}}dr.jsonID("addMark",Js);class rs extends dr{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new Ne(gv(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return wn.fromReplace(e,this.from,this.to,r)}invert(){return new Js(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new rs(t.pos,r.pos,this.mark)}merge(e){return e instanceof rs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new rs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new rs(t.from,t.to,e.markFromJSON(t.mark))}}dr.jsonID("removeMark",rs);class Gl extends dr{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return wn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return wn.fromReplace(e,this.pos,this.pos+1,new Ne(_e.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Gl(this.pos,t.marks[i]);return new Gl(this.pos,this.mark)}}return new Ff(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Gl(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Gl(t.pos,e.markFromJSON(t.mark))}}dr.jsonID("addNodeMark",Gl);class Ff extends dr{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return wn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return wn.fromReplace(e,this.pos,this.pos+1,new Ne(_e.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Gl(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ff(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ff(t.pos,e.markFromJSON(t.mark))}}dr.jsonID("removeNodeMark",Ff);class Gn extends dr{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&O2(e,this.from,this.to)?wn.fail("Structure replace would overwrite content"):wn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new mi([this.from,this.to-this.from,this.slice.size])}invert(e){return new Gn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Gn(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Gn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?Ne.empty:new Ne(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Gn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?Ne.empty:new Ne(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Gn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Gn(t.from,t.to,Ne.fromJSON(e,t.slice),!!t.structure)}}dr.jsonID("replace",Gn);class fr extends dr{constructor(e,t,r,i,o,l,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=l,this.structure=u}apply(e){if(this.structure&&(O2(e,this.from,this.gapFrom)||O2(e,this.gapTo,this.to)))return wn.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return wn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?wn.fromReplace(e,this.from,this.to,r):wn.fail("Content does not fit in gap")}getMap(){return new mi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new fr(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new fr(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new fr(t.from,t.to,t.gapFrom,t.gapTo,Ne.fromJSON(e,t.slice),t.insert,!!t.structure)}}dr.jsonID("replaceAround",fr);function O2(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let l=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,i--}}return!1}function VT(n,e,t,r){let i=[],o=[],l,u;n.doc.nodesBetween(e,t,(f,h,g)=>{if(!f.isInline)return;let m=f.marks;if(!r.isInSet(m)&&g.type.allowsMarkType(r.type)){let w=Math.max(h,e),k=Math.min(h+f.nodeSize,t),b=r.addToSet(m);for(let A=0;A<m.length;A++)m[A].isInSet(b)||(l&&l.to==w&&l.mark.eq(m[A])?l.to=k:i.push(l=new rs(w,k,m[A])));u&&u.to==w?u.to=k:o.push(u=new Js(w,k,r))}}),i.forEach(f=>n.step(f)),o.forEach(f=>n.step(f))}function qT(n,e,t,r){let i=[],o=0;n.doc.nodesBetween(e,t,(l,u)=>{if(!l.isInline)return;o++;let f=null;if(r instanceof z1){let h=l.marks,g;for(;g=r.isInSet(h);)(f||(f=[])).push(g),h=g.removeFromSet(h)}else r?r.isInSet(l.marks)&&(f=[r]):f=l.marks;if(f&&f.length){let h=Math.min(u+l.nodeSize,t);for(let g=0;g<f.length;g++){let m=f[g],w;for(let k=0;k<i.length;k++){let b=i[k];b.step==o-1&&m.eq(i[k].style)&&(w=b)}w?(w.to=h,w.step=o):i.push({style:m,from:Math.max(u,e),to:h,step:o})}}}),i.forEach(l=>n.step(new rs(l.from,l.to,l.style)))}function yv(n,e,t,r=t.contentMatch,i=!0){let o=n.doc.nodeAt(e),l=[],u=e+1;for(let f=0;f<o.childCount;f++){let h=o.child(f),g=u+h.nodeSize,m=r.matchType(h.type);if(!m)l.push(new Gn(u,g,Ne.empty));else{r=m;for(let w=0;w<h.marks.length;w++)t.allowsMarkType(h.marks[w].type)||n.step(new rs(u,g,h.marks[w]));if(i&&h.isText&&t.whitespace!="pre"){let w,k=/\r?\n|\r/g,b;for(;w=k.exec(h.text);)b||(b=new Ne(_e.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),l.push(new Gn(u+w.index,u+w.index+w[0].length,b))}}u=g}if(!r.validEnd){let f=r.fillBefore(_e.empty,!0);n.replace(u,u,new Ne(f,0,0))}for(let f=l.length-1;f>=0;f--)n.step(l[f])}function KT(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function W1(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),o=n.$from.index(r),l=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(o,l,t))return r;if(r==0||i.type.spec.isolating||!KT(i,o,l))break}return null}function JT(n,e,t){let{$from:r,$to:i,depth:o}=e,l=r.before(o+1),u=i.after(o+1),f=l,h=u,g=_e.empty,m=0;for(let b=o,A=!1;b>t;b--)A||r.index(b)>0?(A=!0,g=_e.from(r.node(b).copy(g)),m++):f--;let w=_e.empty,k=0;for(let b=o,A=!1;b>t;b--)A||i.after(b+1)<i.end(b)?(A=!0,w=_e.from(i.node(b).copy(w)),k++):h++;n.step(new fr(f,h,l,u,new Ne(g.append(w),m,k),g.size-m,!0))}function o5(n,e,t=null,r=n){let i=GT(n,e),o=i&&QT(r,e);return o?i.map(pk).concat({type:e,attrs:t}).concat(o.map(pk)):null}function pk(n){return{type:n,attrs:null}}function GT(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let l=o.length?o[0]:e;return t.canReplaceWith(r,i,l)?o:null}function QT(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.child(r),l=e.contentMatch.findWrapping(o.type);if(!l)return null;let f=(l.length?l[l.length-1]:e).contentMatch;for(let h=r;f&&h<i;h++)f=f.matchType(t.child(h).type);return!f||!f.validEnd?null:l}function YT(n,e,t){let r=_e.empty;for(let l=t.length-1;l>=0;l--){if(r.size){let u=t[l].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=_e.from(t[l].type.create(t[l].attrs,r))}let i=e.start,o=e.end;n.step(new fr(i,o,i,o,new Ne(r,0,0),t.length,!0))}function XT(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(l,u)=>{let f=typeof i=="function"?i(l):i;if(l.isTextblock&&!l.hasMarkup(r,f)&&ZT(n.doc,n.mapping.slice(o).map(u),r)){let h=null;if(r.schema.linebreakReplacement){let k=r.whitespace=="pre",b=!!r.contentMatch.matchType(r.schema.linebreakReplacement);k&&!b?h=!1:!k&&b&&(h=!0)}h===!1&&l5(n,l,u,o),yv(n,n.mapping.slice(o).map(u,1),r,void 0,h===null);let g=n.mapping.slice(o),m=g.map(u,1),w=g.map(u+l.nodeSize,1);return n.step(new fr(m,w,m+1,w-1,new Ne(_e.from(r.create(f,null,l.marks)),0,0),1,!0)),h===!0&&s5(n,l,u,o),!1}})}function s5(n,e,t,r){e.forEach((i,o)=>{if(i.isText){let l,u=/\r?\n|\r/g;for(;l=u.exec(i.text);){let f=n.mapping.slice(r).map(t+1+o+l.index);n.replaceWith(f,f+1,e.type.schema.linebreakReplacement.create())}}})}function l5(n,e,t,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let l=n.mapping.slice(r).map(t+1+o);n.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function ZT(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function eM(n,e,t,r,i){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let l=t.create(r,null,i||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,l);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new fr(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new Ne(_e.from(l),0,0),1,!0))}function Xh(n,e,t=1,r){let i=n.resolve(e),o=i.depth-t,l=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!l.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let h=i.depth-1,g=t-2;h>o;h--,g--){let m=i.node(h),w=i.index(h);if(m.type.spec.isolating)return!1;let k=m.content.cutByIndex(w,m.childCount),b=r&&r[g+1];b&&(k=k.replaceChild(0,b.type.create(b.attrs)));let A=r&&r[g]||m;if(!m.canReplace(w+1,m.childCount)||!A.type.validContent(k))return!1}let u=i.indexAfter(o),f=r&&r[0];return i.node(o).canReplaceWith(u,u,f?f.type:i.node(o+1).type)}function tM(n,e,t=1,r){let i=n.doc.resolve(e),o=_e.empty,l=_e.empty;for(let u=i.depth,f=i.depth-t,h=t-1;u>f;u--,h--){o=_e.from(i.node(u).copy(o));let g=r&&r[h];l=_e.from(g?g.type.create(g.attrs,l):i.node(u).copy(l))}n.step(new Gn(e,e,new Ne(o.append(l),t,t),!0))}function j1(n,e){let t=n.resolve(e),r=t.index();return rM(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function nM(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),l=o.type==r?n.type.schema.nodes.text:o.type;if(t=t.matchType(l),!t||!n.type.allowsMarks(o.marks))return!1}return t.validEnd}function rM(n,e){return!!(n&&e&&!n.isLeaf&&nM(n,e))}function iM(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,o=n.doc.resolve(e-t),l=o.node().type;if(i&&l.inlineContent){let g=l.whitespace=="pre",m=!!l.contentMatch.matchType(i);g&&!m?r=!1:!g&&m&&(r=!0)}let u=n.steps.length;if(r===!1){let g=n.doc.resolve(e+t);l5(n,g.node(),g.before(),u)}l.inlineContent&&yv(n,e+t-1,l,o.node().contentMatchAt(o.index()),r==null);let f=n.mapping.slice(u),h=f.map(e-t);if(n.step(new Gn(h,f.map(e+t,-1),Ne.empty,!0)),r===!0){let g=n.doc.resolve(h);s5(n,g.node(),g.before(),n.steps.length)}return n}function oM(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,t))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,t))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function sM(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let o=0;o<t.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let l=r.depth;l>=0;l--){let u=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,f=r.index(l)+(u>0?1:0),h=r.node(l),g=!1;if(o==1)g=h.canReplace(f,f,i);else{let m=h.contentMatchAt(f).findWrapping(i.firstChild.type);g=m&&h.canReplaceWith(f,f,m[0])}if(g)return u==0?r.pos:u<0?r.before(l+1):r.after(l+1)}return null}function vv(n,e,t=e,r=Ne.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),o=n.resolve(t);return a5(i,o,r)?new Gn(e,t,r):new lM(i,o,r).fit()}function a5(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class lM{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=_e.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=_e.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,l=r.depth,u=i.depth;for(;l&&u&&o.childCount==1;)o=o.firstChild.content,l--,u--;let f=new Ne(o,l,u);return e>-1?new fr(r.pos,e,this.$to.pos,this.$to.end(),f,t):f.size||r.pos!=this.$to.pos?new Gn(r.pos,i.pos,f):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Iy(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let l=i.firstChild;for(let u=this.depth;u>=0;u--){let{type:f,match:h}=this.frontier[u],g,m=null;if(t==1&&(l?h.matchType(l.type)||(m=h.fillBefore(_e.from(l),!1)):o&&f.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:u,parent:o,inject:m};if(t==2&&l&&(g=h.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:u,parent:o,wrap:g};if(o&&h.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Iy(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Ne(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Iy(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new Ne(Wh(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new Ne(Wh(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let A=0;A<o.length;A++)this.openFrontierNode(o[A]);let l=this.unplaced,u=r?r.content:l.content,f=l.openStart-e,h=0,g=[],{match:m,type:w}=this.frontier[t];if(i){for(let A=0;A<i.childCount;A++)g.push(i.child(A));m=m.matchFragment(i)}let k=u.size+e-(l.content.size-l.openEnd);for(;h<u.childCount;){let A=u.child(h),O=m.matchType(A.type);if(!O)break;h++,(h>1||f==0||A.content.size)&&(m=O,g.push(u5(A.mark(w.allowedMarks(A.marks)),h==1?f:0,h==u.childCount?k:-1)))}let b=h==u.childCount;b||(k=-1),this.placed=jh(this.placed,t,_e.from(g)),this.frontier[t].match=m,b&&k<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let A=0,O=u;A<k;A++){let F=O.lastChild;this.frontier.push({type:F.type,match:F.contentMatchAt(F.childCount)}),O=F.content}this.unplaced=b?e==0?Ne.empty:new Ne(Wh(l.content,e-1,1),e-1,k<0?l.openEnd:e-1):new Ne(Wh(l.content,e,h),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Py(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),l=Py(e,t,i,r,o);if(l){for(let u=t-1;u>=0;u--){let{match:f,type:h}=this.frontier[u],g=Py(e,u,h,f,!0);if(!g||g.childCount)continue e}return{depth:t,fit:l,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=jh(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=jh(this.placed,this.depth,_e.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(_e.empty,!0);t.childCount&&(this.placed=jh(this.placed,this.frontier.length,t))}}function Wh(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Wh(n.firstChild.content,e-1,t)))}function jh(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(jh(n.lastChild.content,e-1,t)))}function Iy(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function u5(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,u5(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(_e.empty,!0)))),n.copy(r)}function Py(n,e,t,r,i){let o=n.node(e),l=i?n.indexAfter(e):n.index(e);if(l==o.childCount&&!t.compatibleContent(o.type))return null;let u=r.fillBefore(o.content,!0,l);return u&&!aM(t,o.content,l)?u:null}function aM(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function uM(n){return n.spec.defining||n.spec.definingForContent}function cM(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),o=n.doc.resolve(t);if(a5(i,o,r))return n.step(new Gn(e,t,r));let l=f5(i,n.doc.resolve(t));l[l.length-1]==0&&l.pop();let u=-(i.depth+1);l.unshift(u);for(let w=i.depth,k=i.pos-1;w>0;w--,k--){let b=i.node(w).type.spec;if(b.defining||b.definingAsContext||b.isolating)break;l.indexOf(w)>-1?u=w:i.before(w)==k&&l.splice(1,0,-w)}let f=l.indexOf(u),h=[],g=r.openStart;for(let w=r.content,k=0;;k++){let b=w.firstChild;if(h.push(b),k==r.openStart)break;w=b.content}for(let w=g-1;w>=0;w--){let k=h[w],b=uM(k.type);if(b&&!k.sameMarkup(i.node(Math.abs(u)-1)))g=w;else if(b||!k.type.isTextblock)break}for(let w=r.openStart;w>=0;w--){let k=(w+g+1)%(r.openStart+1),b=h[k];if(b)for(let A=0;A<l.length;A++){let O=l[(A+f)%l.length],F=!0;O<0&&(F=!1,O=-O);let V=i.node(O-1),I=i.index(O-1);if(V.canReplaceWith(I,I,b.type,b.marks))return n.replace(i.before(O),F?o.after(O):t,new Ne(c5(r.content,0,r.openStart,k),k,r.openEnd))}}let m=n.steps.length;for(let w=l.length-1;w>=0&&(n.replace(e,t,r),!(n.steps.length>m));w--){let k=l[w];k<0||(e=i.before(k),t=o.after(k))}}function c5(n,e,t,r,i){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(c5(o.content,e+1,t,r,o)))}if(e>r){let o=i.contentMatchAt(0),l=o.fillBefore(n).append(n);n=l.append(o.matchFragment(l).fillBefore(_e.empty,!0))}return n}function fM(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=oM(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new Ne(_e.from(r),0,0))}function dM(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),o=f5(r,i);for(let l=0;l<o.length;l++){let u=o[l],f=l==o.length-1;if(f&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),i.end(u));if(u>0&&(f||r.node(u-1).canReplace(r.index(u-1),i.indexAfter(u-1))))return n.delete(r.before(u),i.after(u))}for(let l=1;l<=r.depth&&l<=i.depth;l++)if(e-r.start(l)==r.depth-l&&t>r.end(l)&&i.end(l)-t!=i.depth-l&&r.start(l-1)==i.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),i.index(l-1)))return n.delete(r.before(l),t);n.delete(e,t)}function f5(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let o=n.start(i);if(o<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&t.push(i)}return t}class Tf extends dr{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return wn.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return wn.fromReplace(e,this.pos,this.pos+1,new Ne(_e.from(i),0,t.isLeaf?0:1))}getMap(){return mi.empty}invert(e){return new Tf(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Tf(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Tf(t.pos,t.attr,t.value)}}dr.jsonID("attr",Tf);class dp extends dr{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return wn.ok(r)}getMap(){return mi.empty}invert(e){return new dp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new dp(t.attr,t.value)}}dr.jsonID("docAttr",dp);let Bf=class extends Error{};Bf=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Bf.prototype=Object.create(Error.prototype);Bf.prototype.constructor=Bf;Bf.prototype.name="TransformError";class d5{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new fp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Bf(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=Ne.empty){let i=vv(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new Ne(_e.from(r),0,0))}delete(e,t){return this.replace(e,t,Ne.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return cM(this,e,t,r),this}replaceRangeWith(e,t,r){return fM(this,e,t,r),this}deleteRange(e,t){return dM(this,e,t),this}lift(e,t){return JT(this,e,t),this}join(e,t=1){return iM(this,e,t),this}wrap(e,t){return YT(this,e,t),this}setBlockType(e,t=e,r,i=null){return XT(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return eM(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new Tf(e,t,r)),this}setDocAttribute(e,t){return this.step(new dp(e,t)),this}addNodeMark(e,t){return this.step(new Gl(e,t)),this}removeNodeMark(e,t){if(!(t instanceof kt)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new Ff(e,t)),this}split(e,t=1,r){return tM(this,e,t,r),this}addMark(e,t,r){return VT(this,e,t,r),this}removeMark(e,t,r){return qT(this,e,t,r),this}clearIncompatible(e,t,r){return yv(this,e,t,r),this}}const Oy=Object.create(null);class et{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new h5(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Ne.empty){let r=t.content.lastChild,i=null;for(let u=0;u<t.openEnd;u++)i=r,r=r.lastChild;let o=e.steps.length,l=this.ranges;for(let u=0;u<l.length;u++){let{$from:f,$to:h}=l[u],g=e.mapping.slice(o);e.replaceRange(g.map(f.pos),g.map(h.pos),u?Ne.empty:t),u==0&&yk(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:l,$to:u}=i[o],f=e.mapping.slice(r),h=f.map(l.pos),g=f.map(u.pos);o?e.deleteRange(h,g):(e.replaceRangeWith(h,g,t),yk(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new st(e):yf(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let l=t<0?yf(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):yf(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(l)return l}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Kr(e.node(0))}static atStart(e){return yf(e,e,0,0,1)||new Kr(e)}static atEnd(e){return yf(e,e,e.content.size,e.childCount,-1)||new Kr(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Oy[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Oy)throw new RangeError("Duplicate use of selection JSON ID "+e);return Oy[e]=t,t.prototype.jsonID=e,t}getBookmark(){return st.between(this.$anchor,this.$head).getBookmark()}}et.prototype.visible=!0;class h5{constructor(e,t){this.$from=e,this.$to=t}}let mk=!1;function gk(n){!mk&&!n.parent.inlineContent&&(mk=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class st extends et{constructor(e,t=e){gk(e),gk(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return et.near(r);let i=e.resolve(t.map(this.anchor));return new st(i.parent.inlineContent?i:r,r)}replace(e,t=Ne.empty){if(super.replace(e,t),t==Ne.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof st&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new $1(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new st(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let o=et.findFrom(t,r,!0)||et.findFrom(t,-r,!0);if(o)t=o.$head;else return et.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(et.findFrom(e,-r,!0)||et.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new st(e,t)}}et.jsonID("text",st);class $1{constructor(e,t){this.anchor=e,this.head=t}map(e){return new $1(e.map(this.anchor),e.map(this.head))}resolve(e){return st.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ze extends et{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),o=e.resolve(i);return r?et.near(o):new Ze(o)}content(){return new Ne(_e.from(this.node),0,0)}eq(e){return e instanceof Ze&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new wv(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ze(e.resolve(t.anchor))}static create(e,t){return new Ze(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ze.prototype.visible=!1;et.jsonID("node",Ze);class wv{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new $1(r,r):new wv(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&Ze.isSelectable(r)?new Ze(t):et.near(t)}}class Kr extends et{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Ne.empty){if(t==Ne.empty){e.delete(0,e.doc.content.size);let r=et.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Kr(e)}map(e){return new Kr(e)}eq(e){return e instanceof Kr}getBookmark(){return hM}}et.jsonID("all",Kr);const hM={map(){return this},resolve(n){return new Kr(n)}};function yf(n,e,t,r,i,o=!1){if(e.inlineContent)return st.create(n,t);for(let l=r-(i>0?0:1);i>0?l<e.childCount:l>=0;l+=i){let u=e.child(l);if(u.isAtom){if(!o&&Ze.isSelectable(u))return Ze.create(n,t-(i<0?u.nodeSize:0))}else{let f=yf(n,u,t+i,i<0?u.childCount:0,i,o);if(f)return f}t+=u.nodeSize*i}return null}function yk(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Gn||i instanceof fr))return;let o=n.mapping.maps[r],l;o.forEach((u,f,h,g)=>{l==null&&(l=g)}),n.setSelection(et.near(n.doc.resolve(l),t))}const vk=1,wk=2,kk=4;class pM extends d5{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|vk)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&vk)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=wk,this}ensureMarks(e){return kt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&wk)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||kt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let l=this.doc.resolve(t);o=r==t?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,o)),this.selection.empty||this.setSelection(et.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=kk,this}get scrolledIntoView(){return(this.updated&kk)>0}}function xk(n,e){return!e||!n?n:n.bind(e)}class $h{constructor(e,t,r){this.name=e,this.init=xk(t.init,r),this.apply=xk(t.apply,r)}}const mM=[new $h("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new $h("selection",{init(n,e){return n.selection||et.atStart(e.doc)},apply(n){return n.selection}}),new $h("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new $h("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Ry{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=mM.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new $h(r.key,r.spec.state,r))})}}class gu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let l=0;l<this.config.plugins.length;l++){let u=this.config.plugins[l];if(u.spec.appendTransaction){let f=i?i[l].n:0,h=i?i[l].state:this,g=f<t.length&&u.spec.appendTransaction.call(u,f?t.slice(f):t,h,r);if(g&&r.filterTransaction(g,l)){if(g.setMeta("appendedTransaction",e),!i){i=[];for(let m=0;m<this.config.plugins.length;m++)i.push(m<l?{state:r,n:t.length}:{state:this,n:0})}t.push(g),r=r.applyInner(g),o=!0}i&&(i[l]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new gu(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new pM(this)}static create(e){let t=new Ry(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new gu(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new Ry(this.schema,e.plugins),r=t.fields,i=new gu(t);for(let o=0;o<r.length;o++){let l=r[o].name;i[l]=this.hasOwnProperty(l)?this[l]:r[o].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Ry(e.schema,e.plugins),o=new gu(i);return i.fields.forEach(l=>{if(l.name=="doc")o.doc=wo.fromJSON(e.schema,t.doc);else if(l.name=="selection")o.selection=et.fromJSON(o.doc,t.selection);else if(l.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let f=r[u],h=f.spec.state;if(f.key==l.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){o[l.name]=h.fromJSON.call(f,e,t[u],o);return}}o[l.name]=l.init(e,o)}}),o}}function p5(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=p5(i,e,{})),t[r]=i}return t}class Zn{constructor(e){this.spec=e,this.props={},e.props&&p5(e.props,this,this.props),this.key=e.key?e.key.key:m5("plugin")}getState(e){return e[this.key]}}const Dy=Object.create(null);function m5(n){return n in Dy?n+"$"+ ++Dy[n]:(Dy[n]=0,n+"$")}class Ln{constructor(e="key"){this.key=m5(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}class Yr{constructor(e,t,r={}){this.match=e,this.match=e,this.handler=typeof t=="string"?gM(t):t,this.undoable=r.undoable!==!1,this.inCode=r.inCode||!1,this.inCodeMark=r.inCodeMark!==!1}}function gM(n){return function(e,t,r,i){let o=n;if(t[1]){let l=t[0].lastIndexOf(t[1]);o+=t[0].slice(l+t[1].length),r+=l;let u=r-i;u>0&&(o=t[0].slice(l-u,l)+o,r=i)}return e.tr.insertText(o,r,i)}}const yM=(n,e)=>{let t=n.plugins;for(let r=0;r<t.length;r++){let i=t[r],o;if(i.spec.isInputRules&&(o=i.getState(n))){if(e){let l=n.tr,u=o.transform;for(let f=u.steps.length-1;f>=0;f--)l.step(u.steps[f].invert(u.docs[f]));if(o.text){let f=l.doc.resolve(o.from).marks();l.replaceWith(o.from,o.to,n.schema.text(o.text,f))}else l.delete(o.from,o.to);e(l)}return!0}}return!1};new Yr(/--$/,"",{inCodeMark:!1});new Yr(/\.\.\.$/,"",{inCodeMark:!1});new Yr(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"",{inCodeMark:!1});new Yr(/"$/,"",{inCodeMark:!1});new Yr(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"",{inCodeMark:!1});new Yr(/'$/,"",{inCodeMark:!1});function kv(n,e,t=null,r){return new Yr(n,(i,o,l,u)=>{let f=t instanceof Function?t(o):t,h=i.tr.delete(l,u),g=h.doc.resolve(l),m=g.blockRange(),w=m&&o5(m,e,f);if(!w)return null;h.wrap(m,w);let k=h.doc.resolve(l-1).nodeBefore;return k&&k.type==e&&j1(h.doc,l-1)&&(!r||r(o,k))&&h.join(l-1),h})}function g5(n,e,t=null){return new Yr(n,(r,i,o,l)=>{let u=r.doc.resolve(o),f=t instanceof Function?t(i):t;return u.node(-1).canReplaceWith(u.index(-1),u.indexAfter(-1),e)?r.tr.delete(o,l).setBlockType(o,o,e,f):null})}const na=typeof navigator<"u"?navigator:null,Sk=typeof document<"u"?document:null,sa=na&&na.userAgent||"",R2=/Edge\/(\d+)/.exec(sa),y5=/MSIE \d/.exec(sa),D2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(sa),H1=!!(y5||D2||R2),vM=y5?document.documentMode:D2?+D2[1]:R2?+R2[1]:0,v5=!H1&&/gecko\/(\d+)/i.test(sa),wM=v5&&+(/Firefox\/(\d+)/.exec(sa)||[0,0])[1],z2=!H1&&/Chrome\/(\d+)/.exec(sa),kM=!!z2,xM=z2?+z2[1]:0,w5=!H1&&!!na&&/Apple Computer/.test(na.vendor),k5=w5&&(/Mobile\/\w+/.test(sa)||!!na&&na.maxTouchPoints>2),SM=k5||(na?/Mac/.test(na.platform):!1),bM=/Android \d/.test(sa),x5=!!Sk&&"webkitFontSmoothing"in Sk.documentElement.style,_M=x5?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;var tD=Object.freeze({__proto__:null,android:bM,chrome:kM,chrome_version:xM,gecko:v5,gecko_version:wM,ie:H1,ie_version:vM,ios:k5,mac:SM,safari:w5,webkit:x5,webkit_version:_M});function zy(n,e,t,r,i,o){if(n.composing)return!1;const l=n.state,u=l.doc.resolve(e);if(u.parent.type.spec.code)return!1;const f=u.parent.textBetween(Math.max(0,u.parentOffset-500),u.parentOffset,void 0,"")+r;for(let h of i){const g=h,m=g.match.exec(f),w=m&&m[0]&&g.handler(l,m,e-(m[0].length-r.length),t);if(w)return g.undoable!==!1&&w.setMeta(o,{transform:w,from:e,to:t,text:r}),n.dispatch(w),!0}return!1}const CM=new Ln("MILKDOWN_CUSTOM_INPUTRULES");function EM({rules:n}){const e=new Zn({key:CM,isInputRules:!0,state:{init(){return null},apply(t,r){const i=t.getMeta(this);return i||(t.selectionSet||t.docChanged?null:r)}},props:{handleTextInput(t,r,i,o){return zy(t,r,i,o,n,e)},handleDOMEvents:{compositionend:t=>(setTimeout(()=>{const{$cursor:r}=t.state.selection;r&&zy(t,r.pos,r.pos,"",n,e)}),!1)},handleKeyDown(t,r){if(r.key!=="Enter")return!1;const{$cursor:i}=t.state.selection;return i?zy(t,i.pos,i.pos,`
`,n,e):!1}}});return e}function Ep(n,e,t={}){return new Yr(n,(r,i,o,l)=>{var u,f,h,g;const{tr:m}=r,w=i.length;let k=i[w-1],b=i[0],A=[],O=l;const F={group:k,fullMatch:b,start:o,end:l},V=(u=t.updateCaptured)==null?void 0:u.call(t,F);if(Object.assign(F,V),{group:k,fullMatch:b,start:o,end:l}=F,b===null||(k==null?void 0:k.trim())==="")return null;if(k){const I=b.search(/\S/),W=o+b.indexOf(k),B=W+k.length;A=(f=m.storedMarks)!=null?f:[],B<l&&m.delete(B,l),W>o&&m.delete(o+I,W),O=o+I+k.length;const z=(h=t.getAttr)==null?void 0:h.call(t,i);m.addMark(o,O,e.create(z)),m.setStoredMarks(A),(g=t.beforeDispatch)==null||g.call(t,{match:i,start:o,end:l,tr:m})}return m})}function nD(n,e,t={}){return new Yr(n,(r,i,o,l)=>{var u,f,h;const{tr:g}=r;let m=i[1],w=i[0];const k={group:m,fullMatch:w,start:o,end:l},b=(u=t.updateCaptured)==null?void 0:u.call(t,k);if(Object.assign(k,b),{group:m,fullMatch:w,start:o,end:l}=k,w===null||!m||m.trim()==="")return null;const A=(f=t.getAttr)==null?void 0:f.call(t,i),O=e.createAndFill(A);return O&&(g.replaceRangeWith(e.isBlock?g.doc.resolve(o).before():o,l,O),(h=t.beforeDispatch)==null||h.call(t,{match:[w,m??""],start:o,end:l,tr:g})),g})}var TM=Object.defineProperty,MM=Object.defineProperties,NM=Object.getOwnPropertyDescriptors,bk=Object.getOwnPropertySymbols,AM=Object.prototype.hasOwnProperty,IM=Object.prototype.propertyIsEnumerable,_k=(n,e,t)=>e in n?TM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,PM=(n,e)=>{for(var t in e||(e={}))AM.call(e,t)&&_k(n,t,e[t]);if(bk)for(var t of bk(e))IM.call(e,t)&&_k(n,t,e[t]);return n},OM=(n,e)=>MM(n,NM(e));function Ck(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function rD(n,e,t){const i=n.state.doc.content.size,o=Ck(e,0,i),l=Ck(t,0,i),u=n.coordsAtPos(o),f=n.coordsAtPos(l,-1),h=Math.min(u.top,f.top),g=Math.max(u.bottom,f.bottom),m=Math.min(u.left,f.left),w=Math.max(u.right,f.right),k=w-m,b=g-h,F={top:h,bottom:g,left:m,right:w,width:k,height:b,x:m,y:h};return OM(PM({},F),{toJSON:()=>F})}function V1(n){return Object.assign(Object.create(n),n).setTime(Date.now())}function RM(n,e){return Array.isArray(n)&&n.includes(e.type)||e.type===n}function DM(n){return e=>{for(let t=e.depth;t>0;t-=1){const r=e.node(t);if(n(r)){const i=e.before(t),o=e.after(t);return{from:i,to:o,node:r}}}}}function zM(n,e){return DM(t=>t.type===e)(n)}function LM(n,e){const t=e.nodes[n];if(!t)throw P8("node",n);return t}function xv(n){return e=>{for(let t=e.depth;t>0;t--){const r=e.node(t);if(n(r))return{pos:t>0?e.before(t):0,start:e.start(t),depth:t,node:r}}}}function iD(n){return e=>xv(n)(e.$from)}function FM(n,e){if(!(n instanceof Ze))return;const{node:t,$from:r}=n;if(RM(e,t))return{node:t,pos:r.pos,start:r.start(r.depth),depth:r.depth}}const Sv=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function BM(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const S5=(n,e,t)=>{let r=BM(n,t);if(!r)return!1;let i=_5(r);if(!i){let l=r.blockRange(),u=l&&W1(l);return u==null?!1:(e&&e(n.tr.lift(l,u).scrollIntoView()),!0)}let o=i.nodeBefore;if(E5(n,i,e,-1))return!0;if(r.parent.content.size==0&&(Uf(o,"end")||Ze.isSelectable(o)))for(let l=r.depth;;l--){let u=vv(n.doc,r.before(l),r.after(l),Ne.empty);if(u&&u.slice.size<u.to-u.from){if(e){let f=n.tr.step(u);f.setSelection(Uf(o,"end")?et.findFrom(f.doc.resolve(f.mapping.map(i.pos,-1)),-1):Ze.create(f.doc,i.pos-o.nodeSize)),e(f.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1};function Uf(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const b5=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=_5(r)}let l=o&&o.nodeBefore;return!l||!Ze.isSelectable(l)?!1:(e&&e(n.tr.setSelection(Ze.create(n.doc,o.pos-l.nodeSize)).scrollIntoView()),!0)};function _5(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function UM(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const WM=(n,e,t)=>{let r=UM(n,t);if(!r)return!1;let i=C5(r);if(!i)return!1;let o=i.nodeAfter;if(E5(n,i,e,1))return!0;if(r.parent.content.size==0&&(Uf(o,"start")||Ze.isSelectable(o))){let l=vv(n.doc,r.before(),r.after(),Ne.empty);if(l&&l.slice.size<l.to-l.from){if(e){let u=n.tr.step(l);u.setSelection(Uf(o,"start")?et.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):Ze.create(u.doc,u.mapping.map(i.pos))),e(u.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},jM=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=C5(r)}let l=o&&o.nodeAfter;return!l||!Ze.isSelectable(l)?!1:(e&&e(n.tr.setSelection(Ze.create(n.doc,o.pos)).scrollIntoView()),!0)};function C5(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const $M=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function bv(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const HM=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),o=t.indexAfter(-1),l=bv(i.contentMatchAt(o));if(!l||!i.canReplaceWith(o,o,l))return!1;if(e){let u=t.after(),f=n.tr.replaceWith(u,u,l.createAndFill());f.setSelection(et.near(f.doc.resolve(u),1)),e(f.scrollIntoView())}return!0},VM=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof Kr||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=bv(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let l=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,u=n.tr.insert(l,o.createAndFill());u.setSelection(st.create(u.doc,l+1)),e(u.scrollIntoView())}return!0},qM=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(Xh(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),i=r&&W1(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function KM(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Ze&&e.selection.node.isBlock)return!r.parentOffset||!Xh(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],l,u,f=!1,h=!1;for(let k=r.depth;;k--)if(r.node(k).isBlock){f=r.end(k)==r.pos+(r.depth-k),h=r.start(k)==r.pos-(r.depth-k),u=bv(r.node(k-1).contentMatchAt(r.indexAfter(k-1))),o.unshift(f&&u?{type:u}:null),l=k;break}else{if(k==1)return!1;o.unshift(null)}let g=e.tr;(e.selection instanceof st||e.selection instanceof Kr)&&g.deleteSelection();let m=g.mapping.map(r.pos),w=Xh(g.doc,m,o.length,o);if(w||(o[0]=u?{type:u}:null,w=Xh(g.doc,m,o.length,o)),g.split(m,o.length,o),!f&&h&&r.node(l).type!=u){let k=g.mapping.map(r.before(l)),b=g.doc.resolve(k);u&&r.node(l-1).canReplaceWith(b.index(),b.index()+1,u)&&g.setNodeMarkup(g.mapping.map(r.before(l)),u)}return t&&t(g.scrollIntoView()),!0}}const JM=KM(),GM=(n,e)=>(e&&e(n.tr.setSelection(new Kr(n.doc))),!0);function QM(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||j1(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function E5(n,e,t,r){let i=e.nodeBefore,o=e.nodeAfter,l,u,f=i.type.spec.isolating||o.type.spec.isolating;if(!f&&QM(n,e,t))return!0;let h=!f&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(l=(u=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&u.matchType(l[0]||o.type).validEnd){if(t){let k=e.pos+o.nodeSize,b=_e.empty;for(let F=l.length-1;F>=0;F--)b=_e.from(l[F].create(null,b));b=_e.from(i.copy(b));let A=n.tr.step(new fr(e.pos-1,k,e.pos,k,new Ne(b,1,0),l.length,!0)),O=A.doc.resolve(k+2*l.length);O.nodeAfter&&O.nodeAfter.type==i.type&&j1(A.doc,O.pos)&&A.join(O.pos),t(A.scrollIntoView())}return!0}let g=o.type.spec.isolating||r>0&&f?null:et.findFrom(e,1),m=g&&g.$from.blockRange(g.$to),w=m&&W1(m);if(w!=null&&w>=e.depth)return t&&t(n.tr.lift(m,w).scrollIntoView()),!0;if(h&&Uf(o,"start",!0)&&Uf(i,"end")){let k=i,b=[];for(;b.push(k),!k.isTextblock;)k=k.lastChild;let A=o,O=1;for(;!A.isTextblock;A=A.firstChild)O++;if(k.canReplace(k.childCount,k.childCount,A.content)){if(t){let F=_e.empty;for(let I=b.length-1;I>=0;I--)F=_e.from(b[I].copy(F));let V=n.tr.step(new fr(e.pos-b.length,e.pos+o.nodeSize,e.pos+O,e.pos+o.nodeSize-O,new Ne(F,b.length,0),0,!0));t(V.scrollIntoView())}return!0}}return!1}function T5(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(t&&t(e.tr.setSelection(st.create(e.doc,n<0?i.start(o):i.end(o)))),!0):!1}}const YM=T5(-1),XM=T5(1);function _v(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,l=i.blockRange(o),u=l&&o5(l,n,e);return u?(r&&r(t.tr.wrap(l,u).scrollIntoView()),!0):!1}}function hp(n,e=null){return function(t,r){let i=!1;for(let o=0;o<t.selection.ranges.length&&!i;o++){let{$from:{pos:l},$to:{pos:u}}=t.selection.ranges[o];t.doc.nodesBetween(l,u,(f,h)=>{if(i)return!1;if(!(!f.isTextblock||f.hasMarkup(n,e)))if(f.type==n)i=!0;else{let g=t.doc.resolve(h),m=g.index();i=g.parent.canReplaceWith(m,m+1,n)}})}if(!i)return!1;if(r){let o=t.tr;for(let l=0;l<t.selection.ranges.length;l++){let{$from:{pos:u},$to:{pos:f}}=t.selection.ranges[l];o.setBlockType(u,f,n,e)}r(o.scrollIntoView())}return!0}}function ZM(n,e,t,r){for(let i=0;i<e.length;i++){let{$from:o,$to:l}=e[i],u=o.depth==0?n.inlineContent&&n.type.allowsMarkType(t):!1;if(n.nodesBetween(o.pos,l.pos,(f,h)=>{if(u)return!1;u=f.inlineContent&&f.type.allowsMarkType(t)}),u)return!0}return!1}function q1(n,e=null,t){return function(r,i){let{empty:o,$cursor:l,ranges:u}=r.selection;if(o&&!l||!ZM(r.doc,u,n))return!1;if(i)if(l)n.isInSet(r.storedMarks||l.marks())?i(r.tr.removeStoredMark(n)):i(r.tr.addStoredMark(n.create(e)));else{let f,h=r.tr;f=!u.some(g=>r.doc.rangeHasMark(g.$from.pos,g.$to.pos,n));for(let g=0;g<u.length;g++){let{$from:m,$to:w}=u[g];if(!f)h.removeMark(m.pos,w.pos,n);else{let k=m.pos,b=w.pos,A=m.nodeAfter,O=w.nodeBefore,F=A&&A.isText?/^\s*/.exec(A.text)[0].length:0,V=O&&O.isText?/\s*$/.exec(O.text)[0].length:0;k+F<b&&(k+=F,b-=V),h.addMark(k,b,n.create(e))}}i(h.scrollIntoView())}return!0}}function K1(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}let Ly=K1(Sv,S5,b5),Ek=K1(Sv,WM,jM);const Ks={Enter:K1($M,VM,qM,JM),"Mod-Enter":HM,Backspace:Ly,"Mod-Backspace":Ly,"Shift-Backspace":Ly,Delete:Ek,"Mod-Delete":Ek,"Mod-a":GM},M5={"Ctrl-h":Ks.Backspace,"Alt-Backspace":Ks["Mod-Backspace"],"Ctrl-d":Ks.Delete,"Ctrl-Alt-Backspace":Ks["Mod-Delete"],"Alt-Delete":Ks["Mod-Delete"],"Alt-d":Ks["Mod-Delete"],"Ctrl-a":YM,"Ctrl-e":XM};for(let n in Ks)M5[n]=Ks[n];const eN=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,tN=eN?M5:Ks;var ra={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},b1={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},nN=typeof navigator<"u"&&/Mac/.test(navigator.platform),rN=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Qn=0;Qn<10;Qn++)ra[48+Qn]=ra[96+Qn]=String(Qn);for(var Qn=1;Qn<=24;Qn++)ra[Qn+111]="F"+Qn;for(var Qn=65;Qn<=90;Qn++)ra[Qn]=String.fromCharCode(Qn+32),b1[Qn]=String.fromCharCode(Qn);for(var Fy in ra)b1.hasOwnProperty(Fy)||(b1[Fy]=ra[Fy]);function iN(n){var e=nN&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||rN&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?b1:ra)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const oN=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function sN(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,o,l;for(let u=0;u<e.length-1;u++){let f=e[u];if(/^(cmd|meta|m)$/i.test(f))l=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))i=!0;else if(/^s(hift)?$/i.test(f))o=!0;else if(/^mod$/i.test(f))oN?l=!0:i=!0;else throw new Error("Unrecognized modifier name: "+f)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),l&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function lN(n){let e=Object.create(null);for(let t in n)e[sN(t)]=n[t];return e}function By(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function N5(n){return new Zn({props:{handleKeyDown:A5(n)}})}function A5(n){let e=lN(n);return function(t,r){let i=iN(r),o,l=e[By(i,r)];if(l&&l(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let u=e[By(i,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=ra[r.keyCode])&&o!=i){let u=e[By(o,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}const Yn=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Wf=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let L2=null;const qs=function(n,e,t){let r=L2||(L2=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},aN=function(){L2=null},Ou=function(n,e,t,r){return t&&(Tk(n,e,t,r,-1)||Tk(n,e,t,r,1))},uN=/^(img|br|input|textarea|hr)$/i;function Tk(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:$i(n))){let o=n.parentNode;if(!o||o.nodeType!=1||Tp(n)||uN.test(n.nodeName)||n.contentEditable=="false")return!1;e=Yn(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?$i(n):0}else return!1}}function $i(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function cN(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=$i(n)}else if(n.parentNode&&!Tp(n))e=Yn(n),n=n.parentNode;else return null}}function fN(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Tp(n))e=Yn(n)+1,n=n.parentNode;else return null}}function dN(n,e,t){for(let r=e==0,i=e==$i(n);r||i;){if(n==t)return!0;let o=Yn(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,i=i&&o==$i(n)}}function Tp(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const J1=function(n){return n.focusNode&&Ou(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function mu(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function hN(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function pN(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min($i(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min($i(r.startContainer),r.startOffset)}}}const ss=typeof navigator<"u"?navigator:null,Mk=typeof document<"u"?document:null,la=ss&&ss.userAgent||"",F2=/Edge\/(\d+)/.exec(la),I5=/MSIE \d/.exec(la),B2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(la),Jr=!!(I5||B2||F2),Xl=I5?document.documentMode:B2?+B2[1]:F2?+F2[1]:0,So=!Jr&&/gecko\/(\d+)/i.test(la);So&&+(/Firefox\/(\d+)/.exec(la)||[0,0])[1];const U2=!Jr&&/Chrome\/(\d+)/.exec(la),cr=!!U2,P5=U2?+U2[1]:0,Cr=!Jr&&!!ss&&/Apple Computer/.test(ss.vendor),jf=Cr&&(/Mobile\/\w+/.test(la)||!!ss&&ss.maxTouchPoints>2),Wi=jf||(ss?/Mac/.test(ss.platform):!1),mN=ss?/Win/.test(ss.platform):!1,Gs=/Android \d/.test(la),Mp=!!Mk&&"webkitFontSmoothing"in Mk.documentElement.style,gN=Mp?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function yN(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function $s(n,e){return typeof n=="number"?n:n[e]}function vN(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function Nk(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let l=t||n.dom;l;){if(l.nodeType!=1){l=Wf(l);continue}let u=l,f=u==o.body,h=f?yN(o):vN(u),g=0,m=0;if(e.top<h.top+$s(r,"top")?m=-(h.top-e.top+$s(i,"top")):e.bottom>h.bottom-$s(r,"bottom")&&(m=e.bottom-e.top>h.bottom-h.top?e.top+$s(i,"top")-h.top:e.bottom-h.bottom+$s(i,"bottom")),e.left<h.left+$s(r,"left")?g=-(h.left-e.left+$s(i,"left")):e.right>h.right-$s(r,"right")&&(g=e.right-h.right+$s(i,"right")),g||m)if(f)o.defaultView.scrollBy(g,m);else{let k=u.scrollLeft,b=u.scrollTop;m&&(u.scrollTop+=m),g&&(u.scrollLeft+=g);let A=u.scrollLeft-k,O=u.scrollTop-b;e={left:e.left-A,top:e.top-O,right:e.right-A,bottom:e.bottom-O}}let w=f?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(w))break;l=w=="absolute"?l.offsetParent:Wf(l)}}function wN(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,l=t+1;l<Math.min(innerHeight,e.bottom);l+=5){let u=n.root.elementFromPoint(o,l);if(!u||u==n.dom||!n.dom.contains(u))continue;let f=u.getBoundingClientRect();if(f.top>=t-20){r=u,i=f.top;break}}return{refDOM:r,refTop:i,stack:O5(n.dom)}}function O5(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Wf(r));return e}function kN({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;R5(t,r==0?0:r-e)}function R5(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:o}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let df=null;function xN(n){if(n.setActive)return n.setActive();if(df)return n.focus(df);let e=O5(n);n.focus(df==null?{get preventScroll(){return df={preventScroll:!0},!0}}:void 0),df||(df=!1,R5(e,0))}function D5(n,e){let t,r=2e8,i,o=0,l=e.top,u=e.top,f,h;for(let g=n.firstChild,m=0;g;g=g.nextSibling,m++){let w;if(g.nodeType==1)w=g.getClientRects();else if(g.nodeType==3)w=qs(g).getClientRects();else continue;for(let k=0;k<w.length;k++){let b=w[k];if(b.top<=l&&b.bottom>=u){l=Math.max(b.bottom,l),u=Math.min(b.top,u);let A=b.left>e.left?b.left-e.left:b.right<e.left?e.left-b.right:0;if(A<r){t=g,r=A,i=A&&t.nodeType==3?{left:b.right<e.left?b.right:b.left,top:e.top}:e,g.nodeType==1&&A&&(o=m+(e.left>=(b.left+b.right)/2?1:0));continue}}else b.top>e.top&&!f&&b.left<=e.left&&b.right>=e.left&&(f=g,h={left:Math.max(b.left,Math.min(b.right,e.left)),top:b.top});!t&&(e.left>=b.right&&e.top>=b.top||e.left>=b.left&&e.top>=b.bottom)&&(o=m+1)}}return!t&&f&&(t=f,i=h,r=0),t&&t.nodeType==3?SN(t,i):!t||r&&t.nodeType==1?{node:n,offset:o}:D5(t,i)}function SN(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let o=Ul(r,1);if(o.top!=o.bottom&&Cv(e,o))return{node:n,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function Cv(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function bN(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function _N(n,e,t){let{node:r,offset:i}=D5(e,t),o=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();o=l.left!=l.right&&t.left>(l.left+l.right)/2?1:-1}return n.docView.posFromDOM(r,i,o)}function CN(n,e,t,r){let i=-1;for(let o=e,l=!1;o!=n.dom;){let u=n.docView.nearestDesc(o,!0),f;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((f=u.dom.getBoundingClientRect()).width||f.height)&&(u.node.isBlock&&u.parent&&(!l&&f.left>r.left||f.top>r.top?i=u.posBefore:(!l&&f.right<r.left||f.bottom<r.top)&&(i=u.posAfter),l=!0),!u.contentDOM&&i<0&&!u.node.isText))return(u.node.isBlock?r.top<(f.top+f.bottom)/2:r.left<(f.left+f.right)/2)?u.posBefore:u.posAfter;o=u.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function z5(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),o=i;;){let l=n.childNodes[o];if(l.nodeType==1){let u=l.getClientRects();for(let f=0;f<u.length;f++){let h=u[f];if(Cv(e,h))return z5(l,e,h)}}if((o=(o+1)%r)==i)break}return n}function EN(n,e){let t=n.dom.ownerDocument,r,i=0,o=pN(t,e.left,e.top);o&&({node:r,offset:i}=o);let l=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),u;if(!l||!n.dom.contains(l.nodeType!=1?l.parentNode:l)){let h=n.dom.getBoundingClientRect();if(!Cv(e,h)||(l=z5(n.dom,e,h),!l))return null}if(Cr)for(let h=l;r&&h;h=Wf(h))h.draggable&&(r=void 0);if(l=bN(l,e),r){if(So&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let g=r.childNodes[i],m;g.nodeName=="IMG"&&(m=g.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&i++}let h;Mp&&i&&r.nodeType==1&&(h=r.childNodes[i-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(u=CN(n,r,i,e))}u==null&&(u=_N(n,l,e));let f=n.docView.nearestDesc(l,!0);return{pos:u,inside:f?f.posAtStart-f.border:-1}}function Ak(n){return n.top<n.bottom||n.left<n.right}function Ul(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(Ak(r))return r}return Array.prototype.find.call(t,Ak)||n.getBoundingClientRect()}const TN=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function L5(n,e,t){let{node:r,offset:i,atom:o}=n.docView.domFromPos(e,t<0?-1:1),l=Mp||So;if(r.nodeType==3)if(l&&(TN.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let f=Ul(qs(r,i,i),t);if(So&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let h=Ul(qs(r,i-1,i-1),-1);if(h.top==f.top){let g=Ul(qs(r,i,i+1),-1);if(g.top!=f.top)return _h(g,g.left<h.left)}}return f}else{let f=i,h=i,g=t<0?1:-1;return t<0&&!i?(h++,g=-1):t>=0&&i==r.nodeValue.length?(f--,g=1):t<0?f--:h++,_h(Ul(qs(r,f,h),g),g<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(t<0||i==$i(r))){let f=r.childNodes[i-1];if(f.nodeType==1)return Uy(f.getBoundingClientRect(),!1)}if(o==null&&i<$i(r)){let f=r.childNodes[i];if(f.nodeType==1)return Uy(f.getBoundingClientRect(),!0)}return Uy(r.getBoundingClientRect(),t>=0)}if(o==null&&i&&(t<0||i==$i(r))){let f=r.childNodes[i-1],h=f.nodeType==3?qs(f,$i(f)-(l?0:1)):f.nodeType==1&&(f.nodeName!="BR"||!f.nextSibling)?f:null;if(h)return _h(Ul(h,1),!1)}if(o==null&&i<$i(r)){let f=r.childNodes[i];for(;f.pmViewDesc&&f.pmViewDesc.ignoreForCoords;)f=f.nextSibling;let h=f?f.nodeType==3?qs(f,0,l?0:1):f.nodeType==1?f:null:null;if(h)return _h(Ul(h,-1),!0)}return _h(Ul(r.nodeType==3?qs(r):r,-t),t>=0)}function _h(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Uy(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function F5(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function MN(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return F5(n,e,()=>{let{node:o}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(o,!0);if(!u)break;if(u.node.isBlock){o=u.contentDOM||u.dom;break}o=u.dom.parentNode}let l=L5(n,i.pos,1);for(let u=o.firstChild;u;u=u.nextSibling){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=qs(u,0,u.nodeValue.length).getClientRects();else continue;for(let h=0;h<f.length;h++){let g=f[h];if(g.bottom>g.top+1&&(t=="up"?l.top-g.top>(g.bottom-l.top)*2:g.bottom-l.bottom>(l.bottom-g.top)*2))return!1}}return!0})}const NN=/[\u0590-\u08ac]/;function AN(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,l=i==r.parent.content.size,u=n.domSelection();return u?!NN.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?o:l:F5(n,e,()=>{let{focusNode:f,focusOffset:h,anchorNode:g,anchorOffset:m}=n.domSelectionRange(),w=u.caretBidiLevel;u.modify("move",t,"character");let k=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:b,focusOffset:A}=n.domSelectionRange(),O=b&&!k.contains(b.nodeType==1?b:b.parentNode)||f==b&&h==A;try{u.collapse(g,m),f&&(f!=g||h!=m)&&u.extend&&u.extend(f,h)}catch{}return w!=null&&(u.caretBidiLevel=w),O}):r.pos==r.start()||r.pos==r.end()}let Ik=null,Pk=null,Ok=!1;function IN(n,e,t){return Ik==e&&Pk==t?Ok:(Ik=e,Pk=t,Ok=t=="up"||t=="down"?MN(n,e,t):AN(n,e,t))}const Hi=0,Rk=1,yu=2,ls=3;class Np{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=Hi,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,l;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(l)+l.size:this.posAtStart}else{let o,l;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(l):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>Yn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),l;if(o&&(!t||o.node))if(r&&(l=o.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let l=0;l<i.children.length;l++){let u=i.children[l];if(u.size){i=u;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let l=this.children[r],u=o+l.size;if(u>e||l instanceof U5){i=e-o;break}o=u}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof B5&&o.side>=0;r--);if(t<=0){let o,l=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,l=!1);return o&&t&&l&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?Yn(o.dom)+1:0}}else{let o,l=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,l=!1);return o&&l&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?Yn(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let l=r,u=0;;u++){let f=this.children[u],h=l+f.size;if(i==-1&&e<=h){let g=l+f.border;if(e>=g&&t<=h-f.border&&f.node&&f.contentDOM&&this.contentDOM.contains(f.contentDOM))return f.parseRange(e,t,g);e=l;for(let m=u;m>0;m--){let w=this.children[m-1];if(w.size&&w.dom.parentNode==this.contentDOM&&!w.emptyChildAt(1)){i=Yn(w.dom)+1;break}e-=w.size}i==-1&&(i=0)}if(i>-1&&(h>t||u==this.children.length-1)){t=h;for(let g=u+1;g<this.children.length;g++){let m=this.children[g];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){o=Yn(m.dom);break}t+=m.size}o==-1&&(o=this.contentDOM.childNodes.length);break}l=h}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let o=Math.min(e,t),l=Math.max(e,t);for(let k=0,b=0;k<this.children.length;k++){let A=this.children[k],O=b+A.size;if(o>b&&l<O)return A.setSelection(e-b-A.border,t-b-A.border,r,i);b=O}let u=this.domFromPos(e,e?-1:1),f=t==e?u:this.domFromPos(t,t?-1:1),h=r.root.getSelection(),g=r.domSelectionRange(),m=!1;if((So||Cr)&&e==t){let{node:k,offset:b}=u;if(k.nodeType==3){if(m=!!(b&&k.nodeValue[b-1]==`
`),m&&b==k.nodeValue.length)for(let A=k,O;A;A=A.parentNode){if(O=A.nextSibling){O.nodeName=="BR"&&(u=f={node:O.parentNode,offset:Yn(O)+1});break}let F=A.pmViewDesc;if(F&&F.node&&F.node.isBlock)break}}else{let A=k.childNodes[b-1];m=A&&(A.nodeName=="BR"||A.contentEditable=="false")}}if(So&&g.focusNode&&g.focusNode!=f.node&&g.focusNode.nodeType==1){let k=g.focusNode.childNodes[g.focusOffset];k&&k.contentEditable=="false"&&(i=!0)}if(!(i||m&&Cr)&&Ou(u.node,u.offset,g.anchorNode,g.anchorOffset)&&Ou(f.node,f.offset,g.focusNode,g.focusOffset))return;let w=!1;if((h.extend||e==t)&&!m){h.collapse(u.node,u.offset);try{e!=t&&h.extend(f.node,f.offset),w=!0}catch{}}if(!w){if(e>t){let b=u;u=f,f=b}let k=document.createRange();k.setEnd(f.node,f.offset),k.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(k)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],l=r+o.size;if(r==l?e<=l&&t>=r:e<l&&t>r){let u=r+o.border,f=l-o.border;if(e>=u&&t<=f){this.dirty=e==r||t==l?yu:Rk,e==u&&t==f&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=ls:o.markDirty(e-u,t-u);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?yu:ls}r=l}this.dirty=yu}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?yu:Rk;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class B5 extends Np{constructor(e,t,r,i){let o,l=t.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(l.nodeType!=1){let u=document.createElement("span");u.appendChild(l),l=u}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==Hi&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class PN extends Np{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ru extends Np{constructor(e,t,r,i,o){super(e,[],r,i),this.mark=t,this.spec=o}static create(e,t,r,i){let o=i.nodeViews[t.type.name],l=o&&o(t,i,r);return(!l||!l.dom)&&(l=zu.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Ru(e,t,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&ls||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=ls&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Hi){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Hi}}slice(e,t,r){let i=Ru.create(this.parent,this.mark,!0,r),o=this.children,l=this.size;t<l&&(o=j2(o,t,l,r)),e>0&&(o=j2(o,0,e,r));for(let u=0;u<o.length;u++)o[u].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Zl extends Np{constructor(e,t,r,i,o,l,u,f,h){super(e,[],o,l),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=u}static create(e,t,r,i,o,l){let u=o.nodeViews[t.type.name],f,h=u&&u(t,o,()=>{if(!f)return l;if(f.parent)return f.parent.posBeforeChild(f)},r,i),g=h&&h.dom,m=h&&h.contentDOM;if(t.isText){if(!g)g=document.createTextNode(t.text);else if(g.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else g||({dom:g,contentDOM:m}=zu.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!m&&!t.isText&&g.nodeName!="BR"&&(g.hasAttribute("contenteditable")||(g.contentEditable="false"),t.type.spec.draggable&&(g.draggable=!0));let w=g;return g=$5(g,r,t),h?f=new ON(e,t,r,i,g,m||null,w,h,o,l+1):t.isText?new G1(e,t,r,i,g,w,o):new Zl(e,t,r,i,g,m||null,w,o,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>_e.empty)}return e}matchesNode(e,t,r){return this.dirty==Hi&&e.eq(this.node)&&_1(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,o=e.composing?this.localCompositionInfo(e,t):null,l=o&&o.pos>-1?o:null,u=o&&o.pos<0,f=new DN(this,l&&l.node,e);FN(this.node,this.innerDeco,(h,g,m)=>{h.spec.marks?f.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!m&&f.syncToMarks(g==this.node.childCount?kt.none:this.node.child(g).marks,r,e),f.placeWidget(h,e,i)},(h,g,m,w)=>{f.syncToMarks(h.marks,r,e);let k;f.findNodeMatch(h,g,m,w)||u&&e.state.selection.from>i&&e.state.selection.to<i+h.nodeSize&&(k=f.findIndexWithChild(o.node))>-1&&f.updateNodeAt(h,g,m,k,e)||f.updateNextNode(h,g,m,e,w,i)||f.addNode(h,g,m,e,i),i+=h.nodeSize}),f.syncToMarks([],r,e),this.node.isTextblock&&f.addTextblockHacks(),f.destroyRest(),(f.changed||this.dirty==yu)&&(l&&this.protectLocalComposition(e,l),W5(this.contentDOM,this.children,e),jf&&BN(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof st)||r<t||i>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,u=UN(this.node.content,l,r-t,i-t);return u<0?null:{node:o,pos:u,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let l=new PN(this,o,t,i);e.input.compositionNodes.push(l),this.children=j2(this.children,r,r+i.length,e,l)}update(e,t,r,i){return this.dirty==ls||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Hi}updateOuterDeco(e){if(_1(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=j5(this.dom,this.nodeDOM,W2(this.outerDeco,this.node,t),W2(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Dk(n,e,t,r,i){$5(r,e,n);let o=new Zl(void 0,n,e,t,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class G1 extends Zl{constructor(e,t,r,i,o,l,u){super(e,t,r,i,o,null,l,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==ls||this.dirty!=Hi&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Hi||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Hi,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),o=document.createTextNode(i.text);return new G1(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=ls)}get domAtom(){return!1}isText(e){return this.node.text==e}}class U5 extends Np{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Hi&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class ON extends Zl{constructor(e,t,r,i,o,l,u,f,h,g){super(e,t,r,i,o,l,u,h,g),this.spec=f}update(e,t,r,i){if(this.dirty==ls)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,r);return o&&this.updateInner(e,t,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function W5(n,e,t){let r=n.firstChild,i=!1;for(let o=0;o<e.length;o++){let l=e[o],u=l.dom;if(u.parentNode==n){for(;u!=r;)r=zk(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(u,r);if(l instanceof Ru){let f=r?r.previousSibling:n.lastChild;W5(l.contentDOM,l.children,t),r=f?f.nextSibling:n.firstChild}}for(;r;)r=zk(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const Zh=function(n){n&&(this.nodeName=n)};Zh.prototype=Object.create(null);const vu=[new Zh];function W2(n,e,t){if(n.length==0)return vu;let r=t?vu[0]:new Zh,i=[r];for(let o=0;o<n.length;o++){let l=n[o].type.attrs;if(l){l.nodeName&&i.push(r=new Zh(l.nodeName));for(let u in l){let f=l[u];f!=null&&(t&&i.length==1&&i.push(r=new Zh(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+f:u=="style"?r.style=(r.style?r.style+";":"")+f:u!="nodeName"&&(r[u]=f))}}}return i}function j5(n,e,t,r){if(t==vu&&r==vu)return e;let i=e;for(let o=0;o<r.length;o++){let l=r[o],u=t[o];if(o){let f;u&&u.nodeName==l.nodeName&&i!=n&&(f=i.parentNode)&&f.nodeName.toLowerCase()==l.nodeName||(f=document.createElement(l.nodeName),f.pmIsDeco=!0,f.appendChild(i),u=vu[0]),i=f}RN(i,u||vu[0],l)}return i}function RN(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&n.classList.add(i[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function $5(n,e,t){return j5(n,n,vu,W2(e,t,n.nodeType!=1))}function _1(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function zk(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class DN{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=zN(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,o=this.stack.length>>1,l=Math.min(o,e.length);for(;i<l&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=Hi,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let f=this.index;f<Math.min(this.index+3,this.top.children.length);f++){let h=this.top.children[f];if(h.matchesMark(e[o])&&!this.isLocked(h.dom)){u=f;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let f=Ru.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,f),this.top=f,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,i){let o=-1,l;if(i>=this.preMatch.index&&(l=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&l.matchesNode(e,t,r))o=this.top.children.indexOf(l,this.index);else for(let u=this.index,f=Math.min(this.top.children.length,u+5);u<f;u++){let h=this.top.children[u];if(h.matchesNode(e,t,r)&&!this.preMatch.matched.has(h)){o=u;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,r,i,o){let l=this.top.children[i];return l.dirty==ls&&l.dom==l.contentDOM&&(l.dirty=yu),l.update(e,t,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,o,l){for(let u=this.index;u<this.top.children.length;u++){let f=this.top.children[u];if(f instanceof Zl){let h=this.preMatch.matched.get(f);if(h!=null&&h!=o)return!1;let g=f.dom,m,w=this.isLocked(g)&&!(e.isText&&f.node&&f.node.isText&&f.nodeDOM.nodeValue==e.text&&f.dirty!=ls&&_1(t,f.outerDeco));if(!w&&f.update(e,t,r,i))return this.destroyBetween(this.index,u),f.dom!=g&&(this.changed=!0),this.index++,!0;if(!w&&(m=this.recreateWrapper(f,e,t,r,i,l)))return this.destroyBetween(this.index,u),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=yu,m.updateChildren(i,l+1),m.dirty=Hi),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,o,l){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!_1(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let u=Zl.create(this.top,t,r,i,o,l);if(u.contentDOM){u.children=e.children,e.children=[];for(let f of u.children)f.parent=u}return e.destroy(),u}addNode(e,t,r,i,o){let l=Zl.create(this.top,e,t,r,i,o);l.contentDOM&&l.updateChildren(i,o+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new B5(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Ru;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof G1)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Cr||cr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new U5(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function zN(n,e){let t=e,r=t.children.length,i=n.childCount,o=new Map,l=[];e:for(;i>0;){let u;for(;;)if(r){let h=t.children[r-1];if(h instanceof Ru)t=h,r=h.children.length;else{u=h,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let f=u.node;if(f){if(f!=n.child(i-1))break;--i,o.set(u,i),l.push(u)}}return{index:i,matched:o,matches:l.reverse()}}function LN(n,e){return n.type.side-e.type.side}function FN(n,e,t,r){let i=e.locals(n),o=0;if(i.length==0){for(let h=0;h<n.childCount;h++){let g=n.child(h);r(g,i,e.forChild(o,g),h),o+=g.nodeSize}return}let l=0,u=[],f=null;for(let h=0;;){let g,m;for(;l<i.length&&i[l].to==o;){let O=i[l++];O.widget&&(g?(m||(m=[g])).push(O):g=O)}if(g)if(m){m.sort(LN);for(let O=0;O<m.length;O++)t(m[O],h,!!f)}else t(g,h,!!f);let w,k;if(f)k=-1,w=f,f=null;else if(h<n.childCount)k=h,w=n.child(h++);else break;for(let O=0;O<u.length;O++)u[O].to<=o&&u.splice(O--,1);for(;l<i.length&&i[l].from<=o&&i[l].to>o;)u.push(i[l++]);let b=o+w.nodeSize;if(w.isText){let O=b;l<i.length&&i[l].from<O&&(O=i[l].from);for(let F=0;F<u.length;F++)u[F].to<O&&(O=u[F].to);O<b&&(f=w.cut(O-o),w=w.cut(0,O-o),b=O,k=-1)}else for(;l<i.length&&i[l].to<b;)l++;let A=w.isInline&&!w.isLeaf?u.filter(O=>!O.inline):u.slice();r(w,A,e.forChild(o,w),k),o=b}}function BN(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function UN(n,e,t,r){for(let i=0,o=0;i<n.childCount&&o<=r;){let l=n.child(i++),u=o;if(o+=l.nodeSize,!l.isText)continue;let f=l.text;for(;i<n.childCount;){let h=n.child(i++);if(o+=h.nodeSize,!h.isText)break;f+=h.text}if(o>=t){if(o>=r&&f.slice(r-e.length-u,r-u)==e)return r-e.length;let h=u<r?f.lastIndexOf(e,r-u-1):-1;if(h>=0&&h+e.length+u>=t)return u+h;if(t==r&&f.length>=r+e.length-u&&f.slice(r-u,r-u+e.length)==e)return r}}return-1}function j2(n,e,t,r,i){let o=[];for(let l=0,u=0;l<n.length;l++){let f=n[l],h=u,g=u+=f.size;h>=t||g<=e?o.push(f):(h<e&&o.push(f.slice(0,e-h,r)),i&&(o.push(i),i=void 0),g>t&&o.push(f.slice(t-h,f.size,r)))}return o}function Ev(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),o=i&&i.size==0,l=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(l<0)return null;let u=r.resolve(l),f,h;if(J1(t)){for(f=l;i&&!i.node;)i=i.parent;let m=i.node;if(i&&m.isAtom&&Ze.isSelectable(m)&&i.parent&&!(m.isInline&&dN(t.focusNode,t.focusOffset,i.dom))){let w=i.posBefore;h=new Ze(l==w?u:r.resolve(w))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let m=l,w=l;for(let k=0;k<t.rangeCount;k++){let b=t.getRangeAt(k);m=Math.min(m,n.docView.posFromDOM(b.startContainer,b.startOffset,1)),w=Math.max(w,n.docView.posFromDOM(b.endContainer,b.endOffset,-1))}if(m<0)return null;[f,l]=w==n.state.selection.anchor?[w,m]:[m,w],u=r.resolve(l)}else f=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(f<0)return null}let g=r.resolve(f);if(!h){let m=e=="pointer"||n.state.selection.head<u.pos&&!o?1:-1;h=Tv(n,g,u,m)}return h}function H5(n){return n.editable?n.hasFocus():q5(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Qs(n,e=!1){let t=n.state.selection;if(V5(n,t),!!H5(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&cr){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Ou(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)jN(n);else{let{anchor:r,head:i}=t,o,l;Lk&&!(t instanceof st)&&(t.$from.parent.inlineContent||(o=Fk(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(l=Fk(n,t.to))),n.docView.setSelection(r,i,n,e),Lk&&(o&&Bk(o),l&&Bk(l)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&WN(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Lk=Cr||cr&&P5<63;function Fk(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if(Cr&&i&&i.contentEditable=="false")return Wy(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return Wy(i);if(o)return Wy(o)}}function Wy(n){return n.contentEditable="true",Cr&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Bk(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function WN(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!H5(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function jN(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,Yn(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&Jr&&Xl<=11&&(r.disabled=!0,r.disabled=!1)}function V5(n,e){if(e instanceof Ze){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Uk(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Uk(n)}function Uk(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Tv(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||st.between(e,t,r)}function Wk(n){return n.editable&&!n.hasFocus()?!1:q5(n)}function q5(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function $N(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Ou(e.node,e.offset,t.anchorNode,t.anchorOffset)}function $2(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),o=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return o&&et.findFrom(o,e)}function $l(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function jk(n,e,t){let r=n.state.selection;if(r instanceof st)if(t.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let l=n.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return $l(n,new st(r.$anchor,l))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=$2(n.state,e);return i&&i instanceof Ze?$l(n,i):!1}else if(!(Wi&&t.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,l;if(!o||o.isText)return!1;let u=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(l=n.docView.descAt(u))&&!l.contentDOM?Ze.isSelectable(o)?$l(n,new Ze(e<0?n.state.doc.resolve(i.pos-o.nodeSize):i)):Mp?$l(n,new st(n.state.doc.resolve(e<0?u:u+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ze&&r.node.isInline)return $l(n,new st(e>0?r.$to:r.$from));{let i=$2(n.state,e);return i?$l(n,i):!1}}}function C1(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function ep(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function hf(n,e){return e<0?HN(n):VN(n)}function HN(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,o,l=!1;for(So&&t.nodeType==1&&r<C1(t)&&ep(t.childNodes[r],-1)&&(l=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(ep(u,-1))i=t,o=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(K5(t))break;{let u=t.previousSibling;for(;u&&ep(u,-1);)i=t.parentNode,o=Yn(u),u=u.previousSibling;if(u)t=u,r=C1(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}l?H2(n,t,r):i&&H2(n,i,o)}function VN(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=C1(t),o,l;for(;;)if(r<i){if(t.nodeType!=1)break;let u=t.childNodes[r];if(ep(u,1))o=t,l=++r;else break}else{if(K5(t))break;{let u=t.nextSibling;for(;u&&ep(u,1);)o=u.parentNode,l=Yn(u)+1,u=u.nextSibling;if(u)t=u,r=0,i=C1(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}o&&H2(n,o,l)}function K5(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function qN(n,e){for(;n&&e==n.childNodes.length&&!Tp(n);)e=Yn(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function KN(n,e){for(;n&&!e&&!Tp(n);)e=Yn(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function H2(n,e,t){if(e.nodeType!=3){let o,l;(l=qN(e,t))?(e=l,t=0):(o=KN(e,t))&&(e=o,t=o.nodeValue.length)}let r=n.domSelection();if(!r)return;if(J1(r)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Qs(n)},50)}function $k(n,e){let t=n.state.doc.resolve(e);if(!(cr||mN)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Hk(n,e,t){let r=n.state.selection;if(r instanceof st&&!r.empty||t.indexOf("s")>-1||Wi&&t.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let l=$2(n.state,e);if(l&&l instanceof Ze)return $l(n,l)}if(!i.parent.inlineContent){let l=e<0?i:o,u=r instanceof Kr?et.near(l,e):et.findFrom(l,e);return u?$l(n,u):!1}return!1}function Vk(n,e){if(!(n.state.selection instanceof st))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let l=n.state.tr;return e<0?l.delete(t.pos-o.nodeSize,t.pos):l.delete(t.pos,t.pos+o.nodeSize),n.dispatch(l),!0}return!1}function qk(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function JN(n){if(!Cr||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;qk(n,r,"true"),setTimeout(()=>qk(n,r,"false"),20)}return!1}function GN(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function QN(n,e){let t=e.keyCode,r=GN(e);if(t==8||Wi&&t==72&&r=="c")return Vk(n,-1)||hf(n,-1);if(t==46&&!e.shiftKey||Wi&&t==68&&r=="c")return Vk(n,1)||hf(n,1);if(t==13||t==27)return!0;if(t==37||Wi&&t==66&&r=="c"){let i=t==37?$k(n,n.state.selection.from)=="ltr"?-1:1:-1;return jk(n,i,r)||hf(n,i)}else if(t==39||Wi&&t==70&&r=="c"){let i=t==39?$k(n,n.state.selection.from)=="ltr"?1:-1:1;return jk(n,i,r)||hf(n,i)}else{if(t==38||Wi&&t==80&&r=="c")return Hk(n,-1,r)||hf(n,-1);if(t==40||Wi&&t==78&&r=="c")return JN(n)||Hk(n,1,r)||hf(n,1);if(r==(Wi?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Mv(n,e){n.someProp("transformCopied",k=>{e=k(e,n)});let t=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let k=r.firstChild;t.push(k.type.name,k.attrs!=k.type.defaultAttrs?k.attrs:null),r=k.content}let l=n.someProp("clipboardSerializer")||zu.fromSchema(n.state.schema),u=Z5(),f=u.createElement("div");f.appendChild(l.serializeFragment(r,{document:u}));let h=f.firstChild,g,m=0;for(;h&&h.nodeType==1&&(g=X5[h.nodeName.toLowerCase()]);){for(let k=g.length-1;k>=0;k--){let b=u.createElement(g[k]);for(;f.firstChild;)b.appendChild(f.firstChild);f.appendChild(b),m++}h=f.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${i} ${o}${m?` -${m}`:""} ${JSON.stringify(t)}`);let w=n.someProp("clipboardTextSerializer",k=>k(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:f,text:w,slice:e}}function J5(n,e,t,r,i){let o=i.parent.type.spec.code,l,u;if(!t&&!e)return null;let f=e&&(r||o||!t);if(f){if(n.someProp("transformPastedText",w=>{e=w(e,o||r,n)}),o)return e?new Ne(_e.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Ne.empty;let m=n.someProp("clipboardTextParser",w=>w(e,i,r,n));if(m)u=m;else{let w=i.marks(),{schema:k}=n.state,b=zu.fromSchema(k);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(A=>{let O=l.appendChild(document.createElement("p"));A&&O.appendChild(b.serializeNode(k.text(A,w)))})}}else n.someProp("transformPastedHTML",m=>{t=m(t,n)}),l=eA(t),Mp&&tA(l);let h=l&&l.querySelector("[data-pm-slice]"),g=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(g&&g[3])for(let m=+g[3];m>0;m--){let w=l.firstChild;for(;w&&w.nodeType!=1;)w=w.nextSibling;if(!w)break;l=w}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||Iu.fromSchema(n.state.schema)).parseSlice(l,{preserveWhitespace:!!(f||g),context:i,ruleFromNode(w){return w.nodeName=="BR"&&!w.nextSibling&&w.parentNode&&!YN.test(w.parentNode.nodeName)?{ignore:!0}:null}})),g)u=nA(Kk(u,+g[1],+g[2]),g[4]);else if(u=Ne.maxOpen(XN(u.content,i),!0),u.openStart||u.openEnd){let m=0,w=0;for(let k=u.content.firstChild;m<u.openStart&&!k.type.spec.isolating;m++,k=k.firstChild);for(let k=u.content.lastChild;w<u.openEnd&&!k.type.spec.isolating;w++,k=k.lastChild);u=Kk(u,m,w)}return n.someProp("transformPasted",m=>{u=m(u,n)}),u}const YN=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function XN(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),o,l=[];if(n.forEach(u=>{if(!l)return;let f=i.findWrapping(u.type),h;if(!f)return l=null;if(h=l.length&&o.length&&Q5(f,o,u,l[l.length-1],0))l[l.length-1]=h;else{l.length&&(l[l.length-1]=Y5(l[l.length-1],o.length));let g=G5(u,f);l.push(g),i=i.matchType(g.type),o=f}}),l)return _e.from(l)}return n}function G5(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,_e.from(n));return n}function Q5(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let o=Q5(n,e,t,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(_e.from(G5(t,n,i+1))))}}function Y5(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,Y5(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(_e.empty,!0);return n.copy(t.append(r))}function V2(n,e,t,r,i,o){let l=e<0?n.firstChild:n.lastChild,u=l.content;return n.childCount>1&&(o=0),i<r-1&&(u=V2(u,e,t,r,i+1,o)),i>=t&&(u=e<0?l.contentMatchAt(0).fillBefore(u,o<=i).append(u):u.append(l.contentMatchAt(l.childCount).fillBefore(_e.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,l.copy(u))}function Kk(n,e,t){return e<n.openStart&&(n=new Ne(V2(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new Ne(V2(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const X5={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Jk=null;function Z5(){return Jk||(Jk=document.implementation.createHTMLDocument("title"))}let jy=null;function ZN(n){let e=window.trustedTypes;return e?(jy||(jy=e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),jy.createHTML(n)):n}function eA(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=Z5().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&X5[r[1].toLowerCase()])&&(n=i.map(o=>"<"+o+">").join("")+n+i.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=ZN(n),i)for(let o=0;o<i.length;o++)t=t.querySelector(i[o])||t;return t}function tA(n){let e=n.querySelectorAll(cr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function nA(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:o,openEnd:l}=n;for(let u=r.length-2;u>=0;u-=2){let f=t.nodes[r[u]];if(!f||f.hasRequiredAttrs())break;i=_e.from(f.create(r[u+1],i)),o++,l++}return new Ne(i,o,l)}const Er={},Tr={},rA={touchstart:!0,touchmove:!0};class iA{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function oA(n){for(let e in Er){let t=Er[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{lA(n,r)&&!Nv(n,r)&&(n.editable||!(r.type in Tr))&&t(n,r)},rA[e]?{passive:!0}:void 0)}Cr&&n.dom.addEventListener("input",()=>null),q2(n)}function Ql(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function sA(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function q2(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>Nv(n,r))})}function Nv(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function lA(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function aA(n,e){!Nv(n,e)&&Er[e.type]&&(n.editable||!(e.type in Tr))&&Er[e.type](n,e)}Tr.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!tS(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Gs&&cr&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),jf&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,mu(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||QN(n,t)?t.preventDefault():Ql(n,"key")};Tr.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Tr.keypress=(n,e)=>{let t=e;if(tS(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Wi&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof st)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",o=>o(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function Q1(n){return{left:n.clientX,top:n.clientY}}function uA(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Av(n,e,t,r,i){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let l=o.depth+1;l>0;l--)if(n.someProp(e,u=>l>o.depth?u(n,t,o.nodeAfter,o.before(l),i,!0):u(n,t,o.node(l),o.before(l),i,!1)))return!0;return!1}function Mf(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function cA(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&Ze.isSelectable(r)?(Mf(n,new Ze(t)),!0):!1}function fA(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof Ze&&(r=t.node);let o=n.state.doc.resolve(e);for(let l=o.depth+1;l>0;l--){let u=l>o.depth?o.nodeAfter:o.node(l);if(Ze.isSelectable(u)){r&&t.$from.depth>0&&l>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?i=o.before(t.$from.depth):i=o.before(l);break}}return i!=null?(Mf(n,Ze.create(n.state.doc,i)),!0):!1}function dA(n,e,t,r,i){return Av(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(i?fA(n,t):cA(n,t))}function hA(n,e,t,r){return Av(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function pA(n,e,t,r){return Av(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||mA(n,t,r)}function mA(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Mf(n,st.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let l=o>i.depth?i.nodeAfter:i.node(o),u=i.before(o);if(l.inlineContent)Mf(n,st.create(r,u+1,u+1+l.content.size));else if(Ze.isSelectable(l))Mf(n,Ze.create(r,u));else continue;return!0}}function Iv(n){return E1(n)}const eS=Wi?"metaKey":"ctrlKey";Er.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Iv(n),i=Date.now(),o="singleClick";i-n.input.lastClick.time<500&&uA(t,n.input.lastClick)&&!t[eS]&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:o};let l=n.posAtCoords(Q1(t));l&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new gA(n,l,t,!!r)):(o=="doubleClick"?hA:pA)(n,l.pos,l.inside,t)?t.preventDefault():Ql(n,"pointer"))};class gA{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[eS],this.allowDefault=r.shiftKey;let o,l;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),l=t.inside;else{let g=e.state.doc.resolve(t.pos);o=g.parent,l=g.depth?g.before():0}const u=i?null:r.target,f=u?e.docView.nearestDesc(u,!0):null;this.target=f&&f.dom.nodeType==1?f.dom:null;let{selection:h}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||h instanceof Ze&&h.from<=l&&h.to>l)&&(this.mightDrag={node:o,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&So&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ql(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Qs(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Q1(e))),this.updateAllowDefault(e),this.allowDefault||!t?Ql(this.view,"pointer"):dA(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Cr&&this.mightDrag&&!this.mightDrag.node.isAtom||cr&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Mf(this.view,et.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Ql(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ql(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Er.touchstart=n=>{n.input.lastTouch=Date.now(),Iv(n),Ql(n,"pointer")};Er.touchmove=n=>{n.input.lastTouch=Date.now(),Ql(n,"pointer")};Er.contextmenu=n=>Iv(n);function tS(n,e){return n.composing?!0:Cr&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const yA=Gs?5e3:-1;Tr.compositionstart=Tr.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof st&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),E1(n,!0),n.markCursor=null;else if(E1(n,!e.selection.empty),So&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let l=o<0?i.lastChild:i.childNodes[o-1];if(!l)break;if(l.nodeType==3){let u=n.domSelection();u&&u.collapse(l,l.nodeValue.length);break}else i=l,o=-1}}n.input.composing=!0}nS(n,yA)};Tr.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,nS(n,20))};function nS(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>E1(n),e))}function rS(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=wA());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function vA(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=cN(e.focusNode,e.focusOffset),r=fN(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let l=t.pmViewDesc;if(!(!l||!l.isText(t.nodeValue)))return r}}return t||r}function wA(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function E1(n,e=!1){if(!(Gs&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),rS(n),e||n.docView&&n.docView.dirty){let t=Ev(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function kA(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const pp=Jr&&Xl<15||jf&&gN<604;Er.copy=Tr.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let o=pp?null:t.clipboardData,l=r.content(),{dom:u,text:f}=Mv(n,l);o?(t.preventDefault(),o.clearData(),o.setData("text/html",u.innerHTML),o.setData("text/plain",f)):kA(n,u),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function xA(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function SA(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?mp(n,r.value,null,i,e):mp(n,r.textContent,r.innerHTML,i,e)},50)}function mp(n,e,t,r,i){let o=J5(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",f=>f(n,i,o||Ne.empty)))return!0;if(!o)return!1;let l=xA(o),u=l?n.state.tr.replaceSelectionWith(l,r):n.state.tr.replaceSelection(o);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function iS(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Tr.paste=(n,e)=>{let t=e;if(n.composing&&!Gs)return;let r=pp?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&mp(n,iS(r),r.getData("text/html"),i,t)?t.preventDefault():SA(n,t)};class oS{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const sS=Wi?"altKey":"ctrlKey";Er.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,o=i.empty?null:n.posAtCoords(Q1(t)),l;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof Ze?i.to-1:i.to))){if(r&&r.mightDrag)l=Ze.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let m=n.docView.nearestDesc(t.target,!0);m&&m.node.type.spec.draggable&&m!=n.docView&&(l=Ze.create(n.state.doc,m.posBefore))}}let u=(l||n.state.selection).content(),{dom:f,text:h,slice:g}=Mv(n,u);(!t.dataTransfer.files.length||!cr||P5>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(pp?"Text":"text/html",f.innerHTML),t.dataTransfer.effectAllowed="copyMove",pp||t.dataTransfer.setData("text/plain",h),n.dragging=new oS(g,!t[sS],l)};Er.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Tr.dragover=Tr.dragenter=(n,e)=>e.preventDefault();Tr.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(Q1(t));if(!i)return;let o=n.state.doc.resolve(i.pos),l=r&&r.slice;l?n.someProp("transformPasted",b=>{l=b(l,n)}):l=J5(n,iS(t.dataTransfer),pp?null:t.dataTransfer.getData("text/html"),!1,o);let u=!!(r&&!t[sS]);if(n.someProp("handleDrop",b=>b(n,t,l||Ne.empty,u))){t.preventDefault();return}if(!l)return;t.preventDefault();let f=l?sM(n.state.doc,o.pos,l):o.pos;f==null&&(f=o.pos);let h=n.state.tr;if(u){let{node:b}=r;b?b.replace(h):h.deleteSelection()}let g=h.mapping.map(f),m=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,w=h.doc;if(m?h.replaceRangeWith(g,g,l.content.firstChild):h.replaceRange(g,g,l),h.doc.eq(w))return;let k=h.doc.resolve(g);if(m&&Ze.isSelectable(l.content.firstChild)&&k.nodeAfter&&k.nodeAfter.sameMarkup(l.content.firstChild))h.setSelection(new Ze(k));else{let b=h.mapping.map(f);h.mapping.maps[h.mapping.maps.length-1].forEach((A,O,F,V)=>b=V),h.setSelection(Tv(n,k,h.doc.resolve(b)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))};Er.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Qs(n)},20))};Er.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Er.beforeinput=(n,e)=>{if(cr&&Gs&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,mu(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Tr)Er[n]=Tr[n];function gp(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class T1{constructor(e,t){this.toDOM=e,this.spec=t||xu,this.side=this.spec.side||0}map(e,t,r,i){let{pos:o,deleted:l}=e.mapResult(t.from+i,this.side<0?-1:1);return l?null:new Xn(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof T1&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&gp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ea{constructor(e,t){this.attrs=e,this.spec=t||xu}map(e,t,r,i){let o=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,l=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=l?null:new Xn(o,l,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof ea&&gp(this.attrs,e.attrs)&&gp(this.spec,e.spec)}static is(e){return e.type instanceof ea}destroy(){}}class Pv{constructor(e,t){this.attrs=e,this.spec=t||xu}map(e,t,r,i){let o=e.mapResult(t.from+i,1);if(o.deleted)return null;let l=e.mapResult(t.to+i,-1);return l.deleted||l.pos<=o.pos?null:new Xn(o.pos-r,l.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),o;return i==t.from&&!(o=e.child(r)).isText&&i+o.nodeSize==t.to}eq(e){return this==e||e instanceof Pv&&gp(this.attrs,e.attrs)&&gp(this.spec,e.spec)}destroy(){}}class Xn{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Xn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Xn(e,e,new T1(t,r))}static inline(e,t,r,i){return new Xn(e,t,new ea(r,i))}static node(e,t,r,i){return new Xn(e,t,new Pv(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ea}get widget(){return this.type instanceof T1}}const vf=[],xu={};class Gt{constructor(e,t){this.local=e.length?e:vf,this.children=t.length?t:vf}static create(e,t){return t.length?M1(t,e,0,xu):ur}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,o){for(let l=0;l<this.local.length;l++){let u=this.local[l];u.from<=t&&u.to>=e&&(!o||o(u.spec))&&r.push(u.copy(u.from+i,u.to+i))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<t&&this.children[l+1]>e){let u=this.children[l]+1;this.children[l+2].findInner(e-u,t-u,r,i+u,o)}}map(e,t,r){return this==ur||e.maps.length==0?this:this.mapInner(e,t,0,0,r||xu)}mapInner(e,t,r,i,o){let l;for(let u=0;u<this.local.length;u++){let f=this.local[u].map(e,r,i);f&&f.type.valid(t,f)?(l||(l=[])).push(f):o.onRemove&&o.onRemove(this.local[u].spec)}return this.children.length?bA(this.children,l||[],e,t,r,i,o):l?new Gt(l.sort(Su),vf):ur}add(e,t){return t.length?this==ur?Gt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,o=0;e.forEach((u,f)=>{let h=f+r,g;if(g=aS(t,u,h)){for(i||(i=this.children.slice());o<i.length&&i[o]<f;)o+=3;i[o]==f?i[o+2]=i[o+2].addInner(u,g,h+1):i.splice(o,0,f,f+u.nodeSize,M1(g,u,h+1,xu)),o+=3}});let l=lS(o?uS(t):t,-r);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||l.splice(u--,1);return new Gt(l.length?this.local.concat(l).sort(Su):this.local,i||this.children)}remove(e){return e.length==0||this==ur?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let l,u=r[o]+t,f=r[o+1]+t;for(let g=0,m;g<e.length;g++)(m=e[g])&&m.from>u&&m.to<f&&(e[g]=null,(l||(l=[])).push(m));if(!l)continue;r==this.children&&(r=this.children.slice());let h=r[o+2].removeInner(l,u+1);h!=ur?r[o+2]=h:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,l;o<e.length;o++)if(l=e[o])for(let u=0;u<i.length;u++)i[u].eq(l,t)&&(i==this.local&&(i=this.local.slice()),i.splice(u--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Gt(i,r):ur}forChild(e,t){if(this==ur)return this;if(t.isLeaf)return Gt.empty;let r,i;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let o=e+1,l=o+t.content.size;for(let u=0;u<this.local.length;u++){let f=this.local[u];if(f.from<l&&f.to>o&&f.type instanceof ea){let h=Math.max(o,f.from)-o,g=Math.min(l,f.to)-o;h<g&&(i||(i=[])).push(f.copy(h,g))}}if(i){let u=new Gt(i.sort(Su),vf);return r?new ql([u,r]):u}return r||ur}eq(e){if(this==e)return!0;if(!(e instanceof Gt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Ov(this.localsInner(e))}localsInner(e){if(this==ur)return vf;if(e.inlineContent||!this.local.some(ea.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ea||t.push(this.local[r]);return t}forEachSet(e){e(this)}}Gt.empty=new Gt([],[]);Gt.removeOverlap=Ov;const ur=Gt.empty;class ql{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,xu));return ql.from(r)}forChild(e,t){if(t.isLeaf)return Gt.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,t);o!=ur&&(o instanceof ql?r=r.concat(o.members):r.push(o))}return ql.from(r)}eq(e){if(!(e instanceof ql)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let l=0;l<o.length;l++)t.push(o[l])}}return t?Ov(r?t:t.sort(Su)):vf}static from(e){switch(e.length){case 0:return ur;case 1:return e[0];default:return new ql(e.every(t=>t instanceof Gt)?e:e.reduce((t,r)=>t.concat(r instanceof Gt?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function bA(n,e,t,r,i,o,l){let u=n.slice();for(let h=0,g=o;h<t.maps.length;h++){let m=0;t.maps[h].forEach((w,k,b,A)=>{let O=A-b-(k-w);for(let F=0;F<u.length;F+=3){let V=u[F+1];if(V<0||w>V+g-m)continue;let I=u[F]+g-m;k>=I?u[F+1]=w<=I?-2:-1:w>=g&&O&&(u[F]+=O,u[F+1]+=O)}m+=O}),g=t.maps[h].map(g,-1)}let f=!1;for(let h=0;h<u.length;h+=3)if(u[h+1]<0){if(u[h+1]==-2){f=!0,u[h+1]=-1;continue}let g=t.map(n[h]+o),m=g-i;if(m<0||m>=r.content.size){f=!0;continue}let w=t.map(n[h+1]+o,-1),k=w-i,{index:b,offset:A}=r.content.findIndex(m),O=r.maybeChild(b);if(O&&A==m&&A+O.nodeSize==k){let F=u[h+2].mapInner(t,O,g+1,n[h]+o+1,l);F!=ur?(u[h]=m,u[h+1]=k,u[h+2]=F):(u[h+1]=-2,f=!0)}else f=!0}if(f){let h=_A(u,n,e,t,i,o,l),g=M1(h,r,0,l);e=g.local;for(let m=0;m<u.length;m+=3)u[m+1]<0&&(u.splice(m,3),m-=3);for(let m=0,w=0;m<g.children.length;m+=3){let k=g.children[m];for(;w<u.length&&u[w]<k;)w+=3;u.splice(w,0,g.children[m],g.children[m+1],g.children[m+2])}}return new Gt(e.sort(Su),u)}function lS(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Xn(i.from+e,i.to+e,i.type))}return t}function _A(n,e,t,r,i,o,l){function u(f,h){for(let g=0;g<f.local.length;g++){let m=f.local[g].map(r,i,h);m?t.push(m):l.onRemove&&l.onRemove(f.local[g].spec)}for(let g=0;g<f.children.length;g+=3)u(f.children[g+2],f.children[g]+h+1)}for(let f=0;f<n.length;f+=3)n[f+1]==-1&&u(n[f+2],e[f]+o+1);return t}function aS(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let o=0,l;o<n.length;o++)(l=n[o])&&l.from>t&&l.to<r&&((i||(i=[])).push(l),n[o]=null);return i}function uS(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function M1(n,e,t,r){let i=[],o=!1;e.forEach((u,f)=>{let h=aS(n,u,f+t);if(h){o=!0;let g=M1(h,u,t+f+1,r);g!=ur&&i.push(f,f+u.nodeSize,g)}});let l=lS(o?uS(n):n,-t).sort(Su);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||(r.onRemove&&r.onRemove(l[u].spec),l.splice(u--,1));return l.length||i.length?new Gt(l,i):ur}function Su(n,e){return n.from-e.from||n.to-e.to}function Ov(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[i]=o.copy(o.from,r.to),Gk(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),Gk(e,i,r.copy(o.from,r.to)));break}}}return e}function Gk(n,e,t){for(;e<n.length&&Su(t,n[e])>0;)e++;n.splice(e,0,t)}function $y(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=ur&&e.push(r)}),n.cursorWrapper&&e.push(Gt.create(n.state.doc,[n.cursorWrapper.deco])),ql.from(e)}const CA={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},EA=Jr&&Xl<=11;class TA{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class MA{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new TA,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Jr&&Xl<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),EA&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,CA)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Wk(this.view)){if(this.suppressingSelectionUpdates)return Qs(this.view);if(Jr&&Xl<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ou(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let o=e.focusNode;o;o=Wf(o))t.add(o);for(let o=e.anchorNode;o;o=Wf(o))if(t.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Wk(e)&&!this.ignoreSelectionChange(r),o=-1,l=-1,u=!1,f=[];if(e.editable)for(let g=0;g<t.length;g++){let m=this.registerMutation(t[g],f);m&&(o=o<0?m.from:Math.min(m.from,o),l=l<0?m.to:Math.max(m.to,l),m.typeOver&&(u=!0))}if(So&&f.length){let g=f.filter(m=>m.nodeName=="BR");if(g.length==2){let[m,w]=g;m.parentNode&&m.parentNode.parentNode==w.parentNode?w.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let w of g){let k=w.parentNode;k&&k.nodeName=="LI"&&(!m||IA(e,m)!=k)&&w.remove()}}}let h=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&J1(r)&&(h=Ev(e))&&h.eq(et.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Qs(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,l),NA(e)),this.handleDOMChange(o,l,u,f),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Qs(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let g=0;g<e.addedNodes.length;g++){let m=e.addedNodes[g];t.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Jr&&Xl<=11&&e.addedNodes.length)for(let g=0;g<e.addedNodes.length;g++){let{previousSibling:m,nextSibling:w}=e.addedNodes[g];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(i=m),(!w||Array.prototype.indexOf.call(e.addedNodes,w)<0)&&(o=w)}let l=i&&i.parentNode==e.target?Yn(i)+1:0,u=r.localPosFromDOM(e.target,l,-1),f=o&&o.parentNode==e.target?Yn(o):e.target.childNodes.length,h=r.localPosFromDOM(e.target,f,1);return{from:u,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Qk=new WeakMap,Yk=!1;function NA(n){if(!Qk.has(n)&&(Qk.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=So,Yk)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Yk=!0}}function Xk(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,l=n.domAtPos(n.state.selection.anchor);return Ou(l.node,l.offset,i,o)&&([t,r,i,o]=[i,o,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:o}}function AA(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return Xk(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?Xk(n,t):null}function IA(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function PA(n,e,t){let{node:r,fromOffset:i,toOffset:o,from:l,to:u}=n.docView.parseRange(e,t),f=n.domSelectionRange(),h,g=f.anchorNode;if(g&&n.dom.contains(g.nodeType==1?g:g.parentNode)&&(h=[{node:g,offset:f.anchorOffset}],J1(f)||h.push({node:f.focusNode,offset:f.focusOffset})),cr&&n.input.lastKeyCode===8)for(let O=o;O>i;O--){let F=r.childNodes[O-1],V=F.pmViewDesc;if(F.nodeName=="BR"&&!V){o=O;break}if(!V||V.size)break}let m=n.state.doc,w=n.someProp("domParser")||Iu.fromSchema(n.state.schema),k=m.resolve(l),b=null,A=w.parse(r,{topNode:k.parent,topMatch:k.parent.contentMatchAt(k.index()),topOpen:!0,from:i,to:o,preserveWhitespace:k.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:OA,context:k});if(h&&h[0].pos!=null){let O=h[0].pos,F=h[1]&&h[1].pos;F==null&&(F=O),b={anchor:O+l,head:F+l}}return{doc:A,sel:b,from:l,to:u}}function OA(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Cr&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Cr&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const RA=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function DA(n,e,t,r,i){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let q=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,C=Ev(n,q);if(C&&!n.state.selection.eq(C)){if(cr&&Gs&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",R=>R(n,mu(13,"Enter"))))return;let U=n.state.tr.setSelection(C);q=="pointer"?U.setMeta("pointer",!0):q=="key"&&U.scrollIntoView(),o&&U.setMeta("composition",o),n.dispatch(U)}return}let l=n.state.doc.resolve(e),u=l.sharedDepth(t);e=l.before(u+1),t=n.state.doc.resolve(t).after(u+1);let f=n.state.selection,h=PA(n,e,t),g=n.state.doc,m=g.slice(h.from,h.to),w,k;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(w=n.state.selection.to,k="end"):(w=n.state.selection.from,k="start"),n.input.lastKeyCode=null;let b=FA(m.content,h.doc.content,h.from,w,k);if(b&&n.input.domChangeCount++,(jf&&n.input.lastIOSEnter>Date.now()-225||Gs)&&i.some(q=>q.nodeType==1&&!RA.test(q.nodeName))&&(!b||b.endA>=b.endB)&&n.someProp("handleKeyDown",q=>q(n,mu(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!b)if(r&&f instanceof st&&!f.empty&&f.$head.sameParent(f.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))b={start:f.from,endA:f.to,endB:f.to};else{if(h.sel){let q=Zk(n,n.state.doc,h.sel);if(q&&!q.eq(n.state.selection)){let C=n.state.tr.setSelection(q);o&&C.setMeta("composition",o),n.dispatch(C)}}return}n.state.selection.from<n.state.selection.to&&b.start==b.endB&&n.state.selection instanceof st&&(b.start>n.state.selection.from&&b.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?b.start=n.state.selection.from:b.endA<n.state.selection.to&&b.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(b.endB+=n.state.selection.to-b.endA,b.endA=n.state.selection.to)),Jr&&Xl<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>h.from&&h.doc.textBetween(b.start-h.from-1,b.start-h.from+1)==" "&&(b.start--,b.endA--,b.endB--);let A=h.doc.resolveNoCache(b.start-h.from),O=h.doc.resolveNoCache(b.endB-h.from),F=g.resolve(b.start),V=A.sameParent(O)&&A.parent.inlineContent&&F.end()>=b.endA,I;if((jf&&n.input.lastIOSEnter>Date.now()-225&&(!V||i.some(q=>q.nodeName=="DIV"||q.nodeName=="P"))||!V&&A.pos<h.doc.content.size&&!A.sameParent(O)&&(I=et.findFrom(h.doc.resolve(A.pos+1),1,!0))&&I.head==O.pos)&&n.someProp("handleKeyDown",q=>q(n,mu(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>b.start&&LA(g,b.start,b.endA,A,O)&&n.someProp("handleKeyDown",q=>q(n,mu(8,"Backspace")))){Gs&&cr&&n.domObserver.suppressSelectionUpdates();return}cr&&b.endB==b.start&&(n.input.lastChromeDelete=Date.now()),Gs&&!V&&A.start()!=O.start()&&O.parentOffset==0&&A.depth==O.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==b.endA&&(b.endB-=2,O=h.doc.resolveNoCache(b.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(q){return q(n,mu(13,"Enter"))})},20));let W=b.start,B=b.endA,z,H,Y;if(V){if(A.pos==O.pos)Jr&&Xl<=11&&A.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Qs(n),20)),z=n.state.tr.delete(W,B),H=g.resolve(b.start).marksAcross(g.resolve(b.endA));else if(b.endA==b.endB&&(Y=zA(A.parent.content.cut(A.parentOffset,O.parentOffset),F.parent.content.cut(F.parentOffset,b.endA-F.start()))))z=n.state.tr,Y.type=="add"?z.addMark(W,B,Y.mark):z.removeMark(W,B,Y.mark);else if(A.parent.child(A.index()).isText&&A.index()==O.index()-(O.textOffset?0:1)){let q=A.parent.textBetween(A.parentOffset,O.parentOffset);if(n.someProp("handleTextInput",C=>C(n,W,B,q)))return;z=n.state.tr.insertText(q,W,B)}}if(z||(z=n.state.tr.replace(W,B,h.doc.slice(b.start-h.from,b.endB-h.from))),h.sel){let q=Zk(n,z.doc,h.sel);q&&!(cr&&n.composing&&q.empty&&(b.start!=b.endB||n.input.lastChromeDelete<Date.now()-100)&&(q.head==W||q.head==z.mapping.map(B)-1)||Jr&&q.empty&&q.head==W)&&z.setSelection(q)}H&&z.ensureMarks(H),o&&z.setMeta("composition",o),n.dispatch(z.scrollIntoView())}function Zk(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Tv(n,e.resolve(t.anchor),e.resolve(t.head))}function zA(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,o=r,l,u,f;for(let g=0;g<r.length;g++)i=r[g].removeFromSet(i);for(let g=0;g<t.length;g++)o=t[g].removeFromSet(o);if(i.length==1&&o.length==0)u=i[0],l="add",f=g=>g.mark(u.addToSet(g.marks));else if(i.length==0&&o.length==1)u=o[0],l="remove",f=g=>g.mark(u.removeFromSet(g.marks));else return null;let h=[];for(let g=0;g<e.childCount;g++)h.push(f(e.child(g)));if(_e.from(h).eq(n))return{mark:u,type:l}}function LA(n,e,t,r,i){if(t-e<=i.pos-r.pos||Hy(r,!0,!1)<i.pos)return!1;let o=n.resolve(e);if(!r.parent.isTextblock){let u=o.nodeAfter;return u!=null&&t==e+u.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let l=n.resolve(Hy(o,!0,!0));return!l.parent.isTextblock||l.pos>t||Hy(l,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function Hy(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function FA(n,e,t,r,i){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:l,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let f=Math.max(0,o-Math.min(l,u));r-=l+f-o}if(l<o&&n.size<e.size){let f=r<=o&&r>=l?o-r:0;o-=f,o&&o<e.size&&e4(e.textBetween(o-1,o+1))&&(o+=f?1:-1),u=o+(u-l),l=o}else if(u<o){let f=r<=o&&r>=u?o-r:0;o-=f,o&&o<n.size&&e4(n.textBetween(o-1,o+1))&&(o+=f?1:-1),l=o+(l-u),u=o}return{start:o,endA:l,endB:u}}function e4(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class BA{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new iA,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(o4),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=r4(this),n4(this),this.nodeViews=i4(this),this.docView=Dk(this.state.doc,t4(this),$y(this),this.dom,this),this.domObserver=new MA(this,(r,i,o,l)=>DA(this,r,i,o,l)),this.domObserver.start(),oA(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&q2(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(o4),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,o=!1,l=!1;e.storedMarks&&this.composing&&(rS(this),l=!0),this.state=e;let u=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let k=i4(this);WA(k,this.nodeViews)&&(this.nodeViews=k,o=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&q2(this),this.editable=r4(this),n4(this);let f=$y(this),h=t4(this),g=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",m=o||!this.docView.matchesNode(e.doc,h,f);(m||!e.selection.eq(i.selection))&&(l=!0);let w=g=="preserve"&&l&&this.dom.style.overflowAnchor==null&&wN(this);if(l){this.domObserver.stop();let k=m&&(Jr||cr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&UA(i.selection,e.selection);if(m){let b=cr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=vA(this)),(o||!this.docView.update(e.doc,h,f,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=Dk(e.doc,h,f,this.dom,this)),b&&!this.trackWrites&&(k=!0)}k||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&$N(this))?Qs(this,k):(V5(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),g=="reset"?this.dom.scrollTop=0:g=="to selection"?this.scrollToSelection():w&&kN(w)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Ze){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Nk(this,t.getBoundingClientRect(),e)}else Nk(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new oS(e.slice,e.move,i<0?void 0:Ze.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let l=0;l<this.directPlugins.length;l++){let u=this.directPlugins[l].props[e];if(u!=null&&(i=t?t(u):u))return i}let o=this.state.plugins;if(o)for(let l=0;l<o.length;l++){let u=o[l].props[e];if(u!=null&&(i=t?t(u):u))return i}}hasFocus(){if(Jr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&xN(this.dom),Qs(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return EN(this,e)}coordsAtPos(e,t=1){return L5(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return IN(this,t||this.state,e)}pasteHTML(e,t){return mp(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return mp(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Mv(this,e)}destroy(){this.docView&&(sA(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],$y(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,aN())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return aA(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Cr&&this.root.nodeType===11&&hN(this.dom.ownerDocument)==this.dom&&AA(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function t4(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Xn.node(0,n.state.doc.content.size,e)]}function n4(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Xn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function r4(n){return!n.someProp("editable",e=>e(n.state)===!1)}function UA(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function i4(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function WA(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function o4(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var cS=n=>{throw TypeError(n)},fS=(n,e,t)=>e.has(n)||cS("Cannot "+t),Ve=(n,e,t)=>(fS(n,e,"read from private field"),t?t.call(n):e.get(n)),Kn=(n,e,t)=>e.has(n)?cS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Zt=(n,e,t,r)=>(fS(n,e,"write to private field"),e.set(n,t),t),wf,hu,kf,Ui,Wl,Hh,Ym,Xm,pi,jl,xf,Zm,Sf,Vh,e1,pu,qh;function aa(n,e){return n.meta={package:"@milkdown/core",group:"System",...e},n}const dS={strong:(n,e,t,r)=>{const i=n.marker||t.options.strong||"*",o=t.enter("strong"),l=t.createTracker(r);let u=l.move(i+i);return u+=l.move(t.containerPhrasing(n,{before:u,after:i,...l.current()})),u+=l.move(i+i),o(),u},emphasis:(n,e,t,r)=>{const i=n.marker||t.options.emphasis||"*",o=t.enter("emphasis"),l=t.createTracker(r);let u=l.move(i);return u+=l.move(t.containerPhrasing(n,{before:u,after:i,...l.current()})),u+=l.move(i),o(),u}},bu=St({},"editorView"),Kh=St({},"editorState"),Vy=St([],"initTimer"),s4=St({},"editor"),yp=St([],"inputRules"),bo=St([],"prosePlugins"),vp=St([],"remarkPlugins"),wp=St([],"nodeView"),kp=St([],"markView"),_u=St(M2().use(x2).use(C2),"remark"),tp=St({handlers:dS},"remarkStringifyOptions"),t1=ia("ConfigReady");function jA(n){const e=t=>(t.record(t1),async()=>(await n(t),t.done(t1),()=>{t.clearTimer(t1)}));return aa(e,{displayName:"Config"}),e}const Cu=ia("InitReady");function $A(n){const e=t=>(t.inject(s4,n).inject(bo,[]).inject(vp,[]).inject(yp,[]).inject(wp,[]).inject(kp,[]).inject(tp,{handlers:dS}).inject(_u,M2().use(x2).use(C2)).inject(Vy,[t1]).record(Cu),async()=>{await t.waitTimers(Vy);const r=t.get(tp);return t.set(_u,M2().use(x2).use(C2,r)),t.done(Cu),()=>{t.remove(s4).remove(bo).remove(vp).remove(yp).remove(wp).remove(kp).remove(tp).remove(_u).remove(Vy).clearTimer(Cu)}});return aa(e,{displayName:"Init"}),e}const xo=ia("SchemaReady"),qy=St([],"schemaTimer"),is=St({},"schema"),Nf=St([],"nodes"),Af=St([],"marks");function l4(n){var e;return{...n,parseDOM:(e=n.parseDOM)==null?void 0:e.map(t=>({priority:n.priority,...t}))}}const hS=n=>(n.inject(is,{}).inject(Nf,[]).inject(Af,[]).inject(qy,[Cu]).record(xo),async()=>{await n.waitTimers(qy);const e=n.get(_u),r=n.get(vp).reduce((u,f)=>u.use(f.plugin,f.options),e);n.set(_u,r);const i=Object.fromEntries(n.get(Nf).map(([u,f])=>[u,l4(f)])),o=Object.fromEntries(n.get(Af).map(([u,f])=>[u,l4(f)])),l=new s7({nodes:i,marks:o});return n.set(is,l),n.done(xo),()=>{n.remove(is).remove(Nf).remove(Af).remove(qy).clearTimer(xo)}});aa(hS,{displayName:"Schema"});class pS{constructor(){Kn(this,wf),Kn(this,hu),Zt(this,wf,new ex),Zt(this,hu,null),this.setCtx=e=>{Zt(this,hu,e)}}get ctx(){return Ve(this,hu)}create(e,t){const r=e.create(Ve(this,wf).sliceMap);return r.set(t),r}get(e){return Ve(this,wf).get(e).get()}remove(e){return Ve(this,wf).remove(e)}call(e,t){if(Ve(this,hu)==null)throw O8();const i=this.get(e)(t),o=Ve(this,hu).get(bu);return i(o.state,o.dispatch,o)}}wf=new WeakMap;hu=new WeakMap;function HA(n="cmdKey"){return St(()=>()=>!1,n)}const Mt=St(new pS,"commands"),Ky=St([xo],"commandsTimer"),np=ia("CommandsReady"),mS=n=>{const e=new pS;return e.setCtx(n),n.inject(Mt,e).inject(Ky,[xo]).record(np),async()=>(await n.waitTimers(Ky),n.done(np),()=>{n.remove(Mt).remove(Ky).clearTimer(np)})};aa(mS,{displayName:"Commands"});const n1=ia("ParserReady"),gS=()=>{throw lv()},If=St(gS,"parser"),Jy=St([],"parserTimer"),yS=n=>(n.inject(If,gS).inject(Jy,[xo]).record(n1),async()=>{await n.waitTimers(Jy);const e=n.get(_u),t=n.get(is);return n.set(If,UT.create(t,e)),n.done(n1),()=>{n.remove(If).remove(Jy).clearTimer(n1)}});aa(yS,{displayName:"Parser"});const rp=ia("SerializerReady"),Gy=St([],"serializerTimer"),vS=()=>{throw lv()},Pf=St(vS,"serializer"),wS=n=>(n.inject(Pf,vS).inject(Gy,[xo]).record(rp),async()=>{await n.waitTimers(Gy);const e=n.get(_u),t=n.get(is);return n.set(Pf,jT.create(t,e)),n.done(rp),()=>{n.remove(Pf).remove(Gy).clearTimer(rp)}});aa(wS,{displayName:"Serializer"});const r1=St("","defaultValue"),i1=St(n=>n,"stateOptions"),Qy=St([],"editorStateTimer"),o1=ia("EditorStateReady");function VA(n,e,t){if(typeof n=="string")return e(n);if(n.type==="html")return Iu.fromSchema(t).parse(n.dom);if(n.type==="json")return wo.fromJSON(t,n.value);throw E8(n)}const qA=new Ln("MILKDOWN_STATE_TRACKER");function KA(n){const e=K1(yM,Sv,S5,b5);return n.Backspace=e,n}const kS=n=>(n.inject(r1,"").inject(Kh,{}).inject(i1,e=>e).inject(Qy,[n1,rp,np]).record(o1),async()=>{await n.waitTimers(Qy);const e=n.get(is),t=n.get(If),r=n.get(yp),i=n.get(i1),o=n.get(bo),l=n.get(r1),u=VA(l,t,e),f=[...o,new Zn({key:qA,state:{init:()=>{},apply:(m,w,k,b)=>{n.set(Kh,b)}}}),EM({rules:r}),N5(KA(tN))];n.set(bo,f);const h=i({schema:e,doc:u,plugins:f}),g=gu.create(h);return n.set(Kh,g),n.done(o1),()=>{n.remove(r1).remove(Kh).remove(i1).remove(Qy).clearTimer(o1)}});aa(kS,{displayName:"EditorState"});const s1=ia("EditorViewReady"),Yy=St([],"editorViewTimer"),ip=St({},"editorViewOptions"),l1=St(null,"root"),K2=St(null,"rootDOM"),J2=St({},"rootAttrs");function JA(n,e){const t=document.createElement("div");t.className="milkdown",n.appendChild(t),e.set(K2,t);const r=e.get(J2);return Object.entries(r).forEach(([i,o])=>t.setAttribute(i,o)),t}function GA(n){n.classList.add("editor"),n.setAttribute("role","textbox")}const QA=new Ln("MILKDOWN_VIEW_CLEAR"),xS=n=>(n.inject(l1,document.body).inject(bu,{}).inject(ip,{}).inject(K2,null).inject(J2,{}).inject(Yy,[o1]).record(s1),async()=>{await n.wait(Cu);const e=n.get(l1)||document.body,t=typeof e=="string"?document.querySelector(e):e;n.update(bo,f=>[new Zn({key:QA,view:h=>{const g=t?JA(t,n):void 0;return(()=>{if(g&&t){const w=h.dom;t.replaceChild(g,w),g.appendChild(w)}})(),{destroy:()=>{g!=null&&g.parentNode&&(g==null||g.parentNode.replaceChild(h.dom,g)),g==null||g.remove()}}}}),...f]),await n.waitTimers(Yy);const r=n.get(Kh),i=n.get(ip),o=Object.fromEntries(n.get(wp)),l=Object.fromEntries(n.get(kp)),u=new BA(t,{state:r,nodeViews:o,markViews:l,...i});return GA(u.dom),n.set(bu,u),n.done(s1),()=>{u==null||u.destroy(),n.remove(l1).remove(bu).remove(ip).remove(K2).remove(J2).remove(Yy).clearTimer(s1)}});aa(xS,{displayName:"EditorView"});var Rv=(n=>(n.Idle="Idle",n.OnCreate="OnCreate",n.Created="Created",n.OnDestroy="OnDestroy",n.Destroyed="Destroyed",n))(Rv||{});const YA=class SS{constructor(){Kn(this,kf),Kn(this,Ui),Kn(this,Wl),Kn(this,Hh),Kn(this,Ym),Kn(this,Xm),Kn(this,pi),Kn(this,jl),Kn(this,xf),Kn(this,Zm),Kn(this,Sf),Kn(this,Vh),Kn(this,e1),Kn(this,pu),Kn(this,qh),Zt(this,kf,!1),Zt(this,Ui,"Idle"),Zt(this,Wl,[]),Zt(this,Hh,()=>{}),Zt(this,Ym,new ex),Zt(this,Xm,new W8),Zt(this,pi,new Map),Zt(this,jl,new Map),Zt(this,xf,new U8(Ve(this,Ym),Ve(this,Xm))),Zt(this,Zm,()=>{const e=jA(async r=>{await Promise.all(Ve(this,Wl).map(i=>i(r)))}),t=[hS,yS,wS,mS,kS,xS,$A(this),e];Ve(this,Sf).call(this,t,Ve(this,jl))}),Zt(this,Sf,(e,t)=>{e.forEach(r=>{const i=Ve(this,xf).produce(Ve(this,kf)?r.meta:void 0),o=r(i);t.set(r,{ctx:i,handler:o,cleanup:void 0})})}),Zt(this,Vh,(e,t=!1)=>Promise.all([e].flat().map(r=>{const i=Ve(this,pi).get(r),o=i==null?void 0:i.cleanup;return t?Ve(this,pi).delete(r):Ve(this,pi).set(r,{ctx:void 0,handler:void 0,cleanup:void 0}),typeof o=="function"?o():o}))),Zt(this,e1,async()=>{await Promise.all([...Ve(this,jl).entries()].map(([e,{cleanup:t}])=>typeof t=="function"?t():t)),Ve(this,jl).clear()}),Zt(this,pu,e=>{Zt(this,Ui,e),Ve(this,Hh).call(this,e)}),Zt(this,qh,e=>[...e.entries()].map(async([t,r])=>{const{ctx:i,handler:o}=r;if(!o)return;const l=await o();e.set(t,{ctx:i,handler:o,cleanup:l})})),this.enableInspector=(e=!0)=>(Zt(this,kf,e),this),this.onStatusChange=e=>(Zt(this,Hh,e),this),this.config=e=>(Ve(this,Wl).push(e),this),this.removeConfig=e=>(Zt(this,Wl,Ve(this,Wl).filter(t=>t!==e)),this),this.use=e=>{const t=[e].flat();return t.flat().forEach(r=>{Ve(this,pi).set(r,{ctx:void 0,handler:void 0,cleanup:void 0})}),Ve(this,Ui)==="Created"&&Ve(this,Sf).call(this,t,Ve(this,pi)),this},this.remove=async e=>Ve(this,Ui)==="OnCreate"?(console.warn("[Milkdown]: You are trying to remove plugins when the editor is creating, this is not recommended, please check your code."),new Promise(t=>{setTimeout(()=>{t(this.remove(e))},50)})):(await Ve(this,Vh).call(this,[e].flat(),!0),this),this.create=async()=>Ve(this,Ui)==="OnCreate"?this:(Ve(this,Ui)==="Created"&&await this.destroy(),Ve(this,pu).call(this,"OnCreate"),Ve(this,Zm).call(this),Ve(this,Sf).call(this,[...Ve(this,pi).keys()],Ve(this,pi)),await Promise.all([Ve(this,qh).call(this,Ve(this,jl)),Ve(this,qh).call(this,Ve(this,pi))].flat()),Ve(this,pu).call(this,"Created"),this),this.destroy=async(e=!1)=>Ve(this,Ui)==="Destroyed"||Ve(this,Ui)==="OnDestroy"?this:Ve(this,Ui)==="OnCreate"?new Promise(t=>{setTimeout(()=>{t(this.destroy(e))},50)}):(e&&Zt(this,Wl,[]),Ve(this,pu).call(this,"OnDestroy"),await Ve(this,Vh).call(this,[...Ve(this,pi).keys()],e),await Ve(this,e1).call(this),Ve(this,pu).call(this,"Destroyed"),this),this.action=e=>e(Ve(this,xf)),this.inspect=()=>Ve(this,kf)?[...Ve(this,jl).values(),...Ve(this,pi).values()].map(({ctx:e})=>{var t;return(t=e==null?void 0:e.inspector)==null?void 0:t.read()}).filter(e=>!!e):(console.warn("[Milkdown]: You are trying to collect inspection when inspector is disabled, please enable inspector by `editor.enableInspector()` first."),[])}static make(){return new SS}get ctx(){return Ve(this,xf)}get status(){return Ve(this,Ui)}};kf=new WeakMap;Ui=new WeakMap;Wl=new WeakMap;Hh=new WeakMap;Ym=new WeakMap;Xm=new WeakMap;pi=new WeakMap;jl=new WeakMap;xf=new WeakMap;Zm=new WeakMap;Sf=new WeakMap;Vh=new WeakMap;e1=new WeakMap;pu=new WeakMap;qh=new WeakMap;let XA=YA;function at(n,e){const t=HA(n),r=i=>async()=>{r.key=t,await i.wait(np);const o=e(i);return i.get(Mt).create(t,o),r.run=l=>i.get(Mt).call(n,l),()=>{i.get(Mt).remove(t)}};return r}function Xr(n){const e=t=>async()=>{await t.wait(xo);const r=n(t);return t.update(yp,i=>[...i,r]),e.inputRule=r,()=>{t.update(yp,i=>i.filter(o=>o!==r))}};return e}function ZA(n,e){const t=r=>async()=>{const i=e(r);return r.update(Af,o=>[...o.filter(l=>l[0]!==n),[n,i]]),t.id=n,t.schema=i,()=>{r.update(Af,o=>o.filter(([l])=>l!==n))}};return t.type=r=>{const i=r.get(is).marks[n];if(!i)throw D8(n);return i},t}function Dv(n,e){const t=r=>async()=>{const i=e(r);return r.update(Nf,o=>[...o.filter(l=>l[0]!==n),[n,i]]),t.id=n,t.schema=i,()=>{r.update(Nf,o=>o.filter(([l])=>l!==n))}};return t.type=r=>{const i=r.get(is).nodes[n];if(!i)throw R8(n);return i},t}function qi(n){let e;const t=r=>async()=>(await r.wait(xo),e=n(r),r.update(bo,i=>[...i,e]),()=>{r.update(bo,i=>i.filter(o=>o!==e))});return t.plugin=()=>e,t.key=()=>e.spec.key,t}function bS(n){const e=t=>async()=>{await t.wait(xo);const r=n(t),i=N5(r);return t.update(bo,o=>[...o,i]),e.keymap=r,()=>{t.update(bo,o=>o.filter(l=>l!==i))}};return e}function oD(n,e){const t=r=>async()=>{await r.wait(xo);const i=e(r);return n.type(r)instanceof k1?r.update(wp,o=>[...o,[n.id,i]]):r.update(kp,o=>[...o,[n.id,i]]),t.view=i,t.type=n,()=>{n.type(r)instanceof k1?r.update(wp,o=>o.filter(l=>l[0]!==n.id)):r.update(kp,o=>o.filter(l=>l[0]!==n.id))}};return t}function _o(n,e){const t=St(n,e),r=i=>(i.inject(t),()=>()=>{i.remove(t)});return r.key=t,r}function Fn(n,e){const t=_o(e,n),r=Dv(n,o=>o.get(t.key)(o)),i=[t,r];return i.id=r.id,i.node=r,i.type=o=>r.type(o),i.schema=r.schema,i.ctx=t,i.key=t.key,i.extendSchema=o=>l=>()=>{const u=l.get(t.key),h=o(u)(l);l.update(Nf,g=>[...g.filter(m=>m[0]!==n),[n,h]]),i.schema=h},i}function Ap(n,e){const t=_o(e,n),r=ZA(n,o=>o.get(t.key)(o)),i=[t,r];return i.id=r.id,i.mark=r,i.type=r.type,i.schema=r.schema,i.ctx=t,i.key=t.key,i.extendSchema=o=>l=>()=>{const u=l.get(t.key),h=o(u)(l);l.update(Af,g=>[...g.filter(m=>m[0]!==n),[n,h]]),i.schema=h},i}function Zr(n,e){const t=Object.fromEntries(Object.entries(e).map(([l,{shortcuts:u}])=>[l,u])),r=_o(t,`${n}Keymap`),i=bS(l=>{const u=l.get(r.key),f=Object.entries(e).flatMap(([h,{command:g}])=>[u[h]].flat().map(w=>[w,g(l)]));return Object.fromEntries(f)}),o=[r,i];return o.ctx=r,o.shortcuts=i,o.key=r.key,o.keymap=i.keymap,o}const Co=(n,e=()=>({}))=>_o(e,`${n}Attr`),Ip=(n,e=()=>({}))=>_o(e,`${n}Attr`);function Fu(n,e,t){const r=_o({},n),i=l=>async()=>{await l.wait(Cu);const f={plugin:e(l),options:l.get(r.key)};return l.update(vp,h=>[...h,f]),()=>{l.update(vp,h=>h.filter(g=>g!==f))}},o=[r,i];return o.id=n,o.plugin=i,o.options=r,o}function eI(){return n=>{const e=n.get(bu);return n.get(Pf)(e.state.doc)}}function tI(n,e=!1){return t=>{const r=t.get(bu),o=t.get(If)(n);if(!o)return;if(!e){const{state:g}=r;return r.dispatch(g.tr.replace(0,g.doc.content.size,new Ne(o.content,0,0)))}const l=t.get(is),u=t.get(i1),f=t.get(bo),h=gu.create({schema:l,doc:o,plugins:f,...u});r.updateState(h)}}var Xy,a4;function nI(){if(a4)return Xy;a4=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt,f=typeof Jl=="object"&&Jl&&Jl.Object===Object&&Jl,h=typeof self=="object"&&self&&self.Object===Object&&self,g=f||h||Function("return this")(),m=Object.prototype,w=m.toString,k=Math.max,b=Math.min,A=function(){return g.Date.now()};function O(B,z,H){var Y,q,C,U,R,Q,ue=0,oe=!1,se=!1,ae=!0;if(typeof B!="function")throw new TypeError(n);z=W(z)||0,F(H)&&(oe=!!H.leading,se="maxWait"in H,C=se?k(W(H.maxWait)||0,z):C,ae="trailing"in H?!!H.trailing:ae);function K(pe){var ke=Y,Me=q;return Y=q=void 0,ue=pe,U=B.apply(Me,ke),U}function _(pe){return ue=pe,R=setTimeout(D,z),oe?K(pe):U}function x(pe){var ke=pe-Q,Me=pe-ue,je=z-ke;return se?b(je,C-Me):je}function M(pe){var ke=pe-Q,Me=pe-ue;return Q===void 0||ke>=z||ke<0||se&&Me>=C}function D(){var pe=A();if(M(pe))return N(pe);R=setTimeout(D,x(pe))}function N(pe){return R=void 0,ae&&Y?K(pe):(Y=q=void 0,U)}function te(){R!==void 0&&clearTimeout(R),ue=0,Y=Q=q=R=void 0}function X(){return R===void 0?U:N(A())}function re(){var pe=A(),ke=M(pe);if(Y=arguments,q=this,Q=pe,ke){if(R===void 0)return _(Q);if(se)return R=setTimeout(D,z),K(Q)}return R===void 0&&(R=setTimeout(D,z)),U}return re.cancel=te,re.flush=X,re}function F(B){var z=typeof B;return!!B&&(z=="object"||z=="function")}function V(B){return!!B&&typeof B=="object"}function I(B){return typeof B=="symbol"||V(B)&&w.call(B)==t}function W(B){if(typeof B=="number")return B;if(I(B))return e;if(F(B)){var z=typeof B.valueOf=="function"?B.valueOf():B;B=F(z)?z+"":z}if(typeof B!="string")return B===0?B:+B;B=B.replace(r,"");var H=o.test(B);return H||l.test(B)?u(B.slice(2),H?2:8):i.test(B)?e:+B}return Xy=O,Xy}var rI=nI();const iI=Sp(rI);class _S{constructor(){this.beforeMountedListeners=[],this.mountedListeners=[],this.updatedListeners=[],this.markdownUpdatedListeners=[],this.blurListeners=[],this.focusListeners=[],this.destroyListeners=[],this.beforeMount=e=>(this.beforeMountedListeners.push(e),this),this.mounted=e=>(this.mountedListeners.push(e),this),this.updated=e=>(this.updatedListeners.push(e),this)}get listeners(){return{beforeMount:this.beforeMountedListeners,mounted:this.mountedListeners,updated:this.updatedListeners,markdownUpdated:this.markdownUpdatedListeners,blur:this.blurListeners,focus:this.focusListeners,destroy:this.destroyListeners}}markdownUpdated(e){return this.markdownUpdatedListeners.push(e),this}blur(e){return this.blurListeners.push(e),this}focus(e){return this.focusListeners.push(e),this}destroy(e){return this.destroyListeners.push(e),this}}const xp=St(new _S,"listener"),oI=new Ln("MILKDOWN_LISTENER"),CS=n=>(n.inject(xp,new _S),async()=>{await n.wait(Cu);const e=n.get(xp),{listeners:t}=e;t.beforeMount.forEach(u=>u(n)),await n.wait(rp);const r=n.get(Pf);let i=null,o=null;const l=new Zn({key:oI,view:()=>({destroy:()=>{t.destroy.forEach(u=>u(n))}}),props:{handleDOMEvents:{focus:()=>(t.focus.forEach(u=>u(n)),!1),blur:()=>(t.blur.forEach(u=>u(n)),!1)}},state:{init:(u,f)=>{i=f.doc,o=r(f.doc)},apply:u=>!u.docChanged||u.getMeta("addToHistory")===!1?void 0:iI(()=>{const{doc:h}=u;if(t.updated.length>0&&i&&!i.eq(h)&&t.updated.forEach(g=>{g(n,h,i)}),t.markdownUpdated.length>0&&i&&!i.eq(h)){const g=r(h);t.markdownUpdated.forEach(m=>{m(n,g,o)}),o=g}i=h},200)()}});n.update(bo,u=>u.concat(l)),await n.wait(s1),t.mounted.forEach(u=>u(n))});CS.meta={package:"@milkdown/plugin-listener",displayName:"Listener"};const sI="modulepreload",lI=function(n){return"/milkynotes/"+n},u4={},Xo=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(t.map(f=>{if(f=lI(f),f in u4)return;u4[f]=!0;const h=f.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":sI,h||(m.as="script"),m.crossOrigin="",m.href=f,u&&m.setAttribute("nonce",u),document.head.appendChild(m),h)return new Promise((w,k)=>{m.addEventListener("load",w),m.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};function aI(n,e){return function(t,r){let{$from:i,$to:o,node:l}=t.selection;if(l&&l.isBlock||i.depth<2||!i.sameParent(o))return!1;let u=i.node(-1);if(u.type!=n)return!1;if(i.parent.content.size==0&&i.node(-1).childCount==i.indexAfter(-1)){if(i.depth==3||i.node(-3).type!=n||i.index(-2)!=i.node(-2).childCount-1)return!1;if(r){let m=_e.empty,w=i.index(-1)?1:i.index(-2)?2:3;for(let F=i.depth-w;F>=i.depth-3;F--)m=_e.from(i.node(F).copy(m));let k=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;m=m.append(_e.from(n.createAndFill()));let b=i.before(i.depth-(w-1)),A=t.tr.replace(b,i.after(-k),new Ne(m,4-w,0)),O=-1;A.doc.nodesBetween(b,A.doc.content.size,(F,V)=>{if(O>-1)return!1;F.isTextblock&&F.content.size==0&&(O=V+1)}),O>-1&&A.setSelection(et.near(A.doc.resolve(O))),r(A.scrollIntoView())}return!0}let f=o.pos==i.end()?u.contentMatchAt(0).defaultType:null,h=t.tr.delete(i.pos,o.pos),g=f?[null,{type:f}]:void 0;return Xh(h.doc,i.pos,2,g)?(r&&r(h.split(i.pos,2,g).scrollIntoView()),!0):!1}}function ES(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,l=>l.childCount>0&&l.firstChild.type==n);return o?t?r.node(o.depth-1).type==n?uI(e,t,n,o):cI(e,t,o):!0:!1}}function uI(n,e,t,r){let i=n.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(i.step(new fr(o-1,l,o,l,new Ne(_e.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new ux(i.doc.resolve(r.$from.pos),i.doc.resolve(l),r.depth));const u=W1(r);if(u==null)return!1;i.lift(r,u);let f=i.doc.resolve(i.mapping.map(o,-1)-1);return j1(i.doc,f.pos)&&f.nodeBefore.type==f.nodeAfter.type&&i.join(f.pos),e(i.scrollIntoView()),!0}function cI(n,e,t){let r=n.tr,i=t.parent;for(let k=t.end,b=t.endIndex-1,A=t.startIndex;b>A;b--)k-=i.child(b).nodeSize,r.delete(k-1,k+1);let o=r.doc.resolve(t.start),l=o.nodeAfter;if(r.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,f=t.endIndex==i.childCount,h=o.node(-1),g=o.index(-1);if(!h.canReplace(g+(u?0:1),g+1,l.content.append(f?_e.empty:_e.from(i))))return!1;let m=o.pos,w=m+l.nodeSize;return r.step(new fr(m-(u?1:0),w+(f?1:0),m+1,w-1,new Ne((u?_e.empty:_e.from(i.copy(_e.empty))).append(f?_e.empty:_e.from(i.copy(_e.empty))),u?0:1,f?0:1),u?0:1)),e(r.scrollIntoView()),!0}function fI(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,h=>h.childCount>0&&h.firstChild.type==n);if(!o)return!1;let l=o.startIndex;if(l==0)return!1;let u=o.parent,f=u.child(l-1);if(f.type!=n)return!1;if(t){let h=f.lastChild&&f.lastChild.type==u.type,g=_e.from(h?n.create():null),m=new Ne(_e.from(n.create(null,_e.from(u.type.create(null,g)))),h?3:1,0),w=o.start,k=o.end;t(e.tr.step(new fr(w-(h?3:1),k,w,k,m,1,!0)).scrollIntoView())}return!0}}function dI(n){const e=new Map;if(!n||!n.type)throw new Error("mdast-util-definitions expected node");return Lu(n,"definition",function(r){const i=c4(r.identifier);i&&!e.get(i)&&e.set(i,r)}),t;function t(r){const i=c4(r);return e.get(i)}}function c4(n){return String(n||"").toUpperCase()}function hI(){return function(n){const e=dI(n);Lu(n,function(t,r,i){if(t.type==="definition"&&i!==void 0&&typeof r=="number")return i.children.splice(r,1),[_2,r];if(t.type==="imageReference"||t.type==="linkReference"){const o=e(t.identifier);if(o&&i&&typeof r=="number")return i.children[r]=t.type==="imageReference"?{type:"image",url:o.url,title:o.title,alt:t.alt}:{type:"link",url:o.url,title:o.title,children:t.children},[_2,r]}})}}function TS(n,e){var t;if(!(e.childCount>=1&&((t=e.lastChild)==null?void 0:t.type.name)==="hardbreak")){n.next(e.content);return}const i=[];e.content.forEach((o,l,u)=>{u!==e.childCount-1&&i.push(o)}),n.next(_e.fromArray(i))}function ye(n,e){return Object.assign(n,{meta:{package:"@milkdown/preset-commonmark",...e}}),n}const zv=Ip("emphasis");ye(zv,{displayName:"Attr<emphasis>",group:"Emphasis"});const $f=Ap("emphasis",n=>({attrs:{marker:{default:n.get(tp).emphasis||"*"}},parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>e==="italic"}],toDOM:e=>["em",n.get(zv.key)(e)],parseMarkdown:{match:e=>e.type==="emphasis",runner:(e,t,r)=>{e.openMark(r,{marker:t.marker}),e.next(t.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="emphasis",runner:(e,t)=>{e.withMark(t,"emphasis",void 0,{marker:t.attrs.marker})}}}));ye($f.mark,{displayName:"MarkSchema<emphasis>",group:"Emphasis"});ye($f.ctx,{displayName:"MarkSchemaCtx<emphasis>",group:"Emphasis"});const Lv=at("ToggleEmphasis",n=>()=>q1($f.type(n)));ye(Lv,{displayName:"Command<toggleEmphasisCommand>",group:"Emphasis"});const MS=Xr(n=>Ep(/(?:^|[^*])\*([^*]+)\*$/,$f.type(n),{getAttr:()=>({marker:"*"}),updateCaptured:({fullMatch:e,start:t})=>e.startsWith("*")?{}:{fullMatch:e.slice(1),start:t+1}}));ye(MS,{displayName:"InputRule<emphasis>|Star",group:"Emphasis"});const NS=Xr(n=>Ep(/(?:^|[^_])_([^_]+)_$/,$f.type(n),{getAttr:()=>({marker:"_"}),updateCaptured:({fullMatch:e,start:t})=>e.startsWith("_")?{}:{fullMatch:e.slice(1),start:t+1}}));ye(NS,{displayName:"InputRule<emphasis>|Underscore",group:"Emphasis"});const Fv=Zr("emphasisKeymap",{ToggleEmphasis:{shortcuts:"Mod-i",command:n=>{const e=n.get(Mt);return()=>e.call(Lv.key)}}});ye(Fv.ctx,{displayName:"KeymapCtx<emphasis>",group:"Emphasis"});ye(Fv.shortcuts,{displayName:"Keymap<emphasis>",group:"Emphasis"});const Bv=Ip("strong");ye(Bv,{displayName:"Attr<strong>",group:"Strong"});const Pp=Ap("strong",n=>({attrs:{marker:{default:n.get(tp).strong||"*"}},parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-style",getAttrs:e=>e==="bold"}],toDOM:e=>["strong",n.get(Bv.key)(e)],parseMarkdown:{match:e=>e.type==="strong",runner:(e,t,r)=>{e.openMark(r,{marker:t.marker}),e.next(t.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="strong",runner:(e,t)=>{e.withMark(t,"strong",void 0,{marker:t.attrs.marker})}}}));ye(Pp.mark,{displayName:"MarkSchema<strong>",group:"Strong"});ye(Pp.ctx,{displayName:"MarkSchemaCtx<strong>",group:"Strong"});const Uv=at("ToggleStrong",n=>()=>q1(Pp.type(n)));ye(Uv,{displayName:"Command<toggleStrongCommand>",group:"Strong"});const AS=Xr(n=>Ep(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,Pp.type(n),{getAttr:e=>({marker:e[0].startsWith("*")?"*":"_"})}));ye(AS,{displayName:"InputRule<strong>",group:"Strong"});const Wv=Zr("strongKeymap",{ToggleBold:{shortcuts:["Mod-b"],command:n=>{const e=n.get(Mt);return()=>e.call(Uv.key)}}});ye(Wv.ctx,{displayName:"KeymapCtx<strong>",group:"Strong"});ye(Wv.shortcuts,{displayName:"Keymap<strong>",group:"Strong"});const jv=Ip("inlineCode");ye(jv,{displayName:"Attr<inlineCode>",group:"InlineCode"});const Yl=Ap("inlineCode",n=>({priority:100,code:!0,inclusive:!1,parseDOM:[{tag:"code"}],toDOM:e=>["code",n.get(jv.key)(e)],parseMarkdown:{match:e=>e.type==="inlineCode",runner:(e,t,r)=>{e.openMark(r),e.addText(t.value),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="inlineCode",runner:(e,t,r)=>{e.withMark(t,"inlineCode",r.text||"")}}}));ye(Yl.mark,{displayName:"MarkSchema<inlineCode>",group:"InlineCode"});ye(Yl.ctx,{displayName:"MarkSchemaCtx<inlineCode>",group:"InlineCode"});const $v=at("ToggleInlineCode",n=>()=>(e,t)=>{const{selection:r,tr:i}=e;if(r.empty)return!1;const{from:o,to:l}=r;return e.doc.rangeHasMark(o,l,Yl.type(n))?(t==null||t(i.removeMark(o,l,Yl.type(n))),!0):(Object.keys(e.schema.marks).filter(h=>h!==Yl.type.name).map(h=>e.schema.marks[h]).forEach(h=>{i.removeMark(o,l,h)}),t==null||t(i.addMark(o,l,Yl.type(n).create())),!0)});ye($v,{displayName:"Command<toggleInlineCodeCommand>",group:"InlineCode"});const IS=Xr(n=>Ep(/(?:`)([^`]+)(?:`)$/,Yl.type(n)));ye(IS,{displayName:"InputRule<inlineCodeInputRule>",group:"InlineCode"});const Hv=Zr("inlineCodeKeymap",{ToggleInlineCode:{shortcuts:"Mod-e",command:n=>{const e=n.get(Mt);return()=>e.call($v.key)}}});ye(Hv.ctx,{displayName:"KeymapCtx<inlineCode>",group:"InlineCode"});ye(Hv.shortcuts,{displayName:"Keymap<inlineCode>",group:"InlineCode"});const Vv=Ip("link");ye(Vv,{displayName:"Attr<link>",group:"Link"});const Of=Ap("link",n=>({attrs:{href:{},title:{default:null}},parseDOM:[{tag:"a[href]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw us(e);return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:e=>["a",{...n.get(Vv.key)(e),...e.attrs}],parseMarkdown:{match:e=>e.type==="link",runner:(e,t,r)=>{const i=t.url,o=t.title;e.openMark(r,{href:i,title:o}),e.next(t.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="link",runner:(e,t)=>{e.withMark(t,"link",void 0,{title:t.attrs.title,url:t.attrs.href})}}}));ye(Of.mark,{displayName:"MarkSchema<link>",group:"Link"});const PS=at("ToggleLink",n=>(e={})=>q1(Of.type(n),e));ye(PS,{displayName:"Command<toggleLinkCommand>",group:"Link"});const OS=at("UpdateLink",n=>(e={})=>(t,r)=>{if(!r)return!1;let i,o=-1;const{selection:l}=t,{from:u,to:f}=l;if(t.doc.nodesBetween(u,u===f?f+1:f,(b,A)=>{if(Of.type(n).isInSet(b.marks))return i=b,o=A,!1}),!i)return!1;const h=i.marks.find(({type:b})=>b===Of.type(n));if(!h)return!1;const g=o,m=o+i.nodeSize,{tr:w}=t,k=Of.type(n).create({...h.attrs,...e});return k?(r(w.removeMark(g,m,h).addMark(g,m,k).setSelection(new st(w.selection.$anchor)).scrollIntoView()),!0):!1});ye(OS,{displayName:"Command<updateLinkCommand>",group:"Link"});const RS=Dv("doc",()=>({content:"block+",parseMarkdown:{match:({type:n})=>n==="root",runner:(n,e,t)=>{n.injectRoot(e,t)}},toMarkdown:{match:n=>n.type.name==="doc",runner:(n,e)=>{n.openNode("root"),n.next(e.content)}}}));ye(RS,{displayName:"NodeSchema<doc>",group:"Doc"});function pI(n){return Lu(n,"paragraph",e=>{var t,r;if(((t=e.children)==null?void 0:t.length)!==1)return;const i=(r=e.children)==null?void 0:r[0];if(!i||i.type!=="html")return;const{value:o}=i;["<br />","<br>","<br/>"].includes(o)&&e.children.splice(0,1)})}const Y1=Fu("remark-preserve-empty-line",()=>()=>pI);ye(Y1.plugin,{displayName:"Remark<remarkPreserveEmptyLine>",group:"Remark"});ye(Y1.options,{displayName:"RemarkConfig<remarkPreserveEmptyLine>",group:"Remark"});const qv=Co("paragraph");ye(qv,{displayName:"Attr<paragraph>",group:"Paragraph"});const ua=Fn("paragraph",n=>({content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:e=>["p",n.get(qv.key)(e),0],parseMarkdown:{match:e=>e.type==="paragraph",runner:(e,t,r)=>{e.openNode(r),t.children?e.next(t.children):e.addText(t.value||""),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="paragraph",runner:(e,t)=>{e.openNode("paragraph"),(!t.content||t.content.size===0)&&mI(n)?e.addNode("html",void 0,"<br />"):TS(e,t),e.closeNode()}}}));function mI(n){let e=!1;try{n.get(Y1.id),e=!0}catch{e=!1}return e}ye(ua.node,{displayName:"NodeSchema<paragraph>",group:"Paragraph"});ye(ua.ctx,{displayName:"NodeSchemaCtx<paragraph>",group:"Paragraph"});const Kv=at("TurnIntoText",n=>()=>hp(ua.type(n)));ye(Kv,{displayName:"Command<turnIntoTextCommand>",group:"Paragraph"});const Jv=Zr("paragraphKeymap",{TurnIntoText:{shortcuts:"Mod-Alt-0",command:n=>{const e=n.get(Mt);return()=>e.call(Kv.key)}}});ye(Jv.ctx,{displayName:"KeymapCtx<paragraph>",group:"Paragraph"});ye(Jv.shortcuts,{displayName:"Keymap<paragraph>",group:"Paragraph"});const gI=Array(6).fill(0).map((n,e)=>e+1);function yI(n){return n.textContent.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-")}const X1=_o(yI,"headingIdGenerator");ye(X1,{displayName:"Ctx<HeadingIdGenerator>",group:"Heading"});const Gv=Co("heading");ye(Gv,{displayName:"Attr<heading>",group:"Heading"});const Bu=Fn("heading",n=>{const e=n.get(X1.key);return{content:"inline*",group:"block",defining:!0,attrs:{id:{default:""},level:{default:1}},parseDOM:gI.map(t=>({tag:`h${t}`,getAttrs:r=>{if(!(r instanceof HTMLElement))throw us(r);return{level:t,id:r.id}}})),toDOM:t=>[`h${t.attrs.level}`,{...n.get(Gv.key)(t),id:t.attrs.id||e(t)},0],parseMarkdown:{match:({type:t})=>t==="heading",runner:(t,r,i)=>{const o=r.depth;t.openNode(i,{level:o}),t.next(r.children),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="heading",runner:(t,r)=>{t.openNode("heading",void 0,{depth:r.attrs.level}),TS(t,r),t.closeNode()}}}});ye(Bu.node,{displayName:"NodeSchema<heading>",group:"Heading"});ye(Bu.ctx,{displayName:"NodeSchemaCtx<heading>",group:"Heading"});const DS=Xr(n=>g5(/^(?<hashes>#+)\s$/,Bu.type(n),e=>{var t,r;const i=((r=(t=e.groups)==null?void 0:t.hashes)==null?void 0:r.length)||0,o=n.get(bu),{$from:l}=o.state.selection,u=l.node();if(u.type.name==="heading"){let f=Number(u.attrs.level)+Number(i);return f>6&&(f=6),{level:f}}return{level:i}}));ye(DS,{displayName:"InputRule<wrapInHeadingInputRule>",group:"Heading"});const Hl=at("WrapInHeading",n=>e=>(e??(e=1),e<1?hp(ua.type(n)):hp(Bu.type(n),{level:e})));ye(Hl,{displayName:"Command<wrapInHeadingCommand>",group:"Heading"});const Qv=at("DowngradeHeading",n=>()=>(e,t,r)=>{const{$from:i}=e.selection,o=i.node();if(o.type!==Bu.type(n)||!e.selection.empty||i.parentOffset!==0)return!1;const l=o.attrs.level-1;return l?(t==null||t(e.tr.setNodeMarkup(e.selection.$from.before(),void 0,{...o.attrs,level:l})),!0):hp(ua.type(n))(e,t,r)});ye(Qv,{displayName:"Command<downgradeHeadingCommand>",group:"Heading"});const Yv=Zr("headingKeymap",{TurnIntoH1:{shortcuts:"Mod-Alt-1",command:n=>{const e=n.get(Mt);return()=>e.call(Hl.key,1)}},TurnIntoH2:{shortcuts:"Mod-Alt-2",command:n=>{const e=n.get(Mt);return()=>e.call(Hl.key,2)}},TurnIntoH3:{shortcuts:"Mod-Alt-3",command:n=>{const e=n.get(Mt);return()=>e.call(Hl.key,3)}},TurnIntoH4:{shortcuts:"Mod-Alt-4",command:n=>{const e=n.get(Mt);return()=>e.call(Hl.key,4)}},TurnIntoH5:{shortcuts:"Mod-Alt-5",command:n=>{const e=n.get(Mt);return()=>e.call(Hl.key,5)}},TurnIntoH6:{shortcuts:"Mod-Alt-6",command:n=>{const e=n.get(Mt);return()=>e.call(Hl.key,6)}},DowngradeHeading:{shortcuts:["Delete","Backspace"],command:n=>{const e=n.get(Mt);return()=>e.call(Qv.key)}}});ye(Yv.ctx,{displayName:"KeymapCtx<heading>",group:"Heading"});ye(Yv.shortcuts,{displayName:"Keymap<heading>",group:"Heading"});const Xv=Co("blockquote");ye(Xv,{displayName:"Attr<blockquote>",group:"Blockquote"});const Op=Fn("blockquote",n=>({content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:e=>["blockquote",n.get(Xv.key)(e),0],parseMarkdown:{match:({type:e})=>e==="blockquote",runner:(e,t,r)=>{e.openNode(r).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="blockquote",runner:(e,t)=>{e.openNode("blockquote").next(t.content).closeNode()}}}));ye(Op.node,{displayName:"NodeSchema<blockquote>",group:"Blockquote"});ye(Op.ctx,{displayName:"NodeSchemaCtx<blockquote>",group:"Blockquote"});const zS=Xr(n=>kv(/^\s*>\s$/,Op.type(n)));ye(zS,{displayName:"InputRule<wrapInBlockquoteInputRule>",group:"Blockquote"});const Zv=at("WrapInBlockquote",n=>()=>_v(Op.type(n)));ye(Zv,{displayName:"Command<wrapInBlockquoteCommand>",group:"Blockquote"});const e3=Zr("blockquoteKeymap",{WrapInBlockquote:{shortcuts:"Mod-Shift-b",command:n=>{const e=n.get(Mt);return()=>e.call(Zv.key)}}});ye(e3.ctx,{displayName:"KeymapCtx<blockquote>",group:"Blockquote"});ye(e3.shortcuts,{displayName:"Keymap<blockquote>",group:"Blockquote"});const t3=Co("codeBlock",()=>({pre:{},code:{}}));ye(t3,{displayName:"Attr<codeBlock>",group:"CodeBlock"});const Rp=Fn("code_block",n=>({content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>{if(!(e instanceof HTMLElement))throw us(e);return{language:e.dataset.language}}}],toDOM:e=>{const t=n.get(t3.key)(e);return["pre",{...t.pre,"data-language":e.attrs.language},["code",t.code,0]]},parseMarkdown:{match:({type:e})=>e==="code",runner:(e,t,r)=>{const i=t.lang,o=t.value;e.openNode(r,{language:i}),o&&e.addText(o),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="code_block",runner:(e,t)=>{var r;e.addNode("code",void 0,((r=t.content.firstChild)==null?void 0:r.text)||"",{lang:t.attrs.language})}}}));ye(Rp.node,{displayName:"NodeSchema<codeBlock>",group:"CodeBlock"});ye(Rp.ctx,{displayName:"NodeSchemaCtx<codeBlock>",group:"CodeBlock"});const LS=Xr(n=>g5(/^```(?<language>[a-z]*)?[\s\n]$/,Rp.type(n),e=>{var t;return{language:((t=e.groups)==null?void 0:t.language)??""}}));ye(LS,{displayName:"InputRule<createCodeBlockInputRule>",group:"CodeBlock"});const n3=at("CreateCodeBlock",n=>(e="")=>hp(Rp.type(n),{language:e}));ye(n3,{displayName:"Command<createCodeBlockCommand>",group:"CodeBlock"});const vI=at("UpdateCodeBlockLanguage",()=>({pos:n,language:e}={pos:-1,language:""})=>(t,r)=>n>=0?(r==null||r(t.tr.setNodeAttribute(n,"language",e)),!0):!1);ye(vI,{displayName:"Command<updateCodeBlockLanguageCommand>",group:"CodeBlock"});const r3=Zr("codeBlockKeymap",{CreateCodeBlock:{shortcuts:"Mod-Alt-c",command:n=>{const e=n.get(Mt);return()=>e.call(n3.key)}}});ye(r3.ctx,{displayName:"KeymapCtx<codeBlock>",group:"CodeBlock"});ye(r3.shortcuts,{displayName:"Keymap<codeBlock>",group:"CodeBlock"});const i3=Co("image");ye(i3,{displayName:"Attr<image>",group:"Image"});const Hf=Fn("image",n=>({inline:!0,group:"inline",selectable:!0,draggable:!0,marks:"",atom:!0,defining:!0,isolating:!0,attrs:{src:{default:""},alt:{default:""},title:{default:""}},parseDOM:[{tag:"img[src]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw us(e);return{src:e.getAttribute("src")||"",alt:e.getAttribute("alt")||"",title:e.getAttribute("title")||e.getAttribute("alt")||""}}}],toDOM:e=>["img",{...n.get(i3.key)(e),...e.attrs}],parseMarkdown:{match:({type:e})=>e==="image",runner:(e,t,r)=>{const i=t.url,o=t.alt,l=t.title;e.addNode(r,{src:i,alt:o,title:l})}},toMarkdown:{match:e=>e.type.name==="image",runner:(e,t)=>{e.addNode("image",void 0,void 0,{title:t.attrs.title,url:t.attrs.src,alt:t.attrs.alt})}}}));ye(Hf.node,{displayName:"NodeSchema<image>",group:"Image"});ye(Hf.ctx,{displayName:"NodeSchemaCtx<image>",group:"Image"});const FS=at("InsertImage",n=>(e={})=>(t,r)=>{if(!r)return!0;const{src:i="",alt:o="",title:l=""}=e,u=Hf.type(n).create({src:i,alt:o,title:l});return u&&r(t.tr.replaceSelectionWith(u).scrollIntoView()),!0});ye(FS,{displayName:"Command<insertImageCommand>",group:"Image"});const BS=at("UpdateImage",n=>(e={})=>(t,r)=>{const i=FM(t.selection,Hf.type(n));if(!i)return!1;const{node:o,pos:l}=i,u={...o.attrs},{src:f,alt:h,title:g}=e;return f!==void 0&&(u.src=f),h!==void 0&&(u.alt=h),g!==void 0&&(u.title=g),r==null||r(t.tr.setNodeMarkup(l,void 0,u).scrollIntoView()),!0});ye(BS,{displayName:"Command<updateImageCommand>",group:"Image"});const wI=Xr(n=>new Yr(/!\[(?<alt>.*?)]\((?<filename>.*?)\s*(?="|\))"?(?<title>[^"]+)?"?\)/,(e,t,r,i)=>{const[o,l,u="",f]=t;return o?e.tr.replaceWith(r,i,Hf.type(n).create({src:u,alt:l,title:f})):null}));ye(wI,{displayName:"InputRule<insertImageInputRule>",group:"Image"});const N1=Co("hardbreak",n=>({"data-type":"hardbreak","data-is-inline":n.attrs.isInline}));ye(N1,{displayName:"Attr<hardbreak>",group:"Hardbreak"});const Eu=Fn("hardbreak",n=>({inline:!0,group:"inline",attrs:{isInline:{default:!1}},selectable:!1,parseDOM:[{tag:"br"},{tag:'span[data-type="hardbreak"]',getAttrs:()=>({isInline:!0})}],toDOM:e=>e.attrs.isInline?["span",n.get(N1.key)(e)," "]:["br",n.get(N1.key)(e)],parseMarkdown:{match:({type:e})=>e==="break",runner:(e,t,r)=>{var i;e.addNode(r,{isInline:!!((i=t.data)!=null&&i.isInline)})}},leafText:()=>`
`,toMarkdown:{match:e=>e.type.name==="hardbreak",runner:(e,t)=>{t.attrs.isInline?e.addNode("text",void 0,`
`):e.addNode("break")}}}));ye(Eu.node,{displayName:"NodeSchema<hardbreak>",group:"Hardbreak"});ye(Eu.ctx,{displayName:"NodeSchemaCtx<hardbreak>",group:"Hardbreak"});const o3=at("InsertHardbreak",n=>()=>(e,t)=>{var r;const{selection:i,tr:o}=e;if(!(i instanceof st))return!1;if(i.empty){const l=i.$from.node();if(l.childCount>0&&((r=l.lastChild)==null?void 0:r.type.name)==="hardbreak")return t==null||t(o.replaceRangeWith(i.to-1,i.to,e.schema.node("paragraph")).setSelection(et.near(o.doc.resolve(i.to))).scrollIntoView()),!0}return t==null||t(o.setMeta("hardbreak",!0).replaceSelectionWith(Eu.type(n).create()).scrollIntoView()),!0});ye(o3,{displayName:"Command<insertHardbreakCommand>",group:"Hardbreak"});const s3=Zr("hardbreakKeymap",{InsertHardbreak:{shortcuts:"Shift-Enter",command:n=>{const e=n.get(Mt);return()=>e.call(o3.key)}}});ye(s3.ctx,{displayName:"KeymapCtx<hardbreak>",group:"Hardbreak"});ye(s3.shortcuts,{displayName:"Keymap<hardbreak>",group:"Hardbreak"});const l3=Co("hr");ye(l3,{displayName:"Attr<hr>",group:"Hr"});const Dp=Fn("hr",n=>({group:"block",parseDOM:[{tag:"hr"}],toDOM:e=>["hr",n.get(l3.key)(e)],parseMarkdown:{match:({type:e})=>e==="thematicBreak",runner:(e,t,r)=>{e.addNode(r)}},toMarkdown:{match:e=>e.type.name==="hr",runner:e=>{e.addNode("thematicBreak")}}}));ye(Dp.node,{displayName:"NodeSchema<hr>",group:"Hr"});ye(Dp.ctx,{displayName:"NodeSchemaCtx<hr>",group:"Hr"});const US=Xr(n=>new Yr(/^(?:---|___\s|\*\*\*\s)$/,(e,t,r,i)=>{const{tr:o}=e;return t[0]&&o.replaceWith(r-1,i,Dp.type(n).create()),o}));ye(US,{displayName:"InputRule<insertHrInputRule>",group:"Hr"});const WS=at("InsertHr",n=>()=>(e,t)=>{if(!t)return!0;const r=ua.node.type(n).create(),{tr:i,selection:o}=e,{from:l}=o,u=Dp.type(n).create();if(!u)return!0;const f=i.replaceSelectionWith(u).insert(l,r),h=et.findFrom(f.doc.resolve(l),1,!0);return h&&t(f.setSelection(h).scrollIntoView()),!0});ye(WS,{displayName:"Command<insertHrCommand>",group:"Hr"});const a3=Co("bulletList");ye(a3,{displayName:"Attr<bulletList>",group:"BulletList"});const Vf=Fn("bullet_list",n=>({content:"listItem+",group:"block",attrs:{spread:{default:!1}},parseDOM:[{tag:"ul",getAttrs:e=>{if(!(e instanceof HTMLElement))throw us(e);return{spread:e.dataset.spread}}}],toDOM:e=>["ul",{...n.get(a3.key)(e),"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:t})=>e==="list"&&!t,runner:(e,t,r)=>{const i=t.spread!=null?`${t.spread}`:"false";e.openNode(r,{spread:i}).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="bullet_list",runner:(e,t)=>{e.openNode("list",void 0,{ordered:!1,spread:t.attrs.spread==="true"}).next(t.content).closeNode()}}}));ye(Vf.node,{displayName:"NodeSchema<bulletList>",group:"BulletList"});ye(Vf.ctx,{displayName:"NodeSchemaCtx<bulletList>",group:"BulletList"});const jS=Xr(n=>kv(/^\s*([-+*])\s$/,Vf.type(n)));ye(jS,{displayName:"InputRule<wrapInBulletListInputRule>",group:"BulletList"});const u3=at("WrapInBulletList",n=>()=>_v(Vf.type(n)));ye(u3,{displayName:"Command<wrapInBulletListCommand>",group:"BulletList"});const c3=Zr("bulletListKeymap",{WrapInBulletList:{shortcuts:"Mod-Alt-8",command:n=>{const e=n.get(Mt);return()=>e.call(u3.key)}}});ye(c3.ctx,{displayName:"KeymapCtx<bulletListKeymap>",group:"BulletList"});ye(c3.shortcuts,{displayName:"Keymap<bulletListKeymap>",group:"BulletList"});const f3=Co("orderedList");ye(f3,{displayName:"Attr<orderedList>",group:"OrderedList"});const qf=Fn("ordered_list",n=>({content:"listItem+",group:"block",attrs:{order:{default:1},spread:{default:!1}},parseDOM:[{tag:"ol",getAttrs:e=>{if(!(e instanceof HTMLElement))throw us(e);return{spread:e.dataset.spread,order:e.hasAttribute("start")?Number(e.getAttribute("start")):1}}}],toDOM:e=>["ol",{...n.get(f3.key)(e),...e.attrs.order===1?{}:e.attrs.order,"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:t})=>e==="list"&&!!t,runner:(e,t,r)=>{const i=t.spread!=null?`${t.spread}`:"true";e.openNode(r,{spread:i}).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="ordered_list",runner:(e,t)=>{e.openNode("list",void 0,{ordered:!0,start:1,spread:t.attrs.spread==="true"}),e.next(t.content),e.closeNode()}}}));ye(qf.node,{displayName:"NodeSchema<orderedList>",group:"OrderedList"});ye(qf.ctx,{displayName:"NodeSchemaCtx<orderedList>",group:"OrderedList"});const $S=Xr(n=>kv(/^\s*(\d+)\.\s$/,qf.type(n),e=>({order:Number(e[1])}),(e,t)=>t.childCount+t.attrs.order===Number(e[1])));ye($S,{displayName:"InputRule<wrapInOrderedListInputRule>",group:"OrderedList"});const d3=at("WrapInOrderedList",n=>()=>_v(qf.type(n)));ye(d3,{displayName:"Command<wrapInOrderedListCommand>",group:"OrderedList"});const h3=Zr("orderedListKeymap",{WrapInOrderedList:{shortcuts:"Mod-Alt-7",command:n=>{const e=n.get(Mt);return()=>e.call(d3.key)}}});ye(h3.ctx,{displayName:"KeymapCtx<orderedList>",group:"OrderedList"});ye(h3.shortcuts,{displayName:"Keymap<orderedList>",group:"OrderedList"});const p3=Co("listItem");ye(p3,{displayName:"Attr<listItem>",group:"ListItem"});const as=Fn("list_item",n=>({group:"listItem",content:"paragraph block*",attrs:{label:{default:""},listType:{default:"bullet"},spread:{default:"true"}},defining:!0,parseDOM:[{tag:"li",getAttrs:e=>{if(!(e instanceof HTMLElement))throw us(e);return{label:e.dataset.label,listType:e.dataset.listType,spread:e.dataset.spread}}}],toDOM:e=>["li",{...n.get(p3.key)(e),"data-label":e.attrs.label,"data-list-type":e.attrs.listType,"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e})=>e==="listItem",runner:(e,t,r)=>{const i=t.label!=null?`${t.label}.`:"",o=t.label!=null?"ordered":"bullet",l=t.spread!=null?`${t.spread}`:"true";e.openNode(r,{label:i,listType:o,spread:l}),e.next(t.children),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="list_item",runner:(e,t)=>{e.openNode("listItem",void 0,{spread:t.attrs.spread==="true"}),e.next(t.content),e.closeNode()}}}));ye(as.node,{displayName:"NodeSchema<listItem>",group:"ListItem"});ye(as.ctx,{displayName:"NodeSchemaCtx<listItem>",group:"ListItem"});const m3=at("SinkListItem",n=>()=>fI(as.type(n)));ye(m3,{displayName:"Command<sinkListItemCommand>",group:"ListItem"});const g3=at("LiftListItem",n=>()=>ES(as.type(n)));ye(g3,{displayName:"Command<liftListItemCommand>",group:"ListItem"});const y3=at("SplitListItem",n=>()=>aI(as.type(n)));ye(y3,{displayName:"Command<splitListItemCommand>",group:"ListItem"});function kI(n){return(e,t,r)=>{const{selection:i}=e;if(!(i instanceof st))return!1;const{empty:o,$from:l}=i;if(!o||l.parentOffset!==0)return!1;const u=l.node(-1);return u.type!==as.type(n)||u.firstChild!==l.node()||l.node(-2).childCount>1?!1:ES(as.type(n))(e,t,r)}}const v3=at("LiftFirstListItem",n=>()=>kI(n));ye(v3,{displayName:"Command<liftFirstListItemCommand>",group:"ListItem"});const w3=Zr("listItemKeymap",{NextListItem:{shortcuts:"Enter",command:n=>{const e=n.get(Mt);return()=>e.call(y3.key)}},SinkListItem:{shortcuts:["Tab","Mod-]"],command:n=>{const e=n.get(Mt);return()=>e.call(m3.key)}},LiftListItem:{shortcuts:["Shift-Tab","Mod-["],command:n=>{const e=n.get(Mt);return()=>e.call(g3.key)}},LiftFirstListItem:{shortcuts:["Backspace","Delete"],command:n=>{const e=n.get(Mt);return()=>e.call(v3.key)}}});ye(w3.ctx,{displayName:"KeymapCtx<listItem>",group:"ListItem"});ye(w3.shortcuts,{displayName:"Keymap<listItem>",group:"ListItem"});const HS=Dv("text",()=>({group:"inline",parseMarkdown:{match:({type:n})=>n==="text",runner:(n,e)=>{n.addText(e.value)}},toMarkdown:{match:n=>n.type.name==="text",runner:(n,e)=>{n.addNode("text",void 0,e.text)}}}));ye(HS,{displayName:"NodeSchema<text>",group:"Text"});const k3=Co("html");ye(k3,{displayName:"Attr<html>",group:"Html"});const x3=Fn("html",n=>({atom:!0,group:"inline",inline:!0,attrs:{value:{default:""}},toDOM:e=>{const t=document.createElement("span"),r={...n.get(k3.key)(e),"data-value":e.attrs.value,"data-type":"html"};return t.textContent=e.attrs.value,["span",r,e.attrs.value]},parseDOM:[{tag:'span[data-type="html"]',getAttrs:e=>({value:e.dataset.value??""})}],parseMarkdown:{match:({type:e})=>e==="html",runner:(e,t,r)=>{e.addNode(r,{value:t.value})}},toMarkdown:{match:e=>e.type.name==="html",runner:(e,t)=>{e.addNode("html",void 0,t.attrs.value)}}}));ye(x3.node,{displayName:"NodeSchema<html>",group:"Html"});ye(x3.ctx,{displayName:"NodeSchemaCtx<html>",group:"Html"});const xI=[RS,qv,ua,X1,Gv,Bu,N1,Eu,Xv,Op,t3,Rp,l3,Dp,i3,Hf,a3,Vf,f3,qf,p3,as,zv,$f,Bv,Pp,jv,Yl,Vv,Of,k3,x3,HS].flat(),SI=[zS,jS,$S,LS,US,DS].flat(),bI=[MS,NS,IS,AS],_I=[Kv,Zv,Hl,Qv,n3,o3,WS,FS,BS,d3,u3,m3,y3,g3,v3,Lv,$v,Uv,PS,OS],CI=[e3,r3,s3,Yv,w3,h3,c3,Jv,Fv,Hv,Wv].flat(),S3=Fu("remarkAddOrderInList",()=>()=>n=>{Lu(n,"list",e=>{if(e.ordered){const t=e.start??1;e.children.forEach((r,i)=>{r.label=i+t})}})});ye(S3.plugin,{displayName:"Remark<remarkAddOrderInListPlugin>",group:"Remark"});ye(S3.options,{displayName:"RemarkConfig<remarkAddOrderInListPlugin>",group:"Remark"});const b3=Fu("remarkLineBreak",()=>()=>n=>{const e=/[\t ]*(?:\r?\n|\r)/g;Lu(n,"text",(t,r,i)=>{if(!t.value||typeof t.value!="string")return;const o=[];let l=0;e.lastIndex=0;let u=e.exec(t.value);for(;u;){const h=u.index;l!==h&&o.push({type:"text",value:t.value.slice(l,h)}),o.push({type:"break",data:{isInline:!0}}),l=h+u[0].length,u=e.exec(t.value)}if(o.length>0&&i&&typeof r=="number")return l<t.value.length&&o.push({type:"text",value:t.value.slice(l)}),i.children.splice(r,1,...o),r+o.length})});ye(b3.plugin,{displayName:"Remark<remarkLineBreak>",group:"Remark"});ye(b3.options,{displayName:"RemarkConfig<remarkLineBreak>",group:"Remark"});const _3=Fu("remarkInlineLink",()=>hI);ye(_3.plugin,{displayName:"Remark<remarkInlineLinkPlugin>",group:"Remark"});ye(_3.options,{displayName:"RemarkConfig<remarkInlineLinkPlugin>",group:"Remark"});const EI=n=>!!n.children,TI=n=>n.type==="html";function MI(n,e){return t(n,0,null)[0];function t(r,i,o){if(EI(r)){const l=[];for(let u=0,f=r.children.length;u<f;u++){const h=r.children[u];if(h){const g=t(h,u,r);if(g)for(let m=0,w=g.length;m<w;m++){const k=g[m];k&&l.push(k)}}}r.children=l}return e(r,i,o)}}const C3=Fu("remarkHTMLTransformer",()=>()=>n=>{MI(n,(e,t,r)=>TI(e)?((r==null?void 0:r.type)==="root"&&(e.children=[{...e}],delete e.value,e.type="paragraph"),[e]):[e])});ye(C3.plugin,{displayName:"Remark<remarkHtmlTransformer>",group:"Remark"});ye(C3.options,{displayName:"RemarkConfig<remarkHtmlTransformer>",group:"Remark"});const E3=Fu("remarkMarker",()=>()=>(n,e)=>{const t=r=>e.value.charAt(r.position.start.offset);Lu(n,r=>["strong","emphasis"].includes(r.type),r=>{r.marker=t(r)})});ye(E3.plugin,{displayName:"Remark<remarkMarker>",group:"Remark"});ye(E3.options,{displayName:"RemarkConfig<remarkMarker>",group:"Remark"});const VS=qi(()=>{let n=!1;const e=new Ln("MILKDOWN_INLINE_NODES_CURSOR"),t=new Zn({key:e,state:{init(){return!1},apply(r){if(!r.selection.empty)return!1;const i=r.selection.$from,o=i.nodeBefore,l=i.nodeAfter;return!!(o&&l&&o.isInline&&!o.isText&&l.isInline&&!l.isText)}},props:{handleDOMEvents:{compositionend:(r,i)=>n?(n=!1,requestAnimationFrame(()=>{if(t.getState(r.state)){const l=r.state.selection.from;i.preventDefault(),r.dispatch(r.state.tr.insertText(i.data||"",l))}}),!0):!1,compositionstart:r=>(t.getState(r.state)&&(n=!0),!1),beforeinput:(r,i)=>{if(t.getState(r.state)&&i instanceof InputEvent&&i.data&&!n){const l=r.state.selection.from;return i.preventDefault(),r.dispatch(r.state.tr.insertText(i.data||"",l)),!0}return!1}},decorations(r){if(t.getState(r)){const l=r.selection.$from.pos,u=document.createElement("span"),f=Xn.widget(l,u,{side:-1}),h=document.createElement("span"),g=Xn.widget(l,h);return setTimeout(()=>{u.contentEditable="true",h.contentEditable="true"}),Gt.create(r.doc,[f,g])}return Gt.empty}}});return t});ye(VS,{displayName:"Prose<inlineNodesCursorPlugin>",group:"Prose"});const qS=qi(n=>new Zn({key:new Ln("MILKDOWN_HARDBREAK_MARKS"),appendTransaction:(e,t,r)=>{if(!e.length)return;const[i]=e;if(!i)return;const[o]=i.steps;if(i.getMeta("hardbreak")){if(!(o instanceof Gn))return;const{from:f}=o;return r.tr.setNodeMarkup(f,Eu.type(n),void 0,[])}if(o instanceof Js){let f=r.tr;const{from:h,to:g}=o;return r.doc.nodesBetween(h,g,(m,w)=>{m.type===Eu.type(n)&&(f=f.setNodeMarkup(w,Eu.type(n),void 0,[]))}),f}}}));ye(qS,{displayName:"Prose<hardbreakClearMarkPlugin>",group:"Prose"});const T3=_o(["table","code_block"],"hardbreakFilterNodes");ye(T3,{displayName:"Ctx<hardbreakFilterNodes>",group:"Prose"});const KS=qi(n=>{const e=n.get(T3.key);return new Zn({key:new Ln("MILKDOWN_HARDBREAK_FILTER"),filterTransaction:(t,r)=>{const i=t.getMeta("hardbreak"),[o]=t.steps;if(i&&o){const{from:l}=o,u=r.doc.resolve(l);let f=u.depth,h=!0;for(;f>0;)e.includes(u.node(f).type.name)&&(h=!1),f--;return h}return!0}})});ye(KS,{displayName:"Prose<hardbreakFilterPlugin>",group:"Prose"});const JS=qi(n=>{const e=new Ln("MILKDOWN_HEADING_ID"),t=r=>{if(r.composing)return;const i=n.get(X1.key),o=r.state.tr.setMeta("addToHistory",!1);let l=!1;const u={};r.state.doc.descendants((f,h)=>{if(f.type===Bu.type(n)){if(f.textContent.trim().length===0)return;const g=f.attrs;let m=i(f);u[m]?(u[m]+=1,m+=`-#${u[m]}`):u[m]=1,g.id!==m&&(l=!0,o.setMeta(e,!0).setNodeMarkup(h,void 0,{...g,id:m}))}}),l&&r.dispatch(o)};return new Zn({key:e,view:r=>(t(r),{update:(i,o)=>{i.state.doc.eq(o.doc)||t(i)}})})});ye(JS,{displayName:"Prose<syncHeadingIdPlugin>",group:"Prose"});const GS=qi(n=>{const e=t=>{if(t.composing||!t.editable)return;const r=qf.type(n),i=Vf.type(n),o=as.type(n),l=t.state,u=(g,m)=>{let w=!1;const k=`${m+1}.`;return g.label!==k&&(g.label=k,w=!0),w};let f=l.tr,h=!1;l.doc.descendants((g,m,w,k)=>{if(g.type===i){const b=g.maybeChild(0);(b==null?void 0:b.type)===o&&b.attrs.listType==="ordered"&&(h=!0,f.setNodeMarkup(m,r,{spread:"true"}),g.descendants((A,O,F,V)=>{if(A.type===o){const I={...A.attrs};u(I,V)&&(f=f.setNodeMarkup(O,void 0,I))}return!1}))}else if(g.type===o&&(w==null?void 0:w.type)===r){const b={...g.attrs};let A=!1;b.listType!=="ordered"&&(b.listType="ordered",A=!0),(w==null?void 0:w.maybeChild(0))&&(A=u(b,k)),A&&(f=f.setNodeMarkup(m,void 0,b),h=!0)}}),h&&t.dispatch(f.setMeta("addToHistory",!1))};return new Zn({key:new Ln("MILKDOWN_KEEP_LIST_ORDER"),view:t=>(e(t),{update:r=>{e(r)}})})});ye(GS,{displayName:"Prose<syncListOrderPlugin>",group:"Prose"});const NI=[qS,T3,KS,VS,S3,_3,b3,C3,E3,Y1,JS,GS].flat(),AI=[xI,SI,bI,_I,CI,NI].flat();var G2,Q2;if(typeof WeakMap<"u"){let n=new WeakMap;G2=e=>n.get(e),Q2=(e,t)=>(n.set(e,t),t)}else{const n=[];let t=0;G2=r=>{for(let i=0;i<n.length;i+=2)if(n[i]==r)return n[i+1]},Q2=(r,i)=>(t==10&&(t=0),n[t++]=r,n[t++]=i)}var Pt=class{constructor(n,e,t,r){this.width=n,this.height=e,this.map=t,this.problems=r}findCell(n){for(let e=0;e<this.map.length;e++){const t=this.map[e];if(t!=n)continue;const r=e%this.width,i=e/this.width|0;let o=r+1,l=i+1;for(let u=1;o<this.width&&this.map[e+u]==t;u++)o++;for(let u=1;l<this.height&&this.map[e+this.width*u]==t;u++)l++;return{left:r,top:i,right:o,bottom:l}}throw new RangeError(`No cell with offset ${n} found`)}colCount(n){for(let e=0;e<this.map.length;e++)if(this.map[e]==n)return e%this.width;throw new RangeError(`No cell with offset ${n} found`)}nextCell(n,e,t){const{left:r,right:i,top:o,bottom:l}=this.findCell(n);return e=="horiz"?(t<0?r==0:i==this.width)?null:this.map[o*this.width+(t<0?r-1:i)]:(t<0?o==0:l==this.height)?null:this.map[r+this.width*(t<0?o-1:l)]}rectBetween(n,e){const{left:t,right:r,top:i,bottom:o}=this.findCell(n),{left:l,right:u,top:f,bottom:h}=this.findCell(e);return{left:Math.min(t,l),top:Math.min(i,f),right:Math.max(r,u),bottom:Math.max(o,h)}}cellsInRect(n){const e=[],t={};for(let r=n.top;r<n.bottom;r++)for(let i=n.left;i<n.right;i++){const o=r*this.width+i,l=this.map[o];t[l]||(t[l]=!0,!(i==n.left&&i&&this.map[o-1]==l||r==n.top&&r&&this.map[o-this.width]==l)&&e.push(l))}return e}positionAt(n,e,t){for(let r=0,i=0;;r++){const o=i+t.child(r).nodeSize;if(r==n){let l=e+n*this.width;const u=(n+1)*this.width;for(;l<u&&this.map[l]<i;)l++;return l==u?o-1:this.map[l]}i=o}}static get(n){return G2(n)||Q2(n,II(n))}};function II(n){if(n.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+n.type.name);const e=PI(n),t=n.childCount,r=[];let i=0,o=null;const l=[];for(let h=0,g=e*t;h<g;h++)r[h]=0;for(let h=0,g=0;h<t;h++){const m=n.child(h);g++;for(let b=0;;b++){for(;i<r.length&&r[i]!=0;)i++;if(b==m.childCount)break;const A=m.child(b),{colspan:O,rowspan:F,colwidth:V}=A.attrs;for(let I=0;I<F;I++){if(I+h>=t){(o||(o=[])).push({type:"overlong_rowspan",pos:g,n:F-I});break}const W=i+I*e;for(let B=0;B<O;B++){r[W+B]==0?r[W+B]=g:(o||(o=[])).push({type:"collision",row:h,pos:g,n:O-B});const z=V&&V[B];if(z){const H=(W+B)%e*2,Y=l[H];Y==null||Y!=z&&l[H+1]==1?(l[H]=z,l[H+1]=1):Y==z&&l[H+1]++}}}i+=O,g+=A.nodeSize}const w=(h+1)*e;let k=0;for(;i<w;)r[i++]==0&&k++;k&&(o||(o=[])).push({type:"missing",row:h,n:k}),g++}(e===0||t===0)&&(o||(o=[])).push({type:"zero_sized"});const u=new Pt(e,t,r,o);let f=!1;for(let h=0;!f&&h<l.length;h+=2)l[h]!=null&&l[h+1]<t&&(f=!0);return f&&OI(u,l,n),u}function PI(n){let e=-1,t=!1;for(let r=0;r<n.childCount;r++){const i=n.child(r);let o=0;if(t)for(let l=0;l<r;l++){const u=n.child(l);for(let f=0;f<u.childCount;f++){const h=u.child(f);l+h.attrs.rowspan>r&&(o+=h.attrs.colspan)}}for(let l=0;l<i.childCount;l++){const u=i.child(l);o+=u.attrs.colspan,u.attrs.rowspan>1&&(t=!0)}e==-1?e=o:e!=o&&(e=Math.max(e,o))}return e}function OI(n,e,t){n.problems||(n.problems=[]);const r={};for(let i=0;i<n.map.length;i++){const o=n.map[i];if(r[o])continue;r[o]=!0;const l=t.nodeAt(o);if(!l)throw new RangeError(`No cell with offset ${o} found`);let u=null;const f=l.attrs;for(let h=0;h<f.colspan;h++){const g=(i+h)%n.width,m=e[g*2];m!=null&&(!f.colwidth||f.colwidth[h]!=m)&&((u||(u=RI(f)))[h]=m)}u&&n.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:u})}}function RI(n){if(n.colwidth)return n.colwidth.slice();const e=[];for(let t=0;t<n.colspan;t++)e.push(0);return e}function f4(n,e){if(typeof n=="string")return{};const t=n.getAttribute("data-colwidth"),r=t&&/^\d+(,\d+)*$/.test(t)?t.split(",").map(l=>Number(l)):null,i=Number(n.getAttribute("colspan")||1),o={colspan:i,rowspan:Number(n.getAttribute("rowspan")||1),colwidth:r&&r.length==i?r:null};for(const l in e){const u=e[l].getFromDOM,f=u&&u(n);f!=null&&(o[l]=f)}return o}function d4(n,e){const t={};n.attrs.colspan!=1&&(t.colspan=n.attrs.colspan),n.attrs.rowspan!=1&&(t.rowspan=n.attrs.rowspan),n.attrs.colwidth&&(t["data-colwidth"]=n.attrs.colwidth.join(","));for(const r in e){const i=e[r].setDOMAttr;i&&i(n.attrs[r],t)}return t}function DI(n){const e=n.cellAttributes||{},t={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(const r in e)t[r]={default:e[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:n.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:n.cellContent,attrs:t,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:r=>f4(r,e)}],toDOM(r){return["td",d4(r,e),0]}},table_header:{content:n.cellContent,attrs:t,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:r=>f4(r,e)}],toDOM(r){return["th",d4(r,e),0]}}}}function Vi(n){let e=n.cached.tableNodeTypes;if(!e){e=n.cached.tableNodeTypes={};for(const t in n.nodes){const r=n.nodes[t],i=r.spec.tableRole;i&&(e[i]=r)}}return e}var Kl=new Ln("selectingCells");function zp(n){for(let e=n.depth-1;e>0;e--)if(n.node(e).type.spec.tableRole=="row")return n.node(0).resolve(n.before(e+1));return null}function Ki(n){const e=n.selection.$head;for(let t=e.depth;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return!0;return!1}function Z1(n){const e=n.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const t=zp(e.$head)||zI(e.$head);if(t)return t;throw new RangeError(`No cell found around position ${e.head}`)}function zI(n){for(let e=n.nodeAfter,t=n.pos;e;e=e.firstChild,t++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t)}for(let e=n.nodeBefore,t=n.pos;e;e=e.lastChild,t--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t-e.nodeSize)}}function Y2(n){return n.parent.type.spec.tableRole=="row"&&!!n.nodeAfter}function LI(n){return n.node(0).resolve(n.pos+n.nodeAfter.nodeSize)}function M3(n,e){return n.depth==e.depth&&n.pos>=e.start(-1)&&n.pos<=e.end(-1)}function QS(n,e,t){const r=n.node(-1),i=Pt.get(r),o=n.start(-1),l=i.nextCell(n.pos-o,e,t);return l==null?null:n.node(0).resolve(o+l)}function Du(n,e,t=1){const r={...n,colspan:n.colspan-t};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,t),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function FI(n,e,t=1){const r={...n,colspan:n.colspan+t};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<t;i++)r.colwidth.splice(e,0,0)}return r}function BI(n,e,t){const r=Vi(e.type.schema).header_cell;for(let i=0;i<n.height;i++)if(e.nodeAt(n.map[t+i*n.width]).type!=r)return!1;return!0}var Kt=class Vs extends et{constructor(e,t=e){const r=e.node(-1),i=Pt.get(r),o=e.start(-1),l=i.rectBetween(e.pos-o,t.pos-o),u=e.node(0),f=i.cellsInRect(l).filter(g=>g!=t.pos-o);f.unshift(t.pos-o);const h=f.map(g=>{const m=r.nodeAt(g);if(!m)throw RangeError(`No cell with offset ${g} found`);const w=o+g+1;return new h5(u.resolve(w),u.resolve(w+m.content.size))});super(h[0].$from,h[0].$to,h),this.$anchorCell=e,this.$headCell=t}map(e,t){const r=e.resolve(t.map(this.$anchorCell.pos)),i=e.resolve(t.map(this.$headCell.pos));if(Y2(r)&&Y2(i)&&M3(r,i)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?Vs.rowSelection(r,i):o&&this.isColSelection()?Vs.colSelection(r,i):new Vs(r,i)}return st.between(r,i)}content(){const e=this.$anchorCell.node(-1),t=Pt.get(e),r=this.$anchorCell.start(-1),i=t.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},l=[];for(let f=i.top;f<i.bottom;f++){const h=[];for(let g=f*t.width+i.left,m=i.left;m<i.right;m++,g++){const w=t.map[g];if(o[w])continue;o[w]=!0;const k=t.findCell(w);let b=e.nodeAt(w);if(!b)throw RangeError(`No cell with offset ${w} found`);const A=i.left-k.left,O=k.right-i.right;if(A>0||O>0){let F=b.attrs;if(A>0&&(F=Du(F,0,A)),O>0&&(F=Du(F,F.colspan-O,O)),k.left<i.left){if(b=b.type.createAndFill(F),!b)throw RangeError(`Could not create cell with attrs ${JSON.stringify(F)}`)}else b=b.type.create(F,b.content)}if(k.top<i.top||k.bottom>i.bottom){const F={...b.attrs,rowspan:Math.min(k.bottom,i.bottom)-Math.max(k.top,i.top)};k.top<i.top?b=b.type.createAndFill(F):b=b.type.create(F,b.content)}h.push(b)}l.push(e.child(f).copy(_e.from(h)))}const u=this.isColSelection()&&this.isRowSelection()?e:l;return new Ne(_e.from(u),1,1)}replace(e,t=Ne.empty){const r=e.steps.length,i=this.ranges;for(let l=0;l<i.length;l++){const{$from:u,$to:f}=i[l],h=e.mapping.slice(r);e.replace(h.map(u.pos),h.map(f.pos),l?Ne.empty:t)}const o=et.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,t){this.replace(e,new Ne(_e.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),r=Pt.get(t),i=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let l=0;l<o.length;l++)e(t.nodeAt(o[l]),i+o[l])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){const r=e.node(-1),i=Pt.get(r),o=e.start(-1),l=i.findCell(e.pos-o),u=i.findCell(t.pos-o),f=e.node(0);return l.top<=u.top?(l.top>0&&(e=f.resolve(o+i.map[l.left])),u.bottom<i.height&&(t=f.resolve(o+i.map[i.width*(i.height-1)+u.right-1]))):(u.top>0&&(t=f.resolve(o+i.map[u.left])),l.bottom<i.height&&(e=f.resolve(o+i.map[i.width*(i.height-1)+l.right-1]))),new Vs(e,t)}isRowSelection(){const e=this.$anchorCell.node(-1),t=Pt.get(e),r=this.$anchorCell.start(-1),i=t.colCount(this.$anchorCell.pos-r),o=t.colCount(this.$headCell.pos-r);if(Math.min(i,o)>0)return!1;const l=i+this.$anchorCell.nodeAfter.attrs.colspan,u=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(l,u)==t.width}eq(e){return e instanceof Vs&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){const r=e.node(-1),i=Pt.get(r),o=e.start(-1),l=i.findCell(e.pos-o),u=i.findCell(t.pos-o),f=e.node(0);return l.left<=u.left?(l.left>0&&(e=f.resolve(o+i.map[l.top*i.width])),u.right<i.width&&(t=f.resolve(o+i.map[i.width*(u.top+1)-1]))):(u.left>0&&(t=f.resolve(o+i.map[u.top*i.width])),l.right<i.width&&(e=f.resolve(o+i.map[i.width*(l.top+1)-1]))),new Vs(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new Vs(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){return new Vs(e.resolve(t),e.resolve(r))}getBookmark(){return new UI(this.$anchorCell.pos,this.$headCell.pos)}};Kt.prototype.visible=!1;et.jsonID("cell",Kt);var UI=class YS{constructor(e,t){this.anchor=e,this.head=t}map(e){return new YS(e.map(this.anchor),e.map(this.head))}resolve(e){const t=e.resolve(this.anchor),r=e.resolve(this.head);return t.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&t.index()<t.parent.childCount&&r.index()<r.parent.childCount&&M3(t,r)?new Kt(t,r):et.near(r,1)}};function WI(n){if(!(n.selection instanceof Kt))return null;const e=[];return n.selection.forEachCell((t,r)=>{e.push(Xn.node(r,r+t.nodeSize,{class:"selectedCell"}))}),Gt.create(n.doc,e)}function jI({$from:n,$to:e}){if(n.pos==e.pos||n.pos<e.pos-6)return!1;let t=n.pos,r=e.pos,i=n.depth;for(;i>=0&&!(n.after(i+1)<n.end(i));i--,t++);for(let o=e.depth;o>=0&&!(e.before(o+1)>e.start(o));o--,r--);return t==r&&/row|table/.test(n.node(i).type.spec.tableRole)}function $I({$from:n,$to:e}){let t,r;for(let i=n.depth;i>0;i--){const o=n.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){t=o;break}}for(let i=e.depth;i>0;i--){const o=e.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}return t!==r&&e.parentOffset===0}function HI(n,e,t){const r=(e||n).selection,i=(e||n).doc;let o,l;if(r instanceof Ze&&(l=r.node.type.spec.tableRole)){if(l=="cell"||l=="header_cell")o=Kt.create(i,r.from);else if(l=="row"){const u=i.resolve(r.from+1);o=Kt.rowSelection(u,u)}else if(!t){const u=Pt.get(r.node),f=r.from+1,h=f+u.map[u.width*u.height-1];o=Kt.create(i,f+1,h)}}else r instanceof st&&jI(r)?o=st.create(i,r.from):r instanceof st&&$I(r)&&(o=st.create(i,r.$from.start(),r.$from.end()));return o&&(e||(e=n.tr)).setSelection(o),e}var VI=new Ln("fix-tables");function XS(n,e,t,r){const i=n.childCount,o=e.childCount;e:for(let l=0,u=0;l<o;l++){const f=e.child(l);for(let h=u,g=Math.min(i,l+3);h<g;h++)if(n.child(h)==f){u=h+1,t+=f.nodeSize;continue e}r(f,t),u<i&&n.child(u).sameMarkup(f)?XS(n.child(u),f,t+1,r):f.nodesBetween(0,f.content.size,r,t+1),t+=f.nodeSize}}function qI(n,e){let t;const r=(i,o)=>{i.type.spec.tableRole=="table"&&(t=KI(n,i,o,t))};return e?e.doc!=n.doc&&XS(e.doc,n.doc,0,r):n.doc.descendants(r),t}function KI(n,e,t,r){const i=Pt.get(e);if(!i.problems)return r;r||(r=n.tr);const o=[];for(let f=0;f<i.height;f++)o.push(0);for(let f=0;f<i.problems.length;f++){const h=i.problems[f];if(h.type=="collision"){const g=e.nodeAt(h.pos);if(!g)continue;const m=g.attrs;for(let w=0;w<m.rowspan;w++)o[h.row+w]+=h.n;r.setNodeMarkup(r.mapping.map(t+1+h.pos),null,Du(m,m.colspan-h.n,h.n))}else if(h.type=="missing")o[h.row]+=h.n;else if(h.type=="overlong_rowspan"){const g=e.nodeAt(h.pos);if(!g)continue;r.setNodeMarkup(r.mapping.map(t+1+h.pos),null,{...g.attrs,rowspan:g.attrs.rowspan-h.n})}else if(h.type=="colwidth mismatch"){const g=e.nodeAt(h.pos);if(!g)continue;r.setNodeMarkup(r.mapping.map(t+1+h.pos),null,{...g.attrs,colwidth:h.colwidth})}else if(h.type=="zero_sized"){const g=r.mapping.map(t);r.delete(g,g+e.nodeSize)}}let l,u;for(let f=0;f<o.length;f++)o[f]&&(l==null&&(l=f),u=f);for(let f=0,h=t+1;f<i.height;f++){const g=e.child(f),m=h+g.nodeSize,w=o[f];if(w>0){let k="cell";g.firstChild&&(k=g.firstChild.type.spec.tableRole);const b=[];for(let O=0;O<w;O++){const F=Vi(n.schema)[k].createAndFill();F&&b.push(F)}const A=(f==0||l==f-1)&&u==f?h+1:m-1;r.insert(r.mapping.map(A),b)}h=m}return r.setMeta(VI,{fixTables:!0})}function ca(n){const e=n.selection,t=Z1(n),r=t.node(-1),i=t.start(-1),o=Pt.get(r);return{...e instanceof Kt?o.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):o.findCell(t.pos-i),tableStart:i,map:o,table:r}}function ZS(n,{map:e,tableStart:t,table:r},i){let o=i>0?-1:0;BI(e,r,i+o)&&(o=i==0||i==e.width?null:0);for(let l=0;l<e.height;l++){const u=l*e.width+i;if(i>0&&i<e.width&&e.map[u-1]==e.map[u]){const f=e.map[u],h=r.nodeAt(f);n.setNodeMarkup(n.mapping.map(t+f),null,FI(h.attrs,i-e.colCount(f))),l+=h.attrs.rowspan-1}else{const f=o==null?Vi(r.type.schema).cell:r.nodeAt(e.map[u+o]).type,h=e.positionAt(l,i,r);n.insert(n.mapping.map(t+h),f.createAndFill())}}return n}function JI(n,e){if(!Ki(n))return!1;if(e){const t=ca(n);e(ZS(n.tr,t,t.left))}return!0}function GI(n,e){if(!Ki(n))return!1;if(e){const t=ca(n);e(ZS(n.tr,t,t.right))}return!0}function QI(n,{map:e,table:t,tableStart:r},i){const o=n.mapping.maps.length;for(let l=0;l<e.height;){const u=l*e.width+i,f=e.map[u],h=t.nodeAt(f),g=h.attrs;if(i>0&&e.map[u-1]==f||i<e.width-1&&e.map[u+1]==f)n.setNodeMarkup(n.mapping.slice(o).map(r+f),null,Du(g,i-e.colCount(f)));else{const m=n.mapping.slice(o).map(r+f);n.delete(m,m+h.nodeSize)}l+=g.rowspan}}function YI(n,e){if(!Ki(n))return!1;if(e){const t=ca(n),r=n.tr;if(t.left==0&&t.right==t.map.width)return!1;for(let i=t.right-1;QI(r,t,i),i!=t.left;i--){const o=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!o)throw RangeError("No table found");t.table=o,t.map=Pt.get(o)}e(r)}return!0}function XI(n,{map:e,table:t,tableStart:r},i){let o=0;for(let h=0;h<i;h++)o+=t.child(h).nodeSize;const l=o+t.child(i).nodeSize,u=n.mapping.maps.length;n.delete(o+r,l+r);const f=new Set;for(let h=0,g=i*e.width;h<e.width;h++,g++){const m=e.map[g];if(!f.has(m)){if(f.add(m),i>0&&m==e.map[g-e.width]){const w=t.nodeAt(m).attrs;n.setNodeMarkup(n.mapping.slice(u).map(m+r),null,{...w,rowspan:w.rowspan-1}),h+=w.colspan-1}else if(i<e.height&&m==e.map[g+e.width]){const w=t.nodeAt(m),k=w.attrs,b=w.type.create({...k,rowspan:w.attrs.rowspan-1},w.content),A=e.positionAt(i+1,h,t);n.insert(n.mapping.slice(u).map(r+A),b),h+=k.colspan-1}}}}function ZI(n,e){if(!Ki(n))return!1;if(e){const t=ca(n),r=n.tr;if(t.top==0&&t.bottom==t.map.height)return!1;for(let i=t.bottom-1;XI(r,t,i),i!=t.top;i--){const o=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!o)throw RangeError("No table found");t.table=o,t.map=Pt.get(t.table)}e(r)}return!0}function eP(n,e){return function(t,r){if(!Ki(t))return!1;const i=Z1(t);if(i.nodeAfter.attrs[n]===e)return!1;if(r){const o=t.tr;t.selection instanceof Kt?t.selection.forEachCell((l,u)=>{l.attrs[n]!==e&&o.setNodeMarkup(u,null,{...l.attrs,[n]:e})}):o.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[n]:e}),r(o)}return!0}}function tP(n){return function(e,t){if(!Ki(e))return!1;if(t){const r=Vi(e.schema),i=ca(e),o=e.tr,l=i.map.cellsInRect(n=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:n=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),u=l.map(f=>i.table.nodeAt(f));for(let f=0;f<l.length;f++)u[f].type==r.header_cell&&o.setNodeMarkup(i.tableStart+l[f],r.cell,u[f].attrs);if(o.steps.length==0)for(let f=0;f<l.length;f++)o.setNodeMarkup(i.tableStart+l[f],r.header_cell,u[f].attrs);t(o)}return!0}}function h4(n,e,t){const r=e.map.cellsInRect({left:0,top:0,right:n=="row"?e.map.width:1,bottom:n=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const o=e.table.nodeAt(r[i]);if(o&&o.type!==t.header_cell)return!1}return!0}function N3(n,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?tP(n):function(t,r){if(!Ki(t))return!1;if(r){const i=Vi(t.schema),o=ca(t),l=t.tr,u=h4("row",o,i),f=h4("column",o,i),g=(n==="column"?u:n==="row"?f:!1)?1:0,m=n=="column"?{left:0,top:g,right:1,bottom:o.map.height}:n=="row"?{left:g,top:0,right:o.map.width,bottom:1}:o,w=n=="column"?f?i.cell:i.header_cell:n=="row"?u?i.cell:i.header_cell:i.cell;o.map.cellsInRect(m).forEach(k=>{const b=k+o.tableStart,A=l.doc.nodeAt(b);A&&l.setNodeMarkup(b,w,A.attrs)}),r(l)}return!0}}N3("row",{useDeprecatedLogic:!0});N3("column",{useDeprecatedLogic:!0});N3("cell",{useDeprecatedLogic:!0});function nP(n,e){if(e<0){const t=n.nodeBefore;if(t)return n.pos-t.nodeSize;for(let r=n.index(-1)-1,i=n.before();r>=0;r--){const o=n.node(-1).child(r),l=o.lastChild;if(l)return i-1-l.nodeSize;i-=o.nodeSize}}else{if(n.index()<n.parent.childCount-1)return n.pos+n.nodeAfter.nodeSize;const t=n.node(-1);for(let r=n.indexAfter(-1),i=n.after();r<t.childCount;r++){const o=t.child(r);if(o.childCount)return i+1;i+=o.nodeSize}}return null}function eb(n){return function(e,t){if(!Ki(e))return!1;const r=nP(Z1(e),n);if(r==null)return!1;if(t){const i=e.doc.resolve(r);t(e.tr.setSelection(st.between(i,LI(i))).scrollIntoView())}return!0}}function rP(n,e){const t=n.selection.$anchor;for(let r=t.depth;r>0;r--)if(t.node(r).type.spec.tableRole=="table")return e&&e(n.tr.delete(t.before(r),t.after(r)).scrollIntoView()),!0;return!1}function Cm(n,e){const t=n.selection;if(!(t instanceof Kt))return!1;if(e){const r=n.tr,i=Vi(n.schema).cell.createAndFill().content;t.forEachCell((o,l)=>{o.content.eq(i)||r.replace(r.mapping.map(l+1),r.mapping.map(l+o.nodeSize-1),new Ne(i,0,0))}),r.docChanged&&e(r)}return!0}function iP(n){if(!n.size)return null;let{content:e,openStart:t,openEnd:r}=n;for(;e.childCount==1&&(t>0&&r>0||e.child(0).type.spec.tableRole=="table");)t--,r--,e=e.child(0).content;const i=e.child(0),o=i.type.spec.tableRole,l=i.type.schema,u=[];if(o=="row")for(let f=0;f<e.childCount;f++){let h=e.child(f).content;const g=f?0:Math.max(0,t-1),m=f<e.childCount-1?0:Math.max(0,r-1);(g||m)&&(h=X2(Vi(l).row,new Ne(h,g,m)).content),u.push(h)}else if(o=="cell"||o=="header_cell")u.push(t||r?X2(Vi(l).row,new Ne(e,t,r)).content:e);else return null;return oP(l,u)}function oP(n,e){const t=[];for(let i=0;i<e.length;i++){const o=e[i];for(let l=o.childCount-1;l>=0;l--){const{rowspan:u,colspan:f}=o.child(l).attrs;for(let h=i;h<i+u;h++)t[h]=(t[h]||0)+f}}let r=0;for(let i=0;i<t.length;i++)r=Math.max(r,t[i]);for(let i=0;i<t.length;i++)if(i>=e.length&&e.push(_e.empty),t[i]<r){const o=Vi(n).cell.createAndFill(),l=[];for(let u=t[i];u<r;u++)l.push(o);e[i]=e[i].append(_e.from(l))}return{height:e.length,width:r,rows:e}}function X2(n,e){const t=n.createAndFill();return new d5(t).replace(0,t.content.size,e).doc}function sP({width:n,height:e,rows:t},r,i){if(n!=r){const o=[],l=[];for(let u=0;u<t.length;u++){const f=t[u],h=[];for(let g=o[u]||0,m=0;g<r;m++){let w=f.child(m%f.childCount);g+w.attrs.colspan>r&&(w=w.type.createChecked(Du(w.attrs,w.attrs.colspan,g+w.attrs.colspan-r),w.content)),h.push(w),g+=w.attrs.colspan;for(let k=1;k<w.attrs.rowspan;k++)o[u+k]=(o[u+k]||0)+w.attrs.colspan}l.push(_e.from(h))}t=l,n=r}if(e!=i){const o=[];for(let l=0,u=0;l<i;l++,u++){const f=[],h=t[u%e];for(let g=0;g<h.childCount;g++){let m=h.child(g);l+m.attrs.rowspan>i&&(m=m.type.create({...m.attrs,rowspan:Math.max(1,i-m.attrs.rowspan)},m.content)),f.push(m)}o.push(_e.from(f))}t=o,e=i}return{width:n,height:e,rows:t}}function lP(n,e,t,r,i,o,l){const u=n.doc.type.schema,f=Vi(u);let h,g;if(i>e.width)for(let m=0,w=0;m<e.height;m++){const k=t.child(m);w+=k.nodeSize;const b=[];let A;k.lastChild==null||k.lastChild.type==f.cell?A=h||(h=f.cell.createAndFill()):A=g||(g=f.header_cell.createAndFill());for(let O=e.width;O<i;O++)b.push(A);n.insert(n.mapping.slice(l).map(w-1+r),b)}if(o>e.height){const m=[];for(let b=0,A=(e.height-1)*e.width;b<Math.max(e.width,i);b++){const O=b>=e.width?!1:t.nodeAt(e.map[A+b]).type==f.header_cell;m.push(O?g||(g=f.header_cell.createAndFill()):h||(h=f.cell.createAndFill()))}const w=f.row.create(null,_e.from(m)),k=[];for(let b=e.height;b<o;b++)k.push(w);n.insert(n.mapping.slice(l).map(r+t.nodeSize-2),k)}return!!(h||g)}function p4(n,e,t,r,i,o,l,u){if(l==0||l==e.height)return!1;let f=!1;for(let h=i;h<o;h++){const g=l*e.width+h,m=e.map[g];if(e.map[g-e.width]==m){f=!0;const w=t.nodeAt(m),{top:k,left:b}=e.findCell(m);n.setNodeMarkup(n.mapping.slice(u).map(m+r),null,{...w.attrs,rowspan:l-k}),n.insert(n.mapping.slice(u).map(e.positionAt(l,b,t)),w.type.createAndFill({...w.attrs,rowspan:k+w.attrs.rowspan-l})),h+=w.attrs.colspan-1}}return f}function m4(n,e,t,r,i,o,l,u){if(l==0||l==e.width)return!1;let f=!1;for(let h=i;h<o;h++){const g=h*e.width+l,m=e.map[g];if(e.map[g-1]==m){f=!0;const w=t.nodeAt(m),k=e.colCount(m),b=n.mapping.slice(u).map(m+r);n.setNodeMarkup(b,null,Du(w.attrs,l-k,w.attrs.colspan-(l-k))),n.insert(b+w.nodeSize,w.type.createAndFill(Du(w.attrs,0,l-k))),h+=w.attrs.rowspan-1}}return f}function g4(n,e,t,r,i){let o=t?n.doc.nodeAt(t-1):n.doc;if(!o)throw new Error("No table found");let l=Pt.get(o);const{top:u,left:f}=r,h=f+i.width,g=u+i.height,m=n.tr;let w=0;function k(){if(o=t?m.doc.nodeAt(t-1):m.doc,!o)throw new Error("No table found");l=Pt.get(o),w=m.mapping.maps.length}lP(m,l,o,t,h,g,w)&&k(),p4(m,l,o,t,f,h,u,w)&&k(),p4(m,l,o,t,f,h,g,w)&&k(),m4(m,l,o,t,u,g,f,w)&&k(),m4(m,l,o,t,u,g,h,w)&&k();for(let b=u;b<g;b++){const A=l.positionAt(b,f,o),O=l.positionAt(b,h,o);m.replace(m.mapping.slice(w).map(A+t),m.mapping.slice(w).map(O+t),new Ne(i.rows[b-u],0,0))}k(),m.setSelection(new Kt(m.doc.resolve(t+l.positionAt(u,f,o)),m.doc.resolve(t+l.positionAt(g-1,h-1,o)))),e(m)}var aP=A5({ArrowLeft:Em("horiz",-1),ArrowRight:Em("horiz",1),ArrowUp:Em("vert",-1),ArrowDown:Em("vert",1),"Shift-ArrowLeft":Tm("horiz",-1),"Shift-ArrowRight":Tm("horiz",1),"Shift-ArrowUp":Tm("vert",-1),"Shift-ArrowDown":Tm("vert",1),Backspace:Cm,"Mod-Backspace":Cm,Delete:Cm,"Mod-Delete":Cm});function a1(n,e,t){return t.eq(n.selection)?!1:(e&&e(n.tr.setSelection(t).scrollIntoView()),!0)}function Em(n,e){return(t,r,i)=>{if(!i)return!1;const o=t.selection;if(o instanceof Kt)return a1(t,r,et.near(o.$headCell,e));if(n!="horiz"&&!o.empty)return!1;const l=tb(i,n,e);if(l==null)return!1;if(n=="horiz")return a1(t,r,et.near(t.doc.resolve(o.head+e),e));{const u=t.doc.resolve(l),f=QS(u,n,e);let h;return f?h=et.near(f,1):e<0?h=et.near(t.doc.resolve(u.before(-1)),-1):h=et.near(t.doc.resolve(u.after(-1)),1),a1(t,r,h)}}}function Tm(n,e){return(t,r,i)=>{if(!i)return!1;const o=t.selection;let l;if(o instanceof Kt)l=o;else{const f=tb(i,n,e);if(f==null)return!1;l=new Kt(t.doc.resolve(f))}const u=QS(l.$headCell,n,e);return u?a1(t,r,new Kt(l.$anchorCell,u)):!1}}function uP(n,e){const t=n.state.doc,r=zp(t.resolve(e));return r?(n.dispatch(n.state.tr.setSelection(new Kt(r))),!0):!1}function cP(n,e,t){if(!Ki(n.state))return!1;let r=iP(t);const i=n.state.selection;if(i instanceof Kt){r||(r={width:1,height:1,rows:[_e.from(X2(Vi(n.state.schema).cell,t))]});const o=i.$anchorCell.node(-1),l=i.$anchorCell.start(-1),u=Pt.get(o).rectBetween(i.$anchorCell.pos-l,i.$headCell.pos-l);return r=sP(r,u.right-u.left,u.bottom-u.top),g4(n.state,n.dispatch,l,u,r),!0}else if(r){const o=Z1(n.state),l=o.start(-1);return g4(n.state,n.dispatch,l,Pt.get(o.node(-1)).findCell(o.pos-l),r),!0}else return!1}function fP(n,e){var t;if(e.ctrlKey||e.metaKey)return;const r=y4(n,e.target);let i;if(e.shiftKey&&n.state.selection instanceof Kt)o(n.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=zp(n.state.selection.$anchor))!=null&&((t=Zy(n,e))==null?void 0:t.pos)!=i.pos)o(i,e),e.preventDefault();else if(!r)return;function o(f,h){let g=Zy(n,h);const m=Kl.getState(n.state)==null;if(!g||!M3(f,g))if(m)g=f;else return;const w=new Kt(f,g);if(m||!n.state.selection.eq(w)){const k=n.state.tr.setSelection(w);m&&k.setMeta(Kl,f.pos),n.dispatch(k)}}function l(){n.root.removeEventListener("mouseup",l),n.root.removeEventListener("dragstart",l),n.root.removeEventListener("mousemove",u),Kl.getState(n.state)!=null&&n.dispatch(n.state.tr.setMeta(Kl,-1))}function u(f){const h=f,g=Kl.getState(n.state);let m;if(g!=null)m=n.state.doc.resolve(g);else if(y4(n,h.target)!=r&&(m=Zy(n,e),!m))return l();m&&o(m,h)}n.root.addEventListener("mouseup",l),n.root.addEventListener("dragstart",l),n.root.addEventListener("mousemove",u)}function tb(n,e,t){if(!(n.state.selection instanceof st))return null;const{$head:r}=n.state.selection;for(let i=r.depth-1;i>=0;i--){const o=r.node(i);if((t<0?r.index(i):r.indexAfter(i))!=(t<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const u=r.before(i),f=e=="vert"?t>0?"down":"up":t>0?"right":"left";return n.endOfTextblock(f)?u:null}}return null}function y4(n,e){for(;e&&e!=n.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function Zy(n,e){const t=n.posAtCoords({left:e.clientX,top:e.clientY});return t&&t?zp(n.state.doc.resolve(t.pos)):null}var dP=class{constructor(n,e){this.node=n,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Z2(n,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(n){return n.type!=this.node.type?!1:(this.node=n,Z2(n,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(n){return n.type=="attributes"&&(n.target==this.table||this.colgroup.contains(n.target))}};function Z2(n,e,t,r,i,o){var l;let u=0,f=!0,h=e.firstChild;const g=n.firstChild;if(g){for(let m=0,w=0;m<g.childCount;m++){const{colspan:k,colwidth:b}=g.child(m).attrs;for(let A=0;A<k;A++,w++){const O=i==w?o:b&&b[A],F=O?O+"px":"";if(u+=O||r,O||(f=!1),h)h.style.width!=F&&(h.style.width=F),h=h.nextSibling;else{const V=document.createElement("col");V.style.width=F,e.appendChild(V)}}}for(;h;){const m=h.nextSibling;(l=h.parentNode)==null||l.removeChild(h),h=m}f?(t.style.width=u+"px",t.style.minWidth=""):(t.style.width="",t.style.minWidth=u+"px")}}var gi=new Ln("tableColumnResizing");function hP({handleWidth:n=5,cellMinWidth:e=25,defaultCellMinWidth:t=100,View:r=dP,lastColumnResizable:i=!0}={}){const o=new Zn({key:gi,state:{init(l,u){var f,h;const g=(h=(f=o.spec)==null?void 0:f.props)==null?void 0:h.nodeViews,m=Vi(u.schema).table.name;return r&&g&&(g[m]=(w,k)=>new r(w,t,k)),new pP(-1,!1)},apply(l,u){return u.apply(l)}},props:{attributes:l=>{const u=gi.getState(l);return u&&u.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(l,u)=>{mP(l,u,n,i)},mouseleave:l=>{gP(l)},mousedown:(l,u)=>{yP(l,u,e,t)}},decorations:l=>{const u=gi.getState(l);if(u&&u.activeHandle>-1)return SP(l,u.activeHandle)},nodeViews:{}}});return o}var pP=class u1{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){const t=this,r=e.getMeta(gi);if(r&&r.setHandle!=null)return new u1(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new u1(t.activeHandle,r.setDragging);if(t.activeHandle>-1&&e.docChanged){let i=e.mapping.map(t.activeHandle,-1);return Y2(e.doc.resolve(i))||(i=-1),new u1(i,t.dragging)}return t}};function mP(n,e,t,r){if(!n.editable)return;const i=gi.getState(n.state);if(i&&!i.dragging){const o=wP(e.target);let l=-1;if(o){const{left:u,right:f}=o.getBoundingClientRect();e.clientX-u<=t?l=v4(n,e,"left",t):f-e.clientX<=t&&(l=v4(n,e,"right",t))}if(l!=i.activeHandle){if(!r&&l!==-1){const u=n.state.doc.resolve(l),f=u.node(-1),h=Pt.get(f),g=u.start(-1);if(h.colCount(u.pos-g)+u.nodeAfter.attrs.colspan-1==h.width-1)return}nb(n,l)}}}function gP(n){if(!n.editable)return;const e=gi.getState(n.state);e&&e.activeHandle>-1&&!e.dragging&&nb(n,-1)}function yP(n,e,t,r){var i;if(!n.editable)return!1;const o=(i=n.dom.ownerDocument.defaultView)!=null?i:window,l=gi.getState(n.state);if(!l||l.activeHandle==-1||l.dragging)return!1;const u=n.state.doc.nodeAt(l.activeHandle),f=vP(n,l.activeHandle,u.attrs);n.dispatch(n.state.tr.setMeta(gi,{setDragging:{startX:e.clientX,startWidth:f}}));function h(m){o.removeEventListener("mouseup",h),o.removeEventListener("mousemove",g);const w=gi.getState(n.state);w!=null&&w.dragging&&(kP(n,w.activeHandle,w4(w.dragging,m,t)),n.dispatch(n.state.tr.setMeta(gi,{setDragging:null})))}function g(m){if(!m.which)return h(m);const w=gi.getState(n.state);if(w&&w.dragging){const k=w4(w.dragging,m,t);k4(n,w.activeHandle,k,r)}}return k4(n,l.activeHandle,f,r),o.addEventListener("mouseup",h),o.addEventListener("mousemove",g),e.preventDefault(),!0}function vP(n,e,{colspan:t,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const o=n.domAtPos(e);let u=o.node.childNodes[o.offset].offsetWidth,f=t;if(r)for(let h=0;h<t;h++)r[h]&&(u-=r[h],f--);return u/f}function wP(n){for(;n&&n.nodeName!="TD"&&n.nodeName!="TH";)n=n.classList&&n.classList.contains("ProseMirror")?null:n.parentNode;return n}function v4(n,e,t,r){const i=t=="right"?-r:r,o=n.posAtCoords({left:e.clientX+i,top:e.clientY});if(!o)return-1;const{pos:l}=o,u=zp(n.state.doc.resolve(l));if(!u)return-1;if(t=="right")return u.pos;const f=Pt.get(u.node(-1)),h=u.start(-1),g=f.map.indexOf(u.pos-h);return g%f.width==0?-1:h+f.map[g-1]}function w4(n,e,t){const r=e.clientX-n.startX;return Math.max(t,n.startWidth+r)}function nb(n,e){n.dispatch(n.state.tr.setMeta(gi,{setHandle:e}))}function kP(n,e,t){const r=n.state.doc.resolve(e),i=r.node(-1),o=Pt.get(i),l=r.start(-1),u=o.colCount(r.pos-l)+r.nodeAfter.attrs.colspan-1,f=n.state.tr;for(let h=0;h<o.height;h++){const g=h*o.width+u;if(h&&o.map[g]==o.map[g-o.width])continue;const m=o.map[g],w=i.nodeAt(m).attrs,k=w.colspan==1?0:u-o.colCount(m);if(w.colwidth&&w.colwidth[k]==t)continue;const b=w.colwidth?w.colwidth.slice():xP(w.colspan);b[k]=t,f.setNodeMarkup(l+m,null,{...w,colwidth:b})}f.docChanged&&n.dispatch(f)}function k4(n,e,t,r){const i=n.state.doc.resolve(e),o=i.node(-1),l=i.start(-1),u=Pt.get(o).colCount(i.pos-l)+i.nodeAfter.attrs.colspan-1;let f=n.domAtPos(i.start(-1)).node;for(;f&&f.nodeName!="TABLE";)f=f.parentNode;f&&Z2(o,f.firstChild,f,r,u,t)}function xP(n){return Array(n).fill(0)}function SP(n,e){var t;const r=[],i=n.doc.resolve(e),o=i.node(-1);if(!o)return Gt.empty;const l=Pt.get(o),u=i.start(-1),f=l.colCount(i.pos-u)+i.nodeAfter.attrs.colspan-1;for(let h=0;h<l.height;h++){const g=f+h*l.width;if((f==l.width-1||l.map[g]!=l.map[g+1])&&(h==0||l.map[g]!=l.map[g-l.width])){const m=l.map[g],w=u+m+o.nodeAt(m).nodeSize-1,k=document.createElement("div");k.className="column-resize-handle",(t=gi.getState(n))!=null&&t.dragging&&r.push(Xn.node(u+m,u+m+o.nodeAt(m).nodeSize,{class:"column-resize-dragging"})),r.push(Xn.widget(w,k))}}return Gt.create(n.doc,r)}function bP({allowTableNodeSelection:n=!1}={}){return new Zn({key:Kl,state:{init(){return null},apply(e,t){const r=e.getMeta(Kl);if(r!=null)return r==-1?null:r;if(t==null||!e.docChanged)return t;const{deleted:i,pos:o}=e.mapping.mapResult(t);return i?null:o}},props:{decorations:WI,handleDOMEvents:{mousedown:fP},createSelectionBetween(e){return Kl.getState(e.state)!=null?e.state.selection:null},handleTripleClick:uP,handleKeyDown:aP,handlePaste:cP},appendTransaction(e,t,r){return HI(r,qI(r,t),n)}})}var A1=typeof navigator<"u"?navigator:null,A3=A1&&A1.userAgent||"",_P=/Edge\/(\d+)/.exec(A3),CP=/MSIE \d/.exec(A3),EP=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(A3),TP=!!(CP||EP||_P),MP=!TP&&!!A1&&/Apple Computer/.test(A1.vendor),rb=new Ln("safari-ime-span"),ev=!1,NP={key:rb,props:{decorations:AP,handleDOMEvents:{compositionstart:()=>{ev=!0},compositionend:()=>{ev=!1}}}};function AP(n){const{$from:e,$to:t,to:r}=n.selection;if(ev&&e.sameParent(t)){const i=Xn.widget(r,IP,{ignoreSelection:!0,key:"safari-ime-span"});return Gt.create(n.doc,[i])}}function IP(n){const e=n.dom.ownerDocument.createElement("span");return e.className="ProseMirror-safari-ime-span",e}var PP=new Zn(MP?NP:{key:rb});function x4(n,e){const t=String(n);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=t.indexOf(e);for(;i!==-1;)r++,i=t.indexOf(e,i+e.length);return r}function OP(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function RP(n,e,t){const i=B1((t||{}).ignore||[]),o=DP(e);let l=-1;for(;++l<o.length;)Bx(n,"text",u);function u(h,g){let m=-1,w;for(;++m<g.length;){const k=g[m],b=w?w.children:void 0;if(i(k,b?b.indexOf(k):void 0,w))return;w=k}if(w)return f(h,g)}function f(h,g){const m=g[g.length-1],w=o[l][0],k=o[l][1];let b=0;const O=m.children.indexOf(h);let F=!1,V=[];w.lastIndex=0;let I=w.exec(h.value);for(;I;){const W=I.index,B={index:I.index,input:I.input,stack:[...g,h]};let z=k(...I,B);if(typeof z=="string"&&(z=z.length>0?{type:"text",value:z}:void 0),z===!1?w.lastIndex=W+1:(b!==W&&V.push({type:"text",value:h.value.slice(b,W)}),Array.isArray(z)?V.push(...z):z&&V.push(z),b=W+I[0].length,F=!0),!w.global)break;I=w.exec(h.value)}return F?(b<h.value.length&&V.push({type:"text",value:h.value.slice(b)}),m.children.splice(O,1,...V)):V=[h],O+V.length}}function DP(n){const e=[];if(!Array.isArray(n))throw new TypeError("Expected find and replace tuple or list of tuples");const t=!n[0]||Array.isArray(n[0])?n:[n];let r=-1;for(;++r<t.length;){const i=t[r];e.push([zP(i[0]),LP(i[1])])}return e}function zP(n){return typeof n=="string"?new RegExp(OP(n),"g"):n}function LP(n){return typeof n=="function"?n:function(){return n}}const e2="phrasing",t2=["autolink","link","image","label"];function FP(){return{transforms:[VP],enter:{literalAutolink:UP,literalAutolinkEmail:n2,literalAutolinkHttp:n2,literalAutolinkWww:n2},exit:{literalAutolink:HP,literalAutolinkEmail:$P,literalAutolinkHttp:WP,literalAutolinkWww:jP}}}function BP(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:e2,notInConstruct:t2},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:e2,notInConstruct:t2},{character:":",before:"[ps]",after:"\\/",inConstruct:e2,notInConstruct:t2}]}}function UP(n){this.enter({type:"link",title:null,url:"",children:[]},n)}function n2(n){this.config.enter.autolinkProtocol.call(this,n)}function WP(n){this.config.exit.autolinkProtocol.call(this,n)}function jP(n){this.config.exit.data.call(this,n);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(n)}function $P(n){this.config.exit.autolinkEmail.call(this,n)}function HP(n){this.exit(n)}function VP(n){RP(n,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,qP],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),KP]],{ignore:["link","linkReference"]})}function qP(n,e,t,r,i){let o="";if(!ib(i)||(/^w/i.test(e)&&(t=e+t,e="",o="http://"),!JP(t)))return!1;const l=GP(t+r);if(!l[0])return!1;const u={type:"link",title:null,url:o+e+l[0],children:[{type:"text",value:e+l[0]}]};return l[1]?[u,{type:"text",value:l[1]}]:u}function KP(n,e,t,r){return!ib(r,!0)||/[-\d_]$/.test(t)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+t,children:[{type:"text",value:e+"@"+t}]}}function JP(n){const e=n.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function GP(n){const e=/[!"&'),.:;<>?\]}]+$/.exec(n);if(!e)return[n,void 0];n=n.slice(0,e.index);let t=e[0],r=t.indexOf(")");const i=x4(n,"(");let o=x4(n,")");for(;r!==-1&&i>o;)n+=t.slice(0,r+1),t=t.slice(r+1),r=t.indexOf(")"),o++;return[n,t]}function ib(n,e){const t=n.input.charCodeAt(n.index-1);return(n.index===0||Pu(t)||L1(t))&&(!e||t!==47)}ob.peek=iO;function QP(){this.buffer()}function YP(n){this.enter({type:"footnoteReference",identifier:"",label:""},n)}function XP(){this.buffer()}function ZP(n){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},n)}function eO(n){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=ko(this.sliceSerialize(n)).toLowerCase(),t.label=e}function tO(n){this.exit(n)}function nO(n){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=ko(this.sliceSerialize(n)).toLowerCase(),t.label=e}function rO(n){this.exit(n)}function iO(){return"["}function ob(n,e,t,r){const i=t.createTracker(r);let o=i.move("[^");const l=t.enter("footnoteReference"),u=t.enter("reference");return o+=i.move(t.safe(t.associationId(n),{after:"]",before:o})),u(),l(),o+=i.move("]"),o}function oO(){return{enter:{gfmFootnoteCallString:QP,gfmFootnoteCall:YP,gfmFootnoteDefinitionLabelString:XP,gfmFootnoteDefinition:ZP},exit:{gfmFootnoteCallString:eO,gfmFootnoteCall:tO,gfmFootnoteDefinitionLabelString:nO,gfmFootnoteDefinition:rO}}}function sO(n){let e=!1;return n&&n.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:t,footnoteReference:ob},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function t(r,i,o,l){const u=o.createTracker(l);let f=u.move("[^");const h=o.enter("footnoteDefinition"),g=o.enter("label");return f+=u.move(o.safe(o.associationId(r),{before:f,after:"]"})),g(),f+=u.move("]:"),r.children&&r.children.length>0&&(u.shift(4),f+=u.move((e?`
`:" ")+o.indentLines(o.containerFlow(r,u.current()),e?sb:lO))),h(),f}}function lO(n,e,t){return e===0?n:sb(n,e,t)}function sb(n,e,t){return(t?"":"    ")+n}const aO=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];lb.peek=hO;function uO(){return{canContainEols:["delete"],enter:{strikethrough:fO},exit:{strikethrough:dO}}}function cO(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:aO}],handlers:{delete:lb}}}function fO(n){this.enter({type:"delete",children:[]},n)}function dO(n){this.exit(n)}function lb(n,e,t,r){const i=t.createTracker(r),o=t.enter("strikethrough");let l=i.move("~~");return l+=t.containerPhrasing(n,{...i.current(),before:l,after:"~"}),l+=i.move("~~"),o(),l}function hO(){return"~"}function pO(n){return n.length}function mO(n,e){const t=e||{},r=(t.align||[]).concat(),i=t.stringLength||pO,o=[],l=[],u=[],f=[];let h=0,g=-1;for(;++g<n.length;){const A=[],O=[];let F=-1;for(n[g].length>h&&(h=n[g].length);++F<n[g].length;){const V=gO(n[g][F]);if(t.alignDelimiters!==!1){const I=i(V);O[F]=I,(f[F]===void 0||I>f[F])&&(f[F]=I)}A.push(V)}l[g]=A,u[g]=O}let m=-1;if(typeof r=="object"&&"length"in r)for(;++m<h;)o[m]=S4(r[m]);else{const A=S4(r);for(;++m<h;)o[m]=A}m=-1;const w=[],k=[];for(;++m<h;){const A=o[m];let O="",F="";A===99?(O=":",F=":"):A===108?O=":":A===114&&(F=":");let V=t.alignDelimiters===!1?1:Math.max(1,f[m]-O.length-F.length);const I=O+"-".repeat(V)+F;t.alignDelimiters!==!1&&(V=O.length+V+F.length,V>f[m]&&(f[m]=V),k[m]=V),w[m]=I}l.splice(1,0,w),u.splice(1,0,k),g=-1;const b=[];for(;++g<l.length;){const A=l[g],O=u[g];m=-1;const F=[];for(;++m<h;){const V=A[m]||"";let I="",W="";if(t.alignDelimiters!==!1){const B=f[m]-(O[m]||0),z=o[m];z===114?I=" ".repeat(B):z===99?B%2?(I=" ".repeat(B/2+.5),W=" ".repeat(B/2-.5)):(I=" ".repeat(B/2),W=I):W=" ".repeat(B)}t.delimiterStart!==!1&&!m&&F.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&V==="")&&(t.delimiterStart!==!1||m)&&F.push(" "),t.alignDelimiters!==!1&&F.push(I),F.push(V),t.alignDelimiters!==!1&&F.push(W),t.padding!==!1&&F.push(" "),(t.delimiterEnd!==!1||m!==h-1)&&F.push("|")}b.push(t.delimiterEnd===!1?F.join("").replace(/ +$/,""):F.join(""))}return b.join(`
`)}function gO(n){return n==null?"":String(n)}function S4(n){const e=typeof n=="string"?n.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function yO(){return{enter:{table:vO,tableData:b4,tableHeader:b4,tableRow:kO},exit:{codeText:xO,table:wO,tableData:r2,tableHeader:r2,tableRow:r2}}}function vO(n){const e=n._align;this.enter({type:"table",align:e.map(function(t){return t==="none"?null:t}),children:[]},n),this.data.inTable=!0}function wO(n){this.exit(n),this.data.inTable=void 0}function kO(n){this.enter({type:"tableRow",children:[]},n)}function r2(n){this.exit(n)}function b4(n){this.enter({type:"tableCell",children:[]},n)}function xO(n){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,SO));const t=this.stack[this.stack.length-1];t.type,t.value=e,this.exit(n)}function SO(n,e){return e==="|"?e:n}function bO(n){const e=n||{},t=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,o=t?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:w,table:l,tableCell:f,tableRow:u}};function l(k,b,A,O){return h(g(k,A,O),k.align)}function u(k,b,A,O){const F=m(k,A,O),V=h([F]);return V.slice(0,V.indexOf(`
`))}function f(k,b,A,O){const F=A.enter("tableCell"),V=A.enter("phrasing"),I=A.containerPhrasing(k,{...O,before:o,after:o});return V(),F(),I}function h(k,b){return mO(k,{align:b,alignDelimiters:r,padding:t,stringLength:i})}function g(k,b,A){const O=k.children;let F=-1;const V=[],I=b.enter("table");for(;++F<O.length;)V[F]=m(O[F],b,A);return I(),V}function m(k,b,A){const O=k.children;let F=-1;const V=[],I=b.enter("tableRow");for(;++F<O.length;)V[F]=f(O[F],k,b,A);return I(),V}function w(k,b,A){let O=hv.inlineCode(k,b,A);return A.stack.includes("tableCell")&&(O=O.replace(/\|/g,"\\$&")),O}}function _O(){return{exit:{taskListCheckValueChecked:_4,taskListCheckValueUnchecked:_4,paragraph:EO}}}function CO(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:TO}}}function _4(n){const e=this.stack[this.stack.length-2];e.type,e.checked=n.type==="taskListCheckValueChecked"}function EO(n){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const t=this.stack[this.stack.length-1];t.type;const r=t.children[0];if(r&&r.type==="text"){const i=e.children;let o=-1,l;for(;++o<i.length;){const u=i[o];if(u.type==="paragraph"){l=u;break}}l===t&&(r.value=r.value.slice(1),r.value.length===0?t.children.shift():t.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,t.position.start=Object.assign({},r.position.start)))}}this.exit(n)}function TO(n,e,t,r){const i=n.children[0],o=typeof n.checked=="boolean"&&i&&i.type==="paragraph",l="["+(n.checked?"x":" ")+"] ",u=t.createTracker(r);o&&u.move(l);let f=hv.listItem(n,e,t,{...r,...u.current()});return o&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),f;function h(g){return g+l}}function MO(){return[FP(),oO(),uO(),yO(),_O()]}function NO(n){return{extensions:[BP(),sO(n),cO(),bO(n),CO()]}}const AO={tokenize:zO,partial:!0},ab={tokenize:LO,partial:!0},ub={tokenize:FO,partial:!0},cb={tokenize:BO,partial:!0},IO={tokenize:UO,partial:!0},fb={name:"wwwAutolink",tokenize:RO,previous:hb},db={name:"protocolAutolink",tokenize:DO,previous:pb},Ys={name:"emailAutolink",tokenize:OO,previous:mb},cs={};function PO(){return{text:cs}}let au=48;for(;au<123;)cs[au]=Ys,au++,au===58?au=65:au===91&&(au=97);cs[43]=Ys;cs[45]=Ys;cs[46]=Ys;cs[95]=Ys;cs[72]=[Ys,db];cs[104]=[Ys,db];cs[87]=[Ys,fb];cs[119]=[Ys,fb];function OO(n,e,t){const r=this;let i,o;return l;function l(m){return!tv(m)||!mb.call(r,r.previous)||I3(r.events)?t(m):(n.enter("literalAutolink"),n.enter("literalAutolinkEmail"),u(m))}function u(m){return tv(m)?(n.consume(m),u):m===64?(n.consume(m),f):t(m)}function f(m){return m===46?n.check(IO,g,h)(m):m===45||m===95||qr(m)?(o=!0,n.consume(m),f):g(m)}function h(m){return n.consume(m),i=!0,f}function g(m){return o&&i&&_r(r.previous)?(n.exit("literalAutolinkEmail"),n.exit("literalAutolink"),e(m)):t(m)}}function RO(n,e,t){const r=this;return i;function i(l){return l!==87&&l!==119||!hb.call(r,r.previous)||I3(r.events)?t(l):(n.enter("literalAutolink"),n.enter("literalAutolinkWww"),n.check(AO,n.attempt(ab,n.attempt(ub,o),t),t)(l))}function o(l){return n.exit("literalAutolinkWww"),n.exit("literalAutolink"),e(l)}}function DO(n,e,t){const r=this;let i="",o=!1;return l;function l(m){return(m===72||m===104)&&pb.call(r,r.previous)&&!I3(r.events)?(n.enter("literalAutolink"),n.enter("literalAutolinkHttp"),i+=String.fromCodePoint(m),n.consume(m),u):t(m)}function u(m){if(_r(m)&&i.length<5)return i+=String.fromCodePoint(m),n.consume(m),u;if(m===58){const w=i.toLowerCase();if(w==="http"||w==="https")return n.consume(m),f}return t(m)}function f(m){return m===47?(n.consume(m),o?h:(o=!0,f)):t(m)}function h(m){return m===null||x1(m)||Bt(m)||Pu(m)||L1(m)?t(m):n.attempt(ab,n.attempt(ub,g),t)(m)}function g(m){return n.exit("literalAutolinkHttp"),n.exit("literalAutolink"),e(m)}}function zO(n,e,t){let r=0;return i;function i(l){return(l===87||l===119)&&r<3?(r++,n.consume(l),i):l===46&&r===3?(n.consume(l),o):t(l)}function o(l){return l===null?t(l):e(l)}}function LO(n,e,t){let r,i,o;return l;function l(h){return h===46||h===95?n.check(cb,f,u)(h):h===null||Bt(h)||Pu(h)||h!==45&&L1(h)?f(h):(o=!0,n.consume(h),l)}function u(h){return h===95?r=!0:(i=r,r=void 0),n.consume(h),l}function f(h){return i||r||!o?t(h):e(h)}}function FO(n,e){let t=0,r=0;return i;function i(l){return l===40?(t++,n.consume(l),i):l===41&&r<t?o(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?n.check(cb,e,o)(l):l===null||Bt(l)||Pu(l)?e(l):(n.consume(l),i)}function o(l){return l===41&&r++,n.consume(l),i}}function BO(n,e,t){return r;function r(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(n.consume(u),r):u===38?(n.consume(u),o):u===93?(n.consume(u),i):u===60||u===null||Bt(u)||Pu(u)?e(u):t(u)}function i(u){return u===null||u===40||u===91||Bt(u)||Pu(u)?e(u):r(u)}function o(u){return _r(u)?l(u):t(u)}function l(u){return u===59?(n.consume(u),r):_r(u)?(n.consume(u),l):t(u)}}function UO(n,e,t){return r;function r(o){return n.consume(o),i}function i(o){return qr(o)?t(o):e(o)}}function hb(n){return n===null||n===40||n===42||n===95||n===91||n===93||n===126||Bt(n)}function pb(n){return!_r(n)}function mb(n){return!(n===47||tv(n))}function tv(n){return n===43||n===45||n===46||n===95||qr(n)}function I3(n){let e=n.length,t=!1;for(;e--;){const r=n[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){t=!0;break}if(r._gfmAutolinkLiteralWalkedInto){t=!1;break}}return n.length>0&&!t&&(n[n.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),t}const WO={tokenize:GO,partial:!0};function jO(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:qO,continuation:{tokenize:KO},exit:JO}},text:{91:{name:"gfmFootnoteCall",tokenize:VO},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:$O,resolveTo:HO}}}}function $O(n,e,t){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;i--;){const f=r.events[i][1];if(f.type==="labelImage"){l=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return u;function u(f){if(!l||!l._balanced)return t(f);const h=ko(r.sliceSerialize({start:l.end,end:r.now()}));return h.codePointAt(0)!==94||!o.includes(h.slice(1))?t(f):(n.enter("gfmFootnoteCallLabelMarker"),n.consume(f),n.exit("gfmFootnoteCallLabelMarker"),e(f))}}function HO(n,e){let t=n.length;for(;t--;)if(n[t][1].type==="labelImage"&&n[t][0]==="enter"){n[t][1];break}n[t+1][1].type="data",n[t+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},n[t+3][1].start),end:Object.assign({},n[n.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},n[t+3][1].end),end:Object.assign({},n[t+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},n[n.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},u=[n[t+1],n[t+2],["enter",r,e],n[t+3],n[t+4],["enter",i,e],["exit",i,e],["enter",o,e],["enter",l,e],["exit",l,e],["exit",o,e],n[n.length-2],n[n.length-1],["exit",r,e]];return n.splice(t,n.length-t+1,...u),n}function VO(n,e,t){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,l;return u;function u(m){return n.enter("gfmFootnoteCall"),n.enter("gfmFootnoteCallLabelMarker"),n.consume(m),n.exit("gfmFootnoteCallLabelMarker"),f}function f(m){return m!==94?t(m):(n.enter("gfmFootnoteCallMarker"),n.consume(m),n.exit("gfmFootnoteCallMarker"),n.enter("gfmFootnoteCallString"),n.enter("chunkString").contentType="string",h)}function h(m){if(o>999||m===93&&!l||m===null||m===91||Bt(m))return t(m);if(m===93){n.exit("chunkString");const w=n.exit("gfmFootnoteCallString");return i.includes(ko(r.sliceSerialize(w)))?(n.enter("gfmFootnoteCallLabelMarker"),n.consume(m),n.exit("gfmFootnoteCallLabelMarker"),n.exit("gfmFootnoteCall"),e):t(m)}return Bt(m)||(l=!0),o++,n.consume(m),m===92?g:h}function g(m){return m===91||m===92||m===93?(n.consume(m),o++,h):h(m)}}function qO(n,e,t){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,l=0,u;return f;function f(b){return n.enter("gfmFootnoteDefinition")._container=!0,n.enter("gfmFootnoteDefinitionLabel"),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(b),n.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(b){return b===94?(n.enter("gfmFootnoteDefinitionMarker"),n.consume(b),n.exit("gfmFootnoteDefinitionMarker"),n.enter("gfmFootnoteDefinitionLabelString"),n.enter("chunkString").contentType="string",g):t(b)}function g(b){if(l>999||b===93&&!u||b===null||b===91||Bt(b))return t(b);if(b===93){n.exit("chunkString");const A=n.exit("gfmFootnoteDefinitionLabelString");return o=ko(r.sliceSerialize(A)),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(b),n.exit("gfmFootnoteDefinitionLabelMarker"),n.exit("gfmFootnoteDefinitionLabel"),w}return Bt(b)||(u=!0),l++,n.consume(b),b===92?m:g}function m(b){return b===91||b===92||b===93?(n.consume(b),l++,g):g(b)}function w(b){return b===58?(n.enter("definitionMarker"),n.consume(b),n.exit("definitionMarker"),i.includes(o)||i.push(o),xt(n,k,"gfmFootnoteDefinitionWhitespace")):t(b)}function k(b){return e(b)}}function KO(n,e,t){return n.check(_p,e,n.attempt(WO,e,t))}function JO(n){n.exit("gfmFootnoteDefinition")}function GO(n,e,t){const r=this;return xt(n,i,"gfmFootnoteDefinitionIndent",5);function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?e(o):t(o)}}function QO(n){let t=(n||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return t==null&&(t=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(l,u){let f=-1;for(;++f<l.length;)if(l[f][0]==="enter"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._close){let h=f;for(;h--;)if(l[h][0]==="exit"&&l[h][1].type==="strikethroughSequenceTemporary"&&l[h][1]._open&&l[f][1].end.offset-l[f][1].start.offset===l[h][1].end.offset-l[h][1].start.offset){l[f][1].type="strikethroughSequence",l[h][1].type="strikethroughSequence";const g={type:"strikethrough",start:Object.assign({},l[h][1].start),end:Object.assign({},l[f][1].end)},m={type:"strikethroughText",start:Object.assign({},l[h][1].end),end:Object.assign({},l[f][1].start)},w=[["enter",g,u],["enter",l[h][1],u],["exit",l[h][1],u],["enter",m,u]],k=u.parser.constructs.insideSpan.null;k&&yi(w,w.length,0,F1(k,l.slice(h+1,f),u)),yi(w,w.length,0,[["exit",m,u],["enter",l[f][1],u],["exit",l[f][1],u],["exit",g,u]]),yi(l,h-1,f-h+3,w),f=h+w.length-2;break}}for(f=-1;++f<l.length;)l[f][1].type==="strikethroughSequenceTemporary"&&(l[f][1].type="data");return l}function o(l,u,f){const h=this.previous,g=this.events;let m=0;return w;function w(b){return h===126&&g[g.length-1][1].type!=="characterEscape"?f(b):(l.enter("strikethroughSequenceTemporary"),k(b))}function k(b){const A=Lf(h);if(b===126)return m>1?f(b):(l.consume(b),m++,k);if(m<2&&!t)return f(b);const O=l.exit("strikethroughSequenceTemporary"),F=Lf(b);return O._open=!F||F===2&&!!A,O._close=!A||A===2&&!!F,u(b)}}}class YO{constructor(){this.map=[]}add(e,t,r){XO(this,e,t,r)}consume(e){if(this.map.sort(function(o,l){return o[0]-l[0]}),this.map.length===0)return;let t=this.map.length;const r=[];for(;t>0;)t-=1,r.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const o of i)e.push(o);i=r.pop()}this.map.length=0}}function XO(n,e,t,r){let i=0;if(!(t===0&&r.length===0)){for(;i<n.map.length;){if(n.map[i][0]===e){n.map[i][1]+=t,n.map[i][2].push(...r);return}i+=1}n.map.push([e,t,r])}}function ZO(n,e){let t=!1;const r=[];for(;e<n.length;){const i=n[e];if(t){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(n[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(n[e-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(t=!0);e+=1}return r}function eR(){return{flow:{null:{name:"table",tokenize:tR,resolveAll:nR}}}}function tR(n,e,t){const r=this;let i=0,o=0,l;return u;function u(C){let U=r.events.length-1;for(;U>-1;){const ue=r.events[U][1].type;if(ue==="lineEnding"||ue==="linePrefix")U--;else break}const R=U>-1?r.events[U][1].type:null,Q=R==="tableHead"||R==="tableRow"?z:f;return Q===z&&r.parser.lazy[r.now().line]?t(C):Q(C)}function f(C){return n.enter("tableHead"),n.enter("tableRow"),h(C)}function h(C){return C===124||(l=!0,o+=1),g(C)}function g(C){return C===null?t(C):qe(C)?o>1?(o=0,r.interrupt=!0,n.exit("tableRow"),n.enter("lineEnding"),n.consume(C),n.exit("lineEnding"),k):t(C):ht(C)?xt(n,g,"whitespace")(C):(o+=1,l&&(l=!1,i+=1),C===124?(n.enter("tableCellDivider"),n.consume(C),n.exit("tableCellDivider"),l=!0,g):(n.enter("data"),m(C)))}function m(C){return C===null||C===124||Bt(C)?(n.exit("data"),g(C)):(n.consume(C),C===92?w:m)}function w(C){return C===92||C===124?(n.consume(C),m):m(C)}function k(C){return r.interrupt=!1,r.parser.lazy[r.now().line]?t(C):(n.enter("tableDelimiterRow"),l=!1,ht(C)?xt(n,b,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):b(C))}function b(C){return C===45||C===58?O(C):C===124?(l=!0,n.enter("tableCellDivider"),n.consume(C),n.exit("tableCellDivider"),A):B(C)}function A(C){return ht(C)?xt(n,O,"whitespace")(C):O(C)}function O(C){return C===58?(o+=1,l=!0,n.enter("tableDelimiterMarker"),n.consume(C),n.exit("tableDelimiterMarker"),F):C===45?(o+=1,F(C)):C===null||qe(C)?W(C):B(C)}function F(C){return C===45?(n.enter("tableDelimiterFiller"),V(C)):B(C)}function V(C){return C===45?(n.consume(C),V):C===58?(l=!0,n.exit("tableDelimiterFiller"),n.enter("tableDelimiterMarker"),n.consume(C),n.exit("tableDelimiterMarker"),I):(n.exit("tableDelimiterFiller"),I(C))}function I(C){return ht(C)?xt(n,W,"whitespace")(C):W(C)}function W(C){return C===124?b(C):C===null||qe(C)?!l||i!==o?B(C):(n.exit("tableDelimiterRow"),n.exit("tableHead"),e(C)):B(C)}function B(C){return t(C)}function z(C){return n.enter("tableRow"),H(C)}function H(C){return C===124?(n.enter("tableCellDivider"),n.consume(C),n.exit("tableCellDivider"),H):C===null||qe(C)?(n.exit("tableRow"),e(C)):ht(C)?xt(n,H,"whitespace")(C):(n.enter("data"),Y(C))}function Y(C){return C===null||C===124||Bt(C)?(n.exit("data"),H(C)):(n.consume(C),C===92?q:Y)}function q(C){return C===92||C===124?(n.consume(C),Y):Y(C)}}function nR(n,e){let t=-1,r=!0,i=0,o=[0,0,0,0],l=[0,0,0,0],u=!1,f=0,h,g,m;const w=new YO;for(;++t<n.length;){const k=n[t],b=k[1];k[0]==="enter"?b.type==="tableHead"?(u=!1,f!==0&&(C4(w,e,f,h,g),g=void 0,f=0),h={type:"table",start:Object.assign({},b.start),end:Object.assign({},b.end)},w.add(t,0,[["enter",h,e]])):b.type==="tableRow"||b.type==="tableDelimiterRow"?(r=!0,m=void 0,o=[0,0,0,0],l=[0,t+1,0,0],u&&(u=!1,g={type:"tableBody",start:Object.assign({},b.start),end:Object.assign({},b.end)},w.add(t,0,[["enter",g,e]])),i=b.type==="tableDelimiterRow"?2:g?3:1):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(o[1]!==0&&(l[0]=l[1],m=Mm(w,e,o,i,void 0,m),o=[0,0,0,0]),l[2]=t)):b.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(l[0]=l[1],m=Mm(w,e,o,i,void 0,m)),o=l,l=[o[1],t,0,0])):b.type==="tableHead"?(u=!0,f=t):b.type==="tableRow"||b.type==="tableDelimiterRow"?(f=t,o[1]!==0?(l[0]=l[1],m=Mm(w,e,o,i,t,m)):l[1]!==0&&(m=Mm(w,e,l,i,t,m)),i=0):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")&&(l[3]=t)}for(f!==0&&C4(w,e,f,h,g),w.consume(e.events),t=-1;++t<e.events.length;){const k=e.events[t];k[0]==="enter"&&k[1].type==="table"&&(k[1]._align=ZO(e.events,t))}return n}function Mm(n,e,t,r,i,o){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",u="tableContent";t[0]!==0&&(o.end=Object.assign({},bf(e.events,t[0])),n.add(t[0],0,[["exit",o,e]]));const f=bf(e.events,t[1]);if(o={type:l,start:Object.assign({},f),end:Object.assign({},f)},n.add(t[1],0,[["enter",o,e]]),t[2]!==0){const h=bf(e.events,t[2]),g=bf(e.events,t[3]),m={type:u,start:Object.assign({},h),end:Object.assign({},g)};if(n.add(t[2],0,[["enter",m,e]]),r!==2){const w=e.events[t[2]],k=e.events[t[3]];if(w[1].end=Object.assign({},k[1].end),w[1].type="chunkText",w[1].contentType="text",t[3]>t[2]+1){const b=t[2]+1,A=t[3]-t[2]-1;n.add(b,A,[])}}n.add(t[3]+1,0,[["exit",m,e]])}return i!==void 0&&(o.end=Object.assign({},bf(e.events,i)),n.add(i,0,[["exit",o,e]]),o=void 0),o}function C4(n,e,t,r,i){const o=[],l=bf(e.events,t);i&&(i.end=Object.assign({},l),o.push(["exit",i,e])),r.end=Object.assign({},l),o.push(["exit",r,e]),n.add(t+1,0,o)}function bf(n,e){const t=n[e],r=t[0]==="enter"?"start":"end";return t[1][r]}const rR={name:"tasklistCheck",tokenize:oR};function iR(){return{text:{91:rR}}}function oR(n,e,t){const r=this;return i;function i(f){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?t(f):(n.enter("taskListCheck"),n.enter("taskListCheckMarker"),n.consume(f),n.exit("taskListCheckMarker"),o)}function o(f){return Bt(f)?(n.enter("taskListCheckValueUnchecked"),n.consume(f),n.exit("taskListCheckValueUnchecked"),l):f===88||f===120?(n.enter("taskListCheckValueChecked"),n.consume(f),n.exit("taskListCheckValueChecked"),l):t(f)}function l(f){return f===93?(n.enter("taskListCheckMarker"),n.consume(f),n.exit("taskListCheckMarker"),n.exit("taskListCheck"),u):t(f)}function u(f){return qe(f)?e(f):ht(f)?n.check({tokenize:sR},e,t)(f):t(f)}}function sR(n,e,t){return xt(n,r,"whitespace");function r(i){return i===null?t(i):e(i)}}function lR(n){return xx([PO(),jO(),QO(n),eR(),iR()])}const aR={};function uR(n){const e=this,t=n||aR,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(lR(t)),o.push(MO()),l.push(NO(t))}function Ye(n,e){return Object.assign(n,{meta:{package:"@milkdown/preset-gfm",...e}}),n}const P3=Ip("strike_through");Ye(P3,{displayName:"Attr<strikethrough>",group:"Strikethrough"});const Lp=Ap("strike_through",n=>({parseDOM:[{tag:"del"},{style:"text-decoration",getAttrs:e=>e==="line-through"}],toDOM:e=>["del",n.get(P3.key)(e)],parseMarkdown:{match:e=>e.type==="delete",runner:(e,t,r)=>{e.openMark(r),e.next(t.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="strike_through",runner:(e,t)=>{e.withMark(t,"delete")}}}));Ye(Lp.mark,{displayName:"MarkSchema<strikethrough>",group:"Strikethrough"});Ye(Lp.ctx,{displayName:"MarkSchemaCtx<strikethrough>",group:"Strikethrough"});const O3=at("ToggleStrikeThrough",n=>()=>q1(Lp.type(n)));Ye(O3,{displayName:"Command<ToggleStrikethrough>",group:"Strikethrough"});const gb=Xr(n=>Ep(/~([^~]+)~$/,Lp.type(n)));Ye(gb,{displayName:"InputRule<strikethrough>",group:"Strikethrough"});const R3=Zr("strikeThroughKeymap",{ToggleStrikethrough:{shortcuts:"Mod-Alt-x",command:n=>{const e=n.get(Mt);return()=>e.call(O3.key)}}});Ye(R3.ctx,{displayName:"KeymapCtx<strikethrough>",group:"Strikethrough"});Ye(R3.shortcuts,{displayName:"Keymap<strikethrough>",group:"Strikethrough"});const Fp=DI({tableGroup:"block",cellContent:"paragraph",cellAttributes:{alignment:{default:"left",getFromDOM:n=>n.style.textAlign||"left",setDOMAttr:(n,e)=>{e.style=`text-align: ${n||"left"}`}}}}),Kf=Fn("table",()=>({...Fp.table,content:"table_header_row table_row+",disableDropCursor:!0,parseMarkdown:{match:n=>n.type==="table",runner:(n,e,t)=>{const r=e.align,i=e.children.map((o,l)=>({...o,align:r,isHeader:l===0}));n.openNode(t),n.next(i),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table",runner:(n,e)=>{var t;const r=(t=e.content.firstChild)==null?void 0:t.content;if(!r)return;const i=[];r.forEach(o=>{i.push(o.attrs.alignment)}),n.openNode("table",void 0,{align:i}),n.next(e.content),n.closeNode()}}}));Ye(Kf.node,{displayName:"NodeSchema<table>",group:"Table"});Ye(Kf.ctx,{displayName:"NodeSchemaCtx<table>",group:"Table"});const eg=Fn("table_header_row",()=>({...Fp.table_row,disableDropCursor:!0,content:"(table_header)*",parseDOM:[{tag:"tr[data-is-header]"}],toDOM(){return["tr",{"data-is-header":!0},0]},parseMarkdown:{match:n=>!!(n.type==="tableRow"&&n.isHeader),runner:(n,e,t)=>{const r=e.align,i=e.children.map((o,l)=>({...o,align:r[l],isHeader:e.isHeader}));n.openNode(t),n.next(i),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table_header_row",runner:(n,e)=>{n.openNode("tableRow",void 0,{isHeader:!0}),n.next(e.content),n.closeNode()}}}));Ye(eg.node,{displayName:"NodeSchema<tableHeaderRow>",group:"Table"});Ye(eg.ctx,{displayName:"NodeSchemaCtx<tableHeaderRow>",group:"Table"});const Bp=Fn("table_row",()=>({...Fp.table_row,disableDropCursor:!0,content:"(table_cell)*",parseMarkdown:{match:n=>n.type==="tableRow",runner:(n,e,t)=>{const r=e.align,i=e.children.map((o,l)=>({...o,align:r[l]}));n.openNode(t),n.next(i),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table_row",runner:(n,e)=>{n.openNode("tableRow"),n.next(e.content),n.closeNode()}}}));Ye(Bp.node,{displayName:"NodeSchema<tableRow>",group:"Table"});Ye(Bp.ctx,{displayName:"NodeSchemaCtx<tableRow>",group:"Table"});const Up=Fn("table_cell",()=>({...Fp.table_cell,disableDropCursor:!0,parseMarkdown:{match:n=>n.type==="tableCell"&&!n.isHeader,runner:(n,e,t)=>{const r=e.align;n.openNode(t,{alignment:r}).openNode(n.schema.nodes.paragraph).next(e.children).closeNode().closeNode()}},toMarkdown:{match:n=>n.type.name==="table_cell",runner:(n,e)=>{n.openNode("tableCell").next(e.content).closeNode()}}}));Ye(Up.node,{displayName:"NodeSchema<tableCell>",group:"Table"});Ye(Up.ctx,{displayName:"NodeSchemaCtx<tableCell>",group:"Table"});const tg=Fn("table_header",()=>({...Fp.table_header,disableDropCursor:!0,parseMarkdown:{match:n=>n.type==="tableCell"&&!!n.isHeader,runner:(n,e,t)=>{const r=e.align;n.openNode(t,{alignment:r}),n.openNode(n.schema.nodes.paragraph),n.next(e.children),n.closeNode(),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table_header",runner:(n,e)=>{n.openNode("tableCell"),n.next(e.content),n.closeNode()}}}));Ye(tg.node,{displayName:"NodeSchema<tableHeader>",group:"Table"});Ye(tg.ctx,{displayName:"NodeSchemaCtx<tableHeader>",group:"Table"});function yb(n,e=3,t=3){const r=Array(t).fill(0).map(()=>Up.type(n).createAndFill()),i=Array(t).fill(0).map(()=>tg.type(n).createAndFill()),o=Array(e).fill(0).map((l,u)=>u===0?eg.type(n).create(null,i):Bp.type(n).create(null,r));return Kf.type(n).create(null,o)}function Wp(n){return xv(e=>e.type.spec.tableRole==="table")(n)}function _f(n,e){const t=Wp(e.$from);if(!t)return;const r=Pt.get(t.node);if(!(n<0||n>=r.width))return r.cellsInRect({left:n,right:n+1,top:0,bottom:r.height}).map(i=>{const o=t.node.nodeAt(i);if(!o)return;const l=i+t.start;return{pos:l,start:l+1,node:o}}).filter(i=>i!=null)}function Cf(n,e){const t=Wp(e.$from);if(!t)return;const r=Pt.get(t.node);if(!(n<0||n>=r.height))return r.cellsInRect({left:0,right:r.width,top:n,bottom:n+1}).map(i=>{const o=t.node.nodeAt(i);if(!o)return;const l=i+t.start;return{pos:l,start:l+1,node:o}}).filter(i=>i!=null)}function cR(n){const e=Wp(n.$from);if(!e)return;const t=Pt.get(e.node);return t.cellsInRect({left:0,right:t.width,top:0,bottom:t.height}).map(i=>{const o=e.node.nodeAt(i),l=i+e.start;return{pos:l,start:l+1,node:o}})}function fR(n){const e=cR(n.selection);if(e&&e[0]){const t=n.doc.resolve(e[0].pos),r=e[e.length-1];if(r){const i=n.doc.resolve(r.pos);return V1(n.setSelection(new Kt(i,t)))}}return n}function vb(n,e,{map:t,tableStart:r,table:i},o){const l=Array(o).fill(0).reduce((f,h,g)=>f+i.child(g).nodeSize,r),u=Array(t.width).fill(0).map((f,h)=>{const g=i.nodeAt(t.map[h]);return Up.type(n).createAndFill({alignment:g==null?void 0:g.attrs.alignment})});return e.insert(l,Bp.type(n).create(null,u)),e}function wb(n){return(e,t)=>r=>{t=t??r.selection.from;const i=r.doc.resolve(t),o=xv(f=>f.type.name==="table")(i),l=o?{node:o.node,from:o.start}:void 0,u=n==="row";if(l){const f=Pt.get(l.node);if(e>=0&&e<(u?f.height:f.width)){const h=f.positionAt(u?e:f.height-1,u?f.width-1:e,l.node),g=r.doc.resolve(l.from+h),m=u?Kt.rowSelection:Kt.colSelection,w=f.positionAt(u?e:0,u?0:e,l.node),k=r.doc.resolve(l.from+w);return V1(r.setSelection(m(g,k)))}}return r}}const dR=wb("row"),hR=wb("col");function E4(n){return n[0].map((e,t)=>n.map(r=>r[t]))}function kb(n,e){const t=[],r=Pt.get(n);for(let o=0;o<r.height;o++){const l=n.child(o),u=[];for(let f=0;f<r.width;f++){if(!e[o][f])continue;const h=r.map[o*r.width+f],g=e[o][f],w=n.nodeAt(h).type.createChecked(Object.assign({},g.attrs),g.content,g.marks);u.push(w)}t.push(l.type.createChecked(l.attrs,u,l.marks))}return n.type.createChecked(n.attrs,t,n.marks)}function xb(n){const e=Pt.get(n),t=[];for(let r=0;r<e.height;r++){const i=[],o={};for(let l=0;l<e.width;l++){const u=e.map[r*e.width+l],f=n.nodeAt(u),h=e.findCell(u);if(o[u]||h.top!==r){i.push(null);continue}o[u]=!0,i.push(f)}t.push(i)}return t}function Sb(n,e,t,r){const i=e[0]>t[0]?-1:1,o=n.splice(e[0],e.length),l=o.length%2===0?1:0;let u;return u=i===-1?t[0]:t[t.length-1]-l,n.splice(u,0,...o),n}function pR(n,e,t,r){let i=E4(xb(n.node));return i=Sb(i,e,t),i=E4(i),kb(n.node,i)}function mR(n,e,t,r){let i=xb(n.node);return i=Sb(i,e,t),kb(n.node,i)}function T4(n,e){let t=n,r=n;for(let g=n;g>=0;g--){const m=_f(g,e.selection);m&&m.forEach(w=>{const k=w.node.attrs.colspan+g-1;k>=t&&(t=g),k>r&&(r=k)})}for(let g=n;g<=r;g++){const m=_f(g,e.selection);m&&m.forEach(w=>{const k=w.node.attrs.colspan+g-1;w.node.attrs.colspan>1&&k>r&&(r=k)})}const i=[];for(let g=t;g<=r;g++){const m=_f(g,e.selection);m&&m.length&&i.push(g)}t=i[0],r=i[i.length-1];const o=_f(t,e.selection),l=Cf(0,e.selection),u=e.doc.resolve(o[o.length-1].pos);let f;for(let g=r;g>=t;g--){const m=_f(g,e.selection);if(m&&m.length){for(let w=l.length-1;w>=0;w--)if(l[w].pos===m[0].pos){f=m[0];break}if(f)break}}const h=e.doc.resolve(f.pos);return{$anchor:u,$head:h,indexes:i}}function M4(n,e){let t=n,r=n;for(let g=n;g>=0;g--)Cf(g,e.selection).forEach(w=>{const k=w.node.attrs.rowspan+g-1;k>=t&&(t=g),k>r&&(r=k)});for(let g=n;g<=r;g++)Cf(g,e.selection).forEach(w=>{const k=w.node.attrs.rowspan+g-1;w.node.attrs.rowspan>1&&k>r&&(r=k)});const i=[];for(let g=t;g<=r;g++){const m=Cf(g,e.selection);m&&m.length&&i.push(g)}t=i[0],r=i[i.length-1];const o=Cf(t,e.selection),l=_f(0,e.selection),u=e.doc.resolve(o[o.length-1].pos);let f;for(let g=r;g>=t;g--){const m=Cf(g,e.selection);if(m&&m.length){for(let w=l.length-1;w>=0;w--)if(l[w].pos===m[0].pos){f=m[0];break}if(f)break}}const h=e.doc.resolve(f.pos);return{$anchor:u,$head:h,indexes:i}}function gR(n){const{tr:e,origin:t,target:r,select:i=!0,pos:o}=n,l=o!=null?e.doc.resolve(o):e.selection.$from,u=Wp(l);if(!u)return e;const{indexes:f}=T4(t,e),{indexes:h}=T4(r,e);if(f.includes(r))return e;const g=pR(u,f,h),m=V1(e).replaceWith(u.pos,u.pos+u.node.nodeSize,g);if(!i)return m;const w=Pt.get(g),k=u.start,b=r,A=w.positionAt(w.height-1,b,g),O=m.doc.resolve(k+A),F=Kt.colSelection,V=w.positionAt(0,b,g),I=m.doc.resolve(k+V);return m.setSelection(F(O,I))}function yR(n){const{tr:e,origin:t,target:r,select:i=!0,pos:o}=n,l=o!=null?e.doc.resolve(o):e.selection.$from,u=Wp(l);if(!u)return e;const{indexes:f}=M4(t,e),{indexes:h}=M4(r,e);if(f.includes(r))return e;const g=mR(u,f,h),m=V1(e).replaceWith(u.pos,u.pos+u.node.nodeSize,g);if(!i)return m;const w=Pt.get(g),k=u.start,b=r,A=w.positionAt(b,w.width-1,g),O=m.doc.resolve(k+A),F=Kt.rowSelection,V=w.positionAt(b,0,g),I=m.doc.resolve(k+V);return m.setSelection(F(O,I))}const D3=at("GoToPrevTableCell",()=>()=>eb(-1));Ye(D3,{displayName:"Command<goToPrevTableCellCommand>",group:"Table"});const z3=at("GoToNextTableCell",()=>()=>eb(1));Ye(z3,{displayName:"Command<goToNextTableCellCommand>",group:"Table"});const L3=at("ExitTable",n=>()=>(e,t)=>{if(!Ki(e))return!1;const{$head:r}=e.selection,i=zM(r,Kf.type(n));if(!i)return!1;const{to:o}=i,l=e.tr.replaceWith(o,o,ua.type(n).createAndFill());return l.setSelection(et.near(l.doc.resolve(o),1)).scrollIntoView(),t==null||t(l),!0});Ye(L3,{displayName:"Command<breakTableCommand>",group:"Table"});const bb=at("InsertTable",n=>({row:e,col:t}={})=>(r,i)=>{const{selection:o,tr:l}=r,{from:u}=o,f=yb(n,e,t),h=l.replaceSelectionWith(f),g=et.findFrom(h.doc.resolve(u),1,!0);return g&&h.setSelection(g),i==null||i(h),!0});Ye(bb,{displayName:"Command<insertTableCommand>",group:"Table"});const _b=at("MoveRow",()=>({from:n,to:e,pos:t}={})=>(r,i)=>{const{tr:o}=r;return!!(i==null?void 0:i(yR({tr:o,origin:n??0,target:e??0,pos:t,select:!0})))});Ye(_b,{displayName:"Command<moveRowCommand>",group:"Table"});const Cb=at("MoveCol",()=>({from:n,to:e,pos:t}={})=>(r,i)=>{const{tr:o}=r;return!!(i==null?void 0:i(gR({tr:o,origin:n??0,target:e??0,pos:t,select:!0})))});Ye(Cb,{displayName:"Command<moveColCommand>",group:"Table"});const Eb=at("SelectRow",()=>(n={index:0})=>(e,t)=>{const{tr:r}=e;return!!(t==null?void 0:t(dR(n.index,n.pos)(r)))});Ye(Eb,{displayName:"Command<selectRowCommand>",group:"Table"});const Tb=at("SelectCol",()=>(n={index:0})=>(e,t)=>{const{tr:r}=e;return!!(t==null?void 0:t(hR(n.index,n.pos)(r)))});Ye(Tb,{displayName:"Command<selectColCommand>",group:"Table"});const Mb=at("SelectTable",()=>()=>(n,e)=>{const{tr:t}=n;return!!(e==null?void 0:e(fR(t)))});Ye(Mb,{displayName:"Command<selectTableCommand>",group:"Table"});const Nb=at("DeleteSelectedCells",()=>()=>(n,e)=>{const{selection:t}=n;if(!(t instanceof Kt))return!1;const r=t.isRowSelection(),i=t.isColSelection();return r&&i?rP(n,e):i?YI(n,e):ZI(n,e)});Ye(Nb,{displayName:"Command<deleteSelectedCellsCommand>",group:"Table"});const Ab=at("AddColBefore",()=>()=>JI);Ye(Ab,{displayName:"Command<addColBeforeCommand>",group:"Table"});const Ib=at("AddColAfter",()=>()=>GI);Ye(Ib,{displayName:"Command<addColAfterCommand>",group:"Table"});const Pb=at("AddRowBefore",n=>()=>(e,t)=>{if(!Ki(e))return!1;if(t){const r=ca(e);t(vb(n,e.tr,r,r.top))}return!0});Ye(Pb,{displayName:"Command<addRowBeforeCommand>",group:"Table"});const Ob=at("AddRowAfter",n=>()=>(e,t)=>{if(!Ki(e))return!1;if(t){const r=ca(e);t(vb(n,e.tr,r,r.bottom))}return!0});Ye(Ob,{displayName:"Command<addRowAfterCommand>",group:"Table"});const Rb=at("SetAlign",()=>(n="left")=>eP("alignment",n));Ye(Rb,{displayName:"Command<setAlignCommand>",group:"Table"});const Db=Xr(n=>new Yr(/^\|(?<col>\d+)[xX](?<row>\d+)\|\s$/,(e,t,r,i)=>{var o,l;const u=e.doc.resolve(r);if(!u.node(-1).canReplaceWith(u.index(-1),u.indexAfter(-1),Kf.type(n)))return null;const f=Math.max(Number(((o=t.groups)==null?void 0:o.row)??0),2),h=yb(n,f,Number((l=t.groups)==null?void 0:l.col)),g=e.tr.replaceRangeWith(r,i,h);return g.setSelection(st.create(g.doc,r+3)).scrollIntoView()}));Ye(Db,{displayName:"InputRule<insertTableInputRule>",group:"Table"});const F3=Zr("tableKeymap",{NextCell:{shortcuts:["Mod-]","Tab"],command:n=>{const e=n.get(Mt);return()=>e.call(z3.key)}},PrevCell:{shortcuts:["Mod-[","Shift-Tab"],command:n=>{const e=n.get(Mt);return()=>e.call(D3.key)}},ExitTable:{shortcuts:["Mod-Enter","Enter"],command:n=>{const e=n.get(Mt);return()=>e.call(L3.key)}}});Ye(F3.ctx,{displayName:"KeymapCtx<table>",group:"Table"});Ye(F3.shortcuts,{displayName:"Keymap<table>",group:"Table"});const i2="footnote_definition",N4="footnoteDefinition",B3=Fn("footnote_definition",()=>({group:"block",content:"block+",defining:!0,attrs:{label:{default:""}},parseDOM:[{tag:`dl[data-type="${i2}"]`,getAttrs:n=>{if(!(n instanceof HTMLElement))throw us(n);return{label:n.dataset.label}},contentElement:"dd"}],toDOM:n=>{const e=n.attrs.label;return["dl",{"data-label":e,"data-type":i2},["dt",e],["dd",0]]},parseMarkdown:{match:({type:n})=>n===N4,runner:(n,e,t)=>{n.openNode(t,{label:e.label}).next(e.children).closeNode()}},toMarkdown:{match:n=>n.type.name===i2,runner:(n,e)=>{n.openNode(N4,void 0,{label:e.attrs.label,identifier:e.attrs.label}).next(e.content).closeNode()}}}));Ye(B3.ctx,{displayName:"NodeSchemaCtx<footnodeDef>",group:"footnote"});Ye(B3.node,{displayName:"NodeSchema<footnodeDef>",group:"footnote"});const o2="footnote_reference",U3=Fn("footnote_reference",()=>({group:"inline",inline:!0,atom:!0,attrs:{label:{default:""}},parseDOM:[{tag:`sup[data-type="${o2}"]`,getAttrs:n=>{if(!(n instanceof HTMLElement))throw us(n);return{label:n.dataset.label}}}],toDOM:n=>{const e=n.attrs.label;return["sup",{"data-label":e,"data-type":o2},e]},parseMarkdown:{match:({type:n})=>n==="footnoteReference",runner:(n,e,t)=>{n.addNode(t,{label:e.label})}},toMarkdown:{match:n=>n.type.name===o2,runner:(n,e)=>{n.addNode("footnoteReference",void 0,void 0,{label:e.attrs.label,identifier:e.attrs.label})}}}));Ye(U3.ctx,{displayName:"NodeSchemaCtx<footnodeRef>",group:"footnote"});Ye(U3.node,{displayName:"NodeSchema<footnodeRef>",group:"footnote"});const zb=as.extendSchema(n=>e=>{const t=n(e);return{...t,attrs:{...t.attrs,checked:{default:null}},parseDOM:[{tag:'li[data-item-type="task"]',getAttrs:r=>{if(!(r instanceof HTMLElement))throw us(r);return{label:r.dataset.label,listType:r.dataset.listType,spread:r.dataset.spread,checked:r.dataset.checked?r.dataset.checked==="true":null}}},...(t==null?void 0:t.parseDOM)||[]],toDOM:r=>t.toDOM&&r.attrs.checked==null?t.toDOM(r):["li",{"data-item-type":"task","data-label":r.attrs.label,"data-list-type":r.attrs.listType,"data-spread":r.attrs.spread,"data-checked":r.attrs.checked},0],parseMarkdown:{match:({type:r})=>r==="listItem",runner:(r,i,o)=>{if(i.checked==null){t.parseMarkdown.runner(r,i,o);return}const l=i.label!=null?`${i.label}.`:"",u=i.checked!=null?!!i.checked:null,f=i.label!=null?"ordered":"bullet",h=i.spread!=null?`${i.spread}`:"true";r.openNode(o,{label:l,listType:f,spread:h,checked:u}),r.next(i.children),r.closeNode()}},toMarkdown:{match:r=>r.type.name==="list_item",runner:(r,i)=>{if(i.attrs.checked==null){t.toMarkdown.runner(r,i);return}const o=i.attrs.label,l=i.attrs.listType,u=i.attrs.spread==="true",f=i.attrs.checked;r.openNode("listItem",void 0,{label:o,listType:l,spread:u,checked:f}),r.next(i.content),r.closeNode()}}}});Ye(zb,{displayName:"NodeSchema<listItem>",group:"ListItem"});const Lb=Xr(()=>new Yr(/^\[(?<checked>\s|x)\]\s$/,(n,e,t,r)=>{var i;const o=n.doc.resolve(t);let l=0,u=o.node(l);for(;u&&u.type.name!=="list_item";)l--,u=o.node(l);if(!u||u.attrs.checked!=null)return null;const f=((i=e.groups)==null?void 0:i.checked)==="x",h=o.before(l),g=n.tr;return g.deleteRange(t,r).setNodeMarkup(h,void 0,{...u.attrs,checked:f}),g}));Ye(Lb,{displayName:"InputRule<wrapInTaskListInputRule>",group:"ListItem"});const vR=[R3,F3].flat(),wR=[Db,Lb],kR=[gb],Fb=qi(()=>PP);Ye(Fb,{displayName:"Prose<autoInsertSpanPlugin>",group:"Prose"});const xR=qi(()=>hP({}));Ye(xR,{displayName:"Prose<columnResizingPlugin>",group:"Prose"});const Bb=qi(()=>bP({allowTableNodeSelection:!0}));Ye(Bb,{displayName:"Prose<tableEditingPlugin>",group:"Prose"});const W3=Fu("remarkGFM",()=>uR);Ye(W3.plugin,{displayName:"Remark<remarkGFMPlugin>",group:"Remark"});Ye(W3.options,{displayName:"RemarkConfig<remarkGFMPlugin>",group:"Remark"});const SR=new Ln("MILKDOWN_KEEP_TABLE_ALIGN_PLUGIN");function bR(n,e){let t=0;return e.forEach((r,i,o)=>{r===n&&(t=o)}),t}const Ub=qi(()=>new Zn({key:SR,appendTransaction:(n,e,t)=>{let r;const i=(o,l)=>{if(r||(r=t.tr),o.type.name!=="table_cell")return;const u=t.doc.resolve(l),f=u.node(u.depth),g=u.node(u.depth-1).firstChild;if(!g)return;const m=bR(o,f),w=g.maybeChild(m);if(!w)return;const k=w.attrs.alignment,b=o.attrs.alignment;k!==b&&r.setNodeMarkup(l,void 0,{...o.attrs,alignment:k})};return e.doc!==t.doc&&t.doc.descendants(i),r}}));Ye(Ub,{displayName:"Prose<keepTableAlignPlugin>",group:"Prose"});const _R=[Ub,Fb,W3,Bb].flat(),CR=[zb,Kf,eg,Bp,tg,Up,B3,U3,P3,Lp].flat(),ER=[z3,D3,L3,bb,_b,Cb,Eb,Tb,Mb,Nb,Pb,Ob,Ab,Ib,Rb,O3],TR=[CR,wR,kR,vR,ER,_R].flat();var I1=200,zn=function(){};zn.prototype.append=function(e){return e.length?(e=zn.from(e),!this.length&&e||e.length<I1&&this.leafAppend(e)||this.length<I1&&e.leafPrepend(this)||this.appendInner(e)):this};zn.prototype.prepend=function(e){return e.length?zn.from(e).append(this):this};zn.prototype.appendInner=function(e){return new MR(this,e)};zn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?zn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};zn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};zn.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};zn.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,l){return i.push(e(o,l))},t,r),i};zn.from=function(e){return e instanceof zn?e:e&&e.length?new Wb(e):zn.empty};var Wb=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,l,u){for(var f=o;f<l;f++)if(i(this.values[f],u+f)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,l,u){for(var f=o-1;f>=l;f--)if(i(this.values[f],u+f)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=I1)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=I1)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(zn);zn.empty=new Wb([]);var MR=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,l){var u=this.left.length;if(i<u&&this.left.forEachInner(r,i,Math.min(o,u),l)===!1||o>u&&this.right.forEachInner(r,Math.max(i-u,0),Math.min(this.length,o)-u,l+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,l){var u=this.left.length;if(i>u&&this.right.forEachInvertedInner(r,i-u,Math.max(o,u)-u,l+u)===!1||o<u&&this.left.forEachInvertedInner(r,Math.min(i,u),o,l)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(zn);const NR=500;class yo{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;t&&(i=this.remapping(r,this.items.length),o=i.maps.length);let l=e.tr,u,f,h=[],g=[];return this.items.forEach((m,w)=>{if(!m.step){i||(i=this.remapping(r,w+1),o=i.maps.length),o--,g.push(m);return}if(i){g.push(new ns(m.map));let k=m.step.map(i.slice(o)),b;k&&l.maybeStep(k).doc&&(b=l.mapping.maps[l.mapping.maps.length-1],h.push(new ns(b,void 0,void 0,h.length+g.length))),o--,b&&i.appendMap(b,o)}else l.maybeStep(m.step);if(m.selection)return u=i?m.selection.map(i.slice(o)):m.selection,f=new yo(this.items.slice(0,r).append(g.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:f,transform:l,selection:u}}addTransform(e,t,r,i){let o=[],l=this.eventCount,u=this.items,f=!i&&u.length?u.get(u.length-1):null;for(let g=0;g<e.steps.length;g++){let m=e.steps[g].invert(e.docs[g]),w=new ns(e.mapping.maps[g],m,t),k;(k=f&&f.merge(w))&&(w=k,g?o.pop():u=u.slice(0,u.length-1)),o.push(w),t&&(l++,t=void 0),i||(f=w)}let h=l-r.depth;return h>IR&&(u=AR(u,h),l-=h),new yo(u.append(o),l)}remapping(e,t){let r=new fp;return this.items.forEach((i,o)=>{let l=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,l)},e,t),r}addMaps(e){return this.eventCount==0?this:new yo(this.items.append(e.map(t=>new ns(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),o=e.mapping,l=e.steps.length,u=this.eventCount;this.items.forEach(w=>{w.selection&&u--},i);let f=t;this.items.forEach(w=>{let k=o.getMirror(--f);if(k==null)return;l=Math.min(l,k);let b=o.maps[k];if(w.step){let A=e.steps[k].invert(e.docs[k]),O=w.selection&&w.selection.map(o.slice(f+1,k));O&&u++,r.push(new ns(b,A,O))}else r.push(new ns(b))},i);let h=[];for(let w=t;w<l;w++)h.push(new ns(o.maps[w]));let g=this.items.slice(0,i).append(h).append(r),m=new yo(g,u);return m.emptyItemCount()>NR&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],o=0;return this.items.forEach((l,u)=>{if(u>=e)i.push(l),l.selection&&o++;else if(l.step){let f=l.step.map(t.slice(r)),h=f&&f.getMap();if(r--,h&&t.appendMap(h,r),f){let g=l.selection&&l.selection.map(t.slice(r));g&&o++;let m=new ns(h.invert(),f,g),w,k=i.length-1;(w=i.length&&i[k].merge(m))?i[k]=w:i.push(m)}}else l.map&&r--},this.items.length,0),new yo(zn.from(i.reverse()),o)}}yo.empty=new yo(zn.empty,0);function AR(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class ns{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new ns(t.getMap().invert(),t,this.selection)}}}class Vl{constructor(e,t,r,i,o){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const IR=20;function PR(n,e,t,r){let i=t.getMeta(Tu),o;if(i)return i.historyState;t.getMeta(DR)&&(n=new Vl(n.done,n.undone,null,0,-1));let l=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(l&&l.getMeta(Tu))return l.getMeta(Tu).redo?new Vl(n.done.addTransform(t,void 0,r,c1(e)),n.undone,A4(t.mapping.maps),n.prevTime,n.prevComposition):new Vl(n.done,n.undone.addTransform(t,void 0,r,c1(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),f=n.prevTime==0||!l&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!OR(t,n.prevRanges)),h=l?s2(n.prevRanges,t.mapping):A4(t.mapping.maps);return new Vl(n.done.addTransform(t,f?e.selection.getBookmark():void 0,r,c1(e)),yo.empty,h,t.time,u??n.prevComposition)}else return(o=t.getMeta("rebased"))?new Vl(n.done.rebased(t,o),n.undone.rebased(t,o),s2(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Vl(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),s2(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function OR(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(t=!0)}),t}function A4(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,o,l)=>e.push(o,l));return e}function s2(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),o=e.map(n[r+1],-1);i<=o&&t.push(i,o)}return t}function RR(n,e,t){let r=c1(e),i=Tu.get(e).spec.config,o=(t?n.undone:n.done).popEvent(e,r);if(!o)return null;let l=o.selection.resolve(o.transform.doc),u=(t?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),f=new Vl(t?u:o.remaining,t?o.remaining:u,null,0,-1);return o.transform.setSelection(l).setMeta(Tu,{redo:t,historyState:f})}let l2=!1,I4=null;function c1(n){let e=n.plugins;if(I4!=e){l2=!1,I4=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){l2=!0;break}}return l2}const Tu=new Ln("history"),DR=new Ln("closeHistory");function zR(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Zn({key:Tu,state:{init(){return new Vl(yo.empty,yo.empty,null,0,-1)},apply(e,t,r){return PR(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?$b:r=="historyRedo"?Hb:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function jb(n,e){return(t,r)=>{let i=Tu.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let o=RR(i,t,n);o&&r(e?o.scrollIntoView():o)}return!0}}const $b=jb(!1,!0),Hb=jb(!0,!0);function Jf(n,e){return Object.assign(n,{meta:{package:"@milkdown/plugin-history",...e}}),n}const j3=at("Undo",()=>()=>$b);Jf(j3,{displayName:"Command<undo>"});const $3=at("Redo",()=>()=>Hb);Jf($3,{displayName:"Command<redo>"});const H3=_o({},"historyProviderConfig");Jf(H3,{displayName:"Ctx<historyProviderConfig>"});const Vb=qi(n=>zR(n.get(H3.key)));Jf(Vb,{displayName:"Ctx<historyProviderPlugin>"});const V3=Zr("historyKeymap",{Undo:{shortcuts:"Mod-z",command:n=>{const e=n.get(Mt);return()=>e.call(j3.key)}},Redo:{shortcuts:["Mod-y","Shift-Mod-z"],command:n=>{const e=n.get(Mt);return()=>e.call($3.key)}}});Jf(V3.ctx,{displayName:"KeymapCtx<history>"});Jf(V3.shortcuts,{displayName:"Keymap<history>"});const LR=[H3,Vb,V3,j3,$3].flat();function FR(n,e){const{doc:t,selection:r}=n;if(!t||!r||!(r instanceof st||r instanceof Kr))return n;const{to:i}=r,o=e.type==="space"?Array(e.size).fill(" ").join(""):"	";return n.insertText(o,i)}const ng=_o({type:"space",size:2},"indentConfig");ng.meta={package:"@milkdown/plugin-indent",displayName:"Ctx<indentConfig>"};const qb=bS(n=>({Tab:(e,t)=>{const r=n.get(ng.key),{tr:i}=e,o=FR(i,r);return o.docChanged?(t==null||t(o),!0):!1}}));qb.meta={package:"@milkdown/plugin-indent",displayName:"Shortcut<indent>"};const BR=[ng,qb];function nv(n){if(!n)return!1;if(Array.isArray(n))return n.length>1?!1:nv(n[0]);const e=n.content;return e?nv(e):n.type==="text"}function UR(n){if(n.content.childCount===1){const e=n.content.firstChild;if((e==null?void 0:e.type.name)==="text"&&e.marks.length===0)return e;if((e==null?void 0:e.type.name)==="paragraph"&&e.childCount===1){const t=e.firstChild;if((t==null?void 0:t.type.name)==="text"&&t.marks.length===0)return t}}return!1}const Kb=qi(n=>{const e=n.get(is);n.update(ip,i=>({...i,editable:i.editable??(()=>!0)}));const t=new Ln("MILKDOWN_CLIPBOARD");return new Zn({key:t,props:{handlePaste:(i,o)=>{var l,u;const f=n.get(If),h=(u=(l=i.props).editable)==null?void 0:u.call(l,i.state),{clipboardData:g}=o;if(!h||!g||i.state.selection.$from.node().type.spec.code)return!1;const w=g.getData("text/plain"),k=g.getData("vscode-editor-data");if(k){const I=JSON.parse(k),W=I==null?void 0:I.mode;if(w&&W){const{tr:B}=i.state,z=LM("code_block",e);return B.replaceSelectionWith(z.create({language:W})).setSelection(st.near(B.doc.resolve(Math.max(0,B.selection.from-2)))).insertText(w.replace(/\r\n?/g,`
`)),i.dispatch(B),!0}}const b=g.getData("text/html");if(b.length===0&&w.length===0)return!1;const A=Iu.fromSchema(e);let O;if(b.length===0){const I=f(w);if(!I||typeof I=="string")return!1;O=zu.fromSchema(e).serializeFragment(I.content)}else{const I=document.createElement("template");I.innerHTML=b,O=I.content.cloneNode(!0),I.remove()}const F=A.parseSlice(O),V=UR(F);return V?(i.dispatch(i.state.tr.replaceSelectionWith(V,!0)),!0):(i.dispatch(i.state.tr.replaceSelection(F)),!0)},clipboardTextSerializer:i=>{const o=n.get(Pf);if(nv(i.content.toJSON()))return i.content.textBetween(0,i.content.size,`

`);const u=e.topNodeType.createAndFill(void 0,i.content);return u?o(u):""}}})});Kb.meta={displayName:"Prose<clipboard>",package:"@milkdown/plugin-clipboard"};const q3=_o({shouldAppend:n=>!(!n||["heading","paragraph"].includes(n.type.name)),getNode:n=>n.schema.nodes.paragraph.create()},"trailingConfig");q3.meta={package:"@milkdown/plugin-trailing",displayName:"Ctx<trailingConfig>"};const Jb=qi(n=>{const e=new Ln("MILKDOWN_TRAILING"),{shouldAppend:t,getNode:r}=n.get(q3.key),i=new Zn({key:e,state:{init:(o,l)=>{const u=l.tr.doc.lastChild;return t(u,l)},apply:(o,l,u,f)=>{if(!o.docChanged)return l;const h=o.doc.lastChild;return t(h,f)}},appendTransaction:(o,l,u)=>{const{doc:f,tr:h}=u,g=r==null?void 0:r(u),m=i.getState(u),w=f.content.size;if(!(!m||!g))return h.insert(w,g)}});return i});Jb.meta={package:"@milkdown/plugin-trailing",displayName:"Prose<trailing>"};const WR=[q3,Jb];var Gb=(n=>(n.CodeMirror="code-mirror",n.ListItem="list-item",n.LinkTooltip="link-tooltip",n.Cursor="cursor",n.ImageBlock="image-block",n.BlockEdit="block-edit",n.Toolbar="toolbar",n.Placeholder="placeholder",n.Table="table",n.Latex="latex",n))(Gb||{});const jR={cursor:!0,"list-item":!0,"link-tooltip":!0,"image-block":!0,"block-edit":!0,placeholder:!0,toolbar:!0,"code-mirror":!0,table:!0,latex:!0};async function $R(n,e,t){switch(n){case"code-mirror":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-B3KiKTSt-BSGGECQV.js").then(o=>o.E);return{defineFeature:i}},__vite__mapDeps([0,1,2,3,4]));return r(e,t)}case"list-item":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-Cuk7cL-r-Bs94TgCA.js");return{defineFeature:i}},__vite__mapDeps([5,2]));return r(e,t)}case"link-tooltip":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-DcRgwPLd-SfREQibH.js");return{defineFeature:i}},__vite__mapDeps([6,2,7,3,8,9,4]));return r(e,t)}case"image-block":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-BFsG6770-DCTCm6ou.js");return{defineFeature:i}},__vite__mapDeps([10,2,3,11]));return r(e,t)}case"cursor":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-CxJ9fxJm-D0N8mfGZ.js");return{defineFeature:i}},[]);return r(e,t)}case"block-edit":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-uHWmZXqe-Cx-VgnRy.js");return{defineFeature:i}},__vite__mapDeps([12,13,2,3,9,4,11]));return r(e,t)}case"placeholder":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-DOrkOhki-_0TglJKO.js");return{defineFeature:i}},__vite__mapDeps([14,13]));return r(e,t)}case"toolbar":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-CsEtSFhk-CHiHvMuS.js");return{defineFeature:i}},__vite__mapDeps([15,13,2,16,8,9,4,7,3]));return r(e,t)}case"table":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-CBrOT1fW-CJfiNSVE.js");return{defineFeature:i}},__vite__mapDeps([17,2,3,9,4]));return r(e,t)}case"latex":{const{defineFeature:r}=await Xo(async()=>{const{defineFeature:i}=await import("./index-s33c_M2f-C2bBqIn0.js");return{defineFeature:i}},__vite__mapDeps([18,16,13,2,1,3,4,8,9]));return r(e,t)}}}const HR=St([],"FeaturesCtx"),VR=St({},"CrepeCtx");function qR(n){return e=>{e.inject(HR,n)}}var Qb=n=>{throw TypeError(n)},Yb=(n,e,t)=>e.has(n)||Qb("Cannot "+t),Bi=(n,e,t)=>(Yb(n,e,"read from private field"),t?t.call(n):e.get(n)),Nm=(n,e,t)=>e.has(n)?Qb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Am=(n,e,t,r)=>(Yb(n,e,"write to private field"),e.set(n,t),t),mo,Jh,f1,d1;class Ef{constructor({root:e,features:t={},featureConfigs:r={},defaultValue:i=""}){Nm(this,mo),Nm(this,Jh),Nm(this,f1),Nm(this,d1,!0);var o;const l=Object.entries({...jR,...t}).filter(([,f])=>f).map(([f])=>f);Am(this,f1,(o=typeof e=="string"?document.querySelector(e):e)!=null?o:document.body),Am(this,mo,XA.make().config(f=>{f.inject(VR,this)}).config(qR(l)).config(f=>{f.set(l1,Bi(this,f1)),f.set(r1,i),f.set(ip,{editable:()=>Bi(this,d1)}),f.update(ng.key,h=>({...h,size:4}))}).use(AI).use(CS).use(LR).use(BR).use(WR).use(Kb).use(TR));const u=[];l.forEach(f=>{const h=r[f];u.push($R(f,Bi(this,mo),h))}),Am(this,Jh,Promise.all(u))}async create(){return await Bi(this,Jh),Bi(this,mo).create()}async destroy(){return await Bi(this,Jh),Bi(this,mo).destroy()}get editor(){return Bi(this,mo)}setReadonly(e){return Am(this,d1,!e),this}getMarkdown(){return Bi(this,mo).action(eI())}on(e){return Bi(this,mo).status!==Rv.Created?(Bi(this,mo).config(t=>{const r=t.get(xp);e(r)}),this):(Bi(this,mo).action(t=>{const r=t.get(xp);e(r)}),this)}}mo=new WeakMap;Jh=new WeakMap;f1=new WeakMap;d1=new WeakMap;Ef.Feature=Gb;function KR({note:n}){const[e,t]=Xe.useState(0),[r,i]=Xe.useState(!1),o=Xe.useRef(),l=Q4(),{get:u}=OC(f=>{const h=new Ef({root:f,features:{[Ef.Feature.ImageBlock]:!1,[Ef.Feature.Toolbar]:!1,[Ef.Feature.BlockEdit]:!1},featureConfigs:{[Ef.Feature.Placeholder]:{text:"type here...",mode:"doc"}}});return h.editor.config(g=>{g.get(xp).markdownUpdated((m,w,k)=>{w!==k&&(clearTimeout(o.current),o.current=setTimeout(()=>{const b=new Date().getTime();t(b),l({type:ap.UPDATE_NOTE,payload:{id:n.id,content:w,lastEdit:b}})},1e3))})}),h.editor.onStatusChange(g=>{g===Rv.Created&&i(!0)}),h});return Xe.useEffect(()=>{if(e===n.lastEdit||!r)return;u().action(tI(n.content))},[n,r]),vo.jsx(IC,{})}function JR({noteId:n}){const t=b8().notes[n]??{id:n,content:""};return vo.jsx("div",{className:"EditorArea",children:vo.jsx(PC,{children:vo.jsx(KR,{note:t})})})}function GR(){const n=Q4();return Xe.useEffect(()=>{bp.on("ready",async()=>{n({type:ap.UPDATE_RS_STATUS,payload:!0});const e=await G4.getFile("notes.json");try{const t=JSON.parse(e.data);n({type:ap.UPDATE_NOTE,payload:Object.values(t),isInit:!0})}catch{}})},[n]),vo.jsx(vo.Fragment,{children:vo.jsx(JR,{noteId:0})})}NC.createRoot(document.getElementById("root")).render(vo.jsx(Xe.StrictMode,{children:vo.jsx(_8,{children:vo.jsx(GR,{})})}));export{_o as $,Fu as A,Fn as B,Gb as C,Gt as D,us as E,_e as F,Lu as G,Pp as H,$f as I,Lp as J,Yl as K,Of as L,Mt as M,Ze as N,Uv as O,Zn as P,Lv as Q,O3 as R,Ne as S,st as T,$v as U,Kf as V,Kt as W,Wp as X,Eb as Y,Ob as Z,Xo as _,oD as a,Pb as a0,Tb as a1,Ib as a2,Ab as a3,Nb as a4,Rb as a5,Cb as a6,_b as a7,YR as a8,wE as a9,xt as aa,qe as ab,Xr as ac,nD as ad,g5 as ae,BA as af,gu as ag,N5 as ah,s7 as ai,Hb as aj,$b as ak,iN as al,ra as am,b1 as an,HM as ao,Jl as ap,Sp as aq,Xn as b,et as c,sM as d,qi as e,Ln as f,DM as g,bu as h,Hf as i,zu as j,A5 as k,as as l,tD as m,iI as n,iD as o,rD as p,ua as q,HR as r,Bu as s,Op as t,Dp as u,Vf as v,qf as w,Rp as x,yb as y,o5 as z};
